/*! For license information please see app.js.LICENSE.txt */
(()=>{var t={4796:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>ur});var n=-2;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(t[n]=r[n])}}return t}function s(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)}var o={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,s;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)a=t[e],s.set(a,i),i+=a.length;return s},Buf8:function(t){return new Uint8Array(t)},Buf16:function(t){return new Uint16Array(t)},Buf32:function(t){return new Int32Array(t)}},u={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)},Buf8:function(t){return new Array(t)},Buf16:function(t){return new Array(t)},Buf32:function(t){return new Array(t)}},c=function(){var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;return c=function(){return t},t},l=function(t,e,r,n,i){return(l=c()?o.arraySet:u.arraySet)(t,e,r,n,i)},h=function(t){return(h=c()?o.flattenChunks:u.flattenChunks)(t)},f=function(t){return(f=c()?o.Buf8:u.Buf8)(t)},d=function(t){return(d=c()?o.Buf16:u.Buf16)(t)},_=function(t){return(_=c()?o.Buf32:u.Buf32)(t)},p=function(){var t=!0;try{String.fromCharCode.apply(null,[0])}catch(e){t=!1}return p=function(){return t},t},g=function(){var t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){t=!1}return g=function(){return t},t},m=function(t){for(var e=f(256),r=0;r<256;r++)e[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;return e[254]=e[254]=1,m=function(t){return e[t]},e[t]};function b(t){var e,r,n,i,a,s=t.length,o=0;for(i=0;i<s;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),a=0,i=0;a<o;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e}function y(t,e){if(e<65534&&(t.subarray&&g()||!t.subarray&&p()))return String.fromCharCode.apply(null,s(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}function v(t,e){var r,n,i,a,s=e||t.length,o=new Array(2*s);for(n=0,r=0;r<s;)if((i=t[r++])<128)o[n++]=i;else if((a=m(i))>4)o[n++]=65533,r+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&r<s;)i=i<<6|63&t[r++],a--;a>1?o[n++]=65533:i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|1023&i)}return y(o,n)}function w(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+m(t[r])>e?r:e}function A(t,e,r,n){for(var i=65535&t|0,a=t>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{a=a+(i=i+e[n++]|0)|0}while(--s);i%=65521,a%=65521}return i|a<<16|0}var k=function(){var t=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();return k=function(){return t},t};function x(t,e,r,n){var i=k(),a=n+r;t^=-1;for(var s=n;s<a;s++)t=t>>>8^i[255&(t^e[s])];return-1^t}function E(t,e){var r,n,i,a,s,o,u,c,l,h,f,d,_,p,g,m,b,y,v,w,A,k,x,E,C;r=t.state,n=t.next_in,E=t.input,i=n+(t.avail_in-5),a=t.next_out,C=t.output,s=a-(e-t.avail_out),o=a+(t.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,h=r.wnext,f=r.window,d=r.hold,_=r.bits,p=r.lencode,g=r.distcode,m=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{_<15&&(d+=E[n++]<<_,_+=8,d+=E[n++]<<_,_+=8),y=p[d&m];e:for(;;){if(d>>>=v=y>>>24,_-=v,0==(v=y>>>16&255))C[a++]=65535&y;else{if(!(16&v)){if(0==(64&v)){y=p[(65535&y)+(d&(1<<v)-1)];continue e}if(32&v){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&y,(v&=15)&&(_<v&&(d+=E[n++]<<_,_+=8),w+=d&(1<<v)-1,d>>>=v,_-=v),_<15&&(d+=E[n++]<<_,_+=8,d+=E[n++]<<_,_+=8),y=g[d&b];r:for(;;){if(d>>>=v=y>>>24,_-=v,!(16&(v=y>>>16&255))){if(0==(64&v)){y=g[(65535&y)+(d&(1<<v)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(A=65535&y,_<(v&=15)&&(d+=E[n++]<<_,(_+=8)<v&&(d+=E[n++]<<_,_+=8)),(A+=d&(1<<v)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=v,_-=v,A>(v=a-s)){if((v=A-v)>l&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(k=0,x=f,0===h){if(k+=c-v,v<w){w-=v;do{C[a++]=f[k++]}while(--v);k=a-A,x=C}}else if(h<v){if(k+=c+h-v,(v-=h)<w){w-=v;do{C[a++]=f[k++]}while(--v);if(k=0,h<w){w-=v=h;do{C[a++]=f[k++]}while(--v);k=a-A,x=C}}}else if(k+=h-v,v<w){w-=v;do{C[a++]=f[k++]}while(--v);k=a-A,x=C}for(;w>2;)C[a++]=x[k++],C[a++]=x[k++],C[a++]=x[k++],w-=3;w&&(C[a++]=x[k++],w>1&&(C[a++]=x[k++]))}else{k=a-A;do{C[a++]=C[k++],C[a++]=C[k++],C[a++]=C[k++],w-=3}while(w>2);w&&(C[a++]=C[k++],w>1&&(C[a++]=C[k++]))}break}}break}}while(n<i&&a<o);n-=w=_>>3,d&=(1<<(_-=w<<3))-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=a<o?o-a+257:257-(a-o),r.hold=d,r.bits=_}var C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],S=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],I=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function P(t,e,r,n,i,a,s,o){var u,c,l,h,f,_,p,g,m,b=o.bits,y=0,v=0,w=0,A=0,k=0,x=0,E=0,P=0,R=0,B=0,O=null,D=0,F=d(16),j=d(16),M=null,L=0;for(y=0;y<=15;y++)F[y]=0;for(v=0;v<n;v++)F[e[r+v]]++;for(k=b,A=15;A>=1&&0===F[A];A--);if(k>A&&(k=A),0===A)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(w=1;w<A&&0===F[w];w++);for(k<w&&(k=w),P=1,y=1;y<=15;y++)if(P<<=1,(P-=F[y])<0)return-1;if(P>0&&(0===t||1!==A))return-1;for(j[1]=0,y=1;y<15;y++)j[y+1]=j[y]+F[y];for(v=0;v<n;v++)0!==e[r+v]&&(s[j[e[r+v]]++]=v);if(0===t?(O=M=s,_=19):1===t?(O=C,D-=257,M=S,L-=257,_=256):(O=T,M=I,_=-1),B=0,v=0,y=w,f=a,x=k,E=0,l=-1,h=(R=1<<k)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){p=y-E,s[v]<_?(g=0,m=s[v]):s[v]>_?(g=M[L+s[v]],m=O[D+s[v]]):(g=96,m=0),u=1<<y-E,w=c=1<<x;do{i[f+(B>>E)+(c-=u)]=p<<24|g<<16|m|0}while(0!==c);for(u=1<<y-1;B&u;)u>>=1;if(0!==u?(B&=u-1,B+=u):B=0,v++,0==--F[y]){if(y===A)break;y=e[r+s[v]]}if(y>k&&(B&h)!==l){for(0===E&&(E=k),f+=w,P=1<<(x=y-E);x+E<A&&!((P-=F[x+E])<=0);)x++,P<<=1;if(R+=1<<x,1===t&&R>852||2===t&&R>592)return 1;i[l=B&h]=k<<24|x<<16|f-a|0}}return 0!==B&&(i[f+B]=y-E<<24|64<<16|0),o.bits=k,0}var R=-2,B=12,O=30;function D(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function F(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=d(320),this.work=d(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(t,e){var r,n;return t?(n=new F,t.state=n,n.window=null,r=function(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?R:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,function(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,function(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=_(852),e.distcode=e.distdyn=_(592),e.sane=1,e.back=-1,0):R}(t)):R}(t))):R}(t,e),0!==r&&(t.state=null),r):R}var M,L,U=!0;function z(t){if(U){var e;for(M=_(512),L=_(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(P(1,t.lens,0,288,M,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;P(2,t.lens,0,32,L,0,t.work,{bits:5}),U=!1}t.lencode=M,t.lenbits=9,t.distcode=L,t.distbits=5}function $(t,e,r,n){var i,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=f(a.wsize)),n>=a.wsize?(l(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),l(a.window,e,r-n,i,a.wnext),(n-=i)?(l(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function N(t,e){var r,n,i,a,s,o,u,c,h,d,_,p,g,m,b,y,v,w,k,C,S,T,I,F,j=0,M=f(4),L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return R;(r=t.state).mode===B&&(r.mode=13),s=t.next_out,i=t.output,u=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,c=r.hold,h=r.bits,d=o,_=u,T=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;h<16;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}if(2&r.wrap&&35615===c){r.check=0,M[0]=255&c,M[1]=c>>>8&255,r.check=x(r.check,M,2,0),c=0,h=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=O;break}if(8!=(15&c)){t.msg="unknown compression method",r.mode=O;break}if(h-=4,S=8+(15&(c>>>=4)),0===r.wbits)r.wbits=S;else if(S>r.wbits){t.msg="invalid window size",r.mode=O;break}r.dmax=1<<S,t.adler=r.check=1,r.mode=512&c?10:B,c=0,h=0;break;case 2:for(;h<16;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}if(r.flags=c,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=O;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=O;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(M[0]=255&c,M[1]=c>>>8&255,r.check=x(r.check,M,2,0)),c=0,h=0,r.mode=3;case 3:for(;h<32;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}r.head&&(r.head.time=c),512&r.flags&&(M[0]=255&c,M[1]=c>>>8&255,M[2]=c>>>16&255,M[3]=c>>>24&255,r.check=x(r.check,M,4,0)),c=0,h=0,r.mode=4;case 4:for(;h<16;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(M[0]=255&c,M[1]=c>>>8&255,r.check=x(r.check,M,2,0)),c=0,h=0,r.mode=5;case 5:if(1024&r.flags){for(;h<16;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(M[0]=255&c,M[1]=c>>>8&255,r.check=x(r.check,M,2,0)),c=0,h=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((p=r.length)>o&&(p=o),p&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),l(r.head.extra,n,a,p,S)),512&r.flags&&(r.check=x(r.check,n,p,a)),o-=p,a+=p,r.length-=p),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break t;p=0;do{S=n[a+p++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S))}while(S&&p<o);if(512&r.flags&&(r.check=x(r.check,n,p,a)),o-=p,a+=p,S)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break t;p=0;do{S=n[a+p++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S))}while(S&&p<o);if(512&r.flags&&(r.check=x(r.check,n,p,a)),o-=p,a+=p,S)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;h<16;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}if(c!==(65535&r.check)){t.msg="header crc mismatch",r.mode=O;break}c=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=B;break;case 10:for(;h<32;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}t.adler=r.check=D(c),c=0,h=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=h,2;t.adler=r.check=1,r.mode=B;case B:if(5===e||6===e)break t;case 13:if(r.last){c>>>=7&h,h-=7&h,r.mode=27;break}for(;h<3;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}switch(r.last=1&c,h-=1,3&(c>>>=1)){case 0:r.mode=14;break;case 1:if(z(r),r.mode=20,6===e){c>>>=2,h-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=O}c>>>=2,h-=2;break;case 14:for(c>>>=7&h,h-=7&h;h<32;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=O;break}if(r.length=65535&c,c=0,h=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(p=r.length){if(p>o&&(p=o),p>u&&(p=u),0===p)break t;l(i,n,a,p,s),o-=p,a+=p,u-=p,s+=p,r.length-=p;break}r.mode=B;break;case 17:for(;h<14;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}if(r.nlen=257+(31&c),c>>>=5,h-=5,r.ndist=1+(31&c),c>>>=5,h-=5,r.ncode=4+(15&c),c>>>=4,h-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=O;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;h<3;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}r.lens[L[r.have++]]=7&c,c>>>=3,h-=3}for(;r.have<19;)r.lens[L[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},T=P(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,T){t.msg="invalid code lengths set",r.mode=O;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;y=(j=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,v=65535&j,!((b=j>>>24)<=h);){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}if(v<16)c>>>=b,h-=b,r.lens[r.have++]=v;else{if(16===v){for(F=b+2;h<F;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}if(c>>>=b,h-=b,0===r.have){t.msg="invalid bit length repeat",r.mode=O;break}S=r.lens[r.have-1],p=3+(3&c),c>>>=2,h-=2}else if(17===v){for(F=b+3;h<F;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}h-=b,S=0,p=3+(7&(c>>>=b)),c>>>=3,h-=3}else{for(F=b+7;h<F;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}h-=b,S=0,p=11+(127&(c>>>=b)),c>>>=7,h-=7}if(r.have+p>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=O;break}for(;p--;)r.lens[r.have++]=S}}if(r.mode===O)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=O;break}if(r.lenbits=9,I={bits:r.lenbits},T=P(1,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,T){t.msg="invalid literal/lengths set",r.mode=O;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},T=P(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,T){t.msg="invalid distances set",r.mode=O;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(o>=6&&u>=258){t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=h,E(t,_),s=t.next_out,i=t.output,u=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,c=r.hold,h=r.bits,r.mode===B&&(r.back=-1);break}for(r.back=0;y=(j=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,v=65535&j,!((b=j>>>24)<=h);){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}if(y&&0==(240&y)){for(w=b,k=y,C=v;y=(j=r.lencode[C+((c&(1<<w+k)-1)>>w)])>>>16&255,v=65535&j,!(w+(b=j>>>24)<=h);){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}c>>>=w,h-=w,r.back+=w}if(c>>>=b,h-=b,r.back+=b,r.length=v,0===y){r.mode=26;break}if(32&y){r.back=-1,r.mode=B;break}if(64&y){t.msg="invalid literal/length code",r.mode=O;break}r.extra=15&y,r.mode=22;case 22:if(r.extra){for(F=r.extra;h<F;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;y=(j=r.distcode[c&(1<<r.distbits)-1])>>>16&255,v=65535&j,!((b=j>>>24)<=h);){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}if(0==(240&y)){for(w=b,k=y,C=v;y=(j=r.distcode[C+((c&(1<<w+k)-1)>>w)])>>>16&255,v=65535&j,!(w+(b=j>>>24)<=h);){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}c>>>=w,h-=w,r.back+=w}if(c>>>=b,h-=b,r.back+=b,64&y){t.msg="invalid distance code",r.mode=O;break}r.offset=v,r.extra=15&y,r.mode=24;case 24:if(r.extra){for(F=r.extra;h<F;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=O;break}r.mode=25;case 25:if(0===u)break t;if(p=_-u,r.offset>p){if((p=r.offset-p)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=O;break}p>r.wnext?(p-=r.wnext,g=r.wsize-p):g=r.wnext-p,p>r.length&&(p=r.length),m=r.window}else m=i,g=s-r.offset,p=r.length;p>u&&(p=u),u-=p,r.length-=p;do{i[s++]=m[g++]}while(--p);0===r.length&&(r.mode=21);break;case 26:if(0===u)break t;i[s++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;h<32;){if(0===o)break t;o--,c|=n[a++]<<h,h+=8}if(_-=u,t.total_out+=_,r.total+=_,_&&(t.adler=r.check=r.flags?x(r.check,i,_,s-_):A(r.check,i,_,s-_)),_=u,(r.flags?c:D(c))!==r.check){t.msg="incorrect data check",r.mode=O;break}c=0,h=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;h<32;){if(0===o)break t;o--,c+=n[a++]<<h,h+=8}if(c!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=O;break}c=0,h=0}r.mode=29;case 29:T=1;break t;case O:T=-3;break t;case 31:return-4;default:return R}return t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=h,(r.wsize||_!==t.avail_out&&r.mode<O&&(r.mode<27||4!==e))&&$(t,t.output,t.next_out,_-t.avail_out),d-=t.avail_in,_-=t.avail_out,t.total_in+=d,t.total_out+=_,r.total+=_,r.wrap&&_&&(t.adler=r.check=r.flags?x(r.check,i,_,t.next_out-_):A(r.check,i,_,t.next_out-_)),t.data_type=r.bits+(r.last?64:0)+(r.mode===B?128:0)+(20===r.mode||15===r.mode?256:0),(0===d&&0===_||4===e)&&0===T&&(T=-5),T}function H(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?R:11===r.mode&&A(1,e,n,0)!==r.check?-3:$(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):R}var q={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function W(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function V(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var G=Object.prototype.toString,K=function t(e){if(!(this instanceof t))return new t(e);this.options=a({chunkSize:16384,windowBits:0,to:""},e||{});var r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,0===r.windowBits&&(r.windowBits=-15)),!(r.windowBits>=0&&r.windowBits<16)||e&&e.windowBits||(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&0==(15&r.windowBits)&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new W,this.strm.avail_out=0;var n,i,s,o=j(this.strm,r.windowBits);if(0!==o)throw new Error(q[o]);if(this.header=new V,n=this.strm,i=this.header,n&&n.state&&(0==(2&(s=n.state).wrap)||(s.head=i,i.done=!1)),r.dictionary&&("string"==typeof r.dictionary?r.dictionary=b(r.dictionary):"[object ArrayBuffer]"===G.call(r.dictionary)&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&0!==(o=H(this.strm,r.dictionary))))throw new Error(q[o])};function X(t){for(var e=t.length;--e>=0;)t[e]=0}K.prototype.push=function(t,e){var r,n,i,a,o,u,c=this.strm,h=this.options.chunkSize,d=this.options.dictionary,_=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?c.input=function(t){for(var e=new Uint8Array(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e}(t):"[object ArrayBuffer]"===G.call(t)?c.input=new Uint8Array(t):c.input=t,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=f(h),c.next_out=0,c.avail_out=h),2===(r=N(c,0))&&d&&(u="string"==typeof d?b(d):"[object ArrayBuffer]"===G.call(d)?new Uint8Array(d):d,r=H(this.strm,u)),-5===r&&!0===_&&(r=0,_=!1),1!==r&&0!==r)return this.onEnd(r),this.ended=!0,!1;c.next_out&&(0!==c.avail_out&&1!==r&&(0!==c.avail_in||4!==n&&2!==n)||("string"===this.options.to?(i=w(c.output,c.next_out),a=c.next_out-i,o=v(c.output,i),c.next_out=a,c.avail_out=h-a,a&&l(c.output,c.output,i,a,0),this.onData(o)):this.onData(s(c.output,c.next_out)))),0===c.avail_in&&0===c.avail_out&&(_=!0)}while((c.avail_in>0||0===c.avail_out)&&1!==r);return 1===r&&(n=4),4===n?(r=function(t){if(!t||!t.state)return R;var e=t.state;return e.window&&(e.window=null),t.state=null,0}(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==n||(this.onEnd(0),c.avail_out=0,!0)},K.prototype.onData=function(t){this.chunks.push(t)},K.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Y,J,Q,Z,tt,et,rt,nt,it,at=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],st=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ut=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function ct(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function lt(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function ht(t){return t<256?Q[t]:Q[256+(t>>>7)]}function ft(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function dt(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,ft(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function _t(t,e,r){dt(t,r[2*e],r[2*e+1])}function pt(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function gt(t,e,r){var n,i,a=new Array(16),s=0;for(n=1;n<=15;n++)a[n]=s=s+r[n-1]<<1;for(i=0;i<=e;i++){var o=t[2*i+1];0!==o&&(t[2*i]=pt(a[o]++,o))}}function mt(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function bt(t){t.bi_valid>8?ft(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function yt(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function vt(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&yt(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!yt(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function wt(t,e,r){var n,i,a,s,o=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===n?_t(t,i,e):(_t(t,(a=Z[i])+256+1,e),0!==(s=at[a])&&dt(t,i-=tt[a],s),_t(t,a=ht(--n),r),0!==(s=st[a])&&dt(t,n-=et[a],s))}while(o<t.last_lit);_t(t,256,e)}function At(t,e){var r,n,i,a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<u;r++)0!==a[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)a[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=s[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;r>=1;r--)vt(t,a,r);i=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],vt(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,vt(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,a,s,o,u=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,_=e.stat_desc.max_length,p=0;for(a=0;a<=15;a++)t.bl_count[a]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)(a=u[2*u[2*(n=t.heap[r])+1]+1]+1)>_&&(a=_,p++),u[2*n+1]=a,n>c||(t.bl_count[a]++,s=0,n>=d&&(s=f[n-d]),o=u[2*n],t.opt_len+=o*(a+s),h&&(t.static_len+=o*(l[2*n+1]+s)));if(0!==p){do{for(a=_-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[_]--,p-=2}while(p>0);for(a=_;0!==a;a--)for(n=t.bl_count[a];0!==n;)(i=t.heap[--r])>c||(u[2*i+1]!==a&&(t.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}(t,e),gt(a,c,t.bl_count)}function kt(t,e,r){var n,i,a=-1,s=e[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++o<u&&i===s||(o<c?t.bl_tree[2*i]+=o:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,a=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4))}function xt(t,e,r){var n,i,a=-1,s=e[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++o<u&&i===s)){if(o<c)do{_t(t,i,t.bl_tree)}while(0!=--o);else 0!==i?(i!==a&&(_t(t,i,t.bl_tree),o--),_t(t,16,t.bl_tree),dt(t,o-3,2)):o<=10?(_t(t,17,t.bl_tree),dt(t,o-3,3)):(_t(t,18,t.bl_tree),dt(t,o-11,7));o=0,a=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4)}}var Et=!1;function Ct(t,e,r,n){dt(t,0+(n?1:0),3),function(t,e,r,n){bt(t),ft(t,r),ft(t,~r),l(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r)}function St(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(Z[r]+256+1)]++,t.dyn_dtree[2*ht(e)]++),t.last_lit===t.lit_bufsize-1}var Tt=258,It=262,Pt=103,Rt=113,Bt=666;function Ot(t,e){return t.msg=q[e],e}function Dt(t){return(t<<1)-(t>4?9:0)}function Ft(t){for(var e=t.length;--e>=0;)t[e]=0}function jt(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(l(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function Mt(t,e){(function(t,e,r,n){var i,a,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),At(t,t.l_desc),At(t,t.d_desc),s=function(t){var e;for(kt(t,t.dyn_ltree,t.l_desc.max_code),kt(t,t.dyn_dtree,t.d_desc.max_code),At(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*ut[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==e?Ct(t,e,r,n):4===t.strategy||a===i?(dt(t,2+(n?1:0),3),wt(t,Y,J)):(dt(t,4+(n?1:0),3),function(t,e,r,n){var i;for(dt(t,e-257,5),dt(t,r-1,5),dt(t,n-4,4),i=0;i<n;i++)dt(t,t.bl_tree[2*ut[i]+1],3);xt(t,t.dyn_ltree,e-1),xt(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),wt(t,t.dyn_ltree,t.dyn_dtree)),mt(t),n&&bt(t)})(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,jt(t.strm)}function Lt(t,e){t.pending_buf[t.pending++]=e}function Ut(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function zt(t,e){var r,n,i=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match,u=t.strstart>t.w_size-It?t.strstart-(t.w_size-It):0,c=t.window,l=t.w_mask,h=t.prev,f=t.strstart+Tt,d=c[a+s-1],_=c[a+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(c[(r=e)+s]===_&&c[r+s-1]===d&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<f);if(n=Tt-(f-a),a=f-Tt,n>s){if(t.match_start=e,s=n,n>=o)break;d=c[a+s-1],_=c[a+s]}}}while((e=h[e&l])>u&&0!=--i);return s<=t.lookahead?s:t.lookahead}function $t(t){var e,r,n,i,a,s,o,u,c,h,f=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-It)){l(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=f?n-f:0}while(--r);e=r=f;do{n=t.prev[--e],t.prev[e]=n>=f?n-f:0}while(--r);i+=f}if(0===t.strm.avail_in)break;if(s=t.strm,o=t.window,u=t.strstart+t.lookahead,c=i,h=void 0,(h=s.avail_in)>c&&(h=c),r=0===h?0:(s.avail_in-=h,l(o,s.input,s.next_in,h,u),1===s.state.wrap?s.adler=A(s.adler,o,h,u):2===s.state.wrap&&(s.adler=x(s.adler,o,h,u)),s.next_in+=h,s.total_in+=h,h),t.lookahead+=r,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+3-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<It&&0!==t.strm.avail_in)}function Nt(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if($t(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Mt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-It&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Mt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Mt(t,!1),t.strm.avail_out),1)}function Ht(t,e){for(var r,n;;){if(t.lookahead<It){if($t(t),t.lookahead<It&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-It&&(t.match_length=zt(t,r)),t.match_length>=3)if(n=St(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=St(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2}function qt(t,e){for(var r,n,i;;){if(t.lookahead<It){if($t(t),t.lookahead<It&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-It&&(t.match_length=zt(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=St(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Mt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=St(t,0,t.window[t.strstart-1]))&&Mt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=St(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2}function Wt(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}var Vt=function(){var t=[new Wt(0,0,0,0,Nt),new Wt(4,4,8,4,Ht),new Wt(4,5,16,8,Ht),new Wt(4,6,32,32,Ht),new Wt(4,4,16,16,qt),new Wt(8,16,32,32,qt),new Wt(8,16,128,128,qt),new Wt(8,32,128,256,qt),new Wt(32,128,258,1024,qt),new Wt(32,258,258,4096,qt)];return Vt=function(){return t},t};function Gt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=d(1146),this.dyn_dtree=d(122),this.bl_tree=d(78),Ft(this.dyn_ltree),Ft(this.dyn_dtree),Ft(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=d(16),this.heap=d(573),Ft(this.heap),this.heap_len=0,this.heap_max=0,this.depth=d(573),Ft(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Kt(t){var e=function(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:Rt,t.adler=2===e.wrap?0:1,e.last_flush=0,function(t){Et||(function(){var t,e,r,n,i,a=new Array(16);for(X(Y=new Array(576)),X(J=new Array(60)),X(Q=new Array(512)),X(Z=new Array(256)),X(tt=new Array(29)),X(et=new Array(30)),r=0,n=0;n<28;n++)for(tt[n]=r,t=0;t<1<<at[n];t++)Z[r++]=n;for(Z[r-1]=n,i=0,n=0;n<16;n++)for(et[n]=i,t=0;t<1<<st[n];t++)Q[i++]=n;for(i>>=7;n<30;n++)for(et[n]=i<<7,t=0;t<1<<st[n]-7;t++)Q[256+i++]=n;for(e=0;e<=15;e++)a[e]=0;for(t=0;t<=143;)Y[2*t+1]=8,t++,a[8]++;for(;t<=255;)Y[2*t+1]=9,t++,a[9]++;for(;t<=279;)Y[2*t+1]=7,t++,a[7]++;for(;t<=287;)Y[2*t+1]=8,t++,a[8]++;for(gt(Y,287,a),t=0;t<30;t++)J[2*t+1]=5,J[2*t]=pt(t,5);rt=new ct(Y,at,257,286,15),nt=new ct(J,st,0,30,15),it=new ct(new Array(0),ot,0,19,7)}(),Et=!0),t.l_desc=new lt(t.dyn_ltree,rt),t.d_desc=new lt(t.dyn_dtree,nt),t.bl_desc=new lt(t.bl_tree,it),t.bi_buf=0,t.bi_valid=0,mt(t)}(e),0):Ot(t,n)}(t);return 0===e&&function(t){t.window_size=2*t.w_size,Ft(t.head);var e=Vt();t.max_lazy_match=e[t.level].max_lazy,t.good_match=e[t.level].good_length,t.nice_match=e[t.level].nice_length,t.max_chain_length=e[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function Xt(t,e){var r,i,a,s;if(!t||!t.state||e>5||e<0)return t?Ot(t,n):n;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===Bt&&4!==e)return Ot(t,0===t.avail_out?-5:n);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,Lt(i,31),Lt(i,139),Lt(i,8),i.gzhead?(Lt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Lt(i,255&i.gzhead.time),Lt(i,i.gzhead.time>>8&255),Lt(i,i.gzhead.time>>16&255),Lt(i,i.gzhead.time>>24&255),Lt(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),Lt(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Lt(i,255&i.gzhead.extra.length),Lt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=x(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(Lt(i,0),Lt(i,0),Lt(i,0),Lt(i,0),Lt(i,0),Lt(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),Lt(i,3),i.status=Rt);else{var o=8+(i.w_bits-8<<4)<<8;o|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(o|=32),o+=31-o%31,i.status=Rt,Ut(i,o),0!==i.strstart&&(Ut(i,t.adler>>>16),Ut(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=x(t.adler,i.pending_buf,i.pending-a,a)),jt(t),a=i.pending,i.pending!==i.pending_buf_size));)Lt(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=x(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=x(t.adler,i.pending_buf,i.pending-a,a)),jt(t),a=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Lt(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>a&&(t.adler=x(t.adler,i.pending_buf,i.pending-a,a)),0===s&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=x(t.adler,i.pending_buf,i.pending-a,a)),jt(t),a=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Lt(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>a&&(t.adler=x(t.adler,i.pending_buf,i.pending-a,a)),0===s&&(i.status=Pt)}else i.status=Pt;if(i.status===Pt&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&jt(t),i.pending+2<=i.pending_buf_size&&(Lt(i,255&t.adler),Lt(i,t.adler>>8&255),t.adler=0,i.status=Rt)):i.status=Rt),0!==i.pending){if(jt(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&Dt(e)<=Dt(r)&&4!==e)return Ot(t,-5);if(i.status===Bt&&0!==t.avail_in)return Ot(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&i.status!==Bt){var u=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&($t(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=St(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=Tt){if($t(t),t.lookahead<=Tt&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=t.strstart+Tt;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=Tt-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=St(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=St(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2}(i,e):Vt()[i.level].func(i,e);if(3!==u&&4!==u||(i.status=Bt),1===u||3===u)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===u&&(1===e?function(t){dt(t,2,3),_t(t,256,Y),function(t){16===t.bi_valid?(ft(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}(i):5!==e&&(Ct(i,0,0,!1),3===e&&(Ft(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),jt(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(Lt(i,255&t.adler),Lt(i,t.adler>>8&255),Lt(i,t.adler>>16&255),Lt(i,t.adler>>24&255),Lt(i,255&t.total_in),Lt(i,t.total_in>>8&255),Lt(i,t.total_in>>16&255),Lt(i,t.total_in>>24&255)):(Ut(i,t.adler>>>16),Ut(i,65535&t.adler)),jt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)}var Yt=Object.prototype.toString,Jt=function(t){this.options=a({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new W,this.strm.avail_out=0;var r,i,s=function(t,e,r,i,a,s){if(!t)return n;var o=1;if(-1===e&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),a<1||a>9||8!==r||i<8||i>15||e<0||e>9||s<0||s>4)return Ot(t,n);8===i&&(i=9);var u=new Gt;return t.state=u,u.strm=t,u.wrap=o,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=f(2*u.w_size),u.head=d(u.hash_size),u.prev=d(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=f(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=r,Kt(t)}(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==s)throw new Error(q[s]);if(e.header&&(r=this.strm,i=e.header,r&&r.state&&(2!==r.state.wrap||(r.state.gzhead=i))),e.dictionary){var o;if(o="string"==typeof e.dictionary?b(e.dictionary):"[object ArrayBuffer]"===Yt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,s=function(t,e){var r,i,a,s,o,u,c,h,d=e.length;if(!t||!t.state)return n;if(2===(s=(r=t.state).wrap)||1===s&&42!==r.status||r.lookahead)return n;for(1===s&&(t.adler=A(t.adler,e,d,0)),r.wrap=0,d>=r.w_size&&(0===s&&(Ft(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=f(r.w_size),l(h,e,d-r.w_size,r.w_size,0),e=h,d=r.w_size),o=t.avail_in,u=t.next_in,c=t.input,t.avail_in=d,t.next_in=0,t.input=e,$t(r);r.lookahead>=3;){i=r.strstart,a=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++}while(--a);r.strstart=i,r.lookahead=2,$t(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=u,t.input=c,t.avail_in=o,r.wrap=s,0}(this.strm,o),0!==s)throw new Error(q[s]);this._dict_set=!0}};Jt.prototype.push=function(t,e){var r,i,a,o=this.strm,u=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=b(t):"[object ArrayBuffer]"===Yt.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=f(u),o.next_out=0,o.avail_out=u),1!==(r=Xt(o,i))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(y(a=s(o.output,o.next_out),a.length)):this.onData(s(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==r);return 4===i?(r=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&e!==Pt&&e!==Rt&&e!==Bt?Ot(t,n):(t.state=null,e===Rt?Ot(t,-3):0):n}(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==i||(this.onEnd(0),o.avail_out=0,!0)},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Qt={Promise},Zt={base64:!0,array:!0,string:!0,nodebuffer:!1,nodestream:!1,get arraybuffer(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},get uint8array(){return"undefined"!=typeof Uint8Array},get blob(){return te()}},te=function(){var t;if("undefined"==typeof ArrayBuffer)t=!1;else{var e=new ArrayBuffer(0);try{t=0===new Blob([e],{type:"application/zip"}).size}catch(e){t=!1}}return te=function(){return t},t},ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function re(t){return t}function ne(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}function ie(t,e,r){var n=[],i=0,a=t.length;if(a<=r)return String.fromCharCode.apply(null,t);for(;i<a;)"array"===e?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,a)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,a)))),i+=r;return n.join("")}var ae=function(){var t;try{t=Zt.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){t=!1}return ae=function(){return t},t};function se(t){var e=65536,r=he(t),n=!0;if("uint8array"===r&&(n=ae()),n)for(;e>1;)try{return ie(t,r,e)}catch(t){e=Math.floor(e/2)}return function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}(t)}var oe=se;function ue(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}var ce={string:{string:re,array:function(t){return ne(t,new Array(t.length))},arraybuffer:function(t){return ce.string.uint8array(t).buffer},uint8array:function(t){return ne(t,new Uint8Array(t.length))}},array:{string:se,array:re,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)}},arraybuffer:{string:function(t){return se(new Uint8Array(t))},array:function(t){return ue(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:re,uint8array:function(t){return new Uint8Array(t)}},uint8array:{string:se,array:function(t){return ue(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:re}},le=function(t,e){if(e||(e=""),!t)return e;fe(t);var r=he(e);return ce[r][t](e)},he=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":Zt.uint8array&&t instanceof Uint8Array?"uint8array":Zt.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},fe=function(t){if(!Zt[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},de=65535,_e=-1,pe=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)n+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return n},ge=function(t,e,r){setTimeout((function(){t.apply(r||null,e||[])}),0)},me=function(){var t,e,r=arguments,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.hasOwnProperty.call(r[t],e)&&void 0===n[e]&&(n[e]=r[t][e]);return n},be=function(t,e,r,n,i){return Qt.Promise.resolve(e).then((function(t){return Zt.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new Qt.Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){r(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(e){var a,s=he(e);return s?("arraybuffer"===s?e=le("uint8array",e):"string"===s&&(i?e=function(t){var e,r,n,i,a,s,o=0,u=0,c="data:";if(t.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var l,h=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===ee.charAt(64)&&h--,t.charAt(t.length-2)===ee.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=Zt.uint8array?new Uint8Array(0|h):new Array(0|h);o<t.length;)e=ee.indexOf(t.charAt(o++))<<2|(i=ee.indexOf(t.charAt(o++)))>>4,r=(15&i)<<4|(a=ee.indexOf(t.charAt(o++)))>>2,n=(3&a)<<6|(s=ee.indexOf(t.charAt(o++))),l[u++]=e,64!==a&&(l[u++]=r),64!==s&&(l[u++]=n);return l}(e):r&&!0!==n&&(e=ne(a=e,Zt.uint8array?new Uint8Array(a.length):new Array(a.length)))),e):Qt.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))},ye=function(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null};ye.prototype.push=function(t){this.emit("data",t)},ye.prototype.end=function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},ye.prototype.error=function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},ye.prototype.on=function(t,e){return this._listeners[t].push(e),this},ye.prototype.cleanUp=function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},ye.prototype.emit=function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},ye.prototype.pipe=function(t){return t.registerPrevious(this)},ye.prototype.registerPrevious=function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},ye.prototype.pause=function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},ye.prototype.resume=function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},ye.prototype.flush=function(){},ye.prototype.processChunk=function(t){this.push(t)},ye.prototype.withStreamInfo=function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},ye.prototype.mergeStreamInfo=function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},ye.prototype.lock=function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},ye.prototype.toString=function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t};var ve=function(t){for(var e=new Array(256),r=0;r<256;r++)e[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;return e[254]=e[254]=1,ve=function(t){return e[t]},e[t]},we=function(t){return function(t){var e,r,n,i,a,s=t.length,o=0;for(i=0;i<s;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=Zt.uint8array?new Uint8Array(o):new Array(o),a=0,i=0;a<o;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e}(t)},Ae=function(t){return function(t){var e,r,n,i,a=t.length,s=new Array(2*a);for(r=0,e=0;e<a;)if((n=t[e++])<128)s[r++]=n;else if((i=ve(n))>4)s[r++]=65533,e+=i-1;else{for(n&=2===i?31:3===i?15:7;i>1&&e<a;)n=n<<6|63&t[e++],i--;i>1?s[r++]=65533:n<65536?s[r++]=n:(n-=65536,s[r++]=55296|n>>10&1023,s[r++]=56320|1023&n)}return s.length!==r&&(s.subarray?s=s.subarray(0,r):s.length=r),oe(s)}(t=le(Zt.uint8array?"uint8array":"array",t))},ke=function(t){function e(){t.call(this,"utf-8 decode"),this.leftOver=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(t){var e=le(Zt.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(Zt.uint8array){var r=e;(e=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),e.set(r,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var n=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+ve(t[r])>e?r:e}(e),i=e;n!==e.length&&(Zt.uint8array?(i=e.subarray(0,n),this.leftOver=e.subarray(n,e.length)):(i=e.slice(0,n),this.leftOver=e.slice(n,e.length))),this.push({data:Ae(i),meta:t.meta})},e.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:Ae(this.leftOver),meta:{}}),this.leftOver=null)},e}(ye),xe=function(t){function e(){t.call(this,"utf-8 encode")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(t){this.push({data:we(t.data),meta:t.meta})},e}(ye),Ee=function(t){function e(e){t.call(this,"ConvertWorker to "+e),this.destType=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(t){this.push({data:le(this.destType,t.data),meta:t.meta})},e}(ye);function Ce(t,e){return new Qt.Promise((function(r,n){var i=[],a=t._internalType,s=t._outputType,o=t._mimeType;t.on("data",(function(t,r){i.push(t),e&&e(r)})).on("error",(function(t){i=[],n(t)})).on("end",(function(){try{var t=function(t,e,r){switch(t){case"blob":return function(t,e){return fe("blob"),new Blob([t],{type:e})}(le("arraybuffer",e),r);case"base64":return function(t){for(var e,r,n,i,a,s,o,u=[],c=0,l=t.length,h=l,f="string"!=typeof t;c<t.length;)h=l-c,f?(e=t[c++],r=c<l?t[c++]:0,n=c<l?t[c++]:0):(e=t.charCodeAt(c++),r=c<l?t.charCodeAt(c++):0,n=c<l?t.charCodeAt(c++):0),i=e>>2,a=(3&e)<<4|r>>4,s=h>1?(15&r)<<2|n>>6:64,o=h>2?63&n:64,u.push(ee.charAt(i)+ee.charAt(a)+ee.charAt(s)+ee.charAt(o));return u.join("")}(e);default:return le(t,e)}}(s,function(t,e){var r,n=0,i=null,a=0;for(r=0;r<e.length;r++)a+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(a),r=0;r<e.length;r++)i.set(e[r],n),n+=e[r].length;return i;default:throw new Error("concat : unsupported type '"+t+"'")}}(a,i),o);r(t)}catch(t){n(t)}i=[]})).resume()}))}var Se=function(t,e,r){var n=e;switch(e){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=e,this._mimeType=r,fe(n),this._worker=t.pipe(new Ee(n)),t.lock()}catch(t){this._worker=new ye("error"),this._worker.error(t)}};Se.prototype.accumulate=function(t){return Ce(this,t)},Se.prototype.on=function(t,e){var r=this;return"data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta)})):this._worker.on(t,(function(){ge(e,arguments,r)})),this},Se.prototype.resume=function(){return ge(this._worker.resume,[],this._worker),this},Se.prototype.pause=function(){return this._worker.pause(),this};var Te=Object.freeze({__proto__:null,base64:!1,binary:!1,dir:!1,createFolders:!0,date:null,compression:null,compressionOptions:null,comment:null,unixPermissions:null,dosPermissions:null}),Ie=function(t){function e(e){t.call(this,"DataWorker");var r=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(t){r.dataIsReady=!0,r.data=t,r.max=t&&t.length||0,r.type=he(t),r.isPaused||r._tickAndRepeat()}),(function(t){r.error(t)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.cleanUp=function(){t.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,ge(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(ge(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e}(ye),Pe=function(t){function e(e){t.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(e){if(e){var r=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=r+e.data.length}t.prototype.processChunk.call(this,e)},e}(ye),Re=function(){for(var t=[],e=0;e<256;e++){for(var r=e,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;t[e]=r}return Re=function(){return t},t};function Be(t,e){return void 0!==t&&t.length?"string"!==he(t)?function(t,e,r,n){var i=Re(),a=0+r;t^=-1;for(var s=0;s<a;s++)t=t>>>8^i[255&(t^e[s])];return-1^t}(0|e,t,t.length):function(t,e,r,n){var i=Re(),a=0+r;t^=-1;for(var s=0;s<a;s++)t=t>>>8^i[255&(t^e.charCodeAt(s))];return-1^t}(0|e,t,t.length):0}var Oe=function(t){function e(){t.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(t){this.streamInfo.crc32=Be(t.data,this.streamInfo.crc32||0),this.push(t)},e}(ye),De=function(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i};De.prototype.getContentWorker=function(){var t=new Ie(Qt.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Pe("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},De.prototype.getCompressedWorker=function(){return new Ie(Qt.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)},De.createWorkerFrom=function(t,e,r){return t.pipe(new Oe).pipe(new Pe("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new Pe("compressedSize")).withStreamInfo("compression",e)};var Fe=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};Fe.prototype.internalStream=function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(r=t.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(e=e.pipe(new xe)),!i&&n&&(e=e.pipe(new ke))}catch(t){(e=new ye("error")).error(t)}return new Se(e,r,"")},Fe.prototype.async=function(t,e){return this.internalStream(t).accumulate(e)},Fe.prototype._compressWorker=function(t,e){if(this._data instanceof De&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new xe)),De.createWorkerFrom(r,t,e)},Fe.prototype._decompressWorker=function(){return this._data instanceof De?this._data.getContentWorker():this._data instanceof ye?this._data:new Ie(this._data)};var je=function(){var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array?"uint8array":"array";je=function(){return t}},Me=function(t){function e(e,r){t.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=r,this.meta={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(le(je(),t.data),!1)},e.prototype.flush=function(){t.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},e.prototype.cleanUp=function(){t.prototype.cleanUp.call(this),this._pako=null},e.prototype._createPako=function(){var t=this,e={raw:!0,level:this._pakoOptions.level||-1};this._pako="Deflate"===this._pakoAction?new Jt(e):new K(e),this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},e}(ye),Le={STORE:{magic:"\0\0",compressWorker:function(){return new ye("STORE compression")},uncompressWorker:function(){return new ye("STORE decompression")}},DEFLATE:{magic:"\b\0",compressWorker:function(t){return new Me("Deflate",t)},uncompressWorker:function(){return new Me("Inflate",{})}}},Ue="PK",ze="PK",$e="PK",Ne="PK",He="PK",qe=function(t,e){var r,n="";for(r=0;r<e;r++)n+=String.fromCharCode(255&t),t>>>=8;return n},We=function(t,e,r,n,i,a){var s,o,u=t.file,c=t.compression,l=a!==we,h=le("string",a(u.name)),f=le("string",we(u.name)),d=u.comment,_=le("string",a(d)),p=le("string",we(d)),g=f.length!==u.name.length,m=p.length!==d.length,b="",y="",v="",w=u.dir,A=u.date,k={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(k.crc32=t.crc32,k.compressedSize=t.compressedSize,k.uncompressedSize=t.uncompressedSize);var x=0;e&&(x|=8),l||!g&&!m||(x|=2048);var E,C,S,T=0,I=0;w&&(T|=16),"UNIX"===i?(I=798,T|=(E=u.unixPermissions,C=w,S=E,E||(S=C?16893:33204),(65535&S)<<16)):(I=20,T|=63&(u.dosPermissions||0)),s=A.getUTCHours(),s<<=6,s|=A.getUTCMinutes(),s<<=5,s|=A.getUTCSeconds()/2,o=A.getUTCFullYear()-1980,o<<=4,o|=A.getUTCMonth()+1,o<<=5,o|=A.getUTCDate(),g&&(y=qe(1,1)+qe(Be(h),4)+f,b+="up"+qe(y.length,2)+y),m&&(v=qe(1,1)+qe(Be(_),4)+p,b+="uc"+qe(v.length,2)+v);var P="";return P+="\n\0",P+=qe(x,2),P+=c.magic,P+=qe(s,2),P+=qe(o,2),P+=qe(k.crc32,4),P+=qe(k.compressedSize,4),P+=qe(k.uncompressedSize,4),P+=qe(h.length,2),P+=qe(b.length,2),{fileRecord:Ue+P+h+b,dirRecord:ze+qe(I,2)+P+qe(_.length,2)+"\0\0\0\0"+qe(T,4)+qe(n,4)+h+b+_}},Ve=function(t){return"PK\b"+qe(t.crc32,4)+qe(t.compressedSize,4)+qe(t.uncompressedSize,4)},Ge=function(t){function e(e,r,n,i){t.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=r,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(e){var r=e.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,t.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(r+100*(n-i-1))/n:100}}))},e.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=We(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},e.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=We(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:Ve(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},e.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,n=function(t,e,r,n,i){var a=le("string",i(n));return"PK\0\0\0\0"+qe(t,2)+qe(t,2)+qe(e,4)+qe(r,4)+qe(a.length,2)+a}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},e.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},e.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},e.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},e.prototype.error=function(e){var r=this._sources;if(!t.prototype.error.call(this,e))return!1;for(var n=0;n<r.length;n++)try{r[n].error(e)}catch(t){}return!0},e.prototype.lock=function(){t.prototype.lock.call(this);for(var e=this._sources,r=0;r<e.length;r++)e[r].lock()},e}(ye),Ke=function(t){this.data=t,this.length=t.length,this.index=0,this.zero=0};Ke.prototype.checkOffset=function(t){this.checkIndex(this.index+t)},Ke.prototype.checkIndex=function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},Ke.prototype.setIndex=function(t){this.checkIndex(t),this.index=t},Ke.prototype.skip=function(t){this.setIndex(this.index+t)},Ke.prototype.byteAt=function(t){},Ke.prototype.readInt=function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},Ke.prototype.readString=function(t){return le("string",this.readData(t))},Ke.prototype.readData=function(t){},Ke.prototype.lastIndexOfSignature=function(t){},Ke.prototype.readAndCheckSignature=function(t){},Ke.prototype.readDate=function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))};var Xe=function(t){function e(e){t.call(this,e);for(var r=0;r<this.data.length;r++)e[r]=255&e[r]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.byteAt=function(t){return this.data[this.zero+t]},e.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===e&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a-this.zero;return-1},e.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.readData(4);return e===a[0]&&r===a[1]&&n===a[2]&&i===a[3]},e.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e}(Ke),Ye=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},e.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},e.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},e.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e}(Ke),Je=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e}(Xe);function Qe(t){var e=he(t);return fe(e),"string"!==e||Zt.uint8array?Zt.uint8array?new Je(le("uint8array",t)):new Xe(le("array",t)):new Ye(t)}var Ze=function(t,e){this.options=t,this.loadOptions=e};Ze.prototype.isEncrypted=function(){return 1==(1&this.bitFlag)},Ze.prototype.useUTF8=function(){return 2048==(2048&this.bitFlag)},Ze.prototype.readLocalPart=function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in Le)if(Le.hasOwnProperty(e)&&Le[e].magic===t)return Le[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+pe(this.compressionMethod)+" unknown (inner file : "+le("string",this.fileName)+")");this.decompressed=new De(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},Ze.prototype.readCentralPart=function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},Ze.prototype.processAttributes=function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},Ze.prototype.parseZIP64ExtraField=function(t){if(this.extraFields[1]){var e=Qe(this.extraFields[1].value);this.uncompressedSize===_e&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===_e&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===_e&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===_e&&(this.diskNumberStart=e.readInt(4))}},Ze.prototype.readExtraFields=function(t){var e,r,n,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<i;)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n}},Ze.prototype.handleUTF8=function(){var t=Zt.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Ae(this.fileName),this.fileCommentStr=Ae(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=le(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var i=le(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},Ze.prototype.findExtraFieldUnicodePath=function(){var t=this.extraFields[28789];if(t){var e=Qe(t.value);return 1!==e.readInt(1)||Be(this.fileName)!==e.readInt(4)?null:Ae(e.readData(t.length-5))}return null},Ze.prototype.findExtraFieldUnicodeComment=function(){var t=this.extraFields[25461];if(t){var e=Qe(t.value);return 1!==e.readInt(1)||Be(this.fileComment)!==e.readInt(4)?null:Ae(e.readData(t.length-5))}return null};var tr=function(t){this.files=[],this.loadOptions=t};function er(t){return new Qt.Promise((function(e,r){var n=t.decompressed.getContentWorker().pipe(new Oe);n.on("error",(function(t){r(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}function rr(t,e){var r=this;return e=me(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:Ae}),be("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var r=new tr(e);return r.load(t),r})).then((function(t){var r=[Qt.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var i=0;i<n.length;i++)r.push(er(n[i]));return Qt.Promise.all(r)})).then((function(t){for(var n=t.shift(),i=n.files,a=0;a<i.length;a++){var s=i[a];r.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r}))}tr.prototype.checkSignature=function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+pe(e)+", expected "+pe(t)+")")}},tr.prototype.isSignature=function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(r),n},tr.prototype.readBlockEndOfCentral=function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=Zt.uint8array?"uint8array":"array",r=le(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},tr.prototype.readBlockZip64EndOfCentral=function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},tr.prototype.readBlockZip64EndOfCentralLocator=function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},tr.prototype.readLocalFiles=function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(Ue),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},tr.prototype.readCentralDir=function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(ze);)(t=new Ze({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},tr.prototype.readEndOfCentral=function(){var t=this.reader.lastIndexOfSignature($e);if(t<0)throw this.isSignature(0,Ue)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature($e),this.readBlockEndOfCentral(),this.diskNumber===de||this.diskWithCentralDirStart===de||this.centralDirRecordsOnThisDisk===de||this.centralDirRecords===de||this.centralDirSize===_e||this.centralDirOffset===_e){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(Ne))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(Ne),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,He)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(He),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(He),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=e-r;if(n>0)this.isSignature(e,ze)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},tr.prototype.prepareReader=function(t){this.reader=Qe(t)},tr.prototype.load=function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()};var nr=function(t,e,r){var n,i=he(e),a=me(r||{},Te);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=ar(t)),a.createFolders&&(n=ir(t))&&sr.call(this,n,!0);var s="string"===i&&!1===a.binary&&!1===a.base64;r&&void 0!==r.binary||(a.binary=!s),(e instanceof De&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",i="string");var o;o=e instanceof De||e instanceof ye?e:be(t,e,a.binary,a.optimizedBinaryString,a.base64);var u=new Fe(t,o,a);this.files[t]=u},ir=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},ar=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},sr=function(t,e){return e=void 0===e||e,t=ar(t),this.files[t]||nr.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function or(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var ur=function t(){if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new t;for(var r in this)"function"!=typeof this[r]&&(e[r]=this[r]);return e}},cr={support:{configurable:!0},defaults:{configurable:!0},version:{configurable:!0},external:{configurable:!0}};ur.prototype.load=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},ur.prototype.forEach=function(t){var e,r,n;for(e in this.files)n=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,n)},ur.prototype.filter=function(t){var e=[];return this.forEach((function(r,n){t(r,n)&&e.push(n)})),e},ur.prototype.file=function(t,e,r){if(1===arguments.length){if(or(t)){var n=t;return this.filter((function(t,e){return!e.dir&&n.test(t)}))}var i=this.files[this.root+t];return i&&!i.dir?i:null}return t=this.root+t,nr.call(this,t,e,r),this},ur.prototype.folder=function(t){if(!t)return this;if(or(t))return this.filter((function(e,r){return r.dir&&t.test(e)}));var e=this.root+t,r=sr.call(this,e),n=this.clone();return n.root=r.name,n},ur.prototype.remove=function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},ur.prototype.generate=function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},ur.prototype.generateInternalStream=function(t){var e,r={};try{if((r=me(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:we})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");fe(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS"),e=function(t,e,r){var n=new Ge(e.streamFiles,r,e.platform,e.encodeFileName),i=0;try{t.forEach((function(t,r){i++;var a=function(t,e){var r=t||e,n=Le[r];if(!n)throw new Error(r+" is not a valid compression method !");return n}(r.options.compression,e.compression),s=r.options.compressionOptions||e.compressionOptions||{},o=r.dir,u=r.date;r._compressWorker(a,s).withStreamInfo("file",{name:t,dir:o,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(n)})),n.entriesCount=i}catch(t){n.error(t)}return n}(this,r,r.comment||this.comment||"")}catch(t){(e=new ye("error")).error(t)}return new Se(e,r.type||"string",r.mimeType)},ur.prototype.generateAsync=function(t,e){return this.generateInternalStream(t).accumulate(e)},ur.prototype.loadAsync=function(t,e){return rr.apply(this,[t,e])},ur.loadAsync=function(t,e){return(new ur).loadAsync(t,e)},cr.support.get=function(){return Zt},cr.defaults.get=function(){return Te},cr.version.get=function(){return"3.2.2-esm"},cr.external.get=function(){return Qt},Object.defineProperties(ur,cr)},5078:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(655),i=r(2403),a=function(){function t(t){this._semaphore=new i.default(1,t)}return t.prototype.acquire=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,this._semaphore.acquire()];case 1:return[2,t.sent()[1]]}}))}))},t.prototype.runExclusive=function(t){return this._semaphore.runExclusive((function(){return t()}))},t.prototype.isLocked=function(){return this._semaphore.isLocked()},t.prototype.waitForUnlock=function(){return this._semaphore.waitForUnlock()},t.prototype.release=function(){this._semaphore.isLocked()&&this._semaphore.release()},t.prototype.cancel=function(){return this._semaphore.cancel()},t}();e.default=a},2403:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(655),i=r(1764),a=function(){function t(t,e){void 0===e&&(e=i.E_CANCELED),this._value=t,this._cancelError=e,this._weightedQueues=[],this._weightedWaiters=[]}return t.prototype.acquire=function(t){var e=this;if(void 0===t&&(t=1),t<=0)throw new Error("invalid weight ".concat(t,": must be positive"));return new Promise((function(r,n){e._weightedQueues[t-1]||(e._weightedQueues[t-1]=[]),e._weightedQueues[t-1].push({resolve:r,reject:n}),e._dispatch()}))},t.prototype.runExclusive=function(t,e){return void 0===e&&(e=1),n.__awaiter(this,void 0,void 0,(function(){var r,i,a;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,this.acquire(e)];case 1:r=n.sent(),i=r[0],a=r[1],n.label=2;case 2:return n.trys.push([2,,4,5]),[4,t(i)];case 3:return[2,n.sent()];case 4:return a(),[7];case 5:return[2]}}))}))},t.prototype.waitForUnlock=function(t){var e=this;if(void 0===t&&(t=1),t<=0)throw new Error("invalid weight ".concat(t,": must be positive"));return new Promise((function(r){e._weightedWaiters[t-1]||(e._weightedWaiters[t-1]=[]),e._weightedWaiters[t-1].push(r),e._dispatch()}))},t.prototype.isLocked=function(){return this._value<=0},t.prototype.getValue=function(){return this._value},t.prototype.setValue=function(t){this._value=t,this._dispatch()},t.prototype.release=function(t){if(void 0===t&&(t=1),t<=0)throw new Error("invalid weight ".concat(t,": must be positive"));this._value+=t,this._dispatch()},t.prototype.cancel=function(){var t=this;this._weightedQueues.forEach((function(e){return e.forEach((function(e){return e.reject(t._cancelError)}))})),this._weightedQueues=[]},t.prototype._dispatch=function(){for(var t,e=this._value;e>0;e--){var r=null===(t=this._weightedQueues[e-1])||void 0===t?void 0:t.shift();if(r){var n=this._value,i=e;this._value-=e,e=this._value+1,r.resolve([n,this._newReleaser(i)])}}this._drainUnlockWaiters()},t.prototype._newReleaser=function(t){var e=this,r=!1;return function(){r||(r=!0,e.release(t))}},t.prototype._drainUnlockWaiters=function(){for(var t=this._value;t>0;t--)this._weightedWaiters[t-1]&&(this._weightedWaiters[t-1].forEach((function(t){return t()})),this._weightedWaiters[t-1]=[])},t}();e.default=a},1764:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.E_CANCELED=e.E_ALREADY_LOCKED=e.E_TIMEOUT=void 0,e.E_TIMEOUT=new Error("timeout while waiting for mutex to become available"),e.E_ALREADY_LOCKED=new Error("mutex already locked"),e.E_CANCELED=new Error("request for lock canceled")},8125:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tryAcquire=e.withTimeout=e.Semaphore=e.Mutex=void 0;var n=r(655),i=r(5078);Object.defineProperty(e,"Mutex",{enumerable:!0,get:function(){return i.default}});var a=r(2403);Object.defineProperty(e,"Semaphore",{enumerable:!0,get:function(){return a.default}});var s=r(1960);Object.defineProperty(e,"withTimeout",{enumerable:!0,get:function(){return s.withTimeout}});var o=r(3143);Object.defineProperty(e,"tryAcquire",{enumerable:!0,get:function(){return o.tryAcquire}}),n.__exportStar(r(1764),e)},3143:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tryAcquire=void 0;var n=r(1764),i=r(1960);e.tryAcquire=function(t,e){return void 0===e&&(e=n.E_ALREADY_LOCKED),(0,i.withTimeout)(t,0,e)}},1960:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.withTimeout=void 0;var n=r(655),i=r(1764);e.withTimeout=function(t,e,r){var a=this;return void 0===r&&(r=i.E_TIMEOUT),{acquire:function(i){if(void 0!==i&&i<=0)throw new Error("invalid weight ".concat(i,": must be positive"));return new Promise((function(s,o){return n.__awaiter(a,void 0,void 0,(function(){var a,u,c,l;return n.__generator(this,(function(n){switch(n.label){case 0:a=!1,u=setTimeout((function(){a=!0,o(r)}),e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.acquire(i)];case 2:return c=n.sent(),a?(Array.isArray(c)?c[1]:c)():(clearTimeout(u),s(c)),[3,4];case 3:return l=n.sent(),a||(clearTimeout(u),o(l)),[3,4];case 4:return[2]}}))}))}))},runExclusive:function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i;return n.__generator(this,(function(n){switch(n.label){case 0:r=function(){},n.label=1;case 1:return n.trys.push([1,,7,8]),[4,this.acquire(e)];case 2:return i=n.sent(),Array.isArray(i)?(r=i[1],[4,t(i[0])]):[3,4];case 3:return[2,n.sent()];case 4:return r=i,[4,t()];case 5:return[2,n.sent()];case 6:return[3,8];case 7:return r(),[7];case 8:return[2]}}))}))},release:function(e){t.release(e)},cancel:function(){return t.cancel()},waitForUnlock:function(n){if(void 0!==n&&n<=0)throw new Error("invalid weight ".concat(n,": must be positive"));return new Promise((function(i,a){t.waitForUnlock(n).then(i),setTimeout((function(){return a(r)}),e)}))},isLocked:function(){return t.isLocked()},getValue:function(){return t.getValue()},setValue:function(e){return t.setValue(e)}}}},9742:(t,e)=>{"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,a=u(t),s=a[0],o=a[1],c=new i(function(t,e,r){return 3*(e+r)/4-r}(0,s,o)),l=0,h=o>0?s-4:s;for(r=0;r<h;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===o&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,c[l++]=255&e),1===o&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],s=16383,o=0,u=n-i;o<u;o+=s)a.push(c(t,o,o+s>u?u:o+s));return 1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=a.length;s<o;++s)r[s]=a[s],n[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,n){for(var i,a,s=[],o=e;o<n;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),s.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8764:(t,e,r)=>{"use strict";const n=r(9742),i=r(645),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const s=2147483647;function o(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return c(t,e,r)}function c(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|p(t,e);let n=o(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(X(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer))return d(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return d(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);const i=function(t){if(u.isBuffer(t)){const e=0|_(t.length),r=o(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||Y(t.length)?o(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return l(t),o(t<0?0:0|_(t))}function f(t){const e=t.length<0?0:0|_(t.length),r=o(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function d(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function _(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(i)return n?-1:V(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){let a,s=1,o=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,o/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(a=r;a<o;a++)if(c(t,a)===c(e,-1===n?0:a-n)){if(-1===n&&(n=a),a-n+1===u)return n*s}else-1!==n&&(a-=a-n),n=-1}else for(r+u>o&&(r=o-u),a=r;a>=0;a--){let r=!0;for(let n=0;n<u;n++)if(c(t,a+n)!==c(e,n)){r=!1;break}if(r)return a}return-1}function v(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const a=e.length;let s;for(n>a/2&&(n=a/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(Y(n))return s;t[r+s]=n}return s}function w(t,e,r,n){return K(V(e,t.length-r),t,r,n)}function A(t,e,r,n){return K(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function k(t,e,r,n){return K(G(e),t,r,n)}function x(t,e,r,n){return K(function(t,e){let r,n,i;const a=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(e,t.length-r),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let a=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,o,u;switch(s){case 1:e<128&&(a=e);break;case 2:r=t[i+1],128==(192&r)&&(u=(31&e)<<6|63&r,u>127&&(a=u));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(a=u));break;case 4:r=t[i+1],n=t[i+2],o=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&o)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&o,u>65535&&u<1114112&&(a=u))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return function(t){const e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=S));return r}(n)}e.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,r){return c(t,e,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,r){return function(t,e,r){return l(t),t<=0?o(t):void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)}(t,e,r)},u.allocUnsafe=function(t){return h(t)},u.allocUnsafeSlow=function(t){return h(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(X(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),X(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=u.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(X(e,Uint8Array))i+e.length>n.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(t,e,r,n,i){if(X(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let a=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0);const o=Math.min(a,s),c=this.slice(n,i),l=t.slice(e,r);for(let t=0;t<o;++t)if(c[t]!==l[t]){a=c[t],s=l[t];break}return a<s?-1:s<a?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":case"latin1":case"binary":return A(this,t,e,r);case"base64":return k(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function T(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function P(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=J[t[n]];return i}function R(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function B(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,n,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function D(t,e,r,n,i){N(e,n,i,t,r,7);let a=Number(e&BigInt(4294967295));t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function F(t,e,r,n,i){N(e,n,i,t,r,7);let a=Number(e&BigInt(4294967295));t[r+7]=a,a>>=8,t[r+6]=a,a>>=8,t[r+5]=a,a>>=8,t[r+4]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function j(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(t,e,r,n,a){return e=+e,r>>>=0,a||j(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function L(t,e,r,n,a){return e=+e,r>>>=0,a||j(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||B(t,e,this.length);let n=this[t],i=1,a=0;for(;++a<e&&(i*=256);)n+=this[t+a]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||B(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||B(t,e,this.length);let n=this[t],i=1,a=0;for(;++a<e&&(i*=256);)n+=this[t+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||B(t,e,this.length);let n=e,i=1,a=this[t+--n];for(;n>0&&(i*=256);)a+=this[t+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||B(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){t>>>=0,e||B(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||B(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||B(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||B(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||B(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||O(this,t,e,r,Math.pow(2,8*r)-1,0);let i=1,a=0;for(this[e]=255&t;++a<r&&(i*=256);)this[e+a]=t/i&255;return e+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||O(this,t,e,r,Math.pow(2,8*r)-1,0);let i=r-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=Q((function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Q((function(t,e=0){return F(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,t,e,r,n-1,-n)}let i=0,a=1,s=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,t,e,r,n-1,-n)}let i=r-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=Q((function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Q((function(t,e=0){return F(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,r){return M(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return M(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return L(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return L(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const a=u.isBuffer(t)?t:u.from(t,n),s=a.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=a[i%s]}return this};const U={};function z(t,e,r){U[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function $(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function N(t,e,r,n,i,a){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=a>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(a+1)}${n}`:`>= -(2${n} ** ${8*(a+1)-1}${n}) and < 2 ** ${8*(a+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new U.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||q(e,t.length-(r+1))}(n,i,a)}function H(t,e){if("number"!=typeof t)throw new U.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,r){if(Math.floor(t)!==t)throw H(t,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=$(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=$(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function V(t,e){let r;e=e||1/0;const n=t.length;let i=null;const a=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function G(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function X(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Q(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},487:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=e},1012:t=>{var e,r;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var i=t[n]<<16|t[n+1]<<8|t[n+2],a=0;a<4;a++)8*n+6*a<=8*t.length?r.push(e.charAt(i>>>6*(3-a)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<t.length;i=++n%4)0!=i&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(n))>>>6-2*i);return r}},t.exports=r},1260:function(t,e,r){var n;!function(t){"use strict";function e(t,e,r){return r.a=t,r.f=e,r}function i(t){return e(2,t,(function(e){return function(r){return t(e,r)}}))}function a(t){return e(3,t,(function(e){return function(r){return function(n){return t(e,r,n)}}}))}function s(t){return e(4,t,(function(e){return function(r){return function(n){return function(i){return t(e,r,n,i)}}}}))}function o(t){return e(5,t,(function(e){return function(r){return function(n){return function(i){return function(a){return t(e,r,n,i,a)}}}}}))}function u(t){return e(6,t,(function(e){return function(r){return function(n){return function(i){return function(a){return function(s){return t(e,r,n,i,a,s)}}}}}}))}function c(t){return e(7,t,(function(e){return function(r){return function(n){return function(i){return function(a){return function(s){return function(o){return t(e,r,n,i,a,s,o)}}}}}}}))}function l(t){return e(8,t,(function(e){return function(r){return function(n){return function(i){return function(a){return function(s){return function(o){return function(u){return t(e,r,n,i,a,s,o,u)}}}}}}}}))}function h(t){return e(9,t,(function(e){return function(r){return function(n){return function(i){return function(a){return function(s){return function(o){return function(u){return function(c){return t(e,r,n,i,a,s,o,u,c)}}}}}}}}}))}function f(t,e,r){return 2===t.a?t.f(e,r):t(e)(r)}function d(t,e,r,n){return 3===t.a?t.f(e,r,n):t(e)(r)(n)}function _(t,e,r,n,i){return 4===t.a?t.f(e,r,n,i):t(e)(r)(n)(i)}function p(t,e,r,n,i,a){return 5===t.a?t.f(e,r,n,i,a):t(e)(r)(n)(i)(a)}function g(t,e,r,n,i,a,s){return 6===t.a?t.f(e,r,n,i,a,s):t(e)(r)(n)(i)(a)(s)}function m(t,e,r,n,i,a,s,o){return 7===t.a?t.f(e,r,n,i,a,s,o):t(e)(r)(n)(i)(a)(s)(o)}function b(t,e){for(var r,n=[],i=y(t,e,0,n);i&&(r=n.pop());i=y(r.a,r.b,0,n));return i}function y(t,e,r,n){if(t===e)return!0;if("object"!=typeof t||null===t||null===e)return"function"==typeof t&&M(5),!1;if(r>100)return n.push(k(t,e)),!0;for(var i in t.$<0&&(t=Ar(t),e=Ar(e)),t)if(!y(t[i],e[i],r+1,n))return!1;return!0}var v=i(b);function w(t,e,r){if("object"!=typeof t)return t===e?0:t<e?-1:1;if(void 0===t.$)return(r=w(t.a,e.a))||(r=w(t.b,e.b))?r:w(t.c,e.c);for(;t.b&&e.b&&!(r=w(t.a,e.a));t=t.b,e=e.b);return r||(t.b?1:e.b?-1:0)}i((function(t,e){return!b(t,e)})),i((function(t,e){return w(t,e)<0})),i((function(t,e){return w(t,e)<1})),i((function(t,e){return w(t,e)>0})),i((function(t,e){return w(t,e)>=0}));var A=i((function(t,e){var r=w(t,e);return r<0?yr:r?br:mr}));function k(t,e){return{a:t,b:e}}function x(t,e){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}var E=i(C);function C(t,e){if("string"==typeof t)return t+e;if(!t.b)return e;var r=T(t.a,e);t=t.b;for(var n=r;t.b;t=t.b)n=n.b=T(t.a,e);return r}var S={$:0};function T(t,e){return{$:1,a:t,b:e}}var I=i(T);function P(t){for(var e=S,r=t.length;r--;)e=T(t[r],e);return e}function R(t){for(var e=[];t.b;t=t.b)e.push(t.a);return e}var B=a((function(t,e,r){for(var n=[];e.b&&r.b;e=e.b,r=r.b)n.push(f(t,e.a,r.a));return P(n)})),O=(s((function(t,e,r,n){for(var i=[];e.b&&r.b&&n.b;e=e.b,r=r.b,n=n.b)i.push(d(t,e.a,r.a,n.a));return P(i)})),o((function(t,e,r,n,i){for(var a=[];e.b&&r.b&&n.b&&i.b;e=e.b,r=r.b,n=n.b,i=i.b)a.push(_(t,e.a,r.a,n.a,i.a));return P(a)})),u((function(t,e,r,n,i,a){for(var s=[];e.b&&r.b&&n.b&&i.b&&a.b;e=e.b,r=r.b,n=n.b,i=i.b,a=a.b)s.push(p(t,e.a,r.a,n.a,i.a,a.a));return P(s)})),i((function(t,e){return P(R(e).sort((function(e,r){return w(t(e),t(r))})))})));i((function(t,e){return P(R(e).sort((function(e,r){var n=f(t,e,r);return n===mr?0:n===yr?-1:1})))}));var D=a((function(t,e,r){for(var n=new Array(t),i=0;i<t;i++)n[i]=r(e+i);return n})),F=i((function(t,e){for(var r=new Array(t),n=0;n<t&&e.b;n++)r[n]=e.a,e=e.b;return r.length=n,k(r,e)})),j=(i((function(t,e){return e[t]})),a((function(t,e,r){for(var n=r.length,i=new Array(n),a=0;a<n;a++)i[a]=r[a];return i[t]=e,i})),i((function(t,e){for(var r=e.length,n=new Array(r+1),i=0;i<r;i++)n[i]=e[i];return n[r]=t,n})),a((function(t,e,r){for(var n=r.length,i=0;i<n;i++)e=f(t,r[i],e);return e})),a((function(t,e,r){for(var n=r.length-1;n>=0;n--)e=f(t,r[n],e);return e})));function M(t){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+t+".md")}i((function(t,e){for(var r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=t(e[i]);return n})),a((function(t,e,r){for(var n=r.length,i=new Array(n),a=0;a<n;a++)i[a]=f(t,e+a,r[a]);return i})),a((function(t,e,r){return r.slice(t,e)})),a((function(t,e,r){var n=e.length,i=t-n;i>r.length&&(i=r.length);for(var a=new Array(n+i),s=0;s<n;s++)a[s]=e[s];for(s=0;s<i;s++)a[s+n]=r[s];return a})),i((function(t,e){return e})),i((function(t,e){return console.log(t+": <internals>"),e})),i((function(t,e){return t+e})),i((function(t,e){return t-e})),i((function(t,e){return t*e})),i((function(t,e){return t/e})),i((function(t,e){return t/e|0})),i(Math.pow),i((function(t,e){return e%t}));var L=i((function(t,e){var r=e%t;return 0===t?M(11):r>0&&t<0||r<0&&t>0?r+t:r}));Math.PI,Math.E,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,i(Math.atan2);var U=Math.ceil,z=Math.floor,$=Math.round,N=(Math.sqrt,Math.log),H=isNaN;i((function(t,e){return t&&e})),i((function(t,e){return t||e})),i((function(t,e){return t!==e}));var q=i((function(t,e){return t+e})),W=i((function(t,e){return t+e}));i((function(t,e){for(var r=e.length,n=new Array(r),i=0;i<r;){var a=e.charCodeAt(i);55296<=a&&a<=56319?(n[i]=t(e[i]+e[i+1]),i+=2):(n[i]=t(e[i]),i++)}return n.join("")}));var V=i((function(t,e){for(var r=[],n=e.length,i=0;i<n;){var a=e[i],s=e.charCodeAt(i);i++,55296<=s&&s<=56319&&(a+=e[i],i++),t(a)&&r.push(a)}return r.join("")})),G=a((function(t,e,r){for(var n=r.length,i=0;i<n;){var a=r[i],s=r.charCodeAt(i);i++,55296<=s&&s<=56319&&(a+=r[i],i++),e=f(t,a,e)}return e})),K=a((function(t,e,r){for(var n=r.length;n--;){var i=r[n],a=r.charCodeAt(n);56320<=a&&a<=57343&&(i=r[--n]+i),e=f(t,i,e)}return e})),X=i((function(t,e){return e.split(t)})),Y=i((function(t,e){return e.join(t)})),J=a((function(t,e,r){return r.slice(t,e)}));i((function(t,e){for(var r=e.length;r--;){var n=e[r],i=e.charCodeAt(r);if(56320<=i&&i<=57343&&(n=e[--r]+n),t(n))return!0}return!1}));var Q=i((function(t,e){for(var r=e.length;r--;){var n=e[r],i=e.charCodeAt(r);if(56320<=i&&i<=57343&&(n=e[--r]+n),!t(n))return!1}return!0})),Z=i((function(t,e){return e.indexOf(t)>-1})),tt=i((function(t,e){return 0===e.indexOf(t)})),et=i((function(t,e){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length})),rt=i((function(t,e){var r=t.length;if(r<1)return S;for(var n=0,i=[];(n=e.indexOf(t,n))>-1;)i.push(n),n+=r;return P(i)}));function nt(t){return t+""}function it(t){return{$:2,b:t}}var at=it((function(t){return"number"!=typeof t?vt("an INT",t):-2147483647<t&&t<2147483647&&(0|t)===t?Tr(t):!isFinite(t)||t%1?vt("an INT",t):Tr(t)})),st=it((function(t){return"boolean"==typeof t?Tr(t):vt("a BOOL",t)})),ot=it((function(t){return"number"==typeof t?Tr(t):vt("a FLOAT",t)})),ut=it((function(t){return Tr(t)})),ct=it((function(t){return"string"==typeof t?Tr(t):t instanceof String?Tr(t+""):vt("a STRING",t)})),lt=i((function(t,e){return{$:6,d:t,b:e}}));function ht(t,e){return{$:9,f:t,g:e}}i((function(t,e){return{$:7,e:t,b:e}}));var ft=i((function(t,e){return{$:10,b:e,h:t}})),dt=i((function(t,e){return ht(t,[e])})),_t=a((function(t,e,r){return ht(t,[e,r])})),pt=(s((function(t,e,r,n){return ht(t,[e,r,n])})),o((function(t,e,r,n,i){return ht(t,[e,r,n,i])})),u((function(t,e,r,n,i,a){return ht(t,[e,r,n,i,a])})),c((function(t,e,r,n,i,a,s){return ht(t,[e,r,n,i,a,s])})),l((function(t,e,r,n,i,a,s,o){return ht(t,[e,r,n,i,a,s,o])})),h((function(t,e,r,n,i,a,s,o,u){return ht(t,[e,r,n,i,a,s,o,u])})),i((function(t,e){try{return gt(t,JSON.parse(e))}catch(t){return xr(f(Er,"This is not valid JSON! "+t.message,e))}})),i((function(t,e){return gt(t,e)})));function gt(t,e){switch(t.$){case 2:return t.b(e);case 5:return null===e?Tr(t.c):vt("null",e);case 3:return bt(e)?mt(t.b,e,P):vt("a LIST",e);case 4:return bt(e)?mt(t.b,e,yt):vt("an ARRAY",e);case 6:var r=t.d;if("object"!=typeof e||null===e||!(r in e))return vt("an OBJECT with a field named `"+r+"`",e);var n=gt(t.b,e[r]);return xn(n)?n:xr(f(Cr,r,n.a));case 7:var i=t.e;return bt(e)?i>=e.length?vt("a LONGER array. Need index "+i+" but only see "+e.length+" entries",e):(n=gt(t.b,e[i]),xn(n)?n:xr(f(Sr,i,n.a))):vt("an ARRAY",e);case 8:if("object"!=typeof e||null===e||bt(e))return vt("an OBJECT",e);var a=S;for(var s in e)if(e.hasOwnProperty(s)){if(n=gt(t.b,e[s]),!xn(n))return xr(f(Cr,s,n.a));a=T(k(s,n.a),a)}return Tr(Jr(a));case 9:for(var o=t.f,u=t.g,c=0;c<u.length;c++){if(n=gt(u[c],e),!xn(n))return n;o=o(n.a)}return Tr(o);case 10:return n=gt(t.b,e),xn(n)?gt(t.h(n.a),e):n;case 11:for(var l=S,h=t.g;h.b;h=h.b){if(n=gt(h.a,e),xn(n))return n;l=T(n.a,l)}return xr(Ir(Jr(l)));case 1:return xr(f(Er,t.a,e));case 0:return Tr(t.a)}}function mt(t,e,r){for(var n=e.length,i=new Array(n),a=0;a<n;a++){var s=gt(t,e[a]);if(!xn(s))return xr(f(Sr,a,s.a));i[a]=s.a}return Tr(r(i))}function bt(t){return Array.isArray(t)||"undefined"!=typeof FileList&&t instanceof FileList}function yt(t){return f(kn,t.length,(function(e){return t[e]}))}function vt(t,e){return xr(f(Er,"Expecting "+t,e))}function wt(t,e){if(t===e)return!0;if(t.$!==e.$)return!1;switch(t.$){case 0:case 1:return t.a===e.a;case 2:return t.b===e.b;case 5:return t.c===e.c;case 3:case 4:case 8:return wt(t.b,e.b);case 6:return t.d===e.d&&wt(t.b,e.b);case 7:return t.e===e.e&&wt(t.b,e.b);case 9:return t.f===e.f&&At(t.g,e.g);case 10:return t.h===e.h&&wt(t.b,e.b);case 11:return At(t.g,e.g)}}function At(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(!wt(t[n],e[n]))return!1;return!0}var kt=i((function(t,e){return JSON.stringify(e,null,t)+""}));function xt(t){return t}var Et=a((function(t,e,r){return r[t]=e,r}));function Ct(t){return{$:0,a:t}}function St(t){return{$:2,b:t,c:null}}var Tt=i((function(t,e){return{$:3,b:t,d:e}}));i((function(t,e){return{$:4,b:t,d:e}}));var It=0;function Pt(t){var e={$:0,e:It++,f:t,g:null,h:[]};return jt(e),e}function Rt(t){return St((function(e){e(Ct(Pt(t)))}))}function Bt(t,e){t.h.push(e),jt(t)}var Ot=i((function(t,e){return St((function(r){Bt(t,e),r(Ct(0))}))})),Dt=!1,Ft=[];function jt(t){if(Ft.push(t),!Dt){for(Dt=!0;t=Ft.shift();)Mt(t);Dt=!1}}function Mt(t){for(;t.f;){var e=t.f.$;if(0===e||1===e){for(;t.g&&t.g.$!==e;)t.g=t.g.i;if(!t.g)return;t.f=t.g.b(t.f.a),t.g=t.g.i}else{if(2===e)return void(t.f.c=t.f.b((function(e){t.f=e,jt(t)})));if(5===e){if(0===t.h.length)return;t.f=t.f.b(t.h.shift())}else t.g={$:3===e?0:1,b:t.f.b,i:t.g},t.f=t.f.d}}}function Lt(t,e,r,n,i,a){var s=f(pt,t,e?e.flags:void 0);xn(s)||M(2);var o={},u=r(s.a),c=u.a,l=a(d,c),h=function(t,e){var r;for(var n in Ut){var i=Ut[n];i.a&&((r=r||{})[n]=i.a(n,e)),t[n]=$t(i,e)}return r}(o,d);function d(t,e){var r=f(n,t,c);l(c=r.a,e),Kt(o,r.b,i(c))}return Kt(o,u.b,i(c)),h?{ports:h}:{}}s((function(t,e,r,n){return Lt(e,n,t.$7,t.ee,t.d6,(function(){return function(){}}))}));var Ut={};function zt(t,e,r,n,i){return{b:t,c:e,d:r,e:n,f:i}}function $t(t,e){var r={g:e,h:void 0},n=t.c,i=t.d,a=t.e,s=t.f;return r.h=Pt(f(Tt,(function t(e){return f(Tt,t,{$:5,b:function(t){var o=t.a;return 0===t.$?d(i,r,o,e):a&&s?_(n,r,o.i,o.j,e):d(n,r,a?o.i:o.j,e)}})}),t.b))}var Nt=i((function(t,e){return St((function(r){t.g(e),r(Ct(0))}))})),Ht=i((function(t,e){return f(Ot,t.h,{$:0,a:e})}));function qt(t){return function(e){return{$:1,k:t,l:e}}}function Wt(t){return{$:2,m:t}}i((function(t,e){return{$:3,n:t,o:e}}));var Vt=[],Gt=!1;function Kt(t,e,r){if(Vt.push({p:t,q:e,r}),!Gt){Gt=!0;for(var n;n=Vt.shift();)Xt(n.p,n.q,n.r);Gt=!1}}function Xt(t,e,r){var n={};for(var i in Yt(!0,e,n,null),Yt(!1,r,n,null),t)Bt(t[i],{$:"fx",a:n[i]||{i:S,j:S}})}function Yt(t,e,r,n){switch(e.$){case 1:var i=e.k,a=function(t,e,r,n){return f(t?Ut[e].e:Ut[e].f,(function(t){for(var e=r;e;e=e.t)t=e.s(t);return t}),n)}(t,i,n,e.l);return void(r[i]=function(t,e,r){return r=r||{i:S,j:S},t?r.i=T(e,r.i):r.j=T(e,r.j),r}(t,a,r[i]));case 2:for(var s=e.m;s.b;s=s.b)Yt(t,s.a,r,n);return;case 3:return void Yt(t,e.o,r,{s:e.n,t:n})}}function Jt(t){Ut[t]&&M(3)}function Qt(t,e){return Jt(t),Ut[t]={e:Zt,u:e,a:te},qt(t)}var Zt=i((function(t,e){return e}));function te(t){var e=[],r=Ut[t].u,n=(0,St((function(t){var e=setTimeout((function(){t(Ct(0))}),0);return function(){clearTimeout(e)}})));return Ut[t].b=n,Ut[t].c=a((function(t,i,a){for(;i.b;i=i.b)for(var s=e,o=r(i.a),u=0;u<s.length;u++)s[u](o);return n})),{subscribe:function(t){e.push(t)},unsubscribe:function(t){var r=(e=e.slice()).indexOf(t);r>=0&&e.splice(r,1)}}}function ee(t,e){return Jt(t),Ut[t]={f:ne,u:e,a:ie},qt(t)}var re,ne=i((function(t,e){return function(r){return t(e(r))}}));function ie(t,e){var r=S,n=Ut[t].u,i=Ct(null);return Ut[t].b=i,Ut[t].c=a((function(t,e,n){return r=e,i})),{send:function(t){var i=f(pt,n,t);xn(i)||M(4,i.a);for(var a=i.a,s=r;s.b;s=s.b)e(s.a(a))}}}function ae(t,e){for(var r in e)r in t?"init"==r?M(6):ae(t[r],e[r]):t[r]=e[r]}var se="undefined"!=typeof document?document:{};function oe(t,e){t.appendChild(e)}function ue(t){return{$:0,a:t}}s((function(t,e,r,n){var i=n.node;return i.parentNode.replaceChild(Te(t,(function(){})),i),{}}));var ce=i((function(t,e){return i((function(r,n){for(var i=[],a=0;n.b;n=n.b){var s=n.a;a+=s.b||0,i.push(s)}return a+=i.length,{$:1,c:e,d:Ce(r),e:i,f:t,b:a}}))})),le=ce(void 0),he=i((function(t,e){return i((function(r,n){for(var i=[],a=0;n.b;n=n.b){var s=n.a;a+=s.b.b||0,i.push(s)}return a+=i.length,{$:2,c:e,d:Ce(r),e:i,f:t,b:a}}))})),fe=he(void 0);function de(t,e){return{$:5,l:t,m:e,k:void 0}}i((function(t,e){return{$:4,j:t,k:e,b:1+(e.b||0)}})),i((function(t,e){return de([t,e],(function(){return t(e)}))}));var _e=a((function(t,e,r){return de([t,e,r],(function(){return f(t,e,r)}))})),pe=s((function(t,e,r,n){return de([t,e,r,n],(function(){return d(t,e,r,n)}))})),ge=(o((function(t,e,r,n,i){return de([t,e,r,n,i],(function(){return _(t,e,r,n,i)}))})),u((function(t,e,r,n,i,a){return de([t,e,r,n,i,a],(function(){return p(t,e,r,n,i,a)}))})),c((function(t,e,r,n,i,a,s){return de([t,e,r,n,i,a,s],(function(){return g(t,e,r,n,i,a,s)}))})),l((function(t,e,r,n,i,a,s,o){return de([t,e,r,n,i,a,s,o],(function(){return m(t,e,r,n,i,a,s,o)}))})),h((function(t,e,r,n,i,a,s,o,u){return de([t,e,r,n,i,a,s,o,u],(function(){return function(t,e,r,n,i,a,s,o,u){return 8===t.a?t.f(e,r,n,i,a,s,o,u):t(e)(r)(n)(i)(a)(s)(o)(u)}(t,e,r,n,i,a,s,o,u)}))})),i((function(t,e){return{$:"a0",n:t,o:e}}))),me=(i((function(t,e){return{$:"a1",n:t,o:e}})),i((function(t,e){return{$:"a2",n:t,o:e}}))),be=i((function(t,e){return{$:"a3",n:t,o:e}})),ye=(a((function(t,e,r){return{$:"a4",n:e,o:{f:t,o:r}}})),/^script$/i),ve=/^(on|formAction$)/i,we=/^\s*(j\s*a\s*v\s*a\s*s\s*c\s*r\s*i\s*p\s*t\s*:|d\s*a\s*t\s*a\s*:\s*t\s*e\s*x\s*t\s*\/\s*h\s*t\s*m\s*l\s*(,|;))/i;function Ae(t){return ye.test(t)?"p":t}i((function(t,e){return"a0"===e.$?f(ge,e.n,function(t,e){var r=Tn(e);return{$:e.$,a:r?d(Cn,r<3?xe:Ee,Sn(t),e.a):f(En,t,e.a)}}(t,e.o)):e}));var ke,xe=i((function(t,e){return k(t(e.a),e.b)})),Ee=i((function(t,e){return{dv:t(e.dv),d4:e.d4,dQ:e.dQ}}));function Ce(t){for(var e={};t.b;t=t.b){var r=t.a,n=r.$,i=r.n,a=r.o;if("a2"!==n){var s=e[n]||(e[n]={});"a3"===n&&"class"===i?Se(s,i,a):s[i]=a}else"className"===i?Se(e,i,a):e[i]=a}return e}function Se(t,e,r){var n=t[e];t[e]=n?n+" "+r:r}function Te(t,e){var r=t.$;if(5===r)return Te(t.k||(t.k=t.m()),e);if(0===r)return se.createTextNode(t.a);if(4===r){for(var n=t.k,i=t.j;4===n.$;)"object"!=typeof i?i=[i,n.j]:i.push(n.j),n=n.k;var a={j:i,p:e};return(s=Te(n,a)).elm_event_node_ref=a,s}if(3===r)return Ie(s=t.h(t.g),e,t.d),s;var s=t.f?se.createElementNS(t.f,t.c):se.createElement(t.c);re&&"a"==t.c&&s.addEventListener("click",re(s)),Ie(s,e,t.d);for(var o=t.e,u=0;u<o.length;u++)oe(s,Te(1===r?o[u]:o[u].b,e));return s}function Ie(t,e,r){for(var n in r){var i=r[n];"a1"===n?Pe(t,i):"a0"===n?Oe(t,e,i):"a3"===n?Re(t,i):"a4"===n?Be(t,i):("value"!==n&&"checked"!==n||t[n]!==i)&&(t[n]=i)}}function Pe(t,e){var r=t.style;for(var n in e)r[n]=e[n]}function Re(t,e){for(var r in e){var n=e[r];void 0!==n?t.setAttribute(r,n):t.removeAttribute(r)}}function Be(t,e){for(var r in e){var n=e[r],i=n.f,a=n.o;void 0!==a?t.setAttributeNS(i,r,a):t.removeAttributeNS(i,r)}}function Oe(t,e,r){var n=t.elmFs||(t.elmFs={});for(var i in r){var a=r[i],s=n[i];if(a){if(s){if(s.q.$===a.$){s.q=a;continue}t.removeEventListener(i,s)}s=De(e,a),t.addEventListener(i,s,ke&&{passive:Tn(a)<2}),n[i]=s}else t.removeEventListener(i,s),n[i]=void 0}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){ke=!0}}))}catch(t){}function De(t,e){function r(e){var n=r.q,i=gt(n.a,e);if(xn(i)){for(var a,s=Tn(n),o=i.a,u=s?s<3?o.a:o.dv:o,c=1==s?o.b:3==s&&o.d4,l=(c&&e.stopPropagation(),(2==s?o.b:3==s&&o.dQ)&&e.preventDefault(),t);a=l.j;){if("function"==typeof a)u=a(u);else for(var h=a.length;h--;)u=a[h](u);l=l.p}l(u,c)}}return r.q=e,r}function Fe(t,e){return t.$==e.$&&wt(t.a,e.a)}function je(t,e){var r=[];return Le(t,e,r,0),r}function Me(t,e,r,n){var i={$:e,r,s:n,t:void 0,u:void 0};return t.push(i),i}function Le(t,e,r,n){if(t!==e){var i=t.$,a=e.$;if(i!==a){if(1!==i||2!==a)return void Me(r,0,n,e);e=function(t){for(var e=t.e,r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i].b;return{$:1,c:t.c,d:t.d,e:n,f:t.f,b:t.b}}(e),a=1}switch(a){case 5:for(var s=t.l,o=e.l,u=s.length,c=u===o.length;c&&u--;)c=s[u]===o[u];if(c)return void(e.k=t.k);e.k=e.m();var l=[];return Le(t.k,e.k,l,0),void(l.length>0&&Me(r,1,n,l));case 4:for(var h=t.j,f=e.j,d=!1,_=t.k;4===_.$;)d=!0,"object"!=typeof h?h=[h,_.j]:h.push(_.j),_=_.k;for(var p=e.k;4===p.$;)d=!0,"object"!=typeof f?f=[f,p.j]:f.push(p.j),p=p.k;return d&&h.length!==f.length?void Me(r,0,n,e):((d?function(t,e){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}(h,f):h===f)||Me(r,2,n,f),void Le(_,p,r,n+1));case 0:return void(t.a!==e.a&&Me(r,3,n,e.a));case 1:return void Ue(t,e,r,n,$e);case 2:return void Ue(t,e,r,n,Ne);case 3:if(t.h!==e.h)return void Me(r,0,n,e);var g=ze(t.d,e.d);g&&Me(r,4,n,g);var m=e.i(t.g,e.g);return void(m&&Me(r,5,n,m))}}}function Ue(t,e,r,n,i){if(t.c===e.c&&t.f===e.f){var a=ze(t.d,e.d);a&&Me(r,4,n,a),i(t,e,r,n)}else Me(r,0,n,e)}function ze(t,e,r){var n;for(var i in t)if("a1"!==i&&"a0"!==i&&"a3"!==i&&"a4"!==i)if(i in e){var a=t[i],s=e[i];a===s&&"value"!==i&&"checked"!==i||"a0"===r&&Fe(a,s)||((n=n||{})[i]=s)}else(n=n||{})[i]=r?"a1"===r?"":"a0"===r||"a3"===r?void 0:{f:t[i].f,o:void 0}:"string"==typeof t[i]?"":null;else{var o=ze(t[i],e[i]||{},i);o&&((n=n||{})[i]=o)}for(var u in e)u in t||((n=n||{})[u]=e[u]);return n}function $e(t,e,r,n){var i=t.e,a=e.e,s=i.length,o=a.length;s>o?Me(r,6,n,{v:o,i:s-o}):s<o&&Me(r,7,n,{v:s,e:a});for(var u=s<o?s:o,c=0;c<u;c++){var l=i[c];Le(l,a[c],r,++n),n+=l.b||0}}function Ne(t,e,r,n){for(var i=[],a={},s=[],o=t.e,u=e.e,c=o.length,l=u.length,h=0,f=0,d=n;h<c&&f<l;){var _=o[h],p=u[f],g=_.a,m=p.a,b=_.b,y=p.b,v=void 0,w=void 0;if(g!==m){var A=o[h+1],k=u[f+1];if(A){var x=A.a,E=A.b;w=m===x}if(k){var C=k.a,S=k.b;v=g===C}if(v&&w)Le(b,S,i,++d),qe(a,i,g,y,f,s),d+=b.b||0,We(a,i,g,E,++d),d+=E.b||0,h+=2,f+=2;else if(v)d++,qe(a,i,m,y,f,s),Le(b,S,i,d),d+=b.b||0,h+=1,f+=2;else if(w)We(a,i,g,b,++d),d+=b.b||0,Le(E,y,i,++d),d+=E.b||0,h+=2,f+=1;else{if(!A||x!==C)break;We(a,i,g,b,++d),qe(a,i,m,y,f,s),d+=b.b||0,Le(E,S,i,++d),d+=E.b||0,h+=2,f+=2}}else Le(b,y,i,++d),d+=b.b||0,h++,f++}for(;h<c;)d++,b=(_=o[h]).b,We(a,i,_.a,b,d),d+=b.b||0,h++;for(;f<l;){var T=T||[];qe(a,i,(p=u[f]).a,p.b,void 0,T),f++}(i.length>0||s.length>0||T)&&Me(r,8,n,{w:i,x:s,y:T})}var He="_elmW6BL";function qe(t,e,r,n,i,a){var s=t[r];if(!s)return s={c:0,z:n,r:i,s:void 0},a.push({r:i,A:s}),void(t[r]=s);if(1===s.c){a.push({r:i,A:s}),s.c=2;var o=[];return Le(s.z,n,o,s.r),s.r=i,void(s.s.s={w:o,A:s})}qe(t,e,r+He,n,i,a)}function We(t,e,r,n,i){var a=t[r];if(a){if(0===a.c){a.c=2;var s=[];return Le(n,a.z,s,i),void Me(e,9,i,{w:s,A:a})}We(t,e,r+He,n,i)}else{var o=Me(e,9,i,void 0);t[r]={c:1,z:n,r:i,s:o}}}function Ve(t,e,r,n){Ge(t,e,r,0,0,e.b,n)}function Ge(t,e,r,n,i,a,s){for(var o=r[n],u=o.r;u===i;){var c=o.$;if(1===c)Ve(t,e.k,o.s,s);else if(8===c)o.t=t,o.u=s,(l=o.s.w).length>0&&Ge(t,e,l,0,i,a,s);else if(9===c){o.t=t,o.u=s;var l,h=o.s;h&&(h.A.s=t,(l=h.w).length>0&&Ge(t,e,l,0,i,a,s))}else o.t=t,o.u=s;if(!(o=r[++n])||(u=o.r)>a)return n}var f=e.$;if(4===f){for(var d=e.k;4===d.$;)d=d.k;return Ge(t,d,r,n,i+1,a,t.elm_event_node_ref)}for(var _=e.e,p=t.childNodes,g=0;g<_.length;g++){i++;var m=1===f?_[g]:_[g].b,b=i+(m.b||0);if(i<=u&&u<=b&&(!(o=r[n=Ge(p[g],m,r,n,i,b,s)])||(u=o.r)>a))return n;i=b}return n}function Ke(t,e,r,n){return 0===r.length?t:(Ve(t,e,r,n),Xe(t,r))}function Xe(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=n.t,a=Ye(i,n);i===t&&(t=a)}return t}function Ye(t,e){switch(e.$){case 0:return function(t,e,r){var n=t.parentNode,i=Te(e,r);return i.elm_event_node_ref||(i.elm_event_node_ref=t.elm_event_node_ref),n&&i!==t&&n.replaceChild(i,t),i}(t,e.s,e.u);case 4:return Ie(t,e.u,e.s),t;case 3:return t.replaceData(0,t.length,e.s),t;case 1:return Xe(t,e.s);case 2:return t.elm_event_node_ref?t.elm_event_node_ref.j=e.s:t.elm_event_node_ref={j:e.s,p:e.u},t;case 6:for(var r=e.s,n=0;n<r.i;n++)t.removeChild(t.childNodes[r.v]);return t;case 7:for(var i=(r=e.s).e,a=(n=r.v,t.childNodes[n]);n<i.length;n++)t.insertBefore(Te(i[n],e.u),a);return t;case 9:if(!(r=e.s))return t.parentNode.removeChild(t),t;var s=r.A;return void 0!==s.r&&t.parentNode.removeChild(t),s.s=Xe(t,r.w),t;case 8:return function(t,e){var r=e.s,n=function(t,e){if(t){for(var r=se.createDocumentFragment(),n=0;n<t.length;n++){var i=t[n].A;oe(r,2===i.c?i.s:Te(i.z,e.u))}return r}}(r.y,e);t=Xe(t,r.w);for(var i=r.x,a=0;a<i.length;a++){var s=i[a],o=s.A,u=2===o.c?o.s:Te(o.z,e.u);t.insertBefore(u,t.childNodes[s.r])}return n&&oe(t,n),t}(t,e);case 5:return e.s(t);default:M(10)}}function Je(t){if(3===t.nodeType)return ue(t.textContent);if(1!==t.nodeType)return ue("");for(var e=S,r=t.attributes,n=r.length;n--;){var i=r[n],a=i.name,s=i.value;e=T(f(be,a,s),e)}var o=t.tagName.toLowerCase(),u=S,c=t.childNodes;for(n=c.length;n--;)u=T(Je(c[n]),u);return d(le,o,e,u)}s((function(t,e,r,n){return Lt(e,n,t.$7,t.ee,t.d6,(function(e,r){var i=t.eg,a=n.node,s=Je(a);return tr(r,(function(t){var r=i(t),n=je(s,r);a=Ke(a,s,n,e),s=r}))}))}));var Qe=s((function(t,e,r,n){return Lt(e,n,t.$7,t.ee,t.d6,(function(e,r){var n=t.br&&t.br(e),i=t.eg,a=se.title,s=se.body,o=Je(s);return tr(r,(function(t){re=n;var r=i(t),u=le("body")(S)(r.cP),c=je(o,u);s=Ke(s,o,c,e),o=u,re=0,a!==r.ea&&(se.title=a=r.ea)}))}))})),Ze=("undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(t,1e3/60)});function tr(t,e){e(t);var r=0;function n(){r=1===r?0:(Ze(n),e(t),1)}return function(i,a){t=i,a?(e(t),2===r&&(r=1)):(0===r&&Ze(n),r=2)}}function er(){return Wn(se.location.href).a||M(1)}i((function(t,e){return f(ui,Vn,St((function(){e&&history.go(e),t()})))}));var rr=i((function(t,e){return f(ui,Vn,St((function(){history.pushState({},"",e),t()})))})),nr=i((function(t,e){return f(ui,Vn,St((function(){history.replaceState({},"",e),t()})))})),ir=("undefined"!=typeof document&&document,"undefined"!=typeof window?window:{addEventListener:function(){},removeEventListener:function(){}});function ar(t,e){return St((function(r){Ze((function(){var n=document.getElementById(t);r(n?Ct(e(n)):{$:1,a:Pn(t)})}))}))}a((function(t,e,r){return Rt(St((function(n){function i(t){Pt(r(t))}return t.addEventListener(e,i,ke&&{passive:!0}),function(){t.removeEventListener(e,i)}})))})),i((function(t,e){var r=gt(t,e);return xn(r)?Pr(r.a):Rr})),i((function(t,e){return ar(e,(function(e){return e[t](),0}))})),i((function(t,e){return r=function(){return ir.scroll(t,e),0},St((function(t){Ze((function(){t(Ct(r()))}))}));var r})),a((function(t,e,r){return ar(t,(function(t){return t.scrollLeft=e,t.scrollTop=r,0}))}));var sr=a((function(t,e,r){return St((function(n){function i(t){n(e(r.be.a(t)))}var a=new XMLHttpRequest;a.addEventListener("error",(function(){i(Yi)})),a.addEventListener("timeout",(function(){i(Zi)})),a.addEventListener("load",(function(){i(function(t,e){return f(200<=e.status&&e.status<300?Xi:Gi,function(t){return{bw:t.responseURL,d2:t.status,d3:t.statusText,bW:or(t.getAllResponseHeaders())}}(e),t(e.response))}(r.be.b,a))})),ra(r.cx)&&function(t,e,r){e.upload.addEventListener("progress",(function(n){e.c||Pt(f(na,t,k(r,Qi({d_:n.loaded,cq:n.total}))))})),e.addEventListener("progress",(function(n){e.c||Pt(f(na,t,k(r,Ji({dR:n.loaded,cq:n.lengthComputable?Pr(n.total):Rr}))))}))}(t,a,r.cx.a);try{a.open(r.dx,r.bw,!0)}catch(t){return i(Ki(r.bw))}return function(t,e){for(var r=e.bW;r.b;r=r.b)t.setRequestHeader(r.a.a,r.a.b);t.timeout=e.d9.a||0,t.responseType=e.be.d,t.withCredentials=e.cL}(a,r),r.cP.a&&a.setRequestHeader("Content-Type",r.cP.a),a.send(r.cP.b),function(){a.c=!0,a.abort()}}))}));function or(t){if(!t)return ea;for(var e=ea,r=t.split("\r\n"),n=r.length;n--;){var i=r[n],a=i.indexOf(": ");if(a>0){var s=i.substring(0,a),o=i.substring(a+2);e=d(ma,s,(function(t){return Pr(ra(t)?o+", "+t.a:o)}),e)}}return e}var ur=a((function(t,e,r){return{$:0,d:t,b:e,a:r}})),cr=i((function(t,e){return{$:0,d:e.d,b:e.b,a:function(r){return t(e.a(r))}}}));i((function(t,e){return{$:0,a:t,b:e}})),i((function(t,e){return new Blob([e],{type:t})})),i((function(t,e){return t&e})),i((function(t,e){return t|e})),i((function(t,e){return t^e})),i((function(t,e){return e<<t})),i((function(t,e){return e>>t})),i((function(t,e){return e>>>t}));var lr=a((function(t,e,r){return function(t,e,r,n){return{$:3,d:Ce(t),g:e,h:r,i:n}}(e,{a:t,b:r},hr,fr)}));function hr(t){return f(dr,t,se.createElement("div"))}function fr(t,e){return(t.b!==e.b||t.a!==e.a)&&dr(e)}var dr=i((function(t,e){return e.innerHTML=_r(t.b,(r=t.a,{highlight:function(t,e){return!e&&ra(r.bO)&&(e=r.bO.a),"undefined"!=typeof hljs&&e&&hljs.listLanguages().indexOf(e)>=0?hljs.highlight(e,t,!0).value:t},gfm:n=r.di.a,tables:n&&n.d7,breaks:n&&n.cQ,sanitize:r.dV,smartypants:r.d1})),e;var r,n})),_r=function(){var t={},e=t.exports={};return function(){var i={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:f,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:f,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function a(t){this.tokens=[],this.tokens.links={},this.options=t||_.defaults,this.rules=i.normal,this.options.gfm&&(this.options.tables?this.rules=i.tables:this.rules=i.gfm)}i.bullet=/(?:[*+-]|\d+\.)/,i.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,i.item=h(i.item,"gm")(/bull/g,i.bullet)(),i.list=h(i.list)(/bull/g,i.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+i.def.source+")")(),i.blockquote=h(i.blockquote)("def",i.def)(),i._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",i.html=h(i.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,i._tag)(),i.paragraph=h(i.paragraph)("hr",i.hr)("heading",i.heading)("lheading",i.lheading)("blockquote",i.blockquote)("tag","<"+i._tag)("def",i.def)(),i.normal=d({},i),i.gfm=d({},i.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),i.gfm.paragraph=h(i.paragraph)("(?!","(?!"+i.gfm.fences.source.replace("\\1","\\2")+"|"+i.list.source.replace("\\1","\\3")+"|")(),i.tables=d({},i.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),a.rules=i,a.lex=function(t,e){return new a(e).lex(t)},a.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},a.prototype.token=function(t,e,r){var n,a,s,o,u,c,l,h,f;for(t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t))t=t.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(e&&(s=this.rules.nptable.exec(t))){for(t=t.substring(s[0].length),c={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")},h=0;h<c.align.length;h++)/^ *-+: *$/.test(c.align[h])?c.align[h]="right":/^ *:-+: *$/.test(c.align[h])?c.align[h]="center":/^ *:-+ *$/.test(c.align[h])?c.align[h]="left":c.align[h]=null;for(h=0;h<c.cells.length;h++)c.cells[h]=c.cells[h].split(/ *\| */);this.tokens.push(c)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,e,!0),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),o=s[2],this.tokens.push({type:"list_start",ordered:o.length>1}),n=!1,f=(s=s[0].match(this.rules.item)).length,h=0;h<f;h++)l=(c=s[h]).length,~(c=c.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&h!==f-1&&(o===(u=i.bullet.exec(s[h+1])[0])||o.length>1&&u.length>1||(t=s.slice(h+1).join("\n")+t,h=f-1)),a=n||/\n\n(?!\s*$)/.test(c),h!==f-1&&(n="\n"===c.charAt(c.length-1),a||(a=n)),this.tokens.push({type:a?"loose_item_start":"list_item_start"}),this.token(c,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(!r&&e&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};else if(e&&(s=this.rules.table.exec(t))){for(t=t.substring(s[0].length),c={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;h<c.align.length;h++)/^ *-+: *$/.test(c.align[h])?c.align[h]="right":/^ *:-+: *$/.test(c.align[h])?c.align[h]="center":/^ *:-+ *$/.test(c.align[h])?c.align[h]="left":c.align[h]=null;for(h=0;h<c.cells.length;h++)c.cells[h]=c.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(c)}else if(e&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var s={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:f,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^_\_([\s\S]+?)_\_(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|_\_)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:f,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function o(t,e){if(this.options=e||_.defaults,this.links=t,this.rules=s.normal,this.renderer=this.options.renderer||new u,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=s.breaks:this.rules=s.gfm:this.options.pedantic&&(this.rules=s.pedantic)}function u(t){this.options=t||{}}function c(t){this.tokens=[],this.token=null,this.options=t||_.defaults,this.options.renderer=this.options.renderer||new u,this.renderer=this.options.renderer,this.renderer.options=this.options}function l(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function h(t,e){return t=t.source,e=e||"",function r(n,i){return n?(i=(i=i.source||i).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(n,i),r):new RegExp(t,e)}}function f(){}function d(t){for(var e,r,n=1;n<arguments.length;n++)for(r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function _(t,e,r){if(r||"function"==typeof e){r||(r=e,e=null);var n,i,s=(e=d({},_.defaults,e||{})).highlight,o=0;try{n=a.lex(t,e)}catch(t){return r(t)}i=n.length;var u=function(t){if(t)return e.highlight=s,r(t);var i;try{i=c.parse(n,e)}catch(e){t=e}return e.highlight=s,t?r(t):r(null,i)};if(!s||s.length<3)return u();if(delete e.highlight,!i)return u();for(;o<n.length;o++)!function(t){"code"!==t.type?--i||u():s(t.text,t.lang,(function(e,r){return e?u(e):null==r||r===t.text?--i||u():(t.text=r,t.escaped=!0,void(--i||u()))}))}(n[o])}else try{return e&&(e=d({},_.defaults,e)),c.parse(a.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/chjj/marked.",(e||_.defaults).silent)return"<p>An error occured:</p><pre>"+l(t.message+"",!0)+"</pre>";throw t}}s._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,s._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,s.link=h(s.link)("inside",s._inside)("href",s._href)(),s.reflink=h(s.reflink)("inside",s._inside)(),s.normal=d({},s),s.pedantic=d({},s.normal,{strong:/^_\_(?=\S)([\s\S]*?\S)_\_(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),s.gfm=d({},s.normal,{escape:h(s.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:h(s.text)("]|","~]|")("|","|https?://|")()}),s.breaks=d({},s.gfm,{br:h(s.br)("{2,}","*")(),text:h(s.gfm.text)("{2,}","*")()}),o.rules=s,o.output=function(t,e,r){return new o(e,r).output(t)},o.prototype.output=function(t){for(var e,r,n,i,a="";t;)if(i=this.rules.escape.exec(t))t=t.substring(i[0].length),a+=i[1];else if(i=this.rules.autolink.exec(t))t=t.substring(i[0].length),"@"===i[2]?(r=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),n=this.mangle("mailto:")+r):n=r=l(i[1]),a+=this.renderer.link(n,null,r);else if(this.inLink||!(i=this.rules.url.exec(t))){if(i=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),t=t.substring(i[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):l(i[0]):i[0];else if(i=this.rules.link.exec(t))t=t.substring(i[0].length),this.inLink=!0,a+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(t))||(i=this.rules.nolink.exec(t))){if(t=t.substring(i[0].length),e=(i[2]||i[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){a+=i[0].charAt(0),t=i[0].substring(1)+t;continue}this.inLink=!0,a+=this.outputLink(i,e),this.inLink=!1}else if(i=this.rules.strong.exec(t))t=t.substring(i[0].length),a+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(t))t=t.substring(i[0].length),a+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(t))t=t.substring(i[0].length),a+=this.renderer.codespan(l(i[2],!0));else if(i=this.rules.br.exec(t))t=t.substring(i[0].length),a+=this.renderer.br();else if(i=this.rules.del.exec(t))t=t.substring(i[0].length),a+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(t))t=t.substring(i[0].length),a+=this.renderer.text(l(this.smartypants(i[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(i[0].length),n=r=l(i[1]),a+=this.renderer.link(n,null,r);return a},o.prototype.outputLink=function(t,e){var r=l(e.href),n=e.title?l(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(r,n,this.output(t[1])):this.renderer.image(r,n,l(t[1]))},o.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},o.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,r="",n=t.length,i=0;i<n;i++)e=t.charCodeAt(i),Math.random()>.5&&(e="x"+e.toString(16)),r+="&#"+e+";";return r},u.prototype.code=function(t,e,r){if(this.options.highlight){var n=this.options.highlight(t,e);null!=n&&n!==t&&(r=!0,t=n)}return e?'<pre><code class="'+this.options.langPrefix+l(e,!0)+'">'+(r?t:l(t,!0))+"\n</code></pre>\n":"<pre><code>"+(r?t:l(t,!0))+"\n</code></pre>"},u.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},u.prototype.html=function(t){return t},u.prototype.heading=function(t,e,r){return"<h"+e+' id="'+this.options.headerPrefix+r.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},u.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},u.prototype.list=function(t,e){var r=e?"ol":"ul";return"<"+r+">\n"+t+"</"+r+">\n"},u.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},u.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},u.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},u.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},u.prototype.tablecell=function(t,e){var r=e.header?"th":"td";return(e.align?"<"+r+' style="text-align:'+e.align+'">':"<"+r+">")+t+"</"+r+">\n"},u.prototype.strong=function(t){return"<strong>"+t+"</strong>"},u.prototype.em=function(t){return"<em>"+t+"</em>"},u.prototype.codespan=function(t){return"<code>"+t+"</code>"},u.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},u.prototype.del=function(t){return"<del>"+t+"</del>"},u.prototype.link=function(t,e,r){if(this.options.sanitize){try{var n=decodeURIComponent((i=t,i.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})))).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return""}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return""}var i,a='<a href="'+t+'"';return e&&(a+=' title="'+e+'"'),a+">"+r+"</a>"},u.prototype.image=function(t,e,r){var n='<img src="'+t+'" alt="'+r+'"';return e&&(n+=' title="'+e+'"'),n+(this.options.xhtml?"/>":">")},u.prototype.text=function(t){return t},c.parse=function(t,e,r){return new c(e,r).parse(t)},c.prototype.parse=function(t){this.inline=new o(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,r,n,i="",a="";for(r="",t=0;t<this.token.header.length;t++)this.token.align[t],r+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(i+=this.renderer.tablerow(r),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],r="",n=0;n<e.length;n++)r+=this.renderer.tablecell(this.inline.output(e[n]),{header:!1,align:this.token.align[n]});a+=this.renderer.tablerow(r)}return this.renderer.table(i,a);case"blockquote_start":for(a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":a="";for(var s=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,s);case"list_item_start":for(a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var o=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(o);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},f.exec=f,_.options=_.setOptions=function(t){return d(_.defaults,t),_},_.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new u,xhtml:!1},_.Parser=c,_.parser=c.parse,_.Renderer=u,_.Lexer=a,_.lexer=a.lex,_.InlineLexer=o,_.inlineLexer=o.output,_.parse=_,void 0!==t&&"object"==typeof e?t.exports=_:void 0===(n=function(){return _}.call(e,r,e,t))||(t.exports=n)}.call(function(){return this||("undefined"!=typeof window?window:r.g)}()),t.exports}(),pr=i((function(t,e){var r="g";t.dA&&(r+="m"),t.cT&&(r+="i");try{return Pr(new RegExp(e,r))}catch(t){return Rr}})),gr=(i((function(t,e){return null!==e.match(t)})),a((function(t,e,r){for(var n,i=[],a=0,s=r,o=e.lastIndex,u=-1;a++<t&&(n=e.exec(s))&&u!=e.lastIndex;){for(var c=n.length-1,l=new Array(c);c>0;){var h=n[c];l[--c]=h?Pr(h):Rr}i.push(_(bp,n[0],n.index,a,P(l))),u=e.lastIndex}return e.lastIndex=o,P(i)})),s((function(t,e,r,n){var i=0;return n.replace(e,(function(e){if(i++>=t)return e;for(var n=arguments.length-3,a=new Array(n);n>0;){var s=arguments[n];a[--n]=s?Pr(s):Rr}return r(_(bp,e,arguments[arguments.length-2],i,P(a)))}))}))),mr=(a((function(t,e,r){for(var n=r,i=[],a=e.lastIndex,s=e.lastIndex;t--;){var o=e.exec(n);if(!o)break;i.push(n.slice(a,o.index)),a=e.lastIndex}return i.push(n.slice(a)),e.lastIndex=s,P(i)})),1),br=2,yr=0,vr=I,wr=a((function(t,e,r){for(;;){if(-2===r.$)return e;var n=r.b,i=r.c,a=r.d,s=r.e,o=t,u=d(t,n,i,d(wr,t,e,s));t=o,e=u,r=a}})),Ar=function(t){return d(wr,a((function(t,e,r){return f(vr,k(t,e),r)})),S,t)},kr=j,xr=(a((function(t,e,r){var n=r.c,a=r.d,s=i((function(e,r){if(e.$){var n=e.a;return d(kr,t,r,n)}var i=e.a;return d(kr,s,r,i)}));return d(kr,s,d(kr,t,e,a),n)})),function(t){return{$:1,a:t}}),Er=i((function(t,e){return{$:3,a:t,b:e}})),Cr=i((function(t,e){return{$:0,a:t,b:e}})),Sr=i((function(t,e){return{$:1,a:t,b:e}})),Tr=function(t){return{$:0,a:t}},Ir=function(t){return{$:2,a:t}},Pr=function(t){return{$:0,a:t}},Rr={$:1},Br=Q,Or=E,Dr=kt,Fr=nt,jr=i((function(t,e){return f(Y,t,R(e))})),Mr=i((function(t,e){return P(f(X,t,e))})),Lr=function(t){return f(jr,"\n    ",f(Mr,"\n",t))},Ur=a((function(t,e,r){for(;;){if(!r.b)return e;var n=r.a,i=r.b,a=t,s=f(t,n,e);t=a,e=s,r=i}})),zr=function(t){return d(Ur,i((function(t,e){return e+1})),0,t)},$r=B,Nr=a((function(t,e,r){for(;;){if(!(w(t,e)<1))return r;var n=t,i=e-1,a=f(vr,e,r);t=n,e=i,r=a}})),Hr=i((function(t,e){return d(Nr,t,e,S)})),qr=i((function(t,e){return d($r,t,f(Hr,0,zr(e)-1),e)})),Wr=function(t){var e=t.charCodeAt(0);return 55296<=e&&e<=56319?1024*(e-55296)+t.charCodeAt(1)-56320+65536:e},Vr=function(t){var e=Wr(t);return 97<=e&&e<=122},Gr=function(t){var e=Wr(t);return e<=90&&65<=e},Kr=function(t){return Vr(t)||Gr(t)},Xr=function(t){var e=Wr(t);return e<=57&&48<=e},Yr=function(t){return Vr(t)||Gr(t)||Xr(t)},Jr=function(t){return d(Ur,vr,S,t)},Qr=function(t){var e=t.charCodeAt(0);return isNaN(e)?Rr:Pr(55296<=e&&e<=56319?k(t[0]+t[1],t.slice(2)):k(t[0],t.slice(1)))},Zr=i((function(t,e){return"\n\n("+Fr(t+1)+") "+Lr(tn(e))})),tn=function(t){return f(en,t,S)},en=i((function(t,e){t:for(;;)switch(t.$){case 0:var r=t.a,n=t.b,i=function(){var t=Qr(r);if(1===t.$)return!1;var e=t.a,n=e.a,i=e.b;return Kr(n)&&f(Br,Yr,i)}(),a=n,s=f(vr,i?"."+r:"['"+r+"']",e);t=a,e=s;continue t;case 1:var o=t.a,u=(n=t.b,"["+Fr(o)+"]");t=a=n,e=s=f(vr,u,e);continue t;case 2:var c=t.a;if(c.b){if(c.b.b){var l=(e.b?"The Json.Decode.oneOf at json"+f(jr,"",Jr(e)):"Json.Decode.oneOf")+" failed in the following "+Fr(zr(c))+" ways:";return f(jr,"\n\n",f(vr,l,f(qr,Zr,c)))}t=a=n=c.a,e=s=e;continue t}return"Ran into a Json.Decode.oneOf with no possibilities"+(e.b?" at json"+f(jr,"",Jr(e)):"!");default:var h=t.a,d=t.b;return(l=e.b?"Problem with the value at json"+f(jr,"",Jr(e))+":\n\n    ":"Problem with the given value:\n\n")+Lr(f(Dr,4,d))+"\n\n"+h}})),rn=32,nn=s((function(t,e,r,n){return{$:0,a:t,b:e,c:r,d:n}})),an=[],sn=U,on=i((function(t,e){return N(e)/N(t)})),un=function(t){return t},cn=sn(f(on,2,rn)),ln=_(nn,0,cn,an,an),hn=D,fn=(i((function(t,e){return t(e)})),i((function(t,e){return e(t)}))),dn=v,_n=z,pn=function(t){return t.length},gn=i((function(t,e){return w(t,e)>0?t:e})),mn=F,bn=i((function(t,e){for(;;){var r=f(mn,rn,t),n=r.a,i=r.b,a=f(vr,{$:0,a:n},e);if(!i.b)return Jr(a);t=i,e=a}})),yn=function(t){return t.a},vn=i((function(t,e){for(;;){var r=sn(e/rn);if(1===r)return f(mn,rn,t).a;t=f(bn,t,S),e=r}})),wn=i((function(t,e){if(e.h){var r=e.h*rn,n=_n(f(on,rn,r-1)),i=t?Jr(e.k):e.k,a=f(vn,i,e.h);return _(nn,pn(e.j)+r,f(gn,5,n*cn),a,e.j)}return _(nn,pn(e.j),cn,an,e.j)})),An=o((function(t,e,r,n,i){for(;;){if(e<0)return f(wn,!1,{k:n,h:r/rn|0,j:i});var a={$:1,a:d(hn,rn,e,t)};e-=rn,n=f(vr,a,n)}})),kn=i((function(t,e){if(t<=0)return ln;var r=t%rn,n=d(hn,r,t-r,e);return p(An,e,t-r-rn,t,S,n)})),xn=function(t){return!t.$},En=dt,Cn=_t,Sn=function(t){return{$:0,a:t}},Tn=function(t){switch(t.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},In=function(t){return t},Pn=In,Rn=u((function(t,e,r,n,i,a){return{dg:a,bY:e,b9:n,cb:r,cg:t,ch:i}})),Bn=Z,On=function(t){return t.length},Dn=J,Fn=i((function(t,e){return t<1?e:d(Dn,t,On(e),e)})),jn=rt,Mn=function(t){return""===t},Ln=i((function(t,e){return t<1?"":d(Dn,0,t,e)})),Un=function(t){for(var e=0,r=t.charCodeAt(0),n=43==r||45==r?1:0,i=n;i<t.length;++i){var a=t.charCodeAt(i);if(a<48||57<a)return Rr;e=10*e+a-48}return i==n?Rr:Pr(45==r?-e:e)},zn=o((function(t,e,r,n,i){if(Mn(i)||f(Bn,"@",i))return Rr;var a=f(jn,":",i);if(a.b){if(a.b.b)return Rr;var s=a.a,o=Un(f(Fn,s+1,i));if(1===o.$)return Rr;var u=o;return Pr(g(Rn,t,f(Ln,s,i),u,e,r,n))}return Pr(g(Rn,t,i,Rr,e,r,n))})),$n=s((function(t,e,r,n){if(Mn(n))return Rr;var i=f(jn,"/",n);if(i.b){var a=i.a;return p(zn,t,f(Fn,a,n),e,r,f(Ln,a,n))}return p(zn,t,"/",e,r,n)})),Nn=a((function(t,e,r){if(Mn(r))return Rr;var n=f(jn,"?",r);if(n.b){var i=n.a;return _($n,t,Pr(f(Fn,i+1,r)),e,f(Ln,i,r))}return _($n,t,Rr,e,r)})),Hn=i((function(t,e){if(Mn(e))return Rr;var r=f(jn,"#",e);if(r.b){var n=r.a;return d(Nn,t,Pr(f(Fn,n+1,e)),f(Ln,n,e))}return d(Nn,t,Rr,e)})),qn=tt,Wn=function(t){return f(qn,"http://",t)?f(Hn,0,f(Fn,7,t)):f(qn,"https://",t)?f(Hn,1,f(Fn,8,t)):Rr},Vn=function(t){for(;;);},Gn=Ct,Kn=Gn(0),Xn=s((function(t,e,r,n){if(n.b){var i=n.a,a=n.b;if(a.b){var s=a.a,o=a.b;if(o.b){var u=o.a,c=o.b;if(c.b){var l=c.a,h=c.b;return f(t,i,f(t,s,f(t,u,f(t,l,r>500?d(Ur,t,e,Jr(h)):_(Xn,t,e,r+1,h)))))}return f(t,i,f(t,s,f(t,u,e)))}return f(t,i,f(t,s,e))}return f(t,i,e)}return e})),Yn=a((function(t,e,r){return _(Xn,t,e,0,r)})),Jn=i((function(t,e){return d(Yn,i((function(e,r){return f(vr,t(e),r)})),S,e)})),Qn=Tt,Zn=i((function(t,e){return f(Qn,(function(e){return Gn(t(e))}),e)})),ti=a((function(t,e,r){return f(Qn,(function(e){return f(Qn,(function(r){return Gn(f(t,e,r))}),r)}),e)})),ei=function(t){return d(Yn,ti(vr),Gn(S),t)},ri=Nt,ni=i((function(t,e){var r=e;return Rt(f(Qn,ri(t),r))})),ii=a((function(t,e,r){return f(Zn,(function(t){return 0}),ei(f(Jn,ni(t),e)))})),ai=a((function(t,e,r){return Gn(0)})),si=i((function(t,e){return f(Zn,t,e)}));Ut.Task=zt(Kn,ii,ai,si);var oi=qt("Task"),ui=i((function(t,e){return oi(f(Zn,t,e))})),ci={$:0},li=i((function(t,e){return{$:1,a:t,b:e}})),hi=i((function(t,e){return{$:0,a:t,b:e}})),fi={$:39},di={$:41},_i=function(t){return{$:4,a:t}},pi=function(t){return{$:3,a:t}},gi=function(t){return{$:5,a:t}},mi=Wt,bi=h((function(t,e,r,n,i,a,s,o,u){return{aP:u,aR:e,aS:t,aT:n,aW:o,aG:r,bb:i,aM:a,bx:s}})),yi=st,vi=ft,wi=function(t){return{$:1,a:t}},Ai=ct,ki=f(vi,(function(t){switch(t){case"pcm":return Sn(1);case"waveform":return Sn(0);default:return wi("invalid AudioEmulation value")}}),Ai),xi=f(vi,(function(t){switch(t){case"cycle":return Sn(0);case"instruction":return Sn(1);default:return wi("invalid CpuEmulation value")}}),Ai),Ei=f(vi,(function(t){switch(t){case"pal":return Sn(0);case"ntsc":return Sn(1);case"secam":return Sn(2);default:return wi("invalid TvMode value")}}),Ai),Ci=at,Si=function(t){return{$:11,g:t}},Ti=function(t){return Si(P([f(En,Pr,t),Sn(Rr)]))},Ii=Cn(fn),Pi=lt,Ri=i((function(t,e){return d(Yn,Pi,e,t)})),Bi=pt,Oi=ut,Di=a((function(t,e,r){var n=function(t){return Si(P([t,(e=r,{$:5,c:e})]));var e};return f(vi,(function(i){var a=f(Bi,f(Ri,t,Oi),i);if(a.$)return Sn(r);var s=a.a,o=f(Bi,n(e),s);if(o.$)return f(Ri,t,n(e));var u=o.a;return Sn(u)}),Oi)})),Fi=s((function(t,e,r,n){return f(Ii,d(Di,P([t]),e,r),n)})),ji=a((function(t,e,r){return f(Ii,f(Pi,t,e),r)})),Mi=_(Fi,"phosphorLevel",Ti(Ci),Rr,_(Fi,"audioEmulation",Ti(ki),Rr,_(Fi,"cpuEmulation",Ti(xi),Rr,_(Fi,"firstVisibleLine",Ti(Ci),Rr,_(Fi,"rngSeed",Ti(Ci),Rr,d(ji,"volume",Ci,d(ji,"emulatePaddles",yi,d(ji,"tvMode",Ei,d(ji,"cartridgeType",Ai,d(ji,"name",Ai,d(ji,"hash",Ai,Sn((function(t){return function(e){return function(r){return function(n){return function(i){return function(a){return function(s){return function(o){return function(u){return function(c){return function(l){return{cO:c,bK:r,cZ:u,bQ:i,bU:o,T:t,aB:e,dO:l,cn:s,cA:n,ei:a}}}}}}}}}}}}))))))))))))),Li=i((function(t,e){return{c4:e,dq:t}})),Ui=d(Cn,Li,f(Pi,"key",Ai),f(Pi,"description",Ai)),zi=f(vi,(function(t){switch(t){case"wide":return Sn(1);case"narrow":return Sn(0);default:return wi("invalid media value")}}),Ai),$i=f(vi,(function(t){switch(t){case"qis":return Sn(0);case"bilinear":return Sn(1);case"none":return Sn(2);default:return wi("invalid scaling value")}}),Ai),Ni=f(vi,(function(t){switch(t){case"composite":return Sn(0);case"svideo":return Sn(1);case"none":return Sn(2);default:return wi("invalid tv emulation value")}}),Ai),Hi=ot,qi=d(ji,"uiSize",Ci,_(Fi,"uiMode",Ti(zi),Rr,d(ji,"virtualJoystickSensitivity",Ci,d(ji,"leftHanded",yi,_(Fi,"touchControls",Ti(yi),Rr,d(ji,"scanlineIntensity",Ci,d(ji,"phosphorLevel",Ci,d(ji,"scaling",$i,d(ji,"tvEmulation",Ni,d(ji,"gammaCorrection",Hi,d(ji,"audioEmulation",ki,d(ji,"volume",Ci,d(ji,"cpuEmulation",xi,Sn((function(t){return function(e){return function(r){return function(n){return function(i){return function(a){return function(s){return function(o){return function(u){return function(c){return function(l){return function(h){return function(f){return{cO:r,cZ:t,dh:n,dr:c,dO:s,dW:a,dX:o,eb:u,ec:i,ed:h,cB:f,eh:l,ei:e}}}}}}}}}}}}}}))))))))))))))),Wi=function(t){return{$:3,b:t}},Vi=d(ji,"badGpu",yi,d(ji,"gamepadCount",Ci,d(ji,"wasUpdated",yi,d(ji,"version",Ai,d(ji,"touchSupport",yi,d(ji,"defaultSettings",qi,d(ji,"settings",qi,d(ji,"cartridgeTypes",Wi(Ui),d(ji,"cartridges",Wi(Mi),Sn(bi)))))))))),Gi=i((function(t,e){return{$:3,a:t,b:e}})),Ki=function(t){return{$:0,a:t}},Xi=i((function(t,e){return{$:4,a:t,b:e}})),Yi={$:2},Ji=function(t){return{$:1,a:t}},Qi=function(t){return{$:0,a:t}},Zi={$:1},ta={$:-2},ea=ta,ra=function(t){return!t.$},na=Ht,ia=A,aa=i((function(t,e){t:for(;;){if(-2===e.$)return Rr;var r=e.b,n=e.c,i=e.d,a=e.e;switch(f(ia,t,r)){case 0:e=i;continue t;case 1:return Pr(n);default:e=a;continue t}}})),sa=o((function(t,e,r,n,i){return{$:-1,a:t,b:e,c:r,d:n,e:i}})),oa=o((function(t,e,r,n,i){if(-1!==i.$||i.a){if(-1!==n.$||n.a||-1!==n.d.$||n.d.a)return p(sa,t,e,r,n,i);n.a,_=n.b,g=n.c;var a=n.d,s=(a.a,a.b),o=a.c,u=a.d,c=a.e;return b=n.e,p(sa,0,_,g,p(sa,1,s,o,u,c),p(sa,1,e,r,b,i))}i.a;var l=i.b,h=i.c,f=i.d,d=i.e;if(-1!==n.$||n.a)return p(sa,t,l,h,p(sa,0,e,r,n,f),d);n.a;var _=n.b,g=n.c,m=n.d,b=n.e;return p(sa,0,e,r,p(sa,1,_,g,m,b),p(sa,1,l,h,f,d))})),ua=a((function(t,e,r){if(-2===r.$)return p(sa,0,t,e,ta,ta);var n=r.a,i=r.b,a=r.c,s=r.d,o=r.e;switch(f(ia,t,i)){case 0:return p(oa,n,i,a,d(ua,t,e,s),o);case 1:return p(sa,n,i,e,s,o);default:return p(oa,n,i,a,s,d(ua,t,e,o))}})),ca=a((function(t,e,r){var n=d(ua,t,e,r);if(-1!==n.$||n.a)return n;n.a;var i=n.b,a=n.c,s=n.d,o=n.e;return p(sa,1,i,a,s,o)})),la=function(t){if(-1===t.$&&-1===t.d.$&&-1===t.e.$){if(-1!==t.e.d.$||t.e.d.a){t.a,i=t.b,a=t.c;var e=t.d,r=(e.a,o=e.b,u=e.c,c=e.d,l=e.e,t.e);return r.a,f=r.b,d=r.c,n=r.d,y=r.e,p(sa,1,i,a,p(sa,0,o,u,c,l),p(sa,0,f,d,n,y))}t.a;var n,i=t.b,a=t.c,s=t.d,o=(s.a,s.b),u=s.c,c=s.d,l=s.e,h=t.e,f=(h.a,h.b),d=h.c,_=((n=h.d).a,n.b),g=n.c,m=n.d,b=n.e,y=h.e;return p(sa,0,_,g,p(sa,1,i,a,p(sa,0,o,u,c,l),m),p(sa,1,f,d,b,y))}return t},ha=function(t){if(-1===t.$&&-1===t.d.$&&-1===t.e.$){if(-1!==t.d.d.$||t.d.d.a){t.a,i=t.b,a=t.c;var e=t.d,r=(e.a,o=e.b,u=e.c,e.d),n=(_=e.e,t.e);return n.a,m=n.b,b=n.c,y=n.d,v=n.e,p(sa,1,i,a,p(sa,0,o,u,r,_),p(sa,0,m,b,y,v))}t.a;var i=t.b,a=t.c,s=t.d,o=(s.a,s.b),u=s.c,c=s.d,l=(c.a,c.b),h=c.c,f=c.d,d=c.e,_=s.e,g=t.e,m=(g.a,g.b),b=g.c,y=g.d,v=g.e;return p(sa,0,o,u,p(sa,1,l,h,f,d),p(sa,1,i,a,_,p(sa,0,m,b,y,v)))}return t},fa=c((function(t,e,r,n,i,a,s){if(-1!==a.$||a.a){t:for(;;){if(-1===s.$&&1===s.a){if(-1===s.d.$){if(1===s.d.a)return s.a,s.d.a,ha(e);break t}return s.a,s.d,ha(e)}break t}return e}a.a;var o=a.b,u=a.c,c=a.d,l=a.e;return p(sa,r,o,u,c,p(sa,0,n,i,l,s))})),da=function(t){if(-1===t.$&&-1===t.d.$){var e=t.a,r=t.b,n=t.c,i=t.d,a=i.a,s=i.d,o=t.e;if(1===a){if(-1!==s.$||s.a){var u=la(t);if(-1===u.$){var c=u.a,l=u.b,h=u.c,f=u.d,d=u.e;return p(oa,c,l,h,da(f),d)}return ta}return s.a,p(sa,e,r,n,da(i),o)}return p(sa,e,r,n,da(i),o)}return ta},_a=i((function(t,e){if(-2===e.$)return ta;var r=e.a,n=e.b,i=e.c,a=e.d,s=e.e;if(w(t,n)<0){if(-1===a.$&&1===a.a){a.a;var o=a.d;if(-1!==o.$||o.a){var u=la(e);if(-1===u.$){var c=u.a,l=u.b,h=u.c,d=u.d,_=u.e;return p(oa,c,l,h,f(_a,t,d),_)}return ta}return o.a,p(sa,r,n,i,f(_a,t,a),s)}return p(sa,r,n,i,f(_a,t,a),s)}return f(pa,t,m(fa,t,e,r,n,i,a,s))})),pa=i((function(t,e){if(-1===e.$){var r=e.a,n=e.b,i=e.c,a=e.d,s=e.e;if(b(t,n)){var o=function(t){for(;;){if(-1!==t.$||-1!==t.d.$)return t;t=t.d}}(s);if(-1===o.$){var u=o.b,c=o.c;return p(oa,r,u,c,a,da(s))}return ta}return p(oa,r,n,i,a,f(_a,t,s))}return ta})),ga=i((function(t,e){var r=f(_a,t,e);if(-1!==r.$||r.a)return r;r.a;var n=r.b,i=r.c,a=r.d,s=r.e;return p(sa,1,n,i,a,s)})),ma=a((function(t,e,r){var n=e(f(aa,t,r));if(n.$)return f(ga,t,r);var i=n.a;return d(ca,t,i,r)})),ba=a((function(t,e,r){return e(t(r))})),ya=i((function(t,e){return d(ur,"",In,f(ba,e,t))})),va=function(t){return{$:4,a:t}},wa={$:2},Aa={$:1},ka=i((function(t,e){if(e.$){var r=e.a;return xr(t(r))}var n=e.a;return Tr(n)})),xa=i((function(t,e){switch(e.$){case 0:var r=e.a;return xr({$:0,a:r});case 1:return xr(Aa);case 2:return xr(wa);case 3:var n=e.a;return xr(function(t){return{$:3,a:t}}(n.d2));default:var i=e.b;return f(ka,va,t(i))}})),Ea={cO:1,cZ:0,dh:1,dr:!1,dO:50,dW:0,dX:20,eb:Rr,ec:0,ed:Rr,cB:100,eh:10,ei:80},Ca={$:0},Sa=function(t){return{$:1,a:t}},Ta=i((function(t,e){return{ck:t,cu:e}})),Ia=Gn(f(Ta,ea,S)),Pa=function(t){return St((function(e){var r=t.f;2===r.$&&r.c&&r.c(),t.f=null,e(Ct(0))}))},Ra=Rt,Ba=a((function(t,e,r){t:for(;;){if(e.b){var n=e.a,i=e.b;if(n.$){var a=n.a;return f(Qn,(function(e){var n=a.cx;if(1===n.$)return d(Ba,t,i,r);var s=n.a;return d(Ba,t,i,d(ca,s,e,r))}),Ra(d(sr,t,ri(t),a)))}var s=n.a,o=f(aa,s,r);if(1===o.$){e=i;continue t}var u=o.a;return f(Qn,(function(e){return d(Ba,t,i,f(ga,s,r))}),Pa(u))}return Gn(r)}})),Oa=s((function(t,e,r,n){return f(Qn,(function(t){return Gn(f(Ta,t,r))}),d(Ba,t,e,n.ck))})),Da=a((function(t,e,r){var n=t(e);if(n.$)return r;var i=n.a;return f(vr,i,r)})),Fa=i((function(t,e){return d(Yn,Da(t),S,e)})),ja=s((function(t,e,r,n){var i=n.a,a=n.b;return b(e,i)?Pr(f(ri,t,a(r))):Rr})),Ma=a((function(t,e,r){var n=e.a,i=e.b;return f(Qn,(function(t){return Gn(r)}),ei(f(Fa,d(ja,t,n,i),r.cu)))})),La=i((function(t,e){if(e.$){var r=e.a;return Sa({cL:r.cL,cP:r.cP,be:f(cr,t,r.be),bW:r.bW,dx:r.dx,d9:r.d9,cx:r.cx,bw:r.bw})}return{$:0,a:e.a}})),Ua=i((function(t,e){return{$:0,a:t,b:e}})),za=i((function(t,e){var r=e.a,n=e.b;return f(Ua,r,f(ba,n,t))}));Ut.Http=zt(Ia,Oa,Ma,La,za);var $a,Na,Ha,qa,Wa=qt("Http"),Va=(qt("Http"),function(t){return function(t){return Wa(Sa({cL:!1,cP:t.cP,be:t.be,bW:t.bW,dx:t.dx,d9:t.d9,cx:t.cx,bw:t.bw}))}({cP:Ca,be:t.be,bW:S,dx:"GET",d9:Rr,cx:Rr,bw:t.bw})}),Ga=i((function(t,e){return e.$?Rr:t(e.a)})),Ka=i((function(t,e){return d(Yn,i((function(e,r){return t(e)?f(vr,e,r):r})),S,e)})),Xa=function(t){if(t.b){var e=t.a;return t.b,Pr(e)}return Rr},Ya=i((function(t,e){if(e.$)return Rr;var r=e.a;return Pr(t(r))})),Ja=P([k(2,"emulation"),k(1,"settings"),k(0,"cartridges"),k(3,"help"),k(4,"about")]),Qa=function(t){var e=t.dg;return f(Ga,(function(t){return d(ba,Ka((function(e){return b(e.b,t)})),f(ba,Xa,Ya(yn)),Ja)}),e)},Za=nr,ts=function(t){return t.b},es=i((function(t,e){return e.$?t:e.a})),rs=function(t){return"#"+d(ba,Ka((function(e){return b(e.a,t)})),f(ba,Xa,f(ba,Ya(ts),es(""))),Ja)},ns=i((function(t,e){return d(Ur,function(t){return i((function(e,r){return r.push(t(e)),r}))}(t),[],e)})),is=xt,as=Qt("watchMedia_",ns(is)),ss=as,os=function(t){return ss(P(["(max-width: "+Fr(750*t/100|0)+"px)"]))},us=a((function(t,e,r){var n,i=f(es,0,Qa(e)),a=function(t){return f(ya,(function(e){if(e.$)return di;var r=e.a;return t(r)}),xa(Tr))},s=(n=f(Bi,Vi,t)).$?{aP:!1,aR:S,aS:S,aT:Ea,aW:0,aG:Ea,bb:!1,aM:"[unknown]",bx:!1}:n.a,o={aP:s.aP,cR:"",aR:s.aR,cS:0,aS:s.aS,cV:Rr,cY:{cX:0,c5:0,c6:0},c_:Rr,c$:i,aT:s.aT,c9:!1,da:ci,aW:s.aW,dj:Rr,dq:r,ds:Rr,dt:!0,du:Rr,dw:s.bx?k(Pr(fi),f(hi,"Stellerator has been updated to version "+s.aM+".",k("Changelog","Close"))):k(Rr,f(li,"","")),dU:Rr,aG:s.aG,d$:!1,d0:!1,bb:s.bb,aM:s.aM};return k(o,mi(P([f(Za,r,rs(i)),os(o.aG.cB),Va({be:a(pi),bw:"doc/stellerator.md"}),Va({be:a(_i),bw:"CHANGELOG.md"}),Va({be:a(gi),bw:"LICENSE.md"})])))})),cs=function(t){return{$:0,a:t}},ls=f(ba,Qa,f(ba,Ya((function(t){return{$:1,a:t}})),es(cs(rs(0))))),hs=i((function(t,e){if(1===t.$)return e;var r=t.a;return e+":"+Fr(r)})),fs=a((function(t,e,r){return 1===e.$?r:C(r,C(t,e.a))})),ds=function(t){return{$:20,a:t}},_s=function(t){return{$:34,a:t}},ps=function(t){return{$:33,a:t}},gs=function(t){return{$:40,a:t}},ms=Wt,bs=function(t){return{$:3,a:t}},ys={$:1},vs=function(t){return{$:2,a:t}},ws=f(vi,(function(t){switch(t){case"stopped":return Sn(ci);case"paused":return Sn(ys);case"running":return f(En,vs,Ti(f(Pi,"frequency",Hi)));case"error":return f(En,bs,f(Pi,"error",Ai));default:return wi("invalid emulation state")}}),f(Pi,"state",Ai)),As=i((function(t,e){if(e.$){var r=e.a;return xr(r)}var n=e.a;return Tr(t(n))})),ks=ee("onEmulationStateChange_",Oi),xs=i((function(t,e){return e.$?t:e.a})),Es=function(t){return ks(f(ba,Bi(ws),f(ba,As(t),xs(di))))},Cs=f(vi,(function(t){switch(t){case"pause":return Sn(0);case"reset":return Sn(1);case"fullscreen":return Sn(2);default:return wi("invalid input driver event")}}),Ai),Ss=ee("onInputDriverEvent_",Oi),Ts=function(t){return Ss(f(ba,Bi(Cs),f(ba,As(t),xs(di))))},Is=a((function(t,e,r){return t(e(r))})),Ps=ee("onNewCartridges_",Oi),Rs=ee("onUpdateGamepadCount_",Ci),Bs=Rs,Os=ee("onMediaUpdate_",Wi(yi)),Ds=Os,Fs=Ds(f(ba,Xa,f(ba,Ya((function(t){return{$:2,a:t?0:1}})),es(di)))),js={$:4},Ms=function(t){return{$:9,a:t}},Ls={$:31},Us=null,zs=Qt("addCartridge_",(function(t){return Us})),$s=zs(0),Ns=Qt("blurCurrentElement_",(function(t){return Us})),Hs=Ns(0),qs=i((function(t,e){for(;;){if(!e.b)return!1;var r=e.a,n=e.b;if(t(r))return!0;e=n}})),Ws=function(t){return!t},Vs=i((function(t,e){return!f(qs,f(Is,Ws,t),e)})),Gs=function(t){return t.toUpperCase()},Ks=i((function(t,e){var r=P(Gs(t).trim().split(/\s+/g));return f(Ka,(function(t){return f(Vs,(function(e){return f(Bn,e,Gs(t.aB))}),r)}),e)})),Xs=function(t){return f(Ks,t.cR,t.aS)},Ys=Qt("deleteAllCartridges_",(function(t){return Us})),Js=Ys(0),Qs=Qt("deleteCartridge_",is),Zs=Qs,to=i((function(t,e){for(;;){if(!e.b)return Rr;var r=e.a,n=e.b;if(t(r))return Pr(r);e=n}})),eo=O,ro=i((function(t,e){var r=f(eo,f(ba,(function(t){return t.aB}),Gs),t),n=function(t){if(t.b&&t.b.b){var i=t.a,a=t.b,s=a.a,o=a.b;return b(i.T,e)?Pr(s):n(f(vr,s,o))}return Xa(r)};return n(C(r,C(r,r)))})),no=mi(S),io=Qt("pauseEmulation_",(function(t){return Us})),ao=io(0),so=i((function(t,e){var r=f(eo,f(ba,(function(t){return t.aB}),Gs),t),n=function(t){if(t.b&&t.b.b){var i=t.a,a=t.b,s=a.a,o=a.b;return b(s.T,e)?Pr(i):n(f(vr,s,o))}return Xa(Jr(r))};return n(C(r,C(r,r)))})),oo=rr,uo=Qt("resetEmulation_",(function(t){return Us})),co=uo(0),lo=Qt("resumeEmulation_",(function(t){return Us})),ho=lo(0),fo=Qt("saveCartridge_",is),_o=fo,po=Qt("scrollIntoView_",(function(t){var e=t.a,r=t.b;return f(ns,In,P([is(e),is(r)]))})),go=i((function(t,e){var r=function(){switch(t){case 0:return"start";case 1:return"center";case 2:return"end";default:return"nearest"}}();return po(k(r,e))})),mo=Qt("scrollToTop_",(function(t){return Us})),bo=mo(0),yo=function(t){return d(ba,Ga((function(e){return f(to,(function(t){return b(t.T,e)}),Xs(t))})),Ya((function(t){return t.T})),t.c_)},vo=xt,wo=Qt("setLimitFramerate_",vo),Ao=wo,ko=function(t){return is(t?"amateur":"pro")},xo=function(t){return d(Ur,i((function(t,e){var r=t.a,n=t.b;return d(Et,r,n,e)})),{},t)},Eo=function(t){return xo(P([k("difficultyP0",ko(t.c5)),k("difficultyP1",ko(t.c6)),k("color",(e=t.cX,is(e?"bw":"color")))]));var e},Co=Qt("startEmulation_",In),So=i((function(t,e){return Co(xo(P([k("hash",is(t)),k("switches",Eo(e))])))})),To=Qt("stopEmulation_",(function(t){return Us})),Io=To(0),Po=Qt("toggleFullscreen_",(function(t){return Us})),Ro=Po(0),Bo=function(t){return is(1===t?"pcm":"waveform")},Oo=function(t){return is(t?"instruction":"cycle")},Do=s((function(t,e,r,n){return f(es,n,f(Ya,(function(r){return f(vr,k(t,e(r)),n)}),r))})),Fo=function(t){switch(t){case 0:return is("pal");case 1:return is("ntsc");default:return is("secam")}},jo=xt,Mo=Qt("updateCartridge_",In),Lo=function(t){return Mo(xo(_(Do,"phosphorLevel",jo,(e=t).dO,_(Do,"audioEmulation",Bo,e.cO,_(Do,"cpuEmulation",Oo,e.cZ,_(Do,"firstVisibleLine",jo,e.bU,_(Do,"rngSeed",jo,e.cn,P([k("hash",is(e.T)),k("name",is(e.aB)),k("cartridgeType",is(e.bK)),k("tvMode",Fo(e.cA)),k("emulatePaddles",vo(e.bQ)),k("volume",jo(e.ei))]))))))));var e},Uo=a((function(t,e,r){switch(e.$){case 0:var n=e.a;return x(r,{aB:n});case 1:var i=e.a,a=f(es,r.bK,f(Ya,(function(t){return t.dq}),f(to,(function(t){return b(t.dq,i)}),t)));return x(r,{bK:a});case 2:var s=e.a;return x(r,{cA:s});case 3:var o=e.a;return x(r,{bQ:o});case 4:var u=e.a,c=f(Ga,(function(t){return t>=0?Pr(t):r.cn}),u);return x(r,{cn:c});case 5:var l=e.a,h=f(Ga,(function(t){return t>=0&&t<100?Pr(t):r.bU}),l);return x(r,{bU:h});case 6:var d=e.a;return x(r,{cZ:d});case 7:return d=e.a,x(r,{cO:d});case 8:var _=e.a;return x(r,{ei:_});default:var p=e.a;return x(r,{dO:p})}})),zo=Qt("updateConsoleSwitches_",In),$o=f(ba,Eo,zo),No=function(t){return is(1===t?"wide":"narrow")},Ho=function(t){switch(t){case 0:return is("qis");case 1:return is("bilinear");default:return is("none")}},qo=function(t){switch(t){case 0:return is("composite");case 1:return is("svideo");default:return is("none")}},Wo=xt,Vo=Qt("updateSettings_",In),Go=f(ba,(function(t){return xo(_(Do,"uiMode",No,t.ed,_(Do,"touchControls",vo,t.eb,P([k("cpuEmulation",Oo(t.cZ)),k("volume",jo(t.ei)),k("audioEmulation",Bo(t.cO)),k("gammaCorrection",Wo(t.dh)),k("tvEmulation",qo(t.ec)),k("scaling",Ho(t.dW)),k("phosphorLevel",jo(t.dO)),k("scanlineIntensity",jo(t.dX)),k("leftHanded",vo(t.dr)),k("virtualJoystickSensitivity",jo(t.eh)),k("uiSize",jo(t.cB))]))))}),Vo),Ko=P([50,75,100,125,150]),Xo=a((function(t,e,r){switch(t.$){case 0:var n=t.a;return x(r,{cZ:n});case 1:var i=t.a;return x(r,{ei:i});case 2:var a=t.a;return x(r,{cO:a});case 3:var s=t.a;return x(r,{dh:s});case 4:var o=t.a;return x(r,{ec:o});case 5:var u=t.a;return x(r,{dW:u});case 6:var c=t.a;return x(r,{dO:c});case 7:var l=t.a;return x(r,{dX:l});case 8:var h=t.a;return x(r,{eb:h});case 9:var d=t.a;return x(r,{dr:d});case 10:var _=t.a;return x(r,{eh:_});case 11:var p=t.a;return x(r,{ed:p});case 12:var g=t.a;return f(es,r,f(Ya,(function(t){return x(r,{cB:t})}),f(to,dn(g),Ko)));default:return e}})),Yo=i((function(t,e){t:for(;;){var r=function(t){return k(x(e,{c_:t}),f(es,no,f(Ya,go(3),t)))},n=function(t){return k(t,no)};switch(t.$){case 0:var s=t.a;return k(e,f(oo,e.dq,s));case 1:var o=t.a,u=function(){var t=k(o,yo(e));if(t.a||t.b.$)return P([bo]);t.a;var r=t.b.a;return e.c$?P([f(go,1,r)]):S}(),c=x(e,{c$:o,d$:2===o,d0:!1}),l=(Y=void 0,2!==(Y=k(o,e.c9)).a||Y.b?P([ao]):(Y.a,P([ho])));return k(c,mi(C(u,l)));case 2:var h=t.a,_=function(){var t=k(e.c$,yo(e));if(t.a||t.b.$)return no;t.a;var r=t.b.a;return f(go,1,r)}();return k(x(e,{cS:0,du:Pr(h)}),_);case 7:var p=t.a;return k(c=x(e,{cR:p}),bo);case 8:return X=void 0,_=(X=e.du).$||X.a?f(es,no,f(Ya,go(3),e.c_)):(X.a,bo),k(x(e,{cR:""}),_);case 9:var g=t.a;return r(Pr(g));case 10:return g=t.a,r(f(Ya,(function(t){return t.T}),f(ro,Xs(e),g)));case 11:return g=t.a,r(f(Ya,(function(t){return t.T}),f(so,Xs(e),g)));case 12:return r(f(Ya,(function(t){return t.T}),Xa(Xs(e))));case 13:return r(f(Ya,(function(t){return t.T}),Xa(Jr(Xs(e)))));case 14:return n(x(e,{c_:Rr}));case 15:g=t.a;var m=b(e.c_,Pr(g))?f(Ya,(function(t){return t.T}),f(ro,Xs(e),g)):e.c_;return _=b(m,e.c_)?no:f(es,no,f(Ya,go(3),m)),k(x(e,{cS:0,aS:f(Ka,(function(t){return!b(t.T,g)}),e.aS),c_:m}),mi(P([_,Zs(g)])));case 16:return k(x(e,{aS:S,c_:Rr}),Js);case 17:g=t.a;var y=t.b,v=f(Jn,(function(t){return b(t.T,g)?d(Uo,e.aR,y,t):t}),e.aS);return _=f(es,no,f(Ya,Lo,f(to,f(Is,dn(g),(function(t){return t.T})),v))),k(x(e,{aS:v}),_);case 3:var w=t.a;return n(x(e,{dj:Pr(w)}));case 4:return w=t.a,n(x(e,{cV:Pr(w)}));case 5:return w=t.a,n(x(e,{ds:Pr(w)}));case 6:return n(x(e,{d0:!e.d0}));case 18:var A=t.a,E=(K=void 0,1!==(K=k(A,e.c_)).a||K.b.$?0:(K.a,1));return _=function(){var t={a:E,b:e.cS,c:yo(e)};e:for(;;){if(t.a){if(t.b)break e;return bo}if(1!==t.b||t.c.$)break e;var r=t.c.a;return f(go,1,r)}return no}(),k(x(e,{cS:E}),_);case 19:return k(e,$s);case 20:var T=t.a,I=x(e,{cR:"",aS:(J=d(Ur,i((function(t,e){return d(ca,t.T,t,e)})),ea,C(e.aS,T)),d(wr,a((function(t,e,r){return f(vr,e,r)})),S,J))});if(T.b){var R=T.a;t=Ms(R.T),e=I;continue t}return n(I);case 21:return g=t.a,k(e,_o(g));case 22:var B=t.a,O=d(Xo,B,e.aT,e.aG),D=b(e.aG.cB,O.cB)?no:os(O.cB);return k(x(e,{aG:O}),mi(P([Go(O),D])));case 23:var F=t.a,j=t.b,M=t.c;return n(x(e,{dw:k(Pr(M),f(hi,F,j))}));case 24:F=t.a;var L=t.b;return M=t.c,n(x(e,{dw:k(Pr(M),f(li,F,L))}));case 25:return n(x(e,{dw:k(Rr,e.dw.b)}));case 26:return c=x(e,{dw:k(Rr,e.dw.b)}),f(es,n(c),f(Ya,(function(t){return f(Yo,t,c)}),e.dw.a));case 27:return g=t.a,k(x(e,{c9:!1,da:js,dU:Pr(g)}),mi(P([f(So,g,e.cY),f(oo,e.dq,rs(2))])));case 29:return k(e,Io);case 28:return k(e,ao);case 30:return k(e,co);case 31:var U=!e.c9;switch(c=x(e,{c9:U,d$:!1}),_=U?ao:ho,e.da.$){case 1:case 2:return k(c,_);default:return k(e,no)}case 33:var z=t.a,$=(G=void 0,4!==(G=k(e.da,z)).a.$||G.b.$?z:(G.a,G.b,js));return n(x(e,{da:$}));case 34:switch(t.a){case 0:t=Ls;continue t;case 1:return k(e,co);default:return k(e,Ro)}case 32:var N=t.a;return k(x(e,{dt:N}),Ao(N));case 35:var H=t.a,q=x(e.cY,{c5:H});return k(x(e,{cY:q}),$o(q));case 36:return H=t.a,q=x(e.cY,{c6:H}),k(x(e,{cY:q}),$o(q));case 37:var W=t.a;return q=x(e.cY,{cX:W}),k(x(e,{cY:q}),$o(q));case 38:return k(e,Hs);case 39:return k(e,f(oo,e.dq,rs(4)));case 40:var V=t.a;return k(x(e,{aW:V}),no);default:return n(e)}}var G,K,X,Y,J})),Jo=a((function(t,e,r){return{$:0,a:t,b:e,c:r}})),Qo=a((function(t,e,r){return{$:0,a:t,b:e,c:r}})),Zo=function(t){return{$:0,a:t}},tu=i((function(t,e){return{$:0,a:t,b:e}})),eu=i((function(t,e){var r=f(tu,t,S),n=d(Jo,r,S,Rr);return P([Zo(d(Qo,n,S,e))])})),ru=eu("body"),nu=function(t){return{$:0,a:t}},iu=i((function(t,e){return nu(t+":"+e)})),au=i((function(t,e){return f(iu,t,e.E)})),su=au("font-size"),ou=i((function(t,e){return f(be,function(t){return ve.test(t)?"data-"+t:t}(t),function(t){return we.test(t)?"":t}(e))})),uu=function(t){return!t.b},cu=i((function(t,e){var r=e.a,n=e.b;switch(t.$){case 0:var i=t.a.c;return uu(i)?k(r,n):k(r,f(vr,t,n));case 1:var a=t.b;return f(Vs,(function(t){var e=t.c;return uu(e)}),a)?k(r,n):k(r,f(vr,t,n));case 2:var s=t.b;return uu(s)?k(r,n):k(r,f(vr,t,n));case 3:return k(r,f(vr,t,n));case 4:case 5:case 7:case 8:return i=t.a,uu(i)?k(r,n):k(r,f(vr,t,n));case 6:var o=t.a;return Mn(o.c1)?k(r,n):k(d(ca,o.aB,o.c1,r),n);default:var u=t.a;return f(Vs,(function(t){var e=t.b;return uu(e)}),u)?k(r,n):k(r,f(vr,t,n))}})),lu=function(t){return{$:6,a:t}},hu=i((function(t,e){return e.b?d(Yn,vr,e,t):t})),fu=i((function(t,e){return f(hu,f(Jn,(function(t){var e=t.a,r=t.b;return lu({c1:r,aB:e})}),Ar(t)),e)})),du=function(t){var e=d(Yn,cu,k(ea,S),t),r=e.a,n=e.b;return f(fu,r,n)},_u=s((function(t,e,r,n){t:for(;;){if(r.b){if(r.b.b){u=r.a;var i=t,a=e,s=r.b,o=n+(t(u)+(e+""));t=i,e=a,r=s,n=o;continue t}var u;return n+(t(u=r.a)+"")}return n}})),pu=a((function(t,e,r){return _(_u,t,e,r,"")})),gu=function(t){return"("+t.bT+f(es,"",f(Ya,Or(": "),t.E))+")"},mu=function(t){var e=a((function(t,e,r){return t+" "+f(jr," and ",f(vr,function(t){switch(t){case 0:return"print";case 1:return"screen";default:return"speech"}}(e),f(Jn,gu,r)))}));switch(t.$){case 0:var r=t.a;return d(pu,gu," and ",r);case 1:return d(e,"only",t.a,r=t.b);case 2:return d(e,"not",t.a,r=t.b);default:return t.a}},bu=i((function(t,e){return'@import "'+t+mu(e)+'"'})),yu=function(t){var e=t.a,r=t.b;return d(pu,bu(e),"\n",r)},vu=function(t){return"@namespace "+t.a+'"'+t.b+'"'},wu=W,Au=function(t){return"::"+t},ku=function(t){switch(t.$){case 0:return"."+t.a;case 1:return"#"+t.a;case 2:return":"+t.a;default:return"["+t.a+"]"}},xu=function(t){switch(t.$){case 0:var e=t.a,r=t.b;return C(e,d(pu,ku,"",r));case 1:return r=t.a,uu(r)?"*":d(pu,ku,"",r);default:return e=t.a,r=t.b,C(e,d(pu,ku,"",r))}},Eu=function(t){var e=t.a,r=t.b;return function(t){switch(t){case 0:return"+";case 1:return"~";case 2:return">";default:return""}}(e)+" "+xu(r)},Cu=function(t){var e=t.a,r=t.b,n=t.c,i=f(vr,xu(e),f(Jn,Eu,r)),a=f(es,"",f(Ya,Au,n));return f(wu,f(jr," ",i),a)},Su=function(t){var e=t.a,r=t.b,n=t.c;return d(pu,Cu,",",f(vr,e,r))+"{"+function(t){return d(pu,(function(t){return t+";"}),"",t)}(n)+"}"},Tu=function(t){switch(t.$){case 0:var e=t.a;return Su(e);case 1:var r=t.a,n=t.b;return"@media "+d(pu,mu,", ",r)+"{"+d(pu,Su,"\n",n)+"}";case 2:case 3:case 4:case 5:case 7:case 8:default:return"TODO";case 6:return"@keyframes "+t.a.aB+"{"+t.a.c1+"}"}},Iu=function(t){return d(Yn,hu,S,t)},Pu=i((function(t,e){return Iu(f(Jn,t,e))})),Ru=function(t){return{$:8,a:t}},Bu=function(t){return{$:5,a:t}},Ou=function(t){return{$:4,a:t}},Du=a((function(t,e,r){return{$:0,a:t,b:e,c:r}})),Fu=function(t){return{$:0,a:t}},ju=i((function(t,e){return{$:2,a:t,b:e}})),Mu=function(t){return{$:7,a:t}},Lu=i((function(t,e){return{$:1,a:t,b:e}})),Uu=i((function(t,e){if(e.b){if(e.b.b){var r=e.a,n=e.b;return f(vr,r,f(Uu,t,n))}return P([t(e.a)])}return e})),zu=i((function(t,e){var r=e.a,n=e.b,i=e.c;return d(Du,r,n,C(i,P([t])))})),$u=i((function(t,e){if(!e.b)return e;if(e.b.b){var r=e.a,n=e.b;return f(vr,r,f($u,t,n))}switch(e.a.$){case 0:var i=e.a.a;return P([Fu(f(zu,t,i))]);case 1:var a=e.a,s=a.a,o=a.b;return P([f(Lu,s,f(Uu,zu(t),o))]);default:return e}})),Nu=i((function(t,e){if(e.b.b){var r=e.a,n=e.b,i=(o=e.c,f(Jn,t,n)),a=t(r);return P([d(Du,r,n,o),d(Du,a,i,S)])}var s=e.a,o=e.c;return P([d(Du,s,S,o),d(Du,t(s),S,S)])})),Hu=i((function(t,e){var r=e.a,n=e.b;return d(Jo,r,n,Pr(t))})),qu=i((function(t,e){return f(Nu,Hu(t),e)})),Wu=i((function(t,e){return{$:2,a:t,b:e}})),Vu=function(t){return{$:1,a:t}},Gu=i((function(t,e){switch(e.$){case 0:var r=e.a,n=e.b;return f(tu,r,C(n,P([t])));case 1:return n=e.a,Vu(C(n,P([t])));default:var i=e.a;return n=e.b,f(Wu,i,C(n,P([t])))}})),Ku=i((function(t,e){if(e.b){if(e.b.b){var r=e.a,n=e.b;return f(vr,r,f(Ku,t,n))}var i=e.a,a=i.a,s=i.b;return P([k(a,f(Gu,t,s))])}return S})),Xu=i((function(t,e){if(e.b.b){var r=e.a,n=e.b;return a=e.c,d(Jo,r,f(Ku,t,n),a)}var i=e.a,a=e.c;return d(Jo,f(Gu,t,i),S,a)})),Yu=i((function(t,e){return f(Nu,Xu(t),e)})),Ju=function(t){t:for(;;){if(t.b){if(t.a.$){t=i=t.b;continue t}var e=t.a.a,r=e.a,n=e.b,i=t.b;return C(f(vr,r,n),Ju(i))}return S}},Qu=o((function(t,e,r,n,i){return{$:3,a:t,b:e,c:r,d:n,e:i}})),Zu=i((function(t,e){t:for(;;){if(!e.b)return e;if(e.b.b)break t;switch(e.a.$){case 0:var r=e.a.a;return f(Jn,Fu,t(r));case 1:if(e.a.b.b){if(e.a.b.b.b){var n=e.a,i=(d=n.a,n.b),a=i.a,s=i.b,o=f(Zu,t,P([f(Lu,d,s)]));if(o.b&&1===o.a.$&&!o.b.b){var u=o.a,c=u.a,l=u.b;return P([f(Lu,c,f(vr,a,l))])}return o}var h=e.a,d=h.a;return r=h.b.a,P([f(Lu,d,t(r))])}break t;case 2:var p=e.a,g=p.a,m=p.b;return P([f(ju,g,f(Zu,t,m))]);case 3:var b=e.a,y=b.a,v=b.b,w=b.c,A=b.d;return r=b.e,f(Jn,_(Qu,y,v,w,A),t(r));default:return e}}return a=e.a,s=e.b,f(vr,a,f(Zu,t,s))})),tc=q,ec=s((function(t,e,r,n){return{ac:n,T:r,v:e,am:t}})),rc=3432918353,nc=461845907,ic=i((function(t,e){return(65535&e)*t+(((e>>>16)*t&65535)<<16)})),ac=i((function(t,e){return e<<t|e>>>32-t})),sc=G,oc=i((function(t,e){return f(ic,5,f(ac,13,t^f(ic,nc,f(ac,15,f(ic,rc,e)))))+3864292196})),uc=i((function(t,e){var r=e.T|(255&Wr(t))<<e.am;return 24===e.am?{ac:e.ac+1,T:0,v:f(oc,e.v,r),am:0}:{ac:e.ac+1,T:r,v:e.v,am:e.am+8}})),cc=i((function(t,e){return n=((r=d(sc,uc,_(ec,0,t,0,0),e)).T?r.v^f(ic,nc,f(ac,15,f(ic,rc,r.T))):r.v)^r.ac,i=f(ic,2246822507,n^n>>>16),((a=f(ic,3266489909,i^i>>>13))^a>>>16)>>>0;var r,n,i,a})),lc=L,hc=function(t){t:for(;;)switch(t){case 0:return"0";case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"8";case 9:return"9";case 10:return"a";case 11:return"b";case 12:return"c";case 13:return"d";case 14:return"e";case 15:return"f";default:continue t}},fc=i((function(t,e){for(;;){if(e<16)return f(vr,hc(e),t);t=f(vr,hc(f(lc,16,e)),t),e=e/16|0}})),dc=function(t){return f(tc,"_",(e=f(cc,15739,t),R(e<0?f(vr,"-",f(fc,S,-e)):f(fc,S,e)).join("")));var e},_c=function(t){t:for(;;){if(t.b){if(t.b.b){t=t.b;continue t}var e=t.a;return Pr(P([e]))}return Rr}},pc=function(t){var e,r=function(t){if(t.b){var e=t.a,n=t.b;return f(vr,e,r(n))}return S};return P([(e=r(t),{$:9,a:e})])},gc=function(t){return P([t])},mc=i((function(t,e){if(e.$)return e;var r=e.a;return f(Lu,t,P([r]))})),bc=function(t){if(t.b){t.a;var e=t.b;return Pr(e)}return Rr},yc=a((function(t,e,r){for(;;){if(t<=0)return r;if(!e.b)return r;var n=e.a;t-=1,e=e.b,r=f(vr,n,r)}})),vc=i((function(t,e){return Jr(d(yc,t,e,S))})),wc=a((function(t,e,r){if(e<=0)return S;var n=k(e,r);t:for(;;){e:for(;;){if(!n.b.b)return r;if(!n.b.b.b){if(1===n.a)break t;break e}switch(n.a){case 1:break t;case 2:var i=n.b;return P([s=i.a,l=i.b.a]);case 3:if(n.b.b.b.b){var a=n.b,s=a.a,o=a.b;return P([s,l=o.a,_=o.b.a])}break e;default:if(n.b.b.b.b&&n.b.b.b.b.b){var u=n.b,c=(s=u.a,u.b),l=c.a,h=c.b,_=h.a,p=h.b,g=p.a,m=p.b;return f(vr,s,f(vr,l,f(vr,_,f(vr,g,t>1e3?f(vc,e-4,m):d(wc,t+1,e-4,m)))))}break e}}return r}return P([s=n.b.a])})),Ac=i((function(t,e){return d(wc,0,t,e)})),kc=o((function(t,e,r,n,i){if(i.$)return i;var a=i.a;return p(Qu,t,e,r,n,a)})),xc=i((function(t,e){switch(e.$){case 0:var r=e.a;return f(Lu,t,P([r]));case 1:var n=e.a,i=e.b;return f(Lu,C(t,n),i);case 2:var a=e.a,s=e.b;return f(ju,a,f(Jn,xc(t),s));case 3:var o=e.a,u=e.b,c=e.c,l=e.d;return r=e.e,p(Qu,o,u,c,l,r);default:return e}})),Ec=function(t){return t},Cc=s((function(t,e,r,n){var i=function(t){return f(es,S,bc(t))},a=f(Sc,e,f(es,S,_c(n))),s=function(){var t=k(Xa(a),function(t){t:for(;;){if(t.b){if(t.b.b){t=t.b;continue t}var e=t.a;return Pr(e)}return Rr}}(n));if(t.a.$||t.b.$)return n;var e=t.a.a,r=t.b.a;return C(f(Ac,zr(n)-1,n),P([b(r,e)?r:e]))}();return C(s,C(i(f(es,S,f(Ya,(function(e){return Iu(f(Uu,Sc(t),f(Jn,gc,f(Zu,r,e))))}),_c(n)))),i(a)))})),Sc=i((function(t,e){if(!t.b)return e;switch(t.a.$){case 0:var r=t.a.a,n=t.b;return f(Sc,n,f($u,r,e));case 1:var a=t.a,s=a.a,o=a.b;return n=t.b,_(Cc,o,n,Yu(s),e);case 2:var u=t.a,c=u.a,l=u.b,h=(n=t.b,i((function(t,e){var r=t.a,n=t.b,i=t.c,a=e.a,s=e.b,o=e.c;return d(Jo,r,C(n,f(vr,k(c,a),s)),function(t){t:for(;;){if(t.b){var e=t.a,r=t.b;if(1===e.$){t=r;continue t}return e}return Rr}}(P([o,i])))})));return Iu(C(P([f(Sc,n,e)]),f(Jn,(function(t){switch(t.$){case 0:var r=t.a,n=r.a,i=r.b,a=r.c,s=f(Pu,(function(t){return f(Jn,h(t),f(vr,n,i))}),Ju(e)),o=function(){if(s.b){var t=s.a,e=s.b;return P([Fu(d(Du,t,e,S))])}return S}();return f(Sc,a,o);case 1:var u=t.a,c=t.b;return f(Pc,u,c);case 2:var l=t.a,p=t.b;return f(Rc,l,p);case 3:var g=t.a,m=t.b,b=t.c,y=t.d,v=t.e;return f(Jn,_(kc,g,m,b,y),Tc(v));case 4:var w=t.a;return P([Ou(w)]);case 5:return w=t.a,P([Bu(w)]);case 6:return w=t.a,P([Mu(w)]);case 7:return w=t.a,P([Ru(w)]);default:var A=t.a;return pc(A)}}),f(Pu,Ec,l))));case 3:var p=t.a,g=p.a;return o=p.b,n=t.b,_(Cc,o,n,qu(g),e);case 5:var m=t.a.a,b=(n=t.b,dc(m)),y=f(Sc,n,f($u,"animation-name:"+b,e));return f(hu,y,P([lu({c1:m,aB:b})]));case 4:var v=t.a,w=v.a,A=(o=v.b,n=t.b,function(){var t=Ju(e);if(t.b){var r=t.a,n=t.b;return f(Jn,mc(w),f(Sc,o,gc(Fu(d(Du,r,n,S)))))}return S}());return C(f(Sc,n,e),A);default:var x=t.a.a;return n=t.b,f(Sc,C(x,n),e)}})),Tc=function(t){var e=t.a,r=t.b,n=t.c;return f(Sc,n,P([Fu(d(Du,e,r,S))]))},Ic=function(t){if(t.b){var e=t.a,r=t.b;return C(Bc(e),Ic(r))}return S},Pc=i((function(t,e){return f(Pu,(function(e){return f(Jn,xc(t),Tc(e))}),e)})),Rc=i((function(t,e){var r=Ic(f(Pu,Ec,e));return P([f(ju,t,r)])})),Bc=function(t){switch(t.$){case 0:var e=t.a;return Tc(e);case 1:var r=t.a,n=t.b;return f(Pc,r,n);case 2:var i=t.a,a=t.b;return f(Rc,i,a);case 3:var s=t.a,o=t.b,u=t.c,c=t.d;return e=t.e,f(Jn,_(kc,s,o,u,c),Tc(e));case 4:var l=t.a;return P([Ou(l)]);case 5:return l=t.a,P([Bu(l)]);case 6:return l=t.a,P([Mu(l)]);case 7:return l=t.a,P([Ru(l)]);default:var h=t.a;return pc(h)}},Oc=function(t){return function(t){var e=t.bM,r=t.bZ,n=t.b5,i=t.c2;return function(t){return f(es,"",f(Ya,(function(t){return'@charset "'+t+'"'}),t))}(e)+(d(pu,yu,"\n",r)+(d(pu,vu,"\n",n)+(d(pu,Tu,"\n",i)+"")))}(function(t){var e=t.bZ,r=t.b5;return{bM:t.bM,c2:du(t.c2),bZ:e,b5:r}}((r=(e=t).bM,n=e.bZ,i=e.b5,a=e.cr,{bM:r,c2:Ic(f(Pu,Ec,a)),bZ:n,b5:i})));var e,r,n,i,a},Dc=function(t){return le(Ae(t))},Fc=function(t){return{bM:Rr,bZ:S,b5:S,cr:t}},jc=ue,Mc=function(t){return{$:4,a:t}},Lc=Mc,Uc=function(t){return Lc(d(Dc,"span",P([f(ou,"style","display: none;"),f(ou,"class","elm-css-style-wrapper")]),gc(d(Dc,"style",S,gc(jc(Oc(Fc(t))))))))},zc=au("line-height"),$c=function(t){return f(iu,"background-color",t.E)},Nc=a((function(t,e,r){return{$:0,a:t,b:e,c:r}})),Hc=i((function(t,e){var r=d(Jo,e,S,Rr);return P([Zo(d(Qo,r,S,t))])})),qc=Vu(P([("",{$:0,a:""})])),Wc=function(t){var e=function(t){return t.b?Oc(Fc(P([f(Hc,t,qc)]))):""}(t),r=f(ou,"","");return d(Nc,r,!0,e)},Vc=au("display"),Gc=a((function(t,e,r){return{$:0,a:t,b:e,c:r}})),Kc=Gc,Xc=Kc,Yc=Xc("div"),Jc={av:0,aE:0,a9:0,E:"fixed"},Qc=au("height"),Zc=function(t){return{J:0,aX:0,V:0,C:0,dJ:0,a_:0,L:t,ar:"",aL:0,E:Fr(t)}},tl=au("left"),el={aa:0,bG:0,r:0,a:0,g:0,dl:0,b_:0,bj:0,ak:0,U:0,C:0,c:0,b:0,bo:0,a0:0,dP:0,A:0,a3:0,dY:0,ao:0,Z:0,w:0,e:0,ef:0,E:"none"},rl=au("position"),nl=nt,il=a((function(t,e,r){return{bz:0,bJ:0,af:0,o:0,az:0,ai:0,K:0,aj:0,ak:0,U:0,V:0,C:0,L:r,ap:0,ar:e,aL:t,E:C(nl(r),e)}})),al=f(il,0,"px"),sl=i((function(t,e){return t+"("+f(jr,",",e)+")"})),ol=s((function(t,e,r,n){return{au:n,aw:r,cX:0,ay:e,aF:t,E:f(sl,"rgba",C(f(Jn,Fr,P([t,e,r])),P([nl(n)])))}})),ul=au("top"),cl=f(il,0,"vh"),ll=f(il,0,"vw"),hl=au("width"),fl=au("z-index"),dl=function(t){var e=t?S:P([Vc(el)]);return f(Yc,P([Wc(C(e,P([rl(Jc),ul(al(0)),tl(al(0)),hl(ll(100)),Qc(cl(100)),fl(Zc(100)),$c(_(ol,0,0,0,.5))])))]),S)},_l=au("center"),pl={$:26},gl={$:25},ml=f(iu,"display","flex"),bl=f(il,0,"em"),yl=au("flex-end"),vl=function(t){return{$:6,a:t}},wl=i((function(t,e){return nu(t+":"+e)})),Al=a((function(t,e,r){t:for(;;)switch(r.$){case 0:var n=r.a,i=f(es,"",Xa(f(Mr,":",n)));return f(wl,e,i);case 1:return r.a,f(wl,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-selector");case 2:return r.a,f(wl,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-combinator");case 3:return r.a,f(wl,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-pseudo-element setter");case 4:return f(wl,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-media-query");case 5:return f(wl,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-keyframes");default:if(r.a.b){if(r.a.b.b){var a=r.a,s=(a.a,a.b);r=vl(s);continue t}r=r.a.a;continue t}return f(wl,e,"elm-css-error-cannot-apply-"+t+"-with-empty-Style")}})),kl=d(il,0,"",0),xl=function(t){return d(Al,"justifyContent","justify-content",t(kl))},El=au("padding-top"),Cl=i((function(t,e){return f(me,function(t){return"innerHTML"==t||"formAction"==t?"data-"+t:t}(t),function(t){return"string"==typeof t&&we.test(t)?"":t}(e))})),Sl=i((function(t,e){return d(Nc,f(Cl,t,e),!1,"")})),Tl=i((function(t,e){return f(Sl,t,is(e))})),Il=Tl("className"),Pl=Il("panel"),Rl=Xc("button"),Bl=ge,Ol=i((function(t,e){return d(Nc,f(Bl,t,e),!1,"")})),Dl=i((function(t,e){return f(Ol,t,function(t){return{$:3,a:t}}(e))})),Fl=et,jl=i((function(t,e){return{$:1,a:t,b:e}})),Ml=i((function(t,e){if(e.b){if(e.b.b){var r=e.a,n=e.b;return f(vr,r,f(Ml,t,n))}var i=e.a;return P([f(Ll,t,i)])}return e})),Ll=i((function(t,e){switch(e.$){case 0:var r=e.a;return nu(t(r));case 1:var n=e.a,i=e.b;return f(jl,n,f(Ml,t,i));case 2:case 3:case 4:case 5:return e;default:var a=e.a;return vl(f(Jn,Ll(t),a))}})),Ul=Ll((function(t){var e=t;return f(Fl," !important",function(t){return t.toLowerCase()}(e))?e:e+" !important"})),zl={g:0,E:"inline-block"},$l=function(t){return jl(function(t){return{$:2,a:t}}(t))},Nl=Xc("span"),Hl=function(t){return Mc(jc(t))},ql=a((function(t,e,r){return f(Nl,P([Wc(P([Vc(zl),f($l,"not(:last-child)",P([f(iu,"margin-right","var(--cw)")]))])),f(Dl,"click",Sn({dv:e,dQ:!0,d4:!0}))]),P([f(Rl,f(vr,Wc(P([Ul(f(iu,"margin-right","var(--cw)"))])),t),P([Hl(r)]))]))})),Wl=i((function(t,e){return f(Ol,t,function(t){return{$:0,a:t}}(e))})),Vl=function(t){return f(Wl,"click",Sn(t))},Gl=s((function(t,e,r,n){return t?f(Rl,f(vr,Vl(r),e),P([Hl(n)])):d(ql,e,r,n)})),Kl=au("space-between"),Xl=i((function(t,e){var r=(t.b.$,t.b.a);return f(Yc,P([Pl,Wc(P([hl(ll(100)),f(iu,"max-width","calc(80*var(--cw))")]))]),P([f(Yc,S,P([Hl(r)])),function(r){if(1===t.b.$){var n=t.b.b;return f(Yc,P([Wc(C(P([ml,xl(yl)]),r))]),P([_(Gl,e,P([Wc(P([f(iu,"width","calc(8*var(--cw))")]))]),pl,n)]))}var i=t.b.b,a=i.a,s=i.b,o="calc("+Fr(4+f(gn,On(a),On(s)))+"*var(--cw))";return f(Yc,P([Wc(C(P([ml,xl(Kl)]),r))]),P([_(Gl,e,P([Wc(P([f(iu,"width",o)]))]),gl,s),_(Gl,e,P([Wc(P([f(iu,"width",o)]))]),pl,a)]))}(P([El(bl(2))]))]))})),Yl={r:0,al:0,E:"hidden",aN:0},Jl=f(il,0,"%"),Ql=f(Is,au("transform"),(function(t){return uu(t)?{E:"none"}:{E:d(pu,(function(t){return t.E})," ",t)}})),Zl=function(t){return Ql(P([t]))},th=i((function(t,e){return{aO:t,aU:Rr,bP:e,ba:Rr}})),eh=th(89),rh=function(t){return nl(t)+"ms"},nh=function(t){switch(t.$){case 0:return"ease";case 1:return"linear";case 2:return"ease-in";case 3:return"ease-out";case 4:return"ease-in-out";case 5:return"step-start";case 6:return"step-end";default:var e=t.a,r=t.b,n=t.c,i=t.d;return"cubic-bezier("+nl(e)+" , "+nl(r)+" , "+nl(n)+" , "+nl(i)+")"}},ih=function(t){var e=d(Dn,0,-1,d(Ur,i((function(t,e){var r=t.aO,n=t.bP,i=t.aU,a=t.ba;return e+(function(t){switch(t){case 0:return"background";case 1:return"background-color";case 2:return"background-position";case 3:return"background-size";case 4:return"border";case 5:return"border-bottom";case 6:return"border-bottom-color";case 7:return"border-bottom-left-radius";case 8:return"border-bottom-right-radius";case 9:return"border-bottom-width";case 10:return"border-color";case 11:return"border-left";case 12:return"border-left-color";case 13:return"border-left-width";case 14:return"border-radius";case 15:return"border-right";case 16:return"border-right-color";case 17:return"border-right-width";case 18:return"border-top";case 19:return"border-top-color";case 20:return"border-top-left-radius";case 21:return"border-top-right-radius";case 22:return"border-top-width";case 23:return"border-width";case 24:return"bottom";case 25:return"box-shadow";case 26:return"caret-color";case 27:return"clip";case 28:return"clip-path";case 29:return"color";case 30:return"column-count";case 31:return"column-gap";case 32:return"column-rule";case 33:return"column-rule-color";case 34:return"column-rule-width";case 35:return"column-width";case 36:return"columns";case 37:return"filter";case 38:return"flex";case 39:return"flex-basis";case 40:return"flex-grow";case 41:return"flex-shrink";case 42:return"font";case 43:return"font-size";case 44:return"font-size-adjust";case 45:return"font-stretch";case 46:return"font-variation-settings";case 47:return"font-weight";case 48:return"grid-column-gap";case 49:return"grid-gap";case 50:return"grid-row-gap";case 51:return"height";case 52:return"left";case 53:return"letter-spacing";case 54:return"line-height";case 55:return"margin";case 56:return"margin-bottom";case 57:return"margin-left";case 58:return"margin-right";case 59:return"margin-top";case 60:return"mask";case 61:return"mask-position";case 62:return"mask-size";case 63:return"max-height";case 64:return"max-width";case 65:return"min-height";case 66:return"min-width";case 67:return"object-position";case 68:return"offset";case 69:return"offset-anchor";case 70:return"offset-distance";case 71:return"offset-path";case 72:return"offset-rotate";case 73:return"opacity";case 74:return"order";case 75:return"outline";case 76:return"outline-color";case 77:return"outline-offset";case 78:return"outline-width";case 79:return"padding";case 80:return"padding-bottom";case 81:return"padding-left";case 82:return"padding-right";case 83:return"padding-top";case 84:return"right";case 85:return"tab-size";case 86:return"text-indent";case 87:return"text-shadow";case 88:return"top";case 89:return"transform";case 90:return"transform-origin";case 91:return"vertical-align";case 92:return"visibility";case 93:return"width";case 94:return"word-spacing";default:return"z-index"}}(r)+" ")+rh(n)+" "+f(es,"",f(Ya,rh,i))+" "+f(es,"",f(Ya,nh,a))+","})),"",t));return f(iu,"transition",e)},ah=function(t){var e=t.E;return{e:0,E:f(sl,"translateY",P([e]))}},sh=au("visibility"),oh=th(92),uh={al:0,A:0,E:"visible",aN:0},ch=i((function(t,e){var r=!t.a.$;return P([dl(r),f(Yc,P([Wc(C(P([rl(Jc),ul(al(0)),tl(al(0)),hl(ll(100)),fl(Zc(150)),ml,xl(_l),ih(P([eh(300),oh(300)]))]),P(r?[Zl(ah(Jl(0))),sh(uh)]:[Zl(ah(Jl(-100))),sh(Yl)])))]),P([f(Xl,t,e)]))])})),lh=function(t){return"var(--"+function(){switch(t){case 0:return"black";case 1:return"blue";case 2:return"light-blue";case 3:return"green";case 4:return"light-green";case 5:return"cyan";case 6:return"light-cyan";case 9:return"magenta";case 10:return"light-magenta";case 7:return"red";case 8:return"light-red";case 11:return"dark-gray";case 12:return"light-gray";case 13:return"brown";case 14:return"yellow";default:return"white"}}()+")"},hh=function(t){return f(iu,"background-color",lh(t))},fh=function(t){return f(iu,"color",lh(t))},dh=function(t){return{$:2,a:t}},_h=o((function(t,e,r,n,i){return{c0:r,b$:e,b8:t,a2:n,a7:i}})),ph=function(t){return f(jr,"",t)},gh=V,mh=function(t){return t<0?-t:t},bh=a((function(t,e,r){return t<=0?r:d(bh,t>>1,C(e,e),1&t?C(r,e):r)})),yh=i((function(t,e){return d(bh,t,e,"")})),vh=i((function(t,e){var r=On(e),n=w(r,t)<0?mh(t-r):0;return C(e,f(yh,n,"0"))})),wh=i((function(t,e){return t<1?e:d(Dn,0,-t,e)})),Ah=i((function(t,e){return t<1?"":d(Dn,-t,On(e),e)})),kh=function(t){return"0"!==f(Ah,1,t)?t:kh(f(wh,1,t))},xh=i((function(t,e){var r=t.c0;switch(r.$){case 1:return kh(e);case 2:return e;default:var n=r.a;return f(vh,n,e)}})),Eh=K,Ch=i((function(t,e){var r=f(qs,(function(t){return"0"!==t&&"."!==t}),d(Eh,vr,S,e));return C(t&&r?"-":"",e)})),Sh=function(t){var e=t.a,r=t.b;if("9"===e){var n=Qr(r);if(1===n.$)return"01";var i=n.a;return f(tc,"0",Sh(i))}var a,s=Wr(e);return s>=48&&s<57?f(tc,(a=s+1)<0||1114111<a?"�":a<=65535?String.fromCharCode(a):(a-=65536,String.fromCharCode(Math.floor(a/1024)+55296,a%1024+56320)),r):"0"},Th=H,Ih=function(t){return f(tc,t,"")},Ph=a((function(t,e,r){return C(r,f(yh,t-On(r),Ih(e)))})),Rh=function(t){for(var e=t.length,r=new Array(e),n=0;n<e;){var i=t.charCodeAt(n);55296<=i&&i<=56319?(r[e-n]=t[n+1],r[e-++n]=t[n-1],n++):(r[e-n]=t[n],n++)}return r.join("")},Bh=function(t){var e=f(Mr,".",t);return e.b?e.b.b?k(e.a,e.b.a):k(e.a,"0"):k("0","0")},Oh=i((function(t,e){var r=e.a,n=e.b;return k(t(r),n)})),Dh=a((function(t,e,r){if((n=r)===1/0||n===-1/0||Th(r))return nl(r);var n,i=r<0,a=Bh(function(t){var e=f(Mr,"e",nl(mh(t)));if(e.b){if(e.b.b){var r=e.a,n=e.b.a,i=f(es,0,Un(f(qn,"+",n)?f(Fn,1,n):n)),a=Bh(r),s=C(a.a,a.b),o=i<0?f(es,"0",f(Ya,(function(t){return t.a+"."+t.b}),f(Ya,Oh(Ih),Qr(C(f(yh,mh(i),"0"),s))))):d(Ph,i+1,"0",s);return C(t<0?"-":"",o)}return C(t<0?"-":"",r=e.a)}return""}(mh(r))),s=a.a,o=a.b,u=On(s)+e,c=C(f(yh,1-u,"0"),d(Ph,u,"0",C(s,o))),l=On(c),h=f(gn,1,u),_=f(t,i,d(Dn,h,l,c)),p=d(Dn,0,h,c),g=_?Rh(f(es,"1",f(Ya,Sh,Qr(Rh(p))))):p,m=On(g),b="0"===g?g:e<=0?C(g,f(yh,mh(e),"0")):w(e,On(o))<0?d(Dn,0,m-e,g)+"."+d(Dn,m-e,m,g):C(s+".",d(Ph,e,"0",o));return f(Ch,i,b)})),Fh=Dh(i((function(t,e){var r=Qr(e);if(1===r.$)return!1;if("5"===r.a.a)return""===r.a.b?(r.a,!t):(r.a,!0);var n,i=r.a.a;return(n=Wr(i))>53&&t||n>=53&&!t}))),jh=i((function(t,e){var r=function(){var e=t.c0;switch(e.$){case 1:var r=e.a;return Fh(r);case 0:return nl;default:var n=e.a;return Fh(n)}}(),n=f(Mr,".",r(e)),i=function(){var t=bc(n);if(t.$)return"";var e=t.a;return f(es,"",Xa(e))}();return k(f(es,"",Xa(n)),i)})),Mh=i((function(t,e){return t?function(t){var e=On(t)>3?f(Ah,3,t):t,r=function(t){return On(t)>2?f(vr,f(Ah,2,t),r(f(wh,2,t))):On(t)?P([t]):S};return Jr(f(vr,e,r(f(wh,3,t))))}(f(gh,Xr,e)):function(t){var e=function(t){return On(t)>3?f(vr,f(Ah,3,t),e(f(wh,3,t))):P([t])};return Jr(e(t))}(f(gh,Xr,e))})),Lh=i((function(t,e){var r,n=f(jh,t,e),i=f(Mh,t.a8,f(gh,Xr,n.a)),a=f(xh,t,n.b),s=p(_h,e,i,a,"","");switch(f(Br,(function(t){return"0"===t}),ph(f(hu,(r=s).b$,gc(r.c0))))?1:r.b8<0?2:0){case 2:return x(s,{a2:t.bl,a7:t.bm});case 0:return x(s,{a2:t.cc,a7:t.cd});default:return x(s,{a2:t.cH,a7:t.cI})}})),Uh=i((function(t,e){return""===e?"":C(t.Q,e)})),zh=i((function(t,e){var r=Uh(t),n=f(jr,t.N,e.b$),i=r(e.c0);return ph(P([e.a2,n,i,e.a7]))})),$h=i((function(t,e){return f(zh,t,f(Lh,t,e))})),Nh={Q:".",c0:{$:0,a:0},bl:"−",bm:"",cc:"",cd:"",a8:0,N:"",cH:"",cI:""},Hh=x(Nh,{c0:dh(2),N:","}),qh=function(t){var e=function(){var e=t.da;switch(e.$){case 0:return"stopped";case 4:return"starting";case 1:return"paused";case 2:if(1===e.a.$)return e.a,"running";var r=e.a.a;return"running: "+f($h,x(Hh,{c0:dh(2)}),r/1e6)+" MHz";default:return"error"}}();return C(function(){switch(t.aW){case 0:return"";case 1:return"Gamepads: 1▕ ";default:return"Gamepads: 2▕ "}}(),e)},Wh={$:6},Vh={aE:0,E:"absolute"},Gh=Xc("br"),Kh=i((function(t,e){return{cM:0,B:0,E:C(nl(e),t)}})),Xh=Kh("deg"),Yh=au("overflow"),Jh=function(t){return"calc("+nl(t)+" * var(--cw))"},Qh=function(t){var e,r,n=t.d0?P([Zl((e=Xh(-90),r=e.E,{e:0,E:f(sl,"rotate",P([r]))}))]):S;return f(Yc,P([Wc(P([rl(Vh),ul(al(0)),tl(al(0)),hh(11),Qc(bl(2)),(4,f(iu,"width",Jh(4))),Yh(Yl)])),Vl(Wh)]),P([f(Yc,P([Wc(C(P([fh(15),ih(P([eh(300)]))]),n))]),P([Hl("░░░░"),f(Gh,S,S),Hl("░░░░")]))]))},Zh=au("right"),tf=function(t){return f(Ga,(function(e){return f(to,f(ba,(function(t){return t.T}),dn(e)),t.aS)}),t.dU)},ef=i((function(t,e){return f(Hc,e,f(Wu,t,S))})),rf={bg:0,ax:0,E:"row"},nf=x(rf,{E:"column"}),af=au("flex-direction"),sf=Xc("a"),of=x({bB:0,l:0,av:0,bD:0,aa:0,bE:0,ab:0,G:0,r:0,aQ:0,cX:0,a:0,g:0,af:0,bg:0,ax:0,aV:0,R:0,o:0,ag:0,d:0,J:0,aX:0,b0:0,bj:0,az:0,ai:0,K:0,aj:0,ak:0,U:0,V:0,C:0,aY:0,c:0,b:0,bo:0,dJ:0,L:0,a0:0,al:0,A:0,a9:0,ao:0,Y:0,ap:0,aq:0,Z:0,w:0,ar:"",aL:0,E:"initial",aN:0,P:0},{E:"inherit"}),uf=au("text-decoration"),cf=s((function(t,e,r,n){var i,a=b(e.c$,r)?fh(15):fh(0),s=b(e.c$,r)?hh(11):$c(of);return f(sf,P([(i=rs(r),f(Tl,"href",i)),Wc(C(P([f(iu,"padding","0 var(--cw)"),Ul(a),Ul(s),Ul(uf(el)),Vc(zl)]),t))]),P([Hl(n)]))})),lf=au("padding-bottom"),hf=function(t){return d(Al,"textAlign","text-align",t(kl))},ff=function(t){var e,r,n=t.d0?P([sh(uh)]):P([Zl((e=Jl(-100),r=e.E,{e:0,E:f(sl,"translateX",P([r]))})),sh(Yl)]),i=P([El(bl(1)),lf(bl(1)),hf(_l)]);return f(Yc,P([Pl,Wc(C(P([rl(Jc),tl(al(0)),ul(bl(2)),hl(ll(70)),hh(12),fh(0),ih(P([eh(300),oh(300)])),ml,af(nf)]),n))]),P([_(cf,i,t,0,"ROMs"),_(cf,i,t,1,"Settings"),_(cf,i,t,2,"Emulation"),_(cf,i,t,3,"Help"),_(cf,i,t,4,"About")]))},df={cw:0,E:"ellipsis"},_f=au("flex-shrink"),pf={ax:0,aV:0,E:"nowrap",P:0},gf=a((function(t,e,r){return f(iu,t,e.E+" "+r.E)})),mf=gf("padding"),bf=au("text-overflow"),yf=au("white-space"),vf=s((function(t,e,r,n){var i=function(t){return f(Yc,P([Wc(P([Vc(zl),yf(pf),f(mf,bl(0),bl(1)),_f(Zc(0))]))]),P([Hl(t)]))};return f(Yc,P([Wc(C(P([ml,xl(_l),Yh(Yl)]),n))]),P([i(t),f(Yc,P([Wc(P([Vc(zl),yf(pf),Yh(Yl),bf(df)]))]),P([Hl(r)])),i(e)]))})),wf=Xc("nav"),Af=i((function(t,e){return 1===e?function(t){var e,r=f(es,"6502.ts / Stellerator",f(Ya,(function(t){return"Stellerator: "+t.aB}),tf(t)));return P([f(Yc,P([Wc(P([hl(ll(100)),Qc(bl(2)),rl(Jc),ul(al(0)),tl(al(0)),fl(Zc(20)),fh(12),hh(0)]))]),P([_(vf,"----====≡≡≡≡","≡≡≡≡====----",r,S),f(wf,P([Wc(P([hh(12),fh(0)]))]),P([_(cf,S,t,0,"ROMs"),_(cf,S,t,1,"Settings"),_(cf,S,t,2,"Emulation"),_(cf,S,t,3,"Help"),_(cf,S,t,4,"About"),f(Nl,P([Wc(P([(e=Zh,d(Al,"float","float",e(kl))),f(iu,"margin-right","var(--cw)")]))]),P([Hl(qh(t))]))]))])),Uc(P([f(ef,"body",P([El(bl(2))]))]))])}(t):function(t){var e=f(es,"Stellerator",f(Ya,(function(t){return t.aB}),tf(t)));return P([f(Yc,P([Wc(P([hl(ll(100)),Qc(bl(2)),rl(Jc),ul(al(0)),tl(al(0)),fl(Zc(20)),fh(12),hh(0)]))]),P([_(vf,"--==≡≡","≡≡==--",e,P([f(iu,"padding-left","calc(4 * var(--cw))")])),f(Yc,P([Wc(P([hh(12),fh(0),hf(Zh)]))]),P([Hl(qh(t))])),Qh(t),ff(t)])),Uc(P([f(ef,"body",P([El(bl(2))]))]))])}(t)})),kf=Lc,xf=Tl("id"),Ef=au("margin-bottom"),Cf=lr({bO:Rr,di:Pr({cQ:!1,d7:!1}),dV:!0,d1:!1}),Sf=function(t){var e=f(es,f(Yc,S,P([Hl("loading license...")])),f(Ya,(function(t){return kf(f(Cf,S,t))}),t.ds)),r=f(es,f(Yc,S,P([Hl("loading changelog...")])),f(Ya,(function(t){return kf(f(Cf,S,t))}),t.cV));return f(Yc,P([Wc(P([f(iu,"padding","0 var(--cw)"),El(bl(1))]))]),P([f(Yc,P([xf("version"),Wc(P([hf(_l),fh(5),Ef(bl(1))]))]),P([Hl("Version "+t.aM)])),f(Yc,P([Wc(P([hf(_l),Ef(bl(1))]))]),P([Hl("** CHANGELOG **")])),r,f(Yc,P([Wc(P([hh(5),Qc(bl(.5)),Ef(bl(1.5))]))]),S),f(Yc,P([Wc(P([hf(_l),Ef(bl(1))]))]),P([Hl("** LICENSE **")])),e]))},Tf={$:19},If=$l("active"),Pf=au("bottom"),Rf=f(Rl,P([Wc(P([hf(_l),rl(Jc),Zh(bl(0)),Pf(bl(0)),f(mf,bl(1),bl(.75)),Ul(hh(2)),fh(12),fl(Zc(10)),If(P([Ul(hh(1))]))])),Vl(Tf)]),P([Hl("─┼─")])),Bf={bc:0,aQ:0,E:"border-box"},Of=au("box-sizing"),Df=function(t){return{$:18,a:t}},Ff=function(t){return{$:27,a:t}},jf=a((function(t,e,r){var n=f(Jn,zr,P([t.aS,Xs(t)]));t:for(;;){if(n.b&&n.b.b&&!n.b.b.b){if(n.a){if(n.b.a)break t;return n.b,e("no ROMS match the search")}return n.b,e('start by clicking "Add new" to add a ROM image')}break t}return r})),Mf=au("cursor"),Lf=i((function(t,e){return f(es,!1,f(Ya,dn(t.T),e))})),Uf=s((function(t,e,r,n){return f(Lf,t,e)?r:n})),zf=pe,$f=i((function(t,e){var r=t.b,n=t.c;return r&&f(aa,n,e).$?d(ca,n,dc(n),e):e})),Nf=i((function(t,e){var r=e.a,n=e.b,i=e.c;if(n){var a=f(aa,i,t);if(a.$)return f(Cl,"className",is("_unstyled"));var s=a.a;return f(Cl,"className",is(s))}return r})),Hf=i((function(t,e){var r=e.a,n=e.b,i=e.c;if(n){var a=f(aa,i,t);if(a.$)return f(ou,"class","_unstyled");var s=a.a;return f(ou,"class",s)}return r})),qf=function(t){return fe(Ae(t))},Wf=i((function(t,e){return f(he,t,Ae(e))})),Vf=i((function(t,e){return f(ce,t,Ae(e))})),Gf=i((function(t,e){var r=t.a,n=t.b,i=e.a,a=e.b;switch(n.$){case 4:var s=n.a;return k(f(vr,k(r,s),i),a);case 0:var o=n.a,u=n.b,c=n.c,l=d(Ur,$f,a,u),h=d(Ur,Kf,k(S,l),c),p=h.a,g=h.b;return s=d(Dc,o,f(Jn,Nf(g),u),Jr(p)),k(f(vr,k(r,s),i),g);case 1:var m=n.a,b=(o=n.b,u=n.c,c=n.d,l=d(Ur,$f,a,u),d(Ur,Kf,k(S,l),c));return p=b.a,g=b.b,s=_(Vf,m,o,f(Jn,Nf(g),u),Jr(p)),k(f(vr,k(r,s),i),g);case 2:o=n.a,u=n.b,c=n.c,l=d(Ur,$f,a,u);var y=d(Ur,Gf,k(S,l),c);return p=y.a,g=y.b,s=d(qf,o,f(Jn,Nf(g),u),Jr(p)),k(f(vr,k(r,s),i),g);default:m=n.a,o=n.b,u=n.c,c=n.d,l=d(Ur,$f,a,u);var v=d(Ur,Gf,k(S,l),c);return p=v.a,g=v.b,s=_(Wf,m,o,f(Jn,Nf(g),u),Jr(p)),k(f(vr,k(r,s),i),g)}})),Kf=i((function(t,e){var r=e.a,n=e.b;switch(t.$){case 4:var i=t.a;return k(f(vr,i,r),n);case 0:var a=t.a,s=t.b,o=t.c,u=d(Ur,$f,n,s),c=d(Ur,Kf,k(S,u),o),l=c.a,h=c.b;return i=d(Dc,a,f(Jn,Nf(h),s),Jr(l)),k(f(vr,i,r),h);case 1:var p=t.a,g=(a=t.b,s=t.c,o=t.d,u=d(Ur,$f,n,s),d(Ur,Kf,k(S,u),o));return l=g.a,h=g.b,i=_(Vf,p,a,f(Jn,Hf(h),s),Jr(l)),k(f(vr,i,r),h);case 2:a=t.a,s=t.b,o=t.c,u=d(Ur,$f,n,s);var m=d(Ur,Gf,k(S,u),o);return l=m.a,h=m.b,i=d(qf,a,f(Jn,Nf(h),s),Jr(l)),k(f(vr,i,r),h);default:p=t.a,a=t.b,s=t.c,o=t.d,u=d(Ur,$f,n,s);var b=d(Ur,Gf,k(S,u),o);return l=b.a,h=b.b,i=_(Wf,p,a,f(Jn,Hf(h),s),Jr(l)),k(f(vr,i,r),h)}})),Xf=a((function(t,e,r){for(;;){if(-2===r.$)return e;var n=r.b,i=r.c,a=r.d,s=r.e,o=t,u=d(t,n,i,d(Xf,t,e,a));t=o,e=u,r=s}})),Yf=a((function(t,e,r){return f(jr,e,f(Mr,t,r))})),Jf=a((function(t,e,r){return r+"\n"+d(Yf,"",e,t)})),Qf=i((function(t,e){return d(Dc,"span",P([f(ou,"style","display: none;"),f(ou,"class","elm-css-style-wrapper")]),P([d(Dc,"style",function(){if(t.$)return S;var e=t.a;return P([f(ou,"nonce",e)])}(),gc(jc((r=e,d(Xf,Jf,"",r)))))]));var r})),Zf=s((function(t,e,r,n){var i=d(Ur,$f,ea,r),a=d(Ur,Kf,k(S,i),n),s=a.a,o=a.b,u=f(Qf,t,o),c=f(Jn,Nf(o),r);return d(Dc,e,c,f(vr,u,Jr(s)))})),td=i((function(t,e){for(;;){if(!e.b)return!1;var r=e.a.a,n=e.b;if(b(t,r))return!0;e=n}})),ed=i((function(t,e){t:for(;;){if(e.b){var r=e.a.a,n=e.b,i="_"+r;if(f(td,i,n)){t=i,e=n;continue t}return i}return t}})),rd=a((function(t,e,r){return k(f(ed,"_",r),f(Qf,t,e))})),nd=s((function(t,e,r,n){var i=d(Ur,$f,ea,r),a=d(Ur,Gf,k(S,i),n),s=a.a,o=a.b,u=d(rd,t,o,s),c=f(Jn,Nf(o),r);return d(qf,e,c,f(vr,u,Jr(s)))})),id=o((function(t,e,r,n,i){var a=d(Ur,$f,ea,n),s=d(Ur,Gf,k(S,a),i),o=s.a,u=s.b,c=d(rd,t,u,o),l=f(Jn,Hf(u),n);return _(Wf,e,r,l,f(vr,c,Jr(o)))})),ad=o((function(t,e,r,n,i){var a=d(Ur,$f,ea,n),s=d(Ur,Kf,k(S,a),i),o=s.a,u=s.b,c=f(Qf,t,u),l=f(Jn,Hf(u),n);return _(Vf,e,r,l,f(vr,c,Jr(o)))})),sd=function(t){switch(t.$){case 4:return t.a;case 0:var e=t.a,r=t.b,n=t.c;return _(Zf,Rr,e,r,n);case 1:var i=t.a;return e=t.b,r=t.c,n=t.d,p(ad,Rr,i,e,r,n);case 2:return e=t.a,r=t.b,n=t.c,_(nd,Rr,e,r,n);default:return i=t.a,e=t.b,r=t.c,n=t.d,p(id,Rr,i,e,r,n)}},od=a((function(t,e,r){return sd(f(t,e,r))})),ud=a((function(t,e,r){return Mc(_(zf,od,t,e,r))})),cd=au("margin-top"),ld=au("min-height"),hd=a((function(t,e,r){return{$:2,a:t,b:e,c:r}})),fd=hd,dd=function(t){return $l("nth-child("+t+")")},_d={a:0,E:"pointer"},pd=Tl("type"),gd={$:38},md=function(t){return{$:7,a:t}},bd={$:8},yd=i((function(t,e){return f(Sl,t,vo(e))})),vd=yd("disabled"),wd=au("flex-grow"),Ad=Xc("label"),kd=function(t){return f(iu,"margin-right",Jh(t))},xd=i((function(t,e){return f(Ol,t,function(t){return{$:2,a:t}}(e))})),Ed=f(Ri,P(["target","value"]),Ai),Cd=function(t){return f(xd,"change",f(En,f(ba,t,(function(t){return k(t,!0)})),Ed))},Sd=function(t){return f(xd,"input",f(En,f(ba,t,(function(t){return k(t,!0)})),Ed))},Td=Tl("placeholder"),Id=Xc("input"),Pd=_e,Rd=i((function(t,e){return sd(t(e))})),Bd=i((function(t,e){return Mc(d(Pd,Rd,t,e))})),Od=Tl("value"),Dd=function(t){return Bd((function(e){return f(Id,f(vr,pd("text"),f(vr,Od(e),t)),S)}))},Fd=i((function(t,e){return f(Ad,P([Wc(C(P([ml]),t)),Pl]),P([f(Dd,P([pd("text"),Wc(P([wd(Zc(1)),kd(1)])),Td("Filter ROMs..."),Sd(md),Cd((function(t){return gd}))]),e.cR),d(ql,P([pd("button"),vd(""===e.cR),Wc(P([Ef(bl(.5))]))]),bd,"Clear")]))})),jd=function(t){return{$:15,a:t}},Md=function(t){return d(Al,"alignItems","align-items",t(kl))},Ld=i((function(t,e){return{$:2,a:t,b:e}})),Ud=Ld(2),zd=au("flex-start"),$d=Xc("form"),Nd=eu("label"),Hd=function(t){return k(t,!0)},qd=function(t){return f(xd,"submit",f(En,Hd,Sn(t)))},Wd=i((function(t,e){return d(Nc,f(ou,t,e),!1,"")})),Vd=Wd,Gd=function(t){return f(Vd,"data-label",t)},Kd=i((function(t,e){return{$:17,a:t,b:e}})),Xd=function(t){return{$:7,a:t}},Yd=function(t){return{$:6,a:t}},Jd=function(t){return{$:3,a:t}},Qd=function(t){return{$:5,a:t}},Zd=function(t){return{$:0,a:t}},t_=function(t){return{$:9,a:t}},e_=function(t){return{$:4,a:t}},r_=function(t){return{$:2,a:t}},n_=function(t){return{$:1,a:t}},i_=function(t){return{$:8,a:t}},a_=function(t){return{$:21,a:t}},s_={g:0,E:"block"},o_=yd("checked"),u_=f(Ri,P(["target","checked"]),yi),c_=function(t){return f(xd,"change",f(En,f(ba,t,(function(t){return k(t,!0)})),u_))},l_=i((function(t,e){return f(Id,P([pd("checkbox"),c_(t),o_(e)]),S)})),h_=Tl("htmlFor"),f_=au("max-width"),d_=Xc("option"),__=Xc("select"),p_=yd("selected"),g_=s((function(t,e,r,n){return f(Nl,P([Il("select-wrapper"),Wc(t)]),P([f(__,C(P([Od(n),(!1,f(Tl,"autocomplete","off"))]),e),f(Jn,(function(t){var e=t.a,r=t.b;return f(d_,P([Od(e),p_(b(e,n))]),P([Hl(r)]))}),r))]))})),m_=a((function(t,e,r){return _(g_,P([f_(Jl(100))]),P([Wc(P([f_(Jl(100))])),Cd(e)]),t,r)})),b_=s((function(t,e,r,n){return f(Nl,t,f(Jn,(function(t){return f(Ad,P([Wc(P([Mf(_d),yf(pf),f($l,"not(:first-of-type)",P([f(iu,"margin-left","calc(2 * var(--cw))")]))]))]),P([Hl(t.b),f(Id,P([pd("radio"),Wc(P([f(iu,"margin-left","var(--cw)")])),o_(b(n,t.a)),d(Is,f(Is,xd("change"),En((function(t){return k(t,!0)}))),vi((function(e){return e?Sn(r(t.a)):wi("")})),u_)]),S)]))}),e))})),y_={g:0,E:"inline-flex"},v_=Tl("max"),w_=Tl("min"),A_=function(t){return f(Wd,"tabIndex",Fr(t))},k_=o((function(t,e,r,n,i){var a=e.a,s=e.b,o=function(t){return w(t,a)>-1&&w(t,s)<1?Pr(t):Rr},u=f(Wl,"keydown",f(vi,(function(t){switch(t){case"ArrowLeft":return Sn(r(o(i-1)));case"ArrowRight":return Sn(r(o(i+1)));default:return wi("")}}),f(Pi,"key",Ai)));return f(Nl,P([Wc(C(t,P([Vc(y_)]))),A_(0),u]),P([f(Id,P([Wc(P([wd(Zc(1))])),pd("range"),w_(Fr(a)),v_(Fr(s)),Od(Fr(i)),Sd(f(ba,Un,f(ba,Ga(o),r)))]),S),f(Nl,P([Wc(P([Vc(s_),f(iu,"padding-left","calc(2 * var(--cw))"),f(iu,"min-width","calc(4 * var(--cw))"),wd(Zc(0)),_f(Zc(0))]))]),P([Hl(n(i))]))]))})),x_=i((function(t,e){var r,n,a=i((function(t,e){return f(Ad,P([Wc(P([Vc(s_),hl(Jl(100))]))]),P([Hl(t),f(Gh,S,S),e]))})),s=(n=(r=t.du).$||r.a?"calc(40 * var(--cw))":(r.a,"calc(100vw - 10 * var(--cw))"),k_(P([f(iu,"width",n)]))),o=i((function(t,e){return f(Ad,P([h_("nothing")]),P([f(Nl,P([Wc(P([Vc(zl),f(iu,"width","calc(20 * var(--cw))")]))]),P([Hl(t)])),e]))})),u=i((function(t,e){return f(Ad,P([Wc(P([Mf(_d)]))]),P([f(Nl,P([Wc(P([Vc(zl),f(iu,"width","calc(20 * var(--cw))")]))]),P([Hl(t)])),e]))})),c=function(t){return f(ba,t,Kd(e.T))},l=i((function(t,e){return f(Dd,P([pd("text"),Td("Auto"),Wc(P([f(iu,"width","calc(10 * var(--cw))")])),Sd((function(e){return""===e?f(c,t,Rr):f(es,di,f(Ya,f(Is,c(t),Pr),Un(e)))}))]),d(Is,es(""),Ya(Fr),e))}));return C(P([f(a,"ROM name:",f(Dd,P([pd("text"),Wc(P([hl(Jl(100))])),Sd(c(Zd))]),e.aB)),f(a,"ROM type:",d(m_,f(Jn,(function(t){return k(t.dq,t.c4)}),t.aR),c(n_),e.bK)),f(o,"TV mode:",_(b_,S,P([k(0,"PAL"),k(1,"NTSC"),k(2,"SECAM")]),c(r_),e.cA)),f(u,"Emulate paddles:",f(l_,c(Jd),e.bQ)),f(o,"RNG seed:",f(l,e_,e.cn)),f(o,"First visible line:",f(l,Qd,e.bU)),f(o,"CPU emulation:",_(b_,S,P([k(Rr,"Default"),k(Pr(1),"Instruction"),k(Pr(0),"Cycle")]),c(Yd),e.cZ)),f(o,"Audio emulation:",_(b_,S,P([k(Rr,"Default"),k(Pr(1),"PCM"),k(Pr(0),"Waveform")]),c(Xd),e.cO)),f(o,"Volume:",_(s,k(0,100),f(ba,Ya(c(i_)),es(di)),(function(t){return Fr(t)+"%"}),e.ei)),f(u,"Default phosphor:",f(l_,c(f(ba,(function(e){return e?Rr:Pr(t.aG.dO)}),t_)),f(es,!0,f(Ya,(function(t){return!1}),e.dO))))]),C(function(){var t=e.dO;if(t.$)return S;var r=t.a;return P([f(o,"Phosphor level:",_(s,k(0,100),f(ba,Ya(c(f(ba,Pr,t_))),es(di)),(function(t){return Fr(t)+"%"}),r))])}(),P([f(Yc,S,P([f(Rl,P([pd("button"),Vl(a_(e.T)),Wc(P([cd(bl(1)),f(mf,al(0),bl(1))]))]),P([Hl("Save ROM image")]))]))])))})),E_=i((function(t,e){var r,n=i((function(t,e){return d(ql,P([pd("button"),Wc(P([f(iu,"width","calc(10 * var(--cw))")]))]),t,e)}));return P([f($d,P([Wc(P([lf(bl(.5)),ml,xl(Kl),rl(Jc),ul(bl(2)),tl(al(0)),fl(Zc(10)),hl(ll(100)),Of(Bf)])),qd(di),Pl]),P([f(n,Df(0),"Back"),f(n,jd(e.T),"Delete")])),(r=f(x_,t,e),f($d,P([Pl,Gd("Settings:"),qd(di),Wc(P([ml,af(nf),Md(zd),Ud(P([Nd(P([f($l,"not(:first-of-type)",P([El(bl(1))]))]))])),cd(bl(4)),El(bl(2))]))]),r))])})),C_=function(t){var e=k(t.cS,f(Ga,(function(e){return f(to,f(Is,dn(e),(function(t){return t.T})),t.aS)}),t.c_));if(1!==e.a||e.b.$)return function(t){return f(vr,f(Fd,P([hl(ll(100)),rl(Jc),ul(bl(2)),tl(al(0)),Of(Bf),fl(Zc(10))]),t),f(vr,Rf,f(vr,Uc(P([f(ef,"body",P([lf(bl(5))]))])),function(t){var e=function(t){return f(Yc,P([xf(t.T),Wc(P([Of(Bf),f(iu,"padding","2.25em calc(2 * var(--cw))"),ld(bl(5)),hf(_l),f(dd,"odd",P([hh(12)])),f(dd,"even",P([hh(5)])),fh(0),Mf(_d),f(iu,"word-break","break-word")])),Vl(Ms(t.T))]),P([Hl(t.aB)]))},r=function(e){var r=i((function(t,e){return d(ql,P([pd("button"),Wc(P([f(iu,"width","calc(8 * var(--cw))")]))]),t,e)}));return f(Yc,P([xf(e.T),Pl,Wc(P([Of(Bf),ld(bl(4)),hf(_l),hh(11),fh(15),Mf(_d),f(iu,"word-break","break-word")]))]),P([Hl(e.aB),f(Yc,P([Wc(P([ml,hf(tl),cd(bl(1)),Ef(bl(-.5)),xl(Kl)]))]),P([f(r,Df(1),"Edit"),f(r,f(es,di,f(Ya,Ff,yo(t))),"Run")]))]))},n=P([d(ud,i((function(n,i){return d(fd,"div",P([Wc(P([Of(Bf),hl(ll(100)),cd(bl(3.5))]))]),f(Jn,(function(n){return k(n.T,p(Uf,i=n,t.c_,r,e,i));var i}),f(eo,f(ba,(function(t){return t.aB}),Gs),f(Ks,n,i))))})),t.cR,t.aS)]);return d(jf,t,(function(t){return P([f(Yc,P([Wc(P([hl(ll(100)),cd(bl(3.5)),f(iu,"padding","3em calc(2 * var(--cw)) 0 calc(2 * var(--cw))"),hf(_l),Of(Bf)]))]),P([Hl(t)]))])}),n)}(t))))}(t);e.a;var r=e.b.a;return f(E_,t,r)},S_=au("border-style"),T_=a((function(t,e,r){var n=function(t){return f(qn,"calc(",t.E)?f(Fn,4,t.E):t.E},i=n(t)+" "+function(t){return t?"-":"+"}(e)+" "+n(r);return{bJ:0,af:0,o:0,az:0,ai:0,K:0,aj:0,ak:0,U:0,V:0,C:0,ap:0,E:f(sl,"calc",P([i]))}})),I_=au("overflow-y"),P_={av:0,bG:0,b_:0,al:0,dZ:0,E:"scroll"},R_=au("stretch"),B_=function(t){var e=d(ud,i((function(e,r){return f(Yc,P([Pl,Wc(P([ml,wd(Zc(1)),Md(R_),I_(Yl)]))]),P([d(fd,"div",P([Wc(P([wd(Zc(1)),I_(P_),f(iu,"-webkit-overflow-scrolling","touch")]))]),f(Jn,(function(e){return k(e.T,(i=f(Uf,r=e,t.c_),f(Yc,P([xf(r.T),Wc(P([f(dd,"odd",P([hh(f(i,11,5))])),f(dd,"even",P([hh(f(i,11,12))])),f(i,fh(15),fh(0)),f(iu,"padding-left","var(--cw)"),Mf(_d),f(iu,"word-break","break-word")])),Vl(Ms(r.T)),(n=Ff(r.T),f(Wl,"dblclick",Sn(n)))]),P([Hl(" * "+r.aB)]))));var r,n,i}),f(eo,f(ba,(function(t){return t.aB}),Gs),f(Ks,e,r))))]))})),t.cR,t.aS);return d(jf,t,(function(t){return f(Yc,P([Pl,Wc(P([wd(Zc(1)),ml,af(nf),hf(_l),xl(_l)]))]),P([Hl(t)]))}),e)},O_=a((function(t,e,r){return yo(t).$?r:e})),D_=function(t){var e=f(Yc,P([Wc(P([ml]))]),P([f(Dd,P([pd("text"),Wc(P([wd(Zc(1)),kd(1)])),Td("Filter ROMs..."),Sd(md)]),t.cR),f(Rl,P([pd("button"),vd(""===t.cR),Vl(bd)]),P([Hl("Clear")]))])),r=i((function(t,e){return f(Rl,C(P([pd("button"),Wc(P([f(iu,"width","calc(10 * var(--cw))")]))]),t),e)}));return f($d,P([Pl,qd(di)]),P([e,f(Yc,S,P([f(r,P([Vl(Tf)]),P([Hl("Add new")])),f(r,P([vd(d(O_,t,!1,!0)),Vl(f(es,di,f(Ya,jd,t.c_)))]),P([Hl("Delete")])),f(r,P([vd(d(O_,t,!1,!0)),Vl(f(es,di,f(Ya,Ff,yo(t))))]),P([Hl("Run")]))]))]))},F_=au("flex-basis"),j_={$:12},M_={$:13},L_=function(t){return{$:10,a:t}},U_=function(t){return{$:11,a:t}},z_=i((function(t,e){t:for(;;){if(e.a){if("d"===e.b)return f(es,di,f(Ya,jd,yo(t)));break t}switch(e.b){case"ArrowUp":return f(es,M_,f(Ya,U_,t.c_));case"ArrowDown":return f(es,j_,f(Ya,L_,t.c_));case"Enter":return f(es,di,f(Ya,Ff,yo(t)));default:break t}}return di})),$_=i((function(t,e){return k(t,e)})),N_=au("outline-style"),H_=au("overflow-x"),q_=i((function(t,e){return f(Yc,P([Pl,Gd("Settings:"),Wc(C(P([ml,H_(Yl)]),C(d(O_,t,P([Md(R_)]),P([Md(_l),xl(_l)])),e)))]),P([f(es,Hl("no ROMs selected"),f(Ya,f(Is,(function(t){return f($d,P([Wc(P([ml,af(nf),Md(zd),El(bl(1)),I_(P_),f(iu,"-webkit-overflow-scrolling","touch"),wd(Zc(1)),Ud(P([Nd(P([f($l,"not(:first-of-type)",P([El(bl(1))]))]))]))])),qd(di)]),t)}),x_(t)),f(Ga,(function(e){return f(to,(function(t){return b(e,t.T)}),Xs(t))}),t.c_)))]))})),W_=i((function(t,e){return 1===e?function(t){return P([f(Yc,P([Wc(P([Qc(d(T_,cl(100),1,bl(2))),ml,Md(R_),El(bl(1)),Of(Bf),Ul(S_(el)),Ul(N_(el))])),A_(0),(e=z_(t),f(xd,"keydown",f(En,(function(t){return 41===t.$?k(t,!1):k(t,!0)}),f(En,e,d(Cn,$_,f(Pi,"ctrlKey",yi),f(Pi,"key",Ai))))))]),P([f(Yc,P([Wc(P([Of(Bf),wd(Zc(1)),F_(al(0)),ml,af(nf)]))]),P([D_(t),B_(t)])),f(q_,t,P([Of(Bf),wd(Zc(1)),F_(al(0))]))]))]);var e}(t):C_(t)})),V_=function(t){return{$:0,a:t}},G_=function(t){return{$:37,a:t}},K_=function(t){return{$:35,a:t}},X_=function(t){return{$:36,a:t}},Y_=function(t){return{$:32,a:t}},J_={$:30},Q_=function(t){var e=i((function(t,e){return f(Ad,P([h_("nothing"),Wc(P([Vc(s_)]))]),P([f(Nl,P([Wc(P([Vc(zl),f(iu,"width","calc(20 * var(--cw))")]))]),P([Hl(t)])),e]))})),r=function(){switch(t.da.$){case 1:case 2:return!0;default:return!1}}(),n=i((function(t,e){return f(Ad,P([Wc(P([Mf(_d)]))]),P([f(Nl,P([Wc(P([Vc(zl),f(iu,"width","calc(20 * var(--cw))")]))]),P([Hl(t)])),e]))}));return P([f(e,"Difficulty left:",_(b_,S,P([k(0,"A/Pro:"),k(1,"B/Amateur:")]),K_,t.cY.c5)),f(e,"Difficulty right:",_(b_,S,P([k(0,"A/Pro:"),k(1,"B/Amateur:")]),X_,t.cY.c6)),f(e,"TV mode:",_(b_,S,P([k(0,"Color:"),k(1,"BW:")]),G_,t.cY.cX)),f(n,"Limit framerate:",f(l_,Y_,t.dt)),f(Gh,S,S),f(Gh,S,S),f(Rl,P([Vl(Ls),vd(!r),Wc(P([f(iu,"min-width","calc(15 * var(--cw))")]))]),P([Hl(t.c9?"Resume":"Pause")])),f(Rl,P([Vl(J_),vd(!r),Wc(P([f(iu,"min-width","calc(15 * var(--cw))")]))]),P([Hl("Hard Reset")]))])},Z_=Tl("alt"),tp=Xc("h1"),ep=Xc("img"),rp=Xc("li"),np=Xc("p"),ip=function(t){return f(Tl,"src",t)},ap=function(t){return f(es,t.bb,t.aG.eb)},sp=Xc("ul"),op=function(t){var e=t.aG.dr?"doc/images/2600_touch_lh.jpg":"doc/images/2600_touch.jpg",r=t.aG.dr?"doc/images/2600_touch_alt_lh.jpg":"doc/images/2600_touch_alt.jpg",n=P([f(tp,S,P([Hl("Touch controls")])),f(np,S,P([f(ep,P([ip(e),Z_("touch controls"),Wc(P([Vc(s_),hl(Jl(100)),f_(bl(20))]))]),S),f(ep,P([ip(r),Z_("touch controls, alt mode"),Wc(P([Vc(s_),cd(bl(1)),hl(Jl(100)),f_(bl(20))]))]),S)]))]),i=function(t){return f(rp,S,P([Hl(t)]))},a=P([f(tp,S,P([Hl("Keyboard controls")])),f(np,S,P([f(sp,S,P([i("LEFT JOYSTICK: wasd / arrows + v / space"),i("RIGHT JOYSTICK: ijkl + b"),i("RESET: shift-enter"),i("SELECT: shift-space"),i("TOGGLE FULLSCREEN: enter"),i("HARD RESET: shift-r"),i("PAUSE: p")]))]))]),s=function(){switch(t.aW){case 0:return S;case 1:return P([f(tp,S,P([Hl("Gamepad controls")])),f(np,S,P([f(sp,S,P([i("Gamepad 1: left joystick")]))]))]);default:return P([f(tp,S,P([Hl("Gamepad controls")])),f(np,S,P([f(sp,S,P([i("Gamepad 1: left joystick"),i("Gamepad 2: right joystick")]))]))])}}();return ap(t)?C(n,C(s,a)):C(a,s)},up=Xc("canvas"),cp=au("touch-action"),lp=function(t){var e=function(){var e=k(t.da,t.d$);t:for(;;)switch(e.a.$){case 2:return sh(uh);case 1:if(e.b)break t;return e.a,sh(uh);default:break t}return sh(Yl)}();return f(up,P([xf("stellerator-canvas"),Wc(P([hl(Jl(100)),Qc(Jl(100)),rl(Vh),tl(al(0)),ul(al(0)),fl(Zc(10)),e,cp(el)]))]),S)},hp=au("max-height"),fp=i((function(t,e){var r=e.E;return{bT:t,E:Pr(r)}})),dp=function(t){var e=function(){var e=k(t.da,t.d$);t:for(;;)switch(e.a.$){case 2:return sh(Yl);case 1:if(e.b)break t;return e.a,sh(Yl);default:break t}return sh(uh)}(),r=ap(t)?P([Hl("emulation paused"),f(Gh,S,S),Hl("tap to resume")]):P([Hl("emulation paused")]),n=function(){var e=t.da;switch(e.$){case 0:return P([Hl("emulation stopped")]);case 4:return P([Hl("emulation starting")]);case 1:return r;case 3:var n=e.a;return P([Hl("ERROR: "+n)]);default:return S}}(),i=3===t.da.$?hh(7):hh(3);return f(Yc,P([Wc(P([Qc(Jl(100)),hl(Jl(100)),ml,xl(_l),Md(_l),hf(_l),rl(Vh),tl(al(0)),ul(al(0)),fl(Zc(10)),fh(15),e,i])),Vl(b(t.da,ys)&&ap(t)?Ls:di)]),n)},_p={aE:0,E:"relative"},pp=i((function(t,e){return{$:4,a:t,b:e}})),gp=pp,mp=Ld(3),bp=s((function(t,e,r,n){return{dn:e,b3:t,dJ:r,d5:n}})),yp=f(pr,{cT:!1,dA:!1},"(\\[.*?\\])\\((?!/|https?://)(.*?)\\)"),vp=gr(1/0),wp=i((function(t,e){var r=function(e){var r=e.d5;if(!r.b||r.a.$||!r.b.b||r.b.a.$||r.b.b.b)return"";var n=r.a.a,i=r.b.a.a;return n+"("+t+i+")"},n=f(Ya,(function(t){return d(vp,t,r,e)}),yp);return f(es,e,n)})),Ap=function(t){var e=t.dj;if(e.$)return Hl("loading...");var r=e.a;return f(Yc,P([Wc(P([f(iu,"padding","0 var(--cw)"),El(bl(1)),mp(P([f(ef,"img",P([hl(bl(25)),f(iu,"max-width","calc(100vw - 2*var(--cw))")]))]))]))]),P([kf(f(Cf,S,f(wp,"doc/",r)))]))},kp=function(t){return{$:22,a:t}},xp=function(t){return{$:2,a:t}},Ep=function(t){return{$:0,a:t}},Cp=function(t){return{$:3,a:t}},Sp=function(t){return{$:9,a:t}},Tp=function(t){return{$:6,a:t}},Ip={$:13},Pp=function(t){return{$:5,a:t}},Rp=function(t){return{$:7,a:t}},Bp=function(t){return{$:8,a:t}},Op=function(t){return{$:4,a:t}},Dp=function(t){return{$:11,a:t}},Fp=function(t){return{$:12,a:t}},jp=function(t){return{$:10,a:t}},Mp=function(t){return{$:1,a:t}},Lp={$:16},Up=a((function(t,e,r){return{$:23,a:t,b:e,c:r}})),zp=$,$p=a((function(t,e,r){var n,s=k_(P([f(iu,"width","calc(40*var(--cw))"),f(iu,"max-width","calc(100vw - 4*var(--cw))")])),o=t.aG,u=function(t){return f(tp,P([Wc(P([fh(5)]))]),P([Hl(t)]))},c=i((function(t,e){return f(Ad,P([h_("nothing"),Wc(P([Vc(s_)]))]),P([f(Nl,P([Wc(P([Vc(zl),f(iu,"width","calc(20 * var(--cw))")]))]),P([Hl(t)])),e]))})),l=a((function(t,e,r){return f(Ad,P([Wc(P([Mf(_d),Vc(s_)]))]),P([f(Nl,P([Wc(P([Vc(zl),f(iu,"width","calc(20 * var(--cw))")]))]),P([Hl(t)])),f(l_,e,r)]))}));return P([u("General"),f(np,S,P([f(c,"CPU emulation:",_(b_,S,P([k(1,"Instruction"),k(0,"Cycle")]),f(Is,kp,Ep),o.cZ))])),u("Audio"),f(np,S,P([f(c,"Audio emulation:",_(b_,S,P([k(1,"PCM"),k(0,"Waveform")]),f(Is,kp,xp),o.cO)),f(c,"Volume:",_(s,k(0,100),f(ba,Ya(f(Is,kp,Mp)),es(di)),(function(t){return Fr(t)+"%"}),o.ei))])),u("Display"),f(np,S,C(P([f(c,"Gamma correction:",_(s,k(0,50),f(ba,Ya(f(Is,f(Is,f(Is,kp,Cp),(function(t){return t/10})),un)),es(di)),(function(t){return nl(t/10)}),zp(10*o.dh))),f(c,"TV Emulation:",_(b_,S,P([k(0,"Composite"),k(1,"S-Video"),k(2,"None")]),f(Is,kp,Op),o.ec))]),C(t.aP&&2!==o.ec?P([f(Yc,P([Wc(P([fh(7),f(iu,"width","calc(60*var(--cw))"),f(iu,"max-width","calc(100vw - 4*var(--cw))")]))]),P([Hl("WARNING: Your GPU lacks required features. TV emulation will work, but colors will be slightly wrong.")]))]):S,P([f(c,"Scaling:",_(b_,S,P([k(0,"QIS"),k(1,"Bilinear"),k(2,"Plain")]),f(Is,kp,Pp),o.dW)),f(c,"Phosphor level:",_(s,k(0,100),f(ba,Ya(f(ba,Tp,kp)),es(di)),(function(t){return Fr(t)+"%"}),o.dO)),f(c,"Scanline intensity:",_(s,k(0,100),f(ba,Ya(f(ba,Rp,kp)),es(di)),(function(t){return Fr(t)+"%"}),o.dX))])))),u("Controls"),f(np,S,P([f(c,"Touch controls:",_(b_,S,P([k(Rr,"Auto"),k(Pr(!0),"On"),k(Pr(!1),"Off")]),f(Is,kp,Bp),o.eb)),d(l,"Left handed mode:",f(Is,kp,Sp),o.dr),f(c,"Touch joystick sensitivity:",_(s,k(0,100),f(ba,Ya(f(Is,kp,jp)),es(di)),Fr,o.eh))])),u("Ui"),f(np,S,P([f(c,"Display mode:",_(b_,S,P([k(Rr,"Auto"),k(Pr(1),"Wide"),k(Pr(0),"Narrow")]),f(Is,kp,Dp),o.ed)),f(c,"Size:",d(m_,f(Jn,f(Is,(function(t){return k(t,t+"%")}),Fr),Ko),f(ba,Un,f(ba,Ya(f(Is,kp,Fp)),es(di))),Fr(o.cB)))])),u("Reset"),f(np,S,(n=f(iu,"width","calc(25*var(--cw))"),P([_(Gl,e,P([Wc(P([n]))]),kp(Ip),"Reset to defaults"),_(Gl,e,P([Wc(P([n])),vd(!r)]),d(Up,"Do you really want to delete all cartridges?",k("OK","Cancel"),Lp),"Delete all cartridges")])))])})),Np=i((function(t,e){return P([f(Yc,P([Wc(P([f(iu,"padding","1rem var(--cw) 1rem var(--cw)"),hl(ll(100)),Of(Bf),mp(P([Nd(P([f($l,"not(:first-of-type)",P([El(bl(1))]))]))]))]))]),d($p,t,e,zr(t.aS)>0))])})),Hp=function(t){var e,r=function(t){var e=t.aG.ed;if(e.$)return t.du;var r=e.a;return Pr(r)}(t),n=f(es,S,f(Ya,Af(t),r)),i=function(){var e=k(t.c$,r);if(e.b.$)return S;switch(e.a){case 0:e.a;var n=e.b.a;return f(W_,t,n);case 1:return e.a,n=e.b.a,f(Np,t,n);case 2:return e.a,function(t){var e,r=gp(P([V_(P([(e=al(900*t.aG.cB/100|0),f(fp,"max-width",e))]))]));return P([f(Yc,P([Wc(P([hl(ll(100)),f(iu,"height","calc(100vh - 3em)"),cd(bl(1)),ml,Of(Bf),Md(R_),af(rf),r(P([Vc(s_)]))]))]),P([f(Yc,P([Pl,Wc(P([ml,Md(R_),wd(Zc(1)),r(P([f(iu,"height","calc(70vh - 4em)"),hp(al(600))]))]))]),P([f(Yc,P([Wc(P([wd(Zc(1)),f(iu,"padding","1em calc(2 * var(--cw))"),hh(0),rl(_p)]))]),P([lp(t),dp(t)]))])),f(Yc,P([Wc(P([wd((0,{V:0,C:0,dJ:0,a_:0,L:0,ar:"",aL:0,E:nl(0)})),_f(Zc(0)),f(iu,"flex-basis","calc(50 * var(--cw))"),ml,af(nf),Md(R_)]))]),P([f(Yc,P([Pl,Gd("Console:")]),Q_(t)),f(Yc,P([Pl,Gd("Help:"),Wc(P([wd(Zc(1)),Yh(Yl),ml,Md(R_),af(nf)]))]),P([f(Yc,P([Wc(P([I_(P_),f(iu,"-webkit-overflow-scrolling","touch"),wd(Zc(1))]))]),op(t))]))]))]))])}(t);case 3:return e.a,function(t){return P([Ap(t)])}(t);default:return e.a,function(t){return P([Sf(t)])}(t)}}(),a=(e=al(t.aG.cB/100*18),Uc(P([ru(P([su(e),zc(e)]))])));return f(vr,a,C(n,C(f(es,S,f(Ya,ch(t.dw),r)),i)))},qp=sd;!function(e){t.Elm?ae(t.Elm,e):t.Elm=e}({Stellerator:{Main:{init:($a={$7:us,dK:ls,dL:function(t){if(t.$)return di;var e=t.a;return cs(function(t){var e=t.cg?"https://":"http://";return d(fs,"#",t.dg,d(fs,"?",t.ch,C(f(hs,t.cb,C(e,t.bY)),t.b9)))}(e))},d6:function(t){return ms(P([Fs,(e=ds,Ps(f(Is,e,(function(t){var e=f(Bi,Wi(Mi),t);return e.$?S:e.a})))),Es(ps),Ts(_s),Bs(gs)]));var e},ee:Yo,eg:function(t){return{cP:f(Jn,qp,Hp(t)),ea:f(es,"Stellerator",f(Ya,(function(t){return"Stellerator: "+t.aB}),tf(t)))}}},Na=$a.dK,Ha=$a.dL,qa=function(){qa.a(Na(er()))},Qe({br:function(t){return qa.a=t,ir.addEventListener("popstate",qa),ir.navigator.userAgent.indexOf("Trident")<0||ir.addEventListener("hashchange",qa),i((function(e,r){if(!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&r.button<1&&!e.target&&!e.hasAttribute("download")){r.preventDefault();var n=e.href,i=er(),a=Wn(n).a;t(Ha(a&&i.cg===a.cg&&i.bY===a.bY&&i.cb.a===a.cb.a?function(t){return{$:0,a:t}}(a):function(t){return{$:1,a:t}}(n)))}}))},$7:function(t){return d($a.$7,t,er(),qa)},eg:$a.eg,ee:$a.ee,d6:$a.d6}))(Oi)(0)}}})}(this)},3162:function(t,e,r){var n;void 0===(n=function(){"use strict";function e(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){o(n.response,e,r)},n.onerror=function(){console.error("could not download file")},n.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(r){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r.g&&r.g.global===r.g?r.g:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(t,r,s){var o=a.URL||a.webkitURL,u=document.createElement("a");r=r||t.name||"download",u.download=r,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?i(u):n(u.href)?e(t,r,s):i(u,u.target="_blank")):(u.href=o.createObjectURL(t),setTimeout((function(){o.revokeObjectURL(u.href)}),4e4),setTimeout((function(){i(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,a){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),r);else if(n(t))e(t,r,a);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){i(s)}))}}:function(t,r,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,r,n);var o="application/octet-stream"===t.type,u=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&u||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},l.readAsDataURL(t)}else{var h=a.URL||a.webkitURL,f=h.createObjectURL(t);i?i.location=f:location.href=f,i=null,setTimeout((function(){h.revokeObjectURL(f)}),4e4)}});a.saveAs=o.saveAs=o,t.exports=o}.apply(e,[]))||(t.exports=n)},645:(t,e)=>{e.read=function(t,e,r,n,i){var a,s,o=8*i-n-1,u=(1<<o)-1,c=u>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=t[e+h];for(h+=f,a=d&(1<<-l)-1,d>>=-l,l+=o;l>0;a=256*a+t[e+h],h+=f,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=n;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===a)a=1-c;else{if(a===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),a-=c}return(d?-1:1)*s*Math.pow(2,a-n)},e.write=function(t,e,r,n,i,a){var s,o,u,c=8*a-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,_=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(o=0,s=l):s+h>=1?(o=(e*u-1)*Math.pow(2,i),s+=h):(o=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&o,d+=_,o/=256,i-=8);for(s=s<<i|o,c+=i;c>0;t[r+d]=255&s,d+=_,s/=256,c-=8);t[r+d-_]|=128*p}},6594:(t,e,r)=>{"use strict";r.r(e),r.d(e,{AsyncContainerModule:()=>$t,BindingScopeEnum:()=>m,BindingTypeEnum:()=>b,Container:()=>Ut,ContainerModule:()=>zt,LazyServiceIdentifer:()=>U,METADATA_KEY:()=>oe,MetadataReader:()=>I,TargetTypeEnum:()=>y,createTaggedDecorator:()=>qt,decorate:()=>Gt,getServiceIdentifierAsString:()=>R,id:()=>w,inject:()=>Qt,injectable:()=>Kt,interfaces:()=>ie,multiBindToService:()=>it,multiInject:()=>ee,named:()=>Yt,namedConstraint:()=>xt,optional:()=>Zt,postConstruct:()=>ae,preDestroy:()=>se,tagged:()=>Xt,taggedConstraint:()=>kt,targetName:()=>re,traverseAncerstors:()=>At,typeConstraint:()=>Et,unmanaged:()=>te});var n={};r.r(n),r.d(n,{DESIGN_PARAM_TYPES:()=>d,INJECT_TAG:()=>u,MULTI_INJECT_TAG:()=>c,NAMED_TAG:()=>i,NAME_TAG:()=>a,NON_CUSTOM_TAG_KEYS:()=>g,OPTIONAL_TAG:()=>o,PARAM_TYPES:()=>f,POST_CONSTRUCT:()=>_,PRE_DESTROY:()=>p,TAGGED:()=>l,TAGGED_PROP:()=>h,UNMANAGED_TAG:()=>s});var i="named",a="name",s="unmanaged",o="optional",u="inject",c="multi_inject",l="inversify:tagged",h="inversify:tagged_props",f="inversify:paramtypes",d="design:paramtypes",_="post_construct",p="pre_destroy",g=[u,c,a,s,i,o],m={Request:"Request",Singleton:"Singleton",Transient:"Transient"},b={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},y={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},v=0;function w(){return v++}var A=function(){function t(t,e){this.id=w(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=b.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===m.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},t}(),k="Metadata key was used more than once in a parameter:",x="NULL argument",E="Key Not Found",C="Missing required @injectable annotation in:",S="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",T=function(t,e){return"onDeactivation() error in class "+t+": "+e},I=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(f,t),userGeneratedMetadata:Reflect.getMetadata(l,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(h,t)||[]},t}();function P(t){return t instanceof RangeError||"Maximum call stack size exceeded"===t.message}function R(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function B(t,e,r){var n="",i=r(t,e);return 0!==i.length&&(n="\nRegistered bindings:",i.forEach((function(t){var e="Object";null!==t.implementationType&&(e=F(t.implementationType)),n=n+"\n "+e,t.constraint.metaData&&(n=n+" - "+t.constraint.metaData)}))),n}function O(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||O(t.parentRequest,e))}function D(t){t.childRequests.forEach((function(t){if(O(t,t.serviceIdentifier)){var e=function(t){return function t(e,r){void 0===r&&(r=[]);var n=R(e.serviceIdentifier);return r.push(n),null!==e.parentRequest?t(e.parentRequest,r):r}(t).reverse().join(" --\x3e ")}(t);throw new Error("Circular dependency found: "+e)}D(t)}))}function F(t){if(t.name)return t.name;var e=t.toString(),r=e.match(/^function\s*([^\s(]+)/);return r?r[1]:"Anonymous function: "+e}var j=function(){function t(t){this.id=w(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}(),M=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===i?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},t}(),L=function(t,e){this.parentContext=t,this.rootRequest=e},U=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}(),z=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,r=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},r)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}(),$=function(){function t(t,e,r,n){this.id=w(),this.type=t,this.serviceIdentifier=r;var a="symbol"==typeof e?e.toString().slice(7,-1):e;this.name=new z(a||""),this.identifier=e,this.metadata=new Array;var s=null;"string"==typeof n?s=new M(i,n):n instanceof M&&(s=n),null!==s&&this.metadata.push(s)}return t.prototype.hasTag=function(t){for(var e=0,r=this.metadata;e<r.length;e++)if(r[e].key===t)return!0;return!1},t.prototype.isArray=function(){return this.hasTag(c)},t.prototype.matchesArray=function(t){return this.matchesTag(c)(t)},t.prototype.isNamed=function(){return this.hasTag(i)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return g.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(o)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===i}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return g.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(i)(t)},t.prototype.matchesTag=function(t){var e=this;return function(r){for(var n=0,i=e.metadata;n<i.length;n++){var a=i[n];if(a.key===t&&a.value===r)return!0}return!1}},t}(),N=function(t,e,r){if(r||2===arguments.length)for(var n,i=0,a=e.length;i<a;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))};function H(t,e,r,n){var i=t.getConstructorMetadata(r),a=i.compilerGeneratedMetadata;if(void 0===a)throw new Error(C+" "+e+".");var s=i.userGeneratedMetadata,o=Object.keys(s),u=0===r.length&&o.length>0,c=o.length>r.length,l=function(t,e,r,n,i){for(var a=[],s=0;s<i;s++){var o=q(s,t,e,r,n);null!==o&&a.push(o)}return a}(n,e,a,s,u||c?o.length:r.length),h=V(t,r,e);return N(N([],l,!0),h,!0)}function q(t,e,r,n,i){var a=i[t.toString()]||[],s=K(a),o=!0!==s.unmanaged,u=n[t];if((u=s.inject||s.multiInject||u)instanceof U&&(u=u.unwrap()),o){if(!e&&(u===Object||u===Function||void 0===u))throw new Error("Missing required @inject or @multiInject annotation in: argument "+t+" in class "+r+".");var c=new $(y.ConstructorArgument,s.targetName,u);return c.metadata=a,c}return null}function W(t,e,r,n){var i=t||e;if(void 0===i){var a=C+" for property "+String(r)+" in class "+n+".";throw new Error(a)}return i}function V(t,e,r){for(var n=t.getPropertiesMetadata(e),i=[],a=Object.getOwnPropertySymbols(n),s=0,o=Object.keys(n).concat(a);s<o.length;s++){var u=o[s],c=n[u],l=K(c),h=l.targetName||u,f=W(l.inject,l.multiInject,u,r),d=new $(y.ClassProperty,h,f);d.metadata=c,i.push(d)}var _=Object.getPrototypeOf(e.prototype).constructor;if(_!==Object){var p=V(t,_,r);i=N(N([],i,!0),p,!0)}return i}function G(t,e){var r=Object.getPrototypeOf(e.prototype).constructor;if(r!==Object){var n=H(t,F(r),r,!0),i=n.map((function(t){return t.metadata.filter((function(t){return t.key===s}))})),a=[].concat.apply([],i).length,o=n.length-a;return o>0?o:G(t,r)}return 0}function K(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[u],multiInject:e[c],targetName:e[a],unmanaged:e[s]}}var X=function(){function t(t,e,r,n,i){this.id=w(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=r,this.target=i,this.childRequests=[],this.bindings=Array.isArray(n)?n:[n],this.requestScope=null===r?new Map:null}return t.prototype.addChildRequest=function(e,r,n){var i=new t(e,this.parentContext,this,r,n);return this.childRequests.push(i),i},t}();function Y(t){return t._bindingDictionary}function J(t,e,r,n,i){var a,s=Z(r.container,i.serviceIdentifier);return 0===s.length&&r.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(r.container.bind(i.serviceIdentifier).toSelf(),s=Z(r.container,i.serviceIdentifier)),a=e?s:s.filter((function(t){var e=new X(t.serviceIdentifier,r,n,t,i);return t.constraint(e)})),function(t,e,r,n){switch(e.length){case 0:if(r.isOptional())return e;var i=R(t),a="No matching bindings found for serviceIdentifier:";throw a+=function(t,e){if(e.isTagged()||e.isNamed()){var r="",n=e.getNamedTag(),i=e.getCustomTags();return null!==n&&(r+=n.toString()+"\n"),null!==i&&i.forEach((function(t){r+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+r}return" "+t}(i,r),a+=B(n,i,Z),new Error(a);case 1:return e;default:if(r.isArray())return e;throw a="Ambiguous match found for serviceIdentifier: "+(i=R(t)),a+=B(n,i,Z),new Error(a)}}(i.serviceIdentifier,a,i,r.container),a}function Q(t,e,r,n,i,a){var s,o;if(null===i){s=J(t,e,n,null,a),o=new X(r,n,null,s,a);var u=new L(n,o);n.addPlan(u)}else s=J(t,e,n,i,a),o=i.addChildRequest(a.serviceIdentifier,s,a);s.forEach((function(e){var r=null;if(a.isArray())r=o.addChildRequest(e.serviceIdentifier,e,a);else{if(e.cache)return;r=o}if(e.type===b.Instance&&null!==e.implementationType){var i=function(t,e){return H(t,F(e),e,!1)}(t,e.implementationType);if(!n.container.options.skipBaseClassChecks){var s=G(t,e.implementationType);if(i.length<s){var u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."}(F(e.implementationType));throw new Error(u)}}i.forEach((function(e){Q(t,!1,e.serviceIdentifier,n,r,e)}))}}))}function Z(t,e){var r=[],n=Y(t);return n.hasKey(e)?r=n.get(e):null!==t.parent&&(r=Z(t.parent,e)),r}function tt(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&"function"==typeof t.then}function et(t){return!!tt(t)||Array.isArray(t)&&t.some(tt)}var rt,nt=function(t,e){return r=void 0,n=void 0,a=function(){var r,n;return function(t,e){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return r=i.sent(),t.cache=r,[3,3];case 2:throw n=i.sent(),t.cache=null,t.activated=!1,n;case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(t,e){function s(t){try{u(a.next(t))}catch(t){e(t)}}function o(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(s,o)}u((a=a.apply(r,n||[])).next())}));var r,n,i,a};!function(t){t.DynamicValue="toDynamicValue",t.Factory="toFactory",t.Provider="toProvider"}(rt||(rt={}));var it=function(t){return function(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.forEach((function(r){return t.bind(r).toService(e)}))}}},at=function(){return at=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},at.apply(this,arguments)},st=function(t,e,r,n){return new(r||(r=Promise))((function(i,a){function s(t){try{u(n.next(t))}catch(t){a(t)}}function o(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}u((n=n.apply(t,e||[])).next())}))},ot=function(t,e){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};function ut(t){var e,r=new((e=t.constr).bind.apply(e,function(t,e,r){if(r||2===arguments.length)for(var n,i=0,a=e.length;i<a;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach((function(e,n){var i=e.target.identifier,a=t.propertyInjections[n];r[i]=a})),r}function ct(t){return st(this,void 0,void 0,(function(){var e,r,n,i;return ot(this,(function(a){for(e=[],r=0,n=t;r<n.length;r++)i=n[r],Array.isArray(i)?e.push(Promise.all(i)):e.push(i);return[2,Promise.all(e)]}))}))}function lt(t,e){var r=function(t,e){var r,n;if(Reflect.hasMetadata(_,t)){var i=Reflect.getMetadata(_,t);try{return null===(n=(r=e)[i.value])||void 0===n?void 0:n.call(r)}catch(e){throw new Error("@postConstruct error in class "+t.name+": "+e.message)}}}(t,e);return tt(r)?r.then((function(){return e})):e}var ht=function(t){return function(e){e.parentContext.setCurrentRequest(e);var r=e.bindings,n=e.childRequests,i=e.target&&e.target.isArray(),a=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(i&&a)return n.map((function(e){return ht(t)(e)}));if(!e.target.isOptional()||0!==r.length){var s=r[0];return pt(t,e,s)}}},ft=function(t,e){var r=function(t){switch(t.type){case b.Factory:return{factory:t.factory,factoryType:rt.Factory};case b.Provider:return{factory:t.provider,factoryType:rt.Provider};case b.DynamicValue:return{factory:t.dynamicValue,factoryType:rt.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}}(t);return function(n,i){try{return r.factory.bind(t)(e)}catch(t){throw P(t)&&(t=new Error((a=r.factoryType,s=e.currentRequest.serviceIdentifier.toString(),"It looks like there is a circular dependency in one of the '"+a+"' bindings. Please investigate bindings withservice identifier '"+s+"'."))),t}var a,s}()},dt=function(t,e,r){var n,i=e.childRequests;switch(function(t){var e=null;switch(t.type){case b.ConstantValue:case b.Function:e=t.cache;break;case b.Constructor:case b.Instance:e=t.implementationType;break;case b.DynamicValue:e=t.dynamicValue;break;case b.Provider:e=t.provider;break;case b.Factory:e=t.factory}if(null===e){var r=R(t.serviceIdentifier);throw new Error("Invalid binding type: "+r)}}(r),r.type){case b.ConstantValue:case b.Function:n=r.cache;break;case b.Constructor:n=r.implementationType;break;case b.Instance:n=function(t,e,r,n){!function(t,e){t.scope!==m.Singleton&&function(t,e){var r="Class cannot be instantiated in "+(t.scope===m.Request?"request":"transient")+" scope.";if("function"==typeof t.onDeactivation)throw new Error(T(e.name,r));if(Reflect.hasMetadata(p,e))throw new Error("@preDestroy error in class "+e.name+": "+r)}(t,e)}(t,e);var i=function(t,e,r){var n;if(e.length>0){var i=function(t,e){return t.reduce((function(t,r){var n=e(r);return r.target.type===y.ConstructorArgument?t.constructorInjections.push(n):(t.propertyRequests.push(r),t.propertyInjections.push(n)),t.isAsync||(t.isAsync=et(n)),t}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(e,r),a=at(at({},i),{constr:t});n=i.isAsync?function(t){return st(this,void 0,void 0,(function(){var e,r;return ot(this,(function(n){switch(n.label){case 0:return[4,ct(t.constructorInjections)];case 1:return e=n.sent(),[4,ct(t.propertyInjections)];case 2:return r=n.sent(),[2,ut(at(at({},t),{constructorInjections:e,propertyInjections:r}))]}}))}))}(a):ut(a)}else n=new t;return n}(e,r,n);return tt(i)?i.then((function(t){return lt(e,t)})):lt(e,i)}(r,r.implementationType,i,ht(t));break;default:n=ft(r,e.parentContext)}return n},_t=function(t,e,r){var n=function(t,e){return e.scope===m.Singleton&&e.activated?e.cache:e.scope===m.Request&&t.has(e.id)?t.get(e.id):null}(t,e);return null!==n||function(t,e,r){e.scope===m.Singleton&&function(t,e){t.cache=e,t.activated=!0,tt(e)&&nt(t,e)}(e,r),e.scope===m.Request&&function(t,e,r){t.has(e.id)||t.set(e.id,r)}(t,e,r)}(t,e,n=r()),n},pt=function(t,e,r){return _t(t,r,(function(){var n=dt(t,e,r);return tt(n)?n.then((function(t){return gt(e,r,t)})):gt(e,r,n)}))};function gt(t,e,r){var n,i=mt(t.parentContext,e,r),a=wt(t.parentContext.container),s=a.next();do{n=s.value;var o=t.parentContext,u=t.serviceIdentifier,c=vt(n,u);i=tt(i)?yt(c,o,i):bt(c,o,i),s=a.next()}while(!0!==s.done&&!Y(n).hasKey(t.serviceIdentifier));return i}var mt=function(t,e,r){return"function"==typeof e.onActivation?e.onActivation(t,r):r},bt=function(t,e,r){for(var n=t.next();!n.done;){if(tt(r=n.value(e,r)))return yt(t,e,r);n=t.next()}return r},yt=function(t,e,r){return n=void 0,i=void 0,s=function(){var n,i;return function(t,e){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}(this,(function(a){switch(a.label){case 0:return[4,r];case 1:n=a.sent(),i=t.next(),a.label=2;case 2:return i.done?[3,4]:[4,i.value(e,n)];case 3:return n=a.sent(),i=t.next(),[3,2];case 4:return[2,n]}}))},new((a=void 0)||(a=Promise))((function(t,e){function r(t){try{u(s.next(t))}catch(t){e(t)}}function o(t){try{u(s.throw(t))}catch(t){e(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,o)}u((s=s.apply(n,i||[])).next())}));var n,i,a,s},vt=function(t,e){var r=t._activations;return r.hasKey(e)?r.get(e).values():[].values()},wt=function(t){for(var e=[t],r=t.parent;null!==r;)e.push(r),r=r.parent;return{next:function(){var t=e.pop();return void 0!==t?{done:!1,value:t}:{done:!0,value:void 0}}}},At=function(t,e){var r=t.parentRequest;return null!==r&&(!!e(r)||At(r,e))},kt=function(t){return function(e){var r=function(r){return null!==r&&null!==r.target&&r.target.matchesTag(t)(e)};return r.metaData=new M(t,e),r}},xt=kt(i),Et=function(t){return function(e){var r=null;if(null!==e){if(r=e.bindings[0],"string"==typeof t)return r.serviceIdentifier===t;var n=e.bindings[0].implementationType;return t===n}return!1}},Ct=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new St(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=xt(t),new St(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t&&null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new St(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=kt(t)(e),new St(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return null!==e&&Et(t)(e.parentRequest)},new St(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return null!==e&&xt(t)(e.parentRequest)},new St(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(r){return null!==r&&kt(t)(e)(r.parentRequest)},new St(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return null!==e&&At(e,Et(t))},new St(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return null!==e&&!At(e,Et(t))},new St(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return null!==e&&At(e,xt(t))},new St(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return null!==e&&!At(e,xt(t))},new St(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(r){return null!==r&&At(r,kt(t)(e))},new St(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(r){return null!==r&&!At(r,kt(t)(e))},new St(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return null!==e&&At(e,t)},new St(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return null!==e&&!At(e,t)},new St(this._binding)},t}(),St=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new Ct(this._binding)},t.prototype.onDeactivation=function(t){return this._binding.onDeactivation=t,new Ct(this._binding)},t}(),Tt=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new Ct(this._binding),this._bindingOnSyntax=new St(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},t}(),It=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=m.Request,new Tt(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=m.Singleton,new Tt(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=m.Transient,new Tt(this._binding)},t}(),Pt=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new Ct(this._binding),this._bindingOnSyntax=new St(this._binding),this._bindingInSyntax=new It(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},t}(),Rt=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=b.Instance,this._binding.implementationType=t,new Pt(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=b.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=m.Singleton,new Tt(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=b.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new Pt(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=b.Constructor,this._binding.implementationType=t,this._binding.scope=m.Singleton,new Tt(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=b.Factory,this._binding.factory=t,this._binding.scope=m.Singleton,new Tt(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error("Value provided to function binding must be a function!");var e=this.toConstantValue(t);return this._binding.type=b.Function,this._binding.scope=m.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=b.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=m.Singleton,new Tt(this._binding)},t.prototype.toAutoNamedFactory=function(t){return this._binding.type=b.Factory,this._binding.factory=function(e){return function(r){return e.container.getNamed(t,r)}},new Tt(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=b.Provider,this._binding.provider=t,this._binding.scope=m.Singleton,new Tt(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}(),Bt=function(){function t(){}return t.of=function(e,r,n,i,a){var s=new t;return s.bindings=e,s.middleware=r,s.deactivations=i,s.activations=n,s.moduleActivationStore=a,s},t}(),Ot=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(x);if(null==e)throw new Error(x);var r=this._map.get(t);void 0!==r?r.push(e):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(x);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(E)},t.prototype.remove=function(t){if(null==t)throw new Error(x);if(!this._map.delete(t))throw new Error(E)},t.prototype.removeIntersection=function(t){var e=this;this.traverse((function(r,n){var i=t.hasKey(r)?t.get(r):void 0;if(void 0!==i){var a=n.filter((function(t){return!i.some((function(e){return t===e}))}));e._setValue(r,a)}}))},t.prototype.removeByCondition=function(t){var e=this,r=[];return this._map.forEach((function(n,i){for(var a=[],s=0,o=n;s<o.length;s++){var u=o[s];t(u)?r.push(u):a.push(u)}e._setValue(i,a)})),r},t.prototype.hasKey=function(t){if(null==t)throw new Error(x);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,r){t.forEach((function(t){return e.add(r,"object"==typeof(n=t)&&null!==n&&"clone"in n&&"function"==typeof n.clone?t.clone():t);var n}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,r){t(r,e)}))},t.prototype._setValue=function(t,e){e.length>0?this._map.set(t,e):this._map.delete(t)},t}(),Dt=function(){function t(){this._map=new Map}return t.prototype.remove=function(t){if(this._map.has(t)){var e=this._map.get(t);return this._map.delete(t),e}return this._getEmptyHandlersStore()},t.prototype.addDeactivation=function(t,e,r){this._getModuleActivationHandlers(t).onDeactivations.add(e,r)},t.prototype.addActivation=function(t,e,r){this._getModuleActivationHandlers(t).onActivations.add(e,r)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,r){e._map.set(r,{onActivations:t.onActivations.clone(),onDeactivations:t.onDeactivations.clone()})})),e},t.prototype._getModuleActivationHandlers=function(t){var e=this._map.get(t);return void 0===e&&(e=this._getEmptyHandlersStore(),this._map.set(t,e)),e},t.prototype._getEmptyHandlersStore=function(){return{onActivations:new Ot,onDeactivations:new Ot}},t}(),Ft=function(){return Ft=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ft.apply(this,arguments)},jt=function(t,e,r,n){return new(r||(r=Promise))((function(i,a){function s(t){try{u(n.next(t))}catch(t){a(t)}}function o(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}u((n=n.apply(t,e||[])).next())}))},Mt=function(t,e){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},Lt=function(t,e,r){if(r||2===arguments.length)for(var n,i=0,a=e.length;i<a;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},Ut=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===e.defaultScope)e.defaultScope=m.Transient;else if(e.defaultScope!==m.Singleton&&e.defaultScope!==m.Transient&&e.defaultScope!==m.Request)throw new Error("Invalid Container option. Default scope must be a string ('singleton' or 'transient').");if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=w(),this._bindingDictionary=new Ot,this._snapshots=[],this._middleware=null,this._activations=new Ot,this._deactivations=new Ot,this.parent=null,this._metadataReader=new I,this._moduleActivationStore=new Dt}return t.merge=function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var a=new t,s=Lt([e,r],n,!0).map((function(t){return Y(t)})),o=Y(a);function u(t,e){t.traverse((function(t,r){r.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return s.forEach((function(t){u(t,o)})),a},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=this._getContainerModuleHelpersFactory(),n=0,i=t;n<i.length;n++){var a=i[n],s=r(a.id);a.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction,s.unbindAsyncFunction,s.onActivationFunction,s.onDeactivationFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jt(this,void 0,void 0,(function(){var e,r,n,i,a;return Mt(this,(function(s){switch(s.label){case 0:e=this._getContainerModuleHelpersFactory(),r=0,n=t,s.label=1;case 1:return r<n.length?(i=n[r],a=e(i.id),[4,i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)]):[3,4];case 2:s.sent(),s.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach((function(e){var r=t._removeModuleBindings(e.id);t._deactivateSingletons(r),t._removeModuleHandlers(e.id)}))},t.prototype.unloadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jt(this,void 0,void 0,(function(){var e,r,n,i;return Mt(this,(function(a){switch(a.label){case 0:e=0,r=t,a.label=1;case 1:return e<r.length?(n=r[e],i=this._removeModuleBindings(n.id),[4,this._deactivateSingletonsAsync(i)]):[3,4];case 2:a.sent(),this._removeModuleHandlers(n.id),a.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},t.prototype.bind=function(t){var e=this.options.defaultScope||m.Transient,r=new A(t,e);return this._bindingDictionary.add(t,r),new Rt(r)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.rebindAsync=function(t){return jt(this,void 0,void 0,(function(){return Mt(this,(function(e){switch(e.label){case 0:return[4,this.unbindAsync(t)];case 1:return e.sent(),[2,this.bind(t)]}}))}))},t.prototype.unbind=function(t){if(this._bindingDictionary.hasKey(t)){var e=this._bindingDictionary.get(t);this._deactivateSingletons(e)}this._removeServiceFromDictionary(t)},t.prototype.unbindAsync=function(t){return jt(this,void 0,void 0,(function(){var e;return Mt(this,(function(r){switch(r.label){case 0:return this._bindingDictionary.hasKey(t)?(e=this._bindingDictionary.get(t),[4,this._deactivateSingletonsAsync(e)]):[3,2];case 1:r.sent(),r.label=2;case 2:return this._removeServiceFromDictionary(t),[2]}}))}))},t.prototype.unbindAll=function(){var t=this;this._bindingDictionary.traverse((function(e,r){t._deactivateSingletons(r)})),this._bindingDictionary=new Ot},t.prototype.unbindAllAsync=function(){return jt(this,void 0,void 0,(function(){var t,e=this;return Mt(this,(function(r){switch(r.label){case 0:return t=[],this._bindingDictionary.traverse((function(r,n){t.push(e._deactivateSingletonsAsync(n))})),[4,Promise.all(t)];case 1:return r.sent(),this._bindingDictionary=new Ot,[2]}}))}))},t.prototype.onActivation=function(t,e){this._activations.add(t,e)},t.prototype.onDeactivation=function(t,e){this._deactivations.add(t,e)},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isCurrentBound=function(t){return this._bindingDictionary.hasKey(t)},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,i,e)},t.prototype.isBoundTagged=function(t,e,r){var n=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),a=function(t,e,r,n){var i=new $(y.Variable,"",e,new M(r,n)),a=new j(t);return new X(e,a,null,[],i)}(this,t,e,r);n=i.some((function(t){return t.constraint(a)}))}return!n&&this.parent&&(n=this.parent.isBoundTagged(t,e,r)),n},t.prototype.snapshot=function(){this._snapshots.push(Bt.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error("No snapshot available to restore.");this._bindingDictionary=t.bindings,this._activations=t.activations,this._deactivations=t.deactivations,this._middleware=t.middleware,this._moduleActivationStore=t.moduleActivationStore},t.prototype.createChild=function(e){var r=new t(e||this.options);return r.parent=this,r},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),r)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){var e=this._getNotAllArgs(t,!1);return this._getButThrowIfAsync(e)},t.prototype.getAsync=function(t){return jt(this,void 0,void 0,(function(){var e;return Mt(this,(function(r){return e=this._getNotAllArgs(t,!1),[2,this._get(e)]}))}))},t.prototype.getTagged=function(t,e,r){var n=this._getNotAllArgs(t,!1,e,r);return this._getButThrowIfAsync(n)},t.prototype.getTaggedAsync=function(t,e,r){return jt(this,void 0,void 0,(function(){var n;return Mt(this,(function(i){return n=this._getNotAllArgs(t,!1,e,r),[2,this._get(n)]}))}))},t.prototype.getNamed=function(t,e){return this.getTagged(t,i,e)},t.prototype.getNamedAsync=function(t,e){return this.getTaggedAsync(t,i,e)},t.prototype.getAll=function(t){var e=this._getAllArgs(t);return this._getButThrowIfAsync(e)},t.prototype.getAllAsync=function(t){var e=this._getAllArgs(t);return this._getAll(e)},t.prototype.getAllTagged=function(t,e,r){var n=this._getNotAllArgs(t,!0,e,r);return this._getButThrowIfAsync(n)},t.prototype.getAllTaggedAsync=function(t,e,r){var n=this._getNotAllArgs(t,!0,e,r);return this._getAll(n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,i,e)},t.prototype.getAllNamedAsync=function(t,e){return this.getAllTaggedAsync(t,i,e)},t.prototype.resolve=function(t){var e=this.isBound(t);e||this.bind(t).toSelf();var r=this.get(t);return e||this.unbind(t),r},t.prototype._preDestroy=function(t,e){if(Reflect.hasMetadata(p,t))return e[Reflect.getMetadata(p,t).value]()},t.prototype._removeModuleHandlers=function(t){var e=this._moduleActivationStore.remove(t);this._activations.removeIntersection(e.onActivations),this._deactivations.removeIntersection(e.onDeactivations)},t.prototype._removeModuleBindings=function(t){return this._bindingDictionary.removeByCondition((function(e){return e.moduleId===t}))},t.prototype._deactivate=function(t,e){var r=this,n=Object.getPrototypeOf(e).constructor;try{if(this._deactivations.hasKey(t.serviceIdentifier)){var i=this._deactivateContainer(e,this._deactivations.get(t.serviceIdentifier).values());if(tt(i))return this._handleDeactivationError(i.then((function(){return r._propagateContainerDeactivationThenBindingAndPreDestroyAsync(t,e,n)})),n)}var a=this._propagateContainerDeactivationThenBindingAndPreDestroy(t,e,n);if(tt(a))return this._handleDeactivationError(a,n)}catch(t){throw new Error(T(n.name,t.message))}},t.prototype._handleDeactivationError=function(t,e){return jt(this,void 0,void 0,(function(){var r;return Mt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t];case 1:return n.sent(),[3,3];case 2:throw r=n.sent(),new Error(T(e.name,r.message));case 3:return[2]}}))}))},t.prototype._deactivateContainer=function(t,e){for(var r=this,n=e.next();n.value;){var i=n.value(t);if(tt(i))return i.then((function(){return r._deactivateContainerAsync(t,e)}));n=e.next()}},t.prototype._deactivateContainerAsync=function(t,e){return jt(this,void 0,void 0,(function(){var r;return Mt(this,(function(n){switch(n.label){case 0:r=e.next(),n.label=1;case 1:return r.value?[4,r.value(t)]:[3,3];case 2:return n.sent(),r=e.next(),[3,1];case 3:return[2]}}))}))},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},r=function(r){return function(n){var i=t.rebind(n);return e(i,r),i}},n=function(e){return function(r,n){t._moduleActivationStore.addActivation(e,r,n),t.onActivation(r,n)}},i=function(e){return function(r,n){t._moduleActivationStore.addDeactivation(e,r,n),t.onDeactivation(r,n)}};return function(a){return{bindFunction:(s=a,function(r){var n=t.bind(r);return e(n,s),n}),isboundFunction:function(e){return t.isBound(e)},onActivationFunction:n(a),onDeactivationFunction:i(a),rebindFunction:r(a),unbindFunction:function(e){return t.unbind(e)},unbindAsyncFunction:function(e){return t.unbindAsync(e)}};var s}},t.prototype._getAll=function(t){return Promise.all(this._get(t))},t.prototype._get=function(t){var e=Ft(Ft({},t),{contextInterceptor:function(t){return t},targetType:y.Variable});if(this._middleware){var r=this._middleware(e);if(null==r)throw new Error("Invalid return type in middleware. Middleware must return!");return r}return this._planAndResolve()(e)},t.prototype._getButThrowIfAsync=function(t){var e=this._get(t);if(et(e))throw new Error("You are attempting to construct '"+t.serviceIdentifier+"' in a synchronous way\n but it has asynchronous dependencies.");return e},t.prototype._getAllArgs=function(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}},t.prototype._getNotAllArgs=function(t,e,r,n){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:r,value:n}},t.prototype._planAndResolve=function(){var t=this;return function(e){var r=function(t,e,r,n,i,a,s,o){void 0===o&&(o=!1);var l=new j(e),h=function(t,e,r,n,i,a){var s=new M(t?c:u,r),o=new $(e,"",r,s);if(void 0!==i){var l=new M(i,a);o.metadata.push(l)}return o}(r,n,i,0,a,s);try{return Q(t,o,i,l,null,h),l}catch(t){throw P(t)&&D(l.plan.rootRequest),t}}(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return function(t){return ht(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}(r=e.contextInterceptor(r))}},t.prototype._deactivateIfSingleton=function(t){var e=this;if(t.activated)return tt(t.cache)?t.cache.then((function(r){return e._deactivate(t,r)})):this._deactivate(t,t.cache)},t.prototype._deactivateSingletons=function(t){for(var e=0,r=t;e<r.length;e++){var n=r[e];if(tt(this._deactivateIfSingleton(n)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},t.prototype._deactivateSingletonsAsync=function(t){return jt(this,void 0,void 0,(function(){var e=this;return Mt(this,(function(r){switch(r.label){case 0:return[4,Promise.all(t.map((function(t){return e._deactivateIfSingleton(t)})))];case 1:return r.sent(),[2]}}))}))},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(t,e,r){return this.parent?this._deactivate.bind(this.parent)(t,e):this._bindingDeactivationAndPreDestroy(t,e,r)},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(t,e,r){return jt(this,void 0,void 0,(function(){return Mt(this,(function(n){switch(n.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(t,e)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(t,e,r)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype._removeServiceFromDictionary=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error("Could not unbind serviceIdentifier: "+R(t))}},t.prototype._bindingDeactivationAndPreDestroy=function(t,e,r){var n=this;if("function"==typeof t.onDeactivation){var i=t.onDeactivation(e);if(tt(i))return i.then((function(){return n._preDestroy(r,e)}))}return this._preDestroy(r,e)},t.prototype._bindingDeactivationAndPreDestroyAsync=function(t,e,r){return jt(this,void 0,void 0,(function(){return Mt(this,(function(n){switch(n.label){case 0:return"function"!=typeof t.onDeactivation?[3,2]:[4,t.onDeactivation(e)];case 1:n.sent(),n.label=2;case 2:return[4,this._preDestroy(r,e)];case 3:return n.sent(),[2]}}))}))},t}(),zt=function(t){this.id=w(),this.registry=t},$t=function(t){this.id=w(),this.registry=t};function Nt(t,e,r,n){!function(t){if(void 0!==t)throw new Error(S)}(e),Ht(l,t,r.toString(),n)}function Ht(t,e,r,n){var i=function(t){var e=[];if(Array.isArray(t)){var r=function(t){for(var e=new Set,r=0,n=t;r<n.length;r++){var i=n[r];if(e.has(i))return i;e.add(i)}}((e=t).map((function(t){return t.key})));if(void 0!==r)throw new Error(k+" "+r.toString())}else e=[t];return e}(n),a={};Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var s=a[r];if(void 0===s)s=[];else for(var o=function(t){if(i.some((function(e){return e.key===t.key})))throw new Error(k+" "+t.key.toString())},u=0,c=s;u<c.length;u++)o(c[u]);s.push.apply(s,i),a[r]=s,Reflect.defineMetadata(t,a,e)}function qt(t){return function(e,r,n){"number"==typeof n?Nt(e,r,n,t):function(t,e,r){if(void 0!==t.prototype)throw new Error(S);Ht(h,t.constructor,e,r)}(e,r,t)}}function Wt(t,e){Reflect.decorate(t,e)}function Vt(t,e){return function(r,n){e(r,n,t)}}function Gt(t,e,r){"number"==typeof r?Wt([Vt(r,t)],e):"string"==typeof r?Reflect.decorate([t],e,r):Wt([t],e)}function Kt(){return function(t){if(Reflect.hasOwnMetadata(f,t))throw new Error("Cannot apply @injectable decorator multiple times.");var e=Reflect.getMetadata(d,t)||[];return Reflect.defineMetadata(f,e,t),t}}function Xt(t,e){return qt(new M(t,e))}function Yt(t){return qt(new M(i,t))}function Jt(t){return function(e){return function(r,n,i){if(void 0===e){var a="function"==typeof r?r.name:r.constructor.name;throw new Error("@inject called with undefined this could mean that the class "+a+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation.")}return qt(new M(t,e))(r,n,i)}}}var Qt=Jt(u);function Zt(){return qt(new M(o,!0))}function te(){return function(t,e,r){Nt(t,e,r,new M(s,!0))}}var ee=Jt(c);function re(t){return function(e,r,n){Nt(e,r,n,new M(a,t))}}function ne(t,e){return function(){return function(r,n){var i=new M(t,n);if(Reflect.hasOwnMetadata(t,r.constructor))throw new Error(e);Reflect.defineMetadata(t,i,r.constructor)}}}var ie,ae=ne(_,"Cannot apply @postConstruct decorator multiple times in the same class"),se=ne(p,"Cannot apply @preDestroy decorator multiple times in the same class");ie||(ie={});var oe=n},8738:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},2568:(t,e,r)=>{var n,i,a,s,o;n=r(1012),i=r(487).utf8,a=r(8738),s=r(487).bin,(o=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):i.stringToBytes(t):a(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var r=n.bytesToWords(t),u=8*t.length,c=1732584193,l=-271733879,h=-1732584194,f=271733878,d=0;d<r.length;d++)r[d]=16711935&(r[d]<<8|r[d]>>>24)|4278255360&(r[d]<<24|r[d]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var _=o._ff,p=o._gg,g=o._hh,m=o._ii;for(d=0;d<r.length;d+=16){var b=c,y=l,v=h,w=f;c=_(c,l,h,f,r[d+0],7,-680876936),f=_(f,c,l,h,r[d+1],12,-389564586),h=_(h,f,c,l,r[d+2],17,606105819),l=_(l,h,f,c,r[d+3],22,-1044525330),c=_(c,l,h,f,r[d+4],7,-176418897),f=_(f,c,l,h,r[d+5],12,1200080426),h=_(h,f,c,l,r[d+6],17,-1473231341),l=_(l,h,f,c,r[d+7],22,-45705983),c=_(c,l,h,f,r[d+8],7,1770035416),f=_(f,c,l,h,r[d+9],12,-1958414417),h=_(h,f,c,l,r[d+10],17,-42063),l=_(l,h,f,c,r[d+11],22,-1990404162),c=_(c,l,h,f,r[d+12],7,1804603682),f=_(f,c,l,h,r[d+13],12,-40341101),h=_(h,f,c,l,r[d+14],17,-1502002290),c=p(c,l=_(l,h,f,c,r[d+15],22,1236535329),h,f,r[d+1],5,-165796510),f=p(f,c,l,h,r[d+6],9,-1069501632),h=p(h,f,c,l,r[d+11],14,643717713),l=p(l,h,f,c,r[d+0],20,-373897302),c=p(c,l,h,f,r[d+5],5,-701558691),f=p(f,c,l,h,r[d+10],9,38016083),h=p(h,f,c,l,r[d+15],14,-660478335),l=p(l,h,f,c,r[d+4],20,-405537848),c=p(c,l,h,f,r[d+9],5,568446438),f=p(f,c,l,h,r[d+14],9,-1019803690),h=p(h,f,c,l,r[d+3],14,-187363961),l=p(l,h,f,c,r[d+8],20,1163531501),c=p(c,l,h,f,r[d+13],5,-1444681467),f=p(f,c,l,h,r[d+2],9,-51403784),h=p(h,f,c,l,r[d+7],14,1735328473),c=g(c,l=p(l,h,f,c,r[d+12],20,-1926607734),h,f,r[d+5],4,-378558),f=g(f,c,l,h,r[d+8],11,-2022574463),h=g(h,f,c,l,r[d+11],16,1839030562),l=g(l,h,f,c,r[d+14],23,-35309556),c=g(c,l,h,f,r[d+1],4,-1530992060),f=g(f,c,l,h,r[d+4],11,1272893353),h=g(h,f,c,l,r[d+7],16,-155497632),l=g(l,h,f,c,r[d+10],23,-1094730640),c=g(c,l,h,f,r[d+13],4,681279174),f=g(f,c,l,h,r[d+0],11,-358537222),h=g(h,f,c,l,r[d+3],16,-722521979),l=g(l,h,f,c,r[d+6],23,76029189),c=g(c,l,h,f,r[d+9],4,-640364487),f=g(f,c,l,h,r[d+12],11,-421815835),h=g(h,f,c,l,r[d+15],16,530742520),c=m(c,l=g(l,h,f,c,r[d+2],23,-995338651),h,f,r[d+0],6,-198630844),f=m(f,c,l,h,r[d+7],10,1126891415),h=m(h,f,c,l,r[d+14],15,-1416354905),l=m(l,h,f,c,r[d+5],21,-57434055),c=m(c,l,h,f,r[d+12],6,1700485571),f=m(f,c,l,h,r[d+3],10,-1894986606),h=m(h,f,c,l,r[d+10],15,-1051523),l=m(l,h,f,c,r[d+1],21,-2054922799),c=m(c,l,h,f,r[d+8],6,1873313359),f=m(f,c,l,h,r[d+15],10,-30611744),h=m(h,f,c,l,r[d+6],15,-1560198380),l=m(l,h,f,c,r[d+13],21,1309151649),c=m(c,l,h,f,r[d+4],6,-145523070),f=m(f,c,l,h,r[d+11],10,-1120210379),h=m(h,f,c,l,r[d+2],15,718787259),l=m(l,h,f,c,r[d+9],21,-343485551),c=c+b>>>0,l=l+y>>>0,h=h+v>>>0,f=f+w>>>0}return n.endian([c,l,h,f])})._ff=function(t,e,r,n,i,a,s){var o=t+(e&r|~e&n)+(i>>>0)+s;return(o<<a|o>>>32-a)+e},o._gg=function(t,e,r,n,i,a,s){var o=t+(e&n|r&~n)+(i>>>0)+s;return(o<<a|o>>>32-a)+e},o._hh=function(t,e,r,n,i,a,s){var o=t+(e^r^n)+(i>>>0)+s;return(o<<a|o>>>32-a)+e},o._ii=function(t,e,r,n,i,a,s){var o=t+(r^(e|~n))+(i>>>0)+s;return(o<<a|o>>>32-a)+e},o._blocksize=16,o._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(o(t,e));return e&&e.asBytes?r:e&&e.asString?s.bytesToString(r):n.bytesToHex(r)}},37:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=[];r[0]=function(){return function(){}},r[1]=function(t,e){return void 0===e?t:function(r){t(r,e)}};var n=function(){function t(){this.hasHandlers=!1,this._handlers=[],this._contexts=[],this._createDispatcher()}return t.prototype.addHandler=function(t,e){return this.isHandlerAttached(t,e)||(this._handlers.push(t),this._contexts.push(e),this._createDispatcher(),this._updateHasHandlers()),this},t.prototype.removeHandler=function(t,e){var r=this._getHandlerIndex(t,e);return void 0!==r&&(this._handlers.splice(r,1),this._contexts.splice(r,1),this._createDispatcher(),this._updateHasHandlers()),this},t.prototype.isHandlerAttached=function(t,e){return void 0!==this._getHandlerIndex(t,e)},t.prototype._updateHasHandlers=function(){this.hasHandlers=!!this._handlers.length},t.prototype._getHandlerIndex=function(t,e){var r,n=this._handlers.length;for(r=0;r<n&&(this._handlers[r]!==t||this._contexts[r]!==e);r++);return r<n?r:void 0},t.prototype._createDispatcher=function(){var t;this.dispatch=(t=this._handlers.length,r[t]||(r[t]=function(t){for(var e="return function dispatcher"+t+"(payload) {\n",r=[],n=[],i=0;i<t;i++)r.push("cb"+i),n.push("ctx"+i),e+="    cb"+i+"(payload, ctx"+i+");\n";return e+="};",new(Function.bind.apply(Function,[void 0].concat(r.concat(n),[e])))}(t)),r[t]).apply(this,this._handlers.concat(this._contexts))},t}();e.default=n},7819:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(37);e.Event=n.default},7442:(t,e,r)=>{"use strict";r.r(e)},2520:(t,e,r)=>{"use strict";var n="win32"===process.platform,i=r(9539);function a(t,e){for(var r=[],n=0;n<t.length;n++){var i=t[n];i&&"."!==i&&(".."===i?r.length&&".."!==r[r.length-1]?r.pop():e&&r.push(".."):r.push(i))}return r}function s(t){for(var e=t.length-1,r=0;r<=e&&!t[r];r++);for(var n=e;n>=0&&!t[n];n--);return 0===r&&n===e?t:r>n?[]:t.slice(r,n+1)}var o=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,u=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,c={};function l(t){var e=o.exec(t),r=(e[1]||"")+(e[2]||""),n=e[3]||"",i=u.exec(n);return[r,i[1],i[2],i[3]]}function h(t){var e=o.exec(t),r=e[1]||"",n=!!r&&":"!==r[1];return{device:r,isUnc:n,isAbsolute:n||!!e[2],tail:e[3]}}function f(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}c.resolve=function(){for(var t="",e="",r=!1,n=arguments.length-1;n>=-1;n--){var s;if(n>=0?s=arguments[n]:t?(s=process.env["="+t])&&s.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(s=t+"\\"):s=process.cwd(),!i.isString(s))throw new TypeError("Arguments to path.resolve must be strings");if(s){var o=h(s),u=o.device,c=o.isUnc,l=o.isAbsolute,d=o.tail;if((!u||!t||u.toLowerCase()===t.toLowerCase())&&(t||(t=u),r||(e=d+"\\"+e,r=l),t&&r))break}}return c&&(t=f(t)),t+(r?"\\":"")+(e=a(e.split(/[\\\/]+/),!r).join("\\"))||"."},c.normalize=function(t){var e=h(t),r=e.device,n=e.isUnc,i=e.isAbsolute,s=e.tail,o=/[\\\/]$/.test(s);return(s=a(s.split(/[\\\/]+/),!i).join("\\"))||i||(s="."),s&&o&&(s+="\\"),n&&(r=f(r)),r+(i?"\\":"")+s},c.isAbsolute=function(t){return h(t).isAbsolute},c.join=function(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(!i.isString(r))throw new TypeError("Arguments to path.join must be strings");r&&t.push(r)}var n=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(n=n.replace(/^[\\\/]{2,}/,"\\")),c.normalize(n)},c.relative=function(t,e){t=c.resolve(t),e=c.resolve(e);for(var r=t.toLowerCase(),n=e.toLowerCase(),i=s(e.split("\\")),a=s(r.split("\\")),o=s(n.split("\\")),u=Math.min(a.length,o.length),l=u,h=0;h<u;h++)if(a[h]!==o[h]){l=h;break}if(0==l)return e;var f=[];for(h=l;h<a.length;h++)f.push("..");return(f=f.concat(i.slice(l))).join("\\")},c._makeLong=function(t){if(!i.isString(t))return t;if(!t)return"";var e=c.resolve(t);return/^[a-zA-Z]\:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t},c.dirname=function(t){var e=l(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},c.basename=function(t,e){var r=l(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},c.extname=function(t){return l(t)[3]},c.format=function(t){if(!i.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!i.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var r=t.dir,n=t.base||"";return r?r[r.length-1]===c.sep?r+n:r+c.sep+n:n},c.parse=function(t){if(!i.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=l(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},c.sep="\\",c.delimiter=";";var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,_={};function p(t){return d.exec(t).slice(1)}_.resolve=function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var n=r>=0?arguments[r]:process.cwd();if(!i.isString(n))throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,e="/"===n[0])}return(e?"/":"")+(t=a(t.split("/"),!e).join("/"))||"."},_.normalize=function(t){var e=_.isAbsolute(t),r=t&&"/"===t[t.length-1];return(t=a(t.split("/"),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},_.isAbsolute=function(t){return"/"===t.charAt(0)},_.join=function(){for(var t="",e=0;e<arguments.length;e++){var r=arguments[e];if(!i.isString(r))throw new TypeError("Arguments to path.join must be strings");r&&(t+=t?"/"+r:r)}return _.normalize(t)},_.relative=function(t,e){t=_.resolve(t).substr(1),e=_.resolve(e).substr(1);for(var r=s(t.split("/")),n=s(e.split("/")),i=Math.min(r.length,n.length),a=i,o=0;o<i;o++)if(r[o]!==n[o]){a=o;break}var u=[];for(o=a;o<r.length;o++)u.push("..");return(u=u.concat(n.slice(a))).join("/")},_._makeLong=function(t){return t},_.dirname=function(t){var e=p(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},_.basename=function(t,e){var r=p(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},_.extname=function(t){return p(t)[3]},_.format=function(t){if(!i.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!i.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);return(t.dir?t.dir+_.sep:"")+(t.base||"")},_.parse=function(t){if(!i.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=p(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},_.sep="/",_.delimiter=":",t.exports=n?c:_,t.exports.posix=_,t.exports.win32=c},4096:function(t){t.exports=function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?r(Object(i),!0).forEach((function(r){e(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var i={addCSS:!0,thumbWidth:15,watch:!0};function a(t,e){return function(){return Array.from(document.querySelectorAll(e)).includes(this)}.call(t,e)}var s=function(t){return null!=t?t.constructor:null},o=function(t,e){return!!(t&&e&&t instanceof e)},u=function(t){return s(t)===String},c=function(t){return Array.isArray(t)},l=function(t){return o(t,NodeList)},h=u,f=c,d=l,_=function(t){return o(t,Element)},p=function(t){return o(t,Event)},g=function(t){return function(t){return null==t}(t)||(u(t)||c(t)||l(t))&&!t.length||function(t){return s(t)===Object}(t)&&!Object.keys(t).length};return function(){function e(t,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),_(t)?this.element=t:h(t)&&(this.element=document.querySelector(t)),_(this.element)&&g(this.element.rangeTouch)&&(this.config=n({},i,{},r),this.init())}return r=e,o=[{key:"setup",value:function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=null;if(g(t)||h(t)?s=Array.from(document.querySelectorAll(h(t)?t:'input[type="range"]')):_(t)?s=[t]:d(t)?s=Array.from(t):f(t)&&(s=t.filter(_)),g(s))return null;var o=n({},i,{},r);if(h(t)&&o.watch){var u=new MutationObserver((function(r){Array.from(r).forEach((function(r){Array.from(r.addedNodes).forEach((function(r){_(r)&&a(r,t)&&new e(r,o)}))}))}));u.observe(document.body,{childList:!0,subtree:!0})}return s.map((function(t){return new e(t,r)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}],(s=[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(t){var e=this,r=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(t){e.element[r](t,(function(t){return e.set(t)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!p(t))return null;var r,n=t.target,i=t.changedTouches[0],a=parseFloat(n.getAttribute("min"))||0,s=parseFloat(n.getAttribute("max"))||100,o=parseFloat(n.getAttribute("step"))||1,u=n.getBoundingClientRect(),c=100/u.width*(this.config.thumbWidth/2)/100;return 0>(r=100/u.width*(i.clientX-u.left))?r=0:100<r&&(r=100),50>r?r-=(100-2*r)*c:50<r&&(r+=2*(r-50)*c),a+function(t,e){if(1>e){var r=function(t){var e="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(e);return parseFloat(t.toFixed(r))}return Math.round(t/e)*e}(r/100*(s-a),o)}},{key:"set",value:function(t){e.enabled&&p(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(t,e){if(t&&e){var r=new Event(e,{bubbles:!0});t.dispatchEvent(r)}}(t.target,"touchend"===t.type?"change":"input"))}}])&&t(r.prototype,s),o&&t(r,o),e;var r,s,o}()}()},8660:(t,e,r)=>{var n;!function(t){!function(e){var n="object"==typeof r.g?r.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=a(t);function a(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===n.Reflect?n.Reflect=t:i=a(n.Reflect,i),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,o=!a&&!s,u={create:a?function(){return F(Object.create(null))}:s?function(){return F({__proto__:null})}:function(){return F({})},has:o?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:o?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,a)},e.prototype.entries=function(){return new r(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function a(t,e){return e}function s(t,e){return[t,e]}}():Map,f=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new h}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}():Set,d=new(l||"function"!=typeof WeakMap?function(){var t=u.create(),r=n();return function(){function t(){this._key=n()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=n()},t}();function n(){var e;do{e="@@WeakMap@@"+s()}while(u.has(t,e));return t[e]=!0,e}function i(t,n){if(!e.call(t,r)){if(!n)return;Object.defineProperty(t,r,{value:u.create()})}return t[r]}function a(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function s(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):a(new Uint8Array(t),t):a(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<16;++n){var i=e[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}():WeakMap);function _(t,e,r){var n=d.get(t);if(k(n)){if(!r)return;n=new h,d.set(t,n)}var i=n.get(e);if(k(i)){if(!r)return;i=new h,n.set(e,i)}return i}function p(t,e,r){if(g(t,e,r))return!0;var n=D(e);return!x(n)&&p(t,n,r)}function g(t,e,r){var n=_(e,r,!1);return!k(n)&&!!n.has(t)}function m(t,e,r){if(g(t,e,r))return b(t,e,r);var n=D(e);return x(n)?void 0:m(t,n,r)}function b(t,e,r){var n=_(e,r,!1);if(!k(n))return n.get(t)}function y(t,e,r,n){_(r,n,!0).set(t,e)}function v(t,e){var r=w(t,e),n=D(t);if(null===n)return r;var i=v(n,e);if(i.length<=0)return r;if(r.length<=0)return i;for(var a=new f,s=[],o=0,u=r;o<u.length;o++){var c=u[o];a.has(c)||(a.add(c),s.push(c))}for(var l=0,h=i;l<h.length;l++)c=h[l],a.has(c)||(a.add(c),s.push(c));return s}function w(t,e){var r=[],n=_(t,e,!1);if(k(n))return r;for(var a=function(t){var e=R(t,i);if(!I(e))throw new TypeError;var r=e.call(t);if(!E(r))throw new TypeError;return r}(n.keys()),s=0;;){var o=B(a);if(!o)return r.length=s,r;var u=o.value;try{r[s]=u}catch(t){try{O(a)}finally{throw t}}s++}}function A(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function k(t){return void 0===t}function x(t){return null===t}function E(t){return"object"==typeof t?null!==t:"function"==typeof t}function C(t,e){switch(A(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",i=R(t,n);if(void 0!==i){var a=i.call(t,r);if(E(a))throw new TypeError;return a}return function(t,e){if("string"===e){var r=t.toString;if(I(r)&&!E(i=r.call(t)))return i;if(I(n=t.valueOf)&&!E(i=n.call(t)))return i}else{var n;if(I(n=t.valueOf)&&!E(i=n.call(t)))return i;var i,a=t.toString;if(I(a)&&!E(i=a.call(t)))return i}throw new TypeError}(t,"default"===r?"number":r)}function S(t){var e=C(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function T(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function I(t){return"function"==typeof t}function P(t){return"function"==typeof t}function R(t,e){var r=t[e];if(null!=r){if(!I(r))throw new TypeError;return r}}function B(t){var e=t.next();return!e.done&&e}function O(t){var e=t.return;e&&e.call(t)}function D(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var i=n.constructor;return"function"!=typeof i||i===t?e:i}function F(t){return t.__=void 0,delete t.__,t}t("decorate",(function(t,e,r,n){if(k(r)){if(!T(t))throw new TypeError;if(!P(e))throw new TypeError;return function(t,e){for(var r=t.length-1;r>=0;--r){var n=(0,t[r])(e);if(!k(n)&&!x(n)){if(!P(n))throw new TypeError;e=n}}return e}(t,e)}if(!T(t))throw new TypeError;if(!E(e))throw new TypeError;if(!E(n)&&!k(n)&&!x(n))throw new TypeError;return x(n)&&(n=void 0),function(t,e,r,n){for(var i=t.length-1;i>=0;--i){var a=(0,t[i])(e,r,n);if(!k(a)&&!x(a)){if(!E(a))throw new TypeError;n=a}}return n}(t,e,r=S(r),n)})),t("metadata",(function(t,e){return function(r,n){if(!E(r))throw new TypeError;if(!k(n)&&!function(t){switch(A(t)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;y(t,e,r,n)}})),t("defineMetadata",(function(t,e,r,n){if(!E(r))throw new TypeError;return k(n)||(n=S(n)),y(t,e,r,n)})),t("hasMetadata",(function(t,e,r){if(!E(e))throw new TypeError;return k(r)||(r=S(r)),p(t,e,r)})),t("hasOwnMetadata",(function(t,e,r){if(!E(e))throw new TypeError;return k(r)||(r=S(r)),g(t,e,r)})),t("getMetadata",(function(t,e,r){if(!E(e))throw new TypeError;return k(r)||(r=S(r)),m(t,e,r)})),t("getOwnMetadata",(function(t,e,r){if(!E(e))throw new TypeError;return k(r)||(r=S(r)),b(t,e,r)})),t("getMetadataKeys",(function(t,e){if(!E(t))throw new TypeError;return k(e)||(e=S(e)),v(t,e)})),t("getOwnMetadataKeys",(function(t,e){if(!E(t))throw new TypeError;return k(e)||(e=S(e)),w(t,e)})),t("deleteMetadata",(function(t,e,r){if(!E(e))throw new TypeError;k(r)||(r=S(r));var n=_(e,r,!1);if(k(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var i=d.get(e);return i.delete(r),i.size>0||d.delete(e),!0}))}(i)}()}(n||(n={}))},4002:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8318),i=r(4078),a=function(){function t(t,e){void 0===e&&(e={}),this._module=null,this._options=null,this._options=n.__assign({stopAddress:0},e),this._module=i(this._getApi(t,this._options)),this.enableDebug(!1)}return t.prototype.init=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return this._module._set_stop_address(this._options.stopAddress),[2]}))}))},t.prototype.ping=function(){return this._module.ccall("ping","string",[],[])},t.prototype.run=function(t){return this._module._run(t)},t.prototype.abort=function(){this._module._abort_run()},t.prototype.enableDebug=function(t){this._module._enable_debug(t?1:0)},t.prototype.reset=function(){this._module._reset()},t.prototype.readRegister=function(t){if(t<0||t>15)throw new Error("illegal thumb register "+t);return this._module._read_register(t)},t.prototype.writeRegister=function(t,e){if(t<0||t>15)throw new Error("illegal thumb register "+t);this._module._write_register(t,e)},t.prototype._getApi=function(t,e){var r=e.printer||function(t){return console.log("thumbulator: "+t)};return{print:r,printErr:r,trapOnInstructionFetch:e.trapOnInstructionFetch||function(){return 0},trapOnBx32:e.trapOnBx32||function(){return 3},busRead16:t.read16,busRead32:t.read32||function(e){return 65535&t.read16(e)|t.read16(e+2)<<16},busWrite16:t.write16,busWrite32:t.write32||function(e,r){return t.write16(e,65535&r),t.write16(e+2,r>>>16)}}},t}();e.default=a},4078:(t,e,r)=>{var n,i=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){t=void 0!==(t=t||{})?t:{};var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);var a=[],s=function(t,e){throw e},o=!1,u=!1,c=!1,l=!1,h=!1;o="object"==typeof window,u="function"==typeof importScripts,l="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,c=l&&!o&&!u,h=!o&&!c&&!u;var f,d,_,p,g,m="";function b(e){return t.locateFile?t.locateFile(e,m):m+e}c?(m="//",f=function(t,e){var n;return(n=Ot(t))||(p||(p=r(Object(function(){var t=new Error("Cannot find module 'fs'");throw t.code="MODULE_NOT_FOUND",t}()))),g||(g=r(2520)),t=g.normalize(t),n=p.readFileSync(t)),e?n:n.toString()},_=function(t){var e=f(t,!0);return e.buffer||(e=new Uint8Array(e)),S(e.buffer),e},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),a=process.argv.slice(2),process.on("unhandledRejection",Xt),s=function(t){process.exit(t)},t.inspect=function(){return"[Emscripten Module object]"}):h?("undefined"!=typeof read&&(f=function(t){var e=Ot(t);return e?Pt(e):read(t)}),_=function(t){var e;return(e=Ot(t))?e:"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(S("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof scriptArgs?a=scriptArgs:void 0!==arguments&&(a=arguments),"function"==typeof quit&&(s=function(t){quit(t)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(o||u)&&(u?m=self.location.href:document.currentScript&&(m=document.currentScript.src),n&&(m=n),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",f=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var r=Ot(t);if(r)return Pt(r);throw e}},u&&(_=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}catch(e){var r=Ot(t);if(r)return r;throw e}}),d=function(t,e,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){if(200==n.status||0==n.status&&n.response)e(n.response);else{var i=Ot(t);i?e(i.buffer):r()}},n.onerror=r,n.send(null)});var y=t.print||console.log.bind(console),v=t.printErr||console.warn.bind(console);for(e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);i=null,t.arguments&&(a=t.arguments),t.thisProgram&&t.thisProgram,t.quit&&(s=t.quit),new Array(0);var w,A=0,k=function(t){A=t},x=function(){return A},E=8;t.wasmBinary&&t.wasmBinary,t.noExitRuntime&&(w=t.noExitRuntime);var C=!1;function S(t,e){t||Xt("Assertion failed: "+e)}function T(e){var r=t["_"+e];return S(r,"Cannot call unknown function "+e+", make sure it is exported"),r}function I(t,e,r,n,i){var a={string:function(t){var e=0;if(null!=t&&0!==t){var r=1+(t.length<<2);L(t,e=Lt(r),r)}return e},array:function(t){var e=Lt(t.length);return U(t,e),e}},s=T(t),o=[],u=0;if(n)for(var c=0;c<n.length;c++){var l=a[r[c]];l?(0===u&&(u=zt()),o[c]=l(n[c])):o[c]=n[c]}var h=s.apply(null,o);return h=function(t){return"string"===e?j(t):"boolean"===e?Boolean(t):t}(h),0!==u&&Ut(u),h}var P,R,B,O,D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function F(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.subarray&&D)return D.decode(t.subarray(e,i));for(var a="";e<i;){var s=t[e++];if(128&s){var o=63&t[e++];if(192!=(224&s)){var u=63&t[e++];if((s=224==(240&s)?(15&s)<<12|o<<6|u:(7&s)<<18|o<<12|u<<6|63&t[e++])<65536)a+=String.fromCharCode(s);else{var c=s-65536;a+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else a+=String.fromCharCode((31&s)<<6|o)}else a+=String.fromCharCode(s)}return a}function j(t,e){return t?F(B,t,e):""}function M(t,e,r,n){if(!(n>0))return 0;for(var i=r,a=r+n-1,s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++s)),o<=127){if(r>=a)break;e[r++]=o}else if(o<=2047){if(r+1>=a)break;e[r++]=192|o>>6,e[r++]=128|63&o}else if(o<=65535){if(r+2>=a)break;e[r++]=224|o>>12,e[r++]=128|o>>6&63,e[r++]=128|63&o}else{if(r+3>=a)break;e[r++]=240|o>>18,e[r++]=128|o>>12&63,e[r++]=128|o>>6&63,e[r++]=128|63&o}}return e[r]=0,r-i}function L(t,e,r){return M(t,B,e,r)}function U(t,e){R.set(t,e)}function z(e){P=e,t.HEAP8=R=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=O=new Int32Array(e),t.HEAPU8=B=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var $=13920,N=3648,H=t.TOTAL_MEMORY||16777216;function q(e){for(;e.length>0;){var r=e.shift();if("function"!=typeof r){var n=r.func;"number"==typeof n?void 0===r.arg?t.dynCall_v(n):t.dynCall_vi(n,r.arg):n(void 0===r.arg?null:r.arg)}else r()}}H=(P=t.buffer?t.buffer:new ArrayBuffer(H)).byteLength,z(P),O[N>>2]=$;var W=[],V=[],G=[],K=[];function X(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)Z(t.preRun.shift());q(W)}function Y(){q(V)}function J(){q(G)}function Q(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)tt(t.postRun.shift());q(K)}function Z(t){W.unshift(t)}function tt(t){K.unshift(t)}Math.abs,Math.ceil,Math.floor,Math.min;var et=0,rt=null,nt=null;function it(e){et++,t.monitorRunDependencies&&t.monitorRunDependencies(et)}function at(e){if(et--,t.monitorRunDependencies&&t.monitorRunDependencies(et),0==et&&(null!==rt&&(clearInterval(rt),rt=null),nt)){var r=nt;nt=null,r()}}t.preloadedImages={},t.preloadedAudios={};var st=null,ot="data:application/octet-stream;base64,";function ut(t){return String.prototype.startsWith?t.startsWith(ot):0===t.indexOf(ot)}var ct=[function(e){return t.trapOnInstructionFetch(e)},function(e){return t.busRead32(e)},function(e,r){t.busWrite32(e,r)},function(e){return t.busRead16(e)},function(e,r){return t.trapOnBx32(e,r)},function(e,r){t.busWrite16(e,r)}];function lt(t,e,r){return ct[t](e,r)}function ht(t,e){return ct[t](e)}st="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAHkNAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHRodW1idWxhdG9yAHsgcmV0dXJuIE1vZHVsZS5idXNSZWFkMTYoJDApOyB9AHsgcmV0dXJuIE1vZHVsZS5idXNSZWFkMzIoJDApOyB9AHsgTW9kdWxlLmJ1c1dyaXRlMTYoJDAsICQxKTsgfQB7IE1vZHVsZS5idXNXcml0ZTMyKCQwLCAkMSk7IH0AcGMgaGFzIGxzYml0IHNldCAweCUwOFgKAHsgcmV0dXJuIE1vZHVsZS50cmFwT25JbnN0cnVjdGlvbkZldGNoKCQwKTsgfQAtLS0gMHglMDhYOiAweCUwNFggAGFkYyByJXUsciV1CgBhZGRzIHIldSxyJXUsIzB4JVgKAGFkZHMgciV1LCMweCUwMlgKAGFkZHMgciV1LHIldSxyJXUKAGFkZCByJXUsciV1CgBhZGQgcGMsLi4uIHByb2R1Y2VkIGFuIGFybSBhZGRyZXNzIDB4JTA4WCAweCUwOFgKAGFkZCByJXUsUEMsIzB4JTAyWAoAYWRkIHIldSxTUCwjMHglMDJYCgBhZGQgU1AsIzB4JTAyWAoAYW5kcyByJXUsciV1CgBhc3JzIHIldSxyJXUsIzB4JVgKAGFzcnMgciV1LHIldQoAYmVxIDB4JTA4WAoAYm5lIDB4JTA4WAoAYmNzIDB4JTA4WAoAYmNjIDB4JTA4WAoAYm1pIDB4JTA4WAoAYnBsIDB4JTA4WAoAYnZzIDB4JTA4WAoAYnZjIDB4JTA4WAoAYmhpIDB4JTA4WAoAYmxzIDB4JTA4WAoAYmdlIDB4JTA4WAoAYmx0IDB4JTA4WAoAYmd0IDB4JTA4WAoAYmxlIDB4JTA4WAoAQiAweCUwOFgKAGJpY3MgciV1LHIldQoAYmtwdCAweCUwMlgKAGJsIDB4JTA4WAoAYmx4IHIldQoAY2Fubm90IGJyYW5jaCB0byBhcm0gMHglMDhYIDB4JTA0WAoAYnggciV1CgB7IHJldHVybiBNb2R1bGUudHJhcE9uQngzMigkMCwgJDEpOyB9AGNtbnMgciV1LHIldQoAY21wIHIldSwjMHglMDJYCgBjbXBzIHIldSxyJXUKAGNwcyBUT0RPCgBjcHkgciV1LHIldQoAZW9ycyByJXUsciV1CgBsZG1pYSByJXUhLHsAciV1AH0KAGxkciByJXUsW3IldSwjMHglWF0KAGxkciByJXUsW3IldSxyJXVdCgBsZHIgciV1LFtQQysjMHglWF0KAGxkciByJXUsW1NQKyMweCVYXQoAbGRyYiByJXUsW3IldSwjMHglWF0KAGxkcmIgciV1LFtyJXUsciV1XQoAbGRyaCByJXUsW3IldSwjMHglWF0KAGxkcmggciV1LFtyJXUsciV1XQoAbGRyc2IgciV1LFtyJXUsciV1XQoAbGRyc2ggciV1LFtyJXUsciV1XQoAbHNscyByJXUsciV1LCMweCVYCgBsc2xzIHIldSxyJXUKAGxzcnMgciV1LHIldSwjMHglWAoAbHNycyByJXUsciV1CgBtb3ZzIHIldSwjMHglMDJYCgBtb3ZzIHIldSxyJXUKAG1vdiByJXUsciV1CgBtdWxzIHIldSxyJXUKAG12bnMgciV1LHIldQoAbmVncyByJXUsciV1CgBvcnJzIHIldSxyJXUKAHBvcCB7AHBjAHBvcCB7cmN9IHdpdGggYW4gQVJNIGFkZHJlc3MgcGMgMHglMDhYIHBvcHBlZCAweCUwOFgKAHB1c2ggewBscgBwdXNoIHtscn0gd2l0aCBhbiBBUk0gYWRkcmVzcyBwYyAweCUwOFggcG9wcGVkIDB4JTA4WAoAcmV2IHIldSxyJXUKAHJldjE2IHIldSxyJXUKAHJldnNoIHIldSxyJXUKAHJvcnMgciV1LHIldQoAc2JjIHIldSxyJXUKAHNldGVuZCBub3QgaW1wbGVtZW50ZWQKAHN0bWlhIHIldSEsewBzdHIgciV1LFtyJXUsIzB4JVhdCgBzdHIgciV1LFtyJXUsciV1XQoAc3RyIHIldSxbU1AsIzB4JVhdCgBzdHJiIHIldSxbciV1LCMweCVYXQoAc3RyYiByJXUsW3IldSxyJXVdCgBzdHJoIHIldSxbciV1LCMweCVYXQoAc3RyaCByJXUsW3IldSxyJXVdCgBzdWJzIHIldSxyJXUsIzB4JVgKAHN1YnMgciV1LCMweCUwMlgKAHN1YnMgciV1LHIldSxyJXUKAHN1YiBTUCwjMHglMDJYCgBzd2kgMHglMDJYCgAKCnN3aSAweCUwMlgKAHN4dGIgciV1LHIldQoAc3h0aCByJXUsciV1CgB0c3QgciV1LHIldQoAdXh0YiByJXUsciV1CgB1eHRoIHIldSxyJXUKAGludmFsaWQgaW5zdHJ1Y3Rpb24gMHglMDhYIDB4JTA0WAoALSsgICAwWDB4AChudWxsKQAtMFgrMFggMFgtMHgrMHggMHgAaW5mAElORgBuYW4ATkFOAC4=";var ft=3664;function dt(t){return t}function _t(t){return t.replace(/\b__Z[\w\d_]+/g,(function(t){return t==t?t:t+" ["+t+"]"}))}function pt(){var t=new Error;if(!t.stack){try{throw new Error(0)}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()}function gt(){var e=pt();return t.extraStackTrace&&(e+="\n"+t.extraStackTrace()),_t(e)}var mt={buffers:[null,[],[]],printChar:function(t,e){var r=mt.buffers[t];0===e||10===e?((1===t?y:v)(F(r,0)),r.length=0):r.push(e)},varargs:0,get:function(t){return mt.varargs+=4,O[mt.varargs-4>>2]},getStr:function(){return j(mt.get())},get64:function(){var t=mt.get();return mt.get(),t},getZero:function(){mt.get()}};function bt(t,e){mt.varargs=e;try{return mt.getStreamFromFD(),mt.get(),mt.get(),mt.get(),mt.get(),0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Xt(t),-t.errno}}function yt(t,e){mt.varargs=e;try{return mt.getStreamFromFD(),0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Xt(t),-t.errno}}function vt(){var e=t._fflush;e&&e(0);var r=mt.buffers;r[1].length&&mt.printChar(1,10),r[2].length&&mt.printChar(2,10)}function wt(t,e,r,n){try{for(var i=0,a=0;a<r;a++){for(var s=O[e+8*a>>2],o=O[e+(8*a+4)>>2],u=0;u<o;u++)mt.printChar(t,B[s+u]);i+=o}return O[n>>2]=i,0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Xt(t),-t.errno}}function At(){return wt.apply(null,arguments)}function kt(){return R.length}function xt(t){Kt(t)}function Et(t,e,r){B.set(B.subarray(e,e+r),t)}function Ct(e){return t.___errno_location&&(O[t.___errno_location()>>2]=e),e}function St(t){Xt("OOM")}function Tt(t){St()}var It=!1;function Pt(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];n>255&&(It&&S(!1,"Character code "+n+" ("+String.fromCharCode(n)+")  at offset "+r+" not in 0x00-0xFF."),n&=255),e.push(String.fromCharCode(n))}return e.join("")}var Rt="function"==typeof atob?atob:function(t){var e,r,n,i,a,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=o.indexOf(t.charAt(c++))<<2|(i=o.indexOf(t.charAt(c++)))>>4,r=(15&i)<<4|(a=o.indexOf(t.charAt(c++)))>>2,n=(3&a)<<6|(s=o.indexOf(t.charAt(c++))),u+=String.fromCharCode(e),64!==a&&(u+=String.fromCharCode(r)),64!==s&&(u+=String.fromCharCode(n))}while(c<t.length);return u};function Bt(t){if("boolean"==typeof c&&c){var e;try{e=Buffer.from(t,"base64")}catch(r){e=new Buffer(t,"base64")}return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}try{for(var r=Rt(t),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n}catch(t){throw new Error("Converting base64 string to bytes failed.")}}function Ot(t){if(ut(t))return Bt(t.slice(ot.length))}var Dt,Ft={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Float32Array,Float64Array},jt={a:Xt,b:k,c:x,d:Ct,e:bt,f:yt,g:At,h:ht,i:lt,j:kt,k:Et,l:Tt,m:xt,n:wt,o:St,p:dt,q:_t,r:vt,s:pt,t:gt,u:ft,v:N},Mt=function(t,e,r){"use asm";var n=new t.Int8Array(r),i=new t.Int16Array(r),a=new t.Int32Array(r),s=new t.Uint8Array(r),o=new t.Uint16Array(r),u=new t.Float32Array(r),c=new t.Float64Array(r),l=e.u|0,h=e.v|0,f=0,d=0,_=0,p=0,g=0,m=0,b=0,y=0.0,v=t.Math.imul,w=t.Math.clz32,A=e.a,k=e.b,x=e.c,E=e.d,C=e.e,S=e.f,T=e.g,I=e.h,P=e.i,R=e.j,B=e.k,O=e.l,D=e.m,F=e.n,j=e.o,M=e.p,L=e.q,U=e.r,z=e.s,$=e.t,N=3680,H=13920,q=0.0;function W(t){t=t|0;var e=0;e=N;N=N+t|0;N=N+15&-16;return e|0}function V(){return N|0}function G(t){t=t|0;N=t}function K(t,e){t=t|0;e=e|0;N=t;H=e}function X(t){t=t|0;a[712]=t;return}function Y(){return 888}function J(t){t=t|0;var e=0,r=0,n=0,i=0,s=0;a[713]=0;if(!t){i=0;return i|0}e=0;r=0;while(1){s=nt()|0;n=(a[713]|0)!=0;r=(s|0)==0?r:s;e=e+1|0;if(n|(s|0)==0^1)break;if(e>>>0>=t>>>0){e=0;i=6;break}}if((i|0)==6)return e|0;s=n?10:r;return s|0}function Q(){a[713]=1;return}function Z(t){t=t|0;n[3440]=t;return}function tt(t){t=t|0;var e=0,r=0;r=N;N=N+16|0;e=a[2784+((t&15)<<2)>>2]|0;if((t&15|0)!=15){N=r;return e|0}if(e&1|0){t=a[160]|0;a[r>>2]=e;yt(t,1028,r)|0}e=e&-2;N=r;return e|0}function et(t,e){t=t|0;e=e|0;a[2784+((t&15)<<2)>>2]=(t&15|0)==15?e&-2:e;return}function rt(){a[714]=4;a[715]=0;a[716]=0;a[717]=0;a[718]=0;return 0}function nt(){var t=0,e=0,r=0,i=0,s=0,o=0,u=0,c=0,l=0,h=0,f=0,d=0,_=0;_=N;N=N+1232|0;e=a[711]|0;if(e&1|0){d=a[160]|0;a[_>>2]=e;yt(d,1028,_)|0}t=a[712]|0;if(!t){t=I(0,(e&-2)+-2|0)|0;if(t|0){d=t;N=_;return d|0}}else if(((e&-2)+-2|0)==(t|0)){d=20;N=_;return d|0}if((e&-2)>>>0>4026531839&(a[717]|0)!=0){a[717]=0;d=a[709]|0;a[696]=I(1,d|0)|0;a[697]=I(1,d+4|0)|0;a[698]=I(1,d+8|0)|0;a[699]=I(1,d+12|0)|0;a[708]=I(1,d+16|0)|0;a[710]=I(1,d+20|0)|0;r=I(1,d+24|0)|0;a[718]=I(1,d+28|0)|0;a[709]=d+32}else r=e&-2;t=a[714]|0;do{if(t&1){e=a[716]|0;if(!e){a[716]=a[715];a[714]=t|65536;t=t|65536;break}else{a[716]=e+-1;break}}}while(0);if((t&3|0)==3?(t&65536|0)!=0&(a[717]|0)==0:0){i=a[709]|0;e=a[718]|0;t:do{if((i+-4&-268435456|0)==-536870912)switch((i+536813548|0)>>>2|i+536813548<<30|0){case 0:{a[714]=e&65543;if((t&1|0)!=0|(e&1|0)==0)break t;a[716]=a[715];break t}case 1:{a[715]=e&16777215;break t}case 2:{a[716]=e&16777215;break t}case 3:break t;default:break t}else P(2,i+-4|0,e|0)|0}while(0);t:do{if((i+-8&-268435456|0)==-536870912)switch((i+536813544|0)>>>2|i+536813544<<30|0){case 0:{d=a[714]|0;a[714]=r&65543;if((r&1|0)==0|(d&1|0)!=0)break t;a[716]=a[715];break t}case 1:{a[715]=r&16777215;break t}case 2:{a[716]=r&16777215;break t}case 3:break t;default:break t}else P(2,i+-8|0,r|0)|0}while(0);t=a[710]|0;t:do{if((i+-12&-268435456|0)==-536870912)switch((i+536813540|0)>>>2|i+536813540<<30|0){case 0:{d=a[714]|0;a[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;a[716]=a[715];break t}case 1:{a[715]=t&16777215;break t}case 2:{a[716]=t&16777215;break t}case 3:break t;default:break t}else P(2,i+-12|0,t|0)|0}while(0);t=a[708]|0;t:do{if((i+-16&-268435456|0)==-536870912)switch((i+536813536|0)>>>2|i+536813536<<30|0){case 0:{d=a[714]|0;a[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;a[716]=a[715];break t}case 1:{a[715]=t&16777215;break t}case 2:{a[716]=t&16777215;break t}case 3:break t;default:break t}else P(2,i+-16|0,t|0)|0}while(0);t=a[699]|0;t:do{if((i+-20&-268435456|0)==-536870912)switch((i+536813532|0)>>>2|i+536813532<<30|0){case 0:{d=a[714]|0;a[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;a[716]=a[715];break t}case 1:{a[715]=t&16777215;break t}case 2:{a[716]=t&16777215;break t}case 3:break t;default:break t}else P(2,i+-20|0,t|0)|0}while(0);t=a[698]|0;t:do{if((i+-24&-268435456|0)==-536870912)switch((i+536813528|0)>>>2|i+536813528<<30|0){case 0:{d=a[714]|0;a[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;a[716]=a[715];break t}case 1:{a[715]=t&16777215;break t}case 2:{a[716]=t&16777215;break t}case 3:break t;default:break t}else P(2,i+-24|0,t|0)|0}while(0);t=a[697]|0;t:do{if((i+-28&-268435456|0)==-536870912)switch((i+536813524|0)>>>2|i+536813524<<30|0){case 0:{d=a[714]|0;a[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;a[716]=a[715];break t}case 1:{a[715]=t&16777215;break t}case 2:{a[716]=t&16777215;break t}case 3:break t;default:break t}else P(2,i+-28|0,t|0)|0}while(0);t=a[696]|0;t:do{if((i+-32&-268435456|0)==-536870912)switch((i+536813520|0)>>>2|i+536813520<<30|0){case 0:{d=a[714]|0;a[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;a[716]=a[715];break t}case 1:{a[715]=t&16777215;break t}case 2:{a[716]=t&16777215;break t}case 3:break t;default:break t}else P(2,i+-32|0,t|0)|0}while(0);a[709]=i+-32;r=(I(1,60)|0)+2|0;a[710]=-7;a[717]=1}s=r+-2|0;d=I(3,s|0)|0;f=r+2|0;a[711]=f&-2;if(n[3440]|0){h=a[160]|0;a[_+8>>2]=s;a[_+8+4>>2]=d;yt(h,1099,_+8|0)|0}if((d&65472|0)==16704){if(n[3440]|0){f=a[160]|0;a[_+16>>2]=d&7;a[_+16+4>>2]=d>>>3&7;yt(f,1119,_+16|0)|0}e=a[2784+((d&7)<<2)>>2]|0;r=a[2784+((d>>>3&7)<<2)>>2]|0;f=a[718]|0;a[2784+((d&7)<<2)>>2]=r+e+(f>>>29&1);t=(r+e+(f>>>29&1)|0)<0?f|-2147483648:f&2147483647;t=(r+e+(f>>>29&1)|0)==0?t|1073741824:t&-1073741825;a[718]=t;if(!(t&536870912)){d=((r>>>31)+(e>>>31)+(((r&2147483647)+(e&2147483647)|0)>>>31)&2|0)==0?t&-536870913:t|536870912;a[718]=(((r&2147483647)+(e&2147483647)|0)>>>31|0)==(((r>>>31)+(e>>>31)+(((r&2147483647)+(e&2147483647)|0)>>>31)|0)>>>1&1|0)?d&-268435457:d|268435456;d=0;N=_;return d|0}else{f=(r>>>31)+(e>>>31)+(((r&2147483647)+(e&2147483647)+1|0)>>>31)|0;d=(f&2|0)==0?t&-536870913:t|536870912;a[718]=(((r&2147483647)+(e&2147483647)+1|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;N=_;return d|0}}if((d&65024|0)==7168?d>>>6&7|0:0){if(n[3440]|0){f=a[160]|0;a[_+24>>2]=d&7;a[_+24+4>>2]=d>>>3&7;a[_+24+8>>2]=d>>>6&7;yt(f,1132,_+24|0)|0}h=a[2784+((d>>>3&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=h+(d>>>6&7);f=a[718]|0;f=(h+(d>>>6&7)|0)<0?f|-2147483648:f&2147483647;f=(h+(d>>>6&7)|0)==0?f|1073741824:f&-1073741825;f=((((h&2147483647)+(d>>>6&7)|0)>>>31)+(h>>>31)&2|0)==0?f&-536870913:f|536870912;a[718]=(((h&2147483647)+(d>>>6&7)|0)>>>31|0)==(((((h&2147483647)+(d>>>6&7)|0)>>>31)+(h>>>31)|0)>>>1|0)?f&-268435457:f|268435456;d=0;N=_;return d|0}if((d&63488|0)==12288){if(n[3440]|0){f=a[160]|0;a[_+40>>2]=d>>>8&7;a[_+40+4>>2]=d&255;yt(f,1152,_+40|0)|0}h=a[2784+((d>>>8&7)<<2)>>2]|0;a[2784+((d>>>8&7)<<2)>>2]=h+(d&255);f=a[718]|0;f=(h+(d&255)|0)<0?f|-2147483648:f&2147483647;f=(h+(d&255)|0)==0?f|1073741824:f&-1073741825;f=((((h&2147483647)+(d&255)|0)>>>31)+(h>>>31)&2|0)==0?f&-536870913:f|536870912;a[718]=(((h&2147483647)+(d&255)|0)>>>31|0)==(((((h&2147483647)+(d&255)|0)>>>31)+(h>>>31)|0)>>>1|0)?f&-268435457:f|268435456;d=0;N=_;return d|0}if((d&65024|0)==6144){if(n[3440]|0){f=a[160]|0;a[_+48>>2]=d&7;a[_+48+4>>2]=d>>>3&7;a[_+48+8>>2]=d>>>6&7;yt(f,1170,_+48|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]|0;h=a[2784+((d>>>6&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=h+f;d=a[718]|0;d=(h+f|0)<0?d|-2147483648:d&2147483647;d=(h+f|0)==0?d|1073741824:d&-1073741825;d=((h>>>31)+(f>>>31)+(((h&2147483647)+(f&2147483647)|0)>>>31)&2|0)==0?d&-536870913:d|536870912;a[718]=(((h&2147483647)+(f&2147483647)|0)>>>31|0)==(((h>>>31)+(f>>>31)+(((h&2147483647)+(f&2147483647)|0)>>>31)|0)>>>1&1|0)?d&-268435457:d|268435456;d=0;N=_;return d|0}if((d&65280|0)==17408){if(n[3440]|0){h=a[160]|0;a[_+64>>2]=d>>>4&8|d&7;a[_+64+4>>2]=d>>>3&15;yt(h,1188,_+64|0)|0}t=a[2784+((d>>>4&8|d&7)<<2)>>2]|0;if((d>>>4&8|d&7|0)==15){if(t&1|0){h=a[160]|0;a[_+72>>2]=t;yt(h,1028,_+72|0)|0}t=t&-2}e=a[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(e&1|0){h=a[160]|0;a[_+80>>2]=e;yt(h,1028,_+80|0)|0}e=e&-2}t=e+t|0;if((d>>>4&8|d&7|0)!=15){a[2784+((d>>>4&8|d&7)<<2)>>2]=t;d=0;N=_;return d|0}if(!(t&1)){d=a[160]|0;a[_+88>>2]=f;a[_+88+4>>2]=t;yt(d,1201,_+88|0)|0;D(1)}a[711]=t+2&-2;d=0;N=_;return d|0}e=d&63488;switch(e<<16>>16){case-24576:{if(n[3440]|0){f=a[160]|0;a[_+96>>2]=d>>>8&7;a[_+96+4>>2]=d<<2&1020;yt(f,1251,_+96|0)|0}t=a[711]|0;if(t&1|0){f=a[160]|0;a[_+104>>2]=t;yt(f,1028,_+104|0)|0}a[2784+((d>>>8&7)<<2)>>2]=(t&-4)+(d<<2&1020);d=0;N=_;return d|0}case-22528:{if(n[3440]|0){f=a[160]|0;a[_+112>>2]=d>>>8&7;a[_+112+4>>2]=d<<2&1020;yt(f,1271,_+112|0)|0}a[2784+((d>>>8&7)<<2)>>2]=(a[709]|0)+(d<<2&1020);d=0;N=_;return d|0}default:{if((d&65408|0)==45056){if(n[3440]|0){f=a[160]|0;a[_+120>>2]=d<<2&508;yt(f,1291,_+120|0)|0}a[709]=(a[709]|0)+(d<<2&508);d=0;N=_;return d|0}if((d&65472|0)==16384){if(n[3440]|0){f=a[160]|0;a[_+128>>2]=d&7;a[_+128+4>>2]=d>>>3&7;yt(f,1307,_+128|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]&a[2784+((d&7)<<2)>>2];a[2784+((d&7)<<2)>>2]=f;d=a[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;a[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;N=_;return d|0}if((d&63488|0)==4096){if(n[3440]|0){f=a[160]|0;a[_+136>>2]=d&7;a[_+136+4>>2]=d>>>3&7;a[_+136+8>>2]=d>>>6&31;yt(f,1321,_+136|0)|0}e=a[2784+((d>>>3&7)<<2)>>2]|0;do{if(!(d>>>6&31)){t=a[718]|0;if((e|0)<0){a[718]=t|536870912;a[2784+((d&7)<<2)>>2]=-1;t=t|536870912;o=141;break}else{a[718]=t&-536870913;a[2784+((d&7)<<2)>>2]=0;t=t&1610612735;o=143;break}}else{t=a[718]|0;t=(e&1<<(d>>>6&31)+-1|0)==0?t&-536870913:t|536870912;a[718]=t;e=((e|0)<0?-1<<32-(d>>>6&31):0)|e>>>(d>>>6&31);a[2784+((d&7)<<2)>>2]=e;if((e|0)>=0)if(!e){t=t&1073741823;o=143}else t=t&1073741823;else o=141}}while(0);if((o|0)==141)t=t&1073741823|-2147483648;else if((o|0)==143)t=t|1073741824;a[718]=t;d=0;N=_;return d|0}if((d&65472|0)==16640){if(n[3440]|0){f=a[160]|0;a[_+152>>2]=d&7;a[_+152+4>>2]=d>>>3&7;yt(f,1341,_+152|0)|0}e=a[2784+((d&7)<<2)>>2]|0;t=a[2784+((d>>>3&7)<<2)>>2]&255;do{if(t){if(t>>>0<32){o=a[718]|0;o=(1<<t+-1&e|0)==0?o&-536870913:o|536870912;a[718]=o;t=((e|0)<0?-1<<32-t:0)|e>>>t;e=o;o=155;break}t=a[718]|0;if((e|0)<0){a[718]=t|536870912;a[2784+((d&7)<<2)>>2]=-1;t=t|-1610612736;o=156;break}else{a[718]=t&-536870913;a[2784+((d&7)<<2)>>2]=0;t=t&536870911;o=158;break}}else{t=e;e=a[718]|0;o=155}}while(0);do{if((o|0)==155){a[2784+((d&7)<<2)>>2]=t;if((t|0)<0){t=e|-2147483648;o=156;break}if(!t){t=e&2147483647;o=158}else t=e&1073741823}}while(0);if((o|0)==156)t=t&-1073741825;else if((o|0)==158)t=t|1073741824;a[718]=t;d=0;N=_;return d|0}t:do{if((d&61440|0)==53248){i=(((d&128|0)==0?d&255:d|-256)<<1)+f|0;do{switch(d>>>8&15){case 0:{if(n[3440]|0){d=a[160]|0;a[_+160>>2]=i+-1;yt(d,1355,_+160|0)|0}if(!(a[718]&1073741824)){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 1:{if(n[3440]|0){d=a[160]|0;a[_+168>>2]=i+-1;yt(d,1367,_+168|0)|0}if(a[718]&1073741824|0){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 2:{if(n[3440]|0){d=a[160]|0;a[_+176>>2]=i+-1;yt(d,1379,_+176|0)|0}if(!(a[718]&536870912)){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 3:{if(n[3440]|0){d=a[160]|0;a[_+184>>2]=i+-1;yt(d,1391,_+184|0)|0}if(a[718]&536870912|0){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 4:{if(n[3440]|0){d=a[160]|0;a[_+192>>2]=i+-1;yt(d,1403,_+192|0)|0}if((a[718]|0)>=0){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 5:{if(n[3440]|0){d=a[160]|0;a[_+200>>2]=i+-1;yt(d,1415,_+200|0)|0}if((a[718]|0)<0){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 6:{if(n[3440]|0){d=a[160]|0;a[_+208>>2]=i+-1;yt(d,1427,_+208|0)|0}if(!(a[718]&268435456)){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 7:{if(n[3440]|0){d=a[160]|0;a[_+216>>2]=i+-1;yt(d,1439,_+216|0)|0}if(a[718]&268435456|0){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 8:{if(n[3440]|0){d=a[160]|0;a[_+224>>2]=i+-1;yt(d,1451,_+224|0)|0}if((a[718]&1610612736|0)!=536870912){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 9:{if(n[3440]|0){d=a[160]|0;a[_+232>>2]=i+-1;yt(d,1463,_+232|0)|0}if((a[718]&1610612736|0)==536870912){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 10:{if(n[3440]|0){d=a[160]|0;a[_+240>>2]=i+-1;yt(d,1475,_+240|0)|0}t=a[718]&-1879048192;e:do{if((t|0)<0){switch(t|0){case-1879048192:break e;default:t=0}N=_;return t|0}else{switch(t|0){case 0:break e;default:t=0}N=_;return t|0}}while(0);a[711]=i+2&-2;d=0;N=_;return d|0}case 11:{if(n[3440]|0){d=a[160]|0;a[_+248>>2]=i+-1;yt(d,1487,_+248|0)|0}t=a[718]&-1879048192;e:do{if((t|0)<268435456){switch(t|0){case-2147483648:break e;default:t=0}N=_;return t|0}else{switch(t|0){case 268435456:break e;default:t=0}N=_;return t|0}}while(0);a[711]=i+2&-2;d=0;N=_;return d|0}case 12:{if(n[3440]|0){d=a[160]|0;a[_+256>>2]=i+-1;yt(d,1499,_+256|0)|0}d=a[718]|0;if(d&1073741824|0?1:(((d&-1879048192|0)==0?(d&-1879048192|0)==-1879048192?2:1:(d&-1879048192|0)==-1879048192&1)|0)==0){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}case 13:{if(n[3440]|0){d=a[160]|0;a[_+264>>2]=i+-1;yt(d,1511,_+264|0)|0}d=a[718]|0;if((((d&-1879048192|0)==-2147483648?(d&-1879048192|0)==268435456?2:1:(d&-1879048192|0)==268435456&1)|0)==(0-(d>>>30&1)|0)){d=0;N=_;return d|0}a[711]=i+2&-2;d=0;N=_;return d|0}default:break t}}while(0)}}while(0);if((d&63488|0)==57344){t=(((d&1024|0)==0?d&2047:d|-2048)<<1)+f|0;if(n[3440]|0){d=a[160]|0;a[_+272>>2]=t+-1;yt(d,1523,_+272|0)|0}a[711]=t+2&-2;d=0;N=_;return d|0}if((d&65472|0)==17280){if(n[3440]|0){f=a[160]|0;a[_+280>>2]=d&7;a[_+280+4>>2]=d>>>3&7;yt(f,1533,_+280|0)|0}f=a[2784+((d&7)<<2)>>2]&~a[2784+((d>>>3&7)<<2)>>2];a[2784+((d&7)<<2)>>2]=f;d=a[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;a[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;N=_;return d|0}if((d&65280|0)==48640){f=a[160]|0;a[_+288>>2]=d&255;yt(f,1547,_+288|0)|0;d=1;N=_;return d|0}t:do{if((d&57344|0)==57344){if((d&6144)<4096){switch(d&6144){case 2048:break;default:break t}t=(a[710]|0)+(d<<1&4094)&-4|2;if(n[3440]|0){d=a[160]|0;a[_+304>>2]=t+-3;yt(d,1560,_+304|0)|0}a[710]=r|1;a[711]=t;d=0;N=_;return d|0}switch(d&6144){case 4096:{if(n[3440]|0)Mt(10,a[160]|0)|0;a[710]=(((d&1024|0)==0?d&2047:d|1046528)<<12)+f;d=0;N=_;return d|0}case 6144:{t=(a[710]|0)+(d<<1&4094)|0;if(n[3440]|0){d=a[160]|0;a[_+296>>2]=t+-1;yt(d,1560,_+296|0)|0}a[710]=r|1;a[711]=t+2&-2;d=0;N=_;return d|0}default:break t}}}while(0);switch((d&65415)<<16>>16){case 18304:{if(n[3440]|0){h=a[160]|0;a[_+312>>2]=d>>>3&15;yt(h,1571,_+312|0)|0}t=a[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){h=a[160]|0;a[_+320>>2]=t;yt(h,1028,_+320|0)|0}t=t&-2}t=t+2|0;if(!(t&1)){h=a[160]|0;a[_+328>>2]=f;a[_+328+4>>2]=d;yt(h,1580,_+328|0)|0;d=2;N=_;return d|0}else{a[710]=r|1;a[711]=t&-2;d=0;N=_;return d|0}}case 18176:{if(n[3440]|0){f=a[160]|0;a[_+336>>2]=d>>>3&15;yt(f,1616,_+336|0)|0}t=a[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){d=a[160]|0;a[_+344>>2]=t;yt(d,1028,_+344|0)|0}t=t&-2}t=t+2|0;if(t&1|0){a[711]=t&-2;d=0;N=_;return d|0}t=P(4,s|0,t|0)|0;if(t|0){d=t;N=_;return d|0}a[711]=(a[710]|0)+2&-2;d=0;N=_;return d|0}default:{if((d&65472|0)==17088){if(n[3440]|0){f=a[160]|0;a[_+352>>2]=d&7;a[_+352+4>>2]=d>>>3&7;yt(f,1662,_+352|0)|0}f=a[2784+((d&7)<<2)>>2]|0;h=a[2784+((d>>>3&7)<<2)>>2]|0;d=a[718]|0;d=(h+f|0)<0?d|-2147483648:d&2147483647;d=(h+f|0)==0?d|1073741824:d&-1073741825;d=((h>>>31)+(f>>>31)+(((h&2147483647)+(f&2147483647)|0)>>>31)&2|0)==0?d&-536870913:d|536870912;a[718]=(((h&2147483647)+(f&2147483647)|0)>>>31|0)==(((h>>>31)+(f>>>31)+(((h&2147483647)+(f&2147483647)|0)>>>31)|0)>>>1&1|0)?d&-268435457:d|268435456;d=0;N=_;return d|0}if((d&63488|0)==10240){if(n[3440]|0){f=a[160]|0;a[_+360>>2]=d>>>8&7;a[_+360+4>>2]=d&255;yt(f,1676,_+360|0)|0}l=a[2784+((d>>>8&7)<<2)>>2]|0;f=a[718]|0;f=(l-(d&255)|0)<0?f|-2147483648:f&2147483647;f=(l-(d&255)|0)==0?f|1073741824:f&-1073741825;h=(l>>>31)+1+((-2147483648-(d&255)+(l&2147483647)|0)>>>31)|0;f=(h&2|0)==0?f&-536870913:f|536870912;a[718]=((-2147483648-(d&255)+(l&2147483647)|0)>>>31|0)==(h>>>1&1|0)?f&-268435457:f|268435456;d=0;N=_;return d|0}if((d&65472|0)==17024){if(n[3440]|0){f=a[160]|0;a[_+368>>2]=d&7;a[_+368+4>>2]=d>>>3&7;yt(f,1693,_+368|0)|0}l=a[2784+((d&7)<<2)>>2]|0;h=a[2784+((d>>>3&7)<<2)>>2]|0;d=a[718]|0;d=(l-h|0)<0?d|-2147483648:d&2147483647;d=(l-h|0)==0?d|1073741824:d&-1073741825;f=(~h>>>31)+(l>>>31)+(((l&2147483647)+1+(~h&2147483647)|0)>>>31)|0;d=(f&2|0)==0?d&-536870913:d|536870912;a[718]=(((l&2147483647)+1+(~h&2147483647)|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;N=_;return d|0}if((d&65280|0)==17664){if(n[3440]|0){f=a[160]|0;a[_+376>>2]=d>>>4&8|d&7;a[_+376+4>>2]=d>>>3&15;yt(f,1693,_+376|0)|0}t=a[2784+((d>>>4&8|d&7)<<2)>>2]|0;if((d>>>4&8|d&7|0)==15){if(t&1|0){f=a[160]|0;a[_+384>>2]=t;yt(f,1028,_+384|0)|0}e=t&-2}else e=t;t=a[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){d=a[160]|0;a[_+392>>2]=t;yt(d,1028,_+392|0)|0}t=t&-2}f=e-t|0;d=a[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;d=(f|0)==0?d|1073741824:d&-1073741825;f=~t;h=((e&2147483647)+1+(f&2147483647)|0)>>>31;f=(f>>>31)+(e>>>31)+h|0;d=(f&2|0)==0?d&-536870913:d|536870912;a[718]=(h|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;N=_;return d|0}if((d&65512|0)==46688&(n[3440]|0)!=0)ft(1707,9,1,a[160]|0)|0;t=d&65472;switch(t<<16>>16){case 17920:{if(n[3440]|0){f=a[160]|0;a[_+400>>2]=d&7;a[_+400+4>>2]=d>>>3&7;yt(f,1717,_+400|0)|0}a[2784+((d&7)<<2)>>2]=a[2784+((d>>>3&7)<<2)>>2];d=0;N=_;return d|0}case 16448:{if(n[3440]|0){f=a[160]|0;a[_+408>>2]=d&7;a[_+408+4>>2]=d>>>3&7;yt(f,1730,_+408|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]^a[2784+((d&7)<<2)>>2];a[2784+((d&7)<<2)>>2]=f;d=a[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;a[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;N=_;return d|0}default:{t:do{if(e<<16>>16<26624){switch(e<<16>>16){case-14336:break;default:break t}if(!(n[3440]|0))e=d&1;else{e=a[160]|0;a[_+416>>2]=d>>>8&7;yt(e,1744,_+416|0)|0;if(!(d&1))t=0;else{a[_+424>>2]=0;yt(e,1757,_+424|0)|0;t=1}if(d&2){if(t|0)Mt(44,e)|0;a[_+1168>>2]=1;yt(e,1757,_+1168|0)|0;t=t+1|0}if(d&4){if(t|0)Mt(44,e)|0;a[_+1176>>2]=2;yt(e,1757,_+1176|0)|0;t=t+1|0}if(d&8){if(t|0)Mt(44,e)|0;a[_+1184>>2]=3;yt(e,1757,_+1184|0)|0;t=t+1|0}if(d&16){if(t|0)Mt(44,e)|0;a[_+1192>>2]=4;yt(e,1757,_+1192|0)|0;t=t+1|0}if(d&32){if(t|0)Mt(44,e)|0;a[_+1200>>2]=5;yt(e,1757,_+1200|0)|0;t=t+1|0}if(d&64){if(t|0)Mt(44,e)|0;a[_+1208>>2]=6;yt(e,1757,_+1208|0)|0;t=t+1|0}if(d&128|0){if(t|0)Mt(44,e)|0;a[_+1216>>2]=7;yt(e,1757,_+1216|0)|0}ft(1761,2,1,e)|0;e=d&1}t=a[2784+((d>>>8&7)<<2)>>2]|0;if(e){a[696]=I(1,t|0)|0;t=t+4|0}if(d&2){a[697]=I(1,t|0)|0;t=t+4|0}if(d&4){a[698]=I(1,t|0)|0;t=t+4|0}if(d&8){a[699]=I(1,t|0)|0;t=t+4|0}if(d&16){a[700]=I(1,t|0)|0;t=t+4|0}if(d&32){a[701]=I(1,t|0)|0;t=t+4|0}if(d&64){a[702]=I(1,t|0)|0;t=t+4|0}if(d&128){a[703]=I(1,t|0)|0;t=t+4|0}if(1<<(d>>>8&7)&d|0){d=0;N=_;return d|0}a[2784+((d>>>8&7)<<2)>>2]=t;d=0;N=_;return d|0}else{switch(e<<16>>16){case 26624:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+432>>2]=d&7;a[_+432+4>>2]=d>>>3&7;a[_+432+8>>2]=d>>>4&124;yt(f,1764,_+432|0)|0}a[2784+((d&7)<<2)>>2]=I(1,(a[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>4&124)|0)|0;d=0;N=_;return d|0}}while(0);if((d&65024|0)==22528){if(n[3440]|0){f=a[160]|0;a[_+448>>2]=d&7;a[_+448+4>>2]=d>>>3&7;a[_+448+8>>2]=d>>>6&7;yt(f,1785,_+448|0)|0}a[2784+((d&7)<<2)>>2]=I(1,(a[2784+((d>>>6&7)<<2)>>2]|0)+(a[2784+((d>>>3&7)<<2)>>2]|0)|0)|0;d=0;N=_;return d|0}t:do{if(e<<16>>16<18432){switch(e<<16>>16){case-26624:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+480>>2]=d>>>8&7;a[_+480+4>>2]=d<<2&1020;yt(f,1824,_+480|0)|0}a[2784+((d>>>8&7)<<2)>>2]=I(1,(a[709]|0)+(d<<2&1020)|0)|0;d=0;N=_;return d|0}else{if(e<<16>>16>=30720){switch(e<<16>>16){case 30720:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+488>>2]=d&7;a[_+488+4>>2]=d>>>3&7;a[_+488+8>>2]=d>>>6&31;yt(f,1844,_+488|0)|0}h=(a[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>6&31)|0;f=I(3,h&-2|0)|0;a[2784+((d&7)<<2)>>2]=((h&1|0)==0?f:f>>>8)&255;d=0;N=_;return d|0}switch(e<<16>>16){case 18432:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+464>>2]=d>>>8&7;a[_+464+4>>2]=d<<2&1020;yt(f,1804,_+464|0)|0}t=a[711]|0;if(t&1|0){f=a[160]|0;a[_+472>>2]=t;yt(f,1028,_+472|0)|0}a[2784+((d>>>8&7)<<2)>>2]=I(1,(t&-4)+(d<<2&1020)|0)|0;d=0;N=_;return d|0}}while(0);if((d&65024|0)==23552){if(n[3440]|0){f=a[160]|0;a[_+504>>2]=d&7;a[_+504+4>>2]=d>>>3&7;a[_+504+8>>2]=d>>>6&7;yt(f,1866,_+504|0)|0}h=(a[2784+((d>>>6&7)<<2)>>2]|0)+(a[2784+((d>>>3&7)<<2)>>2]|0)|0;f=I(3,h&-2|0)|0;a[2784+((d&7)<<2)>>2]=((h&1|0)==0?f:f>>>8)&255;d=0;N=_;return d|0}if((d&63488|0)==34816){if(n[3440]|0){f=a[160]|0;a[_+520>>2]=d&7;a[_+520+4>>2]=d>>>3&7;a[_+520+8>>2]=d>>>5&62;yt(f,1886,_+520|0)|0}a[2784+((d&7)<<2)>>2]=(I(3,(a[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>5&62)|0)|0)&65535;d=0;N=_;return d|0}switch((d&65024)<<16>>16){case 23040:{if(n[3440]|0){f=a[160]|0;a[_+536>>2]=d&7;a[_+536+4>>2]=d>>>3&7;a[_+536+8>>2]=d>>>6&7;yt(f,1908,_+536|0)|0}a[2784+((d&7)<<2)>>2]=(I(3,(a[2784+((d>>>6&7)<<2)>>2]|0)+(a[2784+((d>>>3&7)<<2)>>2]|0)|0)|0)&65535;d=0;N=_;return d|0}case 22016:{if(n[3440]|0){f=a[160]|0;a[_+552>>2]=d&7;a[_+552+4>>2]=d>>>3&7;a[_+552+8>>2]=d>>>6&7;yt(f,1928,_+552|0)|0}h=(a[2784+((d>>>6&7)<<2)>>2]|0)+(a[2784+((d>>>3&7)<<2)>>2]|0)|0;f=I(3,h&-2|0)|0;f=(h&1|0)==0?f:f>>>8;a[2784+((d&7)<<2)>>2]=(f&128|0)==0?f&255:f|-256;d=0;N=_;return d|0}case 24064:{if(n[3440]|0){f=a[160]|0;a[_+568>>2]=d&7;a[_+568+4>>2]=d>>>3&7;a[_+568+8>>2]=d>>>6&7;yt(f,1949,_+568|0)|0}f=I(3,(a[2784+((d>>>6&7)<<2)>>2]|0)+(a[2784+((d>>>3&7)<<2)>>2]|0)|0)|0;a[2784+((d&7)<<2)>>2]=(f&32768|0)==0?f&65535:f|-65536;d=0;N=_;return d|0}default:{if(!(d&63488)){if(n[3440]|0){f=a[160]|0;a[_+584>>2]=d&7;a[_+584+4>>2]=d>>>3&7;a[_+584+8>>2]=d>>>6&31;yt(f,1970,_+584|0)|0}t=a[2784+((d>>>3&7)<<2)>>2]|0;if(!(d>>>6&31))e=a[718]|0;else{e=a[718]|0;e=(t&1<<32-(d>>>6&31)|0)==0?e&-536870913:e|536870912;a[718]=e;t=t<<(d>>>6&31)}a[2784+((d&7)<<2)>>2]=t;d=(t|0)<0?e|-2147483648:e&2147483647;a[718]=(t|0)==0?d|1073741824:d&-1073741825;d=0;N=_;return d|0}if((d&65472|0)==16512){if(n[3440]|0){f=a[160]|0;a[_+600>>2]=d&7;a[_+600+4>>2]=d>>>3&7;yt(f,1990,_+600|0)|0}t=a[2784+((d&7)<<2)>>2]|0;e=a[2784+((d>>>3&7)<<2)>>2]&255;do{if(!e){e=a[718]|0;o=357}else{if(e>>>0<32){o=a[718]|0;o=(1<<32-e&t|0)==0?o&-536870913:o|536870912;a[718]=o;t=t<<e;e=o;o=357;break}if((e|0)==32){f=a[718]|0;t=(t&1|0)==0?f&-536870913:f|536870912}else t=a[718]&-536870913;a[718]=t;a[2784+((d&7)<<2)>>2]=0;t=t&1073741823;o=360}}while(0);do{if((o|0)==357){a[2784+((d&7)<<2)>>2]=t;if((t|0)>=0)if(!t){t=e&2147483647;o=360;break}else{t=e&1073741823;break}else{t=e&1073741823|-2147483648;break}}}while(0);if((o|0)==360)t=t|1073741824;a[718]=t;d=0;N=_;return d|0}if((d&63488|0)==2048){if(n[3440]|0){f=a[160]|0;a[_+608>>2]=d&7;a[_+608+4>>2]=d>>>3&7;a[_+608+8>>2]=d>>>6&31;yt(f,2004,_+608|0)|0}t=a[2784+((d>>>3&7)<<2)>>2]|0;do{if(d>>>6&31){e=a[718]|0;e=(t&1<<(d>>>6&31)+-1|0)==0?e&-536870913:e|536870912;a[718]=e;a[2784+((d&7)<<2)>>2]=t>>>(d>>>6&31);if((t>>>(d>>>6&31)|0)>=0)if(!(t>>>(d>>>6&31))){t=e&1073741823;o=370;break}else{t=e&1073741823;break}else{t=e&1073741823|-2147483648;break}}else{o=a[718]|0;t=(t|0)>-1?o&-536870913:o|536870912;a[718]=t;a[2784+((d&7)<<2)>>2]=0;t=t&2147483647;o=370}}while(0);if((o|0)==370)t=t|1073741824;a[718]=t;d=0;N=_;return d|0}if((d&65472|0)==16576){if(n[3440]|0){f=a[160]|0;a[_+624>>2]=d&7;a[_+624+4>>2]=d>>>3&7;yt(f,2024,_+624|0)|0}t=a[2784+((d&7)<<2)>>2]|0;e=a[2784+((d>>>3&7)<<2)>>2]&255;do{if(!e){e=a[718]|0;o=383}else{if(e>>>0<32){o=a[718]|0;o=(1<<e+-1&t|0)==0?o&-536870913:o|536870912;a[718]=o;t=t>>>e;e=o;o=383;break}if((e|0)==32){f=a[718]|0;t=(t|0)>-1?f&-536870913:f|536870912}else t=a[718]&-536870913;a[718]=t;a[2784+((d&7)<<2)>>2]=0;t=t&1073741823;o=386}}while(0);do{if((o|0)==383){a[2784+((d&7)<<2)>>2]=t;if((t|0)>=0)if(!t){t=e&2147483647;o=386;break}else{t=e&1073741823;break}else{t=e&1073741823|-2147483648;break}}}while(0);if((o|0)==386)t=t|1073741824;a[718]=t;d=0;N=_;return d|0}if((d&63488|0)==8192){if(n[3440]|0){f=a[160]|0;a[_+632>>2]=d>>>8&7;a[_+632+4>>2]=d&255;yt(f,2038,_+632|0)|0}a[2784+((d>>>8&7)<<2)>>2]=d&255;f=a[718]&1073741823;a[718]=(d&255|0)==0?f|1073741824:f;d=0;N=_;return d|0}if((d&65472|0)==7168){if(n[3440]|0){f=a[160]|0;a[_+640>>2]=d&7;a[_+640+4>>2]=d>>>3&7;yt(f,2056,_+640|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=f;d=a[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;a[718]=((f|0)==0?d|1073741824:d&-1879048193)&-805306369;d=0;N=_;return d|0}if((d&65280|0)==17920){if(n[3440]|0){f=a[160]|0;a[_+648>>2]=d>>>4&8|d&7;a[_+648+4>>2]=d>>>3&15;yt(f,2070,_+648|0)|0}t=a[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){f=a[160]|0;a[_+656>>2]=t;yt(f,1028,_+656|0)|0}t=t&-2}if((d>>>4&8|d&7|0)==15){a[711]=t+2&-2;d=0;N=_;return d|0}else{a[2784+((d>>>4&8|d&7)<<2)>>2]=t;d=0;N=_;return d|0}}switch(((d&65472)+-16960|0)>>>6&67108863|0){case 4:{if(n[3440]|0){f=a[160]|0;a[_+664>>2]=d&7;a[_+664+4>>2]=d>>>3&7;yt(f,2083,_+664|0)|0}f=v(a[2784+((d>>>3&7)<<2)>>2]|0,a[2784+((d&7)<<2)>>2]|0)|0;a[2784+((d&7)<<2)>>2]=f;d=a[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;a[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;N=_;return d|0}case 6:{if(n[3440]|0){f=a[160]|0;a[_+672>>2]=d&7;a[_+672+4>>2]=d>>>3&7;yt(f,2097,_+672|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=~f;d=a[718]|0;d=(f|0)>-1?d|-2147483648:d&2147483647;a[718]=(f|0)==-1?d|1073741824:d&-1073741825;d=0;N=_;return d|0}case 0:{if(n[3440]|0){f=a[160]|0;a[_+680>>2]=d&7;a[_+680+4>>2]=d>>>3&7;yt(f,2111,_+680|0)|0}h=a[2784+((d>>>3&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=0-h;d=a[718]|0;d=(0-h|0)<0?d|-2147483648:d&2147483647;d=(h|0)==0?d|1073741824:d&-1073741825;f=(((~h&2147483647)+1|0)>>>31)+(~h>>>31)|0;d=(f&2|0)==0?d&-536870913:d|536870912;a[718]=(((~h&2147483647)+1|0)>>>31|0)==(f>>>1|0)?d&-268435457:d|268435456;d=0;N=_;return d|0}case 3:{if(n[3440]|0){f=a[160]|0;a[_+688>>2]=d&7;a[_+688+4>>2]=d>>>3&7;yt(f,2125,_+688|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]|a[2784+((d&7)<<2)>>2];a[2784+((d&7)<<2)>>2]=f;d=a[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;a[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;N=_;return d|0}default:switch((d&65024)<<16>>16){case-17408:{if(!(n[3440]|0))e=d&1;else{e=a[160]|0;ft(2139,5,1,e)|0;if(!(d&1))t=0;else{a[_+696>>2]=0;yt(e,1757,_+696|0)|0;t=1}if(d&2){if(t|0)Mt(44,e)|0;a[_+1056>>2]=1;yt(e,1757,_+1056|0)|0;t=t+1|0}if(d&4){if(t|0)Mt(44,e)|0;a[_+1064>>2]=2;yt(e,1757,_+1064|0)|0;t=t+1|0}if(d&8){if(t|0)Mt(44,e)|0;a[_+1072>>2]=3;yt(e,1757,_+1072|0)|0;t=t+1|0}if(d&16){if(t|0)Mt(44,e)|0;a[_+1080>>2]=4;yt(e,1757,_+1080|0)|0;t=t+1|0}if(d&32){if(t|0)Mt(44,e)|0;a[_+1088>>2]=5;yt(e,1757,_+1088|0)|0;t=t+1|0}if(d&64){if(t|0)Mt(44,e)|0;a[_+1096>>2]=6;yt(e,1757,_+1096|0)|0;t=t+1|0}if(d&128){if(t|0)Mt(44,e)|0;a[_+1104>>2]=7;yt(e,1757,_+1104|0)|0;t=t+1|0}if(d&256|0){if(t|0)Mt(44,e)|0;ft(2145,2,1,e)|0}ft(1761,2,1,e)|0;e=d&1}t=a[709]|0;if(e){a[696]=I(1,t|0)|0;t=t+4|0}if(d&2){a[697]=I(1,t|0)|0;t=t+4|0}if(d&4){a[698]=I(1,t|0)|0;t=t+4|0}if(d&8){a[699]=I(1,t|0)|0;t=t+4|0}if(d&16){a[700]=I(1,t|0)|0;t=t+4|0}if(d&32){a[701]=I(1,t|0)|0;t=t+4|0}if(d&64){a[702]=I(1,t|0)|0;t=t+4|0}if(d&128){a[703]=I(1,t|0)|0;t=t+4|0}if(d&256){e=I(1,t|0)|0;if(!(e&1)){d=a[160]|0;a[_+704>>2]=f;a[_+704+4>>2]=e;yt(d,2148,_+704|0)|0;e=e&-2}a[711]=e+2&-2;t=t+4|0}a[709]=t;d=0;N=_;return d|0}case-19456:{h=a[160]|0;if(!(n[3440]|0)){t=d&2;e=d&4;r=d&8;i=d&16;s=d&32;o=d&64;u=d&128;l=d&256;c=d&1}else{ft(2202,6,1,h)|0;if(!(d&1))t=0;else{a[_+712>>2]=0;yt(h,1757,_+712|0)|0;t=1}if(d&2){if(t|0)Mt(44,h)|0;a[_+1112>>2]=1;yt(h,1757,_+1112|0)|0;t=t+1|0}if(d&4){if(t|0)Mt(44,h)|0;a[_+1120>>2]=2;yt(h,1757,_+1120|0)|0;t=t+1|0}if(d&8){if(t|0)Mt(44,h)|0;a[_+1128>>2]=3;yt(h,1757,_+1128|0)|0;t=t+1|0}if(d&16){if(t|0)Mt(44,h)|0;a[_+1136>>2]=4;yt(h,1757,_+1136|0)|0;t=t+1|0}if(d&32){if(t|0)Mt(44,h)|0;a[_+1144>>2]=5;yt(h,1757,_+1144|0)|0;t=t+1|0}if(d&64){if(t|0)Mt(44,h)|0;a[_+1152>>2]=6;yt(h,1757,_+1152|0)|0;t=t+1|0}if(d&128){if(t|0)Mt(44,h)|0;a[_+1160>>2]=7;yt(h,1757,_+1160|0)|0;t=t+1|0}if(d&256|0){if(t|0)Mt(44,h)|0;ft(2209,2,1,h)|0}ft(1761,2,1,h)|0;t=d&2;e=d&4;r=d&8;i=d&16;s=d&32;o=d&64;u=d&128;l=d&256;c=d&1}s=(a[709]|0)-(c+(t>>>1)+(e>>>2)+(r>>>3)+(i>>>4)+(s>>>5)+(o>>>6)+(u>>>7)+(l>>>8)<<2)|0;t=s;r=0;i=1;while(1){if(!(i&d))e=t;else{e=a[2784+(r<<2)>>2]|0;t:do{if((t&-268435456|0)==-536870912){c=t+536813552|0;switch(c>>>2|c<<30|0){case 0:{c=a[714]|0;a[714]=e&65543;if((e&1|0)==0|(c&1|0)!=0)break t;a[716]=a[715];break t}case 1:{a[715]=e&16777215;break t}case 2:{a[716]=e&16777215;break t}case 3:break t;default:break t}}else P(2,t|0,e|0)|0}while(0);e=t+4|0}r=r+1|0;if((r|0)==8)break;else{t=e;i=i<<1&254}}do{if(l|0){t=a[710]|0;t:do{if((e&-268435456|0)==-536870912){d=e+536813552|0;switch(d>>>2|d<<30|0){case 0:{d=a[714]|0;a[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;a[716]=a[715];break t}case 1:{a[715]=t&16777215;break t}case 2:{a[716]=t&16777215;break t}case 3:break t;default:break t}}else P(2,e|0,t|0)|0}while(0);if(t&1|0)break;a[_+720>>2]=f;a[_+720+4>>2]=t;yt(h,2212,_+720|0)|0}}while(0);a[709]=s;d=0;N=_;return d|0}default:{t:do{if(t<<16>>16<-17728)switch(t<<16>>16){case-17920:{if(n[3440]|0){f=a[160]|0;a[_+728>>2]=d&7;a[_+728+4>>2]=d>>>3&7;yt(f,2267,_+728|0)|0}a[2784+((d&7)<<2)>>2]=Xt(a[2784+((d>>>3&7)<<2)>>2]|0)|0;d=0;N=_;return d|0}case-17856:{if(n[3440]|0){f=a[160]|0;a[_+736>>2]=d&7;a[_+736+4>>2]=d>>>3&7;yt(f,2280,_+736|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=f<<8&65280|f>>>8&255|f>>>16<<24|f>>>24<<16;d=0;N=_;return d|0}default:break t}else{if(t<<16>>16<16768){switch(t<<16>>16){case-17728:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+744>>2]=d&7;a[_+744+4>>2]=d>>>3&7;yt(f,2295,_+744|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=(f&128|0)==0?f<<8&65280|f>>>8&255:f<<8&65280|f>>>8&255|-65536;d=0;N=_;return d|0}switch(t<<16>>16){case 16832:break;case 16768:{if(n[3440]|0){f=a[160]|0;a[_+760>>2]=d&7;a[_+760+4>>2]=d>>>3&7;yt(f,2324,_+760|0)|0}e=a[2784+((d&7)<<2)>>2]|0;r=a[2784+((d>>>3&7)<<2)>>2]|0;f=a[718]|0;a[2784+((d&7)<<2)>>2]=e-r+-1+(f>>>29&1);t=(e-r+-1+(f>>>29&1)|0)<0?f|-2147483648:f&2147483647;t=(e-r+-1+(f>>>29&1)|0)==0?t|1073741824:t&-1073741825;a[718]=t;if(!(t&536870912)){f=(~r>>>31)+(e>>>31)+(((~r&2147483647)+(e&2147483647)|0)>>>31)|0;d=(f&2|0)==0?t&-536870913:t|536870912;a[718]=(((~r&2147483647)+(e&2147483647)|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;N=_;return d|0}else{f=(~r>>>31)+(e>>>31)+(((~r&2147483647)+(e&2147483647)+1|0)>>>31)|0;d=(f&2|0)==0?t&-536870913:t|536870912;a[718]=(((~r&2147483647)+(e&2147483647)+1|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;N=_;return d|0}}default:break t}if(n[3440]|0){f=a[160]|0;a[_+752>>2]=d&7;a[_+752+4>>2]=d>>>3&7;yt(f,2310,_+752|0)|0}t=a[2784+((d&7)<<2)>>2]|0;e=a[2784+((d>>>3&7)<<2)>>2]|0;do{if(e&255)if(!(e&31)){e=a[718]|0;e=(t|0)>-1?e&-536870913:e|536870912;a[718]=e;break}else{f=a[718]|0;f=(1<<(e&31)+-1&t|0)==0?f&-536870913:f|536870912;a[718]=f;t=t<<32-(e&31)|t>>>(e&31);e=f;break}else e=a[718]|0}while(0);a[2784+((d&7)<<2)>>2]=t;d=(t|0)<0?e|-2147483648:e&2147483647;a[718]=(t|0)==0?d|1073741824:d&-1073741825;d=0;N=_;return d|0}}while(0);if((d&65527|0)==46672){ft(2337,23,1,a[160]|0)|0;d=1;N=_;return d|0}t:do{if(e<<16>>16<24576){switch(e<<16>>16){case-16384:break;default:break t}if(n[3440]|0){e=a[160]|0;a[_+768>>2]=d>>>8&7;yt(e,2361,_+768|0)|0;if(!(d&1))t=0;else{a[_+776>>2]=0;yt(e,1757,_+776|0)|0;t=1}if(d&2){if(t|0)Mt(44,e)|0;a[_+1e3>>2]=1;yt(e,1757,_+1e3|0)|0;t=t+1|0}if(d&4){if(t|0)Mt(44,e)|0;a[_+1008>>2]=2;yt(e,1757,_+1008|0)|0;t=t+1|0}if(d&8){if(t|0)Mt(44,e)|0;a[_+1016>>2]=3;yt(e,1757,_+1016|0)|0;t=t+1|0}if(d&16){if(t|0)Mt(44,e)|0;a[_+1024>>2]=4;yt(e,1757,_+1024|0)|0;t=t+1|0}if(d&32){if(t|0)Mt(44,e)|0;a[_+1032>>2]=5;yt(e,1757,_+1032|0)|0;t=t+1|0}if(d&64){if(t|0)Mt(44,e)|0;a[_+1040>>2]=6;yt(e,1757,_+1040|0)|0;t=t+1|0}if(d&128|0){if(t|0)Mt(44,e)|0;a[_+1048>>2]=7;yt(e,1757,_+1048|0)|0}ft(1761,2,1,e)|0}r=1;i=0;t=a[2784+((d>>>8&7)<<2)>>2]|0;while(1){if(r&d){e=a[2784+(i<<2)>>2]|0;e:do{if((t&-268435456|0)==-536870912){f=t+536813552|0;switch(f>>>2|f<<30|0){case 0:{f=a[714]|0;a[714]=e&65543;if((e&1|0)==0|(f&1|0)!=0)break e;a[716]=a[715];break e}case 1:{a[715]=e&16777215;break e}case 2:{a[716]=e&16777215;break e}case 3:break e;default:break e}}else P(2,t|0,e|0)|0}while(0);t=t+4|0}i=i+1|0;if((i|0)==8)break;else r=r<<1&254}a[2784+((d>>>8&7)<<2)>>2]=t;d=0;N=_;return d|0}else{switch(e<<16>>16){case 24576:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+784>>2]=d&7;a[_+784+4>>2]=d>>>3&7;a[_+784+8>>2]=d>>>4&124;yt(f,2374,_+784|0)|0}e=(a[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>4&124)|0;t=a[2784+((d&7)<<2)>>2]|0;if((e&-268435456|0)!=-536870912){P(2,e|0,t|0)|0;d=0;N=_;return d|0}switch((e+536813552|0)>>>2|e+536813552<<30|0){case 0:{d=a[714]|0;a[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0){d=0;N=_;return d|0}a[716]=a[715];d=0;N=_;return d|0}case 1:{a[715]=t&16777215;d=0;N=_;return d|0}case 2:{a[716]=t&16777215;d=0;N=_;return d|0}case 3:{d=0;N=_;return d|0}default:{d=0;N=_;return d|0}}}}while(0);if((d&65024|0)==20480){if(n[3440]|0){f=a[160]|0;a[_+800>>2]=d&7;a[_+800+4>>2]=d>>>3&7;a[_+800+8>>2]=d>>>6&7;yt(f,2395,_+800|0)|0}e=(a[2784+((d>>>6&7)<<2)>>2]|0)+(a[2784+((d>>>3&7)<<2)>>2]|0)|0;t=a[2784+((d&7)<<2)>>2]|0;if((e&-268435456|0)!=-536870912){P(2,e|0,t|0)|0;d=0;N=_;return d|0}switch((e+536813552|0)>>>2|e+536813552<<30|0){case 0:{d=a[714]|0;a[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0){d=0;N=_;return d|0}a[716]=a[715];d=0;N=_;return d|0}case 1:{a[715]=t&16777215;d=0;N=_;return d|0}case 2:{a[716]=t&16777215;d=0;N=_;return d|0}case 3:{d=0;N=_;return d|0}default:{d=0;N=_;return d|0}}}t:do{if(e<<16>>16<28672){switch(e<<16>>16){case-28672:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+816>>2]=d>>>8&7;a[_+816+4>>2]=d<<2&1020;yt(f,2414,_+816|0)|0}e=(a[709]|0)+(d<<2&1020)|0;t=a[2784+((d>>>8&7)<<2)>>2]|0;if((e&-268435456|0)!=-536870912){P(2,e|0,t|0)|0;d=0;N=_;return d|0}switch((e+536813552|0)>>>2|e+536813552<<30|0){case 0:{d=a[714]|0;a[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0){d=0;N=_;return d|0}a[716]=a[715];d=0;N=_;return d|0}case 1:{a[715]=t&16777215;d=0;N=_;return d|0}case 2:{a[716]=t&16777215;d=0;N=_;return d|0}case 3:{d=0;N=_;return d|0}default:{d=0;N=_;return d|0}}}else{switch(e<<16>>16){case 28672:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+824>>2]=d&7;a[_+824+4>>2]=d>>>3&7;a[_+824+8>>2]=d>>>6&31;yt(f,2434,_+824|0)|0}r=(a[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>6&31)|0;t=a[2784+((d&7)<<2)>>2]|0;e=I(3,r&-2|0)|0;if(!(r&1))t=e&65280|t&255;else t=e&255|t<<8;P(5,r&-2|0,t&65535|0)|0;d=0;N=_;return d|0}}while(0);if((d&65024|0)==21504){if(n[3440]|0){f=a[160]|0;a[_+840>>2]=d&7;a[_+840+4>>2]=d>>>3&7;a[_+840+8>>2]=d>>>6&7;yt(f,2456,_+840|0)|0}r=(a[2784+((d>>>6&7)<<2)>>2]|0)+(a[2784+((d>>>3&7)<<2)>>2]|0)|0;t=a[2784+((d&7)<<2)>>2]|0;e=I(3,r&-2|0)|0;if(!(r&1))t=e&65280|t&255;else t=e&255|t<<8;P(5,r&-2|0,t&65535|0)|0;d=0;N=_;return d|0}if((d&63488|0)==32768){if(n[3440]|0){f=a[160]|0;a[_+856>>2]=d&7;a[_+856+4>>2]=d>>>3&7;a[_+856+8>>2]=d>>>5&62;yt(f,2476,_+856|0)|0}P(5,(a[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>5&62)|0,a[2784+((d&7)<<2)>>2]&65535|0)|0;d=0;N=_;return d|0}t:do{if((d&65024)<<16>>16<20992){switch((d&65024)<<16>>16){case 7680:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+888>>2]=d&7;a[_+888+4>>2]=d>>>3&7;a[_+888+8>>2]=d>>>6&7;yt(f,2518,_+888|0)|0}l=a[2784+((d>>>3&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=l-(d>>>6&7);f=a[718]|0;f=(l-(d>>>6&7)|0)<0?f|-2147483648:f&2147483647;f=(l-(d>>>6&7)|0)==0?f|1073741824:f&-1073741825;h=(l>>>31)+1+((-2147483648-(d>>>6&7)+(l&2147483647)|0)>>>31)|0;f=(h&2|0)==0?f&-536870913:f|536870912;a[718]=((-2147483648-(d>>>6&7)+(l&2147483647)|0)>>>31|0)==(h>>>1&1|0)?f&-268435457:f|268435456;d=0;N=_;return d|0}else{switch((d&65024)<<16>>16){case 20992:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+872>>2]=d&7;a[_+872+4>>2]=d>>>3&7;a[_+872+8>>2]=d>>>6&7;yt(f,2498,_+872|0)|0}P(5,(a[2784+((d>>>6&7)<<2)>>2]|0)+(a[2784+((d>>>3&7)<<2)>>2]|0)|0,a[2784+((d&7)<<2)>>2]&65535|0)|0;d=0;N=_;return d|0}}while(0);if((d&63488|0)==14336){if(n[3440]|0){f=a[160]|0;a[_+904>>2]=d>>>8&7;a[_+904+4>>2]=d&255;yt(f,2538,_+904|0)|0}l=a[2784+((d>>>8&7)<<2)>>2]|0;a[2784+((d>>>8&7)<<2)>>2]=l-(d&255);f=a[718]|0;f=(l-(d&255)|0)<0?f|-2147483648:f&2147483647;f=(l-(d&255)|0)==0?f|1073741824:f&-1073741825;h=(l>>>31)+1+((-2147483648-(d&255)+(l&2147483647)|0)>>>31)|0;f=(h&2|0)==0?f&-536870913:f|536870912;a[718]=((-2147483648-(d&255)+(l&2147483647)|0)>>>31|0)==(h>>>1&1|0)?f&-268435457:f|268435456;d=0;N=_;return d|0}if((d&65024|0)==6656){if(n[3440]|0){f=a[160]|0;a[_+912>>2]=d&7;a[_+912+4>>2]=d>>>3&7;a[_+912+8>>2]=d>>>6&7;yt(f,2556,_+912|0)|0}l=a[2784+((d>>>3&7)<<2)>>2]|0;h=a[2784+((d>>>6&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=l-h;d=a[718]|0;d=(l-h|0)<0?d|-2147483648:d&2147483647;d=(l-h|0)==0?d|1073741824:d&-1073741825;f=(~h>>>31)+(l>>>31)+(((l&2147483647)+1+(~h&2147483647)|0)>>>31)|0;d=(f&2|0)==0?d&-536870913:d|536870912;a[718]=(((l&2147483647)+1+(~h&2147483647)|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;N=_;return d|0}if((d&65408|0)==45184){if(n[3440]|0){f=a[160]|0;a[_+928>>2]=d<<2&508;yt(f,2574,_+928|0)|0}a[709]=(a[709]|0)-(d<<2&508);d=0;N=_;return d|0}if((d&65280|0)==57088){if(n[3440]|0){f=a[160]|0;a[_+936>>2]=d&255;yt(f,2590,_+936|0)|0}if((d&255|0)==204){a[696]=a[718];d=0;N=_;return d|0}else{f=a[160]|0;a[_+944>>2]=d&255;yt(f,2602,_+944|0)|0;d=1;N=_;return d|0}}t:do{if(t<<16>>16>=-19840){if(t<<16>>16<-19776){switch(t<<16>>16){case-19840:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+984>>2]=d&7;a[_+984+4>>2]=d>>>3&7;yt(f,2671,_+984|0)|0}a[2784+((d&7)<<2)>>2]=a[2784+((d>>>3&7)<<2)>>2]&65535;d=0;N=_;return d|0}if(t<<16>>16<16896){switch(t<<16>>16){case-19776:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+976>>2]=d&7;a[_+976+4>>2]=d>>>3&7;yt(f,2657,_+976|0)|0}a[2784+((d&7)<<2)>>2]=a[2784+((d>>>3&7)<<2)>>2]&255;d=0;N=_;return d|0}else{switch(t<<16>>16){case 16896:break;default:break t}if(n[3440]|0){f=a[160]|0;a[_+968>>2]=d&7;a[_+968+4>>2]=d>>>3&7;yt(f,2644,_+968|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]&a[2784+((d&7)<<2)>>2];d=a[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;a[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;N=_;return d|0}}else switch(t<<16>>16){case-19904:{if(n[3440]|0){f=a[160]|0;a[_+952>>2]=d&7;a[_+952+4>>2]=d>>>3&7;yt(f,2616,_+952|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=(f&128|0)==0?f&255:f|-256;d=0;N=_;return d|0}case-19968:{if(n[3440]|0){f=a[160]|0;a[_+960>>2]=d&7;a[_+960+4>>2]=d>>>3&7;yt(f,2630,_+960|0)|0}f=a[2784+((d>>>3&7)<<2)>>2]|0;a[2784+((d&7)<<2)>>2]=(f&32768|0)==0?f&65535:f|-65536;d=0;N=_;return d|0}default:break t}}while(0);f=a[160]|0;a[_+992>>2]=s;a[_+992+4>>2]=d;yt(f,2685,_+992|0)|0;d=1;N=_;return d|0}}}}}}}}}}}return 0}function it(t){t=t|0;var e=0;e=N;N=N+16|0;a[e>>2]=ct(a[t+60>>2]|0)|0;t=ot(S(6,e|0)|0)|0;N=e;return t|0}function at(t,e,r){t=t|0;e=e|0;r=r|0;var n=0,i=0,s=0,o=0,u=0,c=0,l=0;o=N;N=N+32|0;s=a[t+28>>2]|0;a[o>>2]=s;s=(a[t+20>>2]|0)-s|0;a[o+4>>2]=s;a[o+8>>2]=e;a[o+12>>2]=r;i=2;e=s+r|0;s=o;while(1){if(!((T(a[t+60>>2]|0,s|0,i|0,o+16|0)|0)<<16>>16))n=a[o+16>>2]|0;else{a[o+16>>2]=-1;n=-1}if((e|0)==(n|0)){e=6;break}if((n|0)<0){e=8;break}l=a[s+4>>2]|0;c=n>>>0>l>>>0;u=c?s+8|0:s;l=n-(c?l:0)|0;a[u>>2]=(a[u>>2]|0)+l;a[u+4>>2]=(a[u+4>>2]|0)-l;i=i+(c<<31>>31)|0;e=e-n|0;s=u}if((e|0)==6){l=a[t+44>>2]|0;a[t+16>>2]=l+(a[t+48>>2]|0);a[t+28>>2]=l;a[t+20>>2]=l}else if((e|0)==8){a[t+16>>2]=0;a[t+28>>2]=0;a[t+20>>2]=0;a[t>>2]=a[t>>2]|32;if((i|0)==2)r=0;else r=r-(a[s+4>>2]|0)|0}N=o;return r|0}function st(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;var i=0;i=N;N=N+32|0;a[i+8>>2]=a[t+60>>2];a[i+8+4>>2]=r;a[i+8+8>>2]=e;a[i+8+12>>2]=i;a[i+8+16>>2]=n;if((ot(C(140,i+8|0)|0)|0)<0){a[i>>2]=-1;a[i+4>>2]=-1;t=-1;e=-1}else{t=a[i+4>>2]|0;e=a[i>>2]|0}k(t|0);N=i;return e|0}function ot(t){t=t|0;if(t>>>0>4294963200){a[(ut()|0)>>2]=0-t;t=-1}return t|0}function ut(){return 2940}function ct(t){t=t|0;return t|0}function lt(t){t=t|0;return(t+-48|0)>>>0<10|0}function ht(){return 644}function ft(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;var i=0,s=0;i=v(r,e)|0;r=(e|0)==0?0:r;if((a[n+76>>2]|0)>-1){s=(_t(n)|0)==0;t=mt(t,i,n)|0;if(!s)dt(n)}else t=mt(t,i,n)|0;if((t|0)!=(i|0))r=(t>>>0)/(e>>>0)|0;return r|0}function dt(t){t=t|0;return}function _t(t){t=t|0;return 1}function pt(t,e){t=t|0;e=e|0;var r=0,i=0,o=0,u=0;u=N;N=N+16|0;n[u>>0]=e;r=a[t+16>>2]|0;if(!r)if(!(gt(t)|0)){i=a[t+16>>2]|0;o=4}else r=-1;else{i=r;o=4}do{if((o|0)==4){r=a[t+20>>2]|0;if(r>>>0<i>>>0?(e&255|0)!=(n[t+75>>0]|0):0){a[t+20>>2]=r+1;n[r>>0]=e;r=e&255;break}if((he[a[t+36>>2]&1](t,u,1)|0)==1)r=s[u>>0]|0;else r=-1}}while(0);N=u;return r|0}function gt(t){t=t|0;var e=0;e=n[t+74>>0]|0;n[t+74>>0]=e+255|e;e=a[t>>2]|0;if(!(e&8)){a[t+8>>2]=0;a[t+4>>2]=0;e=a[t+44>>2]|0;a[t+28>>2]=e;a[t+20>>2]=e;a[t+16>>2]=e+(a[t+48>>2]|0);t=0}else{a[t>>2]=e|32;t=-1}return t|0}function mt(t,e,r){t=t|0;e=e|0;r=r|0;var i=0,s=0,o=0,u=0;i=a[r+16>>2]|0;if(!i)if(!(gt(r)|0)){s=a[r+16>>2]|0;o=5}else i=0;else{s=i;o=5}t:do{if((o|0)==5){i=a[r+20>>2]|0;if((s-i|0)>>>0<e>>>0){i=he[a[r+36>>2]&1](r,t,e)|0;break}e:do{if((n[r+75>>0]|0)<0|(e|0)==0){u=0;s=t}else{o=e;while(1){s=o+-1|0;if((n[t+s>>0]|0)==10)break;if(!s){u=0;s=t;break e}else o=s}i=he[a[r+36>>2]&1](r,t,o)|0;if(i>>>0<o>>>0)break t;u=o;s=t+o|0;e=e-o|0;i=a[r+20>>2]|0}}while(0);Yt(i|0,s|0,e|0)|0;a[r+20>>2]=(a[r+20>>2]|0)+e;i=u+e|0}}while(0);return i|0}function bt(t,e,r){t=t|0;e=e|0;r=r|0;var i=0,s=0,o=0;t:do{if((r|0)!=0&(t&3|0)!=0){i=r;while(1){if((n[t>>0]|0)==(e&255)<<24>>24){s=6;break t}t=t+1|0;r=i+-1|0;if((r|0)!=0&(t&3|0)!=0)i=r;else{i=r;r=(r|0)!=0;s=5;break}}}else{i=r;r=(r|0)!=0;s=5}}while(0);if((s|0)==5)if(r)s=6;else s=16;t:do{if((s|0)==6){if((n[t>>0]|0)==(e&255)<<24>>24)if(!i){s=16;break}else break;r=v(e&255,16843009)|0;e:do{if(i>>>0>3)while(1){o=a[t>>2]^r;if((o&-2139062144^-2139062144)&o+-16843009|0)break e;t=t+4|0;i=i+-4|0;if(i>>>0<=3){s=11;break}}else s=11}while(0);if((s|0)==11)if(!i){s=16;break}while(1){if((n[t>>0]|0)==(e&255)<<24>>24)break t;i=i+-1|0;if(!i){s=16;break}else t=t+1|0}}}while(0);if((s|0)==16)t=0;return t|0}function yt(t,e,r){t=t|0;e=e|0;r=r|0;var n=0;n=N;N=N+16|0;a[n>>2]=r;r=vt(t,e,n)|0;N=n;return r|0}function vt(t,e,r){t=t|0;e=e|0;r=r|0;return kt(t,e,r,1,1)|0}function wt(t,e,r,i,o,u){t=t|0;e=+e;r=r|0;i=i|0;o=o|0;u=u|0;var c=0,l=0,h=0,f=0,d=0.0,_=0,p=0,g=0,m=0,b=0,y=0,w=0,A=0,k=0,E=0,C=0,S=0;S=N;N=N+560|0;a[S+536>>2]=0;C=S+540+12|0;Ft(e)|0;c=x()|0;if((c|0)<0){Ft(-e)|0;e=-e;E=1;A=2737;c=x()|0}else{E=(o&2049|0)!=0&1;A=(o&2048|0)==0?(o&1|0)==0?2738:2743:2740}do{if(0==0&(c&2146435072|0)==2146435072){c=E+3|0;Rt(t,32,r,c,o&-65537);Et(t,A,E);Et(t,e!=e|0.0!=0.0?u&32|0?2764:2768:u&32|0?2756:2760,3);Rt(t,32,r,c,o^8192)}else{d=+jt(e,S+536|0)*2.0;if(d!=0.0)a[S+536>>2]=(a[S+536>>2]|0)+-1;if((u|32|0)==97){p=(u&32|0)==0?A:A+9|0;_=E|2;do{if(!(i>>>0>11|(12-i|0)==0)){e=8.0;c=12-i|0;do{c=c+-1|0;e=e*16.0}while((c|0)!=0);if((n[p>>0]|0)==45){e=-(e+(-d-e));break}else{e=d+e-e;break}}else e=d}while(0);l=a[S+536>>2]|0;c=(l|0)<0?0-l|0:l;c=Pt(c,((c|0)<0)<<31>>31,C)|0;if((c|0)==(C|0)){n[S+540+11>>0]=48;c=S+540+11|0}n[c+-1>>0]=(l>>31&2)+43;f=c+-2|0;n[f>>0]=u+15;c=S;do{E=~~e;l=c+1|0;n[c>>0]=u&32|s[480+E>>0];e=(e-+(E|0))*16.0;if((l-S|0)==1?!((o&8|0)==0&((i|0)<1&e==0.0)):0){n[l>>0]=46;c=c+2|0}else c=l}while(e!=0.0);h=c;if((i|0)!=0?(-2-S+h|0)<(i|0):0){i=i+2+C-f|0;c=C;l=f}else{i=C-S-f+h|0;c=C;l=f}C=i+_|0;Rt(t,32,r,C,o);Et(t,p,_);Rt(t,48,r,C,o^65536);Et(t,S,h-S|0);c=c-l|0;Rt(t,48,i-(h-S+c)|0,0,0);Et(t,f,c);Rt(t,32,r,C,o^8192);c=C;break}l=(i|0)<0?6:i;if(d!=0.0){c=(a[S+536>>2]|0)+-28|0;a[S+536>>2]=c;e=d*268435456.0}else{e=d;c=a[S+536>>2]|0}k=(c|0)<0?S+32|0:S+32+288|0;i=k;do{y=~~e>>>0;a[i>>2]=y;i=i+4|0;e=(e-+(y>>>0))*1.0e9}while(e!=0.0);if((c|0)>0){_=k;while(1){f=(c|0)<29?c:29;c=i+-4|0;if(c>>>0>=_>>>0){h=0;do{m=Kt(a[c>>2]|0,0,f|0)|0;m=Nt(m|0,x()|0,h|0,0)|0;b=x()|0;h=Vt(m|0,b|0,1e9,0)|0;y=$t(h|0,x()|0,1e9,0)|0;y=Ht(m|0,b|0,y|0,x()|0)|0;x()|0;a[c>>2]=y;c=c+-4|0}while(c>>>0>=_>>>0);if(h){y=_+-4|0;a[y>>2]=h;h=y}else h=_}else h=_;t:do{if(i>>>0>h>>>0){c=i;while(1){i=c+-4|0;if(a[i>>2]|0){i=c;break t}if(i>>>0>h>>>0)c=i;else break}}}while(0);c=(a[S+536>>2]|0)-f|0;a[S+536>>2]=c;if((c|0)>0)_=h;else break}}else h=k;if((c|0)<0){do{_=0-c|0;_=(_|0)<9?_:9;if(h>>>0<i>>>0){f=0;c=h;do{y=a[c>>2]|0;a[c>>2]=(y>>>_)+f;f=v(y&(1<<_)+-1,1e9>>>_)|0;c=c+4|0}while(c>>>0<i>>>0);c=(a[h>>2]|0)==0?h+4|0:h;if(!f)h=c;else{a[i>>2]=f;i=i+4|0;h=c}}else h=(a[h>>2]|0)==0?h+4|0:h;c=(u|32|0)==102?k:h;i=(i-c>>2|0)>(((l+25|0)/9|0)+1|0)?c+(((l+25|0)/9|0)+1<<2)|0:i;c=(a[S+536>>2]|0)+_|0;a[S+536>>2]=c}while((c|0)<0);c=h}else c=h;if(c>>>0<i>>>0){h=(k-c>>2)*9|0;_=a[c>>2]|0;if(_>>>0>=10){f=10;do{f=f*10|0;h=h+1|0}while(_>>>0>=f>>>0)}}else h=0;f=l-((u|32|0)==102?0:h)+(((l|0)!=0&(u|32|0)==103)<<31>>31)|0;if((f|0)<(((i-k>>2)*9|0)+-9|0)){p=k+4+(((f+9216|0)/9|0)+-1024<<2)|0;f=f+9216-(((f+9216|0)/9|0)*9|0)|0;if((f|0)<8){_=10;while(1){_=_*10|0;if((f|0)<7)f=f+1|0;else break}}else _=10;m=a[p>>2]|0;f=(m>>>0)/(_>>>0)|0;b=m-(v(f,_)|0)|0;g=(p+4|0)==(i|0);if(!(g&(b|0)==0)){e=(f&1|0)==0?9007199254740992.0:9007199254740994.0;y=_>>>1;d=b>>>0<y>>>0?.5:g&(b|0)==(y|0)?1.0:1.5;if(E){y=(n[A>>0]|0)==45;d=y?-d:d;e=y?-e:e}a[p>>2]=m-b;if(e+d!=e){y=m-b+_|0;a[p>>2]=y;if(y>>>0>999999999){f=p;while(1){h=f+-4|0;a[f>>2]=0;if(h>>>0<c>>>0){c=c+-4|0;a[c>>2]=0}y=(a[h>>2]|0)+1|0;a[h>>2]=y;if(y>>>0>999999999)f=h;else{p=h;break}}}h=(k-c>>2)*9|0;_=a[c>>2]|0;if(_>>>0<10)f=p;else{f=10;do{f=f*10|0;h=h+1|0}while(_>>>0>=f>>>0);f=p}}else f=p}else f=p;b=f+4|0;i=i>>>0>b>>>0?b:i;b=c}else b=c;p=0-h|0;t:do{if(i>>>0>b>>>0)while(1){c=i+-4|0;if(a[c>>2]|0){y=i;m=1;break t}if(c>>>0>b>>>0)i=c;else{y=c;m=0;break}}else{y=i;m=0}}while(0);do{if((u|32|0)==103){if((h|0)>-5?(l+(((l|0)!=0^1)&1)|0)>(h|0):0){f=u+-1|0;l=l+(((l|0)!=0^1)&1)+-1-h|0}else{f=u+-2|0;l=l+(((l|0)!=0^1)&1)+-1|0}if(!(o&8)){if(m?(w=a[y+-4>>2]|0,(w|0)!=0):0)if(!((w>>>0)%10|0)){c=0;i=10;do{i=i*10|0;c=c+1|0}while(!((w>>>0)%(i>>>0)|0|0))}else c=0;else c=9;i=((y-k>>2)*9|0)+-9|0;if((f|32|0)==102){u=i-c|0;u=(u|0)>0?u:0;l=(l|0)<(u|0)?l:u;break}else{u=i+h-c|0;u=(u|0)>0?u:0;l=(l|0)<(u|0)?l:u;break}}}else f=u}while(0);g=(l|0)!=0;i=g?1:o>>>3&1;_=(f|32|0)==102;if(_){p=0;c=(h|0)>0?h:0}else{c=(h|0)<0?p:h;c=Pt(c,((c|0)<0)<<31>>31,C)|0;if((C-c|0)<2)do{c=c+-1|0;n[c>>0]=48}while((C-c|0)<2);n[c+-1>>0]=(h>>31&2)+43;c=c+-2|0;n[c>>0]=f;p=c;c=C-c|0}c=E+1+l+i+c|0;Rt(t,32,r,c,o);Et(t,A,E);Rt(t,48,r,c,o^65536);if(_){f=b>>>0>k>>>0?k:b;h=f;do{i=Pt(a[h>>2]|0,0,S+9|0)|0;if((h|0)==(f|0)){if((i|0)==(S+9|0)){n[S+8>>0]=48;i=S+8|0}}else if(i>>>0>S>>>0){Jt(S|0,48,i-S|0)|0;do{i=i+-1|0}while(i>>>0>S>>>0)}Et(t,i,S+9-i|0);h=h+4|0}while(h>>>0<=k>>>0);if(!((o&8|0)==0&(g^1)))Et(t,2772,1);if(h>>>0<y>>>0&(l|0)>0)while(1){i=Pt(a[h>>2]|0,0,S+9|0)|0;if(i>>>0>S>>>0){Jt(S|0,48,i-S|0)|0;do{i=i+-1|0}while(i>>>0>S>>>0)}Et(t,i,(l|0)<9?l:9);h=h+4|0;i=l+-9|0;if(!(h>>>0<y>>>0&(l|0)>9)){l=i;break}else l=i}Rt(t,48,l+9|0,9,0)}else{_=m?y:b+4|0;if(b>>>0<_>>>0&(l|0)>-1){f=b;do{i=Pt(a[f>>2]|0,0,S+9|0)|0;if((i|0)==(S+9|0)){n[S+8>>0]=48;i=S+8|0}do{if((f|0)==(b|0)){h=i+1|0;Et(t,i,1);if((o&8|0)==0&(l|0)<1){i=h;break}Et(t,2772,1);i=h}else{if(i>>>0<=S>>>0)break;Jt(S|0,48,i+(0-S)|0)|0;do{i=i+-1|0}while(i>>>0>S>>>0)}}while(0);E=S+9-i|0;Et(t,i,(l|0)>(E|0)?E:l);l=l-E|0;f=f+4|0}while(f>>>0<_>>>0&(l|0)>-1)}Rt(t,48,l+18|0,18,0);Et(t,p,C-p|0)}Rt(t,32,r,c,o^8192)}}while(0);N=S;return((c|0)<(r|0)?r:c)|0}function At(t,e){t=t|0;e=e|0;var r=0.0,n=0;n=(a[e>>2]|0)+(8-1)&~(8-1);r=+c[n>>3];a[e>>2]=n+8;c[t>>3]=r;return}function kt(t,e,r,i,s){t=t|0;e=e|0;r=r|0;i=i|0;s=s|0;var o=0,u=0,c=0,l=0;l=N;N=N+224|0;o=l+160|0;u=o+40|0;do{a[o>>2]=0;o=o+4|0}while((o|0)<(u|0));a[l+208>>2]=a[r>>2];if((xt(0,e,l+208|0,l+80|0,l+160|0,i,s)|0)<0)r=-1;else{if((a[t+76>>2]|0)>-1)c=_t(t)|0;else c=0;u=a[t>>2]|0;if((n[t+74>>0]|0)<1)a[t>>2]=u&-33;if(!(a[t+48>>2]|0)){o=a[t+44>>2]|0;a[t+44>>2]=l;a[t+28>>2]=l;a[t+20>>2]=l;a[t+48>>2]=80;a[t+16>>2]=l+80;r=xt(t,e,l+208|0,l+80|0,l+160|0,i,s)|0;if(o){he[a[t+36>>2]&1](t,0,0)|0;r=(a[t+20>>2]|0)==0?-1:r;a[t+44>>2]=o;a[t+48>>2]=0;a[t+16>>2]=0;a[t+28>>2]=0;a[t+20>>2]=0}}else r=xt(t,e,l+208|0,l+80|0,l+160|0,i,s)|0;o=a[t>>2]|0;a[t>>2]=o|u&32;if(c|0)dt(t);r=(o&32|0)==0?r:-1}N=l;return r|0}function xt(t,e,r,s,o,u,l){t=t|0;e=e|0;r=r|0;s=s|0;o=o|0;u=u|0;l=l|0;var h=0,f=0,d=0,_=0,p=0,g=0,m=0,b=0,y=0,v=0,w=0,A=0,k=0,E=0,C=0,S=0;C=N;N=N+64|0;a[C+56>>2]=e;A=C+40|0;h=0;e=0;d=0;t:while(1){do{do{if((e|0)>-1)if((h|0)>(2147483647-e|0)){a[(ut()|0)>>2]=75;e=-1;break}else{e=h+e|0;break}}while(0);m=a[C+56>>2]|0;h=n[m>>0]|0;if(!(h<<24>>24)){w=92;break t}f=m;e:while(1){switch(h<<24>>24){case 37:{w=10;break e}case 0:{h=f;break e}default:{}}v=f+1|0;a[C+56>>2]=v;h=n[v>>0]|0;f=v}e:do{if((w|0)==10){w=0;h=f;do{if((n[f+1>>0]|0)!=37)break e;h=h+1|0;f=f+2|0;a[C+56>>2]=f}while((n[f>>0]|0)==37)}}while(0);h=h-m|0;if(t|0)Et(t,m,h)}while((h|0)!=0);v=(lt(n[(a[C+56>>2]|0)+1>>0]|0)|0)==0;f=a[C+56>>2]|0;if(!v?(n[f+2>>0]|0)==36:0){b=(n[f+1>>0]|0)+-48|0;p=1;h=3}else{b=-1;p=d;h=1}h=f+h|0;a[C+56>>2]=h;f=n[h>>0]|0;if(((f<<24>>24)+-32|0)>>>0>31|(1<<(f<<24>>24)+-32&75913|0)==0)_=0;else{d=0;_=(f<<24>>24)+-32|0;do{d=1<<_|d;h=h+1|0;a[C+56>>2]=h;f=n[h>>0]|0;_=(f<<24>>24)+-32|0}while(!(_>>>0>31|(1<<_&75913|0)==0));_=d}if(f<<24>>24==42){if((lt(n[h+1>>0]|0)|0)!=0?(E=a[C+56>>2]|0,(n[E+2>>0]|0)==36):0){a[o+((n[E+1>>0]|0)+-48<<2)>>2]=10;h=a[s+((n[E+1>>0]|0)+-48<<3)>>2]|0;d=1;f=E+3|0}else{if(p|0){e=-1;break}if(t|0){v=(a[r>>2]|0)+(4-1)&~(4-1);h=a[v>>2]|0;a[r>>2]=v+4}else h=0;d=0;f=(a[C+56>>2]|0)+1|0}a[C+56>>2]=f;g=(h|0)<0;y=g?0-h|0:h;g=g?_|8192:_;v=d}else{h=Ct(C+56|0)|0;if((h|0)<0){e=-1;break}y=h;g=_;v=p;f=a[C+56>>2]|0}do{if((n[f>>0]|0)==46){h=f+1|0;if((n[h>>0]|0)!=42){a[C+56>>2]=h;h=Ct(C+56|0)|0;f=a[C+56>>2]|0;break}if(lt(n[f+2>>0]|0)|0?(k=a[C+56>>2]|0,(n[k+3>>0]|0)==36):0){a[o+((n[k+2>>0]|0)+-48<<2)>>2]=10;h=a[s+((n[k+2>>0]|0)+-48<<3)>>2]|0;a[C+56>>2]=k+4;f=k+4|0;break}if(v|0){e=-1;break t}if(t|0){p=(a[r>>2]|0)+(4-1)&~(4-1);h=a[p>>2]|0;a[r>>2]=p+4}else h=0;f=(a[C+56>>2]|0)+2|0;a[C+56>>2]=f}else h=-1}while(0);p=0;while(1){if(((n[f>>0]|0)+-65|0)>>>0>57){e=-1;break t}d=f;f=f+1|0;a[C+56>>2]=f;d=n[(n[d>>0]|0)+-65+(16+(p*58|0))>>0]|0;if(((d&255)+-1|0)>>>0>=8)break;else p=d&255}if(!(d<<24>>24)){e=-1;break}_=(b|0)>-1;do{if(d<<24>>24==19)if(_){e=-1;break t}else w=54;else{if(_){a[o+(b<<2)>>2]=d&255;b=s+(b<<3)|0;w=a[b+4>>2]|0;a[C+40>>2]=a[b>>2];a[C+40+4>>2]=w;w=54;break}if(!t){e=0;break t}St(C+40|0,d&255,r,l);f=a[C+56>>2]|0;w=55}}while(0);if((w|0)==54){w=0;if(t|0)w=55;else h=0}e:do{if((w|0)==55){w=0;f=n[f+-1>>0]|0;f=(p|0)!=0&(f&15|0)==3?f&-33:f;d=g&-65537;b=(g&8192|0)==0?g:d;r:do{switch(f|0){case 110:switch((p&255)<<24>>24){case 0:{a[a[C+40>>2]>>2]=e;h=0;break e}case 1:{a[a[C+40>>2]>>2]=e;h=0;break e}case 2:{h=a[C+40>>2]|0;a[h>>2]=e;a[h+4>>2]=((e|0)<0)<<31>>31;h=0;break e}case 3:{i[a[C+40>>2]>>1]=e;h=0;break e}case 4:{n[a[C+40>>2]>>0]=e;h=0;break e}case 6:{a[a[C+40>>2]>>2]=e;h=0;break e}case 7:{h=a[C+40>>2]|0;a[h>>2]=e;a[h+4>>2]=((e|0)<0)<<31>>31;h=0;break e}default:{h=0;break e}}case 112:{f=120;h=h>>>0>8?h:8;d=b|8;w=67;break}case 88:case 120:{d=b;w=67;break}case 111:{d=It(a[C+40>>2]|0,a[C+40+4>>2]|0,C+40|0)|0;g=d;_=0;p=2720;h=(b&8|0)==0|(h|0)>(A-d|0)?h:A-d+1|0;d=b;w=73;break}case 105:case 100:{f=a[C+40>>2]|0;d=a[C+40+4>>2]|0;if((d|0)<0){f=Ht(0,0,f|0,d|0)|0;d=x()|0;a[C+40>>2]=f;a[C+40+4>>2]=d;_=1;p=2720;w=72;break r}else{_=(b&2049|0)!=0&1;p=(b&2048|0)==0?(b&1|0)==0?2720:2722:2721;w=72;break r}}case 117:{_=0;p=2720;f=a[C+40>>2]|0;d=a[C+40+4>>2]|0;w=72;break}case 99:{n[C+39>>0]=a[C+40>>2];m=C+39|0;_=0;p=2720;g=1;f=d;h=A;break}case 115:{S=a[C+40>>2]|0;S=(S|0)==0?2730:S;b=bt(S,0,h)|0;m=S;_=0;p=2720;g=(b|0)==0?h:b-S|0;f=d;h=(b|0)==0?S+h|0:b;break}case 67:{a[C+48>>2]=a[C+40>>2];a[C+48+4>>2]=0;a[C+40>>2]=C+48;_=-1;w=79;break}case 83:{if(!h){Rt(t,32,y,0,b);h=0;w=89}else{_=h;w=79}break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{h=le[u&1](t,+c[C+40>>3],y,h,b,f)|0;break e}default:{_=0;p=2720;g=h;f=b;h=A}}}while(0);r:do{if((w|0)==67){g=Tt(a[C+40>>2]|0,a[C+40+4>>2]|0,C+40|0,f&32)|0;p=(d&8|0)==0|((a[C+40>>2]|0)==0?(a[C+40+4>>2]|0)==0:0);_=p?0:2;p=p?2720:2720+(f>>>4)|0;w=73}else if((w|0)==72){g=Pt(f,d,C+40|0)|0;d=b;w=73}else if((w|0)==79){w=0;d=a[C+40>>2]|0;h=0;while(1){f=a[d>>2]|0;if(!f)break;f=Bt(C+60|0,f)|0;if((f|0)<0|f>>>0>(_-h|0)>>>0){w=83;break}h=f+h|0;if(_>>>0>h>>>0)d=d+4|0;else break}if((w|0)==83){w=0;if((f|0)<0){e=-1;break t}}Rt(t,32,y,h,b);if(!h){h=0;w=89}else{d=a[C+40>>2]|0;_=0;while(1){f=a[d>>2]|0;if(!f){w=89;break r}f=Bt(C+60|0,f)|0;_=f+_|0;if((_|0)>(h|0)){w=89;break r}Et(t,C+60|0,f);if(_>>>0>=h>>>0){w=89;break}else d=d+4|0}}}}while(0);if((w|0)==73){w=0;f=a[C+40>>2]|0?1:(a[C+40+4>>2]|0)!=0;S=(h|0)!=0|f;f=A-g+((f^1)&1)|0;m=S?g:C+40|0;g=S?(h|0)>(f|0)?h:f:0;f=(h|0)>-1?d&-65537:d;h=A}else if((w|0)==89){w=0;Rt(t,32,y,h,b^8192);h=(y|0)>(h|0)?y:h;break}b=h-m|0;g=(g|0)<(b|0)?b:g;S=g+_|0;h=(y|0)<(S|0)?S:y;Rt(t,32,h,S,f);Et(t,p,_);Rt(t,48,h,S,f^65536);Rt(t,48,g,b,0);Et(t,m,b);Rt(t,32,h,S,f^8192)}}while(0);d=v}t:do{if((w|0)==92)if(!t)if(!d)e=0;else{e=1;while(1){h=a[o+(e<<2)>>2]|0;if(!h)break;St(s+(e<<3)|0,h,r,l);e=e+1|0;if(e>>>0>=10){e=1;break t}}while(1){if(a[o+(e<<2)>>2]|0){e=-1;break t}e=e+1|0;if(e>>>0>=10){e=1;break}}}}while(0);N=C;return e|0}function Et(t,e,r){t=t|0;e=e|0;r=r|0;if(!(a[t>>2]&32))mt(e,r,t)|0;return}function Ct(t){t=t|0;var e=0,r=0;if(!(lt(n[a[t>>2]>>0]|0)|0))e=0;else{e=0;do{r=a[t>>2]|0;e=(e*10|0)+-48+(n[r>>0]|0)|0;a[t>>2]=r+1}while((lt(n[r+1>>0]|0)|0)!=0)}return e|0}function St(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;var i=0,s=0.0;t:do{if(e>>>0<=20)do{switch(e|0){case 9:{e=(a[r>>2]|0)+(4-1)&~(4-1);n=a[e>>2]|0;a[r>>2]=e+4;a[t>>2]=n;break t}case 10:{e=(a[r>>2]|0)+(4-1)&~(4-1);n=a[e>>2]|0;a[r>>2]=e+4;a[t>>2]=n;a[t+4>>2]=((n|0)<0)<<31>>31;break t}case 11:{e=(a[r>>2]|0)+(4-1)&~(4-1);n=a[e>>2]|0;a[r>>2]=e+4;a[t>>2]=n;a[t+4>>2]=0;break t}case 12:{i=(a[r>>2]|0)+(8-1)&~(8-1);e=a[i>>2]|0;n=a[i+4>>2]|0;a[r>>2]=i+8;a[t>>2]=e;a[t+4>>2]=n;break t}case 13:{n=(a[r>>2]|0)+(4-1)&~(4-1);i=a[n>>2]|0;a[r>>2]=n+4;a[t>>2]=(i&65535)<<16>>16;a[t+4>>2]=(((i&65535)<<16>>16|0)<0)<<31>>31;break t}case 14:{n=(a[r>>2]|0)+(4-1)&~(4-1);i=a[n>>2]|0;a[r>>2]=n+4;a[t>>2]=i&65535;a[t+4>>2]=0;break t}case 15:{n=(a[r>>2]|0)+(4-1)&~(4-1);i=a[n>>2]|0;a[r>>2]=n+4;a[t>>2]=(i&255)<<24>>24;a[t+4>>2]=(((i&255)<<24>>24|0)<0)<<31>>31;break t}case 16:{n=(a[r>>2]|0)+(4-1)&~(4-1);i=a[n>>2]|0;a[r>>2]=n+4;a[t>>2]=i&255;a[t+4>>2]=0;break t}case 17:{i=(a[r>>2]|0)+(8-1)&~(8-1);s=+c[i>>3];a[r>>2]=i+8;c[t>>3]=s;break t}case 18:{de[n&1](t,r);break t}default:break t}}while(0)}while(0);return}function Tt(t,e,r,i){t=t|0;e=e|0;r=r|0;i=i|0;if(!((t|0)==0&(e|0)==0))do{r=r+-1|0;n[r>>0]=s[480+(t&15)>>0]|0|i;t=Gt(t|0,e|0,4)|0;e=x()|0}while(!((t|0)==0&(e|0)==0));return r|0}function It(t,e,r){t=t|0;e=e|0;r=r|0;if(!((t|0)==0&(e|0)==0))do{r=r+-1|0;n[r>>0]=t&7|48;t=Gt(t|0,e|0,3)|0;e=x()|0}while(!((t|0)==0&(e|0)==0));return r|0}function Pt(t,e,r){t=t|0;e=e|0;r=r|0;var i=0,a=0,s=0;if(e>>>0>0|(e|0)==0&t>>>0>4294967295){do{i=t;t=Vt(t|0,e|0,10,0)|0;a=e;e=x()|0;s=$t(t|0,e|0,10,0)|0;s=Ht(i|0,a|0,s|0,x()|0)|0;x()|0;r=r+-1|0;n[r>>0]=s&255|48}while(a>>>0>9|(a|0)==9&i>>>0>4294967295);e=t}else e=t;if(e)do{s=e;e=(e>>>0)/10|0;r=r+-1|0;n[r>>0]=s-(e*10|0)|48}while(s>>>0>=10);return r|0}function Rt(t,e,r,n,i){t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;var a=0;a=N;N=N+256|0;if((r|0)>(n|0)&(i&73728|0)==0){Jt(a|0,e<<24>>24|0,((r-n|0)>>>0<256?r-n|0:256)|0)|0;if((r-n|0)>>>0>255){e=r-n|0;do{Et(t,a,256);e=e+-256|0}while(e>>>0>255);e=r-n&255}else e=r-n|0;Et(t,a,e)}N=a;return}function Bt(t,e){t=t|0;e=e|0;if(!t)t=0;else t=Ot(t,e,0)|0;return t|0}function Ot(t,e,r){t=t|0;e=e|0;r=r|0;do{if(t){if(e>>>0<128){n[t>>0]=e;t=1;break}if(!(a[a[(Dt()|0)+188>>2]>>2]|0))if((e&-128|0)==57216){n[t>>0]=e;t=1;break}else{a[(ut()|0)>>2]=84;t=-1;break}if(e>>>0<2048){n[t>>0]=e>>>6|192;n[t+1>>0]=e&63|128;t=2;break}if(e>>>0<55296|(e&-8192|0)==57344){n[t>>0]=e>>>12|224;n[t+1>>0]=e>>>6&63|128;n[t+2>>0]=e&63|128;t=3;break}if((e+-65536|0)>>>0<1048576){n[t>>0]=e>>>18|240;n[t+1>>0]=e>>>12&63|128;n[t+2>>0]=e>>>6&63|128;n[t+3>>0]=e&63|128;t=4;break}else{a[(ut()|0)>>2]=84;t=-1;break}}else t=1}while(0);return t|0}function Dt(){return ht()|0}function Ft(t){t=+t;var e=0;c[l>>3]=t;e=a[l>>2]|0;k(a[l+4>>2]|0);return e|0}function jt(t,e){t=+t;e=e|0;var r=0,n=0,i=0;c[l>>3]=t;r=a[l>>2]|0;n=a[l+4>>2]|0;i=Gt(r|0,n|0,52)|0;x()|0;switch(i&2047){case 0:{if(t!=0.0){t=+jt(t*18446744073709551616.0,e);r=(a[e>>2]|0)+-64|0}else r=0;a[e>>2]=r;break}case 2047:break;default:{a[e>>2]=(i&2047)+-1022;a[l>>2]=r;a[l+4>>2]=n&-2146435073|1071644672;t=+c[l>>3]}}return+t}function Mt(t,e){t=t|0;e=e|0;var r=0,i=0,s=0;if((a[e+76>>2]|0)>=0?(_t(e)|0)!=0:0){if((t&255|0)!=(n[e+75>>0]|0)?(i=a[e+20>>2]|0,i>>>0<(a[e+16>>2]|0)>>>0):0){a[e+20>>2]=i+1;n[i>>0]=t;t=t&255}else t=pt(e,t)|0;dt(e)}else s=3;do{if((s|0)==3){if((t&255|0)!=(n[e+75>>0]|0)?(r=a[e+20>>2]|0,r>>>0<(a[e+16>>2]|0)>>>0):0){a[e+20>>2]=r+1;n[r>>0]=t;t=t&255;break}t=pt(e,t)|0}}while(0);return t|0}function Lt(t){t=t|0;var e=0,r=0,n=0,i=0,s=0,o=0,u=0,c=0,l=0,h=0,f=0,d=0,_=0,p=0,g=0,m=0,b=0,y=0,v=0,w=0;w=N;N=N+16|0;do{if(t>>>0<245){f=t>>>0<11?16:t+11&-8;l=a[736]|0;if(l>>>(f>>>3)&3|0){t=2984+((l>>>(f>>>3)&1^1)+(f>>>3)<<1<<2)|0;e=a[t+8>>2]|0;r=a[e+8>>2]|0;if((r|0)==(t|0))a[736]=l&~(1<<(l>>>(f>>>3)&1^1)+(f>>>3));else{a[r+12>>2]=t;a[t+8>>2]=r}v=(l>>>(f>>>3)&1^1)+(f>>>3)<<3;a[e+4>>2]=v|3;a[e+v+4>>2]=a[e+v+4>>2]|1;v=e+8|0;N=w;return v|0}h=a[738]|0;if(f>>>0>h>>>0){if(l>>>(f>>>3)|0){t=l>>>(f>>>3)<<(f>>>3)&(2<<(f>>>3)|0-(2<<(f>>>3)));i=((t&0-t)+-1|0)>>>(((t&0-t)+-1|0)>>>12&16);n=i>>>(i>>>5&8)>>>(i>>>(i>>>5&8)>>>2&4);n=(i>>>5&8|((t&0-t)+-1|0)>>>12&16|i>>>(i>>>5&8)>>>2&4|n>>>1&2|n>>>(n>>>1&2)>>>1&1)+(n>>>(n>>>1&2)>>>(n>>>(n>>>1&2)>>>1&1))|0;i=a[2984+(n<<1<<2)+8>>2]|0;t=a[i+8>>2]|0;if((t|0)==(2984+(n<<1<<2)|0)){a[736]=l&~(1<<n);t=l&~(1<<n)}else{a[t+12>>2]=2984+(n<<1<<2);a[2984+(n<<1<<2)+8>>2]=t;t=l}a[i+4>>2]=f|3;a[i+f+4>>2]=(n<<3)-f|1;a[i+(n<<3)>>2]=(n<<3)-f;if(h|0){r=a[741]|0;if(!(t&1<<(h>>>3))){a[736]=t|1<<(h>>>3);t=2984+(h>>>3<<1<<2)|0;e=2984+(h>>>3<<1<<2)+8|0}else{t=a[2984+(h>>>3<<1<<2)+8>>2]|0;e=2984+(h>>>3<<1<<2)+8|0}a[e>>2]=r;a[t+12>>2]=r;a[r+8>>2]=t;a[r+12>>2]=2984+(h>>>3<<1<<2)}a[738]=(n<<3)-f;a[741]=i+f;v=i+8|0;N=w;return v|0}s=a[737]|0;if(s){e=((s&0-s)+-1|0)>>>(((s&0-s)+-1|0)>>>12&16);c=e>>>(e>>>5&8)>>>(e>>>(e>>>5&8)>>>2&4);c=a[3248+((e>>>5&8|((s&0-s)+-1|0)>>>12&16|e>>>(e>>>5&8)>>>2&4|c>>>1&2|c>>>(c>>>1&2)>>>1&1)+(c>>>(c>>>1&2)>>>(c>>>(c>>>1&2)>>>1&1))<<2)>>2]|0;e=c;u=c;c=(a[c+4>>2]&-8)-f|0;while(1){t=a[e+16>>2]|0;if(!t){t=a[e+20>>2]|0;if(!t)break}o=(a[t+4>>2]&-8)-f|0;i=o>>>0<c>>>0;e=t;u=i?t:u;c=i?o:c}o=u+f|0;if(o>>>0>u>>>0){i=a[u+24>>2]|0;t=a[u+12>>2]|0;do{if((t|0)==(u|0)){e=u+20|0;t=a[e>>2]|0;if(!t){e=u+16|0;t=a[e>>2]|0;if(!t){e=0;break}}while(1){n=t+20|0;r=a[n>>2]|0;if(!r){n=t+16|0;r=a[n>>2]|0;if(!r)break;else{t=r;e=n}}else{t=r;e=n}}a[e>>2]=0;e=t}else{e=a[u+8>>2]|0;a[e+12>>2]=t;a[t+8>>2]=e;e=t}}while(0);do{if(i|0){t=a[u+28>>2]|0;if((u|0)==(a[3248+(t<<2)>>2]|0)){a[3248+(t<<2)>>2]=e;if(!e){a[737]=s&~(1<<t);break}}else{a[((a[i+16>>2]|0)==(u|0)?i+16|0:i+20|0)>>2]=e;if(!e)break}a[e+24>>2]=i;t=a[u+16>>2]|0;if(t|0){a[e+16>>2]=t;a[t+24>>2]=e}t=a[u+20>>2]|0;if(t|0){a[e+20>>2]=t;a[t+24>>2]=e}}}while(0);if(c>>>0<16){v=c+f|0;a[u+4>>2]=v|3;v=u+v+4|0;a[v>>2]=a[v>>2]|1}else{a[u+4>>2]=f|3;a[o+4>>2]=c|1;a[o+c>>2]=c;if(h|0){r=a[741]|0;if(!(1<<(h>>>3)&l)){a[736]=1<<(h>>>3)|l;t=2984+(h>>>3<<1<<2)|0;e=2984+(h>>>3<<1<<2)+8|0}else{t=a[2984+(h>>>3<<1<<2)+8>>2]|0;e=2984+(h>>>3<<1<<2)+8|0}a[e>>2]=r;a[t+12>>2]=r;a[r+8>>2]=t;a[r+12>>2]=2984+(h>>>3<<1<<2)}a[738]=c;a[741]=o}v=u+8|0;N=w;return v|0}}}}else if(t>>>0<=4294967231){f=t+11&-8;n=a[737]|0;if(n){if((t+11|0)>>>8)if(f>>>0>16777215)u=31;else{u=(t+11|0)>>>8<<((((t+11|0)>>>8)+1048320|0)>>>16&8);u=14-((u+520192|0)>>>16&4|(((t+11|0)>>>8)+1048320|0)>>>16&8|((u<<((u+520192|0)>>>16&4))+245760|0)>>>16&2)+(u<<((u+520192|0)>>>16&4)<<(((u<<((u+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;u=f>>>(u+7|0)&1|u<<1}else u=0;t=a[3248+(u<<2)>>2]|0;t:do{if(!t){r=0;t=0;e=0-f|0;p=61}else{s=0;e=0-f|0;o=f<<((u|0)==31?0:25-(u>>>1)|0);r=0;while(1){i=(a[t+4>>2]&-8)-f|0;if(i>>>0<e>>>0)if(!i){i=t;e=0;r=t;p=65;break t}else{s=t;e=i}p=a[t+20>>2]|0;t=a[t+16+(o>>>31<<2)>>2]|0;r=(p|0)==0|(p|0)==(t|0)?r:p;if(!t){t=s;p=61;break}else o=o<<1}}}while(0);if((p|0)==61){if((r|0)==0&(t|0)==0){t=2<<u;if(!((t|0-t)&n))break;l=((t|0-t)&n&0-((t|0-t)&n))+-1|0;h=l>>>(l>>>12&16)>>>(l>>>(l>>>12&16)>>>5&8);r=h>>>(h>>>2&4)>>>(h>>>(h>>>2&4)>>>1&2);t=0;r=a[3248+((l>>>(l>>>12&16)>>>5&8|l>>>12&16|h>>>2&4|h>>>(h>>>2&4)>>>1&2|r>>>1&1)+(r>>>(r>>>1&1))<<2)>>2]|0}if(!r){u=t;o=e}else{i=t;p=65}}if((p|0)==65)while(1){h=(a[r+4>>2]&-8)-f|0;t=h>>>0<e>>>0;e=t?h:e;i=t?r:i;t=a[r+16>>2]|0;if(!t)t=a[r+20>>2]|0;if(!t){u=i;o=e;break}else r=t}if(((u|0)!=0?o>>>0<((a[738]|0)-f|0)>>>0:0)?(c=u+f|0,c>>>0>u>>>0):0){s=a[u+24>>2]|0;t=a[u+12>>2]|0;do{if((t|0)==(u|0)){e=u+20|0;t=a[e>>2]|0;if(!t){e=u+16|0;t=a[e>>2]|0;if(!t){t=0;break}}while(1){i=t+20|0;r=a[i>>2]|0;if(!r){i=t+16|0;r=a[i>>2]|0;if(!r)break;else{t=r;e=i}}else{t=r;e=i}}a[e>>2]=0}else{v=a[u+8>>2]|0;a[v+12>>2]=t;a[t+8>>2]=v}}while(0);do{if(s){e=a[u+28>>2]|0;if((u|0)==(a[3248+(e<<2)>>2]|0)){a[3248+(e<<2)>>2]=t;if(!t){a[737]=n&~(1<<e);n=n&~(1<<e);break}}else{a[((a[s+16>>2]|0)==(u|0)?s+16|0:s+20|0)>>2]=t;if(!t)break}a[t+24>>2]=s;e=a[u+16>>2]|0;if(e|0){a[t+16>>2]=e;a[e+24>>2]=t}e=a[u+20>>2]|0;if(e){a[t+20>>2]=e;a[e+24>>2]=t}}}while(0);t:do{if(o>>>0<16){v=o+f|0;a[u+4>>2]=v|3;v=u+v+4|0;a[v>>2]=a[v>>2]|1}else{a[u+4>>2]=f|3;a[c+4>>2]=o|1;a[c+o>>2]=o;r=o>>>3;if(o>>>0<256){t=a[736]|0;if(!(t&1<<r)){a[736]=t|1<<r;t=2984+(r<<1<<2)|0;e=2984+(r<<1<<2)+8|0}else{t=a[2984+(r<<1<<2)+8>>2]|0;e=2984+(r<<1<<2)+8|0}a[e>>2]=c;a[t+12>>2]=c;a[c+8>>2]=t;a[c+12>>2]=2984+(r<<1<<2);break}t=o>>>8;if(t)if(o>>>0>16777215)r=31;else{r=t<<((t+1048320|0)>>>16&8)<<(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4);r=14-(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4|(t+1048320|0)>>>16&8|(r+245760|0)>>>16&2)+(r<<((r+245760|0)>>>16&2)>>>15)|0;r=o>>>(r+7|0)&1|r<<1}else r=0;t=3248+(r<<2)|0;a[c+28>>2]=r;a[c+16+4>>2]=0;a[c+16>>2]=0;e=1<<r;if(!(n&e)){a[737]=n|e;a[t>>2]=c;a[c+24>>2]=t;a[c+12>>2]=c;a[c+8>>2]=c;break}t=a[t>>2]|0;e:do{if((a[t+4>>2]&-8|0)!=(o|0)){n=o<<((r|0)==31?0:25-(r>>>1)|0);while(1){r=t+16+(n>>>31<<2)|0;e=a[r>>2]|0;if(!e)break;if((a[e+4>>2]&-8|0)==(o|0)){t=e;break e}else{n=n<<1;t=e}}a[r>>2]=c;a[c+24>>2]=t;a[c+12>>2]=c;a[c+8>>2]=c;break t}}while(0);y=t+8|0;v=a[y>>2]|0;a[v+12>>2]=c;a[y>>2]=c;a[c+8>>2]=v;a[c+12>>2]=t;a[c+24>>2]=0}}while(0);v=u+8|0;N=w;return v|0}}}else f=-1}while(0);r=a[738]|0;if(r>>>0>=f>>>0){t=r-f|0;e=a[741]|0;if(t>>>0>15){v=e+f|0;a[741]=v;a[738]=t;a[v+4>>2]=t|1;a[e+r>>2]=t;a[e+4>>2]=f|3}else{a[738]=0;a[741]=0;a[e+4>>2]=r|3;a[e+r+4>>2]=a[e+r+4>>2]|1}v=e+8|0;N=w;return v|0}i=a[739]|0;if(i>>>0>f>>>0){b=i-f|0;a[739]=b;v=a[742]|0;y=v+f|0;a[742]=y;a[y+4>>2]=b|1;a[v+4>>2]=f|3;v=v+8|0;N=w;return v|0}if(!(a[854]|0)){a[856]=4096;a[855]=4096;a[857]=-1;a[858]=-1;a[859]=0;a[847]=0;a[854]=w&-16^1431655768;t=4096}else t=a[856]|0;s=f+48|0;o=f+47|0;c=t+o|0;u=0-t|0;if((c&u)>>>0<=f>>>0){v=0;N=w;return v|0}t=a[846]|0;if(t|0?(h=a[844]|0,(h+(c&u)|0)>>>0<=h>>>0?1:(h+(c&u)|0)>>>0>t>>>0):0){v=0;N=w;return v|0}t:do{if(!(a[847]&4)){r=a[742]|0;e:do{if(r){e=3392;while(1){h=a[e>>2]|0;if(h>>>0<=r>>>0?(h+(a[e+4>>2]|0)|0)>>>0>r>>>0:0)break;t=a[e+8>>2]|0;if(!t){p=128;break e}else e=t}if((c-i&u)>>>0<2147483647){t=Qt(c-i&u|0)|0;if((t|0)==((a[e>>2]|0)+(a[e+4>>2]|0)|0))if((t|0)==(-1|0))t=c-i&u;else{o=c-i&u;i=t;p=145;break t}else{n=t;r=c-i&u;p=136}}else t=0}else p=128}while(0);do{if((p|0)==128){e=Qt(0)|0;if((e|0)!=(-1|0)?(_=a[855]|0,_=((_+-1&e|0)==0?0:(_+-1+e&0-_)-e|0)+(c&u)|0,d=a[844]|0,_>>>0>f>>>0&_>>>0<2147483647):0){h=a[846]|0;if(h|0?(_+d|0)>>>0<=d>>>0|(_+d|0)>>>0>h>>>0:0){t=0;break}t=Qt(_|0)|0;if((t|0)==(e|0)){o=_;i=e;p=145;break t}else{n=t;r=_;p=136}}else t=0}}while(0);do{if((p|0)==136){e=0-r|0;if(!(s>>>0>r>>>0&(r>>>0<2147483647&(n|0)!=(-1|0))))if((n|0)==(-1|0)){t=0;break}else{o=r;i=n;p=145;break t}t=a[856]|0;t=o-r+t&0-t;if(t>>>0>=2147483647){o=r;i=n;p=145;break t}if((Qt(t|0)|0)==(-1|0)){Qt(e|0)|0;t=0;break}else{o=t+r|0;i=n;p=145;break t}}}while(0);a[847]=a[847]|4;p=143}else{t=0;p=143}}while(0);if(((p|0)==143?(c&u)>>>0<2147483647:0)?(b=Qt(c&u|0)|0,g=Qt(0)|0,m=(g-b|0)>>>0>(f+40|0)>>>0,!((b|0)==(-1|0)|m^1|b>>>0<g>>>0&((b|0)!=(-1|0)&(g|0)!=(-1|0))^1)):0){o=m?g-b|0:t;i=b;p=145}if((p|0)==145){t=(a[844]|0)+o|0;a[844]=t;if(t>>>0>(a[845]|0)>>>0)a[845]=t;c=a[742]|0;t:do{if(c){t=3392;while(1){e=a[t>>2]|0;r=a[t+4>>2]|0;if((i|0)==(e+r|0)){p=154;break}n=a[t+8>>2]|0;if(!n)break;else t=n}if(((p|0)==154?(y=t+4|0,(a[t+12>>2]&8|0)==0):0)?i>>>0>c>>>0&e>>>0<=c>>>0:0){a[y>>2]=r+o;v=(a[739]|0)+o|0;y=(c+8&7|0)==0?0:0-(c+8)&7;a[742]=c+y;a[739]=v-y;a[c+y+4>>2]=v-y|1;a[c+v+4>>2]=40;a[743]=a[858];break}if(i>>>0<(a[740]|0)>>>0)a[740]=i;r=i+o|0;t=3392;while(1){if((a[t>>2]|0)==(r|0)){p=162;break}e=a[t+8>>2]|0;if(!e)break;else t=e}if((p|0)==162?(a[t+12>>2]&8|0)==0:0){a[t>>2]=i;h=t+4|0;a[h>>2]=(a[h>>2]|0)+o;h=i+8|0;h=i+((h&7|0)==0?0:0-h&7)|0;t=r+((r+8&7|0)==0?0:0-(r+8)&7)|0;l=h+f|0;u=t-h-f|0;a[h+4>>2]=f|3;e:do{if((c|0)==(t|0)){v=(a[739]|0)+u|0;a[739]=v;a[742]=l;a[l+4>>2]=v|1}else{if((a[741]|0)==(t|0)){v=(a[738]|0)+u|0;a[738]=v;a[741]=l;a[l+4>>2]=v|1;a[l+v>>2]=v;break}o=a[t+4>>2]|0;if((o&3|0)==1){r:do{if(o>>>0<256){e=a[t+8>>2]|0;r=a[t+12>>2]|0;if((r|0)==(e|0)){a[736]=a[736]&~(1<<(o>>>3));break}else{a[e+12>>2]=r;a[r+8>>2]=e;break}}else{s=a[t+24>>2]|0;e=a[t+12>>2]|0;do{if((e|0)==(t|0)){e=a[t+16+4>>2]|0;if(!e){e=a[t+16>>2]|0;if(!e){e=0;break}else r=t+16|0}else r=t+16+4|0;while(1){i=e+20|0;n=a[i>>2]|0;if(!n){i=e+16|0;n=a[i>>2]|0;if(!n)break;else{e=n;r=i}}else{e=n;r=i}}a[r>>2]=0}else{v=a[t+8>>2]|0;a[v+12>>2]=e;a[e+8>>2]=v}}while(0);if(!s)break;r=a[t+28>>2]|0;do{if((a[3248+(r<<2)>>2]|0)!=(t|0)){a[((a[s+16>>2]|0)==(t|0)?s+16|0:s+20|0)>>2]=e;if(!e)break r}else{a[3248+(r<<2)>>2]=e;if(e|0)break;a[737]=a[737]&~(1<<r);break r}}while(0);a[e+24>>2]=s;r=a[t+16>>2]|0;if(r|0){a[e+16>>2]=r;a[r+24>>2]=e}r=a[t+16+4>>2]|0;if(!r)break;a[e+20>>2]=r;a[r+24>>2]=e}}while(0);t=t+(o&-8)|0;i=(o&-8)+u|0}else i=u;r=t+4|0;a[r>>2]=a[r>>2]&-2;a[l+4>>2]=i|1;a[l+i>>2]=i;r=i>>>3;if(i>>>0<256){t=a[736]|0;if(!(t&1<<r)){a[736]=t|1<<r;t=2984+(r<<1<<2)|0;e=2984+(r<<1<<2)+8|0}else{t=a[2984+(r<<1<<2)+8>>2]|0;e=2984+(r<<1<<2)+8|0}a[e>>2]=l;a[t+12>>2]=l;a[l+8>>2]=t;a[l+12>>2]=2984+(r<<1<<2);break}t=i>>>8;do{if(!t)n=0;else{if(i>>>0>16777215){n=31;break}n=t<<((t+1048320|0)>>>16&8)<<(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4);n=14-(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4|(t+1048320|0)>>>16&8|(n+245760|0)>>>16&2)+(n<<((n+245760|0)>>>16&2)>>>15)|0;n=i>>>(n+7|0)&1|n<<1}}while(0);t=3248+(n<<2)|0;a[l+28>>2]=n;a[l+16+4>>2]=0;a[l+16>>2]=0;e=a[737]|0;r=1<<n;if(!(e&r)){a[737]=e|r;a[t>>2]=l;a[l+24>>2]=t;a[l+12>>2]=l;a[l+8>>2]=l;break}t=a[t>>2]|0;r:do{if((a[t+4>>2]&-8|0)!=(i|0)){n=i<<((n|0)==31?0:25-(n>>>1)|0);while(1){r=t+16+(n>>>31<<2)|0;e=a[r>>2]|0;if(!e)break;if((a[e+4>>2]&-8|0)==(i|0)){t=e;break r}else{n=n<<1;t=e}}a[r>>2]=l;a[l+24>>2]=t;a[l+12>>2]=l;a[l+8>>2]=l;break e}}while(0);y=t+8|0;v=a[y>>2]|0;a[v+12>>2]=l;a[y>>2]=l;a[l+8>>2]=v;a[l+12>>2]=t;a[l+24>>2]=0}}while(0);v=h+8|0;N=w;return v|0}t=3392;while(1){e=a[t>>2]|0;if(e>>>0<=c>>>0?(v=e+(a[t+4>>2]|0)|0,v>>>0>c>>>0):0)break;t=a[t+8>>2]|0}s=v+-47+((v+-47+8&7|0)==0?0:0-(v+-47+8)&7)|0;s=s>>>0<(c+16|0)>>>0?c:s;t=o+-40|0;b=i+8|0;b=(b&7|0)==0?0:0-b&7;y=i+b|0;a[742]=y;a[739]=t-b;a[y+4>>2]=t-b|1;a[i+t+4>>2]=40;a[743]=a[858];a[s+4>>2]=27;a[s+8>>2]=a[848];a[s+8+4>>2]=a[849];a[s+8+8>>2]=a[850];a[s+8+12>>2]=a[851];a[848]=i;a[849]=o;a[851]=0;a[850]=s+8;t=s+24|0;do{y=t;t=t+4|0;a[t>>2]=7}while((y+8|0)>>>0<v>>>0);if((s|0)!=(c|0)){a[s+4>>2]=a[s+4>>2]&-2;a[c+4>>2]=s-c|1;a[s>>2]=s-c;if((s-c|0)>>>0<256){r=2984+((s-c|0)>>>3<<1<<2)|0;t=a[736]|0;if(!(t&1<<((s-c|0)>>>3))){a[736]=t|1<<((s-c|0)>>>3);t=r;e=r+8|0}else{t=a[r+8>>2]|0;e=r+8|0}a[e>>2]=c;a[t+12>>2]=c;a[c+8>>2]=t;a[c+12>>2]=r;break}if((s-c|0)>>>8)if((s-c|0)>>>0>16777215)n=31;else{n=(s-c|0)>>>8<<((((s-c|0)>>>8)+1048320|0)>>>16&8);n=14-((n+520192|0)>>>16&4|(((s-c|0)>>>8)+1048320|0)>>>16&8|((n<<((n+520192|0)>>>16&4))+245760|0)>>>16&2)+(n<<((n+520192|0)>>>16&4)<<(((n<<((n+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;n=(s-c|0)>>>(n+7|0)&1|n<<1}else n=0;t=3248+(n<<2)|0;a[c+28>>2]=n;a[c+20>>2]=0;a[c+16>>2]=0;e=a[737]|0;r=1<<n;if(!(e&r)){a[737]=e|r;a[t>>2]=c;a[c+24>>2]=t;a[c+12>>2]=c;a[c+8>>2]=c;break}t=a[t>>2]|0;e:do{if((a[t+4>>2]&-8|0)!=(s-c|0)){n=s-c<<((n|0)==31?0:25-(n>>>1)|0);while(1){r=t+16+(n>>>31<<2)|0;e=a[r>>2]|0;if(!e)break;if((a[e+4>>2]&-8|0)==(s-c|0)){t=e;break e}else{n=n<<1;t=e}}a[r>>2]=c;a[c+24>>2]=t;a[c+12>>2]=c;a[c+8>>2]=c;break t}}while(0);y=t+8|0;v=a[y>>2]|0;a[v+12>>2]=c;a[y>>2]=c;a[c+8>>2]=v;a[c+12>>2]=t;a[c+24>>2]=0}}else{v=a[740]|0;if((v|0)==0|i>>>0<v>>>0)a[740]=i;a[848]=i;a[849]=o;a[851]=0;a[745]=a[854];a[744]=-1;a[749]=2984;a[748]=2984;a[751]=2992;a[750]=2992;a[753]=3e3;a[752]=3e3;a[755]=3008;a[754]=3008;a[757]=3016;a[756]=3016;a[759]=3024;a[758]=3024;a[761]=3032;a[760]=3032;a[763]=3040;a[762]=3040;a[765]=3048;a[764]=3048;a[767]=3056;a[766]=3056;a[769]=3064;a[768]=3064;a[771]=3072;a[770]=3072;a[773]=3080;a[772]=3080;a[775]=3088;a[774]=3088;a[777]=3096;a[776]=3096;a[779]=3104;a[778]=3104;a[781]=3112;a[780]=3112;a[783]=3120;a[782]=3120;a[785]=3128;a[784]=3128;a[787]=3136;a[786]=3136;a[789]=3144;a[788]=3144;a[791]=3152;a[790]=3152;a[793]=3160;a[792]=3160;a[795]=3168;a[794]=3168;a[797]=3176;a[796]=3176;a[799]=3184;a[798]=3184;a[801]=3192;a[800]=3192;a[803]=3200;a[802]=3200;a[805]=3208;a[804]=3208;a[807]=3216;a[806]=3216;a[809]=3224;a[808]=3224;a[811]=3232;a[810]=3232;v=o+-40|0;b=i+8|0;b=(b&7|0)==0?0:0-b&7;y=i+b|0;a[742]=y;a[739]=v-b;a[y+4>>2]=v-b|1;a[i+v+4>>2]=40;a[743]=a[858]}}while(0);t=a[739]|0;if(t>>>0>f>>>0){b=t-f|0;a[739]=b;v=a[742]|0;y=v+f|0;a[742]=y;a[y+4>>2]=b|1;a[v+4>>2]=f|3;v=v+8|0;N=w;return v|0}}a[(ut()|0)>>2]=12;v=0;N=w;return v|0}function Ut(t){t=t|0;var e=0,r=0,n=0,i=0,s=0,o=0,u=0,c=0;if(!t)return;e=a[740]|0;r=a[t+-4>>2]|0;c=t+-8+(r&-8)|0;do{if(!(r&1)){n=a[t+-8>>2]|0;if(!(r&3))return;o=t+-8+(0-n)|0;s=n+(r&-8)|0;if(o>>>0<e>>>0)return;if((a[741]|0)==(o|0)){e=a[c+4>>2]|0;if((e&3|0)!=3){u=o;e=s;break}a[738]=s;a[c+4>>2]=e&-2;a[o+4>>2]=s|1;a[o+s>>2]=s;return}if(n>>>0<256){e=a[o+8>>2]|0;t=a[o+12>>2]|0;if((t|0)==(e|0)){a[736]=a[736]&~(1<<(n>>>3));u=o;e=s;break}else{a[e+12>>2]=t;a[t+8>>2]=e;u=o;e=s;break}}i=a[o+24>>2]|0;e=a[o+12>>2]|0;do{if((e|0)==(o|0)){e=a[o+16+4>>2]|0;if(!e){e=a[o+16>>2]|0;if(!e){e=0;break}else t=o+16|0}else t=o+16+4|0;while(1){n=e+20|0;r=a[n>>2]|0;if(!r){n=e+16|0;r=a[n>>2]|0;if(!r)break;else{e=r;t=n}}else{e=r;t=n}}a[t>>2]=0}else{u=a[o+8>>2]|0;a[u+12>>2]=e;a[e+8>>2]=u}}while(0);if(i){t=a[o+28>>2]|0;if((a[3248+(t<<2)>>2]|0)==(o|0)){a[3248+(t<<2)>>2]=e;if(!e){a[737]=a[737]&~(1<<t);u=o;e=s;break}}else{a[((a[i+16>>2]|0)==(o|0)?i+16|0:i+20|0)>>2]=e;if(!e){u=o;e=s;break}}a[e+24>>2]=i;t=a[o+16>>2]|0;if(t|0){a[e+16>>2]=t;a[t+24>>2]=e}t=a[o+16+4>>2]|0;if(t){a[e+20>>2]=t;a[t+24>>2]=e;u=o;e=s}else{u=o;e=s}}else{u=o;e=s}}else{u=t+-8|0;e=r&-8;o=t+-8|0}}while(0);if(o>>>0>=c>>>0)return;r=a[c+4>>2]|0;if(!(r&1))return;if(!(r&2)){if((a[742]|0)==(c|0)){c=(a[739]|0)+e|0;a[739]=c;a[742]=u;a[u+4>>2]=c|1;if((u|0)!=(a[741]|0))return;a[741]=0;a[738]=0;return}if((a[741]|0)==(c|0)){c=(a[738]|0)+e|0;a[738]=c;a[741]=o;a[u+4>>2]=c|1;a[o+c>>2]=c;return}i=(r&-8)+e|0;do{if(r>>>0<256){t=a[c+8>>2]|0;e=a[c+12>>2]|0;if((e|0)==(t|0)){a[736]=a[736]&~(1<<(r>>>3));break}else{a[t+12>>2]=e;a[e+8>>2]=t;break}}else{s=a[c+24>>2]|0;e=a[c+12>>2]|0;do{if((e|0)==(c|0)){e=a[c+16+4>>2]|0;if(!e){e=a[c+16>>2]|0;if(!e){t=0;break}else t=c+16|0}else t=c+16+4|0;while(1){n=e+20|0;r=a[n>>2]|0;if(!r){n=e+16|0;r=a[n>>2]|0;if(!r)break;else{e=r;t=n}}else{e=r;t=n}}a[t>>2]=0;t=e}else{t=a[c+8>>2]|0;a[t+12>>2]=e;a[e+8>>2]=t;t=e}}while(0);if(s|0){e=a[c+28>>2]|0;if((a[3248+(e<<2)>>2]|0)==(c|0)){a[3248+(e<<2)>>2]=t;if(!t){a[737]=a[737]&~(1<<e);break}}else{a[((a[s+16>>2]|0)==(c|0)?s+16|0:s+20|0)>>2]=t;if(!t)break}a[t+24>>2]=s;e=a[c+16>>2]|0;if(e|0){a[t+16>>2]=e;a[e+24>>2]=t}e=a[c+16+4>>2]|0;if(e|0){a[t+20>>2]=e;a[e+24>>2]=t}}}}while(0);a[u+4>>2]=i|1;a[o+i>>2]=i;if((u|0)==(a[741]|0)){a[738]=i;return}}else{a[c+4>>2]=r&-2;a[u+4>>2]=e|1;a[o+e>>2]=e;i=e}r=i>>>3;if(i>>>0<256){e=a[736]|0;if(!(e&1<<r)){a[736]=e|1<<r;e=2984+(r<<1<<2)|0;t=2984+(r<<1<<2)+8|0}else{e=a[2984+(r<<1<<2)+8>>2]|0;t=2984+(r<<1<<2)+8|0}a[t>>2]=u;a[e+12>>2]=u;a[u+8>>2]=e;a[u+12>>2]=2984+(r<<1<<2);return}e=i>>>8;if(e)if(i>>>0>16777215)n=31;else{n=e<<((e+1048320|0)>>>16&8)<<(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4);n=14-(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4|(e+1048320|0)>>>16&8|(n+245760|0)>>>16&2)+(n<<((n+245760|0)>>>16&2)>>>15)|0;n=i>>>(n+7|0)&1|n<<1}else n=0;e=3248+(n<<2)|0;a[u+28>>2]=n;a[u+20>>2]=0;a[u+16>>2]=0;t=a[737]|0;r=1<<n;t:do{if(!(t&r)){a[737]=t|r;a[e>>2]=u;a[u+24>>2]=e;a[u+12>>2]=u;a[u+8>>2]=u}else{e=a[e>>2]|0;e:do{if((a[e+4>>2]&-8|0)!=(i|0)){n=i<<((n|0)==31?0:25-(n>>>1)|0);while(1){r=e+16+(n>>>31<<2)|0;t=a[r>>2]|0;if(!t)break;if((a[t+4>>2]&-8|0)==(i|0)){e=t;break e}else{n=n<<1;e=t}}a[r>>2]=u;a[u+24>>2]=e;a[u+12>>2]=u;a[u+8>>2]=u;break t}}while(0);o=e+8|0;c=a[o>>2]|0;a[c+12>>2]=u;a[o>>2]=u;a[u+8>>2]=c;a[u+12>>2]=e;a[u+24>>2]=0}}while(0);c=(a[744]|0)+-1|0;a[744]=c;if(c|0)return;e=3400;while(1){e=a[e>>2]|0;if(!e)break;else e=e+8|0}a[744]=-1;return}function zt(t,e){t=t|0;e=e|0;var r=0,n=0,i=0;r=v(e&65535,t&65535)|0;i=(r>>>16)+(v(e&65535,t>>>16)|0)|0;n=v(e>>>16,t&65535)|0;return(k((i>>>16)+(v(e>>>16,t>>>16)|0)+(((i&65535)+n|0)>>>16)|0),i+n<<16|r&65535|0)|0}function $t(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;var i=0,a=0;i=zt(t,r)|0;a=x()|0;return(k((v(e,r)|0)+(v(n,t)|0)+a|a&0|0),i|0|0)|0}function Nt(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;return(k(e+n+(t+r>>>0>>>0<t>>>0|0)>>>0|0),t+r>>>0|0)|0}function Ht(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;n=e-n-(r>>>0>t>>>0|0)>>>0;return(k(n|0),t-r>>>0|0)|0}function qt(t){t=t|0;return(t?31-(w(t^t-1)|0)|0:32)|0}function Wt(t,e,r,n,i){t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;var s=0,o=0,u=0,c=0,l=0,h=0,f=0,d=0,_=0,p=0;if(!e)if(!n){if(i|0){a[i>>2]=(t>>>0)%(r>>>0);a[i+4>>2]=0}n=0;i=(t>>>0)/(r>>>0)>>>0;return(k(n|0),i)|0}else{if(!i){n=0;i=0;return(k(n|0),i)|0}a[i>>2]=t|0;a[i+4>>2]=e&0;n=0;i=0;return(k(n|0),i)|0}do{if(r){if(n|0){o=(w(n|0)|0)-(w(e|0)|0)|0;if(o>>>0<=31){d=o+1|0;u=t>>>((o+1|0)>>>0)&o-31>>31|e<<31-o;f=e>>>((o+1|0)>>>0)&o-31>>31;s=0;o=t<<31-o;break}if(!i){n=0;i=0;return(k(n|0),i)|0}a[i>>2]=t|0;a[i+4>>2]=e|e&0;n=0;i=0;return(k(n|0),i)|0}if(r-1&r|0){o=(w(r|0)|0)+33-(w(e|0)|0)|0;d=o;u=32-o-1>>31&e>>>((o-32|0)>>>0)|(e<<32-o|t>>>(o>>>0))&o-32>>31;f=o-32>>31&e>>>(o>>>0);s=t<<64-o&32-o>>31;o=(e<<64-o|t>>>((o-32|0)>>>0))&32-o>>31|t<<32-o&o-33>>31;break}if(i|0){a[i>>2]=r-1&t;a[i+4>>2]=0}if((r|0)==1){n=e|e&0;i=t|0|0;return(k(n|0),i)|0}else{i=qt(r|0)|0;n=e>>>(i>>>0)|0;i=e<<32-i|t>>>(i>>>0)|0;return(k(n|0),i)|0}}else{if(!n){if(i|0){a[i>>2]=(e>>>0)%(r>>>0);a[i+4>>2]=0}n=0;i=(e>>>0)/(r>>>0)>>>0;return(k(n|0),i)|0}if(!t){if(i|0){a[i>>2]=0;a[i+4>>2]=(e>>>0)%(n>>>0)}r=0;i=(e>>>0)/(n>>>0)>>>0;return(k(r|0),i)|0}if(!(n-1&n)){if(i|0){a[i>>2]=t|0;a[i+4>>2]=n-1&e|e&0}r=0;i=e>>>((qt(n|0)|0)>>>0);return(k(r|0),i)|0}o=(w(n|0)|0)-(w(e|0)|0)|0;if(o>>>0<=30){d=o+1|0;u=e<<31-o|t>>>((o+1|0)>>>0);f=e>>>((o+1|0)>>>0);s=0;o=t<<31-o;break}if(!i){n=0;i=0;return(k(n|0),i)|0}a[i>>2]=t|0;a[i+4>>2]=e|e&0;n=0;i=0;return(k(n|0),i)|0}}while(0);if(!d){c=o;e=f;t=0;o=0}else{l=Nt(r|0|0,n|n&0|0,-1,-1)|0;h=x()|0;c=o;e=f;t=d;o=0;do{p=c;c=s>>>31|c<<1;s=o|s<<1;p=u<<1|p>>>31|0;_=u>>>31|e<<1|0;Ht(l|0,h|0,p|0,_|0)|0;d=x()|0;f=d>>31|((d|0)<0?-1:0)<<1;o=f&1;u=Ht(p|0,_|0,f&(r|0)|0,(((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1)&(n|n&0)|0)|0;e=x()|0;t=t-1|0}while((t|0)!=0);t=0}if(i|0){a[i>>2]=u;a[i+4>>2]=e}_=(s|0)>>>31|c<<1|(0<<1|s>>>31)&0|t;p=(s<<1|0>>>31)&-2|o;return(k(_|0),p)|0}function Vt(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;return Wt(t,e,r,n,0)|0}function Gt(t,e,r){t=t|0;e=e|0;r=r|0;if((r|0)<32){k(e>>>r|0);return t>>>r|(e&(1<<r)-1)<<32-r}k(0);return e>>>r-32|0}function Kt(t,e,r){t=t|0;e=e|0;r=r|0;if((r|0)<32){k(e<<r|(t&(1<<r)-1<<32-r)>>>32-r|0);return t<<r}k(t<<r-32|0);return 0}function Xt(t){t=t|0;return(t&255)<<24|(t>>8&255)<<16|(t>>16&255)<<8|t>>>24|0}function Yt(t,e,r){t=t|0;e=e|0;r=r|0;var i=0,s=0,o=0;if((r|0)>=8192){B(t|0,e|0,r|0)|0;return t|0}o=t|0;s=t+r|0;if((t&3)==(e&3)){while(t&3){if(!r)return o|0;n[t>>0]=n[e>>0]|0;t=t+1|0;e=e+1|0;r=r-1|0}r=s&-4|0;i=r-64|0;while((t|0)<=(i|0)){a[t>>2]=a[e>>2];a[t+4>>2]=a[e+4>>2];a[t+8>>2]=a[e+8>>2];a[t+12>>2]=a[e+12>>2];a[t+16>>2]=a[e+16>>2];a[t+20>>2]=a[e+20>>2];a[t+24>>2]=a[e+24>>2];a[t+28>>2]=a[e+28>>2];a[t+32>>2]=a[e+32>>2];a[t+36>>2]=a[e+36>>2];a[t+40>>2]=a[e+40>>2];a[t+44>>2]=a[e+44>>2];a[t+48>>2]=a[e+48>>2];a[t+52>>2]=a[e+52>>2];a[t+56>>2]=a[e+56>>2];a[t+60>>2]=a[e+60>>2];t=t+64|0;e=e+64|0}while((t|0)<(r|0)){a[t>>2]=a[e>>2];t=t+4|0;e=e+4|0}}else{r=s-4|0;while((t|0)<(r|0)){n[t>>0]=n[e>>0]|0;n[t+1>>0]=n[e+1>>0]|0;n[t+2>>0]=n[e+2>>0]|0;n[t+3>>0]=n[e+3>>0]|0;t=t+4|0;e=e+4|0}}while((t|0)<(s|0)){n[t>>0]=n[e>>0]|0;t=t+1|0;e=e+1|0}return o|0}function Jt(t,e,r){t=t|0;e=e|0;r=r|0;var i=0,s=0;i=t+r|0;e=e&255;if((r|0)>=67){while(t&3){n[t>>0]=e;t=t+1|0}s=e|e<<8|e<<16|e<<24;while((t|0)<=((i&-4)-64|0)){a[t>>2]=s;a[t+4>>2]=s;a[t+8>>2]=s;a[t+12>>2]=s;a[t+16>>2]=s;a[t+20>>2]=s;a[t+24>>2]=s;a[t+28>>2]=s;a[t+32>>2]=s;a[t+36>>2]=s;a[t+40>>2]=s;a[t+44>>2]=s;a[t+48>>2]=s;a[t+52>>2]=s;a[t+56>>2]=s;a[t+60>>2]=s;t=t+64|0}while((t|0)<(i&-4|0)){a[t>>2]=s;t=t+4|0}}while((t|0)<(i|0)){n[t>>0]=e;t=t+1|0}return i-r|0}function Qt(t){t=t|0;var e=0,r=0;r=R()|0;e=a[h>>2]|0;if((t|0)>0&(e+t|0)<(e|0)|(e+t|0)<0){j(e+t|0)|0;E(12);return-1}if((e+t|0)>(r|0))if(!(O(e+t|0)|0)){E(12);return-1}a[h>>2]=e+t;return e|0}function Zt(t,e){t=t|0;e=e|0;return ce[t&1](e|0)|0}function te(t,e,r,n,i,a,s){t=t|0;e=e|0;r=+r;n=n|0;i=i|0;a=a|0;s=s|0;return le[t&1](e|0,+r,n|0,i|0,a|0,s|0)|0}function ee(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;return he[t&1](e|0,r|0,n|0)|0}function re(t,e,r,n,i){t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;return fe[t&1](e|0,r|0,n|0,i|0)|0}function ne(t,e,r){t=t|0;e=e|0;r=r|0;de[t&1](e|0,r|0)}function ie(t){t=t|0;A(0);return 0}function ae(t,e,r,n,i,a){t=t|0;e=+e;r=r|0;n=n|0;i=i|0;a=a|0;A(1);return 0}function se(t,e,r){t=t|0;e=e|0;r=r|0;A(2);return 0}function oe(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;A(3);return 0}function ue(t,e){t=t|0;e=e|0;A(4)}var ce=[ie,it];var le=[ae,wt];var he=[se,at];var fe=[oe,st];var de=[ue,At];return{___errno_location:ut,___muldi3:$t,___udivdi3:Vt,_abort_run:Q,_bitshift64Lshr:Gt,_bitshift64Shl:Kt,_enable_debug:Z,_free:Ut,_i64Add:Nt,_i64Subtract:Ht,_llvm_bswap_i32:Xt,_malloc:Lt,_memcpy:Yt,_memset:Jt,_ping:Y,_read_register:tt,_reset:rt,_run:J,_sbrk:Qt,_set_stop_address:X,_write_register:et,dynCall_ii:Zt,dynCall_iidiiii:te,dynCall_iiii:ee,dynCall_iiiii:re,dynCall_vii:ne,establishStackSpace:K,stackAlloc:W,stackRestore:G,stackSave:V}}(Ft,jt,P),Lt=(t.___errno_location=Mt.___errno_location,t.___muldi3=Mt.___muldi3,t.___udivdi3=Mt.___udivdi3,t._abort_run=Mt._abort_run,t._bitshift64Lshr=Mt._bitshift64Lshr,t._bitshift64Shl=Mt._bitshift64Shl,t._enable_debug=Mt._enable_debug,t._free=Mt._free,t._i64Add=Mt._i64Add,t._i64Subtract=Mt._i64Subtract,t._llvm_bswap_i32=Mt._llvm_bswap_i32,t._malloc=Mt._malloc,t._memcpy=Mt._memcpy,t._memset=Mt._memset,t._ping=Mt._ping,t._read_register=Mt._read_register,t._reset=Mt._reset,t._run=Mt._run,t._sbrk=Mt._sbrk,t._set_stop_address=Mt._set_stop_address,t._write_register=Mt._write_register,t.establishStackSpace=Mt.establishStackSpace,t.stackAlloc=Mt.stackAlloc),Ut=t.stackRestore=Mt.stackRestore,zt=t.stackSave=Mt.stackSave;if(t.dynCall_ii=Mt.dynCall_ii,t.dynCall_iidiiii=Mt.dynCall_iidiiii,t.dynCall_iiii=Mt.dynCall_iiii,t.dynCall_iiiii=Mt.dynCall_iiiii,t.dynCall_vii=Mt.dynCall_vii,t.asm=Mt,t.ccall=I,st)if(ut(st)||(st=b(st)),c||h){var $t=_(st);B.set($t,E)}else{it();var Nt=function(e){e.byteLength&&(e=new Uint8Array(e)),B.set(e,E),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,at()},Ht=function(){d(st,Nt,(function(){throw"could not load memory initializer "+st}))},qt=Ot(st);if(qt)Nt(qt.buffer);else if(t.memoryInitializerRequest){var Wt=function(){var e=t.memoryInitializerRequest,r=e.response;if(200!==e.status&&0!==e.status){var n=Ot(t.memoryInitializerRequestURL);if(!n)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+e.status+", retrying "+st),void Ht();r=n.buffer}Nt(r)};t.memoryInitializerRequest.response?setTimeout(Wt,0):t.memoryInitializerRequest.addEventListener("load",Wt)}else Ht()}function Vt(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Gt(e){function r(){Dt||(Dt=!0,C||(Y(),J(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Q()))}e=e||a,et>0||(X(),et>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),r()}),1)):r()))}function Kt(e,r){r&&w&&0===e||(w||(C=!0,t.onExit&&t.onExit(e)),s(e,new Vt(e)))}function Xt(e){throw t.onAbort&&t.onAbort(e),y(e+=""),v(e),C=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(t.then=function(e){if(Dt)e(t);else{var r=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){r&&r(),e(t)}}return t},nt=function t(){Dt||Gt(),Dt||(nt=t)},t.run=Gt,t.abort=Xt,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return w=!0,Gt(),t});t.exports=i,t.exports=i},8318:(t,e,r)=>{"use strict";r.r(e),r.d(e,{__assign:()=>a,__asyncDelegator:()=>v,__asyncGenerator:()=>y,__asyncValues:()=>w,__await:()=>b,__awaiter:()=>l,__classPrivateFieldGet:()=>E,__classPrivateFieldSet:()=>C,__createBinding:()=>f,__decorate:()=>o,__exportStar:()=>d,__extends:()=>i,__generator:()=>h,__importDefault:()=>x,__importStar:()=>k,__makeTemplateObject:()=>A,__metadata:()=>c,__param:()=>u,__read:()=>p,__rest:()=>s,__spread:()=>g,__spreadArrays:()=>m,__values:()=>_});var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var a=function(){return a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a.apply(this,arguments)};function s(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function o(t,e,r,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(a<3?i(s):a>3?i(e,r,s):i(e,r))||s);return a>3&&s&&Object.defineProperty(e,r,s),s}function u(t,e){return function(r,n){e(r,n,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,r,n){return new(r||(r=Promise))((function(i,a){function s(t){try{u(n.next(t))}catch(t){a(t)}}function o(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}u((n=n.apply(t,e||[])).next())}))}function h(t,e){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}function f(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function d(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function _(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,a=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function m(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function y(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),a=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){a.push([t,e,r,n])>1||o(t,e)}))})}function o(t,e){try{(r=i[t](e)).value instanceof b?Promise.resolve(r.value.v).then(u,c):l(a[0][2],r)}catch(t){l(a[0][3],t)}var r}function u(t){o("next",t)}function c(t){o("throw",t)}function l(t,e){t(e),a.shift(),a.length&&o(a[0][0],a[0][1])}}function v(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:b(t[n](e)),done:"return"===n}:i?i(e):e}:i}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=_(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){!function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)}(n,i,(e=t[r](e)).done,e.value)}))}}}function A(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}function E(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}},4620:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=void 0;const n=r(655).__importDefault(r(4096)),i=new WeakMap;function a(t){i.has(t)||i.set(t,new n.default(t,{watch:!1,addCSS:!1,thumbWidth:8}))}function s(t){const e="input[type=range]";t.matches&&t.matches(e)&&a(t),t.querySelectorAll&&t.querySelectorAll(e).forEach(a)}let o=null;e.initialize=function(){o||(s(document.body),o=new MutationObserver((t=>t.forEach((t=>t.addedNodes.forEach(s))))),o.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0}))}},7789:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=r(6594),a=n.__importDefault(r(4796)),s=r(3318),o=n.__importDefault(r(5947)),u=n.__importDefault(r(8643));let c=class{constructor(t){this._storage=t,this._addCartridge=()=>{this._input&&this._input.removeEventListener("change",this._onCartridgeAdded),this._input=document.createElement("input"),this._input.type="file",this._input.accept=".bin, .a26, .zip",this._input.multiple=!0,this._input.addEventListener("change",this._onCartridgeAdded),this._input.click()},this._onCartridgeAdded=t=>n.__awaiter(this,void 0,void 0,(function*(){const e=t.target,r=(yield Promise.all(Array.prototype.map.call(e.files,(t=>this._processFile(t))))).reduce(((t,e)=>t.concat(e)),[]),n=Array.from(new Map(r.map((t=>[t.cartridge.hash,t]))).values());yield this._storage.insertCartridges(n),this._ports.onNewCartridges_.send(Array.from(n.map((t=>t.cartridge))))})),this._input=null,this._detector=new o.default}init(t){this._ports=t,t.addCartridge_.subscribe(this._addCartridge)}_processFile(t){return n.__awaiter(this,void 0,void 0,(function*(){try{const e=yield new Promise(((e,r)=>{const n=new FileReader;n.addEventListener("load",(()=>e(new Uint8Array(n.result)))),n.addEventListener("error",(()=>r(n.error))),n.readAsArrayBuffer(t)}));if(t.name.match(/.zip$/i)){const t=new a.default;return yield t.loadAsync(e),yield Promise.all(t.file(/\.(bin|a26)$/i).filter((t=>!t.dir)).map((t=>t.async("uint8array").then((e=>this._createCartridge(t.name.replace(/.*\//,""),e))))))}return[this._createCartridge(t.name,e)]}catch(t){return[]}}))}_createCartridge(t,e){const r=(0,s.calculateFromUint8Array)(e),n=t.replace(/\.[^\.]*$/,"");return{cartridge:{hash:r,name:n,tvMode:this._tvModeFromName(n),cartridgeType:this._detector.detectCartridgeType(e),emulatePaddles:!1,volume:100},image:e}}_tvModeFromName(t){return t.match(/[\W\-_]pal\d*[\W\-_]/i)?"pal":t.match(/[\W\-_]secam\d*[\W\-_]/i)?"secam":"ntsc"}};c=n.__decorate([(0,i.injectable)(),n.__param(0,(0,i.inject)(u.default)),n.__metadata("design:paramtypes",[u.default])],c),e.default=c},4416:(t,e,r)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0});const i=r(655),a=r(6594),s=r(8125),o=i.__importDefault(r(1692)),u=i.__importDefault(r(530)),c=i.__importDefault(r(2548)),l=i.__importDefault(r(7438)),h=i.__importDefault(r(6166)),f=i.__importDefault(r(9725)),d=i.__importDefault(r(1752)),_=i.__importDefault(r(8643)),p=i.__importDefault(r(4067)),g=i.__importDefault(r(4030)),m=i.__importDefault(r(2515)),b=i.__importDefault(r(575));function y(t){return{state:"error",error:t}}function v(t,e){const r=t.cpuEmulation||e.cpuEmulation;switch(r){case"cycle":return l.default.Type.stateMachine;case"instruction":return l.default.Type.batchedAccess;default:throw new Error(`cannot happen: invalid cpu emulation mod e${r}`)}}function w(t){switch(t.tvMode){case"ntsc":return 0;case"pal":return 1;case"secam":return 2;default:throw new Error(`cannot happen: invalid TV mode ${t.tvMode}`)}}function A(t,e){return{tvMode:w(t),enableAudio:t.volume*e.volume>0,randomSeed:void 0===t.rngSeed?-1:t.rngSeed,emulatePaddles:t.emulatePaddles,frameStart:void 0===t.firstVisibleLine?-1:t.firstVisibleLine,pcmAudio:"pcm"===(t.audioEmulation||e.audioEmulation),cpuType:v(t,e)}}function k(t){switch(t){case"composite":return"composite";case"svideo":return"svideo";case"none":return"none";default:throw new Error(`invalid TV emulation setting: ${t}`)}}function x(t){switch(t){case"qis":return"qis";case"bilinear":return"bilinear";case"none":return"none";default:throw new Error("invalid scaling setting")}}function E(t,e){var r;return{gamma:e.gammaCorrection,tvEmulation:k(e.tvEmulation),scalingMode:x(e.scaling),phosphorLevel:(null!==(r=null==t?void 0:t.phosphorLevel)&&void 0!==r?r:e.phosphorLevel)/100,scanlineLevel:e.scanlineIntensity/100}}let C=n=class{constructor(t){this._storage=t,this._onEmulationStarted=({hash:t,switches:e})=>i.__awaiter(this,void 0,void 0,(function*(){try{yield this._emulationMutex.runExclusive((()=>this._startEmulation(t,e)))}catch(t){this._ports.onEmulationStateChange_.send(y(t.message))}})),this._onEmulationStopped=()=>this._emulationMutex.runExclusive((()=>this._stopEmulation())),this._onEmulationPaused=()=>this._emulationMutex.runExclusive((()=>this._pauseEmulation())),this._onEmulationResumed=()=>this._emulationMutex.runExclusive((()=>this._resumeEmulation())),this._onEmulationReset=()=>this._emulationMutex.runExclusive((()=>this._resetEmulation())),this._onToggleFullscreen=()=>this._fullscreenDriver&&this._fullscreenDriver.toggle(),this._onSetLimitFramerate=t=>this._emulationService.setRateLimit(t),this._onInputTogglePause=()=>this._ports.onInputDriverEvent_.send("pause"),this._onInputReset=()=>this._ports.onInputDriverEvent_.send("reset"),this._onInputToggleFullscreen=()=>this._ports.onInputDriverEvent_.send("fullscreen"),this._onWindowResize=()=>this._videoDriver&&this._videoDriver.resize(),this._onUpdateConsoleSwitches=t=>this._emulationMutex.runExclusive((()=>this._updateConsoleSwitches(t))),this._onMutation=t=>{if(!t.some((t=>t.addedNodes)))return;const e=document.getElementById("stellerator-canvas");e===this._canvas||this._handledCanvasElements.has(e)||(e&&this._handledCanvasElements.add(e),e&&this._canvas?this._canvasMutex.runExclusive((()=>this._rebindCanvas(e))):e?this._canvasMutex.runExclusive((()=>this._bindCanvas(e))):this._canvasMutex.runExclusive((()=>this._unbindCanvas())))},this._emulationMutex=new s.Mutex,this._canvasMutex=new s.Mutex,this._driverManager=new c.default,this._currentCartridgeHash=null,this._canvas=null,this._videoDriver=null,this._fullscreenDriver=null,this._mutationObserver=new MutationObserver(this._onMutation),this._keyboardDriver=new f.default(document),this._paddleDriver=new m.default,this._audioDriver=new d.default,this._gamepadDriver=new b.default,this._touchDriver=null,this._currentConfig=null,this._handledCanvasElements=new WeakSet,this._emulationService=new u.default("worker/stellerator.js"),this._emulationServiceReady=this._emulationService.init(),this._driverManager.bind(this._emulationService),this._audioDriver.init(),this._keyboardDriver.hardReset.addHandler(this._onInputReset),this._keyboardDriver.togglePause.addHandler(this._onInputTogglePause),this._keyboardDriver.toggleFullscreen.addHandler(this._onInputToggleFullscreen),this._driverManager.addDriver(this._gamepadDriver,((t,e)=>e.bind([t.getJoystick(0),t.getJoystick(1)],{start:t.getControlPanel().getResetButton(),select:t.getControlPanel().getSelectSwitch()}))),this._gamepadDriver.init(),window.addEventListener("resize",this._onWindowResize)}init(t){this._ports=t,t.startEmulation_.subscribe(this._onEmulationStarted),t.stopEmulation_.subscribe(this._onEmulationStopped),t.pauseEmulation_.subscribe(this._onEmulationPaused),t.resumeEmulation_.subscribe(this._onEmulationResumed),t.resetEmulation_.subscribe(this._onEmulationReset),t.toggleFullscreen_.subscribe(this._onToggleFullscreen),t.setLimitFramerate_.subscribe(this._onSetLimitFramerate),t.updateConsoleSwitches_.subscribe(this._onUpdateConsoleSwitches),this._emulationService.stateChanged.addHandler(n._onEmulationStateChange,this),this._emulationService.frequencyUpdate.addHandler(n._onFrequencyChange,this),this._gamepadDriver.gamepadCountChanged.addHandler((t=>{console.log(t),this._ports.onUpdateGamepadCount_.send(t)})),this._ports.onUpdateGamepadCount_.send(b.default.probeGamepadCount()),this._mutationObserver.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0})}updateCartridge(t){return i.__awaiter(this,void 0,void 0,(function*(){if(t.hash!==this._currentCartridgeHash)return;switch(this._emulationService.getState()){case o.default.State.running:case o.default.State.paused:break;default:return}const e=yield this._storage.getSettings();this._audioDriver.setMasterVolume(t.volume*e.volume/1e4),this._videoDriver&&this._videoDriver.updateConfig(E(t,e))}))}updateSettings(t){return i.__awaiter(this,void 0,void 0,(function*(){switch(this._emulationService.getState()){case o.default.State.running:case o.default.State.paused:break;default:return}const e=yield this._storage.getCartridge(this._currentCartridgeHash);this._audioDriver.setMasterVolume(e.volume*t.volume/1e4),this._videoDriver&&this._videoDriver.updateConfig(E(e,t))}))}static _onEmulationStateChange(t,e){e._ports.onEmulationStateChange_.send(e._emulationState(t)),t===o.default.State.running?e._audioDriver.resume():e._audioDriver.pause()}static _onFrequencyChange(t,e){e._emulationService.getState()===o.default.State.running&&e._ports.onEmulationStateChange_.send({state:"running",frequency:t})}_startEmulation(t,e){return i.__awaiter(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.stop();const[r,n,i]=yield Promise.all([this._storage.getCartridge(t),this._storage.getCartridgeImage(t),this._storage.getSettings()]);if(!r||!n)throw new Error(`invalid cartridge hash ${t}`);this._currentCartridgeHash=t;const a=A(r,i);this._currentConfig&&this._currentConfig.pcmAudio===a.pcmAudio||(this._driverManager.removeDriver(this._audioDriver),this._driverManager.addDriver(this._audioDriver,((t,e)=>e.bind(a.pcmAudio,a.pcmAudio?[t.getPCMChannel()]:t.getWaveformChannels())))),this._audioDriver.setMasterVolume(r.volume*i.volume/1e4),this._videoDriver&&this._videoDriver.updateConfig(E(r,i)),this._currentConfig=A(r,i),yield this._emulationService.start(n,this._currentConfig,r.cartridgeType),this._updateConsoleSwitches(e),yield this._emulationService.resume()}))}_stopEmulation(){return i.__awaiter(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.stop(),this._currentCartridgeHash=null}))}_pauseEmulation(){return i.__awaiter(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.pause()}))}_resumeEmulation(){return i.__awaiter(this,void 0,void 0,(function*(){yield this._emulationServiceReady,this._emulationService.getState()===o.default.State.paused&&(yield this._emulationService.resume())}))}_resetEmulation(){return i.__awaiter(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.reset()}))}_updateConsoleSwitches(t){const e=this._emulationService.getEmulationContext();if(!e)return;const r=e.getControlPanel();r.getDifficultySwitchP0().toggle("pro"===t.difficultyP0),r.getDifficultySwitchP1().toggle("pro"===t.difficultyP1),r.getColorSwitch().toggle("bw"===t.color)}_createAndBindVideoDriver(t){return i.__awaiter(this,void 0,void 0,(function*(){yield this._emulationServiceReady,this._removeVideoDriver();const[e,r]=yield this._emulationMutex.runExclusive((()=>Promise.all([this._storage.getSettings(),this._currentCartridgeHash&&this._storage.getCartridge(this._currentCartridgeHash)])));this._canvas=t,this._videoDriver=new h.default(this._canvas,E(r,e)),this._videoDriver.init(),this._driverManager.addDriver(this._videoDriver,((t,e)=>e.bind(t.getVideo()))),this._fullscreenDriver=new p.default(this._videoDriver)}))}_bindCanvas(t){var e;return i.__awaiter(this,void 0,void 0,(function*(){const r=yield this._storage.getSettings();yield this._createAndBindVideoDriver(t),(null!==(e=r.touchControls)&&void 0!==e?e:g.default.isSupported())&&(this._touchDriver=new g.default(t,r.virtualJoystickSensitivity,r.leftHanded),this._touchDriver.toggleFullscreen.addHandler(this._onInputToggleFullscreen),this._touchDriver.togglePause.addHandler(this._onInputTogglePause),this._driverManager.addDriver(this._touchDriver,((t,e)=>e.bind(t.getJoystick(0),t.getControlPanel())))),this._driverManager.addDriver(this._keyboardDriver,((t,e)=>e.bind(t.getJoystick(0),t.getJoystick(1),t.getControlPanel()))).addDriver(this._paddleDriver,((t,e)=>e.bind(t.getPaddle(0))))}))}_rebindCanvas(t){return i.__awaiter(this,void 0,void 0,(function*(){yield this._createAndBindVideoDriver(t)}))}_unbindCanvas(){return i.__awaiter(this,void 0,void 0,(function*(){this._touchDriver&&(this._driverManager.removeDriver(this._touchDriver),this._touchDriver=null),this._driverManager.removeDriver(this._keyboardDriver).removeDriver(this._paddleDriver),yield this._removeVideoDriver(),this._handledCanvasElements.delete(this._canvas),this._canvas=null}))}_removeVideoDriver(){this._videoDriver&&(this._driverManager.removeDriver(this._videoDriver),this._videoDriver.close(),this._videoDriver=null,this._fullscreenDriver.disengage(),this._fullscreenDriver=null)}_emulationState(t){switch(t){case o.default.State.error:return y(this._emulationService.getLastError().message);case o.default.State.running:return{state:"running"};case o.default.State.paused:return{state:"paused"};case o.default.State.stopped:return{state:"stopped"};default:throw new Error(`cannot happen: invalid emulation state ${t}`)}}};C=n=i.__decorate([(0,a.injectable)(),i.__param(0,(0,a.inject)(_.default)),i.__metadata("design:paramtypes",[_.default])],C),e.default=C},9905:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=r(6594);let a=class{constructor(){this._watchMedia=t=>{this._queries.forEach((t=>{t.removeEventListener?t.removeEventListener("change",this._updateQueries):t.removeListener(this._updateQueries)})),this._queries=t.map((t=>matchMedia(t))),this._queries.forEach((t=>{t.removeEventListener?t.addEventListener("change",this._updateQueries):t.addListener(this._updateQueries)})),this._updateQueries()},this._updateQueries=()=>this._ports.onMediaUpdate_.send(this._queries.map((t=>t.matches))),this._queries=[]}init(t){this._ports=t,t.watchMedia_.subscribe(this._watchMedia)}};a=n.__decorate([(0,i.injectable)()],a),e.default=a},769:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=r(6594);let a=class{constructor(){this._scrollIntoView=([t,e])=>{const r=document.getElementById(e);r?r.scrollIntoView({block:t}):new s(t,e).start()}}init(t){t.scrollIntoView_.subscribe(this._scrollIntoView)}};a=n.__decorate([(0,i.injectable)()],a);class s{constructor(t,e,r=500){this._position=t,this._id=e,this._timeout=r,this._onMutation=t=>{if(!t.some((t=>t.addedNodes)))return;const e=document.getElementById(this._id);e&&(this._observer.disconnect(),clearTimeout(this._timeoutHandle),e.scrollIntoView({block:this._position}))},this._observer=new MutationObserver(this._onMutation),this._timeoutHandle=null}start(){setTimeout((()=>this._observer.disconnect()),this._timeout),this._observer.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0})}}e.default=a},8643:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=n.__importDefault(r(9520)),a=r(6594);class s extends i.default{constructor(){super("stellerator-ng"),this.version(1).stores({cartridges:"&hash",roms:"&hash",settings:"&id"}),this.version(2).stores({cartridges:"&hash",roms:"&hash",settings:"&id"}).upgrade((t=>{t.table("settings").toCollection().modify((t=>{const e=t;delete e.smoothScaling,delete e.phosphorEmulation,delete e.videoSync,t.tvEmulation="composite",t.scaling="qis",t.phosphorLevel=50,t.scanlineIntensity=20})),t.table("cartridges").toCollection().modify((t=>{delete t.phosphorEmulation}))}))}}let o=class{constructor(){this._database=new s,this._defaultSettings=null}setDefaults(t){this._defaultSettings=t}getAllCartridges(){return this._database.cartridges.toArray()}insertCartridges(t){return this._database.transaction("rw",[this._database.cartridges,this._database.roms],(()=>n.__awaiter(this,void 0,void 0,(function*(){yield Promise.all([this._database.cartridges.bulkPut(t.map((t=>t.cartridge))),this._database.roms.bulkPut(t.map((t=>({hash:t.cartridge.hash,image:t.image}))))])}))))}updateCartridge(t){return n.__awaiter(this,void 0,void 0,(function*(){return this._database.transaction("rw",[this._database.cartridges],(()=>n.__awaiter(this,void 0,void 0,(function*(){(yield this._database.cartridges.get(t.hash))&&(yield this._database.cartridges.put(t))}))))}))}deleteCartridge(t){return this._database.transaction("rw",[this._database.cartridges,this._database.roms],(()=>n.__awaiter(this,void 0,void 0,(function*(){yield Promise.all([this._database.cartridges.delete(t),this._database.roms.delete(t)])}))))}deleteAllCartridges(){return this._database.cartridges.clear()}getCartridge(t){return this._database.cartridges.get(t)}getCartridgeImage(t){return n.__awaiter(this,void 0,void 0,(function*(){const e=yield this._database.roms.get(t);return e&&e.image}))}getSettings(){return n.__awaiter(this,void 0,void 0,(function*(){const t=yield this._database.settings.get(0);if(!t)return this._defaultSettings;const{id:e}=t;return n.__rest(t,["id"])}))}saveSettings(t){return n.__awaiter(this,void 0,void 0,(function*(){yield this._database.settings.put(Object.assign(Object.assign({},t),{id:0}))}))}dropDatabase(){return n.__awaiter(this,void 0,void 0,(function*(){this._database.close(),yield indexedDB.deleteDatabase("stellerator-ng"),this._database=new s}))}};o=n.__decorate([(0,a.injectable)()],o),e.default=o},7647:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=r(6594),a=n.__importDefault(r(8643)),s=n.__importDefault(r(4416)),o=r(8125),u=n.__importDefault(r(3162)),c=n.__importDefault(r(4162));let l=class{constructor(t,e){this._storage=t,this._emulation=e,this._onCartridgeDeleted=t=>this._storage.deleteCartridge(t),this._onDeleteAllCartridges=()=>this._storage.deleteAllCartridges(),this._onSaveCartridge=t=>n.__awaiter(this,void 0,void 0,(function*(){const[e,r]=yield Promise.all([this._storage.getCartridge(t),this._storage.getCartridgeImage(t)]);e&&r&&u.default.saveAs(new Blob([r],{type:"application/octet-stream"}),e.name+".bin",{autoBom:!1})})),this._updateCartridgeThrottle=new c.default(250,(t=>this._mutex.runExclusive((()=>this._updateCartridge(t))))),this._mutex=new o.Mutex}init(t){t.updateCartridge_.subscribe(this._updateCartridgeThrottle.run.bind(this._updateCartridgeThrottle)),t.deleteCartridge_.subscribe(this._onCartridgeDeleted),t.deleteAllCartridges_.subscribe(this._onDeleteAllCartridges),t.saveCartridge_.subscribe(this._onSaveCartridge)}_updateCartridge(t){return n.__awaiter(this,void 0,void 0,(function*(){yield this._storage.updateCartridge(t),yield this._emulation.updateCartridge(t)}))}};l=n.__decorate([(0,i.injectable)(),n.__param(0,(0,i.inject)(a.default)),n.__param(1,(0,i.inject)(s.default)),n.__metadata("design:paramtypes",[a.default,s.default])],l),e.default=l},4608:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=r(6594),a=n.__importDefault(r(8643)),s=n.__importDefault(r(4416)),o=r(8125),u=n.__importDefault(r(4162));let c=class{constructor(t,e){this._storage=t,this._emulation=e,this._throttle=new u.default(250,this._applyUpdate.bind(this)),this._mutex=new o.Mutex}init(t){t.updateSettings_.subscribe(this._throttle.run.bind(this._throttle))}_applyUpdate(t){this._mutex.runExclusive((()=>n.__awaiter(this,void 0,void 0,(function*(){yield this._storage.saveSettings(t),yield this._emulation.updateSettings(t)}))))}};c=n.__decorate([(0,i.injectable)(),n.__param(0,(0,i.inject)(a.default)),n.__param(1,(0,i.inject)(s.default)),n.__metadata("design:paramtypes",[a.default,s.default])],c),e.default=c},9993:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.opNmi=e.opIrq=e.opBoot=void 0;const n=r(655),i=n.__importDefault(r(697)),a=n.__importDefault(r(4874)),s=n.__importStar(r(5202));function o(t,e){t.p=e.readWord(65532)}function u(t,e,r){const n=t.p;t.nmi&&(r=65530),t.nmi=t.irq=!1,e.write(t.s+256,n>>>8&255),t.s=t.s+255&255,e.write(t.s+256,255&n),t.s=t.s+255&255,e.write(t.s+256,-17&t.flags),t.s=t.s+255&255,t.flags|=4,t.p=e.readWord(r)}function c(t,e){u(t,e,65534)}function l(t,e){u(t,e,65530)}e.opBoot=o,e.opIrq=c,e.opNmi=l,e.default=class{constructor(t,e){this._bus=t,this._rng=e,this.executionState=0,this.state=new a.default.State,this._opCycles=0,this._instructionCallback=null,this._invalidInstructionCallback=null,this._interruptPending=!1,this._nmiPending=!1,this._interuptCheck=0,this._halted=!1,this._operand=0,this._lastInstructionPointer=0,this._currentAddressingMode=12,this._dereference=!1,this.reset()}setInterrupt(t){return this._interruptPending=t,this}isInterrupt(){return this._interruptPending}nmi(){return this._nmiPending=!0,this}halt(){return this._halted=!0,this}resume(){return this._halted=!1,this}isHalt(){return this._halted}setInvalidInstructionCallback(t){return this._invalidInstructionCallback=t,this}getInvalidInstructionCallback(){return this._invalidInstructionCallback}getLastInstructionPointer(){return this._lastInstructionPointer}reset(){return this.state.a=this._rng?this._rng.int(255):0,this.state.x=this._rng?this._rng.int(255):0,this.state.y=this._rng?this._rng.int(255):0,this.state.s=253,this.state.p=this._rng?this._rng.int(65535):0,this.state.flags=52|(this._rng?this._rng.int(255):0),this.state.irq=!1,this.state.nmi=!1,this.executionState=0,this._opCycles=7,this._interruptPending=!1,this._nmiPending=!1,this._instructionCallback=o,this}cycle(){if(this._halted)return this;switch(this.executionState){case 0:case 2:0==--this._opCycles&&(this._dereference&&(this._operand=this._bus.read(this._operand)),1===this._interuptCheck&&this._checkForInterrupts(),this._instructionCallback(this.state,this._bus,this._operand,this._currentAddressingMode),this.executionState=1,0===this._interuptCheck&&this._checkForInterrupts());break;case 1:if(this.state.nmi)return this._instructionCallback=l,this._opCycles=6,this.state.nmi=this.state.irq=!1,this._interuptCheck=1,this.executionState=2,this;if(this.state.irq)return this._instructionCallback=c,this._opCycles=6,this.state.nmi=this.state.irq=!1,this._interuptCheck=1,this.executionState=2,this;this._fetch()}return this}_fetch(){const t=i.default.opcodes[this._bus.read(this.state.p)];let e,r,n=t.addressingMode,a=!1,o=!1;switch(this._lastInstructionPointer=this.state.p,this._currentAddressingMode=n,this._interuptCheck=0,t.operation){case 0:this._opCycles=0,this._instructionCallback=s.opAdc,a=!0;break;case 1:this._opCycles=0,this._instructionCallback=s.opAnd,a=!0;break;case 2:0===n?(this._opCycles=1,this._instructionCallback=s.opAslAcc):(this._opCycles=3,this._instructionCallback=s.opAslMem,o=!0);break;case 3:1&this.state.flags?(n=0,this._instructionCallback=s.opNop,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=s.opJmp,this._opCycles=0);break;case 4:1&this.state.flags?(this._instructionCallback=s.opJmp,this._opCycles=0):(n=0,this._instructionCallback=s.opNop,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 5:2&this.state.flags?(this._instructionCallback=s.opJmp,this._opCycles=0):(n=0,this._instructionCallback=s.opNop,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 6:this._opCycles=0,this._instructionCallback=s.opBit,a=!0;break;case 7:128&this.state.flags?(this._instructionCallback=s.opJmp,this._opCycles=0):(n=0,this._instructionCallback=s.opNop,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 8:2&this.state.flags?(n=0,this._instructionCallback=s.opNop,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=s.opJmp,this._opCycles=0);break;case 9:128&this.state.flags?(n=0,this._instructionCallback=s.opNop,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=s.opJmp,this._opCycles=0);break;case 11:64&this.state.flags?(n=0,this._instructionCallback=s.opNop,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=s.opJmp,this._opCycles=0);break;case 12:64&this.state.flags?(this._instructionCallback=s.opJmp,this._opCycles=0):(n=0,this._instructionCallback=s.opNop,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 10:this._opCycles=6,this._instructionCallback=s.opBrk,this._interuptCheck=1;break;case 13:this._opCycles=1,this._instructionCallback=s.opClc;break;case 14:this._opCycles=1,this._instructionCallback=s.opCld;break;case 15:this._opCycles=1,this._instructionCallback=s.opCli,this._interuptCheck=1;break;case 16:this._opCycles=1,this._instructionCallback=s.opClv;break;case 17:this._opCycles=0,this._instructionCallback=s.opCmp,a=!0;break;case 18:this._opCycles=0,this._instructionCallback=s.opCpx,a=!0;break;case 19:this._opCycles=0,this._instructionCallback=s.opCpy,a=!0;break;case 20:this._opCycles=3,this._instructionCallback=s.opDec,o=!0;break;case 21:this._opCycles=1,this._instructionCallback=s.opDex;break;case 22:this._opCycles=1,this._instructionCallback=s.opDey;break;case 23:this._opCycles=0,this._instructionCallback=s.opEor,a=!0;break;case 24:this._opCycles=3,this._instructionCallback=s.opInc,o=!0;break;case 25:this._opCycles=1,this._instructionCallback=s.opInx;break;case 26:this._opCycles=1,this._instructionCallback=s.opIny;break;case 27:this._opCycles=0,this._instructionCallback=s.opJmp;break;case 28:this._opCycles=5,this._instructionCallback=s.opJsr;break;case 29:this._opCycles=1===n?0:1,this._instructionCallback=s.opLda;break;case 30:this._opCycles=1===n?0:1,this._instructionCallback=s.opLdx;break;case 31:this._opCycles=1===n?0:1,this._instructionCallback=s.opLdy;break;case 32:0===n?(this._opCycles=1,this._instructionCallback=s.opLsrAcc):(this._opCycles=3,this._instructionCallback=s.opLsrMem,o=!0);break;case 33:this._opCycles=1,this._instructionCallback=s.opNop;break;case 56:case 57:this._opCycles=0,a=!0,this._instructionCallback=s.opNop;break;case 34:this._opCycles=0,this._instructionCallback=s.opOra,a=!0;break;case 36:this._opCycles=2,this._instructionCallback=s.opPhp;break;case 35:this._opCycles=2,this._instructionCallback=s.opPha;break;case 37:this._opCycles=3,this._instructionCallback=s.opPla;break;case 38:this._opCycles=3,this._instructionCallback=s.opPlp,this._interuptCheck=1;break;case 39:0===n?(this._opCycles=1,this._instructionCallback=s.opRolAcc):(this._opCycles=3,this._instructionCallback=s.opRolMem,o=!0);break;case 40:0===n?(this._opCycles=1,this._instructionCallback=s.opRorAcc):(this._opCycles=3,this._instructionCallback=s.opRorMem,o=!0);break;case 41:this._opCycles=5,this._instructionCallback=s.opRti;break;case 42:this._opCycles=5,this._instructionCallback=s.opRts;break;case 43:this._opCycles=0,this._instructionCallback=s.opSbc,a=!0;break;case 44:this._opCycles=1,this._instructionCallback=s.opSec;break;case 45:this._opCycles=1,this._instructionCallback=s.opSed;break;case 46:this._opCycles=1,this._instructionCallback=s.opSei,this._interuptCheck=1;break;case 47:this._opCycles=1,this._instructionCallback=s.opSta,o=!0;break;case 48:this._opCycles=1,this._instructionCallback=s.opStx,o=!0;break;case 49:this._opCycles=1,this._instructionCallback=s.opSty,o=!0;break;case 50:this._opCycles=1,this._instructionCallback=s.opTax;break;case 51:this._opCycles=1,this._instructionCallback=s.opTay;break;case 52:this._opCycles=1,this._instructionCallback=s.opTsx;break;case 53:this._opCycles=1,this._instructionCallback=s.opTxa;break;case 54:this._opCycles=1,this._instructionCallback=s.opTxs;break;case 55:this._opCycles=1,this._instructionCallback=s.opTya;break;case 62:this._opCycles=0,this._instructionCallback=s.opArr;break;case 58:this._opCycles=0,this._instructionCallback=s.opAlr;break;case 59:this._opCycles=0,this._instructionCallback=s.opAxs;break;case 60:this._opCycles=3,this._instructionCallback=s.opDcp,o=!0;break;case 61:this._opCycles=0,this._instructionCallback=s.opLax,a=!0;break;case 63:this._opCycles=3,this._instructionCallback=s.opSlo,o=!0,a=!1;break;case 64:this._opCycles=1,this._instructionCallback=s.opAax;break;case 65:this._opCycles=0,this._instructionCallback=s.opLar,a=!0;break;case 66:this._opCycles=3,this._instructionCallback=s.opIsc,o=!0;break;case 67:this._opCycles=0,this._instructionCallback=s.opAac;break;case 68:this._opCycles=0,this._instructionCallback=s.opAtx;break;case 69:this._opCycles=3,a=!1,o=!0,this._instructionCallback=s.opRra;break;case 70:this._opCycles=3,a=!1,o=!0,this._instructionCallback=s.opRla;break;default:return void(this._invalidInstructionCallback&&this._invalidInstructionCallback(this))}switch(this.state.p=this.state.p+1&65535,n){case 1:this._operand=this._bus.read(this.state.p),a=!1,this.state.p=this.state.p+1&65535,this._opCycles++;break;case 2:this._operand=this._bus.read(this.state.p),this.state.p=this.state.p+1&65535,this._opCycles++;break;case 3:this._operand=this._bus.readWord(this.state.p),this.state.p=this.state.p+2&65535,this._opCycles+=2;break;case 4:e=this._bus.readWord(this.state.p),this._operand=255==(255&e)?this._bus.read(e)+(this._bus.read(65280&e)<<8):this._bus.readWord(e),this.state.p=this.state.p+2&65535,this._opCycles+=4;break;case 5:e=this._bus.read(this.state.p),e=128&e?-(255&~(e-1)):e,this._operand=this.state.p+e+65537&65535,this.state.p=this.state.p+1&65535,this._opCycles+=(65280&this._operand)!=(65280&this.state.p)?3:2;break;case 6:r=this._bus.read(this.state.p),this._bus.read(r),this._operand=r+this.state.x&255,this.state.p=this.state.p+1&65535,this._opCycles+=2;break;case 7:e=this._bus.readWord(this.state.p),this._operand=e+this.state.x&65535,(65280&this._operand)!=(65280&e)&&this._bus.read(65280&e|255&this._operand),this._opCycles+=o||(65280&this._operand)!=(65280&e)?3:2,this.state.p=this.state.p+2&65535;break;case 9:r=this._bus.read(this.state.p),this._bus.read(r),this._operand=r+this.state.y&255,this.state.p=this.state.p+1&65535,this._opCycles+=2;break;case 10:e=this._bus.readWord(this.state.p),this._operand=e+this.state.y&65535,(65280&this._operand)!=(65280&e)&&this._bus.read(65280&e|255&this._operand),this._opCycles+=o||(65280&this._operand)!=(65280&e)?3:2,this.state.p=this.state.p+2&65535;break;case 8:r=this._bus.read(this.state.p),this._bus.read(r),e=r+this.state.x&255,this._operand=255===e?this._bus.read(255)+(this._bus.read(0)<<8):this._bus.readWord(e),this._opCycles+=4,this.state.p=this.state.p+1&65535;break;case 11:e=this._bus.read(this.state.p),e=255===e?this._bus.read(255)+(this._bus.read(0)<<8):this._bus.readWord(e),this._operand=e+this.state.y&65535,(65280&this._operand)!=(65280&e)&&this._bus.read(65280&e|255&this._operand),this._opCycles+=o||(65280&e)!=(65280&this._operand)?4:3,this.state.p=this.state.p+1&65535}this._dereference=a,a&&this._opCycles++,this.executionState=2}_checkForInterrupts(){this._nmiPending&&(this.state.irq=!1,this.state.nmi=!0,this._nmiPending=!1),!this._interruptPending||this.state.nmi||4&this.state.flags||(this.state.irq=!0)}}},4874:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,function(t){t.State=class{constructor(){this.a=0,this.x=0,this.y=0,this.s=0,this.p=0,this.flags=0,this.irq=!1,this.nmi=!1}}}(r||(r={})),e.default=r},7438:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=n.__importDefault(r(6962)),a=n.__importDefault(r(9993));class s{constructor(t){this._type=t}create(t,e){switch(this._type){case s.Type.stateMachine:return new i.default(t,e);case s.Type.batchedAccess:return new a.default(t,e);default:throw new Error("invalid CPU type")}}}!function(t){let e;!function(t){t[t.stateMachine=0]="stateMachine",t[t.batchedAccess=1]="batchedAccess"}(e=t.Type||(t.Type={}))}(s||(s={})),e.default=s},697:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;class r{constructor(t,e,r=e){this.operation=t,this.addressingMode=e,this.effectiveAddressingMode=r}getSize(){switch(this.effectiveAddressingMode){case 1:case 2:case 6:case 9:case 8:case 11:case 5:return 2;case 3:case 7:case 10:case 4:return 3;default:return 1}}}e.default=r,function(t){let e;!function(t){t[t.adc=0]="adc",t[t.and=1]="and",t[t.asl=2]="asl",t[t.bcc=3]="bcc",t[t.bcs=4]="bcs",t[t.beq=5]="beq",t[t.bit=6]="bit",t[t.bmi=7]="bmi",t[t.bne=8]="bne",t[t.bpl=9]="bpl",t[t.brk=10]="brk",t[t.bvc=11]="bvc",t[t.bvs=12]="bvs",t[t.clc=13]="clc",t[t.cld=14]="cld",t[t.cli=15]="cli",t[t.clv=16]="clv",t[t.cmp=17]="cmp",t[t.cpx=18]="cpx",t[t.cpy=19]="cpy",t[t.dec=20]="dec",t[t.dex=21]="dex",t[t.dey=22]="dey",t[t.eor=23]="eor",t[t.inc=24]="inc",t[t.inx=25]="inx",t[t.iny=26]="iny",t[t.jmp=27]="jmp",t[t.jsr=28]="jsr",t[t.lda=29]="lda",t[t.ldx=30]="ldx",t[t.ldy=31]="ldy",t[t.lsr=32]="lsr",t[t.nop=33]="nop",t[t.ora=34]="ora",t[t.pha=35]="pha",t[t.php=36]="php",t[t.pla=37]="pla",t[t.plp=38]="plp",t[t.rol=39]="rol",t[t.ror=40]="ror",t[t.rti=41]="rti",t[t.rts=42]="rts",t[t.sbc=43]="sbc",t[t.sec=44]="sec",t[t.sed=45]="sed",t[t.sei=46]="sei",t[t.sta=47]="sta",t[t.stx=48]="stx",t[t.sty=49]="sty",t[t.tax=50]="tax",t[t.tay=51]="tay",t[t.tsx=52]="tsx",t[t.txa=53]="txa",t[t.txs=54]="txs",t[t.tya=55]="tya",t[t.dop=56]="dop",t[t.top=57]="top",t[t.alr=58]="alr",t[t.axs=59]="axs",t[t.dcp=60]="dcp",t[t.lax=61]="lax",t[t.arr=62]="arr",t[t.slo=63]="slo",t[t.aax=64]="aax",t[t.lar=65]="lar",t[t.isc=66]="isc",t[t.aac=67]="aac",t[t.atx=68]="atx",t[t.rra=69]="rra",t[t.rla=70]="rla",t[t.invalid=71]="invalid"}(e=t.OperationMap||(t.OperationMap={})),t.opcodes=new Array(256)}(r||(r={})),e.default=r,function(t){let e;!function(e){for(let e=0;e<256;e++)t.opcodes[e]=new t(71,12);let r,n,i;for(let e=0;e<8;e++){switch(e){case 0:r=34;break;case 1:r=1;break;case 2:r=23;break;case 3:r=0;break;case 4:r=47;break;case 5:r=29;break;case 6:r=17;break;case 7:r=43}for(let a=0;a<8;a++){switch(a){case 0:n=8;break;case 1:n=2;break;case 2:n=1;break;case 3:n=3;break;case 4:n=11;break;case 5:n=6;break;case 6:n=10;break;case 7:n=7}47===r&&1===n&&(n=12),71!==r&&12!==n&&(i=e<<5|a<<2|1,t.opcodes[i]=new t(r,n))}}function a(e,r,n,i){if(71!==t.opcodes[e].operation)throw new Error("entry for opcode "+e+" already exists");t.opcodes[e]=new t(r,n,i)}a(6,2,2),a(10,2,0),a(14,2,3),a(22,2,6),a(30,2,7),a(38,39,2),a(42,39,0),a(46,39,3),a(54,39,6),a(62,39,7),a(70,32,2),a(74,32,0),a(78,32,3),a(86,32,6),a(94,32,7),a(102,40,2),a(106,40,0),a(110,40,3),a(118,40,6),a(126,40,7),a(134,48,2),a(142,48,3),a(150,48,9),a(162,30,1),a(166,30,2),a(174,30,3),a(182,30,9),a(190,30,10),a(198,20,2),a(206,20,3),a(214,20,6),a(222,20,7),a(230,24,2),a(238,24,3),a(246,24,6),a(254,24,7),a(36,6,2),a(44,6,3),a(76,27,3),a(108,27,4),a(132,49,2),a(140,49,3),a(148,49,6),a(160,31,1),a(164,31,2),a(172,31,3),a(180,31,6),a(188,31,7),a(192,19,1),a(196,19,2),a(204,19,3),a(224,18,1),a(228,18,2),a(236,18,3),a(16,9,5),a(48,7,5),a(80,11,5),a(112,12,5),a(144,3,5),a(176,4,5),a(208,8,5),a(240,5,5),a(0,10,0),a(32,28,0,3),a(64,41,0),a(96,42,0),a(8,36,0),a(40,38,0),a(72,35,0),a(104,37,0),a(136,22,0),a(168,51,0),a(200,26,0),a(232,25,0),a(24,13,0),a(56,44,0),a(88,15,0),a(120,46,0),a(152,55,0),a(184,16,0),a(216,14,0),a(248,45,0),a(138,53,0),a(154,54,0),a(170,50,0),a(186,52,0),a(202,21,0),a(234,33,0),a(26,33,0),a(58,33,0),a(90,33,0),a(122,33,0),a(218,33,0),a(250,33,0),a(4,56,2),a(20,56,6),a(52,56,6),a(68,56,2),a(84,56,6),a(100,56,2),a(116,56,6),a(128,56,1),a(130,56,1),a(137,56,1),a(194,56,1),a(212,56,6),a(226,56,1),a(244,56,6),a(12,57,3),a(28,57,7),a(60,57,7),a(92,57,7),a(124,57,7),a(220,57,7),a(252,57,7),a(235,43,1),a(75,58,1),a(203,59,1),a(199,60,2),a(215,60,6),a(207,60,3),a(223,60,7),a(219,60,10),a(195,60,8),a(211,60,11),a(167,61,2),a(183,61,9),a(175,61,3),a(191,61,10),a(163,61,8),a(179,61,11),a(107,62,1),a(7,63,2),a(23,63,6),a(15,63,3),a(31,63,7),a(27,63,10),a(3,63,8),a(19,63,11),a(135,64,2),a(151,64,9),a(131,64,8),a(143,64,3),a(187,65,10),a(231,66,2),a(247,66,6),a(239,66,3),a(255,66,7),a(251,66,10),a(227,66,8),a(243,66,11),a(11,67,1),a(43,67,1),a(171,68,1),a(103,69,2),a(119,69,6),a(111,69,3),a(127,69,7),a(123,69,10),a(99,69,8),a(115,69,11),a(39,70,2),a(55,70,6),a(47,70,3),a(63,70,7),a(59,70,10),a(35,70,8),a(51,70,11)}(e=t.__init||(t.__init={}))}(r||(r={})),e.default=r},6962:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=n.__importDefault(r(4874)),a=r(1485),s=n.__importDefault(r(5264));e.default=class{constructor(t,e){this._bus=t,this._rng=e,this.executionState=0,this.state=new i.default.State,this._invalidInstructionCallback=null,this._interruptPending=!1,this._nmiPending=!1,this._halt=!1,this._pollInterruptsAfterLastInstruction=!1,this._lastInstructionPointer=0,this._operations=new Array(255),this._opBoot=(0,a.boot)(this.state),this._opIrq=(0,a.irq)(this.state),this._opNmi=(0,a.nmi)(this.state);const r=new s.default(this.state);for(let t=0;t<256;t++)this._operations[t]=r.compile(t);this.reset()}reset(){return this.state.a=this._rng?this._rng.int(255):0,this.state.x=this._rng?this._rng.int(255):0,this.state.y=this._rng?this._rng.int(255):0,this.state.s=253,this.state.p=this._rng?this._rng.int(65535):0,this.state.flags=52|(this._rng?this._rng.int(255):0),this.state.irq=!1,this.state.nmi=!1,this.executionState=0,this._interruptPending=!1,this._nmiPending=!1,this._halt=!1,this._lastResult=this._opBoot.reset(void 0),this._lastInstructionPointer=0,this}setInterrupt(t){return this._interruptPending=t,this}isInterrupt(){return this._interruptPending}nmi(){return this._nmiPending=!0,this}halt(){return this._halt=!0,this}resume(){return this._halt=!1,this}isHalt(){return this._halt}setInvalidInstructionCallback(t){return this._invalidInstructionCallback=t,this}getInvalidInstructionCallback(){return this._invalidInstructionCallback}getLastInstructionPointer(){return this._lastInstructionPointer}cycle(){if(this._halt&&(!this._lastResult||0===this._lastResult.cycleType))return this;if(1===this.executionState)return this._fetch(),this;let t;switch(this._lastResult.cycleType){case 0:t=this._bus.read(this._lastResult.address);break;case 1:t=this._lastResult.value,this._bus.write(this._lastResult.address,t);break;default:throw new Error("invalid cycle type")}return this._lastResult.pollInterrupts&&(this._pollInterrupts(),this._lastResult.pollInterrupts=!1,this._pollInterruptsAfterLastInstruction=!1),this._lastResult=this._lastResult.nextStep(t),null===this._lastResult&&(this.executionState=1),this}_fetch(){let t;this._pollInterruptsAfterLastInstruction&&this._pollInterrupts(),this._lastInstructionPointer=this.state.p;const e=this._bus.read(this.state.p);this.state.nmi?(t=this._opNmi,this._pollInterruptsAfterLastInstruction=!1):this.state.irq?(t=this._opIrq,this._pollInterruptsAfterLastInstruction=!1):(t=this._operations[e],this.state.p=this.state.p+1&65535,this._pollInterruptsAfterLastInstruction=!0),t?(this.executionState=2,this._lastResult=t.reset(void 0)):this._invalidInstructionCallback&&this._invalidInstructionCallback(this)}_pollInterrupts(){if(this.state.irq=!1,this._nmiPending)return this.state.nmi=!0,void(this._nmiPending=!1);!this._interruptPending||this.state.nmi||4&this.state.flags||(this.state.irq=!0)}}},5202:(t,e)=>{"use strict";function r(t,e){t.s=t.s+1&255,t.flags=-17&(32|e.read(256+t.s))}function n(t,e){t.flags=-131&t.flags|128&e|(e?0:2)}function i(t,e,r){if(8&t.flags){const e=(15&r)+(15&t.a)+(1&t.flags),n=(r>>>4)+(t.a>>>4)+(e>9?1:0);t.a=e%10|n%10<<4,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|(n>9?1:0)}else{const e=t.a+r+(1&t.flags),n=255&e;t.flags=-196&t.flags|128&n|(n?0:2)|e>>>8|(~(r^t.a)&(n^r)&128)>>>1,t.a=n}}function a(t,e,r){t.a&=r,n(t,t.a)}function s(t,e,r){if(8&t.flags){const e=(15&t.a)-(15&r)-(1&~t.flags),n=(t.a>>>4)-(r>>>4)-(e<0?1:0);t.a=(e<0?10+e:e)|(n<0?10+n:n)<<4,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|(n<0?0:1)}else{r=255&~r;const e=t.a+r+(1&t.flags),n=255&e;t.flags=-196&t.flags|128&n|(n?0:2)|e>>>8|(~(r^t.a)&(n^r)&128)>>>1,t.a=n}}Object.defineProperty(e,"__esModule",{value:!0}),e.opTxa=e.opTsx=e.opTay=e.opTax=e.opSty=e.opStx=e.opSta=e.opSei=e.opSed=e.opSec=e.opSbc=e.opRts=e.opRti=e.opRorMem=e.opRorAcc=e.opRolMem=e.opRolAcc=e.opPla=e.opPha=e.opPlp=e.opPhp=e.opOra=e.opNop=e.opLsrMem=e.opLsrAcc=e.opLdy=e.opLdx=e.opLda=e.opJsr=e.opJmp=e.opIny=e.opInx=e.opInc=e.opDey=e.opEor=e.opDex=e.opDec=e.opCpy=e.opCpx=e.opCmp=e.opClv=e.opCli=e.opCld=e.opClc=e.opBrk=e.opBit=e.opAslMem=e.opAslAcc=e.opAnd=e.opAdc=void 0,e.opRla=e.opRra=e.opAtx=e.opAac=e.opIsc=e.opLar=e.opAax=e.opSlo=e.opArr=e.opLax=e.opDcp=e.opAxs=e.opAlr=e.opTya=e.opTxs=void 0,e.opAdc=i,e.opAnd=a,e.opAslAcc=function(t){const e=t.a;t.a=t.a<<1&255,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7},e.opAslMem=function(t,e,r){const n=e.read(r),i=n<<1&255;e.write(r,i),t.flags=-132&t.flags|128&i|(i?0:2)|n>>>7},e.opBit=function(t,e,r){t.flags=-195&t.flags|192&r|(r&t.a?0:2)},e.opBrk=function(t,e){const r=t.p+1&65535;let n=65534;t.nmi&&(n=65530,t.nmi=!1),t.nmi=t.irq=!1,e.write(t.s+256,r>>>8&255),t.s=t.s+255&255,e.write(t.s+256,255&r),t.s=t.s+255&255,e.write(t.s+256,16|t.flags),t.s=t.s+255&255,t.flags|=4,t.p=e.readWord(n)},e.opClc=function(t){t.flags&=-2},e.opCld=function(t){t.flags&=-9},e.opCli=function(t){t.flags&=-5},e.opClv=function(t){t.flags&=-65},e.opCmp=function(t,e,r){const n=t.a+(255&~r)+1;t.flags=-132&t.flags|128&n|(255&n?0:2)|n>>>8},e.opCpx=function(t,e,r){const n=t.x+(255&~r)+1;t.flags=-132&t.flags|128&n|(255&n?0:2)|n>>>8},e.opCpy=function(t,e,r){const n=t.y+(255&~r)+1;t.flags=-132&t.flags|128&n|(255&n?0:2)|n>>>8},e.opDec=function(t,e,r){const i=e.read(r)+255&255;e.write(r,i),n(t,i)},e.opDex=function(t){t.x=t.x+255&255,n(t,t.x)},e.opEor=function(t,e,r){t.a=t.a^r,n(t,t.a)},e.opDey=function(t){t.y=t.y+255&255,n(t,t.y)},e.opInc=function(t,e,r){const i=e.read(r)+1&255;e.write(r,i),n(t,i)},e.opInx=function(t){t.x=t.x+1&255,n(t,t.x)},e.opIny=function(t){t.y=t.y+1&255,n(t,t.y)},e.opJmp=function(t,e,r){t.p=r},e.opJsr=function(t,e,r){const n=t.p+1&65535,i=e.read(t.p);e.read(256+t.s),e.write(256+t.s,n>>>8),t.s=t.s+255&255,e.write(256+t.s,255&n),t.s=t.s+255&255,t.p=i|e.read(t.p+1&65535)<<8},e.opLda=function(t,e,r,i){t.a=1===i?r:e.read(r),n(t,t.a)},e.opLdx=function(t,e,r,i){t.x=1===i?r:e.read(r),n(t,t.x)},e.opLdy=function(t,e,r,i){t.y=1===i?r:e.read(r),n(t,t.y)},e.opLsrAcc=function(t){const e=t.a;t.a=t.a>>>1,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e},e.opLsrMem=function(t,e,r){const n=e.read(r),i=n>>>1;e.write(r,i),t.flags=-132&t.flags|128&i|(i?0:2)|1&n},e.opNop=function(){},e.opOra=function(t,e,r){t.a|=r,n(t,t.a)},e.opPhp=function(t,e){e.write(256+t.s,16|t.flags),t.s=t.s+255&255},e.opPlp=function(t,e){r(t,e)},e.opPha=function(t,e){e.write(256+t.s,t.a),t.s=t.s+255&255},e.opPla=function(t,e){t.s=t.s+1&255,t.a=e.read(256+t.s),n(t,t.a)},e.opRolAcc=function(t){const e=t.a;t.a=t.a<<1&255|1&t.flags,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7},e.opRolMem=function(t,e,r){const n=e.read(r),i=n<<1&255|1&t.flags;e.write(r,i),t.flags=-132&t.flags|128&i|(i?0:2)|n>>>7},e.opRorAcc=function(t){const e=t.a;t.a=t.a>>>1|(1&t.flags)<<7,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e},e.opRorMem=function(t,e,r){const n=e.read(r),i=n>>>1|(1&t.flags)<<7;e.write(r,i),t.flags=-132&t.flags|128&i|(i?0:2)|1&n},e.opRti=function(t,e){let n;r(t,e),t.s=t.s+1&255,n=e.read(256+t.s),t.s=t.s+1&255,n|=e.read(256+t.s)<<8,t.p=n},e.opRts=function(t,e){let r;e.read(256+t.s),t.s=t.s+1&255,r=e.read(256+t.s),t.s=t.s+1&255,r+=e.read(256+t.s)<<8,t.p=r+1&65535},e.opSbc=s,e.opSec=function(t){t.flags|=1},e.opSed=function(t){t.flags|=8},e.opSei=function(t){t.flags|=4},e.opSta=function(t,e,r){e.write(r,t.a)},e.opStx=function(t,e,r){e.write(r,t.x)},e.opSty=function(t,e,r){e.write(r,t.y)},e.opTax=function(t){t.x=t.a,n(t,t.a)},e.opTay=function(t){t.y=t.a,n(t,t.a)},e.opTsx=function(t){t.x=t.s,n(t,t.x)},e.opTxa=function(t){t.a=t.x,n(t,t.a)},e.opTxs=function(t){t.s=t.x},e.opTya=function(t){t.a=t.y,n(t,t.a)},e.opAlr=function(t,e,r){const n=t.a&r;t.a=n>>>1,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&n},e.opAxs=function(t,e,r){const n=(t.a&t.x)+(255&~r)+1;t.x=255&n,t.flags=-132&t.flags|128&t.x|(255&t.x?0:2)|n>>>8},e.opDcp=function(t,e,r){const n=e.read(r)+255&255;e.write(r,n);const i=t.a+(255&~n)+1;t.flags=-132&t.flags|128&i|(255&i?0:2)|i>>>8},e.opLax=function(t,e,r){t.a=r,t.x=r,n(t,r)},e.opArr=function(t,e,r){t.a=(t.a&r)>>>1|(1&t.flags?128:0),t.flags=-196&t.flags|(64&t.a)>>>6|(t.a?0:2)|128&t.a|64&t.a^(32&t.a)<<1},e.opSlo=function(t,e,r){let i=e.read(r);t.flags=-2&t.flags|i>>>7,i=i<<1&255,e.write(r,i),t.a=t.a|i,n(t,t.a)},e.opAax=function(t,e,r){const i=t.x&t.a;e.write(r,i),n(t,i)},e.opLar=function(t,e,r){t.s=t.a=t.x=t.s&r,n(t,t.a)},e.opIsc=function(t,e,r){const n=e.read(r)+1&255;e.write(r,n),s(t,0,n)},e.opAac=function(t,e,r){t.a&=r,n(t,t.a),t.flags=-2&t.flags|(128&t.a)>>>7},e.opAtx=function(t,e,r){t.a&=r,t.x=t.a,n(t,t.a)},e.opRra=function(t,e,r){const n=e.read(r),a=n>>>1|(1&t.flags)<<7;e.write(r,a),t.flags=-2&t.flags|1&n,i(t,0,a)},e.opRla=function(t,e,r){const n=e.read(r),i=n<<1&255|1&t.flags;e.write(r,i),t.flags=-2&t.flags|n>>>7,a(t,0,i)}},5264:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=n.__importDefault(r(697)),a=r(8931),s=r(3061),o=n.__importStar(r(2049)),u=r(369),c=r(1485);e.default=class{constructor(t){this._state=t}compile(t){const e=i.default.opcodes[t];switch(e.operation){case 0:return this._createAddressing(e.addressingMode,o.adc,{deref:!0});case 1:return this._createAddressing(e.addressingMode,((t,e)=>o.genUnary(t,e,((t,e)=>e.a=e.a&t))),{deref:!0});case 2:return 0===e.addressingMode?(0,s.nullaryOneCycle)(this._state,o.aslImmediate):this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,o.aslRmw).reset,{writeOp:!0});case 6:return this._createAddressing(e.addressingMode,o.bit,{deref:!0});case 10:return(0,c.brk)(this._state);case 17:return this._createAddressing(e.addressingMode,((t,e)=>(o.cmp(t,e,(t=>t.a)),null)),{deref:!0});case 18:return this._createAddressing(e.addressingMode,((t,e)=>(o.cmp(t,e,(t=>t.x)),null)),{deref:!0});case 19:return this._createAddressing(e.addressingMode,((t,e)=>(o.cmp(t,e,(t=>t.y)),null)),{deref:!0});case 20:return this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,((t,e)=>o.genRmw(t,e,(t=>t-1&255)))).reset,{writeOp:!0});case 21:return(0,s.nullaryOneCycle)(this._state,(t=>o.genNullary(t,(t=>t.x=t.x-1&255))));case 22:return(0,s.nullaryOneCycle)(this._state,(t=>o.genNullary(t,(t=>t.y=t.y-1&255))));case 24:return this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,((t,e)=>o.genRmw(t,e,(t=>t+1&255)))).reset,{writeOp:!0});case 25:return(0,s.nullaryOneCycle)(this._state,(t=>o.genNullary(t,(t=>t.x=t.x+1&255))));case 26:return(0,s.nullaryOneCycle)(this._state,(t=>o.genNullary(t,(t=>t.y=t.y+1&255))));case 23:return this._createAddressing(e.addressingMode,((t,e)=>o.genUnary(t,e,((t,e)=>e.a=e.a^t))),{deref:!0});case 27:return this._createAddressing(e.addressingMode,((t,e)=>(e.p=t,null)));case 28:return(0,s.jsr)(this._state);case 29:return this._createAddressing(e.addressingMode,((t,e)=>o.genUnary(t,e,((t,e)=>e.a=t))),{deref:!0});case 30:return this._createAddressing(e.addressingMode,((t,e)=>o.genUnary(t,e,((t,e)=>e.x=t))),{deref:!0});case 31:return this._createAddressing(e.addressingMode,((t,e)=>o.genUnary(t,e,((t,e)=>e.y=t))),{deref:!0});case 32:return 0===e.addressingMode?(0,s.nullaryOneCycle)(this._state,o.lsrImmediate):this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,o.lsrRmw).reset,{writeOp:!0});case 33:return(0,s.nullaryOneCycle)(this._state,(()=>{}));case 34:return this._createAddressing(e.addressingMode,((t,e)=>o.genUnary(t,e,((t,e)=>e.a|=t))),{deref:!0});case 35:return(0,s.push)(this._state,(t=>t.a));case 36:return(0,s.push)(this._state,(t=>16|t.flags));case 37:return(0,s.pull)(this._state,((t,e)=>o.genNullary(t,(t=>t.a=e))));case 38:return(0,s.pull)(this._state,((t,e)=>t.flags=-17&(32|e)));case 39:return 0===e.addressingMode?(0,s.nullaryOneCycle)(this._state,o.rolImmediate):this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,o.rolRmw).reset,{writeOp:!0});case 40:return 0===e.addressingMode?(0,s.nullaryOneCycle)(this._state,o.rorImmediate):this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,o.rorRmw).reset,{writeOp:!0});case 41:return(0,s.rti)(this._state);case 42:return(0,s.rts)(this._state);case 43:return this._createAddressing(e.addressingMode,o.sbc,{deref:!0});case 48:return this._createAddressing(e.addressingMode,(0,s.write)(this._state,(t=>t.x)).reset,{writeOp:!0});case 49:return this._createAddressing(e.addressingMode,(0,s.write)(this._state,(t=>t.y)).reset,{writeOp:!0});case 50:return(0,s.nullaryOneCycle)(this._state,(t=>o.genNullary(t,(t=>t.x=t.a))));case 51:return(0,s.nullaryOneCycle)(this._state,(t=>o.genNullary(t,(t=>t.y=t.a))));case 52:return(0,s.nullaryOneCycle)(this._state,(t=>o.genNullary(t,(t=>t.x=t.s))));case 53:return(0,s.nullaryOneCycle)(this._state,(t=>o.genNullary(t,(t=>t.a=t.x))));case 54:return(0,s.nullaryOneCycle)(this._state,(t=>t.s=t.x));case 55:return(0,s.nullaryOneCycle)(this._state,(t=>o.genNullary(t,(t=>t.a=t.y))));case 3:return(0,s.branch)(this._state,(t=>0==(1&t)));case 4:return(0,s.branch)(this._state,(t=>(1&t)>0));case 8:return(0,s.branch)(this._state,(t=>0==(2&t)));case 5:return(0,s.branch)(this._state,(t=>(2&t)>0));case 9:return(0,s.branch)(this._state,(t=>0==(128&t)));case 7:return(0,s.branch)(this._state,(t=>(128&t)>0));case 11:return(0,s.branch)(this._state,(t=>0==(64&t)));case 12:return(0,s.branch)(this._state,(t=>(64&t)>0));case 44:return(0,s.nullaryOneCycle)(this._state,(t=>t.flags|=1));case 45:return(0,s.nullaryOneCycle)(this._state,(t=>t.flags|=8));case 46:return(0,s.nullaryOneCycle)(this._state,(t=>t.flags|=4));case 47:return this._createAddressing(e.addressingMode,(0,s.write)(this._state,(t=>t.a)).reset,{writeOp:!0});case 13:return(0,s.nullaryOneCycle)(this._state,(t=>t.flags&=-2));case 14:return(0,s.nullaryOneCycle)(this._state,(t=>t.flags&=-9));case 15:return(0,s.nullaryOneCycle)(this._state,(t=>t.flags&=-5));case 16:return(0,s.nullaryOneCycle)(this._state,(t=>t.flags&=-65));case 56:case 57:return this._createAddressing(e.addressingMode,(()=>null),{deref:!0});case 67:return this._createAddressing(e.addressingMode,o.aac);case 64:return this._createAddressing(e.addressingMode,(0,s.write)(this._state,o.aax).reset,{writeOp:!0});case 58:return this._createAddressing(e.addressingMode,o.alr,{deref:!0});case 62:return this._createAddressing(e.addressingMode,((t,e)=>(o.arr(t,e),null)),{deref:!0});case 59:return this._createAddressing(e.addressingMode,o.axs,{deref:!0});case 68:return this._createAddressing(e.addressingMode,((t,e)=>o.genUnary(t,e,((t,e)=>e.x=e.a=e.a&t))),{deref:!0});case 60:return this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,o.dcp).reset,{writeOp:!0});case 66:return this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,o.isc).reset,{writeOp:!0});case 61:return this._createAddressing(e.addressingMode,((t,e)=>o.genUnary(t,e,((t,e)=>e.a=e.x=t))),{deref:!0});case 65:return this._createAddressing(e.addressingMode,((t,e)=>o.genUnary(t,e,((t,e)=>e.s=e.x=e.a=e.s&t))),{deref:!0});case 70:return this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,o.rla).reset,{writeOp:!0});case 69:return this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,o.rra).reset,{writeOp:!0});case 63:return this._createAddressing(e.addressingMode,(0,s.readModifyWrite)(this._state,o.slo).reset,{writeOp:!0});default:return null}}_createAddressing(t,e,{deref:r=!1,writeOp:n=!1}={}){switch(r&&1!==t&&(e=(0,a.dereference)(this._state,e).reset),t){case 1:return(0,a.immediate)(this._state,e);case 2:return(0,a.zeroPage)(this._state,e);case 3:return(0,a.absolute)(this._state,e);case 6:return(0,a.zeroPageX)(this._state,e);case 9:return(0,a.zeroPageY)(this._state,e);case 7:return(0,a.absoluteX)(this._state,e,n);case 10:return(0,a.absoluteY)(this._state,e,n);case 8:return(0,a.indexedIndirectX)(this._state,e);case 11:return(0,a.indirectIndexedY)(this._state,e,n);case 4:return(0,u.indirect)(this._state,e);default:throw new Error(`invalid addressing mode ${t}`)}}}},9022:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.cycleType=0,this.address=0,this.value=0,this.pollInterrupts=!1,this.nextStep=null}read(t,e){return this.cycleType=0,this.address=e,this.nextStep=t,this}write(t,e,r){return this.cycleType=1,this.address=e,this.value=r,this.nextStep=t,this}poll(t){return this.pollInterrupts=t,this}}},1324:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.absolute=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchLo,this._state.p),this._fetchLo=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchHi,this._state.p)),this._fetchHi=t=>(this._operand|=t<<8,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new a.default,this._state=t,this._next=e,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchLo",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchHi",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_next",void 0),e.absolute=(t,e)=>new o(t,e)},195:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.absoluteY=e.absoluteX=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e,r=(()=>null),n=!1){this.reset=()=>this._result.read(this._fetchLo,this._state.p),this._fetchLo=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchHi,this._state.p)),this._fetchHi=t=>{this._operand|=t<<8,this._state.p=this._state.p+1&65535;const e=this._indexExtractor(this._state);return this._carry=(255&this._operand)+e>255,this._operand=65280&this._operand|this._operand+e&255,this._carry||this._writeOp?this._result.read(this._dereferenceAndCarry,this._operand):this._next(this._operand,this._state)},this._dereferenceAndCarry=t=>(this._carry&&(this._operand=this._operand+256&65535),this._next(this._operand,this._state)),this._operand=0,this._carry=!1,this._result=new a.default,this._state=t,this._indexExtractor=e,this._next=r,this._writeOp=n,(0,s.freezeImmutables)(this)}static absoluteX(t,e,r){return new o(t,(t=>t.x),e,r)}static absoluteY(t,e,r){return new o(t,(t=>t.y),e,r)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchLo",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchHi",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dereferenceAndCarry",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_indexExtractor",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_next",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Boolean)],o.prototype,"_writeOp",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[i.default.State,Function,Boolean]),n.__metadata("design:returntype",o)],o,"absoluteX",null),n.__decorate([s.Immutable,n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[i.default.State,Function,Boolean]),n.__metadata("design:returntype",o)],o,"absoluteY",null),e.absoluteX=(t,e,r)=>o.absoluteX(t,e,r),e.absoluteY=(t,e,r)=>o.absoluteY(t,e,r)},9125:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dereference=void 0;const n=r(655),i=n.__importDefault(r(9022)),a=r(3272),s=n.__importDefault(r(4874));class o{constructor(t,e=(()=>null)){this.reset=t=>this._result.read(this._dereference,t),this._dereference=t=>this._next(t,this._state),this._result=new i.default,this._next=e,this._state=t,(0,a.freezeImmutables)(this)}}n.__decorate([a.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([a.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dereference",void 0),n.__decorate([a.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([a.Immutable,n.__metadata("design:type",s.default.State)],o.prototype,"_state",void 0),n.__decorate([a.Immutable,n.__metadata("design:type",Function)],o.prototype,"_next",void 0),e.dereference=(t,e)=>new o(t,e)},8914:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.immediate=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchOperand,this._state.p),this._fetchOperand=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new a.default,this._state=t,this._next=e,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchOperand",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_next",void 0),e.immediate=(t,e)=>new o(t,e)},8931:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zeroPageY=e.zeroPageX=e.zeroPage=e.indirectIndexedY=e.indexedIndirectX=e.immediate=e.dereference=e.absoluteY=e.absoluteX=e.absolute=void 0;var n=r(1324);Object.defineProperty(e,"absolute",{enumerable:!0,get:function(){return n.absolute}});var i=r(195);Object.defineProperty(e,"absoluteX",{enumerable:!0,get:function(){return i.absoluteX}}),Object.defineProperty(e,"absoluteY",{enumerable:!0,get:function(){return i.absoluteY}});var a=r(9125);Object.defineProperty(e,"dereference",{enumerable:!0,get:function(){return a.dereference}});var s=r(8914);Object.defineProperty(e,"immediate",{enumerable:!0,get:function(){return s.immediate}});var o=r(7734);Object.defineProperty(e,"indexedIndirectX",{enumerable:!0,get:function(){return o.indexedIndirectX}});var u=r(7466);Object.defineProperty(e,"indirectIndexedY",{enumerable:!0,get:function(){return u.indirectIndexedY}});var c=r(3599);Object.defineProperty(e,"zeroPage",{enumerable:!0,get:function(){return c.zeroPage}});var l=r(3799);Object.defineProperty(e,"zeroPageX",{enumerable:!0,get:function(){return l.zeroPageX}}),Object.defineProperty(e,"zeroPageY",{enumerable:!0,get:function(){return l.zeroPageY}})},7734:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.indexedIndirectX=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._address=t,this._state.p=this._state.p+1&65535,this._result.read(this._addIndex,this._address)),this._addIndex=t=>(this._address=this._address+this._state.x&255,this._result.read(this._fetchLo,this._address)),this._fetchLo=t=>(this._operand=t,this._address=this._address+1&255,this._result.read(this._fetchHi,this._address)),this._fetchHi=t=>(this._operand|=t<<8,this._next(this._operand,this._state)),this._operand=0,this._address=0,this._result=new a.default,this._state=t,this._next=e,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchAddress",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_addIndex",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchLo",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchHi",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_next",void 0),e.indexedIndirectX=(t,e)=>new o(t,e)},369:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.indirect=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchAddressLo,this._state.p),this._fetchAddressLo=t=>(this._address=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchAddressHi,this._state.p)),this._fetchAddressHi=t=>(this._address|=t<<8,this._state.p=this._state.p+1&65535,this._result.read(this._fetchLo,this._address)),this._fetchLo=t=>(this._operand=t,255==(255&this._address)?this._address&=65280:this._address=this._address+1&65535,this._result.read(this._fetchHi,this._address)),this._fetchHi=t=>(this._operand|=t<<8,this._next(this._operand,this._state)),this._operand=0,this._address=0,this._result=new a.default,this._state=t,this._next=e,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchAddressLo",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchAddressHi",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchLo",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchHi",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_next",void 0),e.indirect=(t,e)=>new o(t,e)},7466:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.indirectIndexedY=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e=(()=>null),r){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._address=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchLo,this._address)),this._fetchLo=t=>(this._operand=t,this._address=this._address+1&255,this._result.read(this._fetchHi,this._address)),this._fetchHi=t=>(this._operand|=t<<8,this._carry=(255&this._operand)+this._state.y>255,this._operand=65280&this._operand|this._operand+this._state.y&255,this._carry||this._writeOp?this._result.read(this._dereferenceAndCarry,this._operand):this._next(this._operand,this._state)),this._dereferenceAndCarry=t=>(this._carry&&(this._operand=this._operand+256&65535),this._next(this._operand,this._state)),this._operand=0,this._address=0,this._carry=!1,this._result=new a.default,this._state=t,this._next=e,this._writeOp=r,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchAddress",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchLo",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchHi",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dereferenceAndCarry",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_next",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Boolean)],o.prototype,"_writeOp",void 0),e.indirectIndexedY=(t,e,r)=>new o(t,e,r)},3599:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zeroPage=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new a.default,this._state=t,this._next=e,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchAddress",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_next",void 0),e.zeroPage=(t,e)=>new o(t,e)},3799:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zeroPageY=e.zeroPageX=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e,r){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._result.read(this._addIndex,this._operand)),this._addIndex=t=>(this._operand=this._operand+this._indexExtractor(this._state)&255,this._next(this._operand,this._state)),this._operand=0,this._result=new a.default,this._state=t,this._indexExtractor=e,this._next=r,(0,s.freezeImmutables)(this)}static zeroPageX(t,e=(()=>null)){return new o(t,(t=>t.x),e)}static zeroPageY(t,e=(()=>null)){return new o(t,(t=>t.y),e)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchAddress",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_addIndex",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_next",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_indexExtractor",void 0),e.zeroPageX=(t,e)=>o.zeroPageX(t,e),e.zeroPageY=(t,e)=>o.zeroPageY(t,e)},806:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.branch=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e){this.reset=()=>this._result.read(this._fetchTarget,this._state.p).poll(!0),this._fetchTarget=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._predicate(this._state.flags)?this._result.read(this._firstDummyRead,this._state.p):null),this._firstDummyRead=t=>(this._target=this._state.p+(128&this._operand?this._operand-256:this._operand)&65535,(65280&this._target)==(65280&this._state.p)?(this._state.p=this._target,null):this._result.read(this._secondDummyRead,65280&this._state.p|255&this._target).poll(!0)),this._secondDummyRead=t=>(this._state.p=this._target,null),this._target=0,this._operand=0,this._result=new a.default,this._state=t,this._predicate=e,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchTarget",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_firstDummyRead",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_secondDummyRead",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_predicate",void 0),e.branch=(t,e)=>new o(t,e)},3061:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.write=e.rti=e.push=e.pull=e.nullaryOneCycle=e.rts=e.readModifyWrite=e.jsr=e.branch=void 0;var n=r(806);Object.defineProperty(e,"branch",{enumerable:!0,get:function(){return n.branch}});var i=r(8808);Object.defineProperty(e,"jsr",{enumerable:!0,get:function(){return i.jsr}});var a=r(9958);Object.defineProperty(e,"readModifyWrite",{enumerable:!0,get:function(){return a.readModifyWrite}});var s=r(9133);Object.defineProperty(e,"rts",{enumerable:!0,get:function(){return s.rts}});var o=r(8542);Object.defineProperty(e,"nullaryOneCycle",{enumerable:!0,get:function(){return o.nullaryOneCycle}});var u=r(9e3);Object.defineProperty(e,"pull",{enumerable:!0,get:function(){return u.pull}});var c=r(2786);Object.defineProperty(e,"push",{enumerable:!0,get:function(){return c.push}});var l=r(274);Object.defineProperty(e,"rti",{enumerable:!0,get:function(){return l.rti}});var h=r(7290);Object.defineProperty(e,"write",{enumerable:!0,get:function(){return h.write}})},8808:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.jsr=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t){this.reset=()=>this._result.read(this._fetchPcl,this._state.p),this._fetchPcl=t=>(this._addressLo=t,this._state.p=this._state.p+1&65535,this._result.read(this._dummyStackRead,256+this._state.s)),this._dummyStackRead=()=>this._result.write(this._pushPch,256+this._state.s,this._state.p>>>8),this._pushPch=()=>(this._state.s=this._state.s-1&255,this._result.write(this._pushPcl,256+this._state.s,255&this._state.p)),this._pushPcl=()=>(this._state.s=this._state.s-1&255,this._result.read(this._fetchPch,this._state.p)),this._fetchPch=t=>(this._state.p=this._addressLo|t<<8,null),this._addressLo=0,this._result=new a.default,this._state=t,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchPcl",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dummyStackRead",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_pushPch",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_pushPcl",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchPch",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),e.jsr=t=>new o(t)},8542:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nullaryOneCycle=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e){this.reset=()=>this._result.read(this._executeOperation,this._state.p).poll(!0),this._executeOperation=()=>(this._operation(this._state),null),this._result=new a.default,this._state=t,this._operation=e,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_executeOperation",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_operation",void 0),e.nullaryOneCycle=(t,e)=>new o(t,e)},9e3:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pull=void 0;const n=r(655),i=r(3272),a=n.__importDefault(r(9022)),s=n.__importDefault(r(4874));class o{constructor(t,e){this.reset=()=>this._result.read(this._dummyRead,this._state.p).poll(!0),this._dummyRead=()=>this._result.read(this._incrementS,256+this._state.s),this._incrementS=()=>(this._state.s=this._state.s+1&255,this._result.read(this._pull,256+this._state.s)),this._pull=t=>(this._operation(this._state,t),null),this._result=new a.default,this._state=t,this._operation=e,(0,i.freezeImmutables)(this)}}n.__decorate([i.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dummyRead",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",Object)],o.prototype,"_incrementS",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",Object)],o.prototype,"_pull",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",s.default.State)],o.prototype,"_state",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",Function)],o.prototype,"_operation",void 0),e.pull=(t,e)=>new o(t,e)},2786:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.push=void 0;const n=r(655),i=r(3272),a=n.__importDefault(r(4874)),s=n.__importDefault(r(9022));class o{constructor(t,e){this.reset=()=>this._result.read(this._dummyRead,this._state.p),this._dummyRead=()=>this._result.write(this._push,256+this._state.s,this._operation(this._state)),this._push=()=>(this._state.s=this._state.s-1&255,null),this._result=new s.default,this._state=t,this._operation=e,(0,i.freezeImmutables)(this)}}n.__decorate([i.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dummyRead",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",Object)],o.prototype,"_push",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",a.default.State)],o.prototype,"_state",void 0),n.__decorate([i.Immutable,n.__metadata("design:type",Function)],o.prototype,"_operation",void 0),e.push=(t,e)=>new o(t,e)},9958:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readModifyWrite=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e){this.reset=t=>(this._address=t,this._result.read(this._read,t)),this._read=t=>(this._operand=t,this._result.write(this._dummyWrite,this._address,this._operand)),this._dummyWrite=t=>this._result.write(this._write,this._address,this._operation(this._operand,this._state)),this._write=()=>null,this._result=new a.default,this._state=t,this._operation=e,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_read",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dummyWrite",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_write",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_operation",void 0),e.readModifyWrite=(t,e)=>new o(t,e)},274:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rti=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t){this.reset=()=>this._result.read(this._dummyOperandRead,this._state.p),this._dummyOperandRead=()=>this._result.read(this._dummyStackRead,256+this._state.s),this._dummyStackRead=()=>(this._state.s=this._state.s+1&255,this._result.read(this._popP,256+this._state.s)),this._popP=t=>(this._state.flags=-17&(32|t),this._state.s=this._state.s+1&255,this._result.read(this._popPcl,256+this._state.s)),this._popPcl=t=>(this._state.p=65280&this._state.p|t,this._state.s=this._state.s+1&255,this._result.read(this._popPch,256+this._state.s)),this._popPch=t=>(this._state.p=255&this._state.p|t<<8,null),this._result=new a.default,this._state=t,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dummyOperandRead",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dummyStackRead",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_popP",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_popPcl",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_popPch",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),e.rti=t=>new o(t)},9133:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rts=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t){this.reset=()=>this._result.read(this._dummyOperandRead,this._state.p),this._dummyOperandRead=()=>this._result.read(this._dummyStackRead,256+this._state.s),this._dummyStackRead=()=>(this._state.s=this._state.s+1&255,this._result.read(this._popPcl,256+this._state.s)),this._popPcl=t=>(this._state.p=65280&this._state.p|t,this._state.s=this._state.s+1&255,this._result.read(this._popPch,256+this._state.s)),this._popPch=t=>(this._state.p=255&this._state.p|t<<8,this._result.read(this._incrementP,this._state.p)),this._incrementP=()=>(this._state.p=this._state.p+1&65535,null),this._result=new a.default,this._state=t,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dummyOperandRead",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dummyStackRead",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_popPcl",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_popPch",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_incrementP",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),e.rts=t=>new o(t)},7290:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.write=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e){this.reset=t=>this._result.write((()=>null),t,this._operation(this._state)),this._result=new a.default,this._state=t,this._operation=e,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Function)],o.prototype,"_operation",void 0),e.write=(t,e)=>new o(t,e)},2049:(t,e)=>{"use strict";function r(t,e){e.flags=-131&e.flags|128&t|(t?0:2)}function n(t,e){if(8&e.flags){const r=(15&t)+(15&e.a)+(1&e.flags),n=(t>>>4)+(e.a>>>4)+(r>9?1:0);e.a=r%10|n%10<<4,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|(n>9?1:0)}else{const r=e.a+t+(1&e.flags),n=255&r;e.flags=-196&e.flags|128&n|(n?0:2)|r>>>8|(~(t^e.a)&(n^t)&128)>>>1,e.a=n}return null}function i(t,e){if(8&e.flags){const r=(15&e.a)-(15&t)-(1&~e.flags),n=(e.a>>>4)-(t>>>4)-(r<0?1:0);e.a=(r<0?10+r:r)|(n<0?10+n:n)<<4,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|(n<0?0:1)}else{t=255&~t;const r=e.a+t+(1&e.flags),n=255&r;e.flags=-196&e.flags|128&n|(n?0:2)|r>>>8|(~(t^e.a)&(n^t)&128)>>>1,e.a=n}return null}Object.defineProperty(e,"__esModule",{value:!0}),e.aac=e.isc=e.aax=e.slo=e.rla=e.rra=e.axs=e.dcp=e.alr=e.arr=e.rorRmw=e.rorImmediate=e.rolRmw=e.rolImmediate=e.lsrRmw=e.lsrImmediate=e.sbc=e.cmp=e.bit=e.aslRmw=e.aslImmediate=e.adc=e.genUnary=e.genNullary=e.genRmw=void 0,e.genRmw=function(t,e,n){const i=n(t);return r(i,e),i},e.genNullary=function(t,e){r(e(t),t)},e.genUnary=function(t,e,n){return r(n(t,e),e),null},e.adc=n,e.aslImmediate=function(t){const e=t.a;t.a=t.a<<1&255,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7},e.aslRmw=function(t,e){const r=t<<1&255;return e.flags=-132&e.flags|128&r|(r?0:2)|t>>>7,r},e.bit=function(t,e){return e.flags=-195&e.flags|192&t|(t&e.a?0:2),null},e.cmp=function(t,e,r){const n=r(e)+(255&~t)+1;e.flags=-132&e.flags|128&n|(255&n?0:2)|n>>>8},e.sbc=i,e.lsrImmediate=function(t){const e=t.a;t.a=t.a>>>1,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e},e.lsrRmw=function(t,e){const r=t>>>1;return e.flags=-132&e.flags|128&r|(r?0:2)|1&t,r},e.rolImmediate=function(t){const e=t.a;t.a=t.a<<1&255|1&t.flags,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7},e.rolRmw=function(t,e){const r=t<<1&255|1&e.flags;return e.flags=-132&e.flags|128&r|(r?0:2)|t>>>7,r},e.rorImmediate=function(t){const e=t.a;t.a=t.a>>>1|(1&t.flags)<<7,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e},e.rorRmw=function(t,e){const r=t>>>1|(1&e.flags)<<7;return e.flags=-132&e.flags|128&r|(r?0:2)|1&t,r},e.arr=function(t,e){e.a=(e.a&t)>>>1|(1&e.flags?128:0),e.flags=-196&e.flags|(64&e.a)>>>6|(e.a?0:2)|128&e.a|64&e.a^(32&e.a)<<1},e.alr=function(t,e){const r=e.a&t;return e.a=r>>>1,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|1&r,null},e.dcp=function(t,e){const r=t+255&255,n=e.a+(255&~r)+1;return e.flags=-132&e.flags|128&n|(255&n?0:2)|n>>>8,r},e.axs=function(t,e){const r=(e.a&e.x)+(255&~t)+1;return e.x=255&r,e.flags=-132&e.flags|128&e.x|(255&e.x?0:2)|r>>>8,null},e.rra=function(t,e){const r=t>>>1|(1&e.flags)<<7;return e.flags=-2&e.flags|1&t,n(r,e),r},e.rla=function(t,e){const n=t<<1&255|1&e.flags;return e.flags=-2&e.flags|t>>>7,r(e.a&=n,e),n},e.slo=function(t,e){e.flags=-2&e.flags|t>>>7;const n=t<<1&255;return e.a=e.a|n,r(e.a,e),n},e.aax=function(t){const e=t.a&t.x;return r(e,t),e},e.isc=function(t,e){const r=t+1&255;return i(r,e),r},e.aac=function(t,e){return e.a&=t,r(e.a,e),e.flags=-2&e.flags|(128&e.a)>>>7,null}},8898:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.boot=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t){this.reset=()=>this._result.read(this._pre1Step,255),this._pre1Step=()=>this._result.read(this._pre2Step,255),this._pre2Step=()=>this._result.read(this._stack1Step,256),this._stack1Step=()=>this._result.read(this._stack2Step,511),this._stack2Step=()=>(this._state.s=253,this._result.read(this._stack3Step,510)),this._stack3Step=()=>this._result.read(this._readTargetLoStep,65532),this._readTargetLoStep=t=>(this._targetAddress=t,this._result.read(this._readTargetHiStep,65533)),this._readTargetHiStep=t=>(this._targetAddress|=t<<8,this._state.p=this._targetAddress,null),this._targetAddress=0,this._result=new a.default,this._state=t,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_pre1Step",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_pre2Step",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_stack1Step",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_stack2Step",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_stack3Step",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_readTargetLoStep",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_readTargetHiStep",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),e.boot=t=>new o(t)},1485:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.irq=e.nmi=e.brk=e.boot=void 0;var n=r(8898);Object.defineProperty(e,"boot",{enumerable:!0,get:function(){return n.boot}});var i=r(2530);Object.defineProperty(e,"brk",{enumerable:!0,get:function(){return i.brk}}),Object.defineProperty(e,"nmi",{enumerable:!0,get:function(){return i.nmi}}),Object.defineProperty(e,"irq",{enumerable:!0,get:function(){return i.irq}})},2530:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nmi=e.irq=e.brk=void 0;const n=r(655),i=n.__importDefault(r(4874)),a=n.__importDefault(r(9022)),s=r(3272);class o{constructor(t,e,r){this.reset=()=>this._result.read(this._dummyRead,this._state.p),this._dummyRead=()=>(this._isBrk&&(this._state.p=this._state.p+1&65535),this._result.write(this._pushPch,256+this._state.s,this._state.p>>>8)),this._pushPch=()=>(this._state.s=this._state.s-1&255,this._result.write(this._pushPcl,256+this._state.s,255&this._state.p).poll(!0)),this._pushPcl=()=>(this._state.s=this._state.s-1&255,this._vector=this._state.nmi?65530:this._defaultVector,this._result.write(this._pushFlags,256+this._state.s,this._isBrk?16|this._state.flags:-17&this._state.flags)),this._pushFlags=()=>(this._state.s=this._state.s-1&255,this._result.read(this._fetchPcl,this._vector)),this._fetchPcl=t=>(this._state.flags|=4,this._state.p=t,this._result.read(this._fetchPch,++this._vector)),this._fetchPch=t=>(this._state.p=this._state.p|t<<8,this._state.nmi=this._state.irq=!1,null),this._vector=0,this._result=new a.default,this._state=t,this._defaultVector=e,this._isBrk=r,(0,s.freezeImmutables)(this)}}n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"reset",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_dummyRead",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_pushPch",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_pushPcl",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_pushFlags",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchPcl",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_fetchPch",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Object)],o.prototype,"_result",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",i.default.State)],o.prototype,"_state",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Number)],o.prototype,"_defaultVector",void 0),n.__decorate([s.Immutable,n.__metadata("design:type",Boolean)],o.prototype,"_isBrk",void 0),e.brk=t=>new o(t,65534,!0),e.irq=t=>new o(t,65534,!1),e.nmi=t=>new o(t,65530,!1)},7451:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655).__importDefault(r(2319));e.default=class{constructor(){this._left=new n.default,this._right=new n.default,this._up=new n.default,this._down=new n.default,this._fire=new n.default}getLeft(){return this._left}getRight(){return this._right}getUp(){return this._up}getDown(){return this._down}getFire(){return this._fire}}},7866:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=r(7819),a=n.__importDefault(r(2319));e.default=class{constructor(){this.valueChanged=new i.Event,this._fireSwitch=new a.default,this._value=.5}setValue(t){this._value=t,this.valueChanged.dispatch(t)}getValue(){return this._value}getFire(){return this._fireSwitch}}},2319:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(7819);e.default=class{constructor(t=!1){this._state=t,this.stateChanged=new n.Event,this.beforeRead=new n.Event}read(){return this.beforeRead.dispatch(this),this._state}peek(){return this._state}toggle(t){this._state!==t&&(this._state=t,this.stateChanged.dispatch(t))}}},1337:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655).__importDefault(r(7438));var i;!function(t){t.create=function(t={}){return Object.assign({tvMode:0,enableAudio:!0,randomSeed:-1,emulatePaddles:!0,frameStart:-1,pcmAudio:!1,cpuType:n.default.Type.stateMachine},t)},t.getClockHz=function(t){switch(t.tvMode){case 0:return 3584160;case 1:case 2:return 3556800}}}(i||(i={})),e.default=i},9823:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655).__importDefault(r(2319));e.default=class{constructor(){this._selectSwitch=new n.default,this._resetButton=new n.default,this._colorSwitch=new n.default,this._difficutlyP0=new n.default,this._difficutlyP1=new n.default}getSelectSwitch(){return this._selectSwitch}getResetButton(){return this._resetButton}getColorSwitch(){return this._colorSwitch}getDifficultySwitchP0(){return this._difficutlyP0}getDifficultySwitchP1(){return this._difficutlyP1}}},1904:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=r(7819),a=n.__importDefault(r(8116)),s=n.__importDefault(r(2982));e.default=class{constructor(){this.trap=new i.Event}init(){return n.__awaiter(this,void 0,void 0,(function*(){}))}reset(){}read(t){return 0}peek(t){return this.read(t)}write(t,e){}getType(){return s.default.CartridgeType.unknown}setCpu(t){return this}setBus(t){return this}setRng(t){return this}setCpuTimeProvider(t){return this}notifyCpuCycleComplete(){}randomize(t){}triggerTrap(t,e){if(!this.trap.hasHandlers)throw new Error(e);this.trap.dispatch(new a.default.TrapPayload(t,this,e))}}},8314:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1904)),a=n.__importDefault(r(2982)),s=n.__importStar(r(789));class o extends i.default{constructor(t){if(super(),this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._bus=null,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){const e=s.searchForSignatures(t,[[173,0,8],[173,64,8],[44,0,8],[12,0,8,76],[12,255,15,76]]);for(const t of e)if(t>=2)return!0;return!1}reset(){this._bank=this._bank0}read(t){return this.peek(t)}peek(t){return t&=4095,this._bank[t]}getType(){return a.default.CartridgeType.bankswitch_8k_econobanking}setBus(t){return this._bus=t,this._bus.event.read.addHandler(this._onBusAccess,this),this._bus.event.write.addHandler(this._onBusAccess,this),this}_onBusAccess(t,e){switch(6208&e._bus.getLastAddresBusValue()){case 2048:e._bank=e._bank0;break;case 2112:e._bank=e._bank1}}}e.default=o},4923:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1904)),a=n.__importStar(r(789)),s=n.__importDefault(r(2982));class o extends i.default{constructor(t){if(super(),this._banks=null,this._ramSelect=!1,this._ramBanks=new Array(256),this._bus=null,0!=(2047&t.length))throw new Error(`buffer length ${t.length} is not a multiple of 2k`);const e=t.length>>>11;if(e<2)throw new Error("image must have at least 2k");this._banks=new Array(e);for(let t=0;t<e;t++)this._banks[t]=new Uint8Array(2048);for(let t=0;t<=255;t++)this._ramBanks[t]=new Uint8Array(1024);this._ramBank=this._ramBanks[0],this._bank1=this._banks[e-1],this._bank0=this._banks[0];for(let r=0;r<2048;r++)for(let n=0;n<e;n++)this._banks[n][r]=t[2048*n+r]}static matchesBuffer(t){return a.searchForSignatures(t,[[133,62,169,0]])[0]>=1}reset(){this._bank0=this._banks[0]}randomize(t){for(let e=0;e<this._ramBanks.length;e++)for(let r=0;r<1024;r++)this._ramBanks[e][r]=t.int(255)}setBus(t){return this._bus=t,this._bus.event.read.addHandler(o._onBusAccess,this),this._bus.event.write.addHandler(o._onBusAccess,this),this}read(t){return t&=4095,this._ramSelect?t<1024?this._ramBank[t]:t<2048?this._ramBank[1023&t]=this._bus.getLastDataBusValue():this._bank1[2047&t]:t<2048?this._bank0[t]:this._bank1[2047&t]}peek(t){return t&=4095,this._ramSelect?t<1024?this._ramBank[t]:t<2048?this._bus.getLastDataBusValue():this._bank1[2047&t]:t<2048?this._bank0[t]:this._bank1[2047&t]}write(t,e){this._ramSelect&&(t&=4095)>=1024&&t<2048&&(this._ramBank[1023&t]=e)}getType(){return s.default.CartridgeType.bankswitch_3E}static _onBusAccess(t,e){switch(e._bus.getLastAddresBusValue()){case 63:e._ramSelect=!1,e._bank0=e._banks[e._bus.getLastDataBusValue()%e._banks.length];break;case 62:e._ramSelect=!0,e._ramBank=e._ramBanks[e._bus.getLastDataBusValue()%32]}}}e.default=o},6549:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1904)),a=n.__importStar(r(789)),s=n.__importDefault(r(2982));class o extends i.default{constructor(t){if(super(),this._banks=new Array(4),this._bus=null,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: invalid length ${t.length}`);for(let t=0;t<4;t++)this._banks[t]=new Uint8Array(2048);this._bank1=this._banks[3],this._bank0=this._banks[0];for(let e=0;e<2048;e++)for(let r=0;r<4;r++)this._banks[r][e]=t[2048*r+e]}static matchesBuffer(t){return a.searchForSignatures(t,[[133,63]])[0]>=2}reset(){this._bank0=this._banks[0]}setBus(t){return this._bus=t,this._bus.event.read.addHandler(o._onBusAccess,this),this._bus.event.write.addHandler(o._onBusAccess,this),this}read(t){return(t&=4095)<2048?this._bank0[t]:this._bank1[2047&t]}getType(){return s.default.CartridgeType.bankswitch_8k_3F}static _onBusAccess(t,e){63===e._bus.getLastAddresBusValue()&&(e._bank0=e._banks[3&e._bus.getLastDataBusValue()])}}e.default=o},9335:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(2593)),a=n.__importDefault(r(1904)),s=n.__importDefault(r(2982)),o=n.__importStar(r(789));class u extends a.default{constructor(t){super(),this._handleBxCDF0=t=>{const e=this._soc.getThumbulator(),r=e.readRegister(2),n=e.readRegister(3);switch(t){case 1762:return this._musicStreams[r%3].frequency=n,0;case 1766:return this._musicStreams[r%3].counter=0,0;case 1770:return e.writeRegister(2,this._musicStreams[r%3].counter),0;case 1774:return this._musicStreams[r%3].waveformSize=n,0}return 3},this._handleBxCDF1=t=>{const e=this._soc.getThumbulator(),r=e.readRegister(2),n=e.readRegister(3);switch(t){case 1874:return this._musicStreams[r%3].frequency=n,0;case 1878:return this._musicStreams[r%3].counter=0,0;case 1882:return e.writeRegister(2,this._musicStreams[r%3].counter),0;case 1886:return this._musicStreams[r%3].waveformSize=n,0}return 3},this._banks=new Array(7),this._currentBank=null,this._rom=null,this._ram=null,this._displayRam=null,this._musicStreams=new Array(3),this._clockAccumulator=0,this._lastCpuTime=0,this._soc=null,this._fastFetch=!1,this._digitalAudio=!1,this._fastJumpCountdown=0,this._fastFetchPending=!1,this._jmpOperandAddress=0,this._ldaOperandAddress=0,this._datastreamBase=0,this._datastreamIncrementBase=0,this._waveformBase=0,this._jumpstream=0,this._jumpstreamMask=0,this._amplitudeStream=0,this._bus=null,this._cpuTimeProvider=null;const e=u.getVersion(t);switch(e){case 0:this._jumpstreamMask=255,this._amplitudeStream=34,this._datastreamBase=1760,this._datastreamIncrementBase=1896,this._waveformBase=2032;break;case 1:this._jumpstreamMask=255,this._amplitudeStream=34,this._datastreamBase=160,this._datastreamIncrementBase=296,this._waveformBase=432;break;case 2:this._jumpstreamMask=254,this._amplitudeStream=35,this._datastreamBase=152,this._datastreamIncrementBase=292,this._waveformBase=432;break;default:throw new Error("not a CDF image: missing signature")}if(32768!==t.length)throw new Error(`not a CDF image: invalid lenght ${t.length}`);this._soc=new i.default(0===e?this._handleBxCDF0:this._handleBxCDF1),this._soc.trap.addHandler((t=>this.triggerTrap(2,t))),this._rom=this._soc.getRom();for(let e=0;e<32768;e++)this._rom[e]=t[e];for(let t=0;t<7;t++)this._banks[t]=new Uint8Array(this._rom.buffer,4096*(t+1),4096);this._ram=this._soc.getRam(),this._displayRam=new Uint8Array(this._soc.getRam().buffer,2048,4096);for(let t=0;t<3;t++)this._musicStreams[t]=new c;this.reset()}static getVersion(t){const e="CDF".split("").map((t=>t.charCodeAt(0))),r=o.searchForSignature(t,[...e,-1,...e,-1,...e]);if(r<0)return 3;switch(t[r+3]){case 0:return 0;case 1:return 1;case"J".charCodeAt(0):return 2;default:return 3}}static matchesBuffer(t){return 3!==u.getVersion(t)}init(){return this._soc.init()}reset(){for(let t=0;t<512;t++)this._soc.setRam32(t<<2,this._soc.getRom32(t<<2));this._fastFetch=!1,this._digitalAudio=!1,this._fastJumpCountdown=0,this._fastFetchPending=!1,this._jmpOperandAddress=0,this._ldaOperandAddress=0,this._currentBank=this._banks[6];for(let t=0;t<3;t++)this._musicStreams[t].reset();this._lastCpuTime=0,this._clockAccumulator=0}getType(){return s.default.CartridgeType.bankswitch_cdf}setBus(t){return this._bus=t,this}setCpuTimeProvider(t){return this._cpuTimeProvider=t,this}read(t){return this._access(t,this._bus.getLastDataBusValue())}peek(t){return this._currentBank[4095&t]}write(t,e){this._access(t,e)}_access(t,e){t&=4095;const r=this._currentBank[t];if(this._fastJumpCountdown-- >0&&t===this._jmpOperandAddress)return this._jmpOperandAddress++,this._datastreamReadWithIncrement(this._jumpstream,256);if(this._fastFetch&&76===r&&0==(this._currentBank[t+1&4095]&this._jumpstreamMask)&&0===this._currentBank[t+2&4095])return this._fastJumpCountdown=2,this._jmpOperandAddress=t+1&4095,this._jumpstream=33+this._currentBank[t+1&4095],r;if(this._fastJumpCountdown=0,this._fastFetch&&this._fastFetchPending&&this._ldaOperandAddress===t&&r<=this._amplitudeStream){if(this._fastFetchPending=!1,r===this._amplitudeStream){if(this._clockMusicStreams(),this._digitalAudio){const t=this._musicStreams[0].counter,e=this._soc.getRam32(this._waveformBase)+(t>>>21);let r=0;return e<32768&&(r=this._rom[e]),e>1073741824&&e<1073750016&&(r=this._ram[e-1073741824]),0==(1048576&t)&&(r>>>=4),15&r}{let t=0;for(let e=0;e<3;e++)t+=this._displayRam[this._getWaveform(e)+(this._musicStreams[e].counter>>>this._musicStreams[e].waveformSize)&4095];return t}}return this._datastreamRead(r)}if(this._fastFetchPending=!1,t>=4080){switch(t){case 4080:this._datastreamWriteWithIncrement(32,e,256);break;case 4081:{let t=this._getDatastreamPointer(32);t<<=8,t&=4026531840,t|=e<<20,this._setDatastreamPointer(32,t);break}case 4082:this._fastFetch=0==(15&e),this._digitalAudio=0==(240&e);break;case 4083:switch(e){case 254:case 255:this._soc.run(2059)}}t>4084&&t<4092&&(this._currentBank=this._banks[t-4085])}return this._fastFetch&&169===r&&(this._fastFetchPending=!0,this._ldaOperandAddress=t+1&4095),r}_clockMusicStreams(){const t=this._cpuTimeProvider();this._clockAccumulator+=2e4*(t-this._lastCpuTime),this._lastCpuTime=t;const e=Math.floor(this._clockAccumulator);if(this._clockAccumulator-=e,0!==e)for(let t=0;t<3;t++)this._musicStreams[t].increment(e)}_getDatastreamPointer(t){return this._soc.getRam32(this._datastreamBase+4*t)}_setDatastreamPointer(t,e){this._soc.setRam32(this._datastreamBase+4*t,e)}_getDatastreamIncrement(t){return this._soc.getRam32(this._datastreamIncrementBase+4*t)}_datastreamRead(t){const e=this._getDatastreamPointer(t),r=this._displayRam[e>>>20];return this._setDatastreamPointer(t,e+(this._getDatastreamIncrement(t)<<12)|0),r}_datastreamReadWithIncrement(t,e){const r=this._getDatastreamPointer(t),n=this._displayRam[r>>>20];return this._setDatastreamPointer(t,r+(e<<12)|0),n}_datastreamWriteWithIncrement(t,e,r){const n=this._getDatastreamPointer(t);this._displayRam[n>>>20]=e,this._setDatastreamPointer(t,n+(r<<12)|0)}_getWaveform(t){return this._soc.getRam32(this._waveformBase+4*t)-1073741824-2048&4095}}e.default=u;class c{constructor(){this.counter=0,this.frequency=0,this.waveformSize=27}reset(){this.counter=this.frequency=0,this.waveformSize=27}increment(t){this.counter=this.counter+t*this.frequency|0}}},87:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=n.__importDefault(r(1904)),a=n.__importDefault(r(2982)),s=r(789);class o extends i.default{constructor(t){if(super(),this._rom=new Uint8Array(2048),this._ram=new Uint8Array(1024),2048!==t.length)throw new Error(`buffer is not a 2k cartridge image: wrong length ${t.length}`);for(let e=0;e<2048;e++)this._rom[e]=t[e]}static matchesBuffer(t){const e=(0,s.searchForSignatures)(t,[[157,255,243],[153,0,244]]);return e[0]>0||e[1]>0}setBus(t){return this._bus=t,this}randomize(t){for(let e=0;e<1024;e++)this._ram[e]=t.int(255)}read(t){return(t&=4095)<1024?this._ram[t]:t<2048?this._ram[1023&t]=this._bus.getLastDataBusValue():this._rom[2047&t]}write(t,e){(t&=4095)>=1024&&t<2048&&(this._ram[1023&t]=e)}peek(t){return(t&=4095)<1024?this._ram[t]:t<2048?0:this._rom[2047&t]}getType(){return a.default.CartridgeType.bankswitch_2k_cv}}e.default=o},7440:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(2593)),a=n.__importDefault(r(1904)),s=n.__importDefault(r(2982)),o=n.__importStar(r(789));class u extends a.default{constructor(t){if(super(),this._banks=new Array(6),this._fetchers=new Array(8),this._fractionalFetchers=new Array(8),this._musicFetchers=new Array(3),this._parameters=new Uint8Array(8),this._parameterIndex=0,this._rng=0,this._clockAccumulator=0,this._lastCpuTime=0,this._fastFetch=!1,this._ldaPending=!1,this._cpuTimeProvider=null,this._soc=new i.default,t.length<28672||t.length>32768)throw new Error(`not a DPC+ image: invalid lenght ${t.length}`);this._rom=this._soc.getRom();for(let t=0;t<6;t++)this._banks[t]=new Uint8Array(this._rom.buffer,3072+4096*t,4096);this._ram=this._soc.getRam(),this._imageRam=new Uint8Array(this._ram.buffer,3072,4096);const e=32768-t.length;for(let r=0;r<t.length;r++)this._rom[e+r]=t[r];for(let t=0;t<8;t++)this._fetchers[t]=new c,this._fractionalFetchers[t]=new l;for(let t=0;t<3;t++)this._musicFetchers[t]=new h;this._soc.trap.addHandler((t=>this.triggerTrap(2,t))),this.reset()}static matchesBuffer(t){return 2===o.searchForSignatures(t,["DPC+".split("").map((t=>t.charCodeAt(0)))])[0]}init(){return this._soc.init()}reset(){this._soc.reset(),this._currentBank=this._banks[5];for(let t=0;t<768;t++)this._soc.setRam32(t<<2,this._soc.getRom32(t<<2));for(let t=6912;t<8192;t++)this._soc.setRam32(768+t-6912<<2,this._soc.getRom32(t<<2));this._currentBank=this._banks[5];for(let t=0;t<8;t++)this._parameters[t]=0;for(let t=0;t<8;t++)this._fetchers[t].reset(),this._fractionalFetchers[t].reset();for(let t=0;t<3;t++)this._musicFetchers[t].reset();this._parameterIndex=0,this._fastFetch=this._ldaPending=!1,this._rng=725831748,this._lastCpuTime=0,this._clockAccumulator=0}getType(){return s.default.CartridgeType.bankswitch_dpc_plus}setBus(t){return this._bus=t,this}setCpuTimeProvider(t){return this._cpuTimeProvider=t,this}read(t){return this._access(t,this._bus.getLastDataBusValue())}peek(t){return this._currentBank[4095&t]}write(t,e){this._access(t,e)}triggerTrap(t,e){super.triggerTrap(t,e)}_access(t,e){t&=4095;const r=this._currentBank[t];if(this._fastFetch&&this._ldaPending&&t>127&&t<4086&&r<40&&(t=r),this._ldaPending=!1,t<40){const e=7&t,r=this._fetchers[e],n=this._fractionalFetchers[e];let i=0;switch(t>>>3&7){case 0:switch(e){case 0:return this._advanceRng(),255&this._rng;case 1:return this._rewindRng(),255&this._rng;case 2:return this._rng>>>8&255;case 3:return this._rng>>>16&255;case 4:return this._rng>>>24&255;case 5:{this._clockMusicFetchers();let t=0;for(let e=0;e<3;e++)t+=this._imageRam[(this._musicFetchers[e].waveform<<5)+this._musicFetchers[e].waveformSample()];return 255&t}}return 0;case 1:return i=this._imageRam[r.pointer],r.increment(),i;case 2:return i=this._imageRam[r.pointer]&r.mask(),r.increment(),i;case 3:return i=this._imageRam[n.pointer>>>8],n.increment(),i;case 4:return e<4?r.mask():0;default:return 0}}else if(t<128){const r=7&t,n=this._fetchers[r],i=this._fractionalFetchers[r];switch(t-40>>>3&15){case 0:i.setPointerLo(e);break;case 1:i.setPointerHi(e);break;case 2:i.setFraction(e);break;case 3:n.top=e;break;case 4:n.bottom=e;break;case 5:n.setPointerLo(e);break;case 6:switch(r){case 0:this._fastFetch=0===e;break;case 1:this._parameterIndex<8&&(this._parameters[this._parameterIndex++]=e);break;case 2:this._dispatchFunction(e);break;case 5:case 6:case 7:this._musicFetchers[r-5].waveform=127&e}break;case 7:n.decrement(),this._imageRam[n.pointer]=e;break;case 8:n.setPointerHi(e);break;case 9:switch(r){case 0:this._rng=725831748;break;case 1:this._rng=4294967040&this._rng|e;break;case 2:this._rng=4294902015&this._rng|e<<8;break;case 3:this._rng=4278255615&this._rng|e<<16;break;case 4:this._rng=16777215&this._rng|e<<24;break;case 5:case 6:case 7:this._musicFetchers[r-5].frequency=this._soc.getRam32(7168+(e<<2))}break;case 10:this._imageRam[n.pointer]=e,n.increment()}}else t>4085&&t<4092&&(this._currentBank=this._banks[t-4086]);return this._fastFetch&&t>127&&t<4086&&(this._ldaPending=169===r),r}_clockMusicFetchers(){const t=this._cpuTimeProvider();this._clockAccumulator+=2e4*(t-this._lastCpuTime),this._lastCpuTime=t;const e=Math.floor(this._clockAccumulator);if(this._clockAccumulator-=e,0!==e)for(let t=0;t<3;t++)this._musicFetchers[t].increment(e)}_dispatchFunction(t){const e=this._parameters[0]+(this._parameters[1]<<8);switch(t){case 0:this._parameterIndex=0;break;case 1:for(let t=0;t<this._parameters[3];t++)this._ram[3072+(this._fetchers[7&this._parameters[2]].pointer+t&4095)]=this._rom[3072+(e+t)%29696];this._parameterIndex=0;break;case 2:for(let t=0;t<this._parameters[3];t++)this._ram[3072+(this._fetchers[7&this._parameters[2]].pointer+t&4095)]=this._parameters[0];this._parameterIndex=0;break;case 254:case 255:this._soc.run(3083)}}_advanceRng(){this._rng=(1024&this._rng?279816990:0)^(this._rng>>>11|this._rng<<21)}_rewindRng(){this._rng=this._rng&1<<31?(279816990^this._rng)<<11|(279816990^this._rng)>>>21:this._rng<<11|this._rng>>>21}}e.default=u;class c{constructor(){this.pointer=0,this.top=0,this.bottom=0}contructor(){this.reset()}reset(){this.pointer=this.top=this.bottom=0}setPointerHi(t){this.pointer=255&this.pointer|(15&t)<<8}setPointerLo(t){this.pointer=3840&this.pointer|255&t}increment(){this.pointer=this.pointer+1&4095}decrement(){this.pointer=this.pointer+4095&4095}mask(){return(this.top-(255&this.pointer)&255)>(this.top-this.bottom&255)?255:0}}class l{constructor(){this.pointer=0,this.fraction=0}contructor(){this.reset()}reset(){this.pointer=this.fraction=0}setPointerHi(t){this.pointer=65535&this.pointer|(15&t)<<16}setPointerLo(t){this.pointer=983295&this.pointer|(255&t)<<8}setFraction(t){this.fraction=t,this.pointer&=1048320}increment(){this.pointer=this.pointer+this.fraction&1048575}}class h{constructor(){this.frequency=-1,this.counter=-1,this.waveform=0,this.reset()}reset(){this.frequency=0,this.waveform=0,this.counter=0}increment(t){this.counter=this.counter+t*this.frequency|0}waveformSample(){return this.counter>>>27}}},5947:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(2982)),a=n.__importDefault(r(174)),s=n.__importDefault(r(252)),o=n.__importDefault(r(6549)),u=n.__importDefault(r(4923)),c=n.__importDefault(r(6931)),l=n.__importDefault(r(4938)),h=n.__importDefault(r(112)),f=n.__importDefault(r(6239)),d=n.__importDefault(r(1483)),_=n.__importDefault(r(7440)),p=n.__importDefault(r(9335)),g=n.__importDefault(r(8314)),m=n.__importDefault(r(87));e.default=class{detectCartridgeType(t){if(t.length%8448==0)return i.default.CartridgeType.bankswitch_supercharger;if(t.length<2048)return i.default.CartridgeType.vanilla_2k;if(t.length>=10240&&t.length<=10496)return i.default.CartridgeType.bankswitch_8k_DPC;switch(t.length){case 2048:return this._detect2k(t);case 4096:return i.default.CartridgeType.vanilla_4k;case 8192:return this._detect8k(t);case 8195:return i.default.CartridgeType.bankswitch_8k_pp;case 12288:return i.default.CartridgeType.bankswitch_12k_FA;case 16384:return this._detect16k(t);case 28672:return i.default.CartridgeType.bankswitch_FA2;case 29696:return this._detect29k(t);case 32768:return this._detect32k(t);case 65536:return this._detect64k(t);default:return i.default.CartridgeType.unknown}}_detect2k(t){return m.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_2k_cv:i.default.CartridgeType.vanilla_2k}_detect8k(t){const e=a.default.matchesBuffer(t);return s.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_8k_E0:o.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_8k_3F:l.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_8k_UA:!e&&c.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_8k_FE:g.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_8k_econobanking:i.default.CartridgeType.bankswitch_8k_F8}_detect16k(t){return h.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_16k_E7:i.default.CartridgeType.bankswitch_16k_F6}_detect29k(t){return f.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_FA2:i.default.CartridgeType.bankswitch_dpc_plus}_detect32k(t){return u.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_3E:_.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_dpc_plus:p.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_cdf:i.default.CartridgeType.bankswitch_32k_F4}_detect64k(t){return d.default.matchesBuffer(t)?i.default.CartridgeType.bankswitch_64k_EF:i.default.CartridgeType.bankswitch_64k_F0}}},252:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1904)),a=n.__importStar(r(789)),s=n.__importDefault(r(2982));class o extends i.default{constructor(t){if(super(),this._banks=new Array(8),this._activeBanks=new Array(4),8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: invalid length ${t.length}`);for(let t=0;t<8;t++)this._banks[t]=new Uint8Array(1024);for(let e=0;e<1024;e++)for(let r=0;r<8;r++)this._banks[r][e]=t[1024*r+e];this.reset()}static matchesBuffer(t){const e=a.searchForSignatures(t,[[141,224,31],[141,224,95],[141,233,255],[12,224,31],[173,224,31],[173,233,255],[173,237,255],[173,243,191]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){for(let t=0;t<4;t++)this._activeBanks[t]=this._banks[7]}read(t){return(t&=4095)>=4064&&t<4088&&this._handleBankswitch(t),this._activeBanks[t>>10][1023&t]}peek(t){return t&=4095,this._activeBanks[t>>10][1023&t]}write(t,e){const r=4095&t;return r>=4064&&r<4088&&this._handleBankswitch(r),super.write(t,e)}getType(){return s.default.CartridgeType.bankswitch_8k_E0}_handleBankswitch(t){t<4072?this._activeBanks[0]=this._banks[t-4064]:t<4080?this._activeBanks[1]=this._banks[t-4072]:this._activeBanks[2]=this._banks[t-4080]}}e.default=o},112:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1904)),a=n.__importStar(r(789)),s=n.__importDefault(r(2982));class o extends i.default{constructor(t){if(super(),this._banks=new Array(8),this._ram0=new Uint8Array(1024),this._ram1Banks=new Array(4),this._ram0Enabled=!1,16384!==t.length)throw new Error(`buffer is not a 16k cartridge image: wrong length ${t.length}`);for(let t=0;t<8;t++)this._banks[t]=new Uint8Array(2048);for(let t=0;t<4;t++)this._ram1Banks[t]=new Uint8Array(256);for(let e=0;e<2048;e++)for(let r=0;r<8;r++)this._banks[r][e]=t[2048*r+e];this.reset()}static matchesBuffer(t){const e=a.searchForSignatures(t,[[173,226,255],[173,229,255],[173,229,31],[173,231,31],[12,231,31],[141,231,255],[141,231,31]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){this._bank0=this._banks[0],this._ram1=this._ram1Banks[0],this._ram0Enabled=!1}read(t){return this._handleBankswitch(4095&t),this.peek(t)}peek(t){return(t&=4095)<2048?this._ram0Enabled?t>=1024?this._ram0[t-1024]:0:this._bank0[t]:t<=2559?t>=2304?this._ram1[t-2304]:0:this._banks[7][2047-(4095-t)]}write(t,e){t&=4095,this._handleBankswitch(t),t<1024?this._ram0Enabled?this._ram0[t]=e:super.write(t,e):t<2048?super.write(t,e):t<2303?this._ram1[t-2048]=e:super.write(t,e)}getType(){return s.default.CartridgeType.bankswitch_16k_E7}randomize(t){for(let e=0;e<4;e++)for(let r=0;r<this._ram1Banks[e].length;r++)this._ram1Banks[e][r]=t.int(255);for(let e=0;e<this._ram0.length;e++)this._ram0[e]=t.int(255)}_handleBankswitch(t){t<4064||(t<=4070?(this._bank0=this._banks[15&t],this._ram0Enabled=!1):4071===t?this._ram0Enabled=!0:t<=4075&&(this._ram1=this._ram1Banks[t-4072]))}}e.default=o},1483:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1904)),a=n.__importDefault(r(2982)),s=n.__importStar(r(789));class o extends i.default{constructor(t,e=!0){if(super(),this._supportSC=e,this._bus=null,this._banks=new Array(16),this._ram=new Uint8Array(128),this._hasSC=!1,65536!==t.length)throw new Error(`buffer is not a 64k cartridge image: wrong length ${t.length}`);for(let t=0;t<16;t++)this._banks[t]=new Uint8Array(4096);for(let e=0;e<4096;e++)for(let r=0;r<16;r++)this._banks[r][e]=t[4096*r+e];this.reset()}static matchesBuffer(t){const e=e=>{const r=e.split("").map((t=>t.charCodeAt(0)));for(let e=0;e<r.length;e++)if(r[e]!==t[65528+e])return!1;return!0};if(65536!==t.length)return!1;if(e("efef")||e("efsc"))return!0;const r=s.searchForSignatures(t,[[12,224,255],[173,224,255],[12,224,31],[173,224,31]]);for(let t=0;t<4;t++)if(r[t]>0)return!0;return!1}reset(){this._bank=this._banks[15],this._hasSC=!1}getType(){return a.default.CartridgeType.bankswitch_64k_EF}randomize(t){for(let e=0;e<this._ram.length;e++)this._ram[e]=t.int(255)}setBus(t){return this._bus=t,this}read(t){return this._access(4095&t,this._bus.getLastDataBusValue()),this.peek(t)}peek(t){return t&=4095,this._hasSC&&t>=128&&t<256?this._ram[t-128]:this._bank[t]}write(t,e){(t&=4095)<128&&this._supportSC&&(this._hasSC=!0),this._access(t,e)}_access(t,e){t<128&&this._hasSC?this._ram[t]=e:t>=4064&&t<=4079&&(this._bank=this._banks[t-4064])}}e.default=o},174:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1904)),a=n.__importDefault(r(2982)),s=n.__importStar(r(789));class o extends i.default{constructor(t,e=!0){if(super(),this._supportSC=e,this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._hasSC=!1,this._saraRAM=new Uint8Array(128),this._bus=null,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){return s.searchForSignatures(t,[[141,249,31]])[0]>=2}reset(){this._bank=this._bank1,this._hasSC=!1}read(t){return this._access(4095&t,this._bus.getLastDataBusValue()),this.peek(t)}peek(t){return t&=4095,this._hasSC&&t>=128&&t<256?this._saraRAM[t-128]:this._bank[t]}write(t,e){(t&=4095)<128&&this._supportSC&&(this._hasSC=!0),this._access(t,e)}getType(){return a.default.CartridgeType.bankswitch_8k_F8}randomize(t){for(let e=0;e<this._saraRAM.length;e++)this._saraRAM[e]=t.int(255)}setBus(t){return this._bus=t,this}_access(t,e){if(t<128&&this._hasSC)this._saraRAM[t]=255&e;else switch(t){case 4088:this._bank=this._bank0;break;case 4089:this._bank=this._bank1}}}e.default=o},6239:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1904)),a=n.__importDefault(r(2982)),s=n.__importStar(r(789));class o extends i.default{constructor(t){if(super(),this._banks=new Array(7),this._ram=new Uint8Array(256),this._savedRam=new Uint8Array(256),this._accessCounter=0,this._accessCounterLimit=0,28672!==t.length&&29696!==t.length)throw new Error(`buffer is not a 28k/29k cartridge image: wrong length ${t.length}`);for(let t=0;t<7;t++)this._banks[t]=new Uint8Array(4096);const e=28672===t.length?0:1024;for(let r=0;r<4096;r++)for(let n=0;n<7;n++)this._banks[n][r]=t[4096*n+r+e];this.reset()}static matchesBuffer(t){const e=s.searchForSignatures(t,[[160,193,31,224],[0,128,2,224]]);return e[0]>0||e[1]>0}reset(){this._accessCounter=0,this._accessCounterLimit=0,this._bank=this._banks[0]}getType(){return a.default.CartridgeType.bankswitch_FA2}randomize(t){for(let e=0;e<this._ram.length;e++)this._ram[e]=t.int(255)}setBus(t){return this._bus=t,this}read(t){return this.write(4095&t,this._bus.getLastDataBusValue()),this.peek(t)}peek(t){return(t&=4095)>=256&&t<512?this._ram[t-256]:4084===t?this._accessCounter>=this._accessCounterLimit?-65&this._bank[t]:64|this._bank[t]:this._bank[t]}write(t,e){if(t&=4095,this._accessCounter++,!(t<256))return 4084===t?this._handleIo():void(t>=4085&&t<=4091&&(this._bank=this._banks[t-4085]));this._ram[t]=e}_handleIo(){if(!(this._accessCounter<this._accessCounterLimit)){if(1===this._ram[255]){for(let t=0;t<256;t++)this._ram[t]=this._savedRam[t];this._accessCounterLimit=10}else{if(2!==this._ram[255])return;for(let t=0;t<256;t++)this._savedRam[t]=this._ram[t];this._accessCounterLimit=100}this._accessCounter=0,this._ram[255]=0}}}e.default=o},6931:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1904)),a=n.__importDefault(r(2982)),s=n.__importStar(r(789));class o extends i.default{constructor(t){if(super(),this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._lastAccessWasFE=!1,this._lastAddressBusValue=-1,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){const e=s.searchForSignatures(t,[[32,0,208,198,197],[32,195,248,165,130],[208,251,32,115,254],[32,0,240,132,214]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){this._bank=this._bank0,this._lastAccessWasFE=!1,this._lastAddressBusValue=-1}read(t){return this._bank[4095&t]}write(t,e){super.write(t,e)}setBus(t){return this._bus=t,this._bus.event.read.addHandler(o._onBusAccess,this),this._bus.event.write.addHandler(o._onBusAccess,this),this}getType(){return a.default.CartridgeType.bankswitch_8k_FE}static _onBusAccess(t,e){const r=e._lastAddressBusValue;if(e._lastAddressBusValue=8191&e._bus.getLastAddresBusValue(),e._lastAddressBusValue!==r){if(e._lastAccessWasFE){const t=224&e._bus.getLastDataBusValue();e._bank=0===t||(32&e._bus.getLastDataBusValue())>0?e._bank0:e._bank1}e._lastAccessWasFE=510===e._lastAddressBusValue}}}e.default=o},2982:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,function(t){let e;!function(t){t.vanilla_2k="vanilla_2k",t.vanilla_4k="vanilla_4k",t.bankswitch_2k_cv="bankswitch_2k_cv",t.bankswitch_8k_F8="bankswitch_8k_F8",t.bankswitch_8k_E0="bankswitch_8k_E0",t.bankswitch_8k_3F="bankswitch_8k_3F",t.bankswitch_8k_FE="bankswitch_8k_FE",t.bankswitch_8k_UA="bankswitch_8k_UA",t.bankswitch_8k_DPC="bankswitch_8k_DPC",t.bankswitch_8k_econobanking="bankswitch_8k_econobanking",t.bankswitch_8k_pp="bankswitch_8k_pp",t.bankswitch_12k_FA="bankswitch_12k_FA",t.bankswitch_16k_F6="bankswitch_16k_F6",t.bankswitch_16k_E7="bankswitch_16k_E7",t.bankswitch_FA2="bankswitch_FA2",t.bankswitch_32k_F4="bankswitch_32k_F4",t.bankswitch_64k_F0="bankswitch_64k_F0",t.bankswitch_64k_EF="bankswitch_64k_EF",t.bankswitch_3E="bankswitch_3E",t.bankswitch_supercharger="bankswitch_supercharger",t.bankswitch_dpc_plus="bankswitch_dpc_plus",t.bankswitch_cdf="bankswitch_cdf",t.unknown="unknown"}(e=t.CartridgeType||(t.CartridgeType={})),t.getAllTypes=function(){return[e.vanilla_2k,e.vanilla_4k,e.bankswitch_2k_cv,e.bankswitch_8k_F8,e.bankswitch_8k_E0,e.bankswitch_8k_3F,e.bankswitch_8k_FE,e.bankswitch_8k_UA,e.bankswitch_8k_econobanking,e.bankswitch_8k_pp,e.bankswitch_12k_FA,e.bankswitch_8k_DPC,e.bankswitch_16k_F6,e.bankswitch_16k_E7,e.bankswitch_FA2,e.bankswitch_32k_F4,e.bankswitch_3E,e.bankswitch_64k_F0,e.bankswitch_64k_EF,e.bankswitch_supercharger,e.bankswitch_dpc_plus,e.bankswitch_cdf,e.unknown]},t.describeCartridgeType=function(t){switch(t){case e.vanilla_2k:return"plain 2k";case e.vanilla_4k:return"plain 4k";case e.bankswitch_2k_cv:return"2k CommaVideo scheme";case e.bankswitch_8k_F8:return"bankswitched 8k, F8 (Atari) scheme";case e.bankswitch_8k_E0:return"bankswitched 8k, E0 (Parker Bros.) scheme";case e.bankswitch_8k_3F:return"bankswitched 8k, 3F (Tigervision) scheme";case e.bankswitch_8k_FE:return"bankswitched 8k, FE (Activision) scheme";case e.bankswitch_8k_UA:return"bankswitched 8k, UA (Pleiades) scheme";case e.bankswitch_8k_pp:return"bankswitched 8k, Pink Panther scheme";case e.bankswitch_12k_FA:return"bankswitched 12k, FA (CBS) scheme";case e.bankswitch_8k_DPC:return"bankswitched 8k + DPC";case e.bankswitch_8k_econobanking:return"bankswitched 8k, econobanking scheme";case e.bankswitch_16k_F6:return"bankswitched 16k, F6 (Atari) scheme";case e.bankswitch_16k_E7:return"bankswitched 16k, E7 (M-Network) scheme";case e.bankswitch_FA2:return"bankswitched 28k/29k, FA2 (modified CBS) scheme";case e.bankswitch_32k_F4:return"bankswitched 32k, F4 (Atari) scheme";case e.bankswitch_3E:return"bankswitched 3E (Tigervision + RAM) scheme";case e.bankswitch_64k_F0:return"bankswitched 64k, F0 (Megaboy) scheme";case e.bankswitch_64k_EF:return"bankswitched 64k, EFSC (Homestar Runner) scheme";case e.bankswitch_supercharger:return"bankswitched supercharger";case e.bankswitch_dpc_plus:return"bankswitched DPC+";case e.bankswitch_cdf:return"bankswitched CDF";case e.unknown:return"unknown"}}}(r||(r={})),e.default=r},8116:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,function(t){t.TrapPayload=class{constructor(t,e,r){this.reason=t,this.cartridge=e,this.message=r}}}(r||(r={})),e.default=r},4938:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1904)),a=n.__importDefault(r(2982)),s=n.__importStar(r(789));class o extends i.default{constructor(t){if(super(),this._bus=null,this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){const e=s.searchForSignatures(t,[[141,64,2],[173,64,2],[189,31,2]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){this._bank=this._bank0}read(t){return this._bank[4095&t]}setBus(t){return this._bus=t,t.event.read.addHandler(o._onBusAccess,this),t.event.write.addHandler(o._onBusAccess,this),this}getType(){return a.default.CartridgeType.bankswitch_8k_UA}static _onBusAccess(t,e){switch(e._bus.getLastAddresBusValue()){case 544:e._bank=e._bank0;break;case 576:e._bank=e._bank1}}}e.default=o},2593:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655).__importDefault(r(4002)),i=r(7819),a=r(1831);e.default=class{constructor(t=(()=>3)){this.trap=new i.Event,this._thumbulatorBus={read16:t=>{if(1&t)return this._triggerTrap(`unaligned 16 bit ARM read from ${(0,a.encode)(t,8,!1)}`),0;const e=268435455&t;switch(t>>>28){case 0:if(e<32768)return this.getRom16(e);break;case 4:if(e<8192)return this.getRam16(e);break;case 14:if(2080768===e)return this._armMamcr}this._triggerTrap(`invalid 16 bit ARM read from ${(0,a.encode)(t,8,!1)}`)},read32:t=>{if(3&t)return this._triggerTrap(`unaligned 32 bit ARM read from ${(0,a.encode)(t,8,!1)}`),0;const e=268435455&t;switch(t>>>28){case 0:if(e<32768)return this.getRom32(e);break;case 4:if(e<8192)return this.getRam32(e);break;case 14:switch(e){case 32772:case 32776:return 0}}this._triggerTrap(`invalid 32 bit ARM read from ${(0,a.encode)(t,8,!1)}`)},write16:(t,e)=>{if(1&t)return void this._triggerTrap(`unaligned 16 bit ARM write: ${(0,a.encode)(e,4)} -> ${(0,a.encode)(t,8,!1)}`);const r=268435455&t;switch(t>>>28){case 4:if(r<8192)return void this.setRam16(r,65535&e);break;case 14:if(2080768===r)return void(this._armMamcr=e)}this._triggerTrap(`invalid 16 bit ARM write: ${(0,a.encode)(e,4)} -> ${(0,a.encode)(t,8,!1)}`)},write32:(t,e)=>{if(3&t)return void this._triggerTrap(`unaligned 32 bit ARM write: ${(0,a.encode)(e,8,!1)} -> ${(0,a.encode)(t,8,!1)}`);const r=268435455&t;switch(t>>>28){case 4:if(r<8192)return void this.setRam32(r,e);case 14:switch(r){case 32772:case 32776:return}}this._triggerTrap(`invalid 32 bit ARM write: ${(0,a.encode)(e,8,!1)} -> ${(0,a.encode)(t,8,!1)}`)}},this._romBuffer=new ArrayBuffer(32768),this._ramBuffer=new ArrayBuffer(8192),this._armMamcr=0,this._thumbulator=null,function(){const t=new Uint8Array([1,2,3,4]);return 67305985===new Uint32Array(t.buffer)[0]}()?(this.getRom16=t=>this._rom16[t>>>1],this.getRom32=t=>this._rom32[t>>>2],this.getRam16=t=>this._ram16[t>>>1],this.getRam32=t=>this._ram32[t>>>2],this.setRam16=(t,e)=>this._ram16[t>>>1]=e,this.setRam32=(t,e)=>this._ram32[t>>>2]=e):(this.getRom16=t=>this._rom8[t]|this._rom8[t+1]<<8,this.getRom32=t=>this._rom8[t]|this._rom8[t+1]<<8|this._rom8[t+2]<<16|this._rom8[t+3]<<24,this.getRam16=t=>this._ram8[t]|this._ram8[t+1]<<8,this.getRam32=t=>this._ram8[t]|this._ram8[t+1]<<8|this._ram8[t+2]<<16|this._ram8[t+3]<<24,this.setRam16=(t,e)=>{this._ram8[t]=255&e,this._ram8[t+1]=e>>>8&255},this.setRam32=(t,e)=>{this._ram8[t]=255&e,this._ram8[t+1]=e>>>8&255,this._ram8[t+2]=e>>>16&255,this._ram8[t+3]=e>>>24&255}),this._rom8=new Uint8Array(this._romBuffer),this._rom16=new Uint16Array(this._romBuffer),this._rom32=new Uint32Array(this._romBuffer),this._ram8=new Uint8Array(this._ramBuffer),this._ram16=new Uint16Array(this._ramBuffer),this._ram32=new Uint32Array(this._ramBuffer),this._thumbulator=new n.default(this._thumbulatorBus,{stopAddress:32772,trapOnBx32:t}),this.reset()}init(){return this._thumbulator.init()}reset(){}getRom(){return this._rom8}getRam(){return this._ram8}run(t){this._thumbulator.reset(),this._thumbulator.enableDebug(!1);for(let t=0;t<=12;t++)this._thumbulator.writeRegister(t,0);this._thumbulator.writeRegister(13,1073749940),this._thumbulator.writeRegister(14,32773),this._thumbulator.writeRegister(15,t),this._armMamcr=0;const e=this._thumbulator.run(5e5);20!==e&&10!==e&&this._triggerTrap(`ARM execution trapped: ${e}`)}getThumbulator(){return this._thumbulator}_triggerTrap(t){this._thumbulator.abort(),this.trap.dispatch(t)}}},789:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.searchForSignature=e.searchForSignatures=void 0,e.searchForSignatures=function(t,e){const r=[],n=e.map((t=>0));for(let i=0;i<t.length;i++){for(let a=0;a<r.length;a++){const s=r[a],o=e[s.signature];t[i]===o[s.nextIndex]?++s.nextIndex===o.length&&(n[s.signature]++,r.splice(a,1),a--):(r.splice(a,1),a--)}for(let a=0;a<e.length;a++){const s=e[a];s.length>0&&t[i]===s[0]&&(1===s.length?n[a]++:r.push({signature:a,nextIndex:1}))}}return n},e.searchForSignature=function(t,e){for(let r=0;r<t.length;r++){let n;for(n=0;n<e.length&&(t[r+n]===e[n]||e[n]<0);n++);if(n===e.length)return r}return-1}},7028:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(1337)),a=n.__importDefault(r(6717)),s=r(8483),o=(0,s.decode)("AQEPAQEBAQEBAQEBAwMDAQ=="),u=new Int8Array([1]),c=new Int8Array([1,1]),l=new Int8Array([16,15]),h=(0,s.decode)("AQICAQEBBAM="),f=(0,s.decode)("AQIBAQICBQQCAQMBAQEBBA=="),d=(0,s.decode)("AQQBAwIEAQIDAgEBAQEBAQIEAgEEAQECAgEDAgEDAQEBBAEBAQECAQECBgECAgECAQIBAQIBBgIBAgIBAQEBAgICAgcCAwICAQEBAwIBAQIBAQcBAQMBAQIDAwEBAQICAQECAgQDBQEDAQEFAgEBAQIBAgEDAQIFAQECAQEBBQEBAQEBAQEBBgEBAQIBAQEBBAIBAQMBAwYDAgMBAQIBAgQBAQEDAQEBAQMBAgEEAgIDBAEBBAECAQICAgEBBAMBBAQJBQQBBQMBAQMCAgIBBQECAQEBAgMBAgEBAwQCBQICAQIDAQEBAQECAQMDAwIBAgEBAQEBAwMBAgIDAQMBCA=="),_=(0,s.decode)("BQYEBQoFAwcECgYDBgQJBg=="),p=[u,h,h,(0,s.decode)("AgMCAQQBBgoCBAIBAQQFCQMDBAEBAQgFBQUEAQEBCAQCCAMDAQEHBAIHBQEDAQcEAQQIAgEDBAcBAwcDAgEGBgICBAUDAgYGAQMDAgUDBwMEAwICAgUJAwEFAwECAgsFAQUDAQECDAUBAgUCAQEMBgECBQECAQoGAwICBAECBgo="),c,c,l,f,d,f,l,u,c,c,l,_];e.default=class{constructor(t){this._config=t}setConfig(t){this._config=t}getKey(t,e){return p[t]===c&&o[t]*(e+1)==1?0:t<<5|e}getBuffer(t){const e=t>>>5&15,r=31&t,n=p[e];let s=0;for(let t=0;t<n.length;t++)s+=n[t];s=s*o[e]*(r+1);const u=new Float32Array(s),c=i.default.getClockHz(this._config)/114;let l=0,h=0,f=0,d=!0;for(let t=0;t<s;t++)l++,l===o[e]*(r+1)&&(l=0,h++,h===n[f]&&(f++,h=0,n.length===f&&(f=0)),d=!(1&f)),u[t]=d?1:-1;return new a.default(u,c)}}},6717:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=class{constructor(t,e){this._content=t,this._sampleRate=e}getLength(){return this._content.length}getContent(){return this._content}getSampleRate(){return this._sampleRate}replaceUnderlyingBuffer(t){this._content=t}}},2487:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(7819);e.default=class{constructor(t){this._capacity=t,this.evict=new n.Event,this._size=0,this._index=0,this._buffer=new Array(this._capacity);for(let t=0;t<this._capacity;t++)this._buffer[t]=null}size(){return this._size}pop(){if(0===this._size)return;const t=this._buffer[this._index];return this._buffer[this._index]=null,this._index=(this._index+1)%this._capacity,this._size--,t}push(t){return this._size===this._capacity&&this.evict.dispatch(this.pop()),this._buffer[(this._index+this._size++)%this._capacity]=t,this}forEach(t){for(let e=0;e<this._size;e++)t(this._buffer[(this._index+e)%this._capacity]);return this}clear(){for(let t=0;t<this._capacity;t++)this._buffer[t]=null;return this._size=0,this._index=0,this}capacity(){return this._capacity}}},4162:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e){this._interval=t,this._callback=e,this._handle=null,this._lastCall=Date.now()}run(t){if(this._data=t,null!==this._handle)return;const e=Date.now();e-this._lastCall>=this._interval?(this._lastCall=e,this._callback(this._data)):this._handle=window.setTimeout((()=>{this._handle=null,this._lastCall=e,this._callback(this._data)}),this._interval-e+this._lastCall)}}},8483:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.__init=void 0;const r=new Uint8Array(256);function n(t,e){const n=r[t.charCodeAt(e)];if(n>63)throw new Error('invalid base64 character "'+t[e]+'" at index '+e);return n}function i(t,e){return(n(t,e)<<18)+(n(t,e+1)<<12)+(n(t,e+2)<<6)+n(t,e+3)}!function(t){let e;for(e=0;e<256;e++)r[e]=255;for(e=0;e<64;e++)r["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;r["=".charCodeAt(0)]=0}(e.__init||(e.__init={})),e.decode=function(t){if(t.length%4!=0)throw new Error("invalid base64 data --- char count mismatch");const e=t.length/4,r=3*e-function(t){let e=0,r=t.length-1;for(;r>=0&&"="===t[r--];)e++;return e}(t),n=new Uint8Array(r);let a=0;for(let s=0;s<e;s++){const e=i(t,4*s);for(let t=0;t<3&&a<r;t++)n[a++]=e>>>8*(2-t)&255}return n}},5756:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isIOS=e.isSafari=void 0,e.isSafari="safari"in window,e.isIOS=!!navigator.platform.match(/iPhone|iPad|iPod/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},3272:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Immutable=e.freezeImmutables=void 0;const r=Symbol("immutable properties");e.freezeImmutables=function(t){const e=t[r];if(e)for(const r of e)Object.defineProperty(t,r,{writable:!1,configurable:!1})},e.Immutable=function(t,e){t[r]||Object.defineProperty(t,r,{value:[],writable:!1,enumerable:!1}),t[r].push(e)}},3318:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateFromString=e.calculateFromUint8Array=void 0;const n=r(655).__importDefault(r(2568)),i=r(8764);e.calculateFromUint8Array=function(t){return(0,n.default)(i.Buffer.from(t))},e.calculateFromString=function(t){return(0,n.default)(i.Buffer.from(t,"utf8"))}},1831:(t,e)=>{"use strict";function r(t,e,n=!0,i=""){if(!n&&t<0)return r(t>>>16,e&&e>8?e-4:4,!1,i)+r(65535&t,4);let a=Math.abs(t).toString(16).toUpperCase();if(void 0!==e)for(;a.length<e;)a="0"+a;return(t<0?"-":"")+i+a}Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=void 0,e.encode=function(t,e,n=!0){return r(t,e,n,"$")},e.decode=function(t){const e=t.match(/^-/)?-1:1;let r=t.replace(/^-/,"").toUpperCase();if(r.match(/^0X[0-9A-F]+$/))r=r.replace(/^0x/,"");else{if(!r.match(/^\$[0-9A-F]+$/))throw new TypeError("invalid hex number "+t);r=r.replace(/^\$/,"")}return e*parseInt(r,16)}},2518:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=r(7819),a=n.__importDefault(r(2089));e.default=class{constructor(t){this._factory=t,this.event={release:new i.Event,dispose:new i.Event},this._pool=[],this._poolSize=0}get(){let t;if(0===this._poolSize){const e=this._factory();t=new a.default(e,(t=>this._releaseMember(t)),(t=>this._disposeMember(t)))}else t=this._pool[--this._poolSize],t._isAvailable=!1;return t}_releaseMember(t){if(t._isAvailable)throw new Error("Trying to release an already released pool member");if(t._isDisposed)throw new Error("Trying to release an already disposed pool member");const e=this._poolSize++;this._pool[e]=t,t._isAvailable=!0,t._poolPosition=e,this.event.release.dispatch(t.get())}_disposeMember(t){if(t._isDisposed)throw new Error("Trying to dispose of an already disposed pool member");t._isAvailable&&(this._poolSize>1&&(this._pool[t._poolPosition]=this._pool[this._poolSize-1]),this._poolSize--),t._isDisposed=!0,this.event.dispose.dispatch(t.get())}}},2089:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=class{constructor(t,e,r){this._value=t,this._releaseCB=e,this._disposeCB=r,this._isAvailable=!1,this._isDisposed=!1}adopt(t){this._value=t}get(){return this._value}release(){this._releaseCB(this)}dispose(){this._disposeCB(this)}}},4067:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655).__importDefault(r(7489)),i=r(5756).isIOS;e.default=class{constructor(t,e=1e5,r="stellerator-fullscreen"){this._videoDriver=t,this._zIndex=e,this._fullscreenClass=r,this._resizeListener=()=>{this._resizeHandle||(this._resizeHandle=setTimeout((()=>{this._resizeHandle=null,this._adjustSizeForFullscreen()}),100))},this._resizeHandle=null,this._changeListener=this._onChange.bind(this),this._engaged=!1}engage(){this._engaged||(this._engaged=!0,i||!n.default?(this._adjustSizeForFullscreen(),window.addEventListener("resize",this._resizeListener),this._engaged=!0):(n.default.on("change",this._changeListener),n.default.request(this._videoDriver.getCanvas())))}disengage(){this._engaged&&(i||!n.default?(this._resetSize(),window.removeEventListener("resize",this._resizeListener),this._engaged=!1):n.default.exit())}toggle(){this._engaged?this.disengage():this.engage()}isEngaged(){return this._engaged}_onChange(){n.default&&(n.default.isFullscreen?(window.addEventListener("resize",this._resizeListener),this._adjustSizeForFullscreen()):(this._resetSize(),window.removeEventListener("resize",this._resizeListener),n.default.off("change",this._changeListener),this._engaged=!1))}_resetSize(){const t=this._videoDriver.getCanvas();this._resizeHandle&&(clearTimeout(this._resizeHandle),this._resizeHandle=null),t.style.width="",t.style.height="",t.style.maxWidth="",t.style.maxHeight="",i&&(t.style.position="",t.style.top="",t.style.left="",t.style.zIndex=""),document.body.classList.remove(this._fullscreenClass),setTimeout((()=>this._videoDriver.resize()),0)}_adjustSizeForFullscreen(){const t=this._videoDriver.getCanvas();this._videoDriver.resize(window.innerWidth,window.innerHeight),t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",t.style.maxWidth=window.innerWidth+"px",t.style.maxHeight=window.innerHeight+"px",i&&(t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.zIndex=""+this._zIndex),document.body.classList.add(this._fullscreenClass)}}},575:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.auxTargets=e.joystickTargets=void 0;const n=r(655),i=r(7819),a=n.__importDefault(r(2445)),s=r(2326);function o(t){return"object"==typeof t?t.pressed:t>.5}e.joystickTargets=["left","right","up","down","fire","start","select","pause"],e.auxTargets=["start","select","pause"];class u{constructor(){this._onGamepadConnect=()=>this.probeGamepads(),this._onGamepadDisconnect=()=>this.probeGamepads(),this.gamepadCountChanged=new i.Event,this._shadows=null,this._mappings=new Map,this._mappingStates=new WeakMap,this._mappingTargets=new WeakMap,this._bound=!1,this._joysticks=[],this._auxSwitches={},this._gamepadCount=0,this._lastPoll=0,this.setMapping(s.defaultMapping)}static probeGamepadCount(){let t=0;const e=navigator.getGamepads();for(let r=0;r<e.length;r++)e[r]&&t++;return t}init(){if(!navigator.getGamepads)throw new Error("gamepad API not available");this.probeGamepads(),window.addEventListener("gamepadconnected",this._onGamepadConnect),window.addEventListener("gamepaddisconnected",this._onGamepadDisconnect)}deinit(){this.unbind(),window.removeEventListener("gamepadconnected",this._onGamepadConnect),window.removeEventListener("gamepaddisconnected",this._onGamepadDisconnect)}bind(t=[],e={}){this._bound||(this._bound=!0,this._joysticks=t,this._auxSwitches=e,this._bound=!0,this._shadows=new WeakMap,this._controlledSwitches().forEach((t=>{const e=new a.default;this._shadows.set(t,e),e.setState(t.read()),t.beforeRead.addHandler(u._onBeforeSwitchRead,this)})))}unbind(){this._bound&&(this._controlledSwitches().forEach((t=>t.beforeRead.removeHandler(u._onBeforeSwitchRead,this))),this._shadows=null,this._auxSwitches={},this._joysticks=[],this._bound=!1)}getGamepadCount(){return this._gamepadCount}setMapping(t,e){void 0!==e&&this._mappings.set(e,t);const r=new Map,n=[];for(const e of t)n.indexOf(e.target)&&(n.push(e.target),r.set(e.target,!1));this._mappingStates.set(t,r),this._mappingTargets.set(t,n)}clearMapping(t){this._mappings.delete(t)}poll(){this._readGamepads()}static _onBeforeSwitchRead(t,e){e.poll()}probeGamepads(){const t=u.probeGamepadCount();t!==this._gamepadCount&&(this._gamepadCount=t,this.gamepadCountChanged.dispatch(this._gamepadCount))}_getSwitchForTarget(t,e=null){if(this._auxSwitches[t])return this._auxSwitches[t];if(!e)return null;switch(t){case"up":return e.getUp();case"down":return e.getDown();case"left":return e.getLeft();case"right":return e.getRight();case"fire":return e.getFire();default:return null}}_controlledSwitches(){const t=[...Object.keys(this._auxSwitches).map((t=>this._auxSwitches[t]))];for(const e of this._joysticks)t.push(e.getLeft(),e.getRight(),e.getUp(),e.getDown(),e.getFire());return t}_readGamepads(){const t=Date.now();if(0===this._gamepadCount||t-this._lastPoll<50)return;this._lastPoll=t;const e=navigator.getGamepads();let r=0;for(let t=0;t<e.length;t++){const n=e[t];if(!n)continue;const i=this._mappings.get(n.id)||s.defaultMapping,a=this._mappingStates.get(i),u=this._mappingTargets.get(i);for(const t of u)a.set(t,!1);for(const t of i)switch(t.type){case"button":const e=n.buttons[t.index];void 0!==e&&o(e)&&a.set(t.target,!0);break;case"axis":const r=n.axes[t.index];void 0!==r&&("positive"===t.sign?r>.5:r<-.5)&&a.set(t.target,!0)}for(const t of u){const e=this._getSwitchForTarget(t,this._joysticks[r]);if(!e)continue;const n=this._shadows.get(e);n.toggle(a.get(t)),n.sync(e)}r++}}}e.default=u},2515:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this._x=-1,this._listener=this._onDocumentMouseMove.bind(this)}bind(t){this._paddle||(this._paddle=t,this._x=-1,document.addEventListener("mousemove",this._listener))}unbind(){this._paddle&&(document.removeEventListener("mousemove",this._listener),this._paddle=null)}_onDocumentMouseMove(t){if(this._x>=0){const e=t.screenX-this._x;let r=this._paddle.getValue();r+=-e/window.innerWidth/.9,r<0&&(r=0),r>1&&(r=1),this._paddle.setValue(r)}this._x=t.screenX}}},6166:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=r(5359),a=n.__importDefault(r(4626)),s=n.__importDefault(r(6465)),o=n.__importDefault(r(4114)),u=n.__importDefault(r(9456)),c=n.__importDefault(r(8301)),l=n.__importDefault(r(2487)),h=r(3305);class f{constructor(t,e={}){this._canvas=t,this._onContextLost=t=>{t.preventDefault(),this._gl=null,this._mainProgram=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._sourceTexture=null,this._phosphorProcessor=null,this._ntscProcessor=null,this._integerScalingProcessor=null,this._scanlineProcessor=null,this._processors=[]},this._onContextRestored=()=>{this._getRenderingContext(),this.init()},this._config=null,this._gl=null,this._video=null,this._capabilities=null,this._mainProgram=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._sourceTexture=null,this._anmiationFrameHandle=0,this._phosphorProcessor=null,this._ntscProcessor=null,this._scanlineProcessor=null,this._integerScalingProcessor=null,this._processors=[],this._pendingFrames=new l.default(3),this._consecutiveUnderflows=0,this._hasFrame=!1,this._config=Object.assign(Object.assign({},{gamma:1,scalingMode:"qis",phosphorLevel:.5,scanlineLevel:.2,tvEmulation:"composite"}),e),this._getRenderingContext(),this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._pendingFrames.evict.addHandler((t=>t.release()))}init(){return this._gl?(this._phosphorProcessor=new s.default(this._gl,this._capabilities),this._ntscProcessor=new o.default(this._gl,this._capabilities),this._scanlineProcessor=new u.default(this._gl,this._capabilities),this._integerScalingProcessor=new c.default(this._gl,this._capabilities),this._updateCanvasSize(),this._mainProgram=a.default.compile(this._gl,i.vsh.plain.source(this._capabilities),i.fsh.blitWithGamma.source(this._capabilities)),this._mainProgram.use(),this._mainProgram.uniform1i("u_Sampler0",0),this._createVertexCoordinateBuffer(),this._createTextureCoordinateBuffer(),this._configureSourceTexture(),this._applyConfiguration(),this):this}close(){const t=this._gl;if(this._cancelDraw(),this.unbind(),t)return this._mainProgram.delete(),t.deleteBuffer(this._vertexCoordinateBuffer),t.deleteBuffer(this._textureCoordinateBuffer),t.deleteTexture(this._sourceTexture),this._ntscProcessor.destroy(),this._phosphorProcessor.destroy(),this._scanlineProcessor.destroy(),this._integerScalingProcessor.destroy(),this;this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._pendingFrames.forEach((t=>t.release()))}resize(t,e){return this._updateCanvasSize(t,e),this._updateVertexBuffer(),this._video&&(this._configureProcessors(),this._scheduleDraw()),this._hasFrame&&this._draw(),this}getCanvas(){return this._canvas}bind(t){return this._video||(this._video=t,this._video.newFrame.addHandler(f._frameHandler,this),this._configureProcessors(),this._scheduleDraw()),this}unbind(){return this._video?(this._cancelDraw(),this._video.newFrame.removeHandler(f._frameHandler,this),this._video=null,this._pendingFrames.forEach((t=>t.release())),this._pendingFrames.clear(),this):this}getConfig(){return this._config}updateConfig(t){return this}static _frameHandler(t,e){e._pendingFrames.size()===e._pendingFrames.capacity()&&(e._pendingFrames.forEach((t=>t.release())),e._pendingFrames.clear()),e._pendingFrames.push(t),e._scheduleDraw()}_getRenderingContext(){const t={alpha:!1,depth:!1,antialias:!1};if(this._gl=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t),!this._gl)throw new Error("unable to acquire webgl context");this._capabilities=(0,h.detect)(this._gl)}_scheduleDraw(){0===this._anmiationFrameHandle&&(this._anmiationFrameHandle=requestAnimationFrame((()=>this._onAnimationFrame())))}_cancelDraw(){0!==this._anmiationFrameHandle&&cancelAnimationFrame(this._anmiationFrameHandle),this._anmiationFrameHandle=0}_onAnimationFrame(){const t=this._gl;if(this._anmiationFrameHandle=0,0===this._pendingFrames.size())return void(this._consecutiveUnderflows++<=5&&this._scheduleDraw());this._consecutiveUnderflows=0,this._scheduleDraw();const e=this._pendingFrames.pop();t&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._sourceTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.get()),e.release(),this._hasFrame=!0,this._draw())}_draw(){if(!this._gl)return;const t=this._gl;let e=this._sourceTexture;for(const t of this._processors)t.render(e),e=t.getTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,"none"===this._config.scalingMode?t.NEAREST:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,"none"===this._config.scalingMode?t.NEAREST:t.LINEAR),this._mainProgram.use(),this._mainProgram.bindVertexAttribArray("a_VertexPosition",this._vertexCoordinateBuffer,2,t.FLOAT,!1,0,0),this._mainProgram.bindVertexAttribArray("a_TextureCoordinate",this._textureCoordinateBuffer,2,t.FLOAT,!1,0,0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_STRIP,0,4)}_createVertexCoordinateBuffer(){if(!this._gl)return;const t=this._gl,e=t.drawingBufferWidth,r=t.drawingBufferHeight,n=e>0?2/e:1,i=r>0?2/r:1;let a,s,o,u;4/3*r<=e?(s=2,a=4/3*r*n,u=1,o=Math.floor(-4/3*r)/2*n):(s=e/(4/3)*i,a=2,u=Math.floor(e/(4/3))/2*i,o=-1);const c=[o+a,u,o,u,o+a,u-s,o,u-s];this._vertexCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW)}_updateVertexBuffer(){this._gl&&(this._gl.deleteBuffer(this._vertexCoordinateBuffer),this._createVertexCoordinateBuffer())}_createTextureCoordinateBuffer(){if(!this._gl)return;const t=this._gl;this._textureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW)}_updateCanvasSize(t,e){void 0!==t&&void 0!==e||(t=this.getCanvas().clientWidth,e=this.getCanvas().clientHeight);const r=window.devicePixelRatio||1;this.getCanvas().width=t*r,this.getCanvas().height=e*r}_configureSourceTexture(){if(!this._gl)return;const t=this._gl;this._sourceTexture||(this._sourceTexture=t.createTexture()),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._sourceTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1)}_configureProcessors(){if(!this._video||!this._gl)return;switch(this._phosphorProcessor.configure(this._config.phosphorLevel),this._scanlineProcessor.configure(this._config.scanlineLevel),this._integerScalingProcessor.configure(this._gl.drawingBufferWidth,this._gl.drawingBufferHeight),this._config.tvEmulation){case"composite":this._ntscProcessor.configure("composite");break;case"svideo":this._ntscProcessor.configure("svideo")}let t=this._video.getWidth(),e=this._video.getHeight();for(const r of this._processors)r.resize(t,e),t=r.getWidth(),e=r.getHeight()}_applyConfiguration(){this._gl&&(this._mainProgram.use(),this._mainProgram.uniform1f("u_Gamma",this._config.gamma),this._processors=[],"none"!==this._config.tvEmulation&&(this._ntscProcessor.init(),this._processors.push(this._ntscProcessor)),this._config.phosphorLevel>0&&(this._phosphorProcessor.init(),this._processors.push(this._phosphorProcessor)),this._config.scanlineLevel>0&&(this._scanlineProcessor.init(),this._processors.push(this._scanlineProcessor)),"qis"===this._config.scalingMode&&(this._integerScalingProcessor.init(),this._processors.push(this._integerScalingProcessor)),this._configureProcessors())}}e.default=f},2845:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=r(8125),a=n.__importDefault(r(2375)),s=n.__importDefault(r(4811)),o=["touchstart","click","keydown"],u=window.AudioContext||window.webkitAudioContext;function c(t,e=500){return new Promise((r=>{t.then((()=>r())),setTimeout(r,e)}))}class l{constructor(){if(this._interactionListener=()=>{const t=this.context;this.interactionRequired=!1,o.forEach((t=>document.removeEventListener(t,this._interactionListener))),this.mutex.runExclusive((()=>n.__awaiter(this,void 0,void 0,(function*(){return yield c(t.resume()),new Promise((e=>setTimeout((()=>n.__awaiter(this,void 0,void 0,(function*(){yield c(t.suspend()),e()}))),100)))}))))},this.mutex=new i.Mutex,this.context=null,this.interactionRequired=!0,u){this.context=new u;try{this.context.destination.channelCount=1}catch(t){console.warn("audio driver: failed to set channel count")}o.forEach((t=>document.addEventListener(t,this._interactionListener)))}}stopListening(){o.forEach((t=>document.removeEventListener(t,this._interactionListener)))}}let h=new l;e.default=class{constructor(t=0,e=0,r){this._touchListener=()=>{o.forEach((t=>document.removeEventListener(t,this._touchListener,!0))),this._context&&(this._context.resume(),setTimeout((()=>{this._mutex.runExclusive((()=>this._suspended?this._context.suspend():this._context.resume()))}),10))},this._context=null,this._merger=null,this._waveformChannels=null,this._pcmChannels=null,this._channels=null,this._cache=new Map,this._mutex=new i.Mutex,this._suspended=!0,this._isBound=!1,this._waveformChannels=new Array(t),this._pcmChannels=new Array(e);for(let e=0;e<t;e++)this._waveformChannels[e]=new a.default(this._cache);for(let t=0;t<e;t++)this._pcmChannels[t]=new s.default(r);this._channels=[...this._waveformChannels,...this._pcmChannels]}init(){const t=h;h=new l,this._context=t.context,t.stopListening(),this._mutex=t.mutex,t.interactionRequired&&o.forEach((t=>document.addEventListener(t,this._touchListener,!0))),this._merger=this._context.createChannelMerger(this._channels.length),this._merger.connect(this._context.destination),this._channels.forEach((t=>t.init(this._context,this._merger)))}bind(t=[],e=[]){if(!this._isBound){if(t.length!==this._waveformChannels.length)throw new Error(`invalid number of waveform sources: expected ${this._waveformChannels.length}, got ${t.length}`);if(e.length!==this._pcmChannels.length)throw new Error(`invalid number of waveform sources: expected ${this._pcmChannels.length}, got ${e.length}`);this._waveformChannels.forEach(((e,r)=>e.bind(t[r]))),this._pcmChannels.forEach(((t,r)=>t.bind(e[r]))),this._isBound=!0,this.resume()}}unbind(){this._isBound&&(this._channels.forEach((t=>t.unbind())),this._isBound=!1,this.pause())}setMasterVolume(t,e){this._channels[t].setMasterVolume(e)}pause(){return this._mutex.runExclusive((()=>n.__awaiter(this,void 0,void 0,(function*(){this._suspended||(this._suspended=!0,yield c(this._context.suspend()))}))))}resume(){return this._mutex.runExclusive((()=>n.__awaiter(this,void 0,void 0,(function*(){this._suspended&&(this._suspended=!1,yield c(this._context.resume()))}))))}close(){this._mutex.runExclusive((()=>this._context.close()))}}},8971:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=class{constructor(){this._buffer=new Float32Array(2),this._fractionalIndex=0,this._needsData=!1,this._ratio=0,this.reset(1,1)}reset(t,e){this._ratio=t/e,this._needsData=!1,this._fractionalIndex=0;for(let t=0;t<2;t++)this._buffer[t]=0}get(){const t=(1-this._fractionalIndex)*this._buffer[0]+this._fractionalIndex*this._buffer[1];return this._fractionalIndex+=this._ratio,this._fractionalIndex>1&&(this._fractionalIndex-=1,this._needsData=!0),t}push(t){this._buffer[0]=this._buffer[1],this._buffer[1]=t,this._needsData=!1}needsData(){return this._needsData}}},4811:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(2487)),a=n.__importDefault(r(8971));class s{constructor(t=1024){this._hostFragmentSize=t,this._outputSampleRate=0,this._bufferSize=0,this._volume=1,this._gain=null,this._processor=null,this._bufferUnderrun=!1,this._fragmentRing=null,this._fragmentSize=0,this._inputSampleRate=0,this._fragmentIndex=0,this._currentFragment=null,this._lastFragment=null,this._resampler=new a.default}init(t,e){this._outputSampleRate=t.sampleRate,this._gain=t.createGain(),this._gain.gain.value=this._volume,this._gain.connect(e),this._processor=t.createScriptProcessor(this._hostFragmentSize,1,1),this._bufferSize=this._processor.bufferSize,this._processor.connect(this._gain),this._processor.onaudioprocess=t=>this._processAudio(t),t.createBuffer(1,1,t.sampleRate).getChannelData(0).set([0])}bind(t){this.unbind(),this._audio=t,this._fragmentSize=t.getFrameSize(),this._inputSampleRate=t.getSampleRate(),this._fragmentIndex=0,this._lastFragment=null,this._bufferUnderrun=!0,this._fragmentRing=new i.default(Math.ceil(4*this._bufferSize/this._outputSampleRate/this._fragmentSize*this._inputSampleRate)),this._fragmentRing.evict.addHandler((t=>t.release())),this._audio.newFrame.addHandler(s._onNewFragment,this),this._resampler.reset(this._inputSampleRate,this._outputSampleRate)}unbind(){this._audio&&(this._audio.newFrame.removeHandler(s._onNewFragment,this),this._lastFragment&&(this._lastFragment.release(),this._lastFragment=null),this._currentFragment&&(this._currentFragment.release(),this._currentFragment=null),this._fragmentRing&&(this._fragmentRing.forEach((t=>t.release())),this._fragmentRing.clear(),this._fragmentRing=null))}setMasterVolume(t){this._volume=t}static _onNewFragment(t,e){e._fragmentRing.push(t),e._currentFragment||(e._currentFragment=e._fragmentRing.pop(),e._fragmentIndex=0)}_processAudio(t){if(!this._audio)return;const e=t.outputBuffer.getChannelData(0);let r=0;const n=t=>{const n=this._lastFragment&&this._lastFragment.get();for(;r<t;)this._resampler.needsData()&&(this._resampler.push(this._audio&&this._audio.isPaused()||!n?0:n[this._fragmentIndex++]*this._volume),this._fragmentIndex>=this._fragmentSize&&(this._fragmentIndex=0)),e[r++]=this._resampler.get()};this._currentFragment&&this._bufferUnderrun&&(n(this._bufferSize>>>1),this._bufferUnderrun=!1);let i=this._currentFragment&&this._currentFragment.get();for(;r<this._bufferSize&&this._currentFragment;)this._resampler.needsData()&&(this._resampler.push(i[this._fragmentIndex++]*this._volume),this._fragmentIndex>=this._fragmentSize&&(this._fragmentIndex=0,this._lastFragment&&this._lastFragment.release(),this._lastFragment=this._currentFragment,this._currentFragment=this._fragmentRing.pop(),i=this._currentFragment&&this._currentFragment.get())),e[r++]=this._resampler.get();r<this._bufferSize&&(this._bufferUnderrun=!0),n(this._bufferSize)}}e.default=s},2375:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;class r{constructor(t){this._cache=t,this._context=null,this._source=null,this._gain=null,this._audio=null,this._volume=0,this._masterVolume=1}init(t,e){this._context=t,this._gain=this._context.createGain(),this._gain.connect(e)}bind(t){this._audio||(this._audio=t,this._volume=this._audio.getVolume(),this._updateGain(),this._audio.volumeChanged.addHandler(r._onVolumeChanged,this),this._audio.bufferChanged.addHandler(r._onBufferChanged,this),this._audio.stop.addHandler(r._onStop,this))}unbind(){this._audio&&(this._audio.volumeChanged.removeHandler(r._onVolumeChanged,this),this._audio.bufferChanged.removeHandler(r._onBufferChanged,this),this._audio.stop.removeHandler(r._onStop,this),this._source&&(this._source.stop(),this._source=null),this._audio=null)}setMasterVolume(t){this._masterVolume=t,this._updateGain()}static _onVolumeChanged(t,e){e._volume=t,e._updateGain()}static _onBufferChanged(t,e){if(!e._cache.has(t)){const r=e._audio.getBuffer(t),n=e._context.createBuffer(1,r.getLength(),r.getSampleRate());n.getChannelData(0).set(r.getContent()),e._cache.set(t,n)}const r=e._cache.get(t),n=e._context.createBufferSource();e._source&&e._source.stop(),n.loop=!0,n.buffer=r,n.connect(e._gain),n.start(),e._source=n}static _onStop(t,e){e._source&&(e._source.stop(),e._source=null)}_updateGain(){this._gain.gain.value=this._volume*this._masterVolume}}e.default=r},2485:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.axis=e.button=void 0,e.button=function(t,e){return{type:"button",index:t,target:e}},e.axis=function(t,e,r){return{type:"axis",index:t,sign:e,target:r}}},2445:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this._state=!1,this._dirty=!1}toggle(t){t!==this._state&&(this._state=t,this._dirty=!0)}setState(t){this._state=t,this._dirty=!1}sync(t){this._dirty&&(t.toggle(this._state),this._dirty=!1)}}},2326:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultMapping=void 0;const n=r(2485);e.defaultMapping=[(0,n.button)(12,"up"),(0,n.button)(13,"down"),(0,n.button)(14,"left"),(0,n.button)(15,"right"),(0,n.button)(8,"select"),(0,n.button)(9,"start"),...[0,1,2,3,10,11].map((t=>(0,n.button)(t,"fire"))),...[4,5,6,7].map((t=>(0,n.button)(t,"pause"))),(0,n.axis)(0,"negative","left"),(0,n.axis)(0,"positive","right"),(0,n.axis)(1,"negative","up"),(0,n.axis)(1,"positive","down"),(0,n.axis)(2,"negative","left"),(0,n.axis)(2,"positive","right"),(0,n.axis)(3,"negative","up"),(0,n.axis)(3,"positive","down")],e.default=e.defaultMapping},3305:(t,e)=>{"use strict";function r(t,e){const r=t.createTexture(),n=t.createFramebuffer();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,64,64,0,t.RGBA,e,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.deleteFramebuffer(n),t.deleteTexture(r),i===t.FRAMEBUFFER_COMPLETE}function n(t){return t.getExtension("WEBGL_color_buffer_float"),!!t.getExtension("OES_texture_float")&&r(t,t.FLOAT)}function i(t){t.getExtension("EXT_color_buffer_half_float");const e=t.getExtension("OES_texture_half_float");return!!e&&r(t,e.HALF_FLOAT_OES)}function a(t,e,r){const n=t.getShaderPrecisionFormat(e,r);return!!n&&n.precision>0}Object.defineProperty(e,"__esModule",{value:!0}),e.detect=void 0,e.detect=function(t=null){if(!t){const e=document.createElement("canvas");e.width=64,e.height=64,t=e.getContext("webgl")||e.getContext("experimental-webgl")}return t?{floatTextures:n(t),halfFloatTextures:i(t),highpInFsh:a(t,t.FRAGMENT_SHADER,t.HIGH_FLOAT),highpInVsh:a(t,t.VERTEX_SHADER,t.HIGH_FLOAT)}:null}},8301:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655).__importDefault(r(4626)),i=r(5359);e.default=class{constructor(t,e){this._gl=t,this._capabilities=e,this._width=0,this._height=0,this._widthFrom=0,this._heightFrom=0,this._widthTo=0,this._heightTo=0,this._texture=null,this._program=null,this._framebuffer=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._initialized=!1}init(){if(this._initialized)return;const t=this._gl;this._framebuffer=t.createFramebuffer(),this._program=n.default.compile(t,i.vsh.plain.source(this._capabilities),i.fsh.blit.source(this._capabilities)),this._program.use(),this._program.uniform1i("u_Sampler0",0),this._vertexCoordinateBuffer=t.createBuffer(),this._textureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW),this._initialized=!0}destroy(){if(!this._initialized)return;const t=this._gl;this._program.delete(),t.deleteFramebuffer(this._framebuffer),t.deleteBuffer(this._vertexCoordinateBuffer),t.deleteBuffer(this._textureCoordinateBuffer),this._texture&&t.deleteTexture(this._texture),this._initialized=!1}render(t){const e=this._gl;this._program.use(),this._program.bindVertexAttribArray("a_VertexPosition",this._vertexCoordinateBuffer,2,e.FLOAT,!1,0,0),this._program.bindVertexAttribArray("a_TextureCoordinate",this._textureCoordinateBuffer,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),e.viewport(0,0,this._width,this._height),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4)}getWidth(){return this._width}getHeight(){return this._height}getTexture(){return this._texture}resize(t,e){this._widthFrom=t,this._heightFrom=e,this._reconfigure()}configure(t,e){this._widthTo=t,this._heightTo=e,this._reconfigure()}_reconfigure(){if(this._widthFrom<=0||this._heightFrom<=0||this._widthTo<=0||this._heightTo<=0||!this._initialized)return;this._width=this._widthTo>this._widthFrom?Math.floor(this._widthTo/this._widthFrom)*this._widthFrom:this._widthFrom,this._height=this._heightTo>this._heightFrom?Math.floor(this._heightTo/this._heightFrom)*this._heightFrom:this._heightFrom;const t=this._gl;this._texture&&t.deleteTexture(this._texture),this._texture=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this._width,this._height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}}},4114:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655).__importDefault(r(4626)),i=r(5359);e.default=class{constructor(t,e){this._gl=t,this._capabilities=e,this._height=0,this._programPass1=null,this._programPass2=null,this._targetPass1=null,this._targetPass2=null,this._framebuffer=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._initialized=!1}init(){if(this._initialized)return;const t=this._gl;t.getExtension("WEBGL_color_buffer_float"),t.getExtension("OES_texture_float"),this._programPass1=n.default.compile(t,i.vsh.plain.source(this._capabilities),i.fsh.ntscPass1.source(this._capabilities)),this._programPass2=n.default.compile(t,i.vsh.plain.source(this._capabilities),i.fsh.ntscPass2.source(this._capabilities)),this._programPass1.use(),this._programPass1.uniform1i("u_Sampler0",0),this._programPass2.use(),this._programPass2.uniform1i("u_Sampler0",0),this._framebuffer=t.createFramebuffer(),this._vertexCoordinateBuffer=t.createBuffer(),this._textureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW),this._initialized=!0}destroy(){if(!this._initialized)return;const t=this._gl;this._programPass1.delete(),this._programPass2.delete(),t.deleteFramebuffer(this._framebuffer),t.deleteTexture(this._targetPass1),t.deleteTexture(this._targetPass2),t.deleteBuffer(this._vertexCoordinateBuffer),t.deleteBuffer(this._textureCoordinateBuffer),this._initialized=!1}render(t){this._pass(t,this._targetPass1,this._programPass1,960),this._pass(this._targetPass1,this._targetPass2,this._programPass2,480)}getWidth(){return 480}getHeight(){return this._height}getTexture(){return this._targetPass2}resize(t,e){if(!this._initialized)return;if(160!==t)throw new Error("NTSC postprocessor supports only for width = 160");this._height=e;const r=this._gl;this._targetPass1&&r.deleteTexture(this._targetPass1),this._targetPass2&&r.deleteTexture(this._targetPass2),this._targetPass1=r.createTexture(),this._targetPass2=r.createTexture(),r.activeTexture(r.TEXTURE0);for(const t of[this._targetPass1,this._targetPass2])r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t===this._targetPass2?480:960,e,0,r.RGBA,t===this._targetPass1?this._textureType():r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)}configure(t){this._initialized&&(this._programPass1.use(),"composite"===t?(this._programPass1.uniform1f("u_Artifacting",1),this._programPass1.uniform1f("u_Fringing",1)):(this._programPass1.uniform1f("u_Artifacting",0),this._programPass1.uniform1f("u_Fringing",0)))}_pass(t,e,r,n){const i=this._gl;r.use(),r.bindVertexAttribArray("a_VertexPosition",this._vertexCoordinateBuffer,2,i.FLOAT,!1,0,0),r.bindVertexAttribArray("a_TextureCoordinate",this._textureCoordinateBuffer,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,this._framebuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0),i.viewport(0,0,n,this._height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_STRIP,0,4)}_textureType(){const t=this._gl;return this._capabilities.floatTextures?t.FLOAT:this._capabilities.halfFloatTextures?t.getExtension("OES_texture_half_float").HALF_FLOAT_OES:t.UNSIGNED_BYTE}}},6465:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655).__importDefault(r(4626)),i=r(5359);e.default=class{constructor(t,e){this._gl=t,this._capabilities=e,this._width=0,this._height=0,this._texture0=null,this._texture1=null,this._framebuffer=null,this._program=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._initialized=!1}init(){if(this._initialized)return;const t=this._gl;this._framebuffer=t.createFramebuffer(),this._program=n.default.compile(t,i.vsh.plain.source(this._capabilities),i.fsh.phosphor.source(this._capabilities)),this._program.use(),this._program.uniform1i("u_Sampler_NewImage",0),this._program.uniform1i("u_Sampler_PreviousImage",1),this._vertexCoordinateBuffer=t.createBuffer(),this._textureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW),this._initialized=!0}destroy(){if(!this._initialized)return;const t=this._gl;this._program.delete(),t.deleteFramebuffer(this._framebuffer),t.deleteBuffer(this._vertexCoordinateBuffer),t.deleteBuffer(this._textureCoordinateBuffer),this._texture0&&t.deleteTexture(this._texture0),this._texture1&&t.deleteTexture(this._texture1),this._initialized=!1}render(t){const e=this._gl;this._program.use(),this._program.bindVertexAttribArray("a_VertexPosition",this._vertexCoordinateBuffer,2,e.FLOAT,!1,0,0),this._program.bindVertexAttribArray("a_TextureCoordinate",this._textureCoordinateBuffer,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this._texture0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture1,0),e.viewport(0,0,this._width,this._height),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4);const r=this._texture1;this._texture1=this._texture0,this._texture0=r}getWidth(){return this._width}getHeight(){return this._height}getTexture(){return this._texture0}resize(t,e){if(!this._initialized)return;this._width=t,this._height=e;const r=this._gl;this._texture0&&r.deleteTexture(this._texture0),this._texture1&&r.deleteTexture(this._texture1),this._texture0=r.createTexture(),this._texture1=r.createTexture(),r.bindFramebuffer(r.FRAMEBUFFER,this._framebuffer),r.viewport(0,0,t,e),r.clearColor(0,0,0,1),r.activeTexture(r.TEXTURE0);for(const n of[this._texture0,this._texture1])r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,e,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0),r.clear(r.COLOR_BUFFER_BIT)}configure(t){this._initialized&&(this._program.use(),this._program.uniform1f("u_PhosphorLevel",t))}}},4626:(t,e)=>{"use strict";function r(t,e,r){const n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(`failed to compile shader:\n\n${t.getShaderInfoLog(n)}\n\n${r}`);return n}Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t,e,r,n){this._gl=t,this._program=e,this._vsh=r,this._fsh=n,this._attributeLocations=new Map,this._uniformLocations=new Map}static compile(t,e,i,a={a_VertexPosition:0}){const s=r(t,t.VERTEX_SHADER,e),o=r(t,t.FRAGMENT_SHADER,i),u=t.createProgram();for(const e of Object.keys(a))t.bindAttribLocation(u,a[e],e);if(t.attachShader(u,s),t.attachShader(u,o),t.linkProgram(u),!t.getProgramParameter(u,t.LINK_STATUS))throw new Error(`failed to link program:\n\n${t.getProgramInfoLog(u)}`);return new n(t,u,s,o)}delete(){const t=this._gl;t.deleteProgram(this._program),t.deleteShader(this._vsh),t.deleteShader(this._fsh)}use(){this._gl.useProgram(this._program)}getAttribLocation(t){if(!this._attributeLocations.has(t)){const e=this._gl.getAttribLocation(this._program,t);if(e<0)throw new Error(`invalid attribute ${t}`);this._attributeLocations.set(t,e)}return this._attributeLocations.get(t)}getUniformLocation(t){if(!this._uniformLocations.has(t)){const e=this._gl.getUniformLocation(this._program,t);if(null===e)throw new Error(`invalid uniform ${t}`);this._uniformLocations.set(t,e)}return this._uniformLocations.get(t)}bindVertexAttribArray(t,e,r,n,i,a,s){const o=this._gl;o.bindBuffer(o.ARRAY_BUFFER,e),o.vertexAttribPointer(this.getAttribLocation(t),r,n,i,a,s),o.enableVertexAttribArray(this.getAttribLocation(t))}uniform1i(t,e){this._gl.uniform1i(this.getUniformLocation(t),e)}uniform1f(t,e){this._gl.uniform1f(this.getUniformLocation(t),e)}}e.default=n},9456:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655).__importDefault(r(4626)),i=r(5359);e.default=class{constructor(t,e){this._gl=t,this._capabilities=e,this._width=0,this._height=0,this._texture=null,this._program=null,this._framebuffer=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._initialized=!1}init(){if(this._initialized)return;const t=this._gl;this._framebuffer=t.createFramebuffer(),this._program=n.default.compile(t,i.vsh.plain.source(this._capabilities),i.fsh.scanlines.source(this._capabilities)),this._program.use(),this._program.uniform1i("u_Sampler0",0),this._vertexCoordinateBuffer=t.createBuffer(),this._textureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW),this._initialized=!0}destroy(){if(!this._initialized)return;const t=this._gl;this._program.delete(),t.deleteFramebuffer(this._framebuffer),t.deleteBuffer(this._vertexCoordinateBuffer),t.deleteBuffer(this._textureCoordinateBuffer),this._texture&&t.deleteTexture(this._texture),this._initialized=!1}render(t){const e=this._gl;this._program.use(),this._program.bindVertexAttribArray("a_VertexPosition",this._vertexCoordinateBuffer,2,e.FLOAT,!1,0,0),this._program.bindVertexAttribArray("a_TextureCoordinate",this._textureCoordinateBuffer,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),e.viewport(0,0,this._width,2*this._height),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4)}getWidth(){return this._width}getHeight(){return 2*this._height}getTexture(){return this._texture}resize(t,e){if(!this._initialized)return;this._width=t,this._height=e;const r=this._gl;this._texture&&r.deleteTexture(this._texture),this._texture=r.createTexture(),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this._texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,2*e,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),this._program.use(),this._program.uniform1f("u_Height",2*this._height)}configure(t){this._initialized&&(this._program.use(),this._program.uniform1f("u_Level",1-t))}}},5359:(t,e)=>{"use strict";function r(t){return`precision ${t.highpInVsh?"highp":"mediump"} float;`}Object.defineProperty(e,"__esModule",{value:!0}),e.fsh=e.vsh=void 0,function(t){let e;!function(t){t.source=t=>`\n            ${function(t){return`precision ${t.highpInVsh?"highp":"mediump"} float;`}(t)}\n\n            attribute vec2 a_VertexPosition;\n            attribute vec2 a_TextureCoordinate;\n\n            varying vec2 v_TextureCoordinate;\n\n            void main() {\n                v_TextureCoordinate = a_TextureCoordinate;\n                gl_Position = vec4(a_VertexPosition, 0, 1);\n            }\n        `}(e=t.plain||(t.plain={}))}(e.vsh||(e.vsh={})),function(t){let e,n,i,a,s,o;!function(t){t.source=t=>`\n            ${r(t)}\n\n            varying vec2 v_TextureCoordinate;\n\n            uniform sampler2D u_Sampler0;\n\n            void main() {\n                gl_FragColor = vec4(texture2D(u_Sampler0, v_TextureCoordinate).rgb, 1.0);\n            }\n        `}(e=t.blit||(t.blit={})),function(t){t.source=t=>`\n            ${r(t)}\n\n            varying vec2 v_TextureCoordinate;\n\n            uniform sampler2D u_Sampler0;\n            uniform float u_Gamma;\n\n            void main() {\n                vec4 texel = texture2D(u_Sampler0, v_TextureCoordinate);\n\n                gl_FragColor = vec4(pow(texel.rgb, vec3(u_Gamma)), 1.);\n            }\n        `}(n=t.blitWithGamma||(t.blitWithGamma={})),function(t){t.source=t=>`\n            ${r(t)}\n\n            varying vec2 v_TextureCoordinate;\n\n            uniform float u_PhosphorLevel;\n            uniform sampler2D u_Sampler_NewImage;\n            uniform sampler2D u_Sampler_PreviousImage;\n\n            float applyPhosphor(float new, float previous) {\n                float decayed = previous * u_PhosphorLevel;\n                decayed = step(0.5, (previous - decayed) * 255.0) * decayed;\n\n                return max(new, decayed);\n            }\n\n            void main() {\n                vec4 new = texture2D(u_Sampler_NewImage, v_TextureCoordinate);\n                vec4 previous = texture2D(u_Sampler_PreviousImage, v_TextureCoordinate);\n\n                gl_FragColor = vec4(\n                    applyPhosphor(new.r, previous.r),\n                    applyPhosphor(new.g, previous.g),\n                    applyPhosphor(new.b, previous.b),\n                    1.0\n                );\n            }\n        `}(i=t.phosphor||(t.phosphor={})),function(t){t.source=t=>`\n            ${r(t)}\n\n            #define PI 3.14159265\n\n            #define CHROMA_MOD_FREQ (PI / 3.0)\n\n            #define SATURATION 1.0\n            #define BRIGHTNESS 1.0\n\n            uniform sampler2D u_Sampler0;\n            uniform float u_Fringing;\n            uniform float u_Artifacting;\n\n            varying vec2 v_TextureCoordinate;\n\n            const mat3 yiq_mat = mat3(\n                0.2989, 0.5870, 0.1140,\n                0.5959, -0.2744, -0.3216,\n                0.2115, -0.5229, 0.3114\n            );\n\n            vec3 rgb2yiq(vec3 col) {\n                return col * yiq_mat;\n            }\n\n            ${t.floatTextures||t.halfFloatTextures?"":"\n                vec4 pack(vec3 yiq) {\n                    yiq += 1.2;\n                    yiq /= 3.4;\n\n                    int y_byte = int(yiq.r * 1024.0);\n                    int i_byte = int(yiq.g * 1024.0);\n                    int q_byte = int(yiq.b * 1024.0);\n\n                    int y_high = (y_byte / 4) * 4;\n                    int i_high = (i_byte / 4) * 4;\n                    int q_high = (q_byte / 4) * 4;\n                    int alpha = (q_byte - q_high) * 16 + (i_byte - i_high) * 4 + (y_byte - y_high);\n\n                    return vec4(\n                        float(y_high / 4) / 255.0,\n                        float(i_high / 4) / 255.0,\n                        float(q_high / 4) / 255.0,\n                        float(alpha) / 255.0\n                    );\n                }\n                "}\n\n            void main() {\n                mat3 mix_mat = mat3(\n                    BRIGHTNESS, u_Fringing, u_Fringing,\n                    u_Artifacting, 2.0 * SATURATION, 0.0,\n                    u_Artifacting, 0.0, 2.0 * SATURATION\n                );\n\n                vec3 col = texture2D(u_Sampler0, v_TextureCoordinate).rgb;\n                vec3 yiq = rgb2yiq(col);\n\n                float mod_phase = v_TextureCoordinate.x * 960.0 * CHROMA_MOD_FREQ;\n\n                float i_mod = cos(mod_phase);\n                float q_mod = sin(mod_phase);\n\n                yiq.yz *= vec2(i_mod, q_mod); // Modulate.\n                yiq *= mix_mat; // Cross-talk.\n                yiq.yz *= vec2(i_mod, q_mod); // Demodulate.\n\n                gl_FragColor = ${t.floatTextures||t.halfFloatTextures?"vec4(yiq, 1.0)":"pack(yiq)"};\n            }\n        `}(a=t.ntscPass1||(t.ntscPass1={})),function(t){const e=[1202e-8,22146e-9,13155e-9,1202e-8,49979e-9,11394e-8,12215e-8,5612e-9,170516e-9,237199e-9,16964e-8,285688e-9,984574e-9,.002018683,.002002275,-909882e-9,-.007049081,-.01322286,-.012606931,.00246086,.035868225,.084016453,.1355635,.175261268,.190176552],n=[118847e-9,271306e-9,502642e-9,930833e-9,.001451013,.002064744,.002700432,.003241276,.003524948,-.003350284,-.002491729,-721149e-9,.002164659,.006313635,.011789103,.01854566,.026414396,.03510071,.044196567,.053207202,.061590275,.068803602,.074356193,.077856564,.079052396];function i(t,e){return t.floatTextures||t.halfFloatTextures?`${e}.rgb`:`unpack(${e})`}t.source=t=>`\n            ${r(t)}\n\n            uniform sampler2D u_Sampler0;\n            varying vec2 v_TextureCoordinate;\n\n            const mat3 yiq2rgb_mat = mat3(\n                1.0, 0.956, 0.6210,\n                1.0, -0.2720, -0.6474,\n                1.0, -1.1060, 1.7046\n            );\n\n            vec3 yiq2rgb(vec3 yiq) {\n                return yiq * yiq2rgb_mat;\n            }\n\n            ${t.floatTextures||t.halfFloatTextures?"":"\n                vec3 unpack(vec4 yiqPacked) {\n                    int y_high = int(yiqPacked.r * 1024.0);\n                    int i_high = int(yiqPacked.g * 1024.0);\n                    int q_high = int(yiqPacked.b * 1024.0);\n                    int alpha = int(yiqPacked.a * 256.0);\n\n                    int y_low = alpha - (alpha / 4) * 4;\n                    int i_low = alpha - y_low - (alpha / 16) * 16;\n                    int q_low = alpha - i_low - y_low;\n\n                    return vec3(\n                        float(y_high + y_low) / 1023.0,\n                        float(i_high + i_low) / 1023.0,\n                        float(q_high + q_low) / 1023.0\n                    ) * 3.4 - 1.2;\n                }\n                "}\n\n            vec3 fetch_offset(int offset) {\n                float x = (floor(v_TextureCoordinate.x * 960.0) + 0.5 + float(offset)) / 960.0;\n\n                return step(0.0, x) * step(-1.0, -x) *\n                    ${i(t,"texture2D(u_Sampler0, vec2(x, v_TextureCoordinate.y))")};\n            }\n\n            void main() {\n                float one_x = 1.0 / 960.0;\n                vec3 signal = vec3(0.0);\n\n                ${new Array(24).fill(0).map(((t,r)=>`\n                signal +=\n                    (fetch_offset(${r-24}) + fetch_offset(${24-r})) *\n                        vec3(${e[r]}, ${n[r]}, ${n[r]});\n                `)).join("\n")}\n\n                signal += ${i(t,"texture2D(u_Sampler0, v_TextureCoordinate)")} *\n                    vec3(${e[24]}, ${n[24]}, ${n[24]});\n\n                vec3 rgb = yiq2rgb(signal);\n                gl_FragColor = vec4(rgb, 1.0);\n            }\n        `}(s=t.ntscPass2||(t.ntscPass2={})),function(t){t.source=t=>`\n            ${r(t)}\n\n            uniform sampler2D u_Sampler0;\n            uniform float u_Level;\n            uniform float u_Height;\n\n            varying vec2 v_TextureCoordinate;\n\n            void main() {\n                vec3 texel = texture2D(u_Sampler0, v_TextureCoordinate).rgb;\n\n                gl_FragColor = vec4(\n                    (step(1.0, mod(v_TextureCoordinate.y * u_Height, 2.0)) * (1.0 - u_Level) + u_Level) * texel, 1.0);\n            }\n        `}(o=t.scanlines||(t.scanlines={}))}(e.fsh||(e.fsh={}))},9725:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(7819);function i(t){return{type:0,swtch:t}}function a(t){return{type:1,trigger:t}}class s{constructor(t,e=s.defaultMappings){this._target=t,this.toggleFullscreen=new n.Event,this.hardReset=new n.Event,this.togglePause=new n.Event,this._keydownListener=null,this._keyupListener=null,this._joystick0=null,this._joystick1=null,this._controlPanel=null,this._dispatchTable={},this._compiledMappings=new Map,this._compileMappings(e)}bind(t,e,r){this._joystick0||(this._joystick0=t,this._joystick1=e,this._controlPanel=r,this._updateActionTable(),this._keydownListener=t=>{if(!this._compiledMappings.has(t.keyCode))return;const e=(t.shiftKey?4:0)|(t.ctrlKey?1:0)|(t.altKey?2:0);if(!this._compiledMappings.get(t.keyCode).has(e))return;const r=this._compiledMappings.get(t.keyCode).get(e);if(void 0!==r){t.preventDefault();const e=this._dispatchTable[r];switch(e.type){case 0:e.swtch.toggle(!0);break;case 1:e.trigger.dispatch(void 0)}}},this._keyupListener=t=>{if(this._compiledMappings.has(t.keyCode))for(const e of this._compiledMappings.get(t.keyCode).values()){t.preventDefault();const r=this._dispatchTable[e];0===r.type&&r.swtch.toggle(!1)}},this._target.addEventListener("keydown",this._keydownListener),this._target.addEventListener("keyup",this._keyupListener))}unbind(){this._joystick0&&(this._target.removeEventListener("keydown",this._keydownListener),this._target.removeEventListener("keyup",this._keyupListener),this._joystick0=this._joystick1=this._controlPanel=null,this._keydownListener=this._keyupListener=null)}_updateActionTable(){this._dispatchTable[12]=a(this.toggleFullscreen),this._dispatchTable[13]=a(this.hardReset),this._dispatchTable[14]=a(this.togglePause),this._dispatchTable[0]=i(this._controlPanel.getSelectSwitch()),this._dispatchTable[1]=i(this._controlPanel.getResetButton()),this._dispatchTable[2]=i(this._joystick0.getLeft()),this._dispatchTable[3]=i(this._joystick0.getRight()),this._dispatchTable[4]=i(this._joystick0.getUp()),this._dispatchTable[5]=i(this._joystick0.getDown()),this._dispatchTable[10]=i(this._joystick0.getFire()),this._dispatchTable[6]=i(this._joystick1.getLeft()),this._dispatchTable[7]=i(this._joystick1.getRight()),this._dispatchTable[8]=i(this._joystick1.getUp()),this._dispatchTable[9]=i(this._joystick1.getDown()),this._dispatchTable[11]=i(this._joystick1.getFire())}_compileMappings(t){const e=(t,e,r)=>{if(0!=(-8&r))throw new Error(`invalid modifier set ${r}`);this._compiledMappings.has(e)||this._compiledMappings.set(e,new Map),this._compiledMappings.get(e).set(r,t)};t.forEach((t=>{const r=t.action;(Array.isArray(t.spec)?t.spec:[t.spec]).forEach((t=>e(r,"object"==typeof t?t.keycode:t,"object"==typeof t?t.modifiers:0)))}))}}e.default=s,function(t){t.defaultMappings=[{action:0,spec:{keycode:32,modifiers:4}},{action:1,spec:{keycode:13,modifiers:4}},{action:2,spec:[65,37]},{action:3,spec:[68,39]},{action:4,spec:[87,38]},{action:5,spec:[83,40]},{action:10,spec:[32,86]},{action:6,spec:74},{action:7,spec:76},{action:8,spec:73},{action:9,spec:75},{action:11,spec:66},{action:12,spec:13},{action:13,spec:{keycode:82,modifiers:4}},{action:14,spec:80}]}(s||(s={})),e.default=s},4030:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655),i=r(7819),a=n.__importDefault(r(5601));class s{constructor(t,e){this.touch=t,this.type="unknown";const r=e.getBoundingClientRect();this.x=(t.clientX-r.left)/r.width,this.y=(t.clientY-r.top)/r.height,this.x0=t.clientX,this.y0=t.clientY}}e.default=class{constructor(t,e=15,r=!1){this._canvas=t,this._joystickSensitivity=e,this._leftHanded=r,this._onTouchStart=t=>{for(let e=0;e<t.changedTouches.length;e++){const r=new s(t.changedTouches.item(e),this._canvas),n=r.touch.identifier;if((this._leftHanded?r.x>.5:r.x<=.5)?r.y<=.5?r.type="alt":r.type=this._isAlt?"pause":"fire":r.y<=.5?r.type=this._isAlt?"select":"joystick":r.type=this._isAlt?"reset":"joystick",!this._pendingTouches.has(n)&&!this._pendingTouches.has(r.type))switch(this._pendingTouches.set(n,r),this._pendingTouches.set(r.type,r),r.type){case"alt":this._isAlt=!0,this._fullscreenDoubleTapDetector.startTouch();break;case"fire":this._joystick.getFire().toggle(!0);break;case"pause":this.togglePause.dispatch(void 0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"select":this._select.toggle(!0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"reset":this._reset.toggle(!0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"joystick":break;default:throw new Error("invalid touch type")}}t.preventDefault()},this._onTouchEnd=t=>{for(let e=0;e<t.changedTouches.length;e++){const r=this._pendingTouches.get(t.changedTouches.item(e).identifier);if(r){switch(r.type){case"alt":this._isAlt=!1,this._fullscreenDoubleTapDetector.endTouch();break;case"fire":this._joystick.getFire().toggle(!1);break;case"select":this._select.toggle(!1);break;case"reset":this._reset.toggle(!1);break;case"joystick":this._joystick.getDown().toggle(!1),this._joystick.getUp().toggle(!1),this._joystick.getLeft().toggle(!1),this._joystick.getRight().toggle(!1);break;case"pause":break;default:throw new Error("invalid touch type")}this._pendingTouches.delete(r.type),this._pendingTouches.delete(r.touch.identifier)}}t.preventDefault()},this._onTouchMove=t=>{for(let e=0;e<t.changedTouches.length;e++){const r=t.changedTouches.item(e),n=this._pendingTouches.get(r.identifier);if(!n)continue;if("joystick"!==n.type)continue;const i=r.clientX-n.x0,a=r.clientY-n.y0,s=Math.sqrt(i*i+a*a),o=Math.abs(a/s),u=Math.abs(i/s),c=s>this._joystickSensitivity;this._joystick.getLeft().toggle(c&&i<0&&u>.5),this._joystick.getRight().toggle(c&&i>0&&u>.5),this._joystick.getUp().toggle(c&&a<0&&o>.5),this._joystick.getDown().toggle(c&&a>0&&o>.5),s>3*this._joystickSensitivity&&(n.x0+=i/s*(s-3*this._joystickSensitivity),n.y0+=a/s*(s-3*this._joystickSensitivity))}t.preventDefault()},this.togglePause=new i.Event,this._fullscreenDoubleTapDetector=new a.default,this._bound=!1,this._joystick=null,this._select=null,this._reset=null,this._isAlt=!1,this._pendingTouches=new Map,this.toggleFullscreen=this._fullscreenDoubleTapDetector.trigger}static isSupported(){return"ontouchstart"in window}bind(t,e){this._bound||(this._bound=!0,this._joystick=t,this._select=e.getSelectSwitch(),this._reset=e.getResetButton(),this._bindListeners())}unbind(){this._bound&&(this._unbindListeners(),this._bound=!1,this._joystick=this._reset=this._select=null)}_bindListeners(){this._canvas.addEventListener("touchstart",this._onTouchStart),this._canvas.addEventListener("touchend",this._onTouchEnd),this._canvas.addEventListener("touchmove",this._onTouchMove)}_unbindListeners(){this._canvas.removeEventListener("touchstart",this._onTouchStart),this._canvas.removeEventListener("touchend",this._onTouchEnd),this._canvas.removeEventListener("touchmove",this._onTouchMove)}}},1752:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(2845));e.default=class{constructor(t){this._fragmentSize=t,this._pcmAudio=!1,this._volume=1}init(){}bind(t,e){if(!this._channels){this._channels=[...e],this._driver&&this._pcmAudio===t||(this._driver&&this._driver.close(),this._driver=t?new i.default(0,this._channels.length,this._fragmentSize):new i.default(this._channels.length,0,this._fragmentSize),this._driver.init()),t?this._driver.bind([],this._channels):this._driver.bind(this._channels,[]);for(let t=0;t<this._channels.length;t++)this._driver.setMasterVolume(t,this._volume);this._pcmAudio=t}}unbind(){this._channels&&(this._driver.unbind(),this._channels=null)}setMasterVolume(t){if(this._volume=t,this._channels)for(let t=0;t<this._channels.length;t++)this._driver.setMasterVolume(t,this._volume)}getMasterVolume(){return this._volume}pause(){return n.__awaiter(this,void 0,void 0,(function*(){this._driver&&(yield this._driver.pause())}))}resume(){return n.__awaiter(this,void 0,void 0,(function*(){this._driver&&(yield this._driver.resume())}))}}},5601:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(7819);e.default=class{constructor(t=500,e=200){this._maxTapLength=t,this._timeout=e,this.trigger=new n.Event,this._dispatch=!1,this._touching=!1,this._lastTouchEligible=!1,this._lastTouchStart=0,this._lastTouchEnd=0}startTouch(){this._lastTouchStart=Date.now(),this._touching||(this._touching=!0,this._dispatch=this._lastTouchEligible&&this._lastTouchStart-this._lastTouchEnd<this._timeout)}endTouch(){this._lastTouchEnd=Date.now(),this._dispatch&&(this._dispatch=!1,this.trigger.dispatch(void 0)),this._touching&&(this._touching=!1,this._lastTouchEligible=this._lastTouchStart-this._lastTouchEnd<this._maxTapLength)}cancelTouch(){this.endTouch(),this._lastTouchEligible=!1}isDispatching(){return this._dispatch}}},2548:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655).__importDefault(r(1692));class i{constructor(){this._drivers=new Map,this._driversBound=!1}bind(t){return this._driversBound||(this._emulationService=t,this._shouldBindDrivers()&&this._bindDrivers(),this._emulationService.stateChanged.addHandler(i._onEmuStateChange,this)),this}unbind(){return this._emulationService?(this._unbindDrivers(),this._emulationService.stateChanged.removeHandler(i._onEmuStateChange,this),this._emulationService=null,this):this}addDriver(t,e){return this._drivers.set(t,new i.DriverContext(t,e)),this._driversBound&&e(this._emulationService.getEmulationContext(),t),this}removeDriver(t){return this._drivers.get(t)?(t.unbind(),this._drivers.delete(t),this):this}static _onEmuStateChange(t,e){e._shouldBindDrivers(t)?e._bindDrivers():e._unbindDrivers()}_shouldBindDrivers(t=(this._emulationService?this._emulationService.getState():void 0)){return this._emulationService&&(t===n.default.State.running||t===n.default.State.paused)}_bindDrivers(){this._driversBound||(this._drivers.forEach((t=>t.binder(this._emulationService.getEmulationContext(),t.driver))),this._driversBound=!0)}_unbindDrivers(){this._driversBound&&(this._drivers.forEach((t=>t.driver.unbind())),this._driversBound=!1)}}e.default=i,function(t){t.DriverContext=class{constructor(t,e){this.driver=t,this.binder=e}}}(i||(i={})),e.default=i},1692:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,function(t){let e;!function(t){t.stopped="stopped",t.running="running",t.paused="paused",t.error="error"}(e=t.State||(t.State={}))}(r||(r={})),e.default=r},2157:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(3454),i=r(7819);e.default=class{constructor(t){this._rpc=t,this.message=new i.Event}init(){this._rpc.registerSignalHandler(n.SIGNAL_TYPE.messageFromAsyncIO,(t=>this.message.dispatch(t)))}send(t){this._rpc.signal(n.SIGNAL_TYPE.messageToAsyncIO,Array.from(t))}}},7577:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=n.__importDefault(r(7451)),a=n.__importDefault(r(9823)),s=n.__importDefault(r(7866)),o=r(3454);class u{constructor(t){this._rpc=t,this._joysticks=new Array(2),this._paddles=new Array(4),this._controlPanel=new a.default;for(let t=0;t<2;t++)this._joysticks[t]=new i.default;for(let t=0;t<4;t++)this._paddles[t]=new s.default}sendUpdate(){this._rpc.signal(o.SIGNAL_TYPE.controlStateUpdate,{joystickState:this._joysticks.map(u._joystickState),paddleState:this._paddles.map(u._paddleState),controlPanelState:u._controlPanelState(this._controlPanel)})}getJoystick(t){if(t<0||t>1)throw new Error(`invalid joystick index ${t}`);return this._joysticks[t]}getControlPanel(){return this._controlPanel}getPaddle(t){if(t<0||t>3)throw new Error(`invalid paddle index ${t}`);return this._paddles[t]}static _joystickState(t){return{up:t.getUp().read(),down:t.getDown().read(),left:t.getLeft().read(),right:t.getRight().read(),fire:t.getFire().read()}}static _paddleState(t){return{value:t.getValue(),fire:t.getFire().read()}}static _controlPanelState(t){return{difficulty0:t.getDifficultySwitchP0().read(),difficulty1:t.getDifficultySwitchP1().read(),select:t.getSelectSwitch().read(),reset:t.getResetButton().read(),color:t.getColorSwitch().read()}}}e.default=u},3097:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=class{constructor(t,e,r,n,i){if(this._videoProxy=t,this._controlProxy=e,this._waveformChannels=r,this._pcmChannel=n,this._asyncIOProxy=i,this._config=null,2!==this._waveformChannels.length)throw new Error(`invalid channel count ${this._waveformChannels.length}`)}setConfig(t){this._config=t}getConfig(){return this._config}getVideo(){return this._videoProxy}getJoystick(t){return this._controlProxy.getJoystick(t)}getControlPanel(){return this._controlProxy.getControlPanel()}getPaddle(t){return this._controlProxy.getPaddle(t)}getWaveformChannels(){return this._waveformChannels}getPCMChannel(){return this._pcmChannel}getVideoProxy(){return this._videoProxy}getAsyncIO(){return this._asyncIOProxy}}},530:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=r(7819),a=r(158),s=n.__importDefault(r(1692)),o=n.__importDefault(r(3097)),u=n.__importDefault(r(9158)),c=n.__importDefault(r(7577)),l=n.__importDefault(r(4197)),h=n.__importDefault(r(2277)),f=r(8125),d=r(3454),_=n.__importDefault(r(2157));e.default=class{constructor(t){this._stellaWorkerUri=t,this.stateChanged=new i.Event,this.frequencyUpdate=new i.Event,this._rateLimitEnforced=!0,this._mutex=new f.Mutex,this._worker=null,this._rpc=null,this._state=s.default.State.stopped,this._lastError=null,this._emulationContext=null,this._frequency=0,this._waveformChannels=new Array(2),this._pcmChannel=null,this._controlProxy=null,this._controlProxyUpdateHandle=null,this._proxyState=0,this._savedConfig=null}init(){return n.__awaiter(this,void 0,void 0,(function*(){this._worker=new Worker(this._stellaWorkerUri),this._rpc=new a.RpcProvider(((t,e)=>this._worker.postMessage(t,e))),this._pcmChannel=new h.default(0,this._rpc).init();for(let t=0;t<2;t++)this._waveformChannels[t]=new l.default(t,this._rpc).init();const t=new u.default(this._rpc),e=new c.default(this._rpc),r=new _.default(this._rpc);r.init(),t.init(),this._emulationContext=new o.default(t,e,this._waveformChannels,this._pcmChannel,r),this._worker.onmessage=t=>this._rpc.dispatch(t.data),this._rpc.registerSignalHandler(d.SIGNAL_TYPE.emulationFrequencyUpdate,this._onFrequencyUpdate.bind(this)).registerSignalHandler(d.SIGNAL_TYPE.emulationError,this._onEmulationError.bind(this)),this._controlProxy=e}))}start(t,e,r){return n.__awaiter(this,void 0,void 0,(function*(){return yield this.stop(),this._mutex.runExclusive((()=>n.__awaiter(this,void 0,void 0,(function*(){const n=yield this._rpc.rpc(d.RPC_TYPE.emulationStart,{buffer:t,config:e,cartridgeType:r});return n===s.default.State.paused?(this._savedConfig=e,this._emulationContext.setConfig(e),yield this._startProxies(e)):this._savedConfig=null,this._applyState(n)}))))}))}pause(){return this._mutex.runExclusive((()=>this._rpc.rpc(d.RPC_TYPE.emulationPause).then((t=>(this._pauseProxies(),this._applyState(t))))))}stop(){return this._mutex.runExclusive((()=>this._rpc.rpc(d.RPC_TYPE.emulationStop).then((t=>(this._stopProxies(),this._applyState(t))))))}reset(){return this._mutex.runExclusive((()=>n.__awaiter(this,void 0,void 0,(function*(){const t=yield this._rpc.rpc(d.RPC_TYPE.emulationReset);return this._state!==s.default.State.error||t!==s.default.State.running&&t!==s.default.State.paused||!this._savedConfig||(yield this._startProxies(this._savedConfig)),this._applyState(t)}))))}resume(){return this._mutex.runExclusive((()=>this._rpc.rpc(d.RPC_TYPE.emulationResume).then((t=>(this._resumeProxies(),this._applyState(t))))))}setRateLimit(t){return this._rateLimitEnforced=t,this._rpc.rpc(d.RPC_TYPE.emulationSetRateLimit,t)}getFrequency(){return this._frequency}getRateLimit(){return this._rateLimitEnforced}getState(){return this._state}getLastError(){return this._lastError}getEmulationContext(){switch(this._state){case s.default.State.running:case s.default.State.paused:return this._emulationContext;default:return null}}_fetchLastError(){return this._rpc.rpc(d.RPC_TYPE.emulationFetchLastError).then((t=>t?new Error(t):null))}_applyState(t){return t===s.default.State.error?this._fetchLastError().then((e=>(this._state=t,this._lastError=e,this._stopProxies(),this.stateChanged.dispatch(t),t))):(this._state=t,this.stateChanged.dispatch(t),t)}_onFrequencyUpdate(t){this._frequency=t,this.frequencyUpdate.dispatch(this._frequency)}_onEmulationError(t){this._lastError=new Error(t||""),this._stopProxies(),this._state=s.default.State.error,this.stateChanged.dispatch(this._state)}_startProxies(t){return n.__awaiter(this,void 0,void 0,(function*(){yield this._emulationContext.getVideoProxy().start();for(let e=0;e<this._waveformChannels.length;e++)yield this._waveformChannels[e].start(t);yield this._pcmChannel.start(),this._startControlUpdates(),this._proxyState=1}))}_stopProxies(){0!==this._proxyState&&(this._emulationContext.getVideoProxy().stop(),this._pcmChannel.stop(),this._stopControlUpdates(),this._proxyState=0)}_pauseProxies(){1===this._proxyState&&(this._stopControlUpdates(),this._proxyState=2)}_resumeProxies(){2===this._proxyState&&(this._startControlUpdates(),this._proxyState=1)}_startControlUpdates(){null===this._controlProxyUpdateHandle&&(this._controlProxyUpdateHandle=setInterval((()=>this._controlProxy.sendUpdate()),25))}_stopControlUpdates(){null!==this._controlProxyUpdateHandle&&(clearInterval(this._controlProxyUpdateHandle),this._controlProxyUpdateHandle=null)}}},2277:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=r(7819),a=n.__importDefault(r(2518)),s=r(3454);class o{constructor(t,e){this._index=t,this._rpc=e,this.newFrame=new i.Event,this.togglePause=new i.Event,this._sampleRate=0,this._frameSize=0,this._paused=!1,this._framePool=new a.default((()=>null)),this._frameMap=new WeakMap,this._enabled=!1,this._signalReturnFrame="",this._framePool.event.release.addHandler(o._onReleaseFragment,this),this._signalReturnFrame=s.SIGNAL_TYPE.pcmAudioReturnFrame(this._index)}init(){return this._rpc.registerSignalHandler(s.SIGNAL_TYPE.pcmAudioNewFrame(this._index),this._onNewFrame.bind(this)).registerSignalHandler(s.SIGNAL_TYPE.pcmAudioTogglePause(this._index),this._onTogglePause.bind(this)),this}start(){return n.__awaiter(this,void 0,void 0,(function*(){if(this._enabled)return;const t=yield this._rpc.rpc(s.RPC_TYPE.getPCMAudioParameters(this._index));this._sampleRate=t.sampleRate,this._frameSize=t.frameSize,this._paused=t.paused,this._enabled=!0}))}stop(){this._enabled=!1}isPaused(){return this._paused}getSampleRate(){return this._sampleRate}getFrameSize(){return this._frameSize}static _onReleaseFragment(t,e){e._frameMap.has(t)&&e._rpc.signal(e._signalReturnFrame,{id:e._frameMap.get(t),buffer:t.buffer},[t.buffer])}_onNewFrame(t){if(!this._enabled)return;const e=this._framePool.get(),r=new Float32Array(t.buffer);e.adopt(r),this._frameMap.set(r,t.id),this.newFrame.dispatch(e)}_onTogglePause(t){t.paused!==this._paused&&(this._paused=t.paused,this.togglePause.dispatch(this._paused))}}e.default=o},9158:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=r(7819),a=n.__importDefault(r(2518)),s=r(3454);class o{constructor(t){this._rpc=t,this.newFrame=new i.Event,this._framePool=new a.default((()=>null)),this._frameMap=null,this._active=!1,this._width=0,this._height=0,this._framePool.event.release.addHandler(o._onDisposeFrame,this)}init(){this._rpc.registerSignalHandler(s.SIGNAL_TYPE.videoNewFrame,this._onNewFrame.bind(this))}start(){return n.__awaiter(this,void 0,void 0,(function*(){this._active&&this.stop();const t=yield this._rpc.rpc(s.RPC_TYPE.getVideoParameters);this._active=!0,this._width=t.width,this._height=t.height,this._frameMap=new WeakMap}))}stop(){this._active=!1}getWidth(){return this._width}getHeight(){return this._height}static _onDisposeFrame(t,e){if(!e._active)return;if(!e._frameMap.has(t))return void console.warn("unknown imageData returned to proxy");const r=e._frameMap.get(t);e._frameMap.delete(t),e._rpc.signal(s.SIGNAL_TYPE.videoReturnSurface,{id:r,buffer:t.data.buffer},[t.data.buffer])}_onNewFrame(t){if(!this._active)return void console.warn("video proxy deactivated: ignoring frame");if(this._width!==t.width||this._height!==t.height)return void console.warn("surface dimensions do not match; ignoring frame");const e=this._framePool.get(),r=new ImageData(new Uint8ClampedArray(t.buffer),t.width,t.height);e.adopt(r),this._frameMap.set(r,t.id),this.newFrame.dispatch(e)}}e.default=o},4197:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(655),i=r(7819),a=n.__importDefault(r(7028)),s=r(3454);e.default=class{constructor(t,e){this._index=t,this._rpc=e,this.bufferChanged=new i.Event,this.volumeChanged=new i.Event,this.stop=new i.Event,this._toneGenerator=new a.default,this._volume=0}init(){return this._rpc.registerSignalHandler(s.SIGNAL_TYPE.waveformAudioBufferChange,this._onBufferChangeSignal.bind(this)).registerSignalHandler(s.SIGNAL_TYPE.waveformAudioVolumeChange,this._onVolumeChangeSignal.bind(this)).registerSignalHandler(s.SIGNAL_TYPE.audioStop,this._onStopSignal.bind(this)),this}start(t){return n.__awaiter(this,void 0,void 0,(function*(){const e=yield this._rpc.rpc(s.RPC_TYPE.getWaveformAudioParameters(this._index));this._toneGenerator.setConfig(t),this.setVolume(e.volume)}))}setVolume(t){return this._volume=t,this}getVolume(){return this._volume}getBuffer(t){return this._toneGenerator.getBuffer(t)}_onVolumeChangeSignal(t){t.index===this._index&&(this._volume=t.value,this.volumeChanged.dispatch(this._volume))}_onBufferChangeSignal(t){t.index===this._index&&this.bufferChanged.dispatch(t.key)}_onStopSignal(t){t===this._index&&this.stop.dispatch(void 0)}}},3454:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SIGNAL_TYPE=e.RPC_TYPE=void 0,e.RPC_TYPE={emulationPause:"emulation/pause",emulationReset:"emulation/reset",emulationResume:"emulation/resume",emulationSetRateLimit:"emulation/setRateLimit",emulationStart:"emulation/start",emulationStop:"emulation/stop",emulationFetchLastError:"emulation/fetchLastError",getVideoParameters:"video/getParameters",getWaveformAudioParameters:t=>`audio/waveform/getParameters/${t}`,getPCMAudioParameters:t=>`audio/pcm/getParameters/${t}`,setup:"/setup"},Object.freeze(e.RPC_TYPE),e.SIGNAL_TYPE={emulationError:"emulation/error",emulationFrequencyUpdate:"emulation/frequencyUpdate",videoNewFrame:"video/newFrame",videoReturnSurface:"video/returnSurface",controlStateUpdate:"control/stateUpdate",waveformAudioVolumeChange:"audio/waveform/volumeChange",waveformAudioBufferChange:"audio/waveform/bufferChange",pcmAudioNewFrame:t=>`audio/pcm/newFrame/${t}`,pcmAudioTogglePause:t=>`audio/pcm/togglePause/${t}`,pcmAudioReturnFrame:t=>`audio/pcm/returnFrame/${t}`,audioStop:"audio/stop",messageFromAsyncIO:"asyncIO/messageFrom",messageToAsyncIO:"asyncIO/messageTo"},Object.freeze(e.SIGNAL_TYPE)},655:(t,e,r)=>{"use strict";r.r(e),r.d(e,{__assign:()=>a,__asyncDelegator:()=>w,__asyncGenerator:()=>v,__asyncValues:()=>A,__await:()=>y,__awaiter:()=>l,__classPrivateFieldGet:()=>S,__classPrivateFieldIn:()=>I,__classPrivateFieldSet:()=>T,__createBinding:()=>f,__decorate:()=>o,__exportStar:()=>d,__extends:()=>i,__generator:()=>h,__importDefault:()=>C,__importStar:()=>E,__makeTemplateObject:()=>k,__metadata:()=>c,__param:()=>u,__read:()=>p,__rest:()=>s,__spread:()=>g,__spreadArray:()=>b,__spreadArrays:()=>m,__values:()=>_});var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var a=function(){return a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a.apply(this,arguments)};function s(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function o(t,e,r,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(a<3?i(s):a>3?i(e,r,s):i(e,r))||s);return a>3&&s&&Object.defineProperty(e,r,s),s}function u(t,e){return function(r,n){e(r,n,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,r,n){return new(r||(r=Promise))((function(i,a){function s(t){try{u(n.next(t))}catch(t){a(t)}}function o(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}u((n=n.apply(t,e||[])).next())}))}function h(t,e){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}var f=Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]};function d(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||f(e,t,r)}function _(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,a=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function m(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n}function b(t,e,r){if(r||2===arguments.length)for(var n,i=0,a=e.length;i<a;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),a=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){a.push([t,e,r,n])>1||o(t,e)}))})}function o(t,e){try{(r=i[t](e)).value instanceof y?Promise.resolve(r.value.v).then(u,c):l(a[0][2],r)}catch(t){l(a[0][3],t)}var r}function u(t){o("next",t)}function c(t){o("throw",t)}function l(t,e){t(e),a.shift(),a.length&&o(a[0][0],a[0][1])}}function w(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:y(t[n](e)),done:"return"===n}:i?i(e):e}:i}}function A(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=_(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){!function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)}(n,i,(e=t[r](e)).done,e.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var x=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&f(e,t,r);return x(e,t),e}function C(t){return t&&t.__esModule?t:{default:t}}function S(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)}function T(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r}function I(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}},1496:t=>{"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},384:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},9539:(t,e,r)=>{var n=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var i=arguments,a=i.length,o=String(t).replace(n,(function(t){if("%%"===t)return"%";if(r>=a)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return t}})),u=i[r];r<a;u=i[++r])_(u)||!y(u)?o+=" "+u:o+=" "+s(u);return o},e.deprecate=function(t,n){if(m(r.g.process))return function(){return e.deprecate(t,n).apply(this,arguments)};if(!0===process.noDeprecation)return t;var i=!1;return function(){if(!i){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),i=!0}return t.apply(this,arguments)}};var i,a={};function s(t,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&e._extend(n,r),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),c(n,t,n.depth)}function o(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function u(t,e){return t}function c(t,r,n){if(t.customInspect&&r&&A(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return g(i)||(i=c(t,i,n)),i}var a=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(g(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return p(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):_(e)?t.stylize("null","null"):void 0}(t,r);if(a)return a;var s=Object.keys(r),o=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),w(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(r);if(0===s.length){if(A(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(b(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(v(r))return t.stylize(Date.prototype.toString.call(r),"date");if(w(r))return l(r)}var y,k="",x=!1,E=["{","}"];return f(r)&&(x=!0,E=["[","]"]),A(r)&&(k=" [Function"+(r.name?": "+r.name:"")+"]"),b(r)&&(k=" "+RegExp.prototype.toString.call(r)),v(r)&&(k=" "+Date.prototype.toUTCString.call(r)),w(r)&&(k=" "+l(r)),0!==s.length||x&&0!=r.length?n<0?b(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),y=x?function(t,e,r,n,i){for(var a=[],s=0,o=e.length;s<o;++s)S(e,String(s))?a.push(h(t,e,r,n,String(s),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(h(t,e,r,n,i,!0))})),a}(t,r,n,o,s):s.map((function(e){return h(t,r,n,o,e,x)})),t.seen.pop(),function(t,e,r){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}(y,k,E)):E[0]+k+E[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,r,n,i,a){var s,o,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?o=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(o=t.stylize("[Setter]","special")),S(n,i)||(s="["+i+"]"),o||(t.seen.indexOf(u.value)<0?(o=_(r)?c(t,u.value,null):c(t,u.value,r-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+o.split("\n").map((function(t){return"   "+t})).join("\n")):o=t.stylize("[Circular]","special")),m(s)){if(a&&i.match(/^\d+$/))return o;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+o}function f(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function _(t){return null===t}function p(t){return"number"==typeof t}function g(t){return"string"==typeof t}function m(t){return void 0===t}function b(t){return y(t)&&"[object RegExp]"===k(t)}function y(t){return"object"==typeof t&&null!==t}function v(t){return y(t)&&"[object Date]"===k(t)}function w(t){return y(t)&&("[object Error]"===k(t)||t instanceof Error)}function A(t){return"function"==typeof t}function k(t){return Object.prototype.toString.call(t)}function x(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(m(i)&&(i=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var r=process.pid;a[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=d,e.isNull=_,e.isNullOrUndefined=function(t){return null==t},e.isNumber=p,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=b,e.isObject=y,e.isDate=v,e.isError=w,e.isFunction=A,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(384);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var t=new Date,e=[x(t.getHours()),x(t.getMinutes()),x(t.getSeconds())].join(":");return[t.getDate(),E[t.getMonth()],e].join(" ")}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=r(1496),e._extend=function(t,e){if(!e||!y(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}},8520:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7819),i="resolve_transaction",a="reject_transaction",s="error",o=function(){function t(t,e){void 0===e&&(e=0),this._dispatch=t,this._rpcTimeout=e,this.error=new n.Event,this._rpcHandlers={},this._signalHandlers={},this._pendingTransactions={},this._nextTransactionId=0}return t.prototype.dispatch=function(e){var r=e;switch(r.type){case t.MessageType.signal:return this._handleSignal(r);case t.MessageType.rpc:return this._handeRpc(r);case t.MessageType.internal:return this._handleInternal(r);default:this._raiseError("invalid message type "+r.type)}},t.prototype.rpc=function(e,r,n){var i=this,a=this._nextTransactionId++;return this._dispatch({type:t.MessageType.rpc,transactionId:a,id:e,payload:r},n||void 0),new Promise((function(t,e){var r=i._pendingTransactions[a]={id:a,resolve:t,reject:e};i._rpcTimeout>0&&(i._pendingTransactions[a].timeoutHandle=setTimeout((function(){return i._transactionTimeout(r)}),i._rpcTimeout))}))},t.prototype.signal=function(e,r,n){return this._dispatch({type:t.MessageType.signal,id:e,payload:r},n||void 0),this},t.prototype.registerRpcHandler=function(t,e){if(this._rpcHandlers[t])throw new Error("rpc handler for "+t+" already registered");return this._rpcHandlers[t]=e,this},t.prototype.registerSignalHandler=function(t,e){return this._signalHandlers[t]||(this._signalHandlers[t]=[]),this._signalHandlers[t].push(e),this},t.prototype.deregisterRpcHandler=function(t,e){return this._rpcHandlers[t]&&delete this._rpcHandlers[t],this},t.prototype.deregisterSignalHandler=function(t,e){return this._signalHandlers[t]&&(this._signalHandlers[t]=this._signalHandlers[t].filter((function(t){return e!==t}))),this},t.prototype._raiseError=function(e){this.error.dispatch(new Error(e)),this._dispatch({type:t.MessageType.internal,id:s,payload:e})},t.prototype._handleSignal=function(t){if(!this._signalHandlers[t.id])return this._raiseError("invalid signal "+t.id);this._signalHandlers[t.id].forEach((function(e){return e(t.payload)}))},t.prototype._handeRpc=function(e){var r=this;if(!this._rpcHandlers[e.id])return this._raiseError("invalid rpc "+e.id);Promise.resolve(this._rpcHandlers[e.id](e.payload)).then((function(n){return r._dispatch({type:t.MessageType.internal,id:i,transactionId:e.transactionId,payload:n})}),(function(n){return r._dispatch({type:t.MessageType.internal,id:a,transactionId:e.transactionId,payload:n})}))},t.prototype._handleInternal=function(t){var e=void 0!==t.transactionId?this._pendingTransactions[t.transactionId]:void 0;switch(t.id){case i:if(!e||void 0===t.transactionId)return this._raiseError("no pending transaction with id "+t.transactionId);e.resolve(t.payload),this._clearTransaction(this._pendingTransactions[t.transactionId]);break;case a:if(!e||void 0===t.transactionId)return this._raiseError("no pending transaction with id "+t.transactionId);this._pendingTransactions[t.transactionId].reject(t.payload),this._clearTransaction(this._pendingTransactions[t.transactionId]);break;case s:this.error.dispatch(new Error("remote error: "+t.payload));break;default:this._raiseError("unhandled internal message "+t.id)}},t.prototype._transactionTimeout=function(t){t.reject("transaction timed out"),this._raiseError("transaction "+t.id+" timed out"),delete this._pendingTransactions[t.id]},t.prototype._clearTransaction=function(t){void 0!==t.timeoutHandle&&clearTimeout(t.timeoutHandle),delete this._pendingTransactions[t.id]},t}();!function(t){var e;(e=t.MessageType||(t.MessageType={}))[e.signal=0]="signal",e[e.rpc=1]="rpc",e[e.internal=2]="internal"}(o||(o={})),e.default=o},158:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8520);e.RpcProvider=n.default},9520:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Dexie:()=>Nr,RangeSet:()=>Dr,default:()=>Nr,liveQuery:()=>Vr,mergeRanges:()=>jr,rangesOverlap:()=>Mr});const n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,i=Object.keys,a=Array.isArray;function s(t,e){return"object"!=typeof e||i(e).forEach((function(r){t[r]=e[r]})),t}"undefined"==typeof Promise||n.Promise||(n.Promise=Promise);const o=Object.getPrototypeOf,u={}.hasOwnProperty;function c(t,e){return u.call(t,e)}function l(t,e){"function"==typeof e&&(e=e(o(t))),("undefined"==typeof Reflect?i:Reflect.ownKeys)(e).forEach((r=>{f(t,r,e[r])}))}const h=Object.defineProperty;function f(t,e,r,n){h(t,e,s(r&&c(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function d(t){return{from:function(e){return t.prototype=Object.create(e.prototype),f(t.prototype,"constructor",t),{extend:l.bind(null,t.prototype)}}}}const _=Object.getOwnPropertyDescriptor;function p(t,e){let r;return _(t,e)||(r=o(t))&&p(r,e)}const g=[].slice;function m(t,e,r){return g.call(t,e,r)}function b(t,e){return e(t)}function y(t){if(!t)throw new Error("Assertion Failed")}function v(t){n.setImmediate?setImmediate(t):setTimeout(t,0)}function w(t,e){return t.reduce(((t,r,n)=>{var i=e(r,n);return i&&(t[i[0]]=i[1]),t}),{})}function A(t,e){if(c(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var r=[],n=0,i=e.length;n<i;++n){var a=A(t,e[n]);r.push(a)}return r}var s=e.indexOf(".");if(-1!==s){var o=t[e.substr(0,s)];return void 0===o?void 0:A(o,e.substr(s+1))}}function k(t,e,r){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){y("string"!=typeof r&&"length"in r);for(var n=0,i=e.length;n<i;++n)k(t,e[n],r[n])}else{var s=e.indexOf(".");if(-1!==s){var o=e.substr(0,s),u=e.substr(s+1);if(""===u)void 0===r?a(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=r;else{var l=t[o];l&&c(t,o)||(l=t[o]={}),k(l,u,r)}}else void 0===r?a(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=r}}function x(t){var e={};for(var r in t)c(t,r)&&(e[r]=t[r]);return e}const E=[].concat;function C(t){return E.apply([],t)}const S="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(C([8,16,32,64].map((t=>["Int","Uint","Float"].map((e=>e+t+"Array")))))).filter((t=>n[t])),T=S.map((t=>n[t]));w(S,(t=>[t,!0]));let I=null;function P(t){I="undefined"!=typeof WeakMap&&new WeakMap;const e=R(t);return I=null,e}function R(t){if(!t||"object"!=typeof t)return t;let e=I&&I.get(t);if(e)return e;if(a(t)){e=[],I&&I.set(t,e);for(var r=0,n=t.length;r<n;++r)e.push(R(t[r]))}else if(T.indexOf(t.constructor)>=0)e=t;else{const r=o(t);for(var i in e=r===Object.prototype?{}:Object.create(r),I&&I.set(t,e),t)c(t,i)&&(e[i]=R(t[i]))}return e}const{toString:B}={};function O(t){return B.call(t).slice(8,-1)}const D="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",F="symbol"==typeof D?function(t){var e;return null!=t&&(e=t[D])&&e.apply(t)}:function(){return null},j={};function M(t){var e,r,n,i;if(1===arguments.length){if(a(t))return t.slice();if(this===j&&"string"==typeof t)return[t];if(i=F(t)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==t)return[t];if("number"==typeof(e=t.length)){for(r=new Array(e);e--;)r[e]=t[e];return r}return[t]}for(e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return r}const L="undefined"!=typeof Symbol?t=>"AsyncFunction"===t[Symbol.toStringTag]:()=>!1;var U="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function z(t,e){U=t,$=e}var $=()=>!0;const N=!new Error("").stack;function H(){if(N)try{throw H.arguments,new Error}catch(t){return t}return new Error}function q(t,e){var r=t.stack;return r?(e=e||0,0===r.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),r.split("\n").slice(e).filter($).map((t=>"\n"+t)).join("")):""}var W=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],V=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(W),G={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(t,e){this._e=H(),this.name=t,this.message=e}function X(t,e){return t+". Errors: "+Object.keys(e).map((t=>e[t].toString())).filter(((t,e,r)=>r.indexOf(t)===e)).join("\n")}function Y(t,e,r,n){this._e=H(),this.failures=e,this.failedKeys=n,this.successCount=r,this.message=X(t,e)}function J(t,e){this._e=H(),this.name="BulkError",this.failures=Object.keys(e).map((t=>e[t])),this.failuresByPos=e,this.message=X(t,e)}d(K).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+q(this._e,2))}},toString:function(){return this.name+": "+this.message}}),d(Y).from(K),d(J).from(K);var Q=V.reduce(((t,e)=>(t[e]=e+"Error",t)),{});const Z=K;var tt=V.reduce(((t,e)=>{var r=e+"Error";function n(t,n){this._e=H(),this.name=r,t?"string"==typeof t?(this.message=`${t}${n?"\n "+n:""}`,this.inner=n||null):"object"==typeof t&&(this.message=`${t.name} ${t.message}`,this.inner=t):(this.message=G[e]||r,this.inner=null)}return d(n).from(Z),t[e]=n,t}),{});tt.Syntax=SyntaxError,tt.Type=TypeError,tt.Range=RangeError;var et=W.reduce(((t,e)=>(t[e+"Error"]=tt[e],t)),{}),rt=V.reduce(((t,e)=>(-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=tt[e]),t)),{});function nt(){}function it(t){return t}function at(t,e){return null==t||t===it?e:function(r){return e(t(r))}}function st(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function ot(t,e){return t===nt?e:function(){var r=t.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?st(n,this.onsuccess):n),i&&(this.onerror=this.onerror?st(i,this.onerror):i),void 0!==a?a:r}}function ut(t,e){return t===nt?e:function(){t.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?st(r,this.onsuccess):r),n&&(this.onerror=this.onerror?st(n,this.onerror):n)}}function ct(t,e){return t===nt?e:function(r){var n=t.apply(this,arguments);s(r,n);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?st(i,this.onsuccess):i),a&&(this.onerror=this.onerror?st(a,this.onerror):a),void 0===n?void 0===o?void 0:o:s(n,o)}}function lt(t,e){return t===nt?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function ht(t,e){return t===nt?e:function(){var r=t.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return r.then((function(){return e.apply(n,a)}))}return e.apply(this,arguments)}}rt.ModifyError=Y,rt.DexieError=K,rt.BulkError=J;var ft={};const[dt,_t,pt]="undefined"==typeof Promise?[]:(()=>{let t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,o(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,o(e),t]})(),gt=_t&&_t.then,mt=dt&&dt.constructor,bt=!!pt;var yt=!1,vt=pt?()=>{pt.then(Ht)}:n.setImmediate?setImmediate.bind(null,Ht):n.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver((()=>{Ht(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Ht,0)},wt=function(t,e){Pt.push([t,e]),kt&&(vt(),kt=!1)},At=!0,kt=!0,xt=[],Et=[],Ct=null,St=it,Tt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:de,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((t=>{try{de(t[0],t[1])}catch(t){}}))}},It=Tt,Pt=[],Rt=0,Bt=[];function Ot(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=nt,this._lib=!1;var e=this._PSD=It;if(U&&(this._stackHolder=H(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==ft)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Mt(this,this._value))}this._state=null,this._value=null,++e.ref,jt(this,t)}const Dt={get:function(){var t=It,e=Zt;function r(r,n){var i=!t.global&&(t!==It||e!==Zt);const a=i&&!ne();var s=new Ot(((e,s)=>{Ut(this,new Ft(he(r,t,i,a),he(n,t,i,a),e,s,t))}));return U&&Nt(s,this),s}return r.prototype=ft,r},set:function(t){f(this,"then",t&&t.prototype===ft?Dt:{get:function(){return t},set:Dt.set})}};function Ft(t,e,r,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=r,this.reject=n,this.psd=i}function jt(t,e){try{e((e=>{if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&qt();e&&"function"==typeof e.then?jt(t,((t,r)=>{e instanceof Ot?e._then(t,r):e.then(t,r)})):(t._state=!0,t._value=e,Lt(t)),r&&Wt()}}),Mt.bind(null,t))}catch(e){Mt(t,e)}}function Mt(t,e){if(Et.push(e),null===t._state){var r=t._lib&&qt();e=St(e),t._state=!1,t._value=e,U&&null!==e&&"object"==typeof e&&!e._promise&&function(t,e,r){try{t.apply(null,void 0)}catch(t){}}((()=>{var r=p(e,"stack");e._promise=t,f(e,"stack",{get:()=>yt?r&&(r.get?r.get.apply(e):r.value):t.stack})})),function(t){xt.some((e=>e._value===t._value))||xt.push(t)}(t),Lt(t),r&&Wt()}}function Lt(t){var e=t._listeners;t._listeners=[];for(var r=0,n=e.length;r<n;++r)Ut(t,e[r]);var i=t._PSD;--i.ref||i.finalize(),0===Rt&&(++Rt,wt((()=>{0==--Rt&&Vt()}),[]))}function Ut(t,e){if(null!==t._state){var r=t._state?e.onFulfilled:e.onRejected;if(null===r)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Rt,wt(zt,[r,t,e])}else t._listeners.push(e)}function zt(t,e,r){try{Ct=e;var n,i=e._value;e._state?n=t(i):(Et.length&&(Et=[]),n=t(i),-1===Et.indexOf(i)&&function(t){for(var e=xt.length;e;)if(xt[--e]._value===t._value)return void xt.splice(e,1)}(e)),r.resolve(n)}catch(t){r.reject(t)}finally{Ct=null,0==--Rt&&Vt(),--r.psd.ref||r.psd.finalize()}}function $t(t,e,r){if(e.length===r)return e;var n="";if(!1===t._state){var i,a,s=t._value;null!=s?(i=s.name||"Error",a=s.message||s,n=q(s,0)):(i=s,a=""),e.push(i+(a?": "+a:"")+n)}return U&&((n=q(t._stackHolder,2))&&-1===e.indexOf(n)&&e.push(n),t._prev&&$t(t._prev,e,r)),e}function Nt(t,e){var r=e?e._numPrev+1:0;r<100&&(t._prev=e,t._numPrev=r)}function Ht(){qt()&&Wt()}function qt(){var t=At;return At=!1,kt=!1,t}function Wt(){var t,e,r;do{for(;Pt.length>0;)for(t=Pt,Pt=[],r=t.length,e=0;e<r;++e){var n=t[e];n[0].apply(null,n[1])}}while(Pt.length>0);At=!0,kt=!0}function Vt(){var t=xt;xt=[],t.forEach((t=>{t._PSD.onunhandled.call(null,t._value,t)}));for(var e=Bt.slice(0),r=e.length;r;)e[--r]()}function Gt(t){return new Ot(ft,!1,t)}function Kt(t,e){var r=It;return function(){var n=qt(),i=It;try{return oe(r,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{oe(i,!1),n&&Wt()}}}l(Ot.prototype,{then:Dt,_then:function(t,e){Ut(this,new Ft(null,null,t,e,It))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],r=arguments[1];return"function"==typeof e?this.then(null,(t=>t instanceof e?r(t):Gt(t))):this.then(null,(t=>t&&t.name===e?r(t):Gt(t)))},finally:function(t){return this.then((e=>(t(),e)),(e=>(t(),Gt(e))))},stack:{get:function(){if(this._stack)return this._stack;try{yt=!0;var t=$t(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{yt=!1}}},timeout:function(t,e){return t<1/0?new Ot(((r,n)=>{var i=setTimeout((()=>n(new tt.Timeout(e))),t);this.then(r,n).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(Ot.prototype,Symbol.toStringTag,"Dexie.Promise"),Tt.env=ue(),l(Ot,{all:function(){var t=M.apply(null,arguments).map(ie);return new Ot((function(e,r){0===t.length&&e([]);var n=t.length;t.forEach(((i,a)=>Ot.resolve(i).then((r=>{t[a]=r,--n||e(t)}),r)))}))},resolve:t=>{if(t instanceof Ot)return t;if(t&&"function"==typeof t.then)return new Ot(((e,r)=>{t.then(e,r)}));var e=new Ot(ft,!0,t);return Nt(e,Ct),e},reject:Gt,race:function(){var t=M.apply(null,arguments).map(ie);return new Ot(((e,r)=>{t.map((t=>Ot.resolve(t).then(e,r)))}))},PSD:{get:()=>It,set:t=>It=t},totalEchoes:{get:()=>Zt},newPSD:ee,usePSD:ce,scheduler:{get:()=>wt,set:t=>{wt=t}},rejectionMapper:{get:()=>St,set:t=>{St=t}},follow:(t,e)=>new Ot(((r,n)=>ee(((e,r)=>{var n=It;n.unhandleds=[],n.onunhandled=r,n.finalize=st((function(){!function(t){Bt.push((function e(){t(),Bt.splice(Bt.indexOf(e),1)})),++Rt,wt((()=>{0==--Rt&&Vt()}),[])}((()=>{0===this.unhandleds.length?e():r(this.unhandleds[0])}))}),n.finalize),t()}),e,r,n)))}),mt&&(mt.allSettled&&f(Ot,"allSettled",(function(){const t=M.apply(null,arguments).map(ie);return new Ot((e=>{0===t.length&&e([]);let r=t.length;const n=new Array(r);t.forEach(((t,i)=>Ot.resolve(t).then((t=>n[i]={status:"fulfilled",value:t}),(t=>n[i]={status:"rejected",reason:t})).then((()=>--r||e(n)))))}))})),mt.any&&"undefined"!=typeof AggregateError&&f(Ot,"any",(function(){const t=M.apply(null,arguments).map(ie);return new Ot(((e,r)=>{0===t.length&&r(new AggregateError([]));let n=t.length;const i=new Array(n);t.forEach(((t,a)=>Ot.resolve(t).then((t=>e(t)),(t=>{i[a]=t,--n||r(new AggregateError(i))}))))}))})));const Xt={awaits:0,echoes:0,id:0};var Yt=0,Jt=[],Qt=0,Zt=0,te=0;function ee(t,e,r,n){var i=It,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++te;var o=Tt.env;a.env=bt?{Promise:Ot,PromiseProp:{value:Ot,configurable:!0,writable:!0},all:Ot.all,race:Ot.race,allSettled:Ot.allSettled,any:Ot.any,resolve:Ot.resolve,reject:Ot.reject,nthen:fe(o.nthen,a),gthen:fe(o.gthen,a)}:{},e&&s(a,e),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ce(a,t,r,n);return 0===a.ref&&a.finalize(),u}function re(){return Xt.id||(Xt.id=++Yt),++Xt.awaits,Xt.echoes+=100,Xt.id}function ne(){return!!Xt.awaits&&(0==--Xt.awaits&&(Xt.id=0),Xt.echoes=100*Xt.awaits,!0)}function ie(t){return Xt.echoes&&t&&t.constructor===mt?(re(),t.then((t=>(ne(),t)),(t=>(ne(),_e(t))))):t}function ae(t){++Zt,Xt.echoes&&0!=--Xt.echoes||(Xt.echoes=Xt.id=0),Jt.push(It),oe(t,!0)}function se(){var t=Jt[Jt.length-1];Jt.pop(),oe(t,!1)}function oe(t,e){var r=It;if((e?!Xt.echoes||Qt++&&t===It:!Qt||--Qt&&t===It)||le(e?ae.bind(null,t):se),t!==It&&(It=t,r===Tt&&(Tt.env=ue()),bt)){var i=Tt.env.Promise,a=t.env;_t.then=a.nthen,i.prototype.then=a.gthen,(r.global||t.global)&&(Object.defineProperty(n,"Promise",a.PromiseProp),i.all=a.all,i.race=a.race,i.resolve=a.resolve,i.reject=a.reject,a.allSettled&&(i.allSettled=a.allSettled),a.any&&(i.any=a.any))}}function ue(){var t=n.Promise;return bt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:_t.then,gthen:t.prototype.then}:{}}function ce(t,e,r,n,i){var a=It;try{return oe(t,!0),e(r,n,i)}finally{oe(a,!1)}}function le(t){gt.call(dt,t)}function he(t,e,r,n){return"function"!=typeof t?t:function(){var i=It;r&&re(),oe(e,!0);try{return t.apply(this,arguments)}finally{oe(i,!1),n&&le(ne)}}}function fe(t,e){return function(r,n){return t.call(this,he(r,e),he(n,e))}}function de(t,e){var r;try{r=e.onuncatched(t)}catch(t){}if(!1!==r)try{var i,a={promise:e,reason:t};if(n.document&&document.createEvent?((i=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),s(i,a)):n.CustomEvent&&s(i=new CustomEvent("unhandledrejection",{detail:a}),a),i&&n.dispatchEvent&&(dispatchEvent(i),!n.PromiseRejectionEvent&&n.onunhandledrejection))try{n.onunhandledrejection(i)}catch(t){}U&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch(t){}}-1===(""+gt).indexOf("[native code]")&&(re=ne=nt);var _e=Ot.reject;function pe(t,e,r,n){if(t.idbdb&&(t._state.openComplete||It.letThrough||t._vip)){var i=t._createTransaction(e,r,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===Q.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then((()=>pe(t,e,r,n)))):_e(i)}return i._promise(e,((t,e)=>ee((()=>(It.trans=i,n(t,e,i)))))).then((t=>i._completion.then((()=>t))))}if(t._state.openComplete)return _e(new tt.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return _e(new tt.DatabaseClosed);t.open().catch(nt)}return t._state.dbReadyPromise.then((()=>pe(t,e,r,n)))}const ge=String.fromCharCode(65535),me="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",be=[],ye="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ve=ye,we=ye,Ae=t=>!/(dexie\.js|dexie\.min\.js)/.test(t);function ke(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const xe={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ee(t){return"string"!=typeof t||/\./.test(t)?t=>t:e=>(void 0===e[t]&&t in e&&delete(e=P(e))[t],e)}class Ce{_trans(t,e,r){const n=this._tx||It.trans,i=this.name;function a(t,r,n){if(!n.schema[i])throw new tt.NotFound("Table "+i+" not part of transaction");return e(n.idbtrans,n)}const s=qt();try{return n&&n.db===this.db?n===It.trans?n._promise(t,a,r):ee((()=>n._promise(t,a,r)),{trans:n,transless:It.transless||It}):pe(this.db,t,[this.name],a)}finally{s&&Wt()}}get(t,e){return t&&t.constructor===Object?this.where(t).first(e):this._trans("readonly",(e=>this.core.get({trans:e,key:t}).then((t=>this.hook.reading.fire(t))))).then(e)}where(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(a(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const e=i(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter((t=>t.compound&&e.every((e=>t.keyPath.indexOf(e)>=0))&&t.keyPath.every((t=>e.indexOf(t)>=0))))[0];if(r&&this.db._maxKey!==ge)return this.where(r.name).equals(r.keyPath.map((e=>t[e])));!r&&U&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${e.join("+")}]`);const{idxByName:n}=this.schema,s=this.db._deps.indexedDB;function o(t,e){try{return 0===s.cmp(t,e)}catch(t){return!1}}const[u,c]=e.reduce((([e,r],i)=>{const s=n[i],u=t[i];return[e||s,e||!s?ke(r,s&&s.multi?t=>{const e=A(t,i);return a(e)&&e.some((t=>o(u,t)))}:t=>o(u,A(t,i))):r]}),[null,null]);return u?this.where(u.name).equals(t[u.keyPath]).filter(c):r?this.filter(c):this.where(e).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,a(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const e=e=>{if(!e)return e;const r=Object.create(t.prototype);for(var n in e)if(c(e,n))try{r[n]=e[n]}catch(t){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=e,this.hook("reading",e),t}defineClass(){return this.mapToClass((function(t){s(this,t)}))}add(t,e){const{auto:r,keyPath:n}=this.schema.primKey;let i=t;return n&&r&&(i=Ee(n)(t)),this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[i]}))).then((t=>t.numFailures?Ot.reject(t.failures[0]):t.lastResult)).then((e=>{if(n)try{k(t,n,e)}catch(t){}return e}))}update(t,e){if("object"!=typeof t||a(t))return this.where(":id").equals(t).modify(e);{const r=A(t,this.schema.primKey.keyPath);if(void 0===r)return _e(new tt.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof e?i(e).forEach((r=>{k(t,r,e[r])})):e(t,{value:t,primKey:r})}catch(t){}return this.where(":id").equals(r).modify(e)}}put(t,e){const{auto:r,keyPath:n}=this.schema.primKey;let i=t;return n&&r&&(i=Ee(n)(t)),this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"put",values:[i],keys:null!=e?[e]:null}))).then((t=>t.numFailures?Ot.reject(t.failures[0]):t.lastResult)).then((e=>{if(n)try{k(t,n,e)}catch(t){}return e}))}delete(t){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"delete",keys:[t]}))).then((t=>t.numFailures?Ot.reject(t.failures[0]):void 0))}clear(){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"deleteRange",range:xe}))).then((t=>t.numFailures?Ot.reject(t.failures[0]):void 0))}bulkGet(t){return this._trans("readonly",(e=>this.core.getMany({keys:t,trans:e}).then((t=>t.map((t=>this.hook.reading.fire(t)))))))}bulkAdd(t,e,r){const n=Array.isArray(e)?e:void 0,i=(r=r||(n?void 0:e))?r.allKeys:void 0;return this._trans("readwrite",(e=>{const{auto:r,keyPath:a}=this.schema.primKey;if(a&&n)throw new tt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(n&&n.length!==t.length)throw new tt.InvalidArgument("Arguments objects and keys must have the same length");const s=t.length;let o=a&&r?t.map(Ee(a)):t;return this.core.mutate({trans:e,type:"add",keys:n,values:o,wantResults:i}).then((({numFailures:t,results:e,lastResult:r,failures:n})=>{if(0===t)return i?e:r;throw new J(`${this.name}.bulkAdd(): ${t} of ${s} operations failed`,n)}))}))}bulkPut(t,e,r){const n=Array.isArray(e)?e:void 0,i=(r=r||(n?void 0:e))?r.allKeys:void 0;return this._trans("readwrite",(e=>{const{auto:r,keyPath:a}=this.schema.primKey;if(a&&n)throw new tt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(n&&n.length!==t.length)throw new tt.InvalidArgument("Arguments objects and keys must have the same length");const s=t.length;let o=a&&r?t.map(Ee(a)):t;return this.core.mutate({trans:e,type:"put",keys:n,values:o,wantResults:i}).then((({numFailures:t,results:e,lastResult:r,failures:n})=>{if(0===t)return i?e:r;throw new J(`${this.name}.bulkPut(): ${t} of ${s} operations failed`,n)}))}))}bulkDelete(t){const e=t.length;return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"delete",keys:t}))).then((({numFailures:t,lastResult:r,failures:n})=>{if(0===t)return r;throw new J(`${this.name}.bulkDelete(): ${t} of ${e} operations failed`,n)}))}}function Se(t){var e={},r=function(r,n){if(n){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return e[r].subscribe.apply(null,a),t}if("string"==typeof r)return e[r]};r.addEventType=o;for(var n=1,s=arguments.length;n<s;++n)o(arguments[n]);return r;function o(t,n,i){if("object"==typeof t)return u(t);n||(n=lt),i||(i=nt);var a={subscribers:[],fire:i,subscribe:function(t){-1===a.subscribers.indexOf(t)&&(a.subscribers.push(t),a.fire=n(a.fire,t))},unsubscribe:function(t){a.subscribers=a.subscribers.filter((function(e){return e!==t})),a.fire=a.subscribers.reduce(n,i)}};return e[t]=r[t]=a,a}function u(t){i(t).forEach((function(e){var r=t[e];if(a(r))o(e,t[e][0],t[e][1]);else{if("asap"!==r)throw new tt.InvalidArgument("Invalid event config");var n=o(e,it,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];n.subscribers.forEach((function(t){v((function(){t.apply(null,e)}))}))}))}}))}}function Te(t,e){return d(e).from({prototype:t}),e}function Ie(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Pe(t,e){t.filter=ke(t.filter,e)}function Re(t,e,r){var n=t.replayFilter;t.replayFilter=n?()=>ke(n(),e()):e,t.justLimit=r&&!n}function Be(t,e){if(t.isPrimKey)return e.primaryKey;const r=e.getIndexByKeyPath(t.index);if(!r)throw new tt.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return r}function Oe(t,e,r){const n=Be(t,e.schema);return e.openCursor({trans:r,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:n,range:t.range}})}function De(t,e,r,n){const i=t.replayFilter?ke(t.filter,t.replayFilter()):t.filter;if(t.or){const a={},s=(t,r,n)=>{if(!i||i(r,n,(t=>r.stop(t)),(t=>r.fail(t)))){var s=r.primaryKey,o=""+s;"[object ArrayBuffer]"===o&&(o=""+new Uint8Array(s)),c(a,o)||(a[o]=!0,e(t,r,n))}};return Promise.all([t.or._iterate(s,r),Fe(Oe(t,n,r),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return Fe(Oe(t,n,r),ke(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Fe(t,e,r,n){var i=Kt(n?(t,e,i)=>r(n(t),e,i):r);return t.then((t=>{if(t)return t.start((()=>{var r=()=>t.continue();e&&!e(t,(t=>r=t),(e=>{t.stop(e),r=nt}),(e=>{t.fail(e),r=nt}))||i(t.value,t,(t=>r=t)),r()}))}))}function je(t,e){try{const r=Me(t),n=Me(e);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(t,e){const r=t.length,n=e.length,i=r<n?r:n;for(let r=0;r<i;++r)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return r===n?0:r<n?-1:1}(Le(t),Le(e));case"Array":return function(t,e){const r=t.length,n=e.length,i=r<n?r:n;for(let r=0;r<i;++r){const n=je(t[r],e[r]);if(0!==n)return n}return r===n?0:r<n?-1:1}(t,e)}}catch(t){}return NaN}function Me(t){const e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";const r=O(t);return"ArrayBuffer"===r?"binary":r}function Le(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Ue{_read(t,e){var r=this._ctx;return r.error?r.table._trans(null,_e.bind(null,r.error)):r.table._trans("readonly",t).then(e)}_write(t){var e=this._ctx;return e.error?e.table._trans(null,_e.bind(null,e.error)):e.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var e=this._ctx;e.algorithm=ke(e.algorithm,t)}_iterate(t,e){return De(this._ctx,t,e,this._ctx.table.core)}clone(t){var e=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&s(r,t),e._ctx=r,e}raw(){return this._ctx.valueMapper=null,this}each(t){var e=this._ctx;return this._read((r=>De(e,t,r,e.table.core)))}count(t){return this._read((t=>{const e=this._ctx,r=e.table.core;if(Ie(e,!0))return r.count({trans:t,query:{index:Be(e,r.schema),range:e.range}}).then((t=>Math.min(t,e.limit)));var n=0;return De(e,(()=>(++n,!1)),t,r).then((()=>n))})).then(t)}sortBy(t,e){const r=t.split(".").reverse(),n=r[0],i=r.length-1;function a(t,e){return e?a(t[r[e]],e-1):t[n]}var s="next"===this._ctx.dir?1:-1;function o(t,e){var r=a(t,i),n=a(e,i);return r<n?-s:r>n?s:0}return this.toArray((function(t){return t.sort(o)})).then(e)}toArray(t){return this._read((t=>{var e=this._ctx;if("next"===e.dir&&Ie(e,!0)&&e.limit>0){const{valueMapper:r}=e,n=Be(e,e.table.core.schema);return e.table.core.query({trans:t,limit:e.limit,values:!0,query:{index:n,range:e.range}}).then((({result:t})=>r?t.map(r):t))}{const r=[];return De(e,(t=>r.push(t)),t,e.table.core).then((()=>r))}}),t)}offset(t){var e=this._ctx;return t<=0||(e.offset+=t,Ie(e)?Re(e,(()=>{var e=t;return(t,r)=>0===e||(1===e?(--e,!1):(r((()=>{t.advance(e),e=0})),!1))})):Re(e,(()=>{var e=t;return()=>--e<0}))),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Re(this._ctx,(()=>{var e=t;return function(t,r,n){return--e<=0&&r(n),e>=0}}),!0),this}until(t,e){return Pe(this._ctx,(function(r,n,i){return!t(r.value)||(n(i),e)})),this}first(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)}last(t){return this.reverse().first(t)}filter(t){var e,r;return Pe(this._ctx,(function(e){return t(e.value)})),e=this._ctx,r=t,e.isMatch=ke(e.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,r){t(r.key,r)}))}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,r){t(r.primaryKey,r)}))}keys(t){var e=this._ctx;e.keysOnly=!e.isMatch;var r=[];return this.each((function(t,e){r.push(e.key)})).then((function(){return r})).then(t)}primaryKeys(t){var e=this._ctx;if("next"===e.dir&&Ie(e,!0)&&e.limit>0)return this._read((t=>{var r=Be(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:r,range:e.range}})})).then((({result:t})=>t)).then(t);e.keysOnly=!e.isMatch;var r=[];return this.each((function(t,e){r.push(e.primaryKey)})).then((function(){return r})).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys((function(t){return t[0]})).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var r={};return Pe(this._ctx,(function(t){var e=t.primaryKey.toString(),n=c(r,e);return r[e]=!0,!n})),this}modify(t){var e=this._ctx;return this._write((r=>{var n;if("function"==typeof t)n=t;else{var a=i(t),s=a.length;n=function(e){for(var r=!1,n=0;n<s;++n){var i=a[n],o=t[i];A(e,i)!==o&&(k(e,i,o),r=!0)}return r}}const o=e.table.core,{outbound:u,extractKey:c}=o.schema.primaryKey,l=this.db._options.modifyChunkSize||200,h=[];let f=0;const d=[],_=(t,e)=>{const{failures:r,numFailures:n}=e;f+=t-n;for(let t of i(r))h.push(r[t])};return this.clone().primaryKeys().then((i=>{const a=s=>{const h=Math.min(l,i.length-s);return o.getMany({trans:r,keys:i.slice(s,s+h),cache:"immutable"}).then((f=>{const d=[],p=[],g=u?[]:null,m=[];for(let t=0;t<h;++t){const e=f[t],r={value:P(e),primKey:i[s+t]};!1!==n.call(r,r.value,r)&&(null==r.value?m.push(i[s+t]):u||0===je(c(e),c(r.value))?(p.push(r.value),u&&g.push(i[s+t])):(m.push(i[s+t]),d.push(r.value)))}const b=Ie(e)&&e.limit===1/0&&("function"!=typeof t||t===ze)&&{index:e.index,range:e.range};return Promise.resolve(d.length>0&&o.mutate({trans:r,type:"add",values:d}).then((t=>{for(let e in t.failures)m.splice(parseInt(e),1);_(d.length,t)}))).then((()=>(p.length>0||b&&"object"==typeof t)&&o.mutate({trans:r,type:"put",keys:g,values:p,criteria:b,changeSpec:"function"!=typeof t&&t}).then((t=>_(p.length,t))))).then((()=>(m.length>0||b&&t===ze)&&o.mutate({trans:r,type:"delete",keys:m,criteria:b}).then((t=>_(m.length,t))))).then((()=>i.length>s+h&&a(s+l)))}))};return a(0).then((()=>{if(h.length>0)throw new Y("Error modifying one or more objects",h,f,d);return i.length}))}))}))}delete(){var t=this._ctx,e=t.range;return Ie(t)&&(t.isPrimKey&&!we||3===e.type)?this._write((r=>{const{primaryKey:n}=t.table.core.schema,i=e;return t.table.core.count({trans:r,query:{index:n,range:i}}).then((e=>t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then((({failures:t,lastResult:r,results:n,numFailures:i})=>{if(i)throw new Y("Could not delete some values",Object.keys(t).map((e=>t[e])),e-i);return e-i}))))})):this.modify(ze)}}const ze=(t,e)=>e.value=null;function $e(t,e){return t<e?-1:t===e?0:1}function Ne(t,e){return t>e?-1:t===e?0:1}function He(t,e,r){var n=t instanceof Xe?new t.Collection(t):t;return n._ctx.error=r?new r(e):new TypeError(e),n}function qe(t){return new t.Collection(t,(()=>Ke(""))).limit(0)}function We(t,e,r,n,i,a){for(var s=Math.min(t.length,n.length),o=-1,u=0;u<s;++u){var c=e[u];if(c!==n[u])return i(t[u],r[u])<0?t.substr(0,u)+r[u]+r.substr(u+1):i(t[u],n[u])<0?t.substr(0,u)+n[u]+r.substr(u+1):o>=0?t.substr(0,o)+e[o]+r.substr(o+1):null;i(t[u],c)<0&&(o=u)}return s<n.length&&"next"===a?t+r.substr(t.length):s<t.length&&"prev"===a?t.substr(0,r.length):o<0?null:t.substr(0,o)+n[o]+r.substr(o+1)}function Ve(t,e,r,n){var i,a,s,o,u,c,l,h=r.length;if(!r.every((t=>"string"==typeof t)))return He(t,"String expected.");function f(t){i=function(t){return"next"===t?t=>t.toUpperCase():t=>t.toLowerCase()}(t),a=function(t){return"next"===t?t=>t.toLowerCase():t=>t.toUpperCase()}(t),s="next"===t?$e:Ne;var e=r.map((function(t){return{lower:a(t),upper:i(t)}})).sort((function(t,e){return s(t.lower,e.lower)}));o=e.map((function(t){return t.upper})),u=e.map((function(t){return t.lower})),c=t,l="next"===t?"":n}f("next");var d=new t.Collection(t,(()=>Ge(o[0],u[h-1]+n)));d._ondirectionchange=function(t){f(t)};var _=0;return d._addAlgorithm((function(t,r,n){var i=t.key;if("string"!=typeof i)return!1;var f=a(i);if(e(f,u,_))return!0;for(var d=null,p=_;p<h;++p){var g=We(i,f,o[p],u[p],s,c);null===g&&null===d?_=p+1:(null===d||s(d,g)>0)&&(d=g)}return r(null!==d?function(){t.continue(d+l)}:n),!1})),d}function Ge(t,e,r,n){return{type:2,lower:t,upper:e,lowerOpen:r,upperOpen:n}}function Ke(t){return{type:1,lower:t,upper:t}}class Xe{get Collection(){return this._ctx.table.db.Collection}between(t,e,r,n){r=!1!==r,n=!0===n;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(r||n)&&(!r||!n)?qe(this):new this.Collection(this,(()=>Ge(t,e,!r,!n)))}catch(t){return He(this,me)}}equals(t){return null==t?He(this,me):new this.Collection(this,(()=>Ke(t)))}above(t){return null==t?He(this,me):new this.Collection(this,(()=>Ge(t,void 0,!0)))}aboveOrEqual(t){return null==t?He(this,me):new this.Collection(this,(()=>Ge(t,void 0,!1)))}below(t){return null==t?He(this,me):new this.Collection(this,(()=>Ge(void 0,t,!1,!0)))}belowOrEqual(t){return null==t?He(this,me):new this.Collection(this,(()=>Ge(void 0,t)))}startsWith(t){return"string"!=typeof t?He(this,"String expected."):this.between(t,t+ge,!0,!0)}startsWithIgnoreCase(t){return""===t?this.startsWith(t):Ve(this,((t,e)=>0===t.indexOf(e[0])),[t],ge)}equalsIgnoreCase(t){return Ve(this,((t,e)=>t===e[0]),[t],"")}anyOfIgnoreCase(){var t=M.apply(j,arguments);return 0===t.length?qe(this):Ve(this,((t,e)=>-1!==e.indexOf(t)),t,"")}startsWithAnyOfIgnoreCase(){var t=M.apply(j,arguments);return 0===t.length?qe(this):Ve(this,((t,e)=>e.some((e=>0===t.indexOf(e)))),t,ge)}anyOf(){const t=M.apply(j,arguments);let e=this._cmp;try{t.sort(e)}catch(t){return He(this,me)}if(0===t.length)return qe(this);const r=new this.Collection(this,(()=>Ge(t[0],t[t.length-1])));r._ondirectionchange=r=>{e="next"===r?this._ascending:this._descending,t.sort(e)};let n=0;return r._addAlgorithm(((r,i,a)=>{const s=r.key;for(;e(s,t[n])>0;)if(++n,n===t.length)return i(a),!1;return 0===e(s,t[n])||(i((()=>{r.continue(t[n])})),!1)})),r}notEqual(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=M.apply(j,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return He(this,me)}const e=t.reduce(((t,e)=>t?t.concat([[t[t.length-1][1],e]]):[[-1/0,e]]),null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,e){const r=this._cmp,n=this._ascending,i=this._descending,a=this._min,s=this._max;if(0===t.length)return qe(this);if(!t.every((t=>void 0!==t[0]&&void 0!==t[1]&&n(t[0],t[1])<=0)))return He(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",tt.InvalidArgument);const o=!e||!1!==e.includeLowers,u=e&&!0===e.includeUppers;let c,l=n;function h(t,e){return l(t[0],e[0])}try{c=t.reduce((function(t,e){let n=0,i=t.length;for(;n<i;++n){const i=t[n];if(r(e[0],i[1])<0&&r(e[1],i[0])>0){i[0]=a(i[0],e[0]),i[1]=s(i[1],e[1]);break}}return n===i&&t.push(e),t}),[]),c.sort(h)}catch(t){return He(this,me)}let f=0;const d=u?t=>n(t,c[f][1])>0:t=>n(t,c[f][1])>=0,_=o?t=>i(t,c[f][0])>0:t=>i(t,c[f][0])>=0;let p=d;const g=new this.Collection(this,(()=>Ge(c[0][0],c[c.length-1][1],!o,!u)));return g._ondirectionchange=t=>{"next"===t?(p=d,l=n):(p=_,l=i),c.sort(h)},g._addAlgorithm(((t,e,r)=>{for(var i=t.key;p(i);)if(++f,f===c.length)return e(r),!1;return!!function(t){return!d(t)&&!_(t)}(i)||(0===this._cmp(i,c[f][1])||0===this._cmp(i,c[f][0])||e((()=>{l===n?t.continue(c[f][0]):t.continue(c[f][1])})),!1)})),g}startsWithAnyOf(){const t=M.apply(j,arguments);return t.every((t=>"string"==typeof t))?0===t.length?qe(this):this.inAnyRange(t.map((t=>[t,t+ge]))):He(this,"startsWithAnyOf() only works with strings")}}function Ye(t){return Kt((function(e){return Je(e),t(e.target.error),!1}))}function Je(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Qe=Se(null,"storagemutated");class Ze{_lock(){return y(!It.global),++this._reculock,1!==this._reculock||It.global||(It.lockOwnerFor=this),this}_unlock(){if(y(!It.global),0==--this._reculock)for(It.global||(It.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ce(t[1],t[0])}catch(t){}}return this}_locked(){return this._reculock&&It.lockOwnerFor!==this}create(t){if(!this.mode)return this;const e=this.db.idbdb,r=this.db._state.dbOpenError;if(y(!this.idbtrans),!t&&!e)switch(r&&r.name){case"DatabaseClosedError":throw new tt.DatabaseClosed(r);case"MissingAPIError":throw new tt.MissingAPI(r.message,r);default:throw new tt.OpenFailed(r)}if(!this.active)throw new tt.TransactionInactive;return y(null===this._completion._state),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):e.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Kt((e=>{Je(e),this._reject(t.error)})),t.onabort=Kt((e=>{Je(e),this.active&&this._reject(new tt.Abort(t.error)),this.active=!1,this.on("abort").fire(e)})),t.oncomplete=Kt((()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Qe.storagemutated.fire(t.mutatedParts)})),this}_promise(t,e,r){if("readwrite"===t&&"readwrite"!==this.mode)return _e(new tt.ReadOnly("Transaction is readonly"));if(!this.active)return _e(new tt.TransactionInactive);if(this._locked())return new Ot(((n,i)=>{this._blockedFuncs.push([()=>{this._promise(t,e,r).then(n,i)},It])}));if(r)return ee((()=>{var t=new Ot(((t,r)=>{this._lock();const n=e(t,r,this);n&&n.then&&n.then(t,r)}));return t.finally((()=>this._unlock())),t._lib=!0,t}));var n=new Ot(((t,r)=>{var n=e(t,r,this);n&&n.then&&n.then(t,r)}));return n._lib=!0,n}_root(){return this.parent?this.parent._root():this}waitFor(t){var e=this._root();const r=Ot.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then((()=>r));else{e._waitingFor=r,e._waitingQueue=[];var n=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(n.get(-1/0).onsuccess=t)}()}var i=e._waitingFor;return new Ot(((t,n)=>{r.then((r=>e._waitingQueue.push(Kt(t.bind(null,r)))),(t=>e._waitingQueue.push(Kt(n.bind(null,t))))).finally((()=>{e._waitingFor===i&&(e._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new tt.Abort))}table(t){const e=this._memoizedTables||(this._memoizedTables={});if(c(e,t))return e[t];const r=this.schema[t];if(!r)throw new tt.NotFound("Table "+t+" not part of transaction");const n=new this.db.Table(t,r,this);return n.core=this.db.core.table(t),e[t]=n,n}}function tr(t,e,r,n,i,a,s){return{name:t,keyPath:e,unique:r,multi:n,auto:i,compound:a,src:(r&&!s?"&":"")+(n?"*":"")+(i?"++":"")+er(e)}}function er(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function rr(t,e,r){return{name:t,primKey:e,indexes:r,mappedClass:null,idxByName:w(r,(t=>[t.name,t]))}}let nr=t=>{try{return t.only([[]]),nr=()=>[[]],[[]]}catch(t){return nr=()=>ge,ge}};function ir(t){return null==t?()=>{}:"string"==typeof t?function(t){return 1===t.split(".").length?e=>e[t]:e=>A(e,t)}(t):e=>A(e,t)}function ar(t){return[].slice.call(t)}let sr=0;function or(t){return null==t?":id":"string"==typeof t?t:`[${t.join("+")}]`}function ur(t,e,r){function n(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:r,upper:n,lowerOpen:i,upperOpen:a}=t;return void 0===r?void 0===n?null:e.upperBound(n,!!a):void 0===n?e.lowerBound(r,!!i):e.bound(r,n,!!i,!!a)}const{schema:i,hasGetAll:s}=function(t,e){const r=ar(t.objectStoreNames);return{schema:{name:t.name,tables:r.map((t=>e.objectStore(t))).map((t=>{const{keyPath:e,autoIncrement:r}=t,n=a(e),i=null==e,s={},o={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:n,keyPath:e,autoIncrement:r,unique:!0,extractKey:ir(e)},indexes:ar(t.indexNames).map((e=>t.index(e))).map((t=>{const{name:e,unique:r,multiEntry:n,keyPath:i}=t,o={name:e,compound:a(i),keyPath:i,unique:r,multiEntry:n,extractKey:ir(i)};return s[or(i)]=o,o})),getIndexByKeyPath:t=>s[or(t)]};return s[":id"]=o.primaryKey,null!=e&&(s[or(e)]=o.primaryKey),o}))},hasGetAll:r.length>0&&"getAll"in e.objectStore(r[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,r),o=i.tables.map((t=>function(t){const e=t.name;return{name:e,schema:t,mutate:function({trans:t,type:r,keys:i,values:a,range:s}){return new Promise(((o,u)=>{o=Kt(o);const c=t.objectStore(e),l=null==c.keyPath,h="put"===r||"add"===r;if(!h&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);const{length:f}=i||a||{length:1};if(i&&a&&i.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return o({numFailures:0,failures:{},results:[],lastResult:void 0});let d;const _=[],p=[];let g=0;const m=t=>{++g,Je(t)};if("deleteRange"===r){if(4===s.type)return o({numFailures:g,failures:p,results:[],lastResult:void 0});3===s.type?_.push(d=c.clear()):_.push(d=c.delete(n(s)))}else{const[t,e]=h?l?[a,i]:[a,null]:[i,null];if(h)for(let n=0;n<f;++n)_.push(d=e&&void 0!==e[n]?c[r](t[n],e[n]):c[r](t[n])),d.onerror=m;else for(let e=0;e<f;++e)_.push(d=c[r](t[e])),d.onerror=m}const b=t=>{const e=t.target.result;_.forEach(((t,e)=>null!=t.error&&(p[e]=t.error))),o({numFailures:g,failures:p,results:"delete"===r?i:_.map((t=>t.result)),lastResult:e})};d.onerror=t=>{m(t),b(t)},d.onsuccess=b}))},getMany:({trans:t,keys:r})=>new Promise(((n,i)=>{n=Kt(n);const a=t.objectStore(e),s=r.length,o=new Array(s);let u,c=0,l=0;const h=t=>{const e=t.target;o[e._pos]=e.result,++l===c&&n(o)},f=Ye(i);for(let t=0;t<s;++t)null!=r[t]&&(u=a.get(r[t]),u._pos=t,u.onsuccess=h,u.onerror=f,++c);0===c&&n(o)})),get:({trans:t,key:r})=>new Promise(((n,i)=>{n=Kt(n);const a=t.objectStore(e).get(r);a.onsuccess=t=>n(t.target.result),a.onerror=Ye(i)})),query:function(t){return r=>new Promise(((i,a)=>{i=Kt(i);const{trans:s,values:o,limit:u,query:c}=r,l=u===1/0?void 0:u,{index:h,range:f}=c,d=s.objectStore(e),_=h.isPrimaryKey?d:d.index(h.name),p=n(f);if(0===u)return i({result:[]});if(t){const t=o?_.getAll(p,l):_.getAllKeys(p,l);t.onsuccess=t=>i({result:t.target.result}),t.onerror=Ye(a)}else{let t=0;const e=o||!("openKeyCursor"in _)?_.openCursor(p):_.openKeyCursor(p),r=[];e.onsuccess=n=>{const a=e.result;return a?(r.push(o?a.value:a.primaryKey),++t===u?i({result:r}):void a.continue()):i({result:r})},e.onerror=Ye(a)}}))}(s),openCursor:function({trans:t,values:r,query:i,reverse:a,unique:s}){return new Promise(((o,u)=>{o=Kt(o);const{index:c,range:l}=i,h=t.objectStore(e),f=c.isPrimaryKey?h:h.index(c.name),d=a?s?"prevunique":"prev":s?"nextunique":"next",_=r||!("openKeyCursor"in f)?f.openCursor(n(l),d):f.openKeyCursor(n(l),d);_.onerror=Ye(u),_.onsuccess=Kt((e=>{const r=_.result;if(!r)return void o(null);r.___id=++sr,r.done=!1;const n=r.continue.bind(r);let i=r.continuePrimaryKey;i&&(i=i.bind(r));const a=r.advance.bind(r),s=()=>{throw new Error("Cursor not stopped")};r.trans=t,r.stop=r.continue=r.continuePrimaryKey=r.advance=()=>{throw new Error("Cursor not started")},r.fail=Kt(u),r.next=function(){let t=1;return this.start((()=>t--?this.continue():this.stop())).then((()=>this))},r.start=t=>{const e=new Promise(((t,e)=>{t=Kt(t),_.onerror=Ye(e),r.fail=e,r.stop=e=>{r.stop=r.continue=r.continuePrimaryKey=r.advance=s,t(e)}})),o=()=>{if(_.result)try{t()}catch(t){r.fail(t)}else r.done=!0,r.start=()=>{throw new Error("Cursor behind last entry")},r.stop()};return _.onsuccess=Kt((t=>{_.onsuccess=o,o()})),r.continue=n,r.continuePrimaryKey=i,r.advance=a,o(),e},o(r)}),u)}))},count({query:t,trans:r}){const{index:i,range:a}=t;return new Promise(((t,s)=>{const o=r.objectStore(e),u=i.isPrimaryKey?o:o.index(i.name),c=n(a),l=c?u.count(c):u.count();l.onsuccess=Kt((e=>t(e.target.result))),l.onerror=Ye(s)}))}}}(t))),u={};return o.forEach((t=>u[t.name]=t)),{stack:"dbcore",transaction:t.transaction.bind(t),table(t){if(!u[t])throw new Error(`Table '${t}' not found`);return u[t]},MIN_KEY:-1/0,MAX_KEY:nr(e),schema:i}}function cr({_novip:t},e){const r=e.db,n=function(t,e,{IDBKeyRange:r,indexedDB:n},i){const a=function(t,e){return e.reduce(((t,{create:e})=>({...t,...e(t)})),t)}(ur(e,r,i),t.dbcore);return{dbcore:a}}(t._middlewares,r,t._deps,e);t.core=n.dbcore,t.tables.forEach((e=>{const r=e.name;t.core.schema.tables.some((t=>t.name===r))&&(e.core=t.core.table(r),t[r]instanceof t.Table&&(t[r].core=e.core))}))}function lr({_novip:t},e,r,n){r.forEach((r=>{const i=n[r];e.forEach((e=>{const n=p(e,r);(!n||"value"in n&&void 0===n.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?f(e,r,{get(){return this.table(r)},set(t){h(this,r,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[r]=new t.Table(r,i))}))}))}function hr({_novip:t},e){e.forEach((e=>{for(let r in e)e[r]instanceof t.Table&&delete e[r]}))}function fr(t,e){return t._cfg.version-e._cfg.version}function dr(t,e,r,n){const a=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,a);s.create(r),s._completion.catch(n);const o=s._reject.bind(s),u=It.transless||It;ee((()=>{It.trans=s,It.transless=u,0===e?(i(a).forEach((t=>{pr(r,t,a[t].primKey,a[t].indexes)})),cr(t,r),Ot.follow((()=>t.on.populate.fire(s))).catch(o)):function({_novip:t},e,r,n){const a=[],s=t._versions;let o=t._dbSchema=mr(0,t.idbdb,n),u=!1;return s.filter((t=>t._cfg.version>=e)).forEach((s=>{a.push((()=>{const a=o,c=s._cfg.dbschema;br(t,a,n),br(t,c,n),o=t._dbSchema=c;const l=_r(a,c);l.add.forEach((t=>{pr(n,t[0],t[1].primKey,t[1].indexes)})),l.change.forEach((t=>{if(t.recreate)throw new tt.Upgrade("Not yet support for changing primary key");{const e=n.objectStore(t.name);t.add.forEach((t=>gr(e,t))),t.change.forEach((t=>{e.deleteIndex(t.name),gr(e,t)})),t.del.forEach((t=>e.deleteIndex(t)))}}));const h=s._cfg.contentUpgrade;if(h&&s._cfg.version>e){cr(t,n),r._memoizedTables={},u=!0;let e=x(c);l.del.forEach((t=>{e[t]=a[t]})),hr(t,[t.Transaction.prototype]),lr(t,[t.Transaction.prototype],i(e),e),r.schema=e;const s=L(h);let o;s&&re();const f=Ot.follow((()=>{if(o=h(r),o&&s){var t=ne.bind(null,null);o.then(t,t)}}));return o&&"function"==typeof o.then?Ot.resolve(o):f.then((()=>o))}})),a.push((e=>{u&&ve||function(t,e){[].slice.call(e.db.objectStoreNames).forEach((r=>null==t[r]&&e.db.deleteObjectStore(r)))}(s._cfg.dbschema,e),hr(t,[t.Transaction.prototype]),lr(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),r.schema=t._dbSchema}))})),function t(){return a.length?Ot.resolve(a.shift()(r.idbtrans)).then(t):Ot.resolve()}().then((()=>{var t,e;e=n,i(t=o).forEach((r=>{e.db.objectStoreNames.contains(r)||pr(e,r,t[r].primKey,t[r].indexes)}))}))}(t,e,s,r).catch(o)}))}function _r(t,e){const r={del:[],add:[],change:[]};let n;for(n in t)e[n]||r.del.push(n);for(n in e){const i=t[n],a=e[n];if(i){const t={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!ye)t.recreate=!0,r.change.push(t);else{const e=i.idxByName,n=a.idxByName;let s;for(s in e)n[s]||t.del.push(s);for(s in n){const r=e[s],i=n[s];r?r.src!==i.src&&t.change.push(i):t.add.push(i)}(t.del.length>0||t.add.length>0||t.change.length>0)&&r.change.push(t)}}else r.add.push([n,a])}return r}function pr(t,e,r,n){const i=t.db.createObjectStore(e,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach((t=>gr(i,t))),i}function gr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function mr(t,e,r){const n={};return m(e.objectStoreNames,0).forEach((t=>{const e=r.objectStore(t);let i=e.keyPath;const a=tr(er(i),i||"",!1,!1,!!e.autoIncrement,i&&"string"!=typeof i,!0),s=[];for(let t=0;t<e.indexNames.length;++t){const r=e.index(e.indexNames[t]);i=r.keyPath;var o=tr(r.name,i,!!r.unique,!!r.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(o)}n[t]=rr(t,a,s)})),n}function br({_novip:t},e,r){const i=r.db.objectStoreNames;for(let n=0;n<i.length;++n){const a=i[n],s=r.objectStore(a);t._hasGetAll="getAll"in s;for(let t=0;t<s.indexNames.length;++t){const r=s.indexNames[t],n=s.index(r).keyPath,i="string"==typeof n?n:"["+m(n).join("+")+"]";if(e[a]){const t=e[a].idxByName[i];t&&(t.name=r,delete e[a].idxByName[i],e[a].idxByName[r]=t)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class yr{_parseStoresSpec(t,e){i(t).forEach((r=>{if(null!==t[r]){var n=t[r].split(",").map(((t,e)=>{const r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return tr(r,n||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),a(n),0===e)})),i=n.shift();if(i.multi)throw new tt.Schema("Primary key cannot be multi-valued");n.forEach((t=>{if(t.auto)throw new tt.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new tt.Schema("Index must have a name and cannot be an empty string")})),e[r]=rr(r,i,n)}}))}stores(t){const e=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,t):t;const r=e._versions,n={};let a={};return r.forEach((t=>{s(n,t._cfg.storesSource),a=t._cfg.dbschema={},t._parseStoresSpec(n,a)})),e._dbSchema=a,hr(e,[e._allTables,e,e.Transaction.prototype]),lr(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],i(a),a),e._storeNames=i(a),this}upgrade(t){return this._cfg.contentUpgrade=ht(this._cfg.contentUpgrade||nt,t),this}}function vr(t,e){let r=t._dbNamesDB;return r||(r=t._dbNamesDB=new Nr("__dbnames",{addons:[],indexedDB:t,IDBKeyRange:e}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function wr(t){return t&&"function"==typeof t.databases}function Ar(t){return ee((function(){return It.letThrough=!0,t()}))}function kr(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){var r=function(){return indexedDB.databases().finally(e)};t=setInterval(r,100),r()})).finally((function(){return clearInterval(t)})):Promise.resolve()}function xr(t){var e=e=>t.next(e),r=i(e),n=i((e=>t.throw(e)));function i(t){return e=>{var i=t(e),s=i.value;return i.done?s:s&&"function"==typeof s.then?s.then(r,n):a(s)?Promise.all(s).then(r,n):r(s)}}return i(e)()}function Er(t,e,r){var n=arguments.length;if(n<2)throw new tt.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];r=i.pop();var a=C(i);return[t,a,r]}function Cr(t,e,r,n,i){return Ot.resolve().then((()=>{const a=It.transless||It,s=t._createTransaction(e,r,t._dbSchema,n),o={trans:s,transless:a};if(n)s.idbtrans=n.idbtrans;else try{s.create(),t._state.PR1398_maxLoop=3}catch(n){return n.name===Q.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then((()=>Cr(t,e,r,null,i)))):_e(n)}const u=L(i);let c;u&&re();const l=Ot.follow((()=>{if(c=i.call(s,s),c)if(u){var t=ne.bind(null,null);c.then(t,t)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=xr(c))}),o);return(c&&"function"==typeof c.then?Ot.resolve(c).then((t=>s.active?t:_e(new tt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):l.then((()=>c))).then((t=>(n&&s._resolve(),s._completion.then((()=>t))))).catch((t=>(s._reject(t),_e(t))))}))}function Sr(t,e,r){const n=a(t)?t.slice():[t];for(let t=0;t<r;++t)n.push(e);return n}const Tr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const r=t.table(e),{schema:n}=r,i={},a=[];function s(t,e,r){const n=or(t),o=i[n]=i[n]||[],u=null==t?0:"string"==typeof t?1:t.length,c=e>0,l={...r,isVirtual:c,keyTail:e,keyLength:u,extractKey:ir(t),unique:!c&&r.unique};return o.push(l),l.isPrimaryKey||a.push(l),u>1&&s(2===u?t[0]:t.slice(0,u-1),e+1,r),o.sort(((t,e)=>t.keyTail-e.keyTail)),l}const o=s(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[o];for(const t of n.indexes)s(t.keyPath,0,t);function u(e){const r=e.query.index;return r.isVirtual?{...e,query:{index:r,range:(n=e.query.range,i=r.keyTail,{type:1===n.type?2:n.type,lower:Sr(n.lower,n.lowerOpen?t.MAX_KEY:t.MIN_KEY,i),lowerOpen:!0,upper:Sr(n.upper,n.upperOpen?t.MIN_KEY:t.MAX_KEY,i),upperOpen:!0})}}:e;var n,i}const c={...r,schema:{...n,primaryKey:o,indexes:a,getIndexByKeyPath:function(t){const e=i[or(t)];return e&&e[0]}},count:t=>r.count(u(t)),query:t=>r.query(u(t)),openCursor(e){const{keyTail:n,isVirtual:i,keyLength:a}=e.query.index;return i?r.openCursor(u(e)).then((r=>r&&function(r){const i=Object.create(r,{continue:{value:function(i){null!=i?r.continue(Sr(i,e.reverse?t.MAX_KEY:t.MIN_KEY,n)):e.unique?r.continue(r.key.slice(0,a).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,n)):r.continue()}},continuePrimaryKey:{value(e,i){r.continuePrimaryKey(Sr(e,t.MAX_KEY,n),i)}},primaryKey:{get:()=>r.primaryKey},key:{get(){const t=r.key;return 1===a?t[0]:t.slice(0,a)}},value:{get:()=>r.value}});return i}(r))):r.openCursor(e)}};return c}}}};function Ir(t,e,r,n){return r=r||{},n=n||"",i(t).forEach((i=>{if(c(e,i)){var a=t[i],s=e[i];if("object"==typeof a&&"object"==typeof s&&a&&s){const t=O(a);t!==O(s)?r[n+i]=e[i]:"Object"===t?Ir(a,s,r,n+i+"."):a!==s&&(r[n+i]=e[i])}else a!==s&&(r[n+i]=e[i])}else r[n+i]=void 0})),i(e).forEach((i=>{c(t,i)||(r[n+i]=e[i])})),r}const Pr={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const r=t.table(e),{primaryKey:n}=r.schema,i={...r,mutate(t){const i=It.trans,{deleting:a,creating:s,updating:o}=i.table(e).hook;switch(t.type){case"add":if(s.fire===nt)break;return i._promise("readwrite",(()=>u(t)),!0);case"put":if(s.fire===nt&&o.fire===nt)break;return i._promise("readwrite",(()=>u(t)),!0);case"delete":if(a.fire===nt)break;return i._promise("readwrite",(()=>u(t)),!0);case"deleteRange":if(a.fire===nt)break;return i._promise("readwrite",(()=>function(t){return l(t.trans,t.range,1e4)}(t)),!0)}return r.mutate(t);function u(t){const e=It.trans,i=t.keys||function(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}(n,t);if(!i)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?{...t,keys:i}:{...t}).type&&(t.values=[...t.values]),t.keys&&(t.keys=[...t.keys]),function(t,e,r){return"add"===e.type?Promise.resolve([]):t.getMany({trans:e.trans,keys:r,cache:"immutable"})}(r,t,i).then((u=>{const l=i.map(((r,i)=>{const l=u[i],h={onerror:null,onsuccess:null};if("delete"===t.type)a.fire.call(h,r,l,e);else if("add"===t.type||void 0===l){const a=s.fire.call(h,r,t.values[i],e);null==r&&null!=a&&(r=a,t.keys[i]=r,n.outbound||k(t.values[i],n.keyPath,r))}else{const n=Ir(l,t.values[i]),a=o.fire.call(h,n,r,l,e);if(a){const e=t.values[i];Object.keys(a).forEach((t=>{c(e,t)?e[t]=a[t]:k(e,t,a[t])}))}}return h}));return r.mutate(t).then((({failures:e,results:r,numFailures:n,lastResult:a})=>{for(let n=0;n<i.length;++n){const a=r?r[n]:i[n],s=l[n];null==a?s.onerror&&s.onerror(e[n]):s.onsuccess&&s.onsuccess("put"===t.type&&u[n]?t.values[n]:a)}return{failures:e,results:r,numFailures:n,lastResult:a}})).catch((t=>(l.forEach((e=>e.onerror&&e.onerror(t))),Promise.reject(t))))}))}function l(t,e,i){return r.query({trans:t,values:!1,query:{index:n,range:e},limit:i}).then((({result:r})=>u({type:"delete",keys:r,trans:t}).then((n=>n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:l(t,{...e,lower:r[r.length-1],lowerOpen:!0},i)))))}}};return i}})};function Rr(t,e,r){try{if(!e)return null;if(e.keys.length<t.length)return null;const n=[];for(let i=0,a=0;i<e.keys.length&&a<t.length;++i)0===je(e.keys[i],t[a])&&(n.push(r?P(e.values[i]):e.values[i]),++a);return n.length===t.length?n:null}catch(t){return null}}const Br={stack:"dbcore",level:-1,create:t=>({table:e=>{const r=t.table(e);return{...r,getMany:t=>{if(!t.cache)return r.getMany(t);const e=Rr(t.keys,t.trans._cache,"clone"===t.cache);return e?Ot.resolve(e):r.getMany(t).then((e=>(t.trans._cache={keys:t.keys,values:"clone"===t.cache?P(e):e},e)))},mutate:t=>("add"!==t.type&&(t.trans._cache=null),r.mutate(t))}}})};function Or(t){return!("from"in t)}const Dr=function(t,e){if(!this){const e=new Dr;return t&&"d"in t&&s(e,t),e}s(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Fr(t,e,r){const n=je(e,r);if(isNaN(n))return;if(n>0)throw RangeError();if(Or(t))return s(t,{from:e,to:r,d:1});const i=t.l,a=t.r;if(je(r,t.from)<0)return i?Fr(i,e,r):t.l={from:e,to:r,d:1,l:null,r:null},Ur(t);if(je(e,t.to)>0)return a?Fr(a,e,r):t.r={from:e,to:r,d:1,l:null,r:null},Ur(t);je(e,t.from)<0&&(t.from=e,t.l=null,t.d=a?a.d+1:1),je(r,t.to)>0&&(t.to=r,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;i&&!t.l&&jr(t,i),a&&o&&jr(t,a)}function jr(t,e){Or(e)||function t(e,{from:r,to:n,l:i,r:a}){Fr(e,r,n),i&&t(e,i),a&&t(e,a)}(t,e)}function Mr(t,e){const r=Lr(e);let n=r.next();if(n.done)return!1;let i=n.value;const a=Lr(t);let s=a.next(i.from),o=s.value;for(;!n.done&&!s.done;){if(je(o.from,i.to)<=0&&je(o.to,i.from)>=0)return!0;je(i.from,o.from)<0?i=(n=r.next(o.from)).value:o=(s=a.next(i.from)).value}return!1}function Lr(t){let e=Or(t)?null:{s:0,n:t};return{next(t){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&je(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||je(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Ur(t){var e,r;const n=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(r=t.l)||void 0===r?void 0:r.d)||0),i=n>1?"r":n<-1?"l":"";if(i){const e="r"===i?"l":"r",r={...t},n=t[i];t.from=n.from,t.to=n.to,t[i]=n[i],r[i]=n[e],t[e]=r,r.d=zr(r)}t.d=zr(t)}function zr({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}l(Dr.prototype,{add(t){return jr(this,t),this},addKey(t){return Fr(this,t,t),this},addKeys(t){return t.forEach((t=>Fr(this,t,t))),this},[D](){return Lr(this)}});const $r={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,r=new Dr(t.MIN_KEY,t.MAX_KEY);return{...t,table:n=>{const s=t.table(n),{schema:o}=s,{primaryKey:u}=o,{extractKey:c,outbound:l}=u,h={...s,mutate:t=>{const i=t.trans,u=i.mutatedParts||(i.mutatedParts={}),c=t=>{const r=`idb://${e}/${n}/${t}`;return u[r]||(u[r]=new Dr)},l=c(""),h=c(":dels"),{type:f}=t;let[d,_]="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[[],t.values]:[];const p=t.trans._cache;return s.mutate(t).then((t=>{if(a(d)){"delete"!==f&&(d=t.results),l.addKeys(d);const e=Rr(d,p);e||"add"===f||h.addKeys(d),(e||_)&&function(t,e,r,n){e.indexes.forEach((function(e){const i=t(e.name||"");function s(t){return null!=t?e.extractKey(t):null}const o=t=>e.multiEntry&&a(t)?t.forEach((t=>i.addKey(t))):i.addKey(t);(r||n).forEach(((t,e)=>{const i=r&&s(r[e]),a=n&&s(n[e]);0!==je(i,a)&&(null!=i&&o(i),null!=a&&o(a))}))}))}(c,o,e,_)}else if(d){const t={from:d.lower,to:d.upper};h.add(t),l.add(t)}else l.add(r),h.add(r),o.indexes.forEach((t=>c(t.name).add(r)));return t}))}},f=({query:{index:e,range:r}})=>{var n,i;return[e,new Dr(null!==(n=r.lower)&&void 0!==n?n:t.MIN_KEY,null!==(i=r.upper)&&void 0!==i?i:t.MAX_KEY)]},d={get:t=>[u,new Dr(t.key)],getMany:t=>[u,(new Dr).addKeys(t.keys)],count:f,query:f,openCursor:f};return i(d).forEach((t=>{h[t]=function(i){const{subscr:a}=It;if(a){const o=t=>{const r=`idb://${e}/${n}/${t}`;return a[r]||(a[r]=new Dr)},u=o(""),h=o(":dels"),[f,_]=d[t](i);if(o(f.name||"").add(_),!f.isPrimaryKey){if("count"!==t){const e="query"===t&&l&&i.values&&s.query({...i,values:!1});return s[t].apply(this,arguments).then((r=>{if("query"===t){if(l&&i.values)return e.then((({result:t})=>(u.addKeys(t),r)));const t=i.values?r.result.map(c):r.result;i.values?u.addKeys(t):h.addKeys(t)}else if("openCursor"===t){const t=r,e=i.values;return t&&Object.create(t,{key:{get:()=>(h.addKey(t.primaryKey),t.key)},primaryKey:{get(){const e=t.primaryKey;return h.addKey(e),e}},value:{get:()=>(e&&u.addKey(t.primaryKey),t.value)}})}return r}))}h.add(r)}}return s[t].apply(this,arguments)}})),h}}}};class Nr{constructor(t,e){this._middlewares={},this.verno=0;const r=Nr.dependencies;this._options=e={addons:Nr.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...e},this._deps={indexedDB:e.indexedDB,IDBKeyRange:e.IDBKeyRange};const{addons:n}=e;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:nt,dbReadyPromise:null,cancelOpen:nt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;i.dbReadyPromise=new Ot((t=>{i.dbReadyResolve=t})),i.openCanceller=new Ot(((t,e)=>{i.cancelOpen=e})),this._state=i,this.name=t,this.on=Se(this,"populate","blocked","versionchange","close",{ready:[ht,nt]}),this.on.ready.subscribe=b(this.on.ready.subscribe,(t=>(e,r)=>{Nr.vip((()=>{const n=this._state;if(n.openComplete)n.dbOpenError||Ot.resolve().then(e),r&&t(e);else if(n.onReadyBeingFired)n.onReadyBeingFired.push(e),r&&t(e);else{t(e);const n=this;r||t((function t(){n.on.ready.unsubscribe(e),n.on.ready.unsubscribe(t)}))}}))})),this.Collection=(a=this,Te(Ue.prototype,(function(t,e){this.db=a;let r=xe,n=null;if(e)try{r=e()}catch(t){n=t}const i=t._ctx,s=i.table,o=s.hook.reading.fire;this._ctx={table:s,index:i.index,isPrimKey:!i.index||s.schema.primKey.keyPath&&i.index===s.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:i.or,valueMapper:o!==it?o:null}}))),this.Table=function(t){return Te(Ce.prototype,(function(e,r,n){this.db=t,this._tx=n,this.name=e,this.schema=r,this.hook=t._allTables[e]?t._allTables[e].hook:Se(null,{creating:[ot,nt],reading:[at,it],updating:[ct,nt],deleting:[ut,nt]})}))}(this),this.Transaction=function(t){return Te(Ze.prototype,(function(e,r,n,i,a){this.db=t,this.mode=e,this.storeNames=r,this.schema=n,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Se(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ot(((t,e)=>{this._resolve=t,this._reject=e})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(t=>{var e=this.active;return this.active=!1,this.on.error.fire(t),this.parent?this.parent._reject(t):e&&this.idbtrans&&this.idbtrans.abort(),_e(t)}))}))}(this),this.Version=function(t){return Te(yr.prototype,(function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(t){return Te(Xe.prototype,(function(e,r,n){this.db=t,this._ctx={table:e,index:":id"===r?null:r,or:n};const i=t._deps.indexedDB;if(!i)throw new tt.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(t,e)=>i.cmp(e,t),this._max=(t,e)=>i.cmp(t,e)>0?t:e,this._min=(t,e)=>i.cmp(t,e)<0?t:e,this._IDBKeyRange=t._deps.IDBKeyRange}))}(this),this.on("versionchange",(t=>{t.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(t=>{!t.newVersion||t.newVersion<t.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${t.oldVersion/10}`)})),this._maxKey=nr(e.IDBKeyRange),this._createTransaction=(t,e,r,n)=>new this.Transaction(t,e,r,this._options.chromeTransactionDurability,n),this._fireOnBlocked=t=>{this.on("blocked").fire(t),be.filter((t=>t.name===this.name&&t!==this&&!t._state.vcFired)).map((e=>e.on("versionchange").fire(t)))},this.use(Tr),this.use(Pr),this.use($r),this.use(Br),this.vip=Object.create(this,{_vip:{value:!0}}),n.forEach((t=>t(this)))}version(t){if(isNaN(t)||t<.1)throw new tt.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new tt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const e=this._versions;var r=e.filter((e=>e._cfg.version===t))[0];return r||(r=new this.Version(t),e.push(r),e.sort(fr),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||It.letThrough||this._vip)?t():new Ot(((t,e)=>{if(this._state.openComplete)return e(new tt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void e(new tt.DatabaseClosed);this.open().catch(nt)}this._state.dbReadyPromise.then(t,e)})).then(t)}use({stack:t,create:e,level:r,name:n}){n&&this.unuse({stack:t,name:n});const i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:e,level:null==r?10:r,name:n}),i.sort(((t,e)=>t.level-e.level)),this}unuse({stack:t,name:e,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((t=>r?t.create!==r:!!e&&t.name!==e))),this}open(){return function(t){const e=t._state,{indexedDB:r}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then((()=>e.dbOpenError?_e(e.dbOpenError):t));U&&(e.openCanceller._stackHolder=H()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const n=e.openCanceller;function a(){if(e.openCanceller!==n)throw new tt.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,u=!1;return Ot.race([n,("undefined"==typeof navigator?Ot.resolve():kr()).then((()=>new Ot(((n,s)=>{if(a(),!r)throw new tt.MissingAPI;const c=t.name,l=e.autoSchema?r.open(c):r.open(c,Math.round(10*t.verno));if(!l)throw new tt.MissingAPI;l.onerror=Ye(s),l.onblocked=Kt(t._fireOnBlocked),l.onupgradeneeded=Kt((n=>{if(o=l.transaction,e.autoSchema&&!t._options.allowEmptyDB){l.onerror=Je,o.abort(),l.result.close();const t=r.deleteDatabase(c);t.onsuccess=t.onerror=Kt((()=>{s(new tt.NoSuchDatabase(`Database ${c} doesnt exist`))}))}else{o.onerror=Ye(s);var i=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;u=i<1,t._novip.idbdb=l.result,dr(t,i/10,o,s)}}),s),l.onsuccess=Kt((()=>{o=null;const r=t._novip.idbdb=l.result,a=m(r.objectStoreNames);if(a.length>0)try{const n=r.transaction(1===(s=a).length?s[0]:s,"readonly");e.autoSchema?function({_novip:t},e,r){t.verno=e.version/10;const n=t._dbSchema=mr(0,e,r);t._storeNames=m(e.objectStoreNames,0),lr(t,[t._allTables],i(n),n)}(t,r,n):(br(t,t._dbSchema,n),function(t,e){const r=_r(mr(0,t.idbdb,e),t._dbSchema);return!(r.add.length||r.change.some((t=>t.add.length||t.change.length)))}(t,n)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),cr(t,n)}catch(t){}var s;be.push(t),r.onversionchange=Kt((r=>{e.vcFired=!0,t.on("versionchange").fire(r)})),r.onclose=Kt((e=>{t.on("close").fire(e)})),u&&function({indexedDB:t,IDBKeyRange:e},r){!wr(t)&&"__dbnames"!==r&&vr(t,e).put({name:r}).catch(nt)}(t._deps,c),n()}),s)}))))]).then((()=>(a(),e.onReadyBeingFired=[],Ot.resolve(Ar((()=>t.on.ready.fire(t.vip)))).then((function r(){if(e.onReadyBeingFired.length>0){let n=e.onReadyBeingFired.reduce(ht,nt);return e.onReadyBeingFired=[],Ot.resolve(Ar((()=>n(t.vip)))).then(r)}}))))).finally((()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1})).then((()=>t)).catch((r=>{e.dbOpenError=r;try{o&&o.abort()}catch(t){}return n===e.openCanceller&&t._close(),_e(r)})).finally((()=>{e.openComplete=!0,s()}))}(this)}_close(){const t=this._state,e=be.indexOf(this);if(e>=0&&be.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(t){}this._novip.idbdb=null}t.dbReadyPromise=new Ot((e=>{t.dbReadyResolve=e})),t.openCanceller=new Ot(((e,r)=>{t.cancelOpen=r}))}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new tt.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,e=this._state;return new Ot(((r,n)=>{const i=()=>{this.close();var t=this._deps.indexedDB.deleteDatabase(this.name);t.onsuccess=Kt((()=>{!function({indexedDB:t,IDBKeyRange:e},r){!wr(t)&&"__dbnames"!==r&&vr(t,e).delete(r).catch(nt)}(this._deps,this.name),r()})),t.onerror=Ye(n),t.onblocked=this._fireOnBlocked};if(t)throw new tt.InvalidArgument("Arguments not allowed in db.delete()");e.isBeingOpened?e.dbReadyPromise.then(i):i()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return i(this._allTables).map((t=>this._allTables[t]))}transaction(){const t=Er.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,e,r){let n=It.trans;n&&n.db===this&&-1===t.indexOf("!")||(n=null);const i=-1!==t.indexOf("?");let a,s;t=t.replace("!","").replace("?","");try{if(s=e.map((t=>{var e=t instanceof this.Table?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==t||"readonly"===t)a="readonly";else{if("rw"!=t&&"readwrite"!=t)throw new tt.InvalidArgument("Invalid transaction mode: "+t);a="readwrite"}if(n){if("readonly"===n.mode&&"readwrite"===a){if(!i)throw new tt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");n=null}n&&s.forEach((t=>{if(n&&-1===n.storeNames.indexOf(t)){if(!i)throw new tt.SubTransaction("Table "+t+" not included in parent transaction.");n=null}})),i&&n&&!n.active&&(n=null)}}catch(t){return n?n._promise(null,((e,r)=>{r(t)})):_e(t)}const o=Cr.bind(null,this,a,s,n,r);return n?n._promise(a,o,"lock"):It.trans?ce(It.transless,(()=>this._whenReady(o))):this._whenReady(o)}table(t){if(!c(this._allTables,t))throw new tt.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const Hr="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class qr{constructor(t){this._subscribe=t}subscribe(t,e,r){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:r})}[Hr](){return this}}function Wr(t,e){return i(e).forEach((r=>{jr(t[r]||(t[r]=new Dr),e[r])})),t}function Vr(t){return new qr((e=>{const r=L(t);let n=!1,a={},s={};const o={get closed(){return n},unsubscribe:()=>{n=!0,Qe.storagemutated.unsubscribe(h)}};e.start&&e.start(o);let u=!1,c=!1;function l(){return i(s).some((t=>a[t]&&Mr(a[t],s[t])))}const h=t=>{Wr(a,t),l()&&f()},f=()=>{if(u||n)return;a={};const i={},d=function(e){r&&re();const n=()=>ee(t,{subscr:e,trans:null}),i=It.trans?ce(It.transless,n):n();return r&&i.then(ne,ne),i}(i);c||(Qe("storagemutated",h),c=!0),u=!0,Promise.resolve(d).then((t=>{u=!1,n||(l()?f():(a={},s=i,e.next&&e.next(t)))}),(t=>{u=!1,e.error&&e.error(t),o.unsubscribe()}))};return f(),o}))}let Gr;try{Gr={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch(n){Gr={indexedDB:null,IDBKeyRange:null}}const Kr=Nr;function Xr(t){let e=Yr;try{Yr=!0,Qe.storagemutated.fire(t)}finally{Yr=e}}l(Kr,{...rt,delete:t=>new Kr(t,{addons:[]}).delete(),exists:t=>new Kr(t,{addons:[]}).open().then((t=>(t.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(t){try{return function({indexedDB:t,IDBKeyRange:e}){return wr(t)?Promise.resolve(t.databases()).then((t=>t.map((t=>t.name)).filter((t=>"__dbnames"!==t)))):vr(t,e).toCollection().primaryKeys()}(Kr.dependencies).then(t)}catch(t){return _e(new tt.MissingAPI)}},defineClass:()=>function(t){s(this,t)},ignoreTransaction:t=>It.trans?ce(It.transless,t):t(),vip:Ar,async:function(t){return function(){try{var e=xr(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Ot.resolve(e)}catch(t){return _e(t)}}},spawn:function(t,e,r){try{var n=xr(t.apply(r,e||[]));return n&&"function"==typeof n.then?n:Ot.resolve(n)}catch(t){return _e(t)}},currentTransaction:{get:()=>It.trans||null},waitFor:function(t,e){const r=Ot.resolve("function"==typeof t?Kr.ignoreTransaction(t):t).timeout(e||6e4);return It.trans?It.trans.waitFor(r):r},Promise:Ot,debug:{get:()=>U,set:t=>{z(t,"dexie"===t?()=>!0:Ae)}},derive:d,extend:s,props:l,override:b,Events:Se,on:Qe,liveQuery:Vr,extendObservabilitySet:Wr,getByKeyPath:A,setByKeyPath:k,delByKeyPath:function(t,e){"string"==typeof e?k(t,e,void 0):"length"in e&&[].map.call(e,(function(e){k(t,e,void 0)}))},shallowClone:x,deepClone:P,getObjectDiff:Ir,cmp:je,asap:v,minKey:-1/0,addons:[],connections:be,errnames:Q,dependencies:Gr,semVer:"3.2.2",version:"3.2.2".split(".").map((t=>parseInt(t))).reduce(((t,e,r)=>t+e/Math.pow(10,2*r)))}),Kr.maxKey=nr(Kr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Qe("storagemutated",(t=>{if(!Yr){let e;ye?(e=document.createEvent("CustomEvent"),e.initCustomEvent("x-storagemutated-1",!0,!0,t)):e=new CustomEvent("x-storagemutated-1",{detail:t}),Yr=!0,dispatchEvent(e),Yr=!1}})),addEventListener("x-storagemutated-1",(({detail:t})=>{Yr||Xr(t)})));let Yr=!1;if("undefined"!=typeof BroadcastChannel){const t=new BroadcastChannel("x-storagemutated-1");Qe("storagemutated",(e=>{Yr||t.postMessage(e)})),t.onmessage=t=>{t.data&&Xr(t.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){Qe("storagemutated",(t=>{try{Yr||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((e=>e.postMessage({type:"x-storagemutated-1",changedParts:t}))))}catch(t){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(t=>{if("x-storagemutated-1"===t.key){const e=JSON.parse(t.newValue);e&&Xr(e.changedParts)}}));const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",(function({data:t}){t&&"x-storagemutated-1"===t.type&&Xr(t.changedParts)}))}Ot.rejectionMapper=function(t,e){if(!t||t instanceof K||t instanceof TypeError||t instanceof SyntaxError||!t.name||!et[t.name])return t;var r=new et[t.name](e||t.message,t);return"stack"in t&&f(r,"stack",{get:function(){return this.inner.stack}}),r},z(U,Ae)},7489:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});const n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=(()=>{if("undefined"==typeof document)return!1;const t=n[0],e={};for(const r of n){const n=r?.[1];if(n in document){for(const[n,i]of r.entries())e[t[n]]=i;return e}}return!1})(),a={change:i.fullscreenchange,error:i.fullscreenerror};let s={request:(t=document.documentElement,e)=>new Promise(((r,n)=>{const a=()=>{s.off("change",a),r()};s.on("change",a);const o=t[i.requestFullscreen](e);o instanceof Promise&&o.then(a).catch(n)})),exit:()=>new Promise(((t,e)=>{if(!s.isFullscreen)return void t();const r=()=>{s.off("change",r),t()};s.on("change",r);const n=document[i.exitFullscreen]();n instanceof Promise&&n.then(r).catch(e)})),toggle:(t,e)=>s.isFullscreen?s.exit():s.request(t,e),onchange(t){s.on("change",t)},onerror(t){s.on("error",t)},on(t,e){const r=a[t];r&&document.addEventListener(r,e,!1)},off(t,e){const r=a[t];r&&document.removeEventListener(r,e,!1)},raw:i};Object.defineProperties(s,{isFullscreen:{get:()=>Boolean(document[i.fullscreenElement])},element:{enumerable:!0,get:()=>document[i.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[i.fullscreenEnabled])}}),i||(s={isEnabled:!1});const o=s}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";const t=r(655);r(8660);const e=r(1260);r(7442);const n=r(4620),i=t.__importDefault(r(2982)),a=t.__importDefault(r(9905)),s=t.__importDefault(r(769)),o=t.__importDefault(r(7789)),u=r(6594),c=t.__importDefault(r(8643)),l=t.__importDefault(r(7647)),h=t.__importDefault(r(4608)),f=t.__importDefault(r(4416)),d=t.__importDefault(r(4030)),_=t.__importDefault(r(575)),p=r(3305),g="stellerator-ng-version";navigator.serviceWorker&&navigator.serviceWorker.register("./service-worker.js",{scope:"./"});const m=t=>({cpuEmulation:"cycle",volume:80,audioEmulation:"pcm",gammaCorrection:1,tvEmulation:t?"none":"composite",scaling:t?"bilinear":"qis",phosphorLevel:50,scanlineIntensity:20,touchControls:void 0,leftHanded:!1,virtualJoystickSensitivity:10,uiMode:void 0,uiSize:100});window.addEventListener("load",(function(){return t.__awaiter(this,void 0,void 0,(function*(){(0,n.initialize)();const t=i.default.getAllTypes().map((t=>({key:t,description:i.default.describeCartridgeType(t)}))),r=new u.Container({autoBindInjectable:!0,defaultScope:"Singleton"}),b=r.get(c.default),y=(0,p.detect)(),v=!(y&&(y.floatTextures||y.halfFloatTextures)&&y.highpInFsh);b.setDefaults(m(v));const[w,A]=yield Promise.all([b.getAllCartridges(),b.getSettings()]),k="1.1.0",x=localStorage.getItem(g),E=!!x&&x!==k;localStorage.setItem(g,k);const{ports:C}=e.Elm.Stellerator.Main.init({flags:{cartridges:w,cartridgeTypes:t,settings:A,defaultSettings:m(v),touchSupport:d.default.isSupported(),version:k,wasUpdated:E,gamepadCount:_.default.probeGamepadCount(),badGpu:v}});r.get(a.default).init(C),r.get(s.default).init(C),r.get(o.default).init(C),r.get(l.default).init(C),r.get(h.default).init(C),r.get(f.default).init(C),C.scrollToTop_.subscribe((()=>window.scrollTo(0,0))),C.blurCurrentElement_.subscribe((()=>document.activeElement.blur()))}))}))})()})();
//# sourceMappingURL=app.js.map