{"version":3,"file":"stellerator.min.js","sources":["../../node_modules/microevent.ts/lib/Event.js","../../node_modules/microevent.ts/lib/index.js","../../node_modules/worker-rpc/lib/RpcProvider.js","../../node_modules/worker-rpc/lib/index.js","../../worker/src/rpc.ts","../../node_modules/tslib/tslib.es6.js","../../src/web/stella/service/EmulationServiceInterface.ts","../../src/machine/board/BoardInterface.ts","../../src/machine/cpu/CpuInterface.ts","../../src/tools/pool/PoolMember.ts","../../src/tools/pool/Pool.ts","../../src/video/surface/ArrayBufferSurface.ts","../../src/tools/pool/InducedMember.ts","../../src/tools/pool/InducedPool.ts","../../src/video/processing/PassthroughProcessor.ts","../../src/video/processing/FrameMergeProcessor.ts","../../src/video/processing/ProcessorFactory.ts","../../src/video/processing/ProcessorPipeline.ts","../../src/web/driver/VideoEndpoint.ts","../../src/tools/AudioOutputBuffer.ts","../../src/web/driver/PCMAudioEndpoint.ts","../../src/web/stella/service/vanilla/EmulationContext.ts","../../src/machine/stella/Bus.ts","../../src/machine/stella/Pia.ts","../../src/machine/cpu/statemachine/ResultImpl.ts","../../src/tools/decorators.ts","../../src/machine/cpu/statemachine/vector/boot.ts","../../src/machine/cpu/statemachine/vector/interrupt.ts","../../src/machine/cpu/Instruction.ts","../../src/machine/cpu/statemachine/addressing/absolute.ts","../../src/machine/cpu/statemachine/addressing/absoluteIndexed.ts","../../src/machine/cpu/statemachine/addressing/dereference.ts","../../src/machine/cpu/statemachine/addressing/immediate.ts","../../src/machine/cpu/statemachine/addressing/indexedIndirectX.ts","../../src/machine/cpu/statemachine/addressing/indirectIndexedY.ts","../../src/machine/cpu/statemachine/addressing/zeroPage.ts","../../src/machine/cpu/statemachine/addressing/zeroPageIndexed.ts","../../src/machine/cpu/statemachine/instruction/branch.ts","../../src/machine/cpu/statemachine/instruction/jsr.ts","../../src/machine/cpu/statemachine/instruction/readModifyWrite.ts","../../src/machine/cpu/statemachine/instruction/rts.ts","../../src/machine/cpu/statemachine/instruction/nullaryOneCycle.ts","../../src/machine/cpu/statemachine/instruction/pull.ts","../../src/machine/cpu/statemachine/instruction/push.ts","../../src/machine/cpu/statemachine/instruction/rti.ts","../../src/machine/cpu/statemachine/instruction/write.ts","../../src/machine/cpu/statemachine/ops.ts","../../src/machine/cpu/statemachine/addressing/indirect.ts","../../src/machine/cpu/statemachine/Compiler.ts","../../src/machine/cpu/StateMachineCpu.ts","../../src/machine/cpu/ops.ts","../../src/machine/cpu/BatchedAccessCpu.ts","../../src/machine/cpu/Factory.ts","../../src/machine/stella/Config.ts","../../src/tools/base64.ts","../../src/machine/stella/tia/ToneGenerator.ts","../../src/machine/stella/tia/WaveformAudio.ts","../../src/machine/stella/tia/PCMChannel.ts","../../src/machine/stella/tia/PCMAudio.ts","../../src/machine/stella/tia/drawCounterDecodes.ts","../../src/machine/stella/tia/Missile.ts","../../src/machine/stella/tia/Playfield.ts","../../src/machine/stella/tia/Player.ts","../../src/machine/stella/tia/Ball.ts","../../src/machine/stella/tia/LatchedInput.ts","../../src/machine/stella/tia/PaddleReader.ts","../../src/machine/stella/tia/FrameManager.ts","../../src/machine/stella/tia/DelayQueue.ts","../../src/machine/stella/tia/palette.ts","../../src/machine/stella/tia/Tia.ts","../../src/machine/io/Switch.ts","../../src/machine/stella/ControlPanel.ts","../../src/machine/io/DigitalJoystick.ts","../../src/machine/io/Paddle.ts","../../node_modules/seedrandom/lib/alea.js","../../node_modules/seedrandom/lib/xor128.js","../../node_modules/seedrandom/lib/xorwow.js","../../node_modules/seedrandom/lib/xorshift7.js","../../node_modules/seedrandom/lib/xor4096.js","../../node_modules/seedrandom/lib/tychei.js","../../node_modules/rollup-plugin-node-builtins/src/es6/empty.js","../../node_modules/seedrandom/seedrandom.js","../../node_modules/seedrandom/index.js","../../src/machine/stella/cartridge/CartridgeInterface.ts","../../src/machine/stella/cartridge/CartridgeInfo.ts","../../src/tools/rng/SeedrandomGenerator.ts","../../src/machine/stella/Board.ts","../../src/tools/rng/factory.ts","../../src/machine/stella/cartridge/AbstractCartridge.ts","../../src/machine/stella/cartridge/Cartridge2k.ts","../../src/machine/stella/cartridge/Cartridge4k.ts","../../src/machine/stella/cartridge/util.ts","../../src/machine/stella/cartridge/CartridgeCV.ts","../../src/machine/stella/cartridge/CartridgeF8.ts","../../src/machine/stella/cartridge/CartridgeF6.ts","../../src/machine/stella/cartridge/CartridgeE0.ts","../../src/machine/stella/cartridge/CartridgeFE.ts","../../src/machine/stella/cartridge/Cartridge3F.ts","../../src/machine/stella/cartridge/Cartridge3E.ts","../../src/machine/stella/cartridge/CartridgeUA.ts","../../src/machine/stella/cartridge/CartridgeFA.ts","../../src/machine/stella/cartridge/CartridgeE7.ts","../../src/machine/stella/cartridge/CartridgeF0.ts","../../src/machine/stella/cartridge/CartridgeEF.ts","../../src/machine/stella/cartridge/CartridgeF4.ts","../../src/machine/stella/cartridge/CartridgeFA2.ts","../../src/machine/stella/cartridge/supercharger/Header.ts","../../src/machine/stella/cartridge/supercharger/blob.ts","../../src/machine/stella/cartridge/CartridgeSupercharger.ts","../../src/machine/stella/cartridge/CartridgeDPC.ts","../../node_modules/rollup-plugin-node-globals/src/global.js","../../node_modules/process-es6/browser.js","../../fe2240aa385b6afaec3463a8984860","../../node_modules/buffer-es6/base64.js","../../node_modules/buffer-es6/ieee754.js","../../node_modules/buffer-es6/isArray.js","../../node_modules/buffer-es6/index.js","../../node_modules/rollup-plugin-node-builtins/src/es6/path.js","../../node_modules/thumbulator.ts/lib/native/thumbulator.js","../../node_modules/thumbulator.ts/lib/Thumbulator.js","../../src/tools/hex.ts","../../src/machine/stella/cartridge/harmony/Soc.ts","../../src/machine/stella/cartridge/CartridgeDPCPlus.ts","../../src/machine/stella/cartridge/CartridgeCDF.ts","../../src/machine/stella/cartridge/Cartridge0840.ts","../../src/machine/stella/cartridge/CartridgePP.ts","../../src/machine/stella/cartridge/CartridgeDetector.ts","../../src/machine/stella/cartridge/CartridgeFactory.ts","../../src/machine/stella/DataTap.ts","../../src/tools/scheduler/PeriodicScheduler.ts","../../node_modules/setimmediate2/dist/setImmediate.js","../../src/tools/scheduler/setImmediate.ts","../../src/tools/scheduler/ImmedateScheduler.ts","../../src/tools/scheduler/getTimestamp.ts","../../src/tools/scheduler/limiting/BusyWait.ts","../../src/tools/scheduler/limiting/ConstantCycles.ts","../../src/tools/scheduler/limiting/ConstantTimeslice.ts","../../src/tools/scheduler/Factory.ts","../../src/tools/ClockProbe.ts","../../node_modules/async-mutex/lib/Mutex.js","../../node_modules/async-mutex/lib/index.js","../../src/web/stella/service/vanilla/EmulationService.ts","../../src/web/stella/service/DriverManager.ts","../../src/video/processing/worker/messages.ts","../../src/video/processing/worker/PipelineClient.ts","../../src/web/stella/service/worker/messages.ts","../../src/web/stella/service/worker/VideoDriver.ts","../../src/web/stella/service/worker/ControlDriver.ts","../../src/web/stella/service/worker/WaveformAudioDriver.ts","../../src/web/stella/service/worker/PCMAudioDriver.ts","../../src/web/stella/driver/DataTap.ts","../../src/web/stella/service/worker/EmulationBackend.ts","../../worker/src/main/stellerator.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar factories = [];\nfactories[0] = function () {\n    return function dispatcher0() { };\n};\nfactories[1] = function (callback, context) {\n    if (typeof (context) === 'undefined')\n        return callback;\n    return function dispatcher1(payload) {\n        callback(payload, context);\n    };\n};\nfunction getFactory(handlerCount) {\n    if (!factories[handlerCount])\n        factories[handlerCount] = compileFactory(handlerCount);\n    return factories[handlerCount];\n}\nfunction compileFactory(handlerCount) {\n    var src = 'return function dispatcher' + handlerCount + '(payload) {\\n';\n    var argsHandlers = [], argsContexts = [];\n    for (var i = 0; i < handlerCount; i++) {\n        argsHandlers.push('cb' + i);\n        argsContexts.push('ctx' + i);\n        src += '    cb' + i + '(payload, ctx' + i + ');\\n';\n    }\n    src += '};';\n    return new (Function.bind.apply(Function, [void 0].concat(argsHandlers.concat(argsContexts), [src])))();\n}\nvar Event = /** @class */ (function () {\n    function Event() {\n        this.hasHandlers = false;\n        this._handlers = [];\n        this._contexts = [];\n        this._createDispatcher();\n    }\n    Event.prototype.addHandler = function (handler, context) {\n        if (!this.isHandlerAttached(handler, context)) {\n            this._handlers.push(handler);\n            this._contexts.push(context);\n            this._createDispatcher();\n            this._updateHasHandlers();\n        }\n        return this;\n    };\n    Event.prototype.removeHandler = function (handler, context) {\n        var idx = this._getHandlerIndex(handler, context);\n        if (typeof (idx) !== 'undefined') {\n            this._handlers.splice(idx, 1);\n            this._contexts.splice(idx, 1);\n            this._createDispatcher();\n            this._updateHasHandlers();\n        }\n        return this;\n    };\n    Event.prototype.isHandlerAttached = function (handler, context) {\n        return typeof (this._getHandlerIndex(handler, context)) !== 'undefined';\n    };\n    Event.prototype._updateHasHandlers = function () {\n        this.hasHandlers = !!this._handlers.length;\n    };\n    Event.prototype._getHandlerIndex = function (handler, context) {\n        var handlerCount = this._handlers.length;\n        var idx;\n        for (idx = 0; idx < handlerCount; idx++) {\n            if (this._handlers[idx] === handler && this._contexts[idx] === context)\n                break;\n        }\n        return idx < handlerCount ? idx : undefined;\n    };\n    Event.prototype._createDispatcher = function () {\n        this.dispatch = getFactory(this._handlers.length).apply(this, this._handlers.concat(this._contexts));\n    };\n    return Event;\n}());\nexports.default = Event;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Event_1 = require(\"./Event\");\nexports.Event = Event_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar microevent_ts_1 = require(\"microevent.ts\");\nvar MSG_RESOLVE_TRANSACTION = \"resolve_transaction\", MSG_REJECT_TRANSACTION = \"reject_transaction\", MSG_ERROR = \"error\";\nvar RpcProvider = /** @class */ (function () {\n    function RpcProvider(_dispatch, _rpcTimeout) {\n        if (_rpcTimeout === void 0) { _rpcTimeout = 0; }\n        this._dispatch = _dispatch;\n        this._rpcTimeout = _rpcTimeout;\n        this.error = new microevent_ts_1.Event();\n        this._rpcHandlers = {};\n        this._signalHandlers = {};\n        this._pendingTransactions = {};\n        this._nextTransactionId = 0;\n    }\n    RpcProvider.prototype.dispatch = function (payload) {\n        var message = payload;\n        switch (message.type) {\n            case RpcProvider.MessageType.signal:\n                return this._handleSignal(message);\n            case RpcProvider.MessageType.rpc:\n                return this._handeRpc(message);\n            case RpcProvider.MessageType.internal:\n                return this._handleInternal(message);\n            default:\n                this._raiseError(\"invalid message type \" + message.type);\n        }\n    };\n    RpcProvider.prototype.rpc = function (id, payload, transfer) {\n        var _this = this;\n        var transactionId = this._nextTransactionId++;\n        this._dispatch({\n            type: RpcProvider.MessageType.rpc,\n            transactionId: transactionId,\n            id: id,\n            payload: payload\n        }, transfer ? transfer : undefined);\n        return new Promise(function (resolve, reject) {\n            var transaction = _this._pendingTransactions[transactionId] = {\n                id: transactionId,\n                resolve: resolve,\n                reject: reject\n            };\n            if (_this._rpcTimeout > 0) {\n                _this._pendingTransactions[transactionId].timeoutHandle =\n                    setTimeout(function () { return _this._transactionTimeout(transaction); }, _this._rpcTimeout);\n            }\n        });\n    };\n    ;\n    RpcProvider.prototype.signal = function (id, payload, transfer) {\n        this._dispatch({\n            type: RpcProvider.MessageType.signal,\n            id: id,\n            payload: payload,\n        }, transfer ? transfer : undefined);\n        return this;\n    };\n    RpcProvider.prototype.registerRpcHandler = function (id, handler) {\n        if (this._rpcHandlers[id]) {\n            throw new Error(\"rpc handler for \" + id + \" already registered\");\n        }\n        this._rpcHandlers[id] = handler;\n        return this;\n    };\n    ;\n    RpcProvider.prototype.registerSignalHandler = function (id, handler) {\n        if (!this._signalHandlers[id]) {\n            this._signalHandlers[id] = [];\n        }\n        this._signalHandlers[id].push(handler);\n        return this;\n    };\n    RpcProvider.prototype.deregisterRpcHandler = function (id, handler) {\n        if (this._rpcHandlers[id]) {\n            delete this._rpcHandlers[id];\n        }\n        return this;\n    };\n    ;\n    RpcProvider.prototype.deregisterSignalHandler = function (id, handler) {\n        if (this._signalHandlers[id]) {\n            this._signalHandlers[id] = this._signalHandlers[id].filter(function (h) { return handler !== h; });\n        }\n        return this;\n    };\n    RpcProvider.prototype._raiseError = function (error) {\n        this.error.dispatch(new Error(error));\n        this._dispatch({\n            type: RpcProvider.MessageType.internal,\n            id: MSG_ERROR,\n            payload: error\n        });\n    };\n    RpcProvider.prototype._handleSignal = function (message) {\n        if (!this._signalHandlers[message.id]) {\n            return this._raiseError(\"invalid signal \" + message.id);\n        }\n        this._signalHandlers[message.id].forEach(function (handler) { return handler(message.payload); });\n    };\n    RpcProvider.prototype._handeRpc = function (message) {\n        var _this = this;\n        if (!this._rpcHandlers[message.id]) {\n            return this._raiseError(\"invalid rpc \" + message.id);\n        }\n        Promise.resolve(this._rpcHandlers[message.id](message.payload))\n            .then(function (result) { return _this._dispatch({\n            type: RpcProvider.MessageType.internal,\n            id: MSG_RESOLVE_TRANSACTION,\n            transactionId: message.transactionId,\n            payload: result\n        }); }, function (reason) { return _this._dispatch({\n            type: RpcProvider.MessageType.internal,\n            id: MSG_REJECT_TRANSACTION,\n            transactionId: message.transactionId,\n            payload: reason\n        }); });\n    };\n    RpcProvider.prototype._handleInternal = function (message) {\n        var transaction = typeof (message.transactionId) !== 'undefined' ? this._pendingTransactions[message.transactionId] : undefined;\n        switch (message.id) {\n            case MSG_RESOLVE_TRANSACTION:\n                if (!transaction || typeof (message.transactionId) === 'undefined') {\n                    return this._raiseError(\"no pending transaction with id \" + message.transactionId);\n                }\n                transaction.resolve(message.payload);\n                this._clearTransaction(this._pendingTransactions[message.transactionId]);\n                break;\n            case MSG_REJECT_TRANSACTION:\n                if (!transaction || typeof (message.transactionId) === 'undefined') {\n                    return this._raiseError(\"no pending transaction with id \" + message.transactionId);\n                }\n                this._pendingTransactions[message.transactionId].reject(message.payload);\n                this._clearTransaction(this._pendingTransactions[message.transactionId]);\n                break;\n            case MSG_ERROR:\n                this.error.dispatch(new Error(\"remote error: \" + message.payload));\n                break;\n            default:\n                this._raiseError(\"unhandled internal message \" + message.id);\n                break;\n        }\n    };\n    RpcProvider.prototype._transactionTimeout = function (transaction) {\n        transaction.reject('transaction timed out');\n        this._raiseError(\"transaction \" + transaction.id + \" timed out\");\n        delete this._pendingTransactions[transaction.id];\n        return;\n    };\n    RpcProvider.prototype._clearTransaction = function (transaction) {\n        if (typeof (transaction.timeoutHandle) !== 'undefined') {\n            clearTimeout(transaction.timeoutHandle);\n        }\n        delete this._pendingTransactions[transaction.id];\n    };\n    return RpcProvider;\n}());\n(function (RpcProvider) {\n    var MessageType;\n    (function (MessageType) {\n        MessageType[MessageType[\"signal\"] = 0] = \"signal\";\n        MessageType[MessageType[\"rpc\"] = 1] = \"rpc\";\n        MessageType[MessageType[\"internal\"] = 2] = \"internal\";\n    })(MessageType = RpcProvider.MessageType || (RpcProvider.MessageType = {}));\n    ;\n})(RpcProvider || (RpcProvider = {}));\nexports.default = RpcProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RpcProvider_1 = require(\"./RpcProvider\");\nexports.RpcProvider = RpcProvider_1.default;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\ndeclare function postMessage(message: any, transfer?: any): void;\n\nimport { RpcProviderInterface, RpcProvider } from 'worker-rpc';\n\nlet rpcProvider: RpcProvider = null,\n    port: MessagePort = null,\n    portPending: MessagePort = null;\n\nfunction send(message: any, transfer?: any): void {\n    if (port) {\n        port.postMessage(message, transfer);\n    } else {\n        postMessage(message, transfer);\n    }\n\n    if (portPending) {\n        port = portPending;\n        port.onmessage = (e: MessageEvent) => rpcProvider.dispatch(e.data);\n    }\n\n    portPending = null;\n}\n\nrpcProvider = new RpcProvider(send);\nrpcProvider.error.addHandler(e => {\n    console.log(e ? e.message : 'unknown rpc error');\n});\nonmessage = (e: MessageEvent) => port || rpcProvider.dispatch(e.data);\n\nrpcProvider.registerRpcHandler('/use-port', (newPort: MessagePort) => {\n    if (!(port || portPending)) {\n        portPending = newPort;\n        return Promise.resolve();\n    } else {\n        return Promise.reject('RPC already switched to message port');\n    }\n});\n\nexport function getRpc(): RpcProviderInterface {\n    return rpcProvider;\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { EventInterface } from 'microevent.ts';\n\nimport StellaConfig from '../../../machine/stella/Config';\nimport CartridgeInfo from '../../../machine/stella/cartridge/CartridgeInfo';\nimport EmulationContextInterface from './EmulationContextInterface';\nimport { ProcessorConfig as VideoProcessorConfig } from '../../../video/processing/config';\n\ninterface EmulationServiceInterface {\n    init(): Promise<void>;\n\n    start(\n        buffer: { [i: number]: number; length: number },\n        config: EmulationServiceInterface.Config,\n        cartridgeType?: CartridgeInfo.CartridgeType,\n        videoProcessing?: Array<VideoProcessorConfig>\n    ): Promise<EmulationServiceInterface.State>;\n\n    stop(): Promise<EmulationServiceInterface.State>;\n\n    pause(): Promise<EmulationServiceInterface.State>;\n\n    resume(): Promise<EmulationServiceInterface.State>;\n\n    reset(): Promise<EmulationServiceInterface.State>;\n\n    setRateLimit(enforce: boolean): Promise<void>;\n\n    getRateLimit(): boolean;\n\n    getState(): EmulationServiceInterface.State;\n\n    getLastError(): Error;\n\n    getEmulationContext(): EmulationContextInterface;\n\n    getFrequency(): number;\n\n    stateChanged: EventInterface<EmulationServiceInterface.State>;\n\n    frequencyUpdate: EventInterface<number>;\n}\n\nnamespace EmulationServiceInterface {\n    export enum State {\n        stopped = 'stopped',\n        running = 'running',\n        paused = 'paused',\n        error = 'error'\n    }\n\n    export interface Config extends StellaConfig {\n        dataTap?: boolean;\n    }\n}\n\nexport { EmulationServiceInterface as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { EventInterface } from 'microevent.ts';\n\nimport BusInterface from '../bus/BusInterface';\nimport CpuInterface from '../cpu/CpuInterface';\nimport TimerInterface from './TimerInterface';\n\ninterface BoardInterface {\n    getBus(): BusInterface;\n\n    getCpu(): CpuInterface;\n\n    getTimer(): TimerInterface;\n\n    reset(hard: boolean): BoardInterface;\n\n    boot(): BoardInterface;\n\n    suspend(): void;\n\n    resume(): void;\n\n    getClockMode(): BoardInterface.ClockMode;\n\n    setClockMode(clockMode: BoardInterface.ClockMode): BoardInterface;\n\n    triggerTrap(reason: BoardInterface.TrapReason, message?: string): BoardInterface;\n\n    getBoardStateDebug(): string;\n\n    trap: EventInterface<BoardInterface.TrapPayload>;\n\n    cpuClock: EventInterface<number>;\n\n    clock: EventInterface<number>;\n\n    systemReset: EventInterface<void>;\n}\n\nnamespace BoardInterface {\n    export const enum TrapReason {\n        cpu,\n        bus,\n        debug,\n        board\n    }\n\n    export const enum ClockMode {\n        instruction,\n        lazy\n    }\n\n    export class TrapPayload {\n        constructor(public reason: TrapReason, public board: BoardInterface, public message?: string) {}\n    }\n}\n\nexport { BoardInterface as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\ninterface CpuInterface {\n    setInterrupt(irq: boolean): CpuInterface;\n\n    isInterrupt(): boolean;\n\n    nmi(): CpuInterface;\n\n    halt(): CpuInterface;\n\n    resume(): CpuInterface;\n\n    isHalt(): boolean;\n\n    setInvalidInstructionCallback(callback: CpuInterface.InvalidInstructionCallbackInterface): CpuInterface;\n\n    getInvalidInstructionCallback(): CpuInterface.InvalidInstructionCallbackInterface;\n\n    getLastInstructionPointer(): number;\n\n    reset(): CpuInterface;\n\n    cycle(): CpuInterface;\n\n    executionState: CpuInterface.ExecutionState;\n    state: CpuInterface.State;\n}\n\nnamespace CpuInterface {\n    export const enum ExecutionState {\n        boot,\n        fetch,\n        execute\n    }\n\n    export class State {\n        a: number = 0;\n        x: number = 0;\n        y: number = 0;\n        s: number = 0;\n        p: number = 0;\n        flags: number = 0;\n\n        irq = false;\n        nmi = false;\n    }\n\n    export const enum Flags {\n        c = 0x01, // carry\n        z = 0x02, // zero\n        i = 0x04, // interrupt\n        d = 0x08, // decimal mode\n        b = 0x10, // break\n        e = 0x20, // reserved\n        v = 0x40, // overflow\n        n = 0x80 // sign\n    }\n\n    export interface InvalidInstructionCallbackInterface {\n        (cpu?: CpuInterface): void;\n    }\n}\n\nexport { CpuInterface as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport PoolMemberInterface from './PoolMemberInterface';\n\nclass PoolMember<T> implements PoolMemberInterface<T> {\n    constructor(\n        private _value: T,\n        private _releaseCB: (victim: PoolMember<T>) => void,\n        private _disposeCB: (victim: PoolMember<T>) => void\n    ) {}\n\n    adopt(target: T): void {\n        this._value = target;\n    }\n\n    get(): T {\n        return this._value;\n    }\n\n    release(): void {\n        this._releaseCB(this);\n    }\n\n    dispose(): void {\n        this._disposeCB(this);\n    }\n\n    public _isAvailable = false;\n    public _isDisposed = false;\n    public _poolPosition: number;\n}\n\nexport { PoolMember as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport PoolMember from './PoolMember';\nimport PoolInterface from './PoolInterface';\n\nclass Pool<T> implements PoolInterface<T> {\n    constructor(private _factory: Pool.FactoryInterface<T>) {}\n\n    get(): PoolMember<T> {\n        let member: PoolMember<T>;\n\n        if (this._poolSize === 0) {\n            const newItem = this._factory();\n\n            member = new PoolMember<T>(\n                newItem,\n                (victim: PoolMember<T>) => this._releaseMember(victim),\n                (victim: PoolMember<T>) => this._disposeMember(victim)\n            );\n        } else {\n            member = this._pool[--this._poolSize];\n            member._isAvailable = false;\n        }\n\n        return member;\n    }\n\n    private _releaseMember(victim: PoolMember<T>) {\n        if (victim._isAvailable) {\n            throw new Error('Trying to release an already released pool member');\n        }\n\n        if (victim._isDisposed) {\n            throw new Error('Trying to release an already disposed pool member');\n        }\n\n        const position = this._poolSize++;\n\n        this._pool[position] = victim;\n\n        victim._isAvailable = true;\n        victim._poolPosition = position;\n\n        this.event.release.dispatch(victim.get());\n    }\n\n    private _disposeMember(victim: PoolMember<T>) {\n        if (victim._isDisposed) {\n            throw new Error('Trying to dispose of an already disposed pool member');\n        }\n\n        if (victim._isAvailable) {\n            if (this._poolSize > 1) {\n                this._pool[victim._poolPosition] = this._pool[this._poolSize - 1];\n            }\n\n            this._poolSize--;\n        }\n\n        victim._isDisposed = true;\n\n        this.event.dispose.dispatch(victim.get());\n    }\n\n    event = {\n        release: new Event<T>(),\n        dispose: new Event<T>()\n    };\n\n    private _pool: Array<PoolMember<T>> = [];\n\n    private _poolSize = 0;\n}\n\nnamespace Pool {\n    export interface FactoryInterface<T> {\n        (): T;\n    }\n\n    export interface RecycleCallbackInterface<T> {\n        (value: T): void;\n    }\n\n    export interface DisposeCallbackInterface<T> {\n        (value: T): void;\n    }\n}\n\nexport { Pool as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport RGBASurfaceInterface from './RGBASurfaceInterface';\n\nclass ArrayBufferSurface implements RGBASurfaceInterface {\n    static createFromArrayBuffer(width: number, height: number, buffer: ArrayBuffer): ArrayBufferSurface {\n        return new ArrayBufferSurface().replaceUnderlyingBuffer(width, height, buffer);\n    }\n\n    replaceUnderlyingBuffer(width: number, height: number, buffer: ArrayBuffer): ArrayBufferSurface {\n        if (width * height * 4 !== buffer.byteLength) {\n            throw new Error('surface size mismatch');\n        }\n\n        this._width = width;\n        this._height = height;\n        this._underlyingBuffer = buffer;\n\n        this._buffer = new Uint32Array(this._underlyingBuffer);\n\n        return this;\n    }\n\n    getUnderlyingBuffer(): ArrayBuffer {\n        return this._underlyingBuffer;\n    }\n\n    resetUnderlyingBuffer(): ArrayBufferSurface {\n        this._width = this._height = 0;\n        this._underlyingBuffer = this._buffer = null;\n\n        return this;\n    }\n\n    getWidth(): number {\n        return this._width;\n    }\n\n    getHeight(): number {\n        return this._height;\n    }\n\n    getBuffer(): Uint32Array {\n        return this._buffer;\n    }\n\n    getByteOrder(): RGBASurfaceInterface.ByteOrder {\n        return RGBASurfaceInterface.ByteOrder.rgba;\n    }\n\n    fill(value: number): this {\n        for (let i = 0; i < this._buffer.length; i++) {\n            this._buffer[i] = value;\n        }\n\n        return this;\n    }\n\n    private _height = 0;\n    private _width = 0;\n    private _underlyingBuffer: ArrayBuffer;\n\n    private _buffer: Uint32Array = null;\n}\n\nexport { ArrayBufferSurface as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport PoolMemberInterface from './PoolMemberInterface';\n\nclass InducedMember<T, U> implements PoolMemberInterface<U> {\n    constructor(\n        private _value: PoolMemberInterface<T>,\n        private _mapper: (value: T) => U,\n        private _adopter: (value: PoolMemberInterface<T>, target: U) => void\n    ) {}\n\n    adopt(target: U): void {\n        this._adopter(this._value, target);\n    }\n\n    get(): U {\n        return this._mapper(this._value.get());\n    }\n\n    release(): void {\n        this._value.release();\n    }\n\n    dispose(): void {\n        this._value.dispose();\n    }\n}\n\nexport { InducedMember as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport InducedMember from './InducedMember';\nimport PoolMemberInterface from './PoolMemberInterface';\n\nclass InducedPool<T, U> {\n    constructor(\n        private _mapper: (value: T) => U,\n        private _adopter: (value: PoolMemberInterface<T>, target: U) => void = () => {\n            throw new Error('adopt is not supported');\n        }\n    ) {}\n\n    get(original: PoolMemberInterface<T>): InducedMember<T, U> {\n        if (!this._map.has(original)) {\n            this._map.set(original, new InducedMember(original, this._mapper, this._adopter));\n        }\n\n        return this._map.get(original);\n    }\n\n    private _map = new WeakMap<PoolMemberInterface<T>, InducedMember<T, U>>();\n}\n\nexport { InducedPool as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport RGBASurfaceInterface from '../surface/RGBASurfaceInterface';\nimport PoolMemberInterface from '../../tools/pool/PoolMemberInterface';\nimport ProcessorInterface from './ProcessorInterface';\n\nclass PassthroughProcessor implements ProcessorInterface {\n    init(): void {}\n\n    flush(): void {}\n\n    processSurface(surface: PoolMemberInterface<RGBASurfaceInterface>): void {\n        this.emit.dispatch(surface);\n    }\n\n    emit = new Event<PoolMemberInterface<RGBASurfaceInterface>>();\n}\n\nexport { PassthroughProcessor as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport ProcessorInterface from './ProcessorInterface';\nimport RGBASurfaceInterface from '../surface/RGBASurfaceInterface';\nimport PoolMemberInterface from '../../tools/pool/PoolMemberInterface';\n\nclass FrameMergeProcessor implements ProcessorInterface {\n    init(width: number, height: number) {\n        this.flush();\n\n        this._width = width;\n        this._height = height;\n    }\n\n    flush(): void {\n        for (let i = 0; i < this._nFramesOnHold; i++) {\n            this._framesOnHold[i].release();\n            this._framesOnHold[i] = null;\n        }\n\n        this._nFramesOnHold = 0;\n    }\n\n    processSurface(wrappedSurface: PoolMemberInterface<RGBASurfaceInterface>): void {\n        const surface = wrappedSurface.get();\n\n        if (surface.getHeight() !== this._height || surface.getWidth() !== this._width) {\n            throw new Error('surface dimensions do not match');\n        }\n\n        this._framesOnHold[this._nFramesOnHold++] = wrappedSurface;\n\n        if (this._nFramesOnHold === 2) {\n            this._process();\n        }\n    }\n\n    private _process(): void {\n        const buffer0 = this._framesOnHold[0].get().getBuffer(),\n            buffer1 = this._framesOnHold[1].get().getBuffer();\n\n        for (let i = 0; i < this._width * this._height; i++) {\n            buffer0[i] =\n                0xff000000 |\n                ((((buffer0[i] & 0xff0000) + (buffer1[i] & 0xff0000)) >>> 1) & 0xff0000) |\n                ((((buffer0[i] & 0xff00) + (buffer1[i] & 0xff00)) >>> 1) & 0xff00) |\n                ((((buffer0[i] & 0xff) + (buffer1[i] & 0xff)) >>> 1) & 0xff);\n        }\n\n        this.emit.dispatch(this._framesOnHold[0]);\n        this._framesOnHold[1].release();\n\n        this._nFramesOnHold = 0;\n    }\n\n    emit = new Event<PoolMemberInterface<RGBASurfaceInterface>>();\n\n    private _framesOnHold = new Array<PoolMemberInterface<RGBASurfaceInterface>>(2);\n    private _nFramesOnHold = 0;\n\n    private _width = 0;\n    private _height = 0;\n}\n\nexport { FrameMergeProcessor as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport ProcessorInterface from './ProcessorInterface';\nimport * as Config from './config';\n\nimport PassthroughProcessor from './PassthroughProcessor';\nimport FrameMergeProcessor from './FrameMergeProcessor';\n\nclass ProcessorFactory {\n    create(config: Config.ProcessorConfig): ProcessorInterface {\n        switch (config.type) {\n            case Config.Type.passthrough:\n                return new PassthroughProcessor();\n\n            case Config.Type.merge:\n                return new FrameMergeProcessor();\n\n            default:\n                throw new Error('cannot happen: invalid processor type');\n        }\n    }\n}\n\nexport { ProcessorFactory as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { EventInterface } from 'microevent.ts';\n\nimport RGBASurfaceInterface from '../surface/RGBASurfaceInterface';\nimport PoolMemberInterface from '../../tools/pool/PoolMemberInterface';\nimport ProcessorInterface from './ProcessorInterface';\nimport ProcessorFactory from './ProcessorFactory';\nimport { ProcessorConfig, Type } from './config';\n\nclass ProcessorPipeline implements ProcessorInterface {\n    constructor(config?: Array<ProcessorConfig>) {\n        if (!config || config.length === 0) {\n            config = [{ type: Type.passthrough }];\n        }\n\n        const factory = new ProcessorFactory();\n\n        this._processors = config.map(cfg => factory.create(cfg));\n\n        for (let i = 1; i < this._processors.length; i++) {\n            this._processors[i - 1].emit.addHandler(surface => this._processors[i].processSurface(surface));\n        }\n\n        this.emit = this._processors[this._processors.length - 1].emit;\n    }\n\n    init(width: number, height: number): void {\n        this._processors.forEach(prc => prc.init(width, height));\n    }\n\n    flush(): void {\n        this._processors.forEach(prc => prc.flush());\n    }\n\n    processSurface(surface: PoolMemberInterface<RGBASurfaceInterface>): void {\n        this._processors[0].processSurface(surface);\n    }\n\n    emit: EventInterface<PoolMemberInterface<RGBASurfaceInterface>>;\n\n    private _processors: Array<ProcessorInterface>;\n}\n\nexport { ProcessorPipeline as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport VideoOutputInterface from '../..//machine/io/VideoOutputInterface';\nimport ObjectPool from '../../tools/pool/Pool';\nimport PoolMemberInterface from '../../tools/pool/PoolMemberInterface';\nimport ArrayBufferSurface from '../../video/surface/ArrayBufferSurface';\nimport RGBASurfaceInterface from '../../video/surface/RGBASurfaceInterface';\nimport VideoEndpointInterface from '../driver/VideoEndpointInterface';\nimport InducedPool from '../../tools/pool/InducedPool';\n\nimport VideoProcessorPipeline from '../../video/processing/ProcessorPipeline';\nimport * as VideoProcessorConfig from '../../video/processing/config';\nimport VideoProcessorInterface from '../../video/processing/ProcessorInterface';\n\nclass VideoEndpoint implements VideoEndpointInterface {\n    constructor(private _video: VideoOutputInterface, videoProcessing?: Array<VideoProcessorConfig.ProcessorConfig>) {\n        this._videoProcessor = new VideoProcessorPipeline(videoProcessing);\n        this._videoProcessor.init(this._video.getWidth(), this._video.getHeight());\n\n        this._pool = new ObjectPool<ImageData>(() => new ImageData(this._video.getWidth(), this._video.getHeight()));\n\n        this._video.setSurfaceFactory((): RGBASurfaceInterface => {\n            const poolMember = this._pool.get(),\n                imageData = poolMember.get();\n\n            if (!this._surfaces.has(imageData)) {\n                const newSurface = ArrayBufferSurface.createFromArrayBuffer(\n                    imageData.width,\n                    imageData.height,\n                    imageData.data.buffer\n                );\n\n                this._surfaces.set(imageData, newSurface.fill(0xff000000));\n            }\n\n            const surface = this._surfaces.get(imageData);\n\n            this._poolMembers.set(surface, poolMember);\n\n            return surface;\n        });\n\n        this._video.newFrame.addHandler(imageData =>\n            this._videoProcessor.processSurface(this._surfacePool.get(this._poolMembers.get(imageData)))\n        );\n\n        this._videoProcessor.emit.addHandler(wrappedSurface =>\n            this.newFrame.dispatch(this._poolMembers.get(wrappedSurface.get()))\n        );\n    }\n\n    getWidth(): number {\n        return this._video.getWidth();\n    }\n\n    getHeight(): number {\n        return this._video.getHeight();\n    }\n\n    newFrame = new Event<PoolMemberInterface<ImageData>>();\n\n    private _pool: ObjectPool<ImageData>;\n    private _poolMembers = new WeakMap<RGBASurfaceInterface, PoolMemberInterface<ImageData>>();\n    private _surfaces = new WeakMap<ImageData, RGBASurfaceInterface>();\n    private _surfacePool = new InducedPool<ImageData, RGBASurfaceInterface>(imageData => this._surfaces.get(imageData));\n\n    private _videoProcessor: VideoProcessorInterface;\n}\n\nexport { VideoEndpoint as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nclass AudioOutputBuffer {\n    constructor(private _content: Float32Array, private _sampleRate: number) {}\n\n    getLength(): number {\n        return this._content.length;\n    }\n\n    getContent(): Float32Array {\n        return this._content;\n    }\n\n    getSampleRate(): number {\n        return this._sampleRate;\n    }\n\n    replaceUnderlyingBuffer(buffer: Float32Array): void {\n        this._content = buffer;\n    }\n}\n\nexport { AudioOutputBuffer as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport Pool from '../../tools/pool/Pool';\nimport InducedPool from '../../tools/pool/InducedPool';\nimport PoolMemberInterface from '../../tools/pool/PoolMemberInterface';\nimport PCMAudioEndpointInterface from './PCMAudioEndpointInterface';\nimport PCMAudioOutputInterface from '../../machine/io/PCMAudioOutputInterface';\nimport AudioOutputBuffer from '../../tools/AudioOutputBuffer';\n\nclass PCMAudioEndpoint implements PCMAudioEndpointInterface {\n    constructor(private _output: PCMAudioOutputInterface) {\n        this._output.newFrame.addHandler((buffer: AudioOutputBuffer) =>\n            this.newFrame.dispatch(this._pcmDataPool.get(this._audioBufferMap.get(buffer)))\n        );\n\n        this._output.togglePause.addHandler((paused: boolean) => this.togglePause.dispatch(paused));\n\n        this._output.setFrameBufferFactory(() => {\n            const wrappedBuffer = this._audioBufferPool.get();\n\n            if (!this._audioBufferMap.has(wrappedBuffer.get())) {\n                this._audioBufferMap.set(wrappedBuffer.get(), wrappedBuffer);\n            }\n\n            return wrappedBuffer.get();\n        });\n    }\n\n    getSampleRate(): number {\n        return this._output.getSampleRate();\n    }\n\n    getFrameSize(): number {\n        return this._output.getFrameSize();\n    }\n\n    isPaused(): boolean {\n        return this._output.isPaused();\n    }\n\n    newFrame = new Event<PoolMemberInterface<Float32Array>>();\n\n    togglePause = new Event<boolean>();\n\n    private _audioBufferPool = new Pool<AudioOutputBuffer>(\n        () => new AudioOutputBuffer(new Float32Array(this.getFrameSize()), this.getSampleRate())\n    );\n\n    private _audioBufferMap = new WeakMap<AudioOutputBuffer, PoolMemberInterface<AudioOutputBuffer>>();\n\n    private _pcmDataPool = new InducedPool(\n        (buffer: AudioOutputBuffer) => buffer.getContent(),\n        (value: PoolMemberInterface<AudioOutputBuffer>, target: Float32Array) =>\n            value.get().replaceUnderlyingBuffer(target)\n    );\n}\n\nexport { PCMAudioEndpoint as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport EmulationContextInterface from '../EmulationContextInterface';\nimport ControlPanelInterface from '../../../../machine/stella/ControlPanelInterface';\nimport JoystickInterface from '../../../../machine/io/DigitalJoystickInterface';\nimport PaddleInterface from '../../../../machine/io/PaddleInterface';\nimport Board from '../../../../machine/stella/Board';\nimport Config from '../../../../machine/stella/Config';\nimport VideoEndpoint from '../../../driver/VideoEndpoint';\nimport VideoEndpointInterface from '../../../driver/VideoEndpointInterface';\nimport VideoOutputInterface from '../../../../machine/io/VideoOutputInterface';\nimport WaveformAudioOutputInterface from '../../../../machine/io/WaveformAudioOutputInterface';\nimport PCMAudioEndpointInterface from '../../../driver/PCMAudioEndpointInterface';\nimport PCMAudioEndpoint from '../../../driver/PCMAudioEndpoint';\nimport { ProcessorConfig as VideoProcessorConfig } from '../../../../video/processing/config';\nimport DataTapInterface from '../../../../machine/io/DataTapInterface';\n\nexport default class EmulationContext implements EmulationContextInterface {\n    constructor(\n        private _board: Board,\n        private _dataTap?: DataTapInterface,\n        private _videoProcessing?: Array<VideoProcessorConfig>\n    ) {}\n\n    getConfig(): Config {\n        return this._board.getConfig();\n    }\n\n    getVideo(): VideoEndpointInterface {\n        if (!this._videoEndpoint) {\n            this._videoEndpoint = new VideoEndpoint(this._board.getVideoOutput(), this._videoProcessing);\n        }\n\n        return this._videoEndpoint;\n    }\n\n    getJoystick(i: number): JoystickInterface {\n        switch (i) {\n            case 0:\n                return this._board.getJoystick0();\n\n            case 1:\n                return this._board.getJoystick1();\n\n            default:\n                throw new Error(`invalid joystick index ${i}`);\n        }\n    }\n\n    getControlPanel(): ControlPanelInterface {\n        return this._board.getControlPanel();\n    }\n\n    getPaddle(i: number): PaddleInterface {\n        if (i >= 0 && i < 4) {\n            return this._board.getPaddle(i);\n        } else {\n            throw new Error(`invalid paddle index ${i}`);\n        }\n    }\n\n    getWaveformChannels(): Array<WaveformAudioOutputInterface> {\n        return this._board.getWaveformChannels();\n    }\n\n    getPCMChannel(): PCMAudioEndpointInterface {\n        if (!this._audioEndpoint) {\n            this._audioEndpoint = new PCMAudioEndpoint(this._board.getPCMChannel());\n        }\n\n        return this._audioEndpoint;\n    }\n\n    getRawVideo(): VideoOutputInterface {\n        if (this._videoEndpoint) {\n            throw new Error(`video endpoint already initialized; raw video unavailable`);\n        }\n\n        return this._board.getVideoOutput();\n    }\n\n    getDataTap(): DataTapInterface {\n        return this._dataTap;\n    }\n\n    private _videoEndpoint: VideoEndpoint = null;\n    private _audioEndpoint: PCMAudioEndpointInterface = null;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport BusInterface from '../bus/BusInterface';\nimport Tia from './tia/Tia';\nimport Pia from './Pia';\nimport CartridgeInterface from './cartridge/CartridgeInterface';\n\nclass Bus implements BusInterface {\n    setTia(tia: Tia): Bus {\n        tia.trap.addHandler((payload: Tia.TrapPayload) =>\n            this.triggerTrap(Bus.TrapReason.tia, 'TIA: ' + (payload.message || ''))\n        );\n\n        this._tia = tia;\n\n        return this;\n    }\n\n    setPia(pia: Pia): Bus {\n        pia.trap.addHandler((payload: Pia.TrapPayload) =>\n            this.triggerTrap(Bus.TrapReason.pia, 'PIA: ' + (payload.message || ''))\n        );\n\n        this._pia = pia;\n\n        return this;\n    }\n\n    setCartridge(cartridge: CartridgeInterface): Bus {\n        cartridge.trap.addHandler((payload: CartridgeInterface.TrapPayload) =>\n            this.triggerTrap(Bus.TrapReason.cartridge, 'CARTRIDGE: ' + (payload.message || ''))\n        );\n\n        this._cartridge = cartridge;\n\n        return this;\n    }\n\n    readWord(address: number): number {\n        return this.read(address) | (this.read((address + 1) & 0xffff) << 8);\n    }\n\n    read(address: number): number {\n        // Mask out bits 13-15\n        this._lastAddressBusValue = address;\n        address &= 0x1fff;\n\n        // Chip select A12 -> cartridge\n        if (address & 0x1000) {\n            this._lastDataBusValue = this._cartridge.read(address);\n            this.event.read.dispatch(Bus.AccessType.cartridge);\n        } else if (address & 0x80) {\n            // Chip select A7 -> PIA\n            this._lastDataBusValue = this._pia.read(address);\n            this.event.read.dispatch(Bus.AccessType.pia);\n        } else {\n            this._lastDataBusValue = this._tia.read(address);\n            this.event.read.dispatch(Bus.AccessType.tia);\n        }\n\n        return this._lastDataBusValue;\n    }\n\n    write(address: number, value: number): void {\n        this._lastDataBusValue = value;\n        this._lastAddressBusValue = address;\n\n        // Mask out bits 12-15\n        address &= 0x1fff;\n\n        // Chip select A12 -> cartridge\n        if (address & 0x1000) {\n            this._cartridge.write(address, value);\n            this.event.write.dispatch(Bus.AccessType.cartridge);\n        } else if (address & 0x80) {\n            // Chip select A7 -> PIA\n            this._pia.write(address, value);\n            this.event.write.dispatch(Bus.AccessType.pia);\n        } else {\n            this._tia.write(address, value);\n            this.event.write.dispatch(Bus.AccessType.tia);\n        }\n    }\n\n    peek(address: number): number {\n        address &= 0x1fff;\n\n        // Chip select A12 -> cartridge\n        if (address & 0x1000) {\n            return this._cartridge.peek(address);\n        } else if (address & 0x80) {\n            // Chip select A7 -> PIA\n            return this._pia.peek(address);\n        } else {\n            return this._tia.peek(address);\n        }\n    }\n\n    // Stub\n    poke(address: number, value: number) { }\n\n    getLastDataBusValue(): number {\n        return this._lastDataBusValue;\n    }\n\n    getLastAddresBusValue(): number {\n        return this._lastAddressBusValue;\n    }\n\n    private triggerTrap(reason: Bus.TrapReason, message?: string): void {\n        if (this.event.trap.hasHandlers) {\n            this.event.trap.dispatch(new Bus.TrapPayload(reason, this, message));\n        } else {\n            throw new Error(message);\n        }\n    }\n\n    event = {\n        trap: new Event<Bus.TrapPayload>(),\n        read: new Event<Bus.AccessType>(),\n        write: new Event<Bus.AccessType>()\n    };\n\n    private _tia: Tia = null;\n    private _pia: Pia = null;\n    private _cartridge: CartridgeInterface = null;\n\n    private _lastDataBusValue = 0;\n    private _lastAddressBusValue = 0;\n}\n\nnamespace Bus {\n    export const enum TrapReason {\n        tia,\n        pia,\n        cartridge\n    }\n\n    export const enum AccessType {\n        tia,\n        pia,\n        cartridge\n    }\n\n    export class TrapPayload {\n        constructor(public reason: TrapReason, public bus: Bus, public message?: string) { }\n    }\n}\n\nexport { Bus as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport ControlPanelInterface from './ControlPanelInterface';\nimport DigitalJoystickInterface from '../io/DigitalJoystickInterface';\nimport Bus from './Bus';\n\nimport RngInterface from '../../tools/rng/GeneratorInterface';\n\nclass Pia {\n    constructor(\n        private _controlPanel: ControlPanelInterface,\n        private _joystick0: DigitalJoystickInterface,\n        private _joystick1: DigitalJoystickInterface,\n        private _rng?: RngInterface\n    ) {\n        this.reset();\n    }\n\n    reset(): void {\n        for (let i = 0; i < 128; i++) {\n            this.ram[i] = this._rng ? this._rng.int(0xff) : 0;\n        }\n\n        this._interruptFlag = 0;\n        this._flagSetDuringThisCycle = false;\n\n        this._timerDivide = 1024;\n        this._subTimer = 0;\n        this._rng.int(0xff);\n        this._timerValue = 0;\n        this._timerWrapped = false;\n    }\n\n    read(address: number): number {\n        // RAM select = A9 low?\n        if (address & 0x0200) {\n            if (address & 0x0004) {\n                return this._readTimer(address);\n            } else {\n                return this._readIo(address);\n            }\n        } else {\n            // Mask out A7 - A15\n            return this.ram[address & 0x7f];\n        }\n    }\n\n    peek(address: number): number {\n        // RAM select = A9 low?\n        if (address & 0x0200) {\n            if (address & 0x0004) {\n                return this._peekTimer(address);\n            } else {\n                return this._readIo(address);\n            }\n        } else {\n            // Mask out A7 - A15\n            return this.ram[address & 0x7f];\n        }\n    }\n\n    write(address: number, value: number) {\n        // RAM select = A9 low?\n        if (address & 0x0200) {\n            if (address & 0x0004) {\n                return this._writeTimer(address, value);\n            } else {\n                return this._writeIo(address, value);\n            }\n        } else {\n            // Mask out A7 - A15\n            this.ram[address & 0x7f] = value;\n        }\n    }\n\n    cycle(): void {\n        this._cycleTimer();\n    }\n\n    getDebugState(): string {\n        return `divider: ${this._timerDivide} raw timer: INTIM: ${this._timerValue}`;\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    private _writeIo(address: number, value: number): void {}\n\n    private _writeTimer(address: number, value: number): void {\n        this._interruptFlag = 0;\n\n        // clear bit 3 <-> interrupt enable/disable\n        switch (address & 0x0297) {\n            case Pia.Registers.t1024t:\n                return this._setTimer(1024, value);\n\n            case Pia.Registers.tim64t:\n                return this._setTimer(64, value);\n\n            case Pia.Registers.tim8t:\n                return this._setTimer(8, value);\n\n            case Pia.Registers.tim1t:\n                return this._setTimer(1, value);\n        }\n    }\n\n    private _setTimer(divide: number, value: number): void {\n        this._timerDivide = divide;\n        this._timerValue = value;\n        this._subTimer = 0;\n        this._timerWrapped = false;\n    }\n\n    private _readIo(address: number): number {\n        switch (address & 0x0283) {\n            case Pia.Registers.swcha:\n                return (\n                    (this._joystick1.getUp().read() ? 0 : 0x01) |\n                    (this._joystick1.getDown().read() ? 0 : 0x02) |\n                    (this._joystick1.getLeft().read() ? 0 : 0x04) |\n                    (this._joystick1.getRight().read() ? 0 : 0x08) |\n                    (this._joystick0.getUp().read() ? 0 : 0x10) |\n                    (this._joystick0.getDown().read() ? 0 : 0x20) |\n                    (this._joystick0.getLeft().read() ? 0 : 0x40) |\n                    (this._joystick0.getRight().read() ? 0 : 0x80)\n                );\n\n            case Pia.Registers.swchb:\n                return (\n                    (this._controlPanel.getResetButton().read() ? 0 : 0x01) |\n                    (this._controlPanel.getSelectSwitch().read() ? 0 : 0x02) |\n                    (this._controlPanel.getColorSwitch().read() ? 0 : 0x08) |\n                    (this._controlPanel.getDifficultySwitchP0().read() ? 0 : 0x40) |\n                    (this._controlPanel.getDifficultySwitchP1().read() ? 0 : 0x80)\n                );\n        }\n\n        return this._bus.getLastDataBusValue();\n    }\n\n    private _readTimer(address: number): number {\n        if (address & 0x01) {\n            const flag = this._interruptFlag;\n\n            return flag & 0x80;\n        } else {\n            if (!this._flagSetDuringThisCycle) {\n                this._interruptFlag = 0;\n                this._timerWrapped = false;\n            }\n\n            return this._timerValue;\n        }\n    }\n\n    private _peekTimer(address: number): number {\n        return address & 0x01 ? this._interruptFlag & 0x80 : this._timerValue;\n    }\n\n    private _cycleTimer(): void {\n        this._flagSetDuringThisCycle = false;\n\n        if (this._timerWrapped) {\n            this._timerValue = (this._timerValue + 0xff) & 0xff;\n        } else if (this._subTimer === 0 && --this._timerValue < 0) {\n            this._timerValue = 0xff;\n            this._flagSetDuringThisCycle = true;\n            this._interruptFlag = 0xff;\n            this._timerWrapped = true;\n        }\n\n        if (++this._subTimer === this._timerDivide) {\n            this._subTimer = 0;\n        }\n    }\n\n    trap = new Event<Pia.TrapPayload>();\n\n    ram = new Uint8Array(128);\n\n    private _bus: Bus = null;\n\n    private _timerValue = 255;\n    private _subTimer = 0;\n    private _timerDivide = 1024;\n    private _interruptFlag = 0;\n    private _timerWrapped = false;\n    private _flagSetDuringThisCycle = false;\n}\n\nnamespace Pia {\n    export const enum Registers {\n        swcha = 0x280,\n        swacnt = 0x281,\n        swchb = 0x282,\n        swncnt = 0x283,\n        intim = 0x284,\n        instat = 0x285,\n        tim1t = 0x294,\n        tim8t = 0x295,\n        tim64t = 0x296,\n        t1024t = 0x297\n    }\n\n    export const enum TrapReason {\n        invalidRead,\n        invalidWrite\n    }\n\n    export class TrapPayload {\n        constructor(public reason: TrapReason, public pia: Pia, public message?: string) {}\n    }\n}\n\nexport { Pia as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from './StateMachineInterface';\n\nclass ResultImpl implements StateMachineInterface.Result {\n    constructor() {}\n\n    read(nextStep: StateMachineInterface.Step, address: number): this {\n        this.cycleType = StateMachineInterface.CycleType.read;\n        this.address = address;\n        this.nextStep = nextStep;\n\n        return this;\n    }\n\n    write(nextStep: StateMachineInterface.Step, address: number, value: number): this {\n        this.cycleType = StateMachineInterface.CycleType.write;\n        this.address = address;\n        this.value = value;\n        this.nextStep = nextStep;\n\n        return this;\n    }\n\n    poll(poll: boolean): this {\n        this.pollInterrupts = poll;\n\n        return this;\n    }\n\n    cycleType = StateMachineInterface.CycleType.read;\n    address = 0;\n    value = 0;\n    pollInterrupts = false;\n    nextStep: StateMachineInterface.Step = null;\n}\n\nexport default ResultImpl;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nconst immutables = Symbol('immutable properties');\n\nexport function freezeImmutables(target: any): void {\n    const immutableProperties = target[immutables];\n    if (!immutableProperties) {\n        return;\n    }\n\n    for (const prop of immutableProperties) {\n        Object.defineProperty(target, prop, { writable: false, configurable: false });\n    }\n}\n\nexport function Immutable(target: any, prop: string): void {\n    if (!target[immutables]) {\n        Object.defineProperty(target, immutables, { value: [], writable: false, enumerable: false });\n    }\n\n    target[immutables].push(prop);\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from '../StateMachineInterface';\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\n\nclass Boot implements StateMachineInterface {\n    constructor(state: CpuInterface.State) {\n        this._state = state;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._pre1Step, 0xff);\n\n    @Immutable private _pre1Step = (): StateMachineInterface.Result => this._result.read(this._pre2Step, 0x0ff);\n\n    @Immutable private _pre2Step = (): StateMachineInterface.Result => this._result.read(this._stack1Step, 0x0100);\n\n    @Immutable private _stack1Step = (): StateMachineInterface.Result => this._result.read(this._stack2Step, 0x01ff);\n\n    @Immutable\n    private _stack2Step = (): StateMachineInterface.Result => {\n        this._state.s = 0xfd;\n        return this._result.read(this._stack3Step, 0x01fe);\n    };\n\n    @Immutable\n    private _stack3Step = (): StateMachineInterface.Result => this._result.read(this._readTargetLoStep, 0xfffc);\n\n    @Immutable\n    private _readTargetLoStep = (operand: number): StateMachineInterface.Result => {\n        this._targetAddress = operand;\n        return this._result.read(this._readTargetHiStep, 0xfffd);\n    };\n\n    @Immutable\n    private _readTargetHiStep = (operand: number): null => {\n        this._targetAddress |= operand << 8;\n        this._state.p = this._targetAddress;\n\n        return null;\n    };\n\n    private _targetAddress = 0;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n}\n\nexport const boot = (state: CpuInterface.State) => new Boot(state);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from '../StateMachineInterface';\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\n\nclass Interrupt implements StateMachineInterface {\n    constructor(state: CpuInterface.State, defaultVector: number, isBrk: boolean) {\n        this._state = state;\n        this._defaultVector = defaultVector;\n        this._isBrk = isBrk;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._dummyRead, this._state.p);\n\n    @Immutable\n    private _dummyRead = (): StateMachineInterface.Result => {\n        if (this._isBrk) {\n            this._state.p = (this._state.p + 1) & 0xffff;\n        }\n\n        return this._result.write(this._pushPch, 0x0100 + this._state.s, this._state.p >>> 8);\n    };\n\n    @Immutable\n    private _pushPch = (): StateMachineInterface.Result => {\n        this._state.s = (this._state.s - 1) & 0xff;\n\n        return this._result.write(this._pushPcl, 0x0100 + this._state.s, this._state.p & 0xff).poll(true);\n    };\n\n    @Immutable\n    private _pushPcl = (): StateMachineInterface.Result => {\n        this._state.s = (this._state.s - 1) & 0xff;\n        this._vector = this._state.nmi ? 0xfffa : this._defaultVector;\n\n        return this._result.write(\n            this._pushFlags,\n            0x0100 + this._state.s,\n            this._isBrk ? this._state.flags | CpuInterface.Flags.b : this._state.flags & ~CpuInterface.Flags.b\n        );\n    };\n\n    @Immutable\n    private _pushFlags = (): StateMachineInterface.Result => {\n        this._state.s = (this._state.s - 1) & 0xff;\n\n        return this._result.read(this._fetchPcl, this._vector);\n    };\n\n    @Immutable\n    private _fetchPcl = (value: number): StateMachineInterface.Result => {\n        this._state.flags |= CpuInterface.Flags.i;\n        this._state.p = value;\n\n        return this._result.read(this._fetchPch, ++this._vector);\n    };\n\n    @Immutable\n    private _fetchPch = (value: number): null => {\n        this._state.p = this._state.p | (value << 8);\n        this._state.nmi = this._state.irq = false;\n\n        return null;\n    };\n\n    private _vector = 0;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _defaultVector: number;\n    @Immutable private readonly _isBrk: boolean;\n}\n\nexport const brk = (state: CpuInterface.State) => new Interrupt(state, 0xfffe, true);\nexport const irq = (state: CpuInterface.State) => new Interrupt(state, 0xfffe, false);\nexport const nmi = (state: CpuInterface.State) => new Interrupt(state, 0xfffa, false);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nclass Instruction {\n    constructor(\n        public readonly operation: Instruction.Operation,\n        public readonly addressingMode: Instruction.AddressingMode,\n        public readonly effectiveAddressingMode = addressingMode\n    ) {}\n\n    getSize(): number {\n        switch (this.effectiveAddressingMode) {\n            case Instruction.AddressingMode.immediate:\n            case Instruction.AddressingMode.zeroPage:\n            case Instruction.AddressingMode.zeroPageX:\n            case Instruction.AddressingMode.zeroPageY:\n            case Instruction.AddressingMode.indexedIndirectX:\n            case Instruction.AddressingMode.indirectIndexedY:\n            case Instruction.AddressingMode.relative:\n                return 2;\n\n            case Instruction.AddressingMode.absolute:\n            case Instruction.AddressingMode.absoluteX:\n            case Instruction.AddressingMode.absoluteY:\n            case Instruction.AddressingMode.indirect:\n                return 3;\n\n            default:\n                return 1;\n        }\n    }\n}\n\nnamespace Instruction {\n    export const enum Operation {\n        adc,\n        and,\n        asl,\n        bcc,\n        bcs,\n        beq,\n        bit,\n        bmi,\n        bne,\n        bpl,\n        brk,\n        bvc,\n        bvs,\n        clc,\n        cld,\n        cli,\n        clv,\n        cmp,\n        cpx,\n        cpy,\n        dec,\n        dex,\n        dey,\n        eor,\n        inc,\n        inx,\n        iny,\n        jmp,\n        jsr,\n        lda,\n        ldx,\n        ldy,\n        lsr,\n        nop,\n        ora,\n        pha,\n        php,\n        pla,\n        plp,\n        rol,\n        ror,\n        rti,\n        rts,\n        sbc,\n        sec,\n        sed,\n        sei,\n        sta,\n        stx,\n        sty,\n        tax,\n        tay,\n        tsx,\n        txa,\n        txs,\n        tya,\n        // undocumented operations\n        dop,\n        top,\n        alr,\n        axs,\n        dcp,\n        lax,\n        arr,\n        slo,\n        aax,\n        lar,\n        isc,\n        aac,\n        atx,\n        rra,\n        rla,\n        invalid\n    }\n\n    export enum OperationMap {\n        adc,\n        and,\n        asl,\n        bcc,\n        bcs,\n        beq,\n        bit,\n        bmi,\n        bne,\n        bpl,\n        brk,\n        bvc,\n        bvs,\n        clc,\n        cld,\n        cli,\n        clv,\n        cmp,\n        cpx,\n        cpy,\n        dec,\n        dex,\n        dey,\n        eor,\n        inc,\n        inx,\n        iny,\n        jmp,\n        jsr,\n        lda,\n        ldx,\n        ldy,\n        lsr,\n        nop,\n        ora,\n        pha,\n        php,\n        pla,\n        plp,\n        rol,\n        ror,\n        rti,\n        rts,\n        sbc,\n        sec,\n        sed,\n        sei,\n        sta,\n        stx,\n        sty,\n        tax,\n        tay,\n        tsx,\n        txa,\n        txs,\n        tya,\n        // undocumented operations\n        dop,\n        top,\n        alr,\n        axs,\n        dcp,\n        lax,\n        arr,\n        slo,\n        aax,\n        lar,\n        isc,\n        aac,\n        atx,\n        rra,\n        rla,\n        invalid\n    }\n\n    export const enum AddressingMode {\n        implied,\n        immediate,\n        zeroPage,\n        absolute,\n        indirect,\n        relative,\n        zeroPageX,\n        absoluteX,\n        indexedIndirectX,\n        zeroPageY,\n        absoluteY,\n        indirectIndexedY,\n        invalid\n    }\n\n    export const opcodes = new Array<Instruction>(256);\n}\n\nexport { Instruction as default };\n\n// Opcodes init\n\nnamespace Instruction {\n    export namespace __init {\n        for (let i = 0; i < 256; i++) {\n            opcodes[i] = new Instruction(Operation.invalid, AddressingMode.invalid);\n        }\n\n        let operation: Operation, addressingMode: AddressingMode, opcode: number;\n\n        for (let i = 0; i < 8; i++) {\n            switch (i) {\n                case 0:\n                    operation = Operation.ora;\n                    break;\n                case 1:\n                    operation = Operation.and;\n                    break;\n                case 2:\n                    operation = Operation.eor;\n                    break;\n                case 3:\n                    operation = Operation.adc;\n                    break;\n                case 4:\n                    operation = Operation.sta;\n                    break;\n                case 5:\n                    operation = Operation.lda;\n                    break;\n                case 6:\n                    operation = Operation.cmp;\n                    break;\n                case 7:\n                    operation = Operation.sbc;\n                    break;\n            }\n            for (let j = 0; j < 8; j++) {\n                switch (j) {\n                    case 0:\n                        addressingMode = AddressingMode.indexedIndirectX;\n                        break;\n                    case 1:\n                        addressingMode = AddressingMode.zeroPage;\n                        break;\n                    case 2:\n                        addressingMode = AddressingMode.immediate;\n                        break;\n                    case 3:\n                        addressingMode = AddressingMode.absolute;\n                        break;\n                    case 4:\n                        addressingMode = AddressingMode.indirectIndexedY;\n                        break;\n                    case 5:\n                        addressingMode = AddressingMode.zeroPageX;\n                        break;\n                    case 6:\n                        addressingMode = AddressingMode.absoluteY;\n                        break;\n                    case 7:\n                        addressingMode = AddressingMode.absoluteX;\n                        break;\n                }\n\n                if (operation === Operation.sta && addressingMode === AddressingMode.immediate) {\n                    addressingMode = AddressingMode.invalid;\n                }\n\n                if (operation !== Operation.invalid && addressingMode !== AddressingMode.invalid) {\n                    opcode = (i << 5) | (j << 2) | 1;\n                    opcodes[opcode] = new Instruction(operation, addressingMode);\n                }\n            }\n        }\n\n        function set(\n            _opcode: number,\n            _operation: Operation,\n            _addressingMode: AddressingMode,\n            _effectiveAdressingMode?: AddressingMode\n        ): void {\n            if (opcodes[_opcode].operation !== Operation.invalid) {\n                throw new Error('entry for opcode ' + _opcode + ' already exists');\n            }\n\n            opcodes[_opcode] = new Instruction(_operation, _addressingMode, _effectiveAdressingMode);\n        }\n\n        set(0x06, Operation.asl, AddressingMode.zeroPage);\n        set(0x0a, Operation.asl, AddressingMode.implied);\n        set(0x0e, Operation.asl, AddressingMode.absolute);\n        set(0x16, Operation.asl, AddressingMode.zeroPageX);\n        set(0x1e, Operation.asl, AddressingMode.absoluteX);\n\n        set(0x26, Operation.rol, AddressingMode.zeroPage);\n        set(0x2a, Operation.rol, AddressingMode.implied);\n        set(0x2e, Operation.rol, AddressingMode.absolute);\n        set(0x36, Operation.rol, AddressingMode.zeroPageX);\n        set(0x3e, Operation.rol, AddressingMode.absoluteX);\n\n        set(0x46, Operation.lsr, AddressingMode.zeroPage);\n        set(0x4a, Operation.lsr, AddressingMode.implied);\n        set(0x4e, Operation.lsr, AddressingMode.absolute);\n        set(0x56, Operation.lsr, AddressingMode.zeroPageX);\n        set(0x5e, Operation.lsr, AddressingMode.absoluteX);\n\n        set(0x66, Operation.ror, AddressingMode.zeroPage);\n        set(0x6a, Operation.ror, AddressingMode.implied);\n        set(0x6e, Operation.ror, AddressingMode.absolute);\n        set(0x76, Operation.ror, AddressingMode.zeroPageX);\n        set(0x7e, Operation.ror, AddressingMode.absoluteX);\n\n        set(0x86, Operation.stx, AddressingMode.zeroPage);\n        set(0x8e, Operation.stx, AddressingMode.absolute);\n        set(0x96, Operation.stx, AddressingMode.zeroPageY);\n\n        set(0xa2, Operation.ldx, AddressingMode.immediate);\n        set(0xa6, Operation.ldx, AddressingMode.zeroPage);\n        set(0xae, Operation.ldx, AddressingMode.absolute);\n        set(0xb6, Operation.ldx, AddressingMode.zeroPageY);\n        set(0xbe, Operation.ldx, AddressingMode.absoluteY);\n\n        set(0xc6, Operation.dec, AddressingMode.zeroPage);\n        set(0xce, Operation.dec, AddressingMode.absolute);\n        set(0xd6, Operation.dec, AddressingMode.zeroPageX);\n        set(0xde, Operation.dec, AddressingMode.absoluteX);\n\n        set(0xe6, Operation.inc, AddressingMode.zeroPage);\n        set(0xee, Operation.inc, AddressingMode.absolute);\n        set(0xf6, Operation.inc, AddressingMode.zeroPageX);\n        set(0xfe, Operation.inc, AddressingMode.absoluteX);\n\n        set(0x24, Operation.bit, AddressingMode.zeroPage);\n        set(0x2c, Operation.bit, AddressingMode.absolute);\n\n        set(0x4c, Operation.jmp, AddressingMode.absolute);\n        set(0x6c, Operation.jmp, AddressingMode.indirect);\n\n        set(0x84, Operation.sty, AddressingMode.zeroPage);\n        set(0x8c, Operation.sty, AddressingMode.absolute);\n        set(0x94, Operation.sty, AddressingMode.zeroPageX);\n\n        set(0xa0, Operation.ldy, AddressingMode.immediate);\n        set(0xa4, Operation.ldy, AddressingMode.zeroPage);\n        set(0xac, Operation.ldy, AddressingMode.absolute);\n        set(0xb4, Operation.ldy, AddressingMode.zeroPageX);\n        set(0xbc, Operation.ldy, AddressingMode.absoluteX);\n\n        set(0xc0, Operation.cpy, AddressingMode.immediate);\n        set(0xc4, Operation.cpy, AddressingMode.zeroPage);\n        set(0xcc, Operation.cpy, AddressingMode.absolute);\n\n        set(0xe0, Operation.cpx, AddressingMode.immediate);\n        set(0xe4, Operation.cpx, AddressingMode.zeroPage);\n        set(0xec, Operation.cpx, AddressingMode.absolute);\n\n        set(0x10, Operation.bpl, AddressingMode.relative);\n        set(0x30, Operation.bmi, AddressingMode.relative);\n        set(0x50, Operation.bvc, AddressingMode.relative);\n        set(0x70, Operation.bvs, AddressingMode.relative);\n        set(0x90, Operation.bcc, AddressingMode.relative);\n        set(0xb0, Operation.bcs, AddressingMode.relative);\n        set(0xd0, Operation.bne, AddressingMode.relative);\n        set(0xf0, Operation.beq, AddressingMode.relative);\n\n        set(0x00, Operation.brk, AddressingMode.implied);\n        set(0x20, Operation.jsr, AddressingMode.implied, AddressingMode.absolute);\n        set(0x40, Operation.rti, AddressingMode.implied);\n        set(0x60, Operation.rts, AddressingMode.implied);\n        set(0x08, Operation.php, AddressingMode.implied);\n        set(0x28, Operation.plp, AddressingMode.implied);\n        set(0x48, Operation.pha, AddressingMode.implied);\n        set(0x68, Operation.pla, AddressingMode.implied);\n        set(0x88, Operation.dey, AddressingMode.implied);\n        set(0xa8, Operation.tay, AddressingMode.implied);\n        set(0xc8, Operation.iny, AddressingMode.implied);\n        set(0xe8, Operation.inx, AddressingMode.implied);\n        set(0x18, Operation.clc, AddressingMode.implied);\n        set(0x38, Operation.sec, AddressingMode.implied);\n        set(0x58, Operation.cli, AddressingMode.implied);\n        set(0x78, Operation.sei, AddressingMode.implied);\n        set(0x98, Operation.tya, AddressingMode.implied);\n        set(0xb8, Operation.clv, AddressingMode.implied);\n        set(0xd8, Operation.cld, AddressingMode.implied);\n        set(0xf8, Operation.sed, AddressingMode.implied);\n        set(0x8a, Operation.txa, AddressingMode.implied);\n        set(0x9a, Operation.txs, AddressingMode.implied);\n        set(0xaa, Operation.tax, AddressingMode.implied);\n        set(0xba, Operation.tsx, AddressingMode.implied);\n        set(0xca, Operation.dex, AddressingMode.implied);\n        set(0xea, Operation.nop, AddressingMode.implied);\n\n        // instructions for undocumented opcodes\n        set(0x1a, Operation.nop, AddressingMode.implied);\n        set(0x3a, Operation.nop, AddressingMode.implied);\n        set(0x5a, Operation.nop, AddressingMode.implied);\n        set(0x7a, Operation.nop, AddressingMode.implied);\n        set(0xda, Operation.nop, AddressingMode.implied);\n        set(0xfa, Operation.nop, AddressingMode.implied);\n\n        set(0x04, Operation.dop, AddressingMode.zeroPage);\n        set(0x14, Operation.dop, AddressingMode.zeroPageX);\n        set(0x34, Operation.dop, AddressingMode.zeroPageX);\n        set(0x44, Operation.dop, AddressingMode.zeroPage);\n        set(0x54, Operation.dop, AddressingMode.zeroPageX);\n        set(0x64, Operation.dop, AddressingMode.zeroPage);\n        set(0x74, Operation.dop, AddressingMode.zeroPageX);\n        set(0x80, Operation.dop, AddressingMode.immediate);\n        set(0x82, Operation.dop, AddressingMode.immediate);\n        set(0x89, Operation.dop, AddressingMode.immediate);\n        set(0xc2, Operation.dop, AddressingMode.immediate);\n        set(0xd4, Operation.dop, AddressingMode.zeroPageX);\n        set(0xe2, Operation.dop, AddressingMode.immediate);\n        set(0xf4, Operation.dop, AddressingMode.zeroPageX);\n\n        set(0x0c, Operation.top, AddressingMode.absolute);\n        set(0x1c, Operation.top, AddressingMode.absoluteX);\n        set(0x3c, Operation.top, AddressingMode.absoluteX);\n        set(0x5c, Operation.top, AddressingMode.absoluteX);\n        set(0x7c, Operation.top, AddressingMode.absoluteX);\n        set(0xdc, Operation.top, AddressingMode.absoluteX);\n        set(0xfc, Operation.top, AddressingMode.absoluteX);\n\n        set(0xeb, Operation.sbc, AddressingMode.immediate);\n\n        set(0x4b, Operation.alr, AddressingMode.immediate);\n\n        set(0xcb, Operation.axs, AddressingMode.immediate);\n\n        set(0xc7, Operation.dcp, AddressingMode.zeroPage);\n        set(0xd7, Operation.dcp, AddressingMode.zeroPageX);\n        set(0xcf, Operation.dcp, AddressingMode.absolute);\n        set(0xdf, Operation.dcp, AddressingMode.absoluteX);\n        set(0xdb, Operation.dcp, AddressingMode.absoluteY);\n        set(0xc3, Operation.dcp, AddressingMode.indexedIndirectX);\n        set(0xd3, Operation.dcp, AddressingMode.indirectIndexedY);\n\n        set(0xa7, Operation.lax, AddressingMode.zeroPage);\n        set(0xb7, Operation.lax, AddressingMode.zeroPageY);\n        set(0xaf, Operation.lax, AddressingMode.absolute);\n        set(0xbf, Operation.lax, AddressingMode.absoluteY);\n        set(0xa3, Operation.lax, AddressingMode.indexedIndirectX);\n        set(0xb3, Operation.lax, AddressingMode.indirectIndexedY);\n\n        set(0x6b, Operation.arr, AddressingMode.immediate);\n\n        set(0x07, Operation.slo, AddressingMode.zeroPage);\n        set(0x17, Operation.slo, AddressingMode.zeroPageX);\n        set(0x0f, Operation.slo, AddressingMode.absolute);\n        set(0x1f, Operation.slo, AddressingMode.absoluteX);\n        set(0x1b, Operation.slo, AddressingMode.absoluteY);\n        set(0x03, Operation.slo, AddressingMode.indexedIndirectX);\n        set(0x13, Operation.slo, AddressingMode.indirectIndexedY);\n\n        set(0x87, Operation.aax, AddressingMode.zeroPage);\n        set(0x97, Operation.aax, AddressingMode.zeroPageY);\n        set(0x83, Operation.aax, AddressingMode.indexedIndirectX);\n        set(0x8f, Operation.aax, AddressingMode.absolute);\n\n        set(0xbb, Operation.lar, AddressingMode.absoluteY);\n\n        set(0xe7, Operation.isc, AddressingMode.zeroPage);\n        set(0xf7, Operation.isc, AddressingMode.zeroPageX);\n        set(0xef, Operation.isc, AddressingMode.absolute);\n        set(0xff, Operation.isc, AddressingMode.absoluteX);\n        set(0xfb, Operation.isc, AddressingMode.absoluteY);\n        set(0xe3, Operation.isc, AddressingMode.indexedIndirectX);\n        set(0xf3, Operation.isc, AddressingMode.indirectIndexedY);\n\n        set(0x0b, Operation.aac, AddressingMode.immediate);\n        set(0x2b, Operation.aac, AddressingMode.immediate);\n\n        set(0xab, Operation.atx, AddressingMode.immediate);\n\n        set(0x67, Operation.rra, AddressingMode.zeroPage);\n        set(0x77, Operation.rra, AddressingMode.zeroPageX);\n        set(0x6f, Operation.rra, AddressingMode.absolute);\n        set(0x7f, Operation.rra, AddressingMode.absoluteX);\n        set(0x7b, Operation.rra, AddressingMode.absoluteY);\n        set(0x63, Operation.rra, AddressingMode.indexedIndirectX);\n        set(0x73, Operation.rra, AddressingMode.indirectIndexedY);\n\n        set(0x27, Operation.rla, AddressingMode.zeroPage);\n        set(0x37, Operation.rla, AddressingMode.zeroPageX);\n        set(0x2f, Operation.rla, AddressingMode.absolute);\n        set(0x3f, Operation.rla, AddressingMode.absoluteX);\n        set(0x3b, Operation.rla, AddressingMode.absoluteY);\n        set(0x23, Operation.rla, AddressingMode.indexedIndirectX);\n        set(0x33, Operation.rla, AddressingMode.indirectIndexedY);\n    }\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport StateMachineInterface from '../StateMachineInterface';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport NextStep from './NextStep';\n\nclass Absolute implements StateMachineInterface {\n    constructor(state: CpuInterface.State, next: NextStep = () => null) {\n        this._state = state;\n        this._next = next;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._fetchLo, this._state.p);\n\n    @Immutable\n    private _fetchLo = (value: number): StateMachineInterface.Result => {\n        this._operand = value;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._result.read(this._fetchHi, this._state.p);\n    };\n\n    @Immutable\n    private _fetchHi = (value: number): StateMachineInterface.Result | null => {\n        this._operand |= value << 8;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._next(this._operand, this._state);\n    };\n\n    private _operand = 0;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _next: NextStep;\n}\n\nexport const absolute = (state: CpuInterface.State, next: NextStep) => new Absolute(state, next);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport StateMachineInterface from '../StateMachineInterface';\n\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport NextStep from './NextStep';\n\nclass AbsoluteIndexed implements StateMachineInterface {\n    private constructor(\n        state: CpuInterface.State,\n        indexExtractor: AbsoluteIndexed.IndexExtractor,\n        next: NextStep = () => null,\n        writeOp = false\n    ) {\n        this._state = state;\n        this._indexExtractor = indexExtractor;\n        this._next = next;\n        this._writeOp = writeOp;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable\n    static absoluteX(state: CpuInterface.State, next: NextStep, writeOp: boolean): AbsoluteIndexed {\n        return new AbsoluteIndexed(state, s => s.x, next, writeOp);\n    }\n\n    @Immutable\n    static absoluteY(state: CpuInterface.State, next: NextStep, writeOp: boolean): AbsoluteIndexed {\n        return new AbsoluteIndexed(state, s => s.y, next, writeOp);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._fetchLo, this._state.p);\n\n    @Immutable\n    private _fetchLo = (value: number): StateMachineInterface.Result => {\n        this._operand = value;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._result.read(this._fetchHi, this._state.p);\n    };\n\n    @Immutable\n    private _fetchHi = (value: number): StateMachineInterface.Result | null => {\n        this._operand |= value << 8;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        const index = this._indexExtractor(this._state);\n        this._carry = (this._operand & 0xff) + index > 0xff;\n        this._operand = (this._operand & 0xff00) | ((this._operand + index) & 0xff);\n\n        return this._carry || this._writeOp\n            ? this._result.read(this._dereferenceAndCarry, this._operand)\n            : this._next(this._operand, this._state);\n    };\n\n    @Immutable\n    private _dereferenceAndCarry = (value: number): StateMachineInterface.Result | null => {\n        if (this._carry) {\n            this._operand = (this._operand + 0x0100) & 0xffff;\n        }\n\n        return this._next(this._operand, this._state);\n    };\n\n    private _operand = 0;\n    private _carry = false;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _indexExtractor: AbsoluteIndexed.IndexExtractor;\n    @Immutable private readonly _next: NextStep;\n    @Immutable private readonly _writeOp: boolean;\n}\n\nnamespace AbsoluteIndexed {\n    export interface IndexExtractor {\n        (s: CpuInterface.State): number;\n    }\n}\n\nexport const absoluteX = (state: CpuInterface.State, next: NextStep, writeOp: boolean) =>\n    AbsoluteIndexed.absoluteX(state, next, writeOp);\n\nexport const absoluteY = (state: CpuInterface.State, next: NextStep, writeOp: boolean) =>\n    AbsoluteIndexed.absoluteY(state, next, writeOp);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from '../StateMachineInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport NextStep from './NextStep';\nimport CpuInterface from '../../CpuInterface';\n\nclass Dereference implements StateMachineInterface<number> {\n    constructor(state: CpuInterface.State, next: NextStep = () => null) {\n        this._next = next;\n        this._state = state;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (operand: number): StateMachineInterface.Result => this._result.read(this._dereference, operand);\n\n    @Immutable\n    private _dereference = (value: number): StateMachineInterface.Result | null => this._next(value, this._state);\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _next: NextStep;\n}\n\nexport const dereference = (state: CpuInterface.State, next: NextStep) => new Dereference(state, next);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from '../../CpuInterface';\nimport StateMachineInterface from '../StateMachineInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport NextStep from './NextStep';\n\nclass Immediate implements StateMachineInterface {\n    constructor(state: CpuInterface.State, next: NextStep = () => null) {\n        this._state = state;\n        this._next = next;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._fetchOperand, this._state.p);\n\n    @Immutable\n    private _fetchOperand = (value: number): StateMachineInterface.Result | null => {\n        this._operand = value;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._next(this._operand, this._state);\n    };\n\n    private _operand = 0;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _next: NextStep;\n}\n\nexport const immediate = (state: CpuInterface.State, next: NextStep) => new Immediate(state, next);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport StateMachineInterface from '../StateMachineInterface';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport NextStep from './NextStep';\n\nclass IndexedIndirectX implements StateMachineInterface {\n    constructor(state: CpuInterface.State, next: NextStep = () => null) {\n        this._state = state;\n        this._next = next;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._fetchAddress, this._state.p);\n\n    @Immutable\n    private _fetchAddress = (value: number): StateMachineInterface.Result => {\n        this._address = value;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._result.read(this._addIndex, this._address);\n    };\n\n    @Immutable\n    private _addIndex = (value: number): StateMachineInterface.Result => {\n        this._address = (this._address + this._state.x) & 0xff;\n\n        return this._result.read(this._fetchLo, this._address);\n    };\n\n    @Immutable\n    private _fetchLo = (value: number): StateMachineInterface.Result => {\n        this._operand = value;\n        this._address = (this._address + 1) & 0xff;\n\n        return this._result.read(this._fetchHi, this._address);\n    };\n\n    @Immutable\n    private _fetchHi = (value: number): StateMachineInterface.Result | null => {\n        this._operand |= value << 8;\n\n        return this._next(this._operand, this._state);\n    };\n\n    private _operand = 0;\n    private _address = 0;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _next: NextStep;\n}\n\nexport const indexedIndirectX = (state: CpuInterface.State, next: NextStep) => new IndexedIndirectX(state, next);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport StateMachineInterface from '../StateMachineInterface';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport NextStep from './NextStep';\n\nclass IndexedIndirectY implements StateMachineInterface {\n    constructor(state: CpuInterface.State, next: NextStep = () => null, writeOp: boolean) {\n        this._state = state;\n        this._next = next;\n        this._writeOp = writeOp;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._fetchAddress, this._state.p);\n\n    @Immutable\n    private _fetchAddress = (value: number): StateMachineInterface.Result => {\n        this._address = value;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._result.read(this._fetchLo, this._address);\n    };\n\n    @Immutable\n    private _fetchLo = (value: number): StateMachineInterface.Result => {\n        this._operand = value;\n        this._address = (this._address + 1) & 0xff;\n\n        return this._result.read(this._fetchHi, this._address);\n    };\n\n    @Immutable\n    private _fetchHi = (value: number): StateMachineInterface.Result | null => {\n        this._operand |= value << 8;\n\n        this._carry = (this._operand & 0xff) + this._state.y > 0xff;\n        this._operand = (this._operand & 0xff00) | ((this._operand + this._state.y) & 0xff);\n\n        return this._carry || this._writeOp\n            ? this._result.read(this._dereferenceAndCarry, this._operand)\n            : this._next(this._operand, this._state);\n    };\n\n    @Immutable\n    private _dereferenceAndCarry = (value: number): StateMachineInterface.Result | null => {\n        if (this._carry) {\n            this._operand = (this._operand + 0x0100) & 0xffff;\n        }\n\n        return this._next(this._operand, this._state);\n    };\n\n    private _operand = 0;\n    private _address = 0;\n    private _carry = false;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _next: NextStep;\n    @Immutable private readonly _writeOp: boolean;\n}\n\nexport const indirectIndexedY = (state: CpuInterface.State, next: NextStep, writeOp: boolean) =>\n    new IndexedIndirectY(state, next, writeOp);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport StateMachineInterface from '../StateMachineInterface';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport NextStep from './NextStep';\n\nclass ZeroPage implements StateMachineInterface {\n    constructor(state: CpuInterface.State, next: NextStep = () => null) {\n        this._state = state;\n        this._next = next;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._fetchAddress, this._state.p);\n\n    @Immutable\n    private _fetchAddress = (value: number): StateMachineInterface.Result | null => {\n        this._operand = value;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._next(this._operand, this._state);\n    };\n\n    private _operand = 0;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _next: NextStep;\n}\n\nexport const zeroPage = (state: CpuInterface.State, next: NextStep) => new ZeroPage(state, next);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport StateMachineInterface from '../StateMachineInterface';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport NextStep from './NextStep';\n\nclass ZeroPageIndexed implements StateMachineInterface {\n    private constructor(state: CpuInterface.State, indexExtractor: ZeroPageIndexed.IndexExtractor, next: NextStep) {\n        this._state = state;\n        this._indexExtractor = indexExtractor;\n        this._next = next;\n\n        freezeImmutables(this);\n    }\n\n    static zeroPageX(state: CpuInterface.State, next: NextStep = () => null): ZeroPageIndexed {\n        return new ZeroPageIndexed(state, s => s.x, next);\n    }\n\n    static zeroPageY(state: CpuInterface.State, next: NextStep = () => null): ZeroPageIndexed {\n        return new ZeroPageIndexed(state, s => s.y, next);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._fetchAddress, this._state.p);\n\n    @Immutable\n    private _fetchAddress = (value: number): StateMachineInterface.Result => {\n        this._operand = value;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._result.read(this._addIndex, this._operand);\n    };\n\n    @Immutable\n    private _addIndex = (value: number): StateMachineInterface.Result | null => {\n        this._operand = (this._operand + this._indexExtractor(this._state)) & 0xff;\n\n        return this._next(this._operand, this._state);\n    };\n\n    private _operand = 0;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _next: NextStep;\n    @Immutable private readonly _indexExtractor: ZeroPageIndexed.IndexExtractor;\n}\n\nnamespace ZeroPageIndexed {\n    export interface IndexExtractor {\n        (s: CpuInterface.State): number;\n    }\n}\n\nexport const zeroPageX = (state: CpuInterface.State, next: NextStep) => ZeroPageIndexed.zeroPageX(state, next);\n\nexport const zeroPageY = (state: CpuInterface.State, next: NextStep) => ZeroPageIndexed.zeroPageY(state, next);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from '../StateMachineInterface';\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\n\nclass Branch implements StateMachineInterface {\n    constructor(state: CpuInterface.State, predicate: Branch.Predicate) {\n        this._state = state;\n        this._predicate = predicate;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable\n    reset = (): StateMachineInterface.Result => this._result.read(this._fetchTarget, this._state.p).poll(true);\n\n    @Immutable\n    private _fetchTarget = (value: number): StateMachineInterface.Result | null => {\n        this._operand = value;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._predicate(this._state.flags) ? this._result.read(this._firstDummyRead, this._state.p) : null;\n    };\n\n    @Immutable\n    private _firstDummyRead = (value: number): StateMachineInterface.Result | null => {\n        this._target = (this._state.p + (this._operand & 0x80 ? this._operand - 256 : this._operand)) & 0xffff;\n\n        if ((this._target & 0xff00) === (this._state.p & 0xff00)) {\n            this._state.p = this._target;\n            return null;\n        }\n\n        return this._result.read(this._secondDummyRead, (this._state.p & 0xff00) | (this._target & 0x00ff)).poll(true);\n    };\n\n    @Immutable\n    private _secondDummyRead = (value: number): null => {\n        this._state.p = this._target;\n        return null;\n    };\n\n    private _target = 0;\n    private _operand = 0;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _predicate: Branch.Predicate;\n}\n\nnamespace Branch {\n    export interface Predicate {\n        (flags: number): boolean;\n    }\n}\n\nexport const branch = (state: CpuInterface.State, predicate: Branch.Predicate) => new Branch(state, predicate);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from '../StateMachineInterface';\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\n\nclass Jsr implements StateMachineInterface {\n    constructor(state: CpuInterface.State) {\n        this._state = state;\n\n        freezeImmutables(this);\n    }\n\n    reset = (): StateMachineInterface.Result => this._result.read(this._fetchPcl, this._state.p);\n\n    @Immutable\n    private _fetchPcl = (value: number): StateMachineInterface.Result => {\n        this._addressLo = value;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._result.read(this._dummyStackRead, 0x0100 + this._state.s);\n    };\n\n    @Immutable\n    private _dummyStackRead = (): StateMachineInterface.Result =>\n        this._result.write(this._pushPch, 0x0100 + this._state.s, this._state.p >>> 8);\n\n    @Immutable\n    private _pushPch = (): StateMachineInterface.Result => {\n        this._state.s = (this._state.s - 1) & 0xff;\n\n        return this._result.write(this._pushPcl, 0x0100 + this._state.s, this._state.p & 0xff);\n    };\n\n    @Immutable\n    private _pushPcl = (): StateMachineInterface.Result => {\n        this._state.s = (this._state.s - 1) & 0xff;\n\n        return this._result.read(this._fetchPch, this._state.p);\n    };\n\n    @Immutable\n    private _fetchPch = (value: number): null => {\n        this._state.p = this._addressLo | (value << 8);\n\n        return null;\n    };\n\n    private _addressLo = 0;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n}\n\nexport const jsr = (state: CpuInterface.State) => new Jsr(state);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from '../StateMachineInterface';\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\n\nclass ReadModifyWrite implements StateMachineInterface<number> {\n    constructor(state: CpuInterface.State, operation: ReadModifyWrite.Operation) {\n        this._state = state;\n        this._operation = operation;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable\n    reset = (address: number): StateMachineInterface.Result => {\n        this._address = address;\n\n        return this._result.read(this._read, address);\n    };\n\n    @Immutable\n    private _read = (value: number): StateMachineInterface.Result => {\n        this._operand = value;\n\n        return this._result.write(this._dummyWrite, this._address, this._operand);\n    };\n\n    @Immutable\n    private _dummyWrite = (value: number): StateMachineInterface.Result =>\n        this._result.write(this._write, this._address, this._operation(this._operand, this._state));\n\n    @Immutable private _write = (): null => null;\n\n    private _address: number;\n    private _operand: number;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _operation: ReadModifyWrite.Operation;\n}\n\nnamespace ReadModifyWrite {\n    export interface Operation {\n        (o: number, s: CpuInterface.State): number;\n    }\n}\n\nexport const readModifyWrite = (state: CpuInterface.State, operation: ReadModifyWrite.Operation) =>\n    new ReadModifyWrite(state, operation);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from '../StateMachineInterface';\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\n\nclass Rts implements StateMachineInterface {\n    constructor(state: CpuInterface.State) {\n        this._state = state;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._dummyOperandRead, this._state.p);\n\n    @Immutable\n    private _dummyOperandRead = (): StateMachineInterface.Result =>\n        this._result.read(this._dummyStackRead, 0x0100 + this._state.s);\n\n    @Immutable\n    private _dummyStackRead = (): StateMachineInterface.Result => {\n        this._state.s = (this._state.s + 1) & 0xff;\n\n        return this._result.read(this._popPcl, 0x0100 + this._state.s);\n    };\n\n    @Immutable\n    private _popPcl = (value: number): StateMachineInterface.Result => {\n        this._state.p = (this._state.p & 0xff00) | value;\n        this._state.s = (this._state.s + 1) & 0xff;\n\n        return this._result.read(this._popPch, 0x0100 + this._state.s);\n    };\n\n    @Immutable\n    private _popPch = (value: number): StateMachineInterface.Result => {\n        this._state.p = (this._state.p & 0xff) | (value << 8);\n\n        return this._result.read(this._incrementP, this._state.p);\n    };\n\n    @Immutable\n    private _incrementP = (): null => {\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return null;\n    };\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n}\n\nexport const rts = (state: CpuInterface.State) => new Rts(state);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from '../StateMachineInterface';\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\n\nclass NullaryOneCycle implements StateMachineInterface<number> {\n    constructor(state: CpuInterface.State, operation: UnaryOneCycle.Operation) {\n        this._state = state;\n        this._operation = operation;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = () => this._result.read(this._executeOperation, this._state.p).poll(true);\n\n    @Immutable\n    private _executeOperation = (): null => {\n        this._operation(this._state);\n\n        return null;\n    };\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _operation: UnaryOneCycle.Operation;\n}\n\nnamespace UnaryOneCycle {\n    export interface Operation {\n        (s: CpuInterface.State): void;\n    }\n}\n\nexport const nullaryOneCycle = (state: CpuInterface.State, operation: UnaryOneCycle.Operation) =>\n    new NullaryOneCycle(state, operation);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport StateMachineInterface from '../StateMachineInterface';\nimport ResultImpl from '../ResultImpl';\nimport CpuInterface from '../../CpuInterface';\n\nclass Pull implements StateMachineInterface {\n    constructor(state: CpuInterface.State, operation: Pull.Operation) {\n        this._state = state;\n        this._operation = operation;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._dummyRead, this._state.p).poll(true);\n\n    @Immutable\n    private _dummyRead = (): StateMachineInterface.Result =>\n        this._result.read(this._incrementS, 0x0100 + this._state.s);\n\n    @Immutable\n    private _incrementS = (): StateMachineInterface.Result => {\n        this._state.s = (this._state.s + 1) & 0xff;\n\n        return this._result.read(this._pull, 0x0100 + this._state.s);\n    };\n\n    @Immutable private _pull = (value: number): null => (this._operation(this._state, value), null);\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _operation: Pull.Operation;\n}\n\nnamespace Pull {\n    export interface Operation {\n        (state: CpuInterface.State, ooperand: number): void;\n    }\n}\n\nexport const pull = (state: CpuInterface.State, operation: Pull.Operation) => new Pull(state, operation);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport CpuInterface from '../../CpuInterface';\nimport StateMachineInterface from '../StateMachineInterface';\nimport ResultImpl from '../ResultImpl';\n\nclass Push implements StateMachineInterface {\n    constructor(state: CpuInterface.State, operation: Push.Operation) {\n        this._state = state;\n        this._operation = operation;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._dummyRead, this._state.p);\n\n    @Immutable\n    private _dummyRead = (): StateMachineInterface.Result =>\n        this._result.write(this._push, 0x0100 + this._state.s, this._operation(this._state));\n\n    @Immutable\n    private _push = (): null => {\n        this._state.s = (this._state.s - 1) & 0xff;\n\n        return null;\n    };\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _operation: Push.Operation;\n}\n\nnamespace Push {\n    export interface Operation {\n        (s: CpuInterface.State): number;\n    }\n}\n\nexport const push = (state: CpuInterface.State, operation: Push.Operation) => new Push(state, operation);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from '../StateMachineInterface';\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\n\nclass Rti implements StateMachineInterface {\n    constructor(state: CpuInterface.State) {\n        this._state = state;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._dummyOperandRead, this._state.p);\n\n    @Immutable\n    private _dummyOperandRead = (): StateMachineInterface.Result =>\n        this._result.read(this._dummyStackRead, 0x0100 + this._state.s);\n\n    @Immutable\n    private _dummyStackRead = (): StateMachineInterface.Result => {\n        this._state.s = (this._state.s + 1) & 0xff;\n\n        return this._result.read(this._popP, 0x0100 + this._state.s);\n    };\n\n    @Immutable\n    private _popP = (value: number): StateMachineInterface.Result => {\n        this._state.flags = (value | CpuInterface.Flags.e) & ~CpuInterface.Flags.b;\n        this._state.s = (this._state.s + 1) & 0xff;\n\n        return this._result.read(this._popPcl, 0x0100 + this._state.s);\n    };\n\n    @Immutable\n    private _popPcl = (value: number): StateMachineInterface.Result => {\n        this._state.p = (this._state.p & 0xff00) | value;\n        this._state.s = (this._state.s + 1) & 0xff;\n\n        return this._result.read(this._popPch, 0x0100 + this._state.s);\n    };\n\n    @Immutable\n    private _popPch = (value: number): null => {\n        this._state.p = (this._state.p & 0xff) | (value << 8);\n\n        return null;\n    };\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n}\n\nexport const rti = (state: CpuInterface.State) => new Rti(state);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport StateMachineInterface from '../StateMachineInterface';\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\n\nclass Write implements StateMachineInterface<number> {\n    constructor(state: CpuInterface.State, operation: Write.Operation) {\n        this._state = state;\n        this._operation = operation;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable\n    reset = (operand: number): StateMachineInterface.Result =>\n        this._result.write(() => null, operand, this._operation(this._state));\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _operation: Write.Operation;\n}\n\nnamespace Write {\n    export interface Operation {\n        (s: CpuInterface.State): number;\n    }\n}\n\nexport const write = (state: CpuInterface.State, operation: Write.Operation) => new Write(state, operation);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from '../CpuInterface';\n\nfunction setFlagsNZ(operand: number, state: CpuInterface.State): void {\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z)) |\n        (operand & 0x80) |\n        (operand ? 0 : CpuInterface.Flags.z);\n}\n\nexport function genRmw(operand: number, state: CpuInterface.State, operation: (x: number) => number): number {\n    const result = operation(operand);\n    setFlagsNZ(result, state);\n\n    return result;\n}\n\nexport function genNullary(state: CpuInterface.State, operation: (state: CpuInterface.State) => number): void {\n    setFlagsNZ(operation(state), state);\n}\n\nexport function genUnary(\n    operand: number,\n    state: CpuInterface.State,\n    operation: (operand: number, state: CpuInterface.State) => number\n): null {\n    setFlagsNZ(operation(operand, state), state);\n\n    return null;\n}\n\nexport function adc(operand: number, state: CpuInterface.State): null {\n    if (state.flags & CpuInterface.Flags.d) {\n        const d0 = (operand & 0x0f) + (state.a & 0x0f) + (state.flags & CpuInterface.Flags.c),\n            d1 = (operand >>> 4) + (state.a >>> 4) + (d0 > 9 ? 1 : 0);\n\n        state.a = d0 % 10 | (d1 % 10 << 4);\n\n        state.flags =\n            (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n            (state.a & 0x80) | // negative\n            (state.a ? 0 : CpuInterface.Flags.z) | // zero\n            (d1 > 9 ? CpuInterface.Flags.c : 0); // carry\n    } else {\n        const sum = state.a + operand + (state.flags & CpuInterface.Flags.c),\n            result = sum & 0xff;\n\n        state.flags =\n            (state.flags &\n                ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c | CpuInterface.Flags.v)) |\n            (result & 0x80) | // negative\n            (result ? 0 : CpuInterface.Flags.z) | // zero\n            (sum >>> 8) | // carry\n            ((~(operand ^ state.a) & (result ^ operand) & 0x80) >>> 1); // overflow\n\n        state.a = result;\n    }\n\n    return null;\n}\n\nexport function aslImmediate(state: CpuInterface.State): void {\n    const old = state.a;\n    state.a = (state.a << 1) & 0xff;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.a & 0x80) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (old >>> 7);\n}\n\nexport function aslRmw(operand: number, state: CpuInterface.State): number {\n    const result = (operand << 1) & 0xff;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (result & 0x80) |\n        (result ? 0 : CpuInterface.Flags.z) |\n        (operand >>> 7);\n\n    return result;\n}\n\nexport function bit(operand: number, state: CpuInterface.State): null {\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.v | CpuInterface.Flags.z)) |\n        (operand & (CpuInterface.Flags.n | CpuInterface.Flags.v)) |\n        (operand & state.a ? 0 : CpuInterface.Flags.z);\n\n    return null;\n}\n\nexport function cmp(\n    operand: number,\n    state: CpuInterface.State,\n    getRegister: (state: CpuInterface.State) => number\n): void {\n    const diff = getRegister(state) + (~operand & 0xff) + 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (diff & 0x80) |\n        (diff & 0xff ? 0 : CpuInterface.Flags.z) |\n        (diff >>> 8);\n}\n\nexport function sbc(operand: number, state: CpuInterface.State): null {\n    if (state.flags & CpuInterface.Flags.d) {\n        const d0 = (state.a & 0x0f) - (operand & 0x0f) - (~state.flags & CpuInterface.Flags.c),\n            d1 = (state.a >>> 4) - (operand >>> 4) - (d0 < 0 ? 1 : 0);\n\n        state.a = (d0 < 0 ? 10 + d0 : d0) | ((d1 < 0 ? 10 + d1 : d1) << 4);\n\n        state.flags =\n            (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n            (state.a & 0x80) | // negative\n            (state.a ? 0 : CpuInterface.Flags.z) | // zero\n            (d1 < 0 ? 0 : CpuInterface.Flags.c); // carry / borrow\n    } else {\n        operand = ~operand & 0xff;\n\n        const sum = state.a + operand + (state.flags & CpuInterface.Flags.c),\n            result = sum & 0xff;\n\n        state.flags =\n            (state.flags &\n                ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c | CpuInterface.Flags.v)) |\n            (result & 0x80) | // negative\n            (result ? 0 : CpuInterface.Flags.z) | // zero\n            (sum >>> 8) | // carry / borrow\n            ((~(operand ^ state.a) & (result ^ operand) & 0x80) >>> 1); // overflow\n\n        state.a = result;\n    }\n\n    return null;\n}\n\nexport function lsrImmediate(state: CpuInterface.State): void {\n    const old = state.a;\n    state.a = state.a >>> 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.a & 0x80) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (old & CpuInterface.Flags.c);\n}\n\nexport function lsrRmw(operand: number, state: CpuInterface.State): number {\n    const result = operand >>> 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (result & 0x80) |\n        (result ? 0 : CpuInterface.Flags.z) |\n        (operand & CpuInterface.Flags.c);\n\n    return result;\n}\n\nexport function rolImmediate(state: CpuInterface.State): void {\n    const old = state.a;\n    state.a = ((state.a << 1) & 0xff) | (state.flags & CpuInterface.Flags.c);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.a & 0x80) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (old >>> 7);\n}\n\nexport function rolRmw(operand: number, state: CpuInterface.State): number {\n    const result = ((operand << 1) & 0xff) | (state.flags & CpuInterface.Flags.c);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (result & 0x80) |\n        (result ? 0 : CpuInterface.Flags.z) |\n        (operand >>> 7);\n\n    return result;\n}\n\nexport function rorImmediate(state: CpuInterface.State): void {\n    const old = state.a;\n    state.a = (state.a >>> 1) | ((state.flags & CpuInterface.Flags.c) << 7);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.a & 0x80) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (old & CpuInterface.Flags.c);\n}\n\nexport function rorRmw(operand: number, state: CpuInterface.State): number {\n    const result = (operand >>> 1) | ((state.flags & CpuInterface.Flags.c) << 7);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (result & 0x80) |\n        (result ? 0 : CpuInterface.Flags.z) |\n        (operand & CpuInterface.Flags.c);\n\n    return result;\n}\n\n// Undocumented opcodes\n\nexport function arr(operand: number, state: CpuInterface.State): void {\n    state.a = ((state.a & operand) >>> 1) | (state.flags & CpuInterface.Flags.c ? 0x80 : 0);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.c | CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.v)) |\n        ((state.a & 0x40) >>> 6) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (state.a & 0x80) |\n        ((state.a & 0x40) ^ ((state.a & 0x20) << 1));\n}\n\nexport function alr(operand: number, state: CpuInterface.State): null {\n    const i = state.a & operand;\n    state.a = i >>> 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.a & 0x80) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (i & CpuInterface.Flags.c);\n\n    return null;\n}\n\nexport function dcp(operand: number, state: CpuInterface.State): number {\n    const result = (operand + 0xff) & 0xff;\n    const diff = state.a + (~result & 0xff) + 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (diff & 0x80) |\n        (diff & 0xff ? 0 : CpuInterface.Flags.z) |\n        (diff >>> 8);\n\n    return result;\n}\n\nexport function axs(operand: number, state: CpuInterface.State): null {\n    const value = (state.a & state.x) + (~operand & 0xff) + 1;\n\n    state.x = value & 0xff;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.x & 0x80) |\n        (state.x & 0xff ? 0 : CpuInterface.Flags.z) |\n        (value >>> 8);\n\n    return null;\n}\n\nexport function rra(operand: number, state: CpuInterface.State): number {\n    const result = (operand >>> 1) | ((state.flags & CpuInterface.Flags.c) << 7);\n\n    state.flags = (state.flags & ~CpuInterface.Flags.c) | (operand & CpuInterface.Flags.c);\n\n    adc(result, state);\n\n    return result;\n}\n\nexport function rla(operand: number, state: CpuInterface.State): number {\n    const result = ((operand << 1) & 0xff) | (state.flags & CpuInterface.Flags.c);\n\n    state.flags = (state.flags & ~CpuInterface.Flags.c) | (operand >>> 7);\n\n    setFlagsNZ((state.a &= result), state);\n\n    return result;\n}\n\nexport function slo(operand: number, state: CpuInterface.State): number {\n    state.flags = (state.flags & ~CpuInterface.Flags.c) | (operand >>> 7);\n    const result = (operand << 1) & 0xff;\n\n    state.a = state.a | result;\n    setFlagsNZ(state.a, state);\n\n    return result;\n}\n\nexport function aax(state: CpuInterface.State): number {\n    const result = state.a & state.x;\n    setFlagsNZ(result, state);\n\n    return result;\n}\n\nexport function isc(operand: number, state: CpuInterface.State): number {\n    const result = (operand + 1) & 0xff;\n\n    sbc(result, state);\n\n    return result;\n}\n\nexport function aac(operand: number, state: CpuInterface.State): null {\n    state.a &= operand;\n    setFlagsNZ(state.a, state);\n    state.flags = (state.flags & ~CpuInterface.Flags.c) | ((state.a & 0x80) >>> 7);\n\n    return null;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from '../../CpuInterface';\nimport ResultImpl from '../ResultImpl';\nimport StateMachineInterface from '../StateMachineInterface';\nimport { freezeImmutables, Immutable } from '../../../../tools/decorators';\nimport NextStep from './NextStep';\n\nclass Indirect implements StateMachineInterface {\n    constructor(state: CpuInterface.State, next: NextStep = () => null) {\n        this._state = state;\n        this._next = next;\n\n        freezeImmutables(this);\n    }\n\n    @Immutable reset = (): StateMachineInterface.Result => this._result.read(this._fetchAddressLo, this._state.p);\n\n    @Immutable\n    private _fetchAddressLo = (value: number): StateMachineInterface.Result => {\n        this._address = value;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._result.read(this._fetchAddressHi, this._state.p);\n    };\n\n    @Immutable\n    private _fetchAddressHi = (value: number): StateMachineInterface.Result => {\n        this._address |= value << 8;\n        this._state.p = (this._state.p + 1) & 0xffff;\n\n        return this._result.read(this._fetchLo, this._address);\n    };\n\n    @Immutable\n    private _fetchLo = (value: number): StateMachineInterface.Result => {\n        this._operand = value;\n\n        if ((this._address & 0xff) === 0xff) {\n            this._address &= 0xff00;\n        } else {\n            this._address = (this._address + 1) & 0xffff;\n        }\n\n        return this._result.read(this._fetchHi, this._address);\n    };\n\n    @Immutable\n    private _fetchHi = (value: number): StateMachineInterface.Result | null => {\n        this._operand |= value << 8;\n\n        return this._next(this._operand, this._state);\n    };\n\n    private _operand = 0;\n    private _address = 0;\n\n    @Immutable private readonly _result = new ResultImpl();\n\n    @Immutable private readonly _state: CpuInterface.State;\n    @Immutable private readonly _next: NextStep;\n}\n\nexport const indirect = (state: CpuInterface.State, next: NextStep) => new Indirect(state, next);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from '../CpuInterface';\nimport StateMachineInterface from './StateMachineInterface';\nimport Instruction from '../Instruction';\nimport {\n    immediate,\n    dereference,\n    zeroPage,\n    absolute,\n    zeroPageX,\n    zeroPageY,\n    absoluteX,\n    absoluteY,\n    indexedIndirectX,\n    indirectIndexedY\n} from './addressing';\nimport { nullaryOneCycle, readModifyWrite, jsr, push, pull, rti, rts, write, branch } from './instruction';\nimport * as ops from './ops';\nimport { indirect } from './addressing/indirect';\nimport NextStep from './addressing/NextStep';\nimport { brk } from './vector';\n\nclass Compiler {\n    constructor(private readonly _state: CpuInterface.State) {}\n\n    compile(op: number): StateMachineInterface | null {\n        const instruction = Instruction.opcodes[op];\n\n        switch (instruction.operation) {\n            case Instruction.Operation.adc:\n                return this._createAddressing(instruction.addressingMode, ops.adc, {\n                    deref: true\n                });\n\n            case Instruction.Operation.and:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => ops.genUnary(o, s, (operand, state) => (state.a = state.a & operand)),\n                    {\n                        deref: true\n                    }\n                );\n\n            case Instruction.Operation.asl:\n                return instruction.addressingMode === Instruction.AddressingMode.implied\n                    ? nullaryOneCycle(this._state, ops.aslImmediate)\n                    : this._createAddressing(\n                          instruction.addressingMode,\n                          readModifyWrite(this._state, ops.aslRmw).reset,\n                          { writeOp: true }\n                      );\n\n            case Instruction.Operation.bit:\n                return this._createAddressing(instruction.addressingMode, ops.bit, {\n                    deref: true\n                });\n\n            case Instruction.Operation.brk:\n                return brk(this._state);\n\n            case Instruction.Operation.cmp:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => (ops.cmp(o, s, state => state.a), null),\n                    {\n                        deref: true\n                    }\n                );\n\n            case Instruction.Operation.cpx:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => (ops.cmp(o, s, state => state.x), null),\n                    {\n                        deref: true\n                    }\n                );\n\n            case Instruction.Operation.cpy:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => (ops.cmp(o, s, state => state.y), null),\n                    {\n                        deref: true\n                    }\n                );\n\n            case Instruction.Operation.dec:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    readModifyWrite(this._state, (s, o) => ops.genRmw(s, o, x => (x - 1) & 0xff)).reset,\n                    {\n                        writeOp: true\n                    }\n                );\n\n            case Instruction.Operation.dex:\n                return nullaryOneCycle(this._state, s => ops.genNullary(s, state => (state.x = (state.x - 1) & 0xff)));\n\n            case Instruction.Operation.dey:\n                return nullaryOneCycle(this._state, s => ops.genNullary(s, state => (state.y = (state.y - 1) & 0xff)));\n\n            case Instruction.Operation.inc:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    readModifyWrite(this._state, (s, o) => ops.genRmw(s, o, x => (x + 1) & 0xff)).reset,\n                    {\n                        writeOp: true\n                    }\n                );\n\n            case Instruction.Operation.inx:\n                return nullaryOneCycle(this._state, s => ops.genNullary(s, state => (state.x = (state.x + 1) & 0xff)));\n\n            case Instruction.Operation.iny:\n                return nullaryOneCycle(this._state, s => ops.genNullary(s, state => (state.y = (state.y + 1) & 0xff)));\n\n            case Instruction.Operation.eor:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => ops.genUnary(o, s, (operand, state) => (state.a = state.a ^ operand)),\n                    {\n                        deref: true\n                    }\n                );\n\n            case Instruction.Operation.jmp:\n                return this._createAddressing(instruction.addressingMode, (o, s) => ((s.p = o), null));\n\n            case Instruction.Operation.jsr:\n                return jsr(this._state);\n\n            case Instruction.Operation.lda:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => ops.genUnary(o, s, (operand, state) => (state.a = operand)),\n                    {\n                        deref: true\n                    }\n                );\n\n            case Instruction.Operation.ldx:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => ops.genUnary(o, s, (operand, state) => (state.x = operand)),\n                    {\n                        deref: true\n                    }\n                );\n\n            case Instruction.Operation.ldy:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => ops.genUnary(o, s, (operand, state) => (state.y = operand)),\n                    {\n                        deref: true\n                    }\n                );\n\n            case Instruction.Operation.lsr:\n                return instruction.addressingMode === Instruction.AddressingMode.implied\n                    ? nullaryOneCycle(this._state, ops.lsrImmediate)\n                    : this._createAddressing(\n                          instruction.addressingMode,\n                          readModifyWrite(this._state, ops.lsrRmw).reset,\n                          { writeOp: true }\n                      );\n\n            case Instruction.Operation.nop:\n                return nullaryOneCycle(this._state, () => undefined);\n\n            case Instruction.Operation.ora:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => ops.genUnary(o, s, (operand, state) => (state.a |= operand)),\n                    { deref: true }\n                );\n\n            case Instruction.Operation.pha:\n                return push(this._state, s => s.a);\n\n            case Instruction.Operation.php:\n                return push(this._state, s => s.flags | CpuInterface.Flags.b);\n\n            case Instruction.Operation.pla:\n                return pull(this._state, (s, o) => ops.genNullary(s, state => (state.a = o)));\n\n            case Instruction.Operation.plp:\n                return pull(this._state, (s, o) => (s.flags = (o | CpuInterface.Flags.e) & ~CpuInterface.Flags.b));\n\n            case Instruction.Operation.rol:\n                return instruction.addressingMode === Instruction.AddressingMode.implied\n                    ? nullaryOneCycle(this._state, ops.rolImmediate)\n                    : this._createAddressing(\n                          instruction.addressingMode,\n                          readModifyWrite(this._state, ops.rolRmw).reset,\n                          { writeOp: true }\n                      );\n\n            case Instruction.Operation.ror:\n                return instruction.addressingMode === Instruction.AddressingMode.implied\n                    ? nullaryOneCycle(this._state, ops.rorImmediate)\n                    : this._createAddressing(\n                          instruction.addressingMode,\n                          readModifyWrite(this._state, ops.rorRmw).reset,\n                          { writeOp: true }\n                      );\n\n            case Instruction.Operation.rti:\n                return rti(this._state);\n\n            case Instruction.Operation.rts:\n                return rts(this._state);\n\n            case Instruction.Operation.sbc:\n                return this._createAddressing(instruction.addressingMode, ops.sbc, {\n                    deref: true\n                });\n\n            case Instruction.Operation.stx:\n                return this._createAddressing(instruction.addressingMode, write(this._state, s => s.x).reset, {\n                    writeOp: true\n                });\n\n            case Instruction.Operation.sty:\n                return this._createAddressing(instruction.addressingMode, write(this._state, s => s.y).reset, {\n                    writeOp: true\n                });\n\n            case Instruction.Operation.tax:\n                return nullaryOneCycle(this._state, s => ops.genNullary(s, state => (state.x = state.a)));\n\n            case Instruction.Operation.tay:\n                return nullaryOneCycle(this._state, s => ops.genNullary(s, state => (state.y = state.a)));\n\n            case Instruction.Operation.tsx:\n                return nullaryOneCycle(this._state, s => ops.genNullary(s, state => (state.x = state.s)));\n\n            case Instruction.Operation.txa:\n                return nullaryOneCycle(this._state, s => ops.genNullary(s, state => (state.a = state.x)));\n\n            case Instruction.Operation.txs:\n                return nullaryOneCycle(this._state, s => (s.s = s.x));\n\n            case Instruction.Operation.tya:\n                return nullaryOneCycle(this._state, s => ops.genNullary(s, state => (state.a = state.y)));\n\n            // Bramches\n\n            case Instruction.Operation.bcc:\n                return branch(this._state, flags => (flags & CpuInterface.Flags.c) === 0);\n\n            case Instruction.Operation.bcs:\n                return branch(this._state, flags => (flags & CpuInterface.Flags.c) > 0);\n\n            case Instruction.Operation.bne:\n                return branch(this._state, flags => (flags & CpuInterface.Flags.z) === 0);\n\n            case Instruction.Operation.beq:\n                return branch(this._state, flags => (flags & CpuInterface.Flags.z) > 0);\n\n            case Instruction.Operation.bpl:\n                return branch(this._state, flags => (flags & CpuInterface.Flags.n) === 0);\n\n            case Instruction.Operation.bmi:\n                return branch(this._state, flags => (flags & CpuInterface.Flags.n) > 0);\n\n            case Instruction.Operation.bvc:\n                return branch(this._state, flags => (flags & CpuInterface.Flags.v) === 0);\n\n            case Instruction.Operation.bvs:\n                return branch(this._state, flags => (flags & CpuInterface.Flags.v) > 0);\n\n            // Flags\n\n            case Instruction.Operation.sec:\n                return nullaryOneCycle(this._state, s => (s.flags |= CpuInterface.Flags.c));\n\n            case Instruction.Operation.sed:\n                return nullaryOneCycle(this._state, s => (s.flags |= CpuInterface.Flags.d));\n\n            case Instruction.Operation.sei:\n                return nullaryOneCycle(this._state, s => (s.flags |= CpuInterface.Flags.i));\n\n            case Instruction.Operation.sta:\n                return this._createAddressing(instruction.addressingMode, write(this._state, s => s.a).reset, {\n                    writeOp: true\n                });\n\n            case Instruction.Operation.clc:\n                return nullaryOneCycle(this._state, s => (s.flags &= ~CpuInterface.Flags.c));\n\n            case Instruction.Operation.cld:\n                return nullaryOneCycle(this._state, s => (s.flags &= ~CpuInterface.Flags.d));\n\n            case Instruction.Operation.cli:\n                return nullaryOneCycle(this._state, s => (s.flags &= ~CpuInterface.Flags.i));\n\n            case Instruction.Operation.clv:\n                return nullaryOneCycle(this._state, s => (s.flags &= ~CpuInterface.Flags.v));\n\n            // Undocumented opcodes\n\n            case Instruction.Operation.dop:\n            case Instruction.Operation.top:\n                return this._createAddressing(instruction.addressingMode, () => null, { deref: true });\n\n            case Instruction.Operation.aac:\n                return this._createAddressing(instruction.addressingMode, ops.aac);\n\n            case Instruction.Operation.aax:\n                return this._createAddressing(instruction.addressingMode, write(this._state, ops.aax).reset, {\n                    writeOp: true\n                });\n\n            case Instruction.Operation.alr:\n                return this._createAddressing(instruction.addressingMode, ops.alr, {\n                    deref: true\n                });\n\n            case Instruction.Operation.arr:\n                return this._createAddressing(instruction.addressingMode, (o, s) => (ops.arr(o, s), null), {\n                    deref: true\n                });\n\n            case Instruction.Operation.axs:\n                return this._createAddressing(instruction.addressingMode, ops.axs, {\n                    deref: true\n                });\n\n            case Instruction.Operation.atx:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => ops.genUnary(o, s, (operand, state) => (state.x = state.a = state.a & operand)),\n                    {\n                        deref: true\n                    }\n                );\n\n            case Instruction.Operation.dcp:\n                return this._createAddressing(instruction.addressingMode, readModifyWrite(this._state, ops.dcp).reset, {\n                    writeOp: true\n                });\n\n            case Instruction.Operation.isc:\n                return this._createAddressing(instruction.addressingMode, readModifyWrite(this._state, ops.isc).reset, {\n                    writeOp: true\n                });\n\n            case Instruction.Operation.lax:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => ops.genUnary(o, s, (operand, state) => (state.a = state.x = operand)),\n                    {\n                        deref: true\n                    }\n                );\n\n            case Instruction.Operation.lar:\n                return this._createAddressing(\n                    instruction.addressingMode,\n                    (o, s) => ops.genUnary(o, s, (operand, state) => (state.s = state.x = state.a = state.s & operand)),\n                    { deref: true }\n                );\n\n            case Instruction.Operation.rla:\n                return this._createAddressing(instruction.addressingMode, readModifyWrite(this._state, ops.rla).reset, {\n                    writeOp: true\n                });\n\n            case Instruction.Operation.rra:\n                return this._createAddressing(instruction.addressingMode, readModifyWrite(this._state, ops.rra).reset, {\n                    writeOp: true\n                });\n\n            case Instruction.Operation.slo:\n                return this._createAddressing(instruction.addressingMode, readModifyWrite(this._state, ops.slo).reset, {\n                    writeOp: true\n                });\n\n            default:\n                return null;\n        }\n    }\n\n    private _createAddressing(\n        addressingMode: Instruction.AddressingMode,\n        next: NextStep,\n        { deref = false, writeOp = false } = {}\n    ): StateMachineInterface {\n        if (deref && addressingMode !== Instruction.AddressingMode.immediate) {\n            next = dereference(this._state, next).reset;\n        }\n\n        switch (addressingMode) {\n            case Instruction.AddressingMode.immediate:\n                return immediate(this._state, next);\n\n            case Instruction.AddressingMode.zeroPage:\n                return zeroPage(this._state, next);\n\n            case Instruction.AddressingMode.absolute:\n                return absolute(this._state, next);\n\n            case Instruction.AddressingMode.zeroPageX:\n                return zeroPageX(this._state, next);\n\n            case Instruction.AddressingMode.zeroPageY:\n                return zeroPageY(this._state, next);\n\n            case Instruction.AddressingMode.absoluteX:\n                return absoluteX(this._state, next, writeOp);\n\n            case Instruction.AddressingMode.absoluteY:\n                return absoluteY(this._state, next, writeOp);\n\n            case Instruction.AddressingMode.indexedIndirectX:\n                return indexedIndirectX(this._state, next);\n\n            case Instruction.AddressingMode.indirectIndexedY:\n                return indirectIndexedY(this._state, next, writeOp);\n\n            case Instruction.AddressingMode.indirect:\n                return indirect(this._state, next);\n\n            default:\n                throw new Error(`invalid addressing mode ${addressingMode}`);\n        }\n    }\n}\n\nexport default Compiler;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from './CpuInterface';\nimport StateMachineInterface from './statemachine/StateMachineInterface';\nimport BusInterface from '../bus/BusInterface';\nimport RngInterface from '../../tools/rng/GeneratorInterface';\nimport { boot, irq, nmi } from './statemachine/vector';\nimport Compiler from './statemachine/Compiler';\n\nclass StateMachineCpu implements CpuInterface {\n    constructor(private _bus: BusInterface, private _rng?: RngInterface) {\n        this._opBoot = boot(this.state);\n        this._opIrq = irq(this.state);\n        this._opNmi = nmi(this.state);\n\n        const compiler = new Compiler(this.state);\n        for (let op = 0; op < 256; op++) {\n            this._operations[op] = compiler.compile(op);\n        }\n\n        this.reset();\n    }\n\n    reset(): this {\n        this.state.a = this._rng ? this._rng.int(0xff) : 0;\n        this.state.x = this._rng ? this._rng.int(0xff) : 0;\n        this.state.y = this._rng ? this._rng.int(0xff) : 0;\n        this.state.s = 0xfd;\n        this.state.p = this._rng ? this._rng.int(0xffff) : 0;\n        this.state.flags =\n            (this._rng ? this._rng.int(0xff) : 0) | CpuInterface.Flags.i | CpuInterface.Flags.e | CpuInterface.Flags.b;\n        this.state.irq = false;\n        this.state.nmi = false;\n\n        this.executionState = CpuInterface.ExecutionState.boot;\n        this._interruptPending = false;\n        this._nmiPending = false;\n        this._halt = false;\n        this._lastResult = this._opBoot.reset(undefined);\n        this._lastInstructionPointer = 0;\n\n        return this;\n    }\n\n    setInterrupt(i: boolean): this {\n        this._interruptPending = i;\n\n        return this;\n    }\n\n    isInterrupt(): boolean {\n        return this._interruptPending;\n    }\n\n    nmi(): this {\n        this._nmiPending = true;\n\n        return this;\n    }\n\n    halt(): this {\n        this._halt = true;\n\n        return this;\n    }\n\n    resume(): this {\n        this._halt = false;\n\n        return this;\n    }\n\n    isHalt(): boolean {\n        return this._halt;\n    }\n\n    setInvalidInstructionCallback(callback: CpuInterface.InvalidInstructionCallbackInterface): this {\n        this._invalidInstructionCallback = callback;\n\n        return this;\n    }\n\n    getInvalidInstructionCallback(): CpuInterface.InvalidInstructionCallbackInterface {\n        return this._invalidInstructionCallback;\n    }\n\n    getLastInstructionPointer(): number {\n        return this._lastInstructionPointer;\n    }\n\n    cycle(): this {\n        if (this._halt && (!this._lastResult || this._lastResult.cycleType === StateMachineInterface.CycleType.read)) {\n            return this;\n        }\n\n        if (this.executionState === CpuInterface.ExecutionState.fetch) {\n            this._fetch();\n            return this;\n        }\n\n        let value: number;\n\n        switch (this._lastResult.cycleType) {\n            case StateMachineInterface.CycleType.read:\n                value = this._bus.read(this._lastResult.address);\n                break;\n\n            case StateMachineInterface.CycleType.write:\n                value = this._lastResult.value;\n                this._bus.write(this._lastResult.address, value);\n                break;\n\n            default:\n                throw new Error('invalid cycle type');\n        }\n\n        if (this._lastResult.pollInterrupts) {\n            this._pollInterrupts();\n\n            this._lastResult.pollInterrupts = false;\n            this._pollInterruptsAfterLastInstruction = false;\n        }\n\n        this._lastResult = this._lastResult.nextStep(value);\n        if (this._lastResult === null) {\n            this.executionState = CpuInterface.ExecutionState.fetch;\n        }\n\n        return this;\n    }\n\n    private _fetch(): void {\n        if (this._pollInterruptsAfterLastInstruction) {\n            this._pollInterrupts();\n        }\n\n        this._lastInstructionPointer = this.state.p;\n\n        let operation: StateMachineInterface;\n        const opcode = this._bus.read(this.state.p);\n\n        if (this.state.nmi) {\n            operation = this._opNmi;\n            this._pollInterruptsAfterLastInstruction = false;\n        } else if (this.state.irq) {\n            operation = this._opIrq;\n            this._pollInterruptsAfterLastInstruction = false;\n        } else {\n            operation = this._operations[opcode];\n            this.state.p = (this.state.p + 1) & 0xffff;\n            this._pollInterruptsAfterLastInstruction = true;\n        }\n\n        if (!operation) {\n            if (this._invalidInstructionCallback) {\n                this._invalidInstructionCallback(this);\n            }\n\n            return;\n        }\n\n        this.executionState = CpuInterface.ExecutionState.execute;\n\n        this._lastResult = operation.reset(undefined);\n    }\n\n    private _pollInterrupts(): void {\n        this.state.irq = false;\n\n        if (this._nmiPending) {\n            this.state.nmi = true;\n            this._nmiPending = false;\n\n            return;\n        }\n\n        if (this._interruptPending && !this.state.nmi && !(this.state.flags & CpuInterface.Flags.i)) {\n            this.state.irq = true;\n        }\n    }\n\n    executionState = CpuInterface.ExecutionState.boot;\n    state = new CpuInterface.State();\n\n    private _invalidInstructionCallback: CpuInterface.InvalidInstructionCallbackInterface = null;\n\n    private _lastResult: StateMachineInterface.Result;\n    private _interruptPending = false;\n    private _nmiPending = false;\n    private _halt = false;\n    private _pollInterruptsAfterLastInstruction = false;\n\n    private _lastInstructionPointer = 0;\n\n    private _opBoot: StateMachineInterface;\n    private _opNmi: StateMachineInterface;\n    private _opIrq: StateMachineInterface;\n    private _operations = new Array<StateMachineInterface>(255);\n}\n\nexport default StateMachineCpu;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuInterface from './CpuInterface';\nimport BusInterface from '../bus/BusInterface';\nimport Instruction from './Instruction';\n\nfunction restoreFlagsFromStack(state: CpuInterface.State, bus: BusInterface): void {\n    state.s = (state.s + 0x01) & 0xff;\n    state.flags = (bus.read(0x0100 + state.s) | CpuInterface.Flags.e) & ~CpuInterface.Flags.b;\n}\n\nfunction setFlagsNZ(state: CpuInterface.State, operand: number): void {\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z)) |\n        (operand & 0x80) |\n        (operand ? 0 : CpuInterface.Flags.z);\n}\n\nexport function opAdc(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    if (state.flags & CpuInterface.Flags.d) {\n        const d0 = (operand & 0x0f) + (state.a & 0x0f) + (state.flags & CpuInterface.Flags.c),\n            d1 = (operand >>> 4) + (state.a >>> 4) + (d0 > 9 ? 1 : 0);\n\n        state.a = d0 % 10 | (d1 % 10 << 4);\n\n        state.flags =\n            (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n            (state.a & 0x80) | // negative\n            (state.a ? 0 : CpuInterface.Flags.z) | // zero\n            (d1 > 9 ? CpuInterface.Flags.c : 0); // carry\n    } else {\n        const sum = state.a + operand + (state.flags & CpuInterface.Flags.c),\n            result = sum & 0xff;\n\n        state.flags =\n            (state.flags &\n                ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c | CpuInterface.Flags.v)) |\n            (result & 0x80) | // negative\n            (result ? 0 : CpuInterface.Flags.z) | // zero\n            (sum >>> 8) | // carry\n            ((~(operand ^ state.a) & (result ^ operand) & 0x80) >>> 1); // overflow\n\n        state.a = result;\n    }\n}\n\nexport function opAnd(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    state.a &= operand;\n    setFlagsNZ(state, state.a);\n}\n\nexport function opAslAcc(state: CpuInterface.State): void {\n    const old = state.a;\n    state.a = (state.a << 1) & 0xff;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.a & 0x80) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (old >>> 7);\n}\n\nexport function opAslMem(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const old = bus.read(operand),\n        value = (old << 1) & 0xff;\n    bus.write(operand, value);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (value & 0x80) |\n        (value ? 0 : CpuInterface.Flags.z) |\n        (old >>> 7);\n}\n\nexport function opBit(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.v | CpuInterface.Flags.z)) |\n        (operand & (CpuInterface.Flags.n | CpuInterface.Flags.v)) |\n        (operand & state.a ? 0 : CpuInterface.Flags.z);\n}\n\nexport function opBrk(state: CpuInterface.State, bus: BusInterface): void {\n    const nextOpAddr = (state.p + 1) & 0xffff;\n    let vector = 0xfffe;\n\n    if (state.nmi) {\n        vector = 0xfffa;\n        state.nmi = false;\n    }\n\n    state.nmi = state.irq = false;\n\n    bus.write(state.s + 0x0100, (nextOpAddr >>> 8) & 0xff);\n    state.s = (state.s + 0xff) & 0xff;\n    bus.write(state.s + 0x0100, nextOpAddr & 0xff);\n    state.s = (state.s + 0xff) & 0xff;\n\n    bus.write(state.s + 0x0100, state.flags | CpuInterface.Flags.b);\n    state.s = (state.s + 0xff) & 0xff;\n\n    state.flags |= CpuInterface.Flags.i;\n\n    state.p = bus.readWord(vector);\n}\n\nexport function opClc(state: CpuInterface.State): void {\n    state.flags &= ~CpuInterface.Flags.c;\n}\n\nexport function opCld(state: CpuInterface.State): void {\n    state.flags &= ~CpuInterface.Flags.d;\n}\n\nexport function opCli(state: CpuInterface.State): void {\n    state.flags &= ~CpuInterface.Flags.i;\n}\n\nexport function opClv(state: CpuInterface.State): void {\n    state.flags &= ~CpuInterface.Flags.v;\n}\n\nexport function opCmp(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const diff = state.a + (~operand & 0xff) + 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (diff & 0x80) |\n        (diff & 0xff ? 0 : CpuInterface.Flags.z) |\n        (diff >>> 8);\n}\n\nexport function opCpx(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const diff = state.x + (~operand & 0xff) + 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (diff & 0x80) |\n        (diff & 0xff ? 0 : CpuInterface.Flags.z) |\n        (diff >>> 8);\n}\n\nexport function opCpy(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const diff = state.y + (~operand & 0xff) + 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (diff & 0x80) |\n        (diff & 0xff ? 0 : CpuInterface.Flags.z) |\n        (diff >>> 8);\n}\n\nexport function opDec(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const value = (bus.read(operand) + 0xff) & 0xff;\n    bus.write(operand, value);\n    setFlagsNZ(state, value);\n}\n\nexport function opDex(state: CpuInterface.State): void {\n    state.x = (state.x + 0xff) & 0xff;\n    setFlagsNZ(state, state.x);\n}\n\nexport function opEor(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    state.a = state.a ^ operand;\n    setFlagsNZ(state, state.a);\n}\n\nexport function opDey(state: CpuInterface.State): void {\n    state.y = (state.y + 0xff) & 0xff;\n    setFlagsNZ(state, state.y);\n}\n\nexport function opInc(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const value = (bus.read(operand) + 1) & 0xff;\n    bus.write(operand, value);\n    setFlagsNZ(state, value);\n}\n\nexport function opInx(state: CpuInterface.State): void {\n    state.x = (state.x + 0x01) & 0xff;\n    setFlagsNZ(state, state.x);\n}\n\nexport function opIny(state: CpuInterface.State): void {\n    state.y = (state.y + 0x01) & 0xff;\n    setFlagsNZ(state, state.y);\n}\n\nexport function opJmp(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    state.p = operand;\n}\n\nexport function opJsr(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const returnPtr = (state.p + 1) & 0xffff,\n        addrLo = bus.read(state.p);\n\n    bus.read(0x0100 + state.s);\n    bus.write(0x0100 + state.s, returnPtr >>> 8);\n    state.s = (state.s + 0xff) & 0xff;\n    bus.write(0x0100 + state.s, returnPtr & 0xff);\n    state.s = (state.s + 0xff) & 0xff;\n\n    state.p = addrLo | (bus.read((state.p + 1) & 0xffff) << 8);\n}\n\nexport function opLda(\n    state: CpuInterface.State,\n    bus: BusInterface,\n    operand: number,\n    addressingMode: Instruction.AddressingMode\n): void {\n    state.a = addressingMode === Instruction.AddressingMode.immediate ? operand : bus.read(operand);\n    setFlagsNZ(state, state.a);\n}\n\nexport function opLdx(\n    state: CpuInterface.State,\n    bus: BusInterface,\n    operand: number,\n    addressingMode: Instruction.AddressingMode\n): void {\n    state.x = addressingMode === Instruction.AddressingMode.immediate ? operand : bus.read(operand);\n    setFlagsNZ(state, state.x);\n}\n\nexport function opLdy(\n    state: CpuInterface.State,\n    bus: BusInterface,\n    operand: number,\n    addressingMode: Instruction.AddressingMode\n): void {\n    state.y = addressingMode === Instruction.AddressingMode.immediate ? operand : bus.read(operand);\n    setFlagsNZ(state, state.y);\n}\n\nexport function opLsrAcc(state: CpuInterface.State): void {\n    const old = state.a;\n    state.a = state.a >>> 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.a & 0x80) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (old & CpuInterface.Flags.c);\n}\n\nexport function opLsrMem(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const old = bus.read(operand),\n        value = old >>> 1;\n    bus.write(operand, value);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (value & 0x80) |\n        (value ? 0 : CpuInterface.Flags.z) |\n        (old & CpuInterface.Flags.c);\n}\n\nexport function opNop(): void {}\n\nexport function opOra(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    state.a |= operand;\n    setFlagsNZ(state, state.a);\n}\n\nexport function opPhp(state: CpuInterface.State, bus: BusInterface): void {\n    bus.write(0x0100 + state.s, state.flags | CpuInterface.Flags.b);\n    state.s = (state.s + 0xff) & 0xff;\n}\n\nexport function opPlp(state: CpuInterface.State, bus: BusInterface): void {\n    restoreFlagsFromStack(state, bus);\n}\n\nexport function opPha(state: CpuInterface.State, bus: BusInterface): void {\n    bus.write(0x0100 + state.s, state.a);\n    state.s = (state.s + 0xff) & 0xff;\n}\n\nexport function opPla(state: CpuInterface.State, bus: BusInterface): void {\n    state.s = (state.s + 0x01) & 0xff;\n    state.a = bus.read(0x0100 + state.s);\n    setFlagsNZ(state, state.a);\n}\n\nexport function opRolAcc(state: CpuInterface.State): void {\n    const old = state.a;\n    state.a = ((state.a << 1) & 0xff) | (state.flags & CpuInterface.Flags.c);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.a & 0x80) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (old >>> 7);\n}\n\nexport function opRolMem(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const old = bus.read(operand),\n        value = ((old << 1) & 0xff) | (state.flags & CpuInterface.Flags.c);\n    bus.write(operand, value);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (value & 0x80) |\n        (value ? 0 : CpuInterface.Flags.z) |\n        (old >>> 7);\n}\n\nexport function opRorAcc(state: CpuInterface.State): void {\n    const old = state.a;\n    state.a = (state.a >>> 1) | ((state.flags & CpuInterface.Flags.c) << 7);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.a & 0x80) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (old & CpuInterface.Flags.c);\n}\n\nexport function opRorMem(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const old = bus.read(operand),\n        value = (old >>> 1) | ((state.flags & CpuInterface.Flags.c) << 7);\n    bus.write(operand, value);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (value & 0x80) |\n        (value ? 0 : CpuInterface.Flags.z) |\n        (old & CpuInterface.Flags.c);\n}\n\nexport function opRti(state: CpuInterface.State, bus: BusInterface): void {\n    let returnPtr: number;\n\n    restoreFlagsFromStack(state, bus);\n\n    state.s = (state.s + 1) & 0xff;\n    returnPtr = bus.read(0x0100 + state.s);\n    state.s = (state.s + 1) & 0xff;\n    returnPtr |= bus.read(0x0100 + state.s) << 8;\n\n    state.p = returnPtr;\n}\n\nexport function opRts(state: CpuInterface.State, bus: BusInterface): void {\n    let returnPtr: number;\n\n    bus.read(0x0100 + state.s);\n    state.s = (state.s + 1) & 0xff;\n    returnPtr = bus.read(0x0100 + state.s);\n    state.s = (state.s + 1) & 0xff;\n    returnPtr += bus.read(0x0100 + state.s) << 8;\n\n    state.p = (returnPtr + 1) & 0xffff;\n}\n\nexport function opSbc(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    if (state.flags & CpuInterface.Flags.d) {\n        const d0 = (state.a & 0x0f) - (operand & 0x0f) - (~state.flags & CpuInterface.Flags.c),\n            d1 = (state.a >>> 4) - (operand >>> 4) - (d0 < 0 ? 1 : 0);\n\n        state.a = (d0 < 0 ? 10 + d0 : d0) | ((d1 < 0 ? 10 + d1 : d1) << 4);\n\n        state.flags =\n            (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n            (state.a & 0x80) | // negative\n            (state.a ? 0 : CpuInterface.Flags.z) | // zero\n            (d1 < 0 ? 0 : CpuInterface.Flags.c); // carry / borrow\n    } else {\n        operand = ~operand & 0xff;\n\n        const sum = state.a + operand + (state.flags & CpuInterface.Flags.c),\n            result = sum & 0xff;\n\n        state.flags =\n            (state.flags &\n                ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c | CpuInterface.Flags.v)) |\n            (result & 0x80) | // negative\n            (result ? 0 : CpuInterface.Flags.z) | // zero\n            (sum >>> 8) | // carry / borrow\n            ((~(operand ^ state.a) & (result ^ operand) & 0x80) >>> 1); // overflow\n\n        state.a = result;\n    }\n}\n\nexport function opSec(state: CpuInterface.State): void {\n    state.flags |= CpuInterface.Flags.c;\n}\n\nexport function opSed(state: CpuInterface.State): void {\n    state.flags |= CpuInterface.Flags.d;\n}\n\nexport function opSei(state: CpuInterface.State): void {\n    state.flags |= CpuInterface.Flags.i;\n}\n\nexport function opSta(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    bus.write(operand, state.a);\n}\n\nexport function opStx(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    bus.write(operand, state.x);\n}\n\nexport function opSty(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    bus.write(operand, state.y);\n}\n\nexport function opTax(state: CpuInterface.State): void {\n    state.x = state.a;\n    setFlagsNZ(state, state.a);\n}\n\nexport function opTay(state: CpuInterface.State): void {\n    state.y = state.a;\n    setFlagsNZ(state, state.a);\n}\n\nexport function opTsx(state: CpuInterface.State): void {\n    state.x = state.s;\n    setFlagsNZ(state, state.x);\n}\n\nexport function opTxa(state: CpuInterface.State): void {\n    state.a = state.x;\n    setFlagsNZ(state, state.a);\n}\n\nexport function opTxs(state: CpuInterface.State): void {\n    state.s = state.x;\n}\n\nexport function opTya(state: CpuInterface.State): void {\n    state.a = state.y;\n    setFlagsNZ(state, state.a);\n}\n\nexport function opAlr(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const i = state.a & operand;\n    state.a = i >>> 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.a & 0x80) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (i & CpuInterface.Flags.c);\n}\n\nexport function opAxs(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const value = (state.a & state.x) + (~operand & 0xff) + 1;\n\n    state.x = value & 0xff;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (state.x & 0x80) |\n        (state.x & 0xff ? 0 : CpuInterface.Flags.z) |\n        (value >>> 8);\n}\n\nexport function opDcp(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const value = (bus.read(operand) + 0xff) & 0xff;\n    bus.write(operand, value);\n\n    const diff = state.a + (~value & 0xff) + 1;\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.c)) |\n        (diff & 0x80) |\n        (diff & 0xff ? 0 : CpuInterface.Flags.z) |\n        (diff >>> 8);\n}\n\nexport function opLax(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    state.a = operand;\n    state.x = operand;\n    setFlagsNZ(state, operand);\n}\n\nexport function opArr(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    state.a = ((state.a & operand) >>> 1) | (state.flags & CpuInterface.Flags.c ? 0x80 : 0);\n\n    state.flags =\n        (state.flags & ~(CpuInterface.Flags.c | CpuInterface.Flags.n | CpuInterface.Flags.z | CpuInterface.Flags.v)) |\n        ((state.a & 0x40) >>> 6) |\n        (state.a ? 0 : CpuInterface.Flags.z) |\n        (state.a & 0x80) |\n        ((state.a & 0x40) ^ ((state.a & 0x20) << 1));\n}\n\nexport function opSlo(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    let value = bus.read(operand);\n    state.flags = (state.flags & ~CpuInterface.Flags.c) | (value >>> 7);\n    value = (value << 1) & 0xff;\n\n    bus.write(operand, value);\n\n    state.a = state.a | value;\n    setFlagsNZ(state, state.a);\n}\n\nexport function opAax(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const value = state.x & state.a;\n    bus.write(operand, value);\n    setFlagsNZ(state, value);\n}\n\nexport function opLar(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    state.s = state.a = state.x = state.s & operand;\n    setFlagsNZ(state, state.a);\n}\n\nexport function opIsc(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const value = (bus.read(operand) + 1) & 0xff;\n    bus.write(operand, value);\n\n    opSbc(state, bus, value);\n}\n\nexport function opAac(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    state.a &= operand;\n    setFlagsNZ(state, state.a);\n    state.flags = (state.flags & ~CpuInterface.Flags.c) | ((state.a & 0x80) >>> 7);\n}\n\nexport function opAtx(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    state.a &= operand;\n    state.x = state.a;\n    setFlagsNZ(state, state.a);\n}\n\nexport function opRra(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const old = bus.read(operand),\n        value = (old >>> 1) | ((state.flags & CpuInterface.Flags.c) << 7);\n    bus.write(operand, value);\n\n    state.flags = (state.flags & ~CpuInterface.Flags.c) | (old & CpuInterface.Flags.c);\n\n    opAdc(state, bus, value);\n}\n\nexport function opRla(state: CpuInterface.State, bus: BusInterface, operand: number): void {\n    const old = bus.read(operand),\n        value = ((old << 1) & 0xff) | (state.flags & CpuInterface.Flags.c);\n    bus.write(operand, value);\n\n    state.flags = (state.flags & ~CpuInterface.Flags.c) | (old >>> 7);\n\n    opAnd(state, bus, value);\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport Instruction from './Instruction';\nimport BusInterface from '../bus/BusInterface';\nimport CpuInterface from './CpuInterface';\nimport * as ops from './ops';\n\nimport RngInterface from '../../tools/rng/GeneratorInterface';\n\nconst enum InterruptCheck {\n    endOfInstruction,\n    beforeOp\n}\nexport function opBoot(state: CpuInterface.State, bus: BusInterface): void {\n    state.p = bus.readWord(0xfffc);\n}\n\nfunction dispatchInterrupt(state: CpuInterface.State, bus: BusInterface, vector: number): void {\n    const nextOpAddr = state.p;\n\n    if (state.nmi) {\n        vector = 0xfffa;\n    }\n\n    state.nmi = state.irq = false;\n\n    bus.write(state.s + 0x0100, (nextOpAddr >>> 8) & 0xff);\n    state.s = (state.s + 0xff) & 0xff;\n    bus.write(state.s + 0x0100, nextOpAddr & 0xff);\n    state.s = (state.s + 0xff) & 0xff;\n\n    bus.write(state.s + 0x0100, state.flags & ~CpuInterface.Flags.b);\n    state.s = (state.s + 0xff) & 0xff;\n\n    state.flags |= CpuInterface.Flags.i;\n\n    state.p = bus.readWord(vector);\n}\n\nexport function opIrq(state: CpuInterface.State, bus: BusInterface) {\n    dispatchInterrupt(state, bus, 0xfffe);\n}\n\nexport function opNmi(state: CpuInterface.State, bus: BusInterface) {\n    dispatchInterrupt(state, bus, 0xfffa);\n}\n\nclass BatchedAccessCpu {\n    constructor(private _bus: BusInterface, private _rng?: RngInterface) {\n        this.reset();\n    }\n\n    setInterrupt(irq: boolean): BatchedAccessCpu {\n        this._interruptPending = irq;\n        return this;\n    }\n\n    isInterrupt(): boolean {\n        return this._interruptPending;\n    }\n\n    nmi(): BatchedAccessCpu {\n        this._nmiPending = true;\n        return this;\n    }\n\n    halt(): BatchedAccessCpu {\n        this._halted = true;\n        return this;\n    }\n\n    resume(): BatchedAccessCpu {\n        this._halted = false;\n        return this;\n    }\n\n    isHalt(): boolean {\n        return this._halted;\n    }\n\n    setInvalidInstructionCallback(callback: CpuInterface.InvalidInstructionCallbackInterface): BatchedAccessCpu {\n        this._invalidInstructionCallback = callback;\n        return this;\n    }\n\n    getInvalidInstructionCallback(): CpuInterface.InvalidInstructionCallbackInterface {\n        return this._invalidInstructionCallback;\n    }\n\n    getLastInstructionPointer(): number {\n        return this._lastInstructionPointer;\n    }\n\n    reset(): BatchedAccessCpu {\n        this.state.a = this._rng ? this._rng.int(0xff) : 0;\n        this.state.x = this._rng ? this._rng.int(0xff) : 0;\n        this.state.y = this._rng ? this._rng.int(0xff) : 0;\n        this.state.s = 0xfd;\n        this.state.p = this._rng ? this._rng.int(0xffff) : 0;\n        this.state.flags =\n            (this._rng ? this._rng.int(0xff) : 0) | CpuInterface.Flags.i | CpuInterface.Flags.e | CpuInterface.Flags.b;\n        this.state.irq = false;\n        this.state.nmi = false;\n\n        this.executionState = CpuInterface.ExecutionState.boot;\n        this._opCycles = 7;\n        this._interruptPending = false;\n        this._nmiPending = false;\n\n        this._instructionCallback = opBoot;\n\n        return this;\n    }\n\n    cycle(): BatchedAccessCpu {\n        if (this._halted) {\n            return this;\n        }\n\n        switch (this.executionState) {\n            case CpuInterface.ExecutionState.boot:\n            case CpuInterface.ExecutionState.execute:\n                if (--this._opCycles === 0) {\n                    if (this._dereference) {\n                        this._operand = this._bus.read(this._operand);\n                    }\n\n                    if (this._interuptCheck === InterruptCheck.beforeOp) {\n                        this._checkForInterrupts();\n                    }\n\n                    this._instructionCallback(this.state, this._bus, this._operand, this._currentAddressingMode);\n                    this.executionState = CpuInterface.ExecutionState.fetch;\n\n                    if (this._interuptCheck === InterruptCheck.endOfInstruction) {\n                        this._checkForInterrupts();\n                    }\n                }\n\n                break;\n\n            case CpuInterface.ExecutionState.fetch:\n                if (this.state.nmi) {\n                    this._instructionCallback = opNmi;\n                    this._opCycles = 6;\n                    this.state.nmi = this.state.irq = false;\n                    this._interuptCheck = InterruptCheck.beforeOp;\n                    this.executionState = CpuInterface.ExecutionState.execute;\n\n                    return this;\n                }\n\n                if (this.state.irq) {\n                    this._instructionCallback = opIrq;\n                    this._opCycles = 6;\n                    this.state.nmi = this.state.irq = false;\n                    this._interuptCheck = InterruptCheck.beforeOp;\n                    this.executionState = CpuInterface.ExecutionState.execute;\n\n                    return this;\n                }\n\n                this._fetch();\n                break;\n        }\n\n        return this;\n    }\n\n    private _fetch() {\n        const instruction = Instruction.opcodes[this._bus.read(this.state.p)];\n\n        let addressingMode = instruction.addressingMode,\n            dereference = false,\n            slowIndexedAccess = false;\n\n        this._lastInstructionPointer = this.state.p;\n        this._currentAddressingMode = addressingMode;\n        this._interuptCheck = InterruptCheck.endOfInstruction;\n\n        switch (instruction.operation) {\n            case Instruction.Operation.adc:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opAdc;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.and:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opAnd;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.asl:\n                if (addressingMode === Instruction.AddressingMode.implied) {\n                    this._opCycles = 1;\n                    this._instructionCallback = ops.opAslAcc;\n                } else {\n                    this._opCycles = 3;\n                    this._instructionCallback = ops.opAslMem;\n                    slowIndexedAccess = true;\n                }\n                break;\n\n            case Instruction.Operation.bcc:\n                if (this.state.flags & CpuInterface.Flags.c) {\n                    addressingMode = Instruction.AddressingMode.implied;\n                    this._instructionCallback = ops.opNop;\n                    this.state.p = (this.state.p + 1) & 0xffff;\n                    this._opCycles = 1;\n                } else {\n                    this._instructionCallback = ops.opJmp;\n                    this._opCycles = 0;\n                }\n                break;\n\n            case Instruction.Operation.bcs:\n                if (this.state.flags & CpuInterface.Flags.c) {\n                    this._instructionCallback = ops.opJmp;\n                    this._opCycles = 0;\n                } else {\n                    addressingMode = Instruction.AddressingMode.implied;\n                    this._instructionCallback = ops.opNop;\n                    this.state.p = (this.state.p + 1) & 0xffff;\n                    this._opCycles = 1;\n                }\n                break;\n\n            case Instruction.Operation.beq:\n                if (this.state.flags & CpuInterface.Flags.z) {\n                    this._instructionCallback = ops.opJmp;\n                    this._opCycles = 0;\n                } else {\n                    addressingMode = Instruction.AddressingMode.implied;\n                    this._instructionCallback = ops.opNop;\n                    this.state.p = (this.state.p + 1) & 0xffff;\n                    this._opCycles = 1;\n                }\n                break;\n\n            case Instruction.Operation.bit:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opBit;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.bmi:\n                if (this.state.flags & CpuInterface.Flags.n) {\n                    this._instructionCallback = ops.opJmp;\n                    this._opCycles = 0;\n                } else {\n                    addressingMode = Instruction.AddressingMode.implied;\n                    this._instructionCallback = ops.opNop;\n                    this.state.p = (this.state.p + 1) & 0xffff;\n                    this._opCycles = 1;\n                }\n                break;\n\n            case Instruction.Operation.bne:\n                if (this.state.flags & CpuInterface.Flags.z) {\n                    addressingMode = Instruction.AddressingMode.implied;\n                    this._instructionCallback = ops.opNop;\n                    this.state.p = (this.state.p + 1) & 0xffff;\n                    this._opCycles = 1;\n                } else {\n                    this._instructionCallback = ops.opJmp;\n                    this._opCycles = 0;\n                }\n                break;\n\n            case Instruction.Operation.bpl:\n                if (this.state.flags & CpuInterface.Flags.n) {\n                    addressingMode = Instruction.AddressingMode.implied;\n                    this._instructionCallback = ops.opNop;\n                    this.state.p = (this.state.p + 1) & 0xffff;\n                    this._opCycles = 1;\n                } else {\n                    this._instructionCallback = ops.opJmp;\n                    this._opCycles = 0;\n                }\n                break;\n\n            case Instruction.Operation.bvc:\n                if (this.state.flags & CpuInterface.Flags.v) {\n                    addressingMode = Instruction.AddressingMode.implied;\n                    this._instructionCallback = ops.opNop;\n                    this.state.p = (this.state.p + 1) & 0xffff;\n                    this._opCycles = 1;\n                } else {\n                    this._instructionCallback = ops.opJmp;\n                    this._opCycles = 0;\n                }\n                break;\n\n            case Instruction.Operation.bvs:\n                if (this.state.flags & CpuInterface.Flags.v) {\n                    this._instructionCallback = ops.opJmp;\n                    this._opCycles = 0;\n                } else {\n                    addressingMode = Instruction.AddressingMode.implied;\n                    this._instructionCallback = ops.opNop;\n                    this.state.p = (this.state.p + 1) & 0xffff;\n                    this._opCycles = 1;\n                }\n                break;\n\n            case Instruction.Operation.brk:\n                this._opCycles = 6;\n                this._instructionCallback = ops.opBrk;\n                this._interuptCheck = InterruptCheck.beforeOp;\n                break;\n\n            case Instruction.Operation.clc:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opClc;\n                break;\n\n            case Instruction.Operation.cld:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opCld;\n                break;\n\n            case Instruction.Operation.cli:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opCli;\n                this._interuptCheck = InterruptCheck.beforeOp;\n                break;\n\n            case Instruction.Operation.clv:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opClv;\n                break;\n\n            case Instruction.Operation.cmp:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opCmp;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.cpx:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opCpx;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.cpy:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opCpy;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.dec:\n                this._opCycles = 3;\n                this._instructionCallback = ops.opDec;\n                slowIndexedAccess = true;\n                break;\n\n            case Instruction.Operation.dex:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opDex;\n                break;\n\n            case Instruction.Operation.dey:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opDey;\n                break;\n\n            case Instruction.Operation.eor:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opEor;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.inc:\n                this._opCycles = 3;\n                this._instructionCallback = ops.opInc;\n                slowIndexedAccess = true;\n                break;\n\n            case Instruction.Operation.inx:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opInx;\n                break;\n\n            case Instruction.Operation.iny:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opIny;\n                break;\n\n            case Instruction.Operation.jmp:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opJmp;\n                break;\n\n            case Instruction.Operation.jsr:\n                this._opCycles = 5;\n                this._instructionCallback = ops.opJsr;\n                break;\n\n            case Instruction.Operation.lda:\n                this._opCycles = addressingMode === Instruction.AddressingMode.immediate ? 0 : 1;\n                this._instructionCallback = ops.opLda;\n                break;\n\n            case Instruction.Operation.ldx:\n                this._opCycles = addressingMode === Instruction.AddressingMode.immediate ? 0 : 1;\n                this._instructionCallback = ops.opLdx;\n                break;\n\n            case Instruction.Operation.ldy:\n                this._opCycles = addressingMode === Instruction.AddressingMode.immediate ? 0 : 1;\n                this._instructionCallback = ops.opLdy;\n                break;\n\n            case Instruction.Operation.lsr:\n                if (addressingMode === Instruction.AddressingMode.implied) {\n                    this._opCycles = 1;\n                    this._instructionCallback = ops.opLsrAcc;\n                } else {\n                    this._opCycles = 3;\n                    this._instructionCallback = ops.opLsrMem;\n                    slowIndexedAccess = true;\n                }\n                break;\n\n            case Instruction.Operation.nop:\n                this._opCycles = 1;\n\n                this._instructionCallback = ops.opNop;\n                break;\n\n            case Instruction.Operation.dop:\n            case Instruction.Operation.top:\n                this._opCycles = 0;\n                dereference = true;\n\n                this._instructionCallback = ops.opNop;\n                break;\n\n            case Instruction.Operation.ora:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opOra;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.php:\n                this._opCycles = 2;\n                this._instructionCallback = ops.opPhp;\n                break;\n\n            case Instruction.Operation.pha:\n                this._opCycles = 2;\n                this._instructionCallback = ops.opPha;\n                break;\n\n            case Instruction.Operation.pla:\n                this._opCycles = 3;\n                this._instructionCallback = ops.opPla;\n                break;\n\n            case Instruction.Operation.plp:\n                this._opCycles = 3;\n                this._instructionCallback = ops.opPlp;\n                this._interuptCheck = InterruptCheck.beforeOp;\n                break;\n\n            case Instruction.Operation.rol:\n                if (addressingMode === Instruction.AddressingMode.implied) {\n                    this._opCycles = 1;\n                    this._instructionCallback = ops.opRolAcc;\n                } else {\n                    this._opCycles = 3;\n                    this._instructionCallback = ops.opRolMem;\n                    slowIndexedAccess = true;\n                }\n                break;\n\n            case Instruction.Operation.ror:\n                if (addressingMode === Instruction.AddressingMode.implied) {\n                    this._opCycles = 1;\n                    this._instructionCallback = ops.opRorAcc;\n                } else {\n                    this._opCycles = 3;\n                    this._instructionCallback = ops.opRorMem;\n                    slowIndexedAccess = true;\n                }\n                break;\n\n            case Instruction.Operation.rti:\n                this._opCycles = 5;\n                this._instructionCallback = ops.opRti;\n                break;\n\n            case Instruction.Operation.rts:\n                this._opCycles = 5;\n                this._instructionCallback = ops.opRts;\n                break;\n\n            case Instruction.Operation.sbc:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opSbc;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.sec:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opSec;\n                break;\n\n            case Instruction.Operation.sed:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opSed;\n                break;\n\n            case Instruction.Operation.sei:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opSei;\n                this._interuptCheck = InterruptCheck.beforeOp;\n                break;\n\n            case Instruction.Operation.sta:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opSta;\n                slowIndexedAccess = true;\n                break;\n\n            case Instruction.Operation.stx:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opStx;\n                slowIndexedAccess = true;\n                break;\n\n            case Instruction.Operation.sty:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opSty;\n                slowIndexedAccess = true;\n                break;\n\n            case Instruction.Operation.tax:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opTax;\n                break;\n\n            case Instruction.Operation.tay:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opTay;\n                break;\n\n            case Instruction.Operation.tsx:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opTsx;\n                break;\n\n            case Instruction.Operation.txa:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opTxa;\n                break;\n\n            case Instruction.Operation.txs:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opTxs;\n                break;\n\n            case Instruction.Operation.tya:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opTya;\n                break;\n\n            case Instruction.Operation.arr:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opArr;\n                break;\n\n            case Instruction.Operation.alr:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opAlr;\n                break;\n\n            case Instruction.Operation.axs:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opAxs;\n                break;\n\n            case Instruction.Operation.dcp:\n                this._opCycles = 3;\n                this._instructionCallback = ops.opDcp;\n                slowIndexedAccess = true;\n                break;\n\n            case Instruction.Operation.lax:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opLax;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.slo:\n                this._opCycles = 3;\n                this._instructionCallback = ops.opSlo;\n                slowIndexedAccess = true;\n                dereference = false;\n                break;\n\n            case Instruction.Operation.aax:\n                this._opCycles = 1;\n                this._instructionCallback = ops.opAax;\n                break;\n\n            case Instruction.Operation.lar:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opLar;\n                dereference = true;\n                break;\n\n            case Instruction.Operation.isc:\n                this._opCycles = 3;\n                this._instructionCallback = ops.opIsc;\n                slowIndexedAccess = true;\n                break;\n\n            case Instruction.Operation.aac:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opAac;\n                break;\n\n            case Instruction.Operation.atx:\n                this._opCycles = 0;\n                this._instructionCallback = ops.opAtx;\n                break;\n\n            case Instruction.Operation.rra:\n                this._opCycles = 3;\n                dereference = false;\n                slowIndexedAccess = true;\n                this._instructionCallback = ops.opRra;\n                break;\n\n            case Instruction.Operation.rla:\n                this._opCycles = 3;\n                dereference = false;\n                slowIndexedAccess = true;\n                this._instructionCallback = ops.opRla;\n                break;\n\n            default:\n                if (this._invalidInstructionCallback) {\n                    this._invalidInstructionCallback(this);\n                }\n                return;\n        }\n\n        this.state.p = (this.state.p + 1) & 0xffff;\n\n        let value: number, base: number;\n\n        switch (addressingMode) {\n            case Instruction.AddressingMode.immediate:\n                this._operand = this._bus.read(this.state.p);\n                dereference = false;\n                this.state.p = (this.state.p + 1) & 0xffff;\n                this._opCycles++;\n                break;\n\n            case Instruction.AddressingMode.zeroPage:\n                this._operand = this._bus.read(this.state.p);\n                this.state.p = (this.state.p + 1) & 0xffff;\n                this._opCycles++;\n                break;\n\n            case Instruction.AddressingMode.absolute:\n                this._operand = this._bus.readWord(this.state.p);\n                this.state.p = (this.state.p + 2) & 0xffff;\n                this._opCycles += 2;\n                break;\n\n            case Instruction.AddressingMode.indirect:\n                value = this._bus.readWord(this.state.p);\n                if ((value & 0xff) === 0xff) {\n                    this._operand = this._bus.read(value) + (this._bus.read(value & 0xff00) << 8);\n                } else {\n                    this._operand = this._bus.readWord(value);\n                }\n                this.state.p = (this.state.p + 2) & 0xffff;\n                this._opCycles += 4;\n                break;\n\n            case Instruction.AddressingMode.relative:\n                value = this._bus.read(this.state.p);\n                value = value & 0x80 ? -(~(value - 1) & 0xff) : value;\n                this._operand = (this.state.p + value + 0x10001) & 0xffff;\n                this.state.p = (this.state.p + 1) & 0xffff;\n                this._opCycles += (this._operand & 0xff00) !== (this.state.p & 0xff00) ? 3 : 2;\n                break;\n\n            case Instruction.AddressingMode.zeroPageX:\n                base = this._bus.read(this.state.p);\n                this._bus.read(base);\n\n                this._operand = (base + this.state.x) & 0xff;\n                this.state.p = (this.state.p + 1) & 0xffff;\n                this._opCycles += 2;\n                break;\n\n            case Instruction.AddressingMode.absoluteX:\n                value = this._bus.readWord(this.state.p);\n                this._operand = (value + this.state.x) & 0xffff;\n\n                if ((this._operand & 0xff00) !== (value & 0xff00)) {\n                    this._bus.read((value & 0xff00) | (this._operand & 0xff));\n                }\n\n                this._opCycles += slowIndexedAccess || (this._operand & 0xff00) !== (value & 0xff00) ? 3 : 2;\n                this.state.p = (this.state.p + 2) & 0xffff;\n                break;\n\n            case Instruction.AddressingMode.zeroPageY:\n                base = this._bus.read(this.state.p);\n                this._bus.read(base);\n\n                this._operand = (base + this.state.y) & 0xff;\n                this.state.p = (this.state.p + 1) & 0xffff;\n                this._opCycles += 2;\n                break;\n\n            case Instruction.AddressingMode.absoluteY:\n                value = this._bus.readWord(this.state.p);\n                this._operand = (value + this.state.y) & 0xffff;\n\n                if ((this._operand & 0xff00) !== (value & 0xff00)) {\n                    this._bus.read((value & 0xff00) | (this._operand & 0xff));\n                }\n\n                this._opCycles += slowIndexedAccess || (this._operand & 0xff00) !== (value & 0xff00) ? 3 : 2;\n                this.state.p = (this.state.p + 2) & 0xffff;\n                break;\n\n            case Instruction.AddressingMode.indexedIndirectX:\n                base = this._bus.read(this.state.p);\n                this._bus.read(base);\n\n                value = (base + this.state.x) & 0xff;\n\n                if (value === 0xff) {\n                    this._operand = this._bus.read(0xff) + (this._bus.read(0x00) << 8);\n                } else {\n                    this._operand = this._bus.readWord(value);\n                }\n\n                this._opCycles += 4;\n                this.state.p = (this.state.p + 1) & 0xffff;\n                break;\n\n            case Instruction.AddressingMode.indirectIndexedY:\n                value = this._bus.read(this.state.p);\n\n                if (value === 0xff) {\n                    value = this._bus.read(0xff) + (this._bus.read(0x00) << 8);\n                } else {\n                    value = this._bus.readWord(value);\n                }\n\n                this._operand = (value + this.state.y) & 0xffff;\n\n                if ((this._operand & 0xff00) !== (value & 0xff00)) {\n                    this._bus.read((value & 0xff00) | (this._operand & 0xff));\n                }\n\n                this._opCycles += slowIndexedAccess || (value & 0xff00) !== (this._operand & 0xff00) ? 4 : 3;\n                this.state.p = (this.state.p + 1) & 0xffff;\n                break;\n        }\n\n        this._dereference = dereference;\n        if (dereference) {\n            this._opCycles++;\n        }\n\n        this.executionState = CpuInterface.ExecutionState.execute;\n    }\n\n    private _checkForInterrupts(): void {\n        if (this._nmiPending) {\n            this.state.irq = false;\n            this.state.nmi = true;\n            this._nmiPending = false;\n        }\n\n        if (this._interruptPending && !this.state.nmi && !(this.state.flags & CpuInterface.Flags.i)) {\n            this.state.irq = true;\n        }\n    }\n\n    executionState: CpuInterface.ExecutionState = CpuInterface.ExecutionState.boot;\n    state: CpuInterface.State = new CpuInterface.State();\n\n    private _opCycles: number = 0;\n    private _instructionCallback: InstructionCallbackInterface = null;\n    private _invalidInstructionCallback: CpuInterface.InvalidInstructionCallbackInterface = null;\n\n    private _interruptPending: boolean = false;\n    private _nmiPending: boolean = false;\n    private _interuptCheck = InterruptCheck.endOfInstruction;\n\n    private _halted: boolean = false;\n\n    private _operand: number = 0;\n    private _lastInstructionPointer: number = 0;\n    private _currentAddressingMode: Instruction.AddressingMode = Instruction.AddressingMode.invalid;\n\n    private _dereference = false;\n}\n\ninterface InstructionCallbackInterface {\n    (\n        state?: CpuInterface.State,\n        bus?: BusInterface,\n        operand?: number,\n        addressingMode?: Instruction.AddressingMode\n    ): void;\n}\n\nexport { BatchedAccessCpu as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport RngInterface from '../../tools/rng/GeneratorInterface';\nimport BusInterface from '../bus/BusInterface';\nimport CpuInterface from './CpuInterface';\nimport StateMachineCpu from './StateMachineCpu';\nimport BatchedAccessCpu from './BatchedAccessCpu';\n\nclass Factory {\n    constructor(private _type: Factory.Type) {}\n\n    create(bus: BusInterface, rng?: RngInterface): CpuInterface {\n        switch (this._type) {\n            case Factory.Type.stateMachine:\n                return new StateMachineCpu(bus, rng);\n\n            case Factory.Type.batchedAccess:\n                return new BatchedAccessCpu(bus, rng);\n\n            default:\n                throw new Error('invalid CPU type');\n        }\n    }\n}\n\nnamespace Factory {\n    export enum Type {\n        stateMachine,\n        batchedAccess\n    }\n}\n\nexport default Factory;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CpuFactory from '../cpu/Factory';\n\ninterface Config {\n    tvMode: Config.TvMode;\n    enableAudio: boolean;\n    randomSeed: number;\n    emulatePaddles: boolean;\n    frameStart: number;\n    pcmAudio: boolean;\n    cpuType: CpuFactory.Type;\n}\n\nnamespace Config {\n    export const enum TvMode {\n        ntsc,\n        pal,\n        secam\n    }\n\n    export function create(config: Partial<Config> = {}): Config {\n        return {\n            tvMode: TvMode.ntsc,\n            enableAudio: true,\n            randomSeed: -1,\n            emulatePaddles: true,\n            frameStart: -1,\n            pcmAudio: false,\n            cpuType: CpuFactory.Type.stateMachine,\n\n            ...config\n        };\n    }\n\n    export function getClockHz(config: Config): number {\n        switch (config.tvMode) {\n            case Config.TvMode.ntsc:\n                return 262 * 228 * 60;\n\n            case Config.TvMode.pal:\n            case Config.TvMode.secam:\n                return 312 * 228 * 50;\n        }\n    }\n}\n\nexport { Config as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nconst encodingsString = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n    encodings = new Uint8Array(256);\n\nexport namespace __init {\n    let i: number;\n\n    for (i = 0; i < 256; i++) {\n        encodings[i] = 255;\n    }\n    for (i = 0; i < 64; i++) {\n        encodings[encodingsString.charCodeAt(i)] = i;\n    }\n\n    encodings['='.charCodeAt(0)] = 0;\n}\n\nfunction decodeChar(data: string, idx: number): number {\n    const value = encodings[data.charCodeAt(idx)];\n\n    if (value > 63) {\n        throw new Error('invalid base64 character \"' + data[idx] + '\" at index ' + idx);\n    }\n\n    return value;\n}\n\nfunction decodeNibble(data: string, idx: number): number {\n    return (\n        (decodeChar(data, idx) << 18) +\n        (decodeChar(data, idx + 1) << 12) +\n        (decodeChar(data, idx + 2) << 6) +\n        decodeChar(data, idx + 3)\n    );\n}\n\nfunction getPadding(data: string): number {\n    let padding = 0,\n        idx = data.length - 1;\n\n    while (idx >= 0 && data[idx--] === '=') {\n        padding++;\n    }\n\n    return padding;\n}\n\nexport function decode(data: string): Uint8Array {\n    if (data.length % 4 !== 0) {\n        throw new Error('invalid base64 data --- char count mismatch');\n    }\n\n    const nibbles = data.length / 4,\n        decodedSize = nibbles * 3 - getPadding(data),\n        decoded = new Uint8Array(decodedSize);\n\n    let idx = 0;\n\n    for (let i = 0; i < nibbles; i++) {\n        const nibble = decodeNibble(data, i * 4);\n\n        for (let j = 0; j < 3 && idx < decodedSize; j++) {\n            decoded[idx++] = (nibble >>> (8 * (2 - j))) & 0xff;\n        }\n    }\n\n    return decoded;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\n/*\n * The tone generator has been heavily influenced by the code found at\n * http://www.biglist.com/lists/stella/archives/200311/msg00156.html with following licence:\n *\n * sound.c\n * version 0.2\n *\n * Copyright (c) 2003 Adam Wozniak (adam@wozniakconsulting.com)\n * All Rights Reserved\n *\n * Permission granted to freely copy and use for any purpose, provided\n * this copyright header remains intact.\n */\nimport Config from '../Config';\nimport AudioOutputBuffer from '../../../tools/AudioOutputBuffer';\nimport { decode as decodeBase64 } from '../../../tools/base64';\n\nconst FREQUENCY_DIVISIORS = decodeBase64('AQEPAQEBAQEBAQEBAwMDAQ==');\n\n// all ones\nconst POLY0 = new Int8Array([1]);\n\n// 50% duty cycle\nconst POLY1 = new Int8Array([1, 1]);\n\n// 16/31 duty cycle\nconst POLY2 = new Int8Array([16, 15]);\n\n// 4 bit LFSR\nconst POLY4 = decodeBase64('AQICAQEBBAM=');\n\n// 5 bit LFSR\nconst POLY5 = decodeBase64('AQIBAQICBQQCAQMBAQEBBA==');\n\n// 9 bit LFSR\nconst POLY9 = decodeBase64(\n    'AQQBAwIEAQIDAgEBAQEBAQIEAgEEAQECAgEDAgEDAQEBBAEBAQECAQECBgECAgECAQIBAQIBBg' +\n        'IBAgIBAQEBAgICAgcCAwICAQEBAwIBAQIBAQcBAQMBAQIDAwEBAQICAQECAgQDBQEDAQEFAgEB' +\n        'AQIBAgEDAQIFAQECAQEBBQEBAQEBAQEBBgEBAQIBAQEBBAIBAQMBAwYDAgMBAQIBAgQBAQEDAQ' +\n        'EBAQMBAgEEAgIDBAEBBAECAQICAgEBBAMBBAQJBQQBBQMBAQMCAgIBBQECAQEBAgMBAgEBAwQC' +\n        'BQICAQIDAQEBAQECAQMDAwIBAgEBAQEBAwMBAgIDAQMBCA=='\n);\n\n// used by mode 15\nconst POLY68 = decodeBase64('BQYEBQoFAwcECgYDBgQJBg==');\n\n// used by mode 3\nconst POLY465 = decodeBase64(\n    'AgMCAQQBBgoCBAIBAQQFCQMDBAEBAQgFBQUEAQEBCAQCCAMDAQEHBAIHBQEDAQcEAQQIAgEDBA' +\n        'cBAwcDAgEGBgICBAUDAgYGAQMDAgUDBwMEAwICAgUJAwEFAwECAgsFAQUDAQECDAUBAgUCAQEM' +\n        'BgECBQECAQoGAwICBAECBgo='\n);\n\nconst POLYS = [\n    POLY0,\n    POLY4,\n    POLY4,\n    POLY465,\n    POLY1,\n    POLY1,\n    POLY2,\n    POLY5,\n    POLY9,\n    POLY5,\n    POLY2,\n    POLY0,\n    POLY1,\n    POLY1,\n    POLY2,\n    POLY68\n];\n\nclass ToneGenerator {\n    constructor(private _config?: Config) {}\n\n    setConfig(config: Config) {\n        this._config = config;\n    }\n\n    getKey(tone: number, frequency: number): number {\n        // Hack: this is at the boundary of hearing anyway and causes nasty artifacts during\n        // resampling, so we kill it right away.\n        if (POLYS[tone] === POLY1 && FREQUENCY_DIVISIORS[tone] * (frequency + 1) === 1) {\n            return 0;\n        }\n\n        return (tone << 5) | frequency;\n    }\n\n    getBuffer(key: number): AudioOutputBuffer {\n        const tone = (key >>> 5) & 0x0f,\n            frequency = key & 0x1f;\n\n        const poly = POLYS[tone];\n\n        let length = 0;\n        for (let i = 0; i < poly.length; i++) {\n            length += poly[i];\n        }\n\n        length = length * FREQUENCY_DIVISIORS[tone] * (frequency + 1);\n\n        const content = new Float32Array(length);\n\n        const sampleRate = Config.getClockHz(this._config) / 114;\n\n        let f = 0;\n        let count = 0;\n        let offset = 0;\n        let state = true;\n\n        for (let i = 0; i < length; i++) {\n            f++;\n\n            if (f === FREQUENCY_DIVISIORS[tone] * (frequency + 1)) {\n                f = 0;\n                count++;\n\n                if (count === poly[offset]) {\n                    offset++;\n                    count = 0;\n\n                    if (poly.length === offset) {\n                        offset = 0;\n                    }\n                }\n\n                state = !(offset & 0x01);\n            }\n\n            content[i] = state ? 1 : -1;\n        }\n\n        return new AudioOutputBuffer(content, sampleRate);\n    }\n}\n\nexport { ToneGenerator as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport AudioOutputBuffer from '../../../tools/AudioOutputBuffer';\nimport WaveformAudioOutputInterface from '../../io/WaveformAudioOutputInterface';\nimport Config from '../Config';\nimport ToneGenerator from './ToneGenerator';\nimport AudioInterface from './AudioInterface';\n\nexport default class WaveformAudio implements WaveformAudioOutputInterface, AudioInterface {\n    constructor(private _config: Config) {\n        this._toneGenerator = new ToneGenerator(this._config);\n\n        this.reset();\n    }\n\n    reset(): void {\n        this._volume = -1;\n        this._tone = -1;\n        this._frequency = -1;\n    }\n\n    audc(value: number): void {\n        value &= 0x0f;\n\n        if (value === this._tone) {\n            return;\n        }\n\n        this._tone = value;\n        this._dispatchBufferChanged();\n    }\n\n    audf(value: number): void {\n        value &= 0x1f;\n\n        if (value === this._frequency) {\n            return;\n        }\n\n        this._frequency = value;\n        this._dispatchBufferChanged();\n    }\n\n    audv(value: number): void {\n        value &= 0x0f;\n\n        if (value === this._volume) {\n            return;\n        }\n\n        this._volume = value / 15;\n        this.volumeChanged.dispatch(this._volume);\n    }\n\n    setActive(active: boolean): void {\n        this._active = active;\n\n        if (active) {\n            this._dispatchBufferChanged();\n        } else {\n            this.stop.dispatch(undefined);\n        }\n    }\n\n    getVolume(): number {\n        return this._volume >= 0 ? this._volume : 0;\n    }\n\n    getBuffer(key: number): AudioOutputBuffer {\n        return this._toneGenerator.getBuffer(key);\n    }\n\n    protected _getKey(): number {\n        return this._toneGenerator.getKey(this._tone, this._frequency);\n    }\n\n    protected _dispatchBufferChanged() {\n        if (this._active && this.bufferChanged.hasHandlers) {\n            this.bufferChanged.dispatch(this._getKey());\n        }\n    }\n\n    bufferChanged = new Event<number>();\n    volumeChanged = new Event<number>();\n    stop = new Event<void>();\n\n    private _volume = -1;\n    private _tone = -1;\n    private _frequency = -1;\n    private _active = false;\n    private _toneGenerator: ToneGenerator = null;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nclass PCMChannel {\n    constructor() {\n        this.reset();\n    }\n\n    reset(): void {\n        this._audc = this._audf = this._audv = 0;\n\n        this._clkEnable = false;\n        this._noiseFeedback = false;\n        this._noiseCounterBit4 = false;\n        this._pulseCounterHold = false;\n\n        this._divCounter = 0;\n        this._noiseCounter = 0;\n        this._pulseCounter = 0;\n    }\n\n    phase0(): void {\n        if (this._clkEnable) {\n            this._noiseCounterBit4 = !!(this._noiseCounter & 0x01);\n\n            switch (this._audc & 0x03) {\n                case 0x00:\n                case 0x01:\n                    this._pulseCounterHold = false;\n                    break;\n\n                case 0x02:\n                    this._pulseCounterHold = (this._noiseCounter & 0x1e) !== 0x02;\n                    break;\n\n                case 0x03:\n                    this._pulseCounterHold = !this._noiseCounterBit4;\n                    break;\n            }\n\n            switch (this._audc & 0x03) {\n                case 0x00:\n                    this._noiseFeedback =\n                        !!((this._pulseCounter ^ this._noiseCounter) & 0x01) ||\n                        !(this._noiseCounter !== 0 || this._pulseCounter !== 0x0a) ||\n                        !(this._audc & 0x0c);\n\n                    break;\n\n                default:\n                    this._noiseFeedback =\n                        !!((this._noiseCounter & 0x04 ? 1 : 0) ^ (this._noiseCounter & 0x01)) ||\n                        this._noiseCounter === 0;\n\n                    break;\n            }\n        }\n\n        this._clkEnable = this._divCounter === this._audf;\n\n        if (this._divCounter === this._audf || this._divCounter === 0x1f) {\n            this._divCounter = 0;\n        } else {\n            this._divCounter++;\n        }\n    }\n\n    phase1(): number {\n        let pulseFeedback = false;\n\n        if (this._clkEnable) {\n            switch (this._audc >>> 2) {\n                case 0x00:\n                    pulseFeedback =\n                        !!((this._pulseCounter & 0x02 ? 1 : 0) ^ (this._pulseCounter & 0x01)) &&\n                        this._pulseCounter !== 0x0a &&\n                        !!(this._audc & 0x03);\n\n                    break;\n\n                case 0x01:\n                    pulseFeedback = !(this._pulseCounter & 0x08);\n                    break;\n\n                case 0x02:\n                    pulseFeedback = !this._noiseCounterBit4;\n                    break;\n\n                case 0x03:\n                    pulseFeedback = !(!!(this._pulseCounter & 0x02) || !(this._pulseCounter & 0x0e));\n                    break;\n            }\n\n            this._noiseCounter >>>= 1;\n            if (this._noiseFeedback) {\n                this._noiseCounter |= 0x10;\n            }\n\n            if (!this._pulseCounterHold) {\n                this._pulseCounter = ~(this._pulseCounter >>> 1) & 0x07;\n\n                if (pulseFeedback) {\n                    this._pulseCounter |= 0x08;\n                }\n            }\n        }\n\n        return (this._pulseCounter & 0x01) * this._audv;\n    }\n\n    audc(value: number): void {\n        this._audc = value & 0x0f;\n    }\n\n    audf(value: number): void {\n        this._audf = value & 0x1f;\n    }\n\n    audv(value: number): void {\n        this._audv = value & 0x0f;\n    }\n\n    private _audv = 0;\n    private _audc = 0;\n    private _audf = 0;\n\n    private _clkEnable = false;\n    private _noiseFeedback = false;\n    private _noiseCounterBit4 = false;\n    private _pulseCounterHold = false;\n\n    private _divCounter = 0;\n    private _noiseCounter = 0;\n    private _pulseCounter = 0;\n}\n\nexport { PCMChannel as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport PCMAudioInterface from '../../io/PCMAudioOutputInterface';\nimport AudioInterface from './AudioInterface';\nimport AudioOutputBuffer from '../../../tools/AudioOutputBuffer';\nimport StellaConfig from '../Config';\nimport PCMChannel from './PCMChannel';\n\n// The highest resistance in the resistor network is 30kOhms, the others follow from division\n// by powers of two: 30 -> 15 -> 7.5 -> 3.75\nconst R_MAX = 30;\n\n// The second resistor in the divider (1kOhms)\nconst R = 1;\n\n// The maximum sum of the individual volume of the two channels: 0x1e = 0xf + 0xf\nconst VOL_MAX = 0x1e;\n\nconst mixingTable = new Float32Array(VOL_MAX + 1);\n\nexport namespace __init {\n    for (let vol = 0; vol <= VOL_MAX; vol++) {\n        mixingTable[vol] = vol / VOL_MAX * (R_MAX + R * VOL_MAX) / (R_MAX + R * vol);\n    }\n}\n\nclass PCMAudio implements PCMAudioInterface {\n    constructor(private _config: StellaConfig) {\n        this._sampleRate = (this._config.tvMode === StellaConfig.TvMode.ntsc ? 60 * 262 : 50 * 312) * 2;\n        this._frameSize = (this._config.tvMode === StellaConfig.TvMode.ntsc ? 262 : 312) * 4;\n\n        this.reset();\n    }\n\n    getChannels(): Array<AudioInterface> {\n        return [\n            {\n                audv: value => this._channel0.audv(value),\n                audc: value => this._channel0.audc(value),\n                audf: value => this._channel0.audf(value),\n                reset: () => this.reset(),\n                setActive: active => this.setActive(active)\n            },\n            {\n                audv: value => this._channel1.audv(value),\n                audc: value => this._channel1.audc(value),\n                audf: value => this._channel1.audf(value),\n                reset: () => undefined,\n                setActive: () => undefined\n            }\n        ];\n    }\n\n    reset() {\n        this._bufferIndex = 0;\n        this._counter = 0;\n\n        this._channel0.reset();\n        this._channel1.reset();\n    }\n\n    tick(): void {\n        switch (this._counter) {\n            case 9:\n            case 81:\n                this._channel0.phase0();\n                this._channel1.phase0();\n                break;\n\n            case 37:\n            case 149:\n                this._currentOutputBuffer.getContent()[this._bufferIndex++] =\n                    mixingTable[this._channel0.phase1() + this._channel1.phase1()];\n\n                if (this._bufferIndex === this._currentOutputBuffer.getLength()) {\n                    this._dispatchBuffer();\n                }\n\n                break;\n        }\n\n        if (++this._counter === 228) {\n            this._counter = 0;\n        }\n    }\n\n    isPaused(): boolean {\n        return !this._isActive;\n    }\n\n    setActive(isActive: boolean): void {\n        if (isActive === this._isActive) {\n            return;\n        }\n\n        this._isActive = isActive;\n\n        this.togglePause.dispatch(!isActive);\n    }\n\n    getSampleRate(): number {\n        return this._sampleRate;\n    }\n\n    getFrameSize(): number {\n        return this._frameSize;\n    }\n\n    setFrameBufferFactory(factory: PCMAudioInterface.FrameBufferFactory): void {\n        this._bufferFactory = factory;\n\n        if (!this._currentOutputBuffer && factory) {\n            this._currentOutputBuffer = factory();\n            this._bufferIndex = 0;\n        }\n    }\n\n    private _dispatchBuffer(): void {\n        this.newFrame.dispatch(this._currentOutputBuffer);\n        this._currentOutputBuffer = this._bufferFactory ? this._bufferFactory() : null;\n        this._bufferIndex = 0;\n    }\n\n    newFrame = new Event<AudioOutputBuffer>();\n\n    togglePause = new Event<boolean>();\n\n    private _currentOutputBuffer: AudioOutputBuffer = null;\n\n    private _bufferIndex = 0;\n    private _sampleRate = 0;\n    private _frameSize: number;\n    private _counter = 0;\n    private _isActive = false;\n\n    private _bufferFactory: PCMAudioInterface.FrameBufferFactory;\n\n    private _channel0 = new PCMChannel();\n    private _channel1 = new PCMChannel();\n}\n\nexport { PCMAudio as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nconst decodes0 = new Uint8Array(160),\n    decodes1 = new Uint8Array(160),\n    decodes2 = new Uint8Array(160),\n    decodes3 = new Uint8Array(160),\n    decodes4 = new Uint8Array(160),\n    decodes6 = new Uint8Array(160);\n\nexport const decodesMissile: Array<Uint8Array> = [\n    decodes0,\n    decodes1,\n    decodes2,\n    decodes3,\n    decodes4,\n    decodes0,\n    decodes6,\n    decodes0\n];\n\nexport const decodesPlayer: Array<Uint8Array> = [\n    decodes0,\n    decodes1,\n    decodes2,\n    decodes3,\n    decodes4,\n    decodes0,\n    decodes6,\n    decodes0\n];\n\n[decodes0, decodes1, decodes2, decodes3, decodes4, decodes6].forEach(decodes => {\n    for (let i = 0; i < 160; i++) {\n        decodes[i] = 0;\n    }\n\n    decodes[156] = 1;\n});\n\ndecodes1[12] = 1;\ndecodes2[28] = 1;\ndecodes3[12] = decodes3[28] = 1;\ndecodes4[60] = 1;\ndecodes6[28] = decodes6[60] = 1;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { decodesMissile } from './drawCounterDecodes';\n\nimport Player from './Player';\n\nconst enum Count {\n    renderCounterOffset = -4\n}\n\nclass Missile {\n    constructor(private _collisionMask: number, private _flushLineCache: () => void) {\n        this.reset();\n    }\n\n    reset(): void {\n        this.color = 0xffffffff;\n        this._width = 1;\n        this._enabled = false;\n        this._counter = 0;\n        this._rendering = false;\n        this._renderCounter = Count.renderCounterOffset;\n        this._moving = false;\n        this._hmmClocks = 0;\n        this._decodes = decodesMissile[0];\n        this._resmp = -1;\n        this._enam = false;\n        this._effectiveWidth = 0;\n        this._lastMovementTick = 0;\n    }\n\n    enam(value: number): void {\n        const enam = (value & 2) > 0,\n            enabled = enam && this._resmp === 0;\n\n        if (enam !== this._enam || enabled !== this._enabled) {\n            this._flushLineCache();\n        }\n\n        this._enam = enam;\n        this._enabled = enabled;\n    }\n\n    hmm(value: number): void {\n        // Shift and flip the highest bit --- this gives us the necessary movement to the right\n        this._hmmClocks = (value >>> 4) ^ 0x8;\n    }\n\n    resm(counter: number, hblank: boolean): void {\n        this._counter = counter;\n\n        if (this._rendering) {\n            if (this._renderCounter < 0) {\n                this._renderCounter = Count.renderCounterOffset + (counter - 157);\n            } else {\n                switch (this._width) {\n                    case 8:\n                        this._renderCounter = counter - 157 + (this._renderCounter >= 4 ? 4 : 0);\n                        break;\n\n                    case 4:\n                        this._renderCounter = counter - 157;\n                        break;\n\n                    case 2:\n                        if (hblank) {\n                            this._rendering = this._renderCounter > 1;\n                        } else if (this._renderCounter === 0) {\n                            this._renderCounter++;\n                        }\n\n                        break;\n\n                    default:\n                        if (hblank) {\n                            this._rendering = this._renderCounter > 0;\n                        }\n\n                        break;\n                }\n            }\n        }\n    }\n\n    resmp(value: number, player: Player) {\n        const resmp = value & 0x02;\n\n        if (resmp === this._resmp) {\n            return;\n        }\n\n        this._flushLineCache();\n\n        this._resmp = resmp;\n\n        if (resmp) {\n            this._enabled = false;\n        } else {\n            this._enabled = this._enam;\n            this._counter = player.getRespClock();\n        }\n    }\n\n    nusiz(value: number): void {\n        this._width = this._widths[(value & 0x30) >>> 4];\n        this._decodes = decodesMissile[value & 0x07];\n\n        if (this._rendering && this._renderCounter >= this._width) {\n            this._rendering = false;\n        }\n    }\n\n    startMovement(): void {\n        this._moving = true;\n    }\n\n    movementTick(clock: number, apply: boolean): boolean {\n        this._lastMovementTick = this._counter;\n\n        // Stop movement only if the clock matches exactly --- this is crucial for cosmic ark type hacks\n        if (clock === this._hmmClocks) {\n            this._moving = false;\n        }\n\n        if (this._moving && apply) {\n            this.tick(false);\n        }\n\n        return this._moving;\n    }\n\n    tick(isReceivingHclock: boolean): void {\n        this.collision = this._rendering && this._renderCounter >= 0 && this._enabled ? 0 : this._collisionMask;\n\n        const starfieldEffect = this._moving && isReceivingHclock;\n\n        if (this._decodes[this._counter] && !this._resmp) {\n            const starfieldDelta = (this._counter - this._lastMovementTick + 160) % 4;\n\n            this._rendering = true;\n            this._renderCounter = Count.renderCounterOffset;\n\n            if (starfieldEffect && starfieldDelta === 3 && this._width < 4) {\n                this._renderCounter++;\n            }\n\n            switch (starfieldDelta) {\n                case 3:\n                    this._effectiveWidth = this._width === 1 ? 2 : this._width;\n                    break;\n\n                case 2:\n                    this._effectiveWidth = 0;\n                    break;\n\n                default:\n                    this._effectiveWidth = this._width;\n                    break;\n            }\n        } else if (this._rendering && ++this._renderCounter >= (starfieldEffect ? this._effectiveWidth : this._width)) {\n            this._rendering = false;\n        }\n\n        if (++this._counter >= 160) {\n            this._counter = 0;\n        }\n    }\n\n    getPixel(colorIn: number): number {\n        return this.collision ? colorIn : this.color;\n    }\n\n    setColor(color: number): void {\n        if (color !== this.color && this._enabled) {\n            this._flushLineCache();\n        }\n\n        this.color = color;\n    }\n\n    color = 0xffffffff;\n    collision = 0;\n\n    private _enabled = false;\n    private _enam = false;\n    private _resmp = -1;\n\n    private _hmmClocks = 0;\n    private _counter = 0;\n    private _moving = false;\n    private _width = 1;\n    private _effectiveWidth = 0;\n    private _lastMovementTick = 0;\n\n    private _rendering = false;\n    private _renderCounter = Count.renderCounterOffset;\n\n    private _decodes: Uint8Array;\n    private _widths = new Uint8Array([1, 2, 4, 8]);\n}\n\nexport { Missile as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nconst enum ColorMode {\n    normal,\n    score\n}\n\nclass Playfield {\n    constructor(private _collisionMask: number, private _flushLineCache: () => void) {\n        this.reset();\n    }\n\n    reset() {\n        this._pattern = 0;\n        this._reflected = false;\n        this._refp = false;\n\n        this._pf0 = 0;\n        this._pf1 = 0;\n        this._pf2 = 0;\n\n        this._color = 0;\n        this._colorP0 = 0;\n        this._colorP1 = 0;\n        this._colorMode = ColorMode.normal;\n        this._applyColors();\n    }\n\n    pf0(value: number) {\n        if (this._pf0 === value >>> 4) {\n            return;\n        }\n\n        this._flushLineCache();\n        this._pf0 = value >>> 4;\n\n        this._pattern = (this._pattern & 0x000ffff0) | this._pf0;\n    }\n\n    pf1(value: number) {\n        if (this._pf1 === value) {\n            return;\n        }\n\n        this._flushLineCache();\n        this._pf1 = value;\n\n        this._pattern =\n            (this._pattern & 0x000ff00f) |\n            ((value & 0x80) >>> 3) |\n            ((value & 0x40) >>> 1) |\n            ((value & 0x20) << 1) |\n            ((value & 0x10) << 3) |\n            ((value & 0x08) << 5) |\n            ((value & 0x04) << 7) |\n            ((value & 0x02) << 9) |\n            ((value & 0x01) << 11);\n    }\n\n    pf2(value: number) {\n        if (this._pf2 === value) {\n            return;\n        }\n\n        this._flushLineCache();\n        this._pf2 = value;\n\n        this._pattern = (this._pattern & 0x00000fff) | ((value & 0xff) << 12);\n    }\n\n    ctrlpf(value: number): void {\n        const reflected = (value & 0x01) > 0,\n            colorMode = (value & 0x06) === 0x02 ? ColorMode.score : ColorMode.normal;\n\n        if (reflected === this._reflected && colorMode === this._colorMode) {\n            return;\n        }\n\n        this._flushLineCache();\n\n        this._reflected = reflected;\n        this._colorMode = colorMode;\n\n        this._applyColors();\n    }\n\n    setColor(color: number): void {\n        if (color !== this._color && this._colorMode === ColorMode.normal) {\n            this._flushLineCache();\n        }\n\n        this._color = color;\n        this._applyColors();\n    }\n\n    setColorP0(color: number): void {\n        if (color !== this._colorP0 && this._colorMode === ColorMode.score) {\n            this._flushLineCache();\n        }\n\n        this._colorP0 = color;\n        this._applyColors();\n    }\n\n    setColorP1(color: number): void {\n        if (color !== this._colorP1 && this._colorMode === ColorMode.score) {\n            this._flushLineCache();\n        }\n\n        this._colorP1 = color;\n        this._applyColors();\n    }\n\n    tick(x: number) {\n        this._x = x;\n\n        if (x === 80 || x === 0) {\n            this._refp = this._reflected;\n        }\n\n        if (x & 0x03) {\n            return;\n        }\n\n        let currentPixel: number;\n\n        if (this._pattern === 0) {\n            currentPixel = 0;\n        } else if (x < 80) {\n            currentPixel = this._pattern & (1 << (x >>> 2));\n        } else if (this._refp) {\n            currentPixel = this._pattern & (1 << (39 - (x >>> 2)));\n        } else {\n            currentPixel = this._pattern & (1 << ((x >>> 2) - 20));\n        }\n\n        this.collision = currentPixel ? 0 : this._collisionMask;\n    }\n\n    getPixel(colorIn: number): number {\n        if (!this.collision) {\n            return this._x < 80 ? this._colorLeft : this._colorRight;\n        }\n\n        return colorIn;\n    }\n\n    private _applyColors(): void {\n        switch (this._colorMode) {\n            case ColorMode.normal:\n                this._colorLeft = this._colorRight = this._color;\n                break;\n\n            case ColorMode.score:\n                this._colorLeft = this._colorP0;\n                this._colorRight = this._colorP1;\n                break;\n        }\n    }\n\n    collision = 0;\n\n    private _colorLeft = 0;\n    private _colorRight = 0;\n    private _color = 0;\n    private _colorP0 = 0;\n    private _colorP1 = 0;\n    private _colorMode = ColorMode.normal;\n\n    private _pattern = 0;\n    private _refp = false;\n    private _reflected = false;\n\n    private _pf0 = 0;\n    private _pf1 = 0;\n    private _pf2 = 0;\n\n    private _x = 0;\n}\n\nexport { Playfield as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { decodesPlayer } from './drawCounterDecodes';\n\nconst enum Count {\n    renderCounterOffset = -5\n}\n\nexport default class Player {\n    constructor(private _collisionMask: number, private _flushLineCache: () => void) {\n        this.reset();\n    }\n\n    reset(): void {\n        this.color = 0xffffffff;\n        this.collision = 0;\n        this._hmmClocks = 0;\n        this._counter = 0;\n        this._moving = false;\n        this._rendering = false;\n        this._renderCounter = Count.renderCounterOffset;\n        this._decodes = decodesPlayer[0];\n        this._patternNew = 0;\n        this._patternOld = 0;\n        this._pattern = 0;\n        this._reflected = false;\n        this._delaying = false;\n        this._sampleCounter = 0;\n        this._dividerPending = 0;\n        this._dividerChangeCounter = -1;\n\n        this._setDivider(1);\n    }\n\n    grp(pattern: number) {\n        if (pattern === this._patternNew) {\n            return;\n        }\n\n        this._patternNew = pattern;\n\n        if (!this._delaying) {\n            this._flushLineCache();\n            this._updatePattern();\n        }\n    }\n\n    hmp(value: number): void {\n        this._hmmClocks = (value >>> 4) ^ 0x8;\n    }\n\n    nusiz(value: number, hblank: boolean): void {\n        const masked = value & 0x07;\n\n        switch (masked) {\n            case 5:\n                this._dividerPending = 2;\n                break;\n\n            case 7:\n                this._dividerPending = 4;\n                break;\n\n            default:\n                this._dividerPending = 1;\n        }\n\n        const oldDecodes = this._decodes;\n\n        this._decodes = decodesPlayer[masked];\n\n        if (\n            this._decodes !== oldDecodes &&\n            this._rendering &&\n            this._renderCounter - Count.renderCounterOffset < 2 &&\n            !this._decodes[(this._counter - this._renderCounter + Count.renderCounterOffset + 159) % 160]\n        ) {\n            this._rendering = false;\n        }\n\n        if (this._dividerPending === this._divider) {\n            return;\n        }\n\n        if (!this._rendering) {\n            this._setDivider(this._dividerPending);\n            return;\n        }\n\n        const delta = this._renderCounter - Count.renderCounterOffset;\n\n        switch ((this._divider << 4) | this._dividerPending) {\n            case 0x12:\n            case 0x14:\n                if (hblank) {\n                    if (delta < 4) {\n                        this._setDivider(this._dividerPending);\n                    } else {\n                        this._dividerChangeCounter = delta < 5 ? 1 : 0;\n                    }\n                } else {\n                    if (delta < 3) {\n                        this._setDivider(this._dividerPending);\n                    } else {\n                        this._dividerChangeCounter = 1;\n                    }\n                }\n\n                break;\n\n            case 0x21:\n            case 0x41:\n                if (delta < (hblank ? 4 : 3)) {\n                    this._setDivider(this._dividerPending);\n                } else if (delta < (hblank ? 6 : 5)) {\n                    this._setDivider(this._dividerPending);\n                    this._renderCounter--;\n                } else {\n                    this._dividerChangeCounter = hblank ? 0 : 1;\n                }\n\n                break;\n\n            case 0x42:\n            case 0x24:\n                if (this._renderCounter < 1 || (hblank && this._renderCounter % this._divider === 1)) {\n                    this._setDivider(this._dividerPending);\n                } else {\n                    this._dividerChangeCounter = this._divider - (this._renderCounter - 1) % this._divider;\n                }\n\n                break;\n\n            default:\n                throw new Error('cannot happen');\n        }\n    }\n\n    resp(counter: number): void {\n        this._counter = counter;\n\n        if (this._rendering && this._renderCounter - Count.renderCounterOffset < 4) {\n            this._renderCounter = Count.renderCounterOffset + (counter - 157);\n        }\n    }\n\n    refp(value: number): void {\n        const oldReflected = this._reflected;\n\n        this._reflected = (value & 0x08) > 0;\n\n        if (this._reflected !== oldReflected) {\n            this._flushLineCache();\n            this._updatePattern();\n        }\n    }\n\n    vdelp(value: number): void {\n        const oldDelaying = this._delaying;\n\n        this._delaying = (value & 0x01) > 0;\n\n        if (this._delaying !== oldDelaying) {\n            this._flushLineCache();\n            this._updatePattern();\n        }\n    }\n\n    startMovement(): void {\n        this._moving = true;\n    }\n\n    movementTick(clock: number, apply: boolean): boolean {\n        // Stop movement only if the clock matches exactly --- this is crucial for cosmic ark type hacks\n        if (clock === this._hmmClocks) {\n            this._moving = false;\n        }\n\n        if (this._moving && apply) {\n            this.tick();\n        }\n\n        return this._moving;\n    }\n\n    tick(): void {\n        this.collision =\n            this._rendering &&\n            this._renderCounter >= this._renderCounterTripPoint &&\n            this._pattern & (1 << this._sampleCounter)\n                ? 0\n                : this._collisionMask;\n\n        if (this._decodes[this._counter]) {\n            this._rendering = true;\n            this._renderCounter = Count.renderCounterOffset;\n            this._sampleCounter = 0;\n        } else if (this._rendering) {\n            this._renderCounter++;\n\n            switch (this._divider) {\n                case 1:\n                    if (this._renderCounter > 0) {\n                        this._sampleCounter++;\n                    }\n\n                    if (\n                        this._renderCounter >= 0 &&\n                        this._dividerChangeCounter >= 0 &&\n                        this._dividerChangeCounter-- === 0\n                    ) {\n                        this._setDivider(this._dividerPending);\n                    }\n\n                    break;\n\n                default:\n                    if (this._renderCounter > 1 && (this._renderCounter - 1) % this._divider === 0) {\n                        this._sampleCounter++;\n                    }\n\n                    if (\n                        this._renderCounter > 0 &&\n                        this._dividerChangeCounter >= 0 &&\n                        this._dividerChangeCounter-- === 0\n                    ) {\n                        this._setDivider(this._dividerPending);\n                    }\n\n                    break;\n            }\n\n            if (this._sampleCounter > 7) {\n                this._rendering = false;\n            }\n        }\n\n        if (++this._counter >= 160) {\n            this._counter = 0;\n        }\n    }\n\n    getPixel(colorIn: number): number {\n        return this.collision ? colorIn : this.color;\n    }\n\n    shufflePatterns(): void {\n        const oldPatternOld = this._patternOld;\n\n        this._patternOld = this._patternNew;\n\n        if (this._delaying && oldPatternOld !== this._patternOld) {\n            this._flushLineCache();\n            this._updatePattern();\n        }\n    }\n\n    getRespClock(): number {\n        switch (this._divider) {\n            case 1:\n                return (this._counter - 5 + 160) % 160;\n\n            case 2:\n                return (this._counter - 9 + 160) % 160;\n\n            case 4:\n                return (this._counter - 12 + 160) % 160;\n\n            default:\n                throw new Error(`cannot happen: invalid divider ${this._divider}`);\n        }\n    }\n\n    setColor(color: number): void {\n        if (color !== this.color && this._pattern) {\n            this._flushLineCache();\n        }\n\n        this.color = color;\n    }\n\n    private _updatePattern(): void {\n        this._pattern = this._delaying ? this._patternOld : this._patternNew;\n\n        if (!this._reflected) {\n            this._pattern =\n                ((this._pattern & 0x01) << 7) |\n                ((this._pattern & 0x02) << 5) |\n                ((this._pattern & 0x04) << 3) |\n                ((this._pattern & 0x08) << 1) |\n                ((this._pattern & 0x10) >>> 1) |\n                ((this._pattern & 0x20) >>> 3) |\n                ((this._pattern & 0x40) >>> 5) |\n                ((this._pattern & 0x80) >>> 7);\n        }\n    }\n\n    private _setDivider(divider: number): void {\n        this._divider = divider;\n        this._renderCounterTripPoint = divider === 1 ? 0 : 1;\n    }\n\n    color = 0xffffffff;\n    collision = 0;\n\n    private _hmmClocks = 0;\n    private _counter = 0;\n    private _moving = false;\n    private _divider = 1;\n    private _dividerPending = 1;\n    private _dividerChangeCounter = -1;\n    private _sampleCounter = 0;\n\n    private _rendering = false;\n    private _renderCounter = Count.renderCounterOffset;\n    private _renderCounterTripPoint = 0;\n\n    private _decodes: Uint8Array;\n\n    private _patternNew = 0;\n    private _patternOld = 0;\n    private _pattern = 0;\n\n    private _reflected = false;\n    private _delaying = false;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nconst enum Count {\n    renderCounterOffset = -4\n}\n\nexport default class Ball {\n    constructor(private _collisionMask: number, private _flushLineCache: () => void) {\n        this.reset();\n    }\n\n    reset(): void {\n        this.color = 0xffffffff;\n        this.collision = 0;\n        this._width = 1;\n        this._enabledOld = false;\n        this._enabledNew = false;\n        this._enabled = false;\n        this._counter = 0;\n        this._rendering = false;\n        this._renderCounter = Count.renderCounterOffset;\n        this._moving = false;\n        this._hmmClocks = 0;\n        this._delaying = false;\n        this._effectiveWidth = 0;\n        this._lastMovementTick = 0;\n    }\n\n    enabl(value: number): void {\n        const enabledNewOldValue = this._enabledNew;\n\n        this._enabledNew = (value & 2) > 0;\n\n        if (enabledNewOldValue !== this._enabledNew && !this._delaying) {\n            this._flushLineCache();\n            this._updateEnabled();\n        }\n    }\n\n    hmbl(value: number): void {\n        // Shift and flip the highest bit --- this gives us the necessary movement to the right\n        this._hmmClocks = (value >>> 4) ^ 0x8;\n    }\n\n    resbl(counter: number): void {\n        this._counter = counter;\n\n        this._rendering = true;\n        this._renderCounter = Count.renderCounterOffset + (counter - 157);\n    }\n\n    ctrlpf(value: number): void {\n        const width = this._widths[(value & 0x30) >>> 4];\n\n        if (width !== this._width) {\n            this._flushLineCache();\n        }\n\n        this._width = width;\n    }\n\n    vdelbl(value: number): void {\n        const oldDelaying = this._delaying;\n\n        this._delaying = (value & 0x01) > 0;\n\n        if (oldDelaying !== this._delaying) {\n            this._flushLineCache();\n            this._updateEnabled();\n        }\n    }\n\n    startMovement(): void {\n        this._moving = true;\n    }\n\n    movementTick(clock: number, apply: boolean): boolean {\n        this._lastMovementTick = this._counter;\n\n        // Stop movement only if the clock matches exactly --- this is crucial for cosmic ark type hacks\n        if (clock === this._hmmClocks) {\n            this._moving = false;\n        }\n\n        if (this._moving && apply) {\n            this.tick(false);\n        }\n\n        return this._moving;\n    }\n\n    tick(isReceivingHclock: boolean): void {\n        this.collision = this._rendering && this._renderCounter >= 0 && this._enabled ? 0 : this._collisionMask;\n\n        const starfieldEffect = this._moving && isReceivingHclock;\n\n        if (this._counter === 156) {\n            const starfieldDelta = (this._counter - this._lastMovementTick + 160) % 4;\n\n            this._rendering = true;\n            this._renderCounter = Count.renderCounterOffset;\n\n            if (starfieldEffect && starfieldDelta === 3 && this._width < 4) {\n                this._renderCounter++;\n            }\n\n            switch (starfieldDelta) {\n                case 3:\n                    this._effectiveWidth = this._width === 1 ? 2 : this._width;\n                    break;\n\n                case 2:\n                    this._effectiveWidth = 0;\n                    break;\n\n                default:\n                    this._effectiveWidth = this._width;\n                    break;\n            }\n        } else if (this._rendering && ++this._renderCounter >= (starfieldEffect ? this._effectiveWidth : this._width)) {\n            this._rendering = false;\n        }\n\n        if (++this._counter >= 160) {\n            this._counter = 0;\n        }\n    }\n\n    getPixel(colorIn: number): number {\n        return this.collision ? colorIn : this.color;\n    }\n\n    shuffleStatus(): void {\n        const oldEnabledOld = this._enabledOld;\n\n        this._enabledOld = this._enabledNew;\n\n        if (this._delaying && this._enabledOld !== oldEnabledOld) {\n            this._flushLineCache();\n            this._updateEnabled();\n        }\n    }\n\n    setColor(color: number): void {\n        if (color !== this.color && this._enabled) {\n            this._flushLineCache();\n        }\n\n        this.color = color;\n    }\n\n    private _updateEnabled(): void {\n        this._enabled = this._delaying ? this._enabledOld : this._enabledNew;\n    }\n\n    color = 0xffffffff;\n    collision = 0;\n\n    private _enabledOld = false;\n    private _enabledNew = false;\n    private _enabled = false;\n\n    private _hmmClocks = 0;\n    private _counter = 0;\n    private _moving = false;\n    private _width = 1;\n    private _effectiveWidth = 0;\n    private _lastMovementTick = 0;\n\n    private _rendering = false;\n    private _renderCounter = Count.renderCounterOffset;\n\n    private _widths = new Uint8Array([1, 2, 4, 8]);\n\n    private _delaying = false;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport SwitchInterface from '../../io/SwitchInterface';\n\nexport default class LatchedInput {\n    constructor(private _switch: SwitchInterface) {\n        this.reset();\n    }\n\n    reset(): void {\n        this._modeLatched = false;\n        this._latchedValue = 0;\n    }\n\n    vblank(value: number): void {\n        if (value & 0x40) {\n            this._modeLatched = true;\n        } else {\n            this._modeLatched = false;\n            this._latchedValue = 0x80;\n        }\n    }\n\n    inpt(): number {\n        let value = this._switch.read() ? 0 : 0x80;\n\n        if (this._modeLatched) {\n            this._latchedValue &= value;\n            value = this._latchedValue;\n        }\n\n        return value;\n    }\n\n    private _modeLatched = false;\n    private _latchedValue = 0;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport Paddle from '../../io/Paddle';\n\nconst C = 68e-9, // capacitor\n    RPOT = 1e6, // total paddle resistance\n    R0 = 1.8e3, // series resistor\n    U = 5, // supply voltage\n    LINES_FULL = 380; // treshold voltage in terms of scanline count\n\nexport default class PaddleReader {\n    constructor(clockFreq: number, private _paddle: Paddle) {\n        this._uThresh = U * (1 - Math.exp(-LINES_FULL * 228 / clockFreq / (RPOT + R0) / C));\n\n        this._paddle.valueChanged.addHandler((value: number) => {\n            this._updateValue();\n            this._value = value;\n        });\n\n        this.reset();\n    }\n\n    setCpuTimeProvider(provider: () => number): void {\n        this._cpuTimeProvider = provider;\n        this._timestamp = this._cpuTimeProvider();\n    }\n\n    reset(): void {\n        this._u = 0;\n        this._value = this._paddle.getValue();\n        this._dumped = false;\n        this._timestamp = this._cpuTimeProvider ? this._cpuTimeProvider() : 0;\n    }\n\n    vblank(value: number): void {\n        const oldValue = this._dumped;\n\n        if (value & 0x80) {\n            this._dumped = true;\n            this._u = 0;\n        } else if (oldValue) {\n            this._dumped = false;\n            this._timestamp = this._cpuTimeProvider();\n        }\n    }\n\n    inpt(): number {\n        this._updateValue();\n\n        const state = this._dumped ? false : this._u >= this._uThresh;\n\n        return state ? 0x80 : 0;\n    }\n\n    private _updateValue(): void {\n        if (this._dumped) {\n            return;\n        }\n\n        const timestamp = this._cpuTimeProvider();\n\n        // Update the voltage with the integral between the two timestamps\n        this._u =\n            U * (1 - (1 - this._u / U) * Math.exp(-(timestamp - this._timestamp) / (this._value * RPOT + R0) / C));\n\n        this._timestamp = timestamp;\n    }\n\n    private _uThresh = 0;\n    private _u = 0;\n    private _dumped = false;\n    private _value = 0.5;\n    private _timestamp = 0;\n\n    private _cpuTimeProvider: () => number = null;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport VideoOutputInterface from '../../io/VideoOutputInterface';\nimport RGBASurfaceInterface from '../../../video/surface/RGBASurfaceInterface';\nimport Config from '../Config';\n\nconst enum Metrics {\n    vblankNTSC = 40,\n    vblankPAL = 48,\n    kernelNTSC = 192,\n    kernelPAL = 228,\n    overscanNTSC = 30,\n    overscanPAL = 36,\n    vsync = 3,\n    visibleOverscan = 20,\n    maxUnderscan = 10,\n    maxLinesWithoutVsync = 150\n}\n\nconst enum State {\n    waitForVsyncStart,\n    waitForVsyncEnd,\n    waitForFrameStart,\n    frame,\n    overscan\n}\n\nexport default class FrameManager {\n    constructor(private _config: Config) {\n        switch (this._config.tvMode) {\n            case Config.TvMode.ntsc:\n                this._vblankLines = Metrics.vblankNTSC;\n                this._kernelLines = Metrics.kernelNTSC;\n                this._overscanLines = Metrics.overscanNTSC;\n                break;\n\n            case Config.TvMode.pal:\n            case Config.TvMode.secam:\n                this._vblankLines = Metrics.vblankPAL;\n                this._kernelLines = Metrics.kernelPAL;\n                this._overscanLines = Metrics.overscanPAL;\n                break;\n\n            default:\n                throw new Error(`invalid tv mode ${this._config.tvMode}`);\n        }\n\n        this._frameStart = this._config.frameStart;\n\n        this.reset();\n    }\n\n    reset(): void {\n        this.vblank = false;\n        this.surfaceBuffer = null;\n        this._linesWithoutVsync = 0;\n        this._state = State.waitForVsyncStart;\n        this._vsync = false;\n        this._lineInState = 0;\n        this._surface = null;\n    }\n\n    nextLine(): void {\n        if (!this._surfaceFactory) {\n            return;\n        }\n\n        this._lineInState++;\n\n        switch (this._state) {\n            case State.waitForVsyncStart:\n            case State.waitForVsyncEnd:\n                if (++this._linesWithoutVsync > Metrics.maxLinesWithoutVsync) {\n                    this._setState(State.waitForFrameStart);\n                }\n\n                break;\n\n            case State.waitForFrameStart:\n                if (this._frameStart >= 0) {\n                    if (this._lineInState > this._frameStart) {\n                        this._startFrame();\n                    }\n                } else {\n                    if (\n                        this._lineInState >=\n                        (this.vblank ? this._vblankLines : this._vblankLines - Metrics.maxUnderscan)\n                    ) {\n                        this._startFrame();\n                    }\n                }\n\n                break;\n\n            case State.frame:\n                if (this._lineInState >= this._kernelLines + Metrics.visibleOverscan) {\n                    this._finalizeFrame();\n                }\n                break;\n\n            case State.overscan:\n                if (this._lineInState >= this._overscanLines - Metrics.visibleOverscan) {\n                    this._setState(State.waitForVsyncStart);\n                }\n                break;\n        }\n    }\n\n    isRendering(): boolean {\n        return this._state === State.frame && !!this._surface;\n    }\n\n    setVblank(vblank: boolean): void {\n        if (this._surfaceFactory) {\n            this.vblank = vblank;\n        }\n    }\n\n    setVsync(vsync: boolean): void {\n        if (!this._surfaceFactory || vsync === this._vsync) {\n            return;\n        }\n\n        this._vsync = vsync;\n\n        switch (this._state) {\n            case State.waitForVsyncStart:\n                this._linesWithoutVsync = 0;\n            case State.waitForFrameStart:\n            case State.overscan:\n                if (vsync) {\n                    this._setState(State.waitForVsyncEnd);\n                }\n                break;\n\n            case State.waitForVsyncEnd:\n                if (!vsync) {\n                    this._setState(State.waitForFrameStart);\n                }\n                break;\n\n            case State.frame:\n                if (vsync) {\n                    // State is reset by finalizeFrame\n                    this._finalizeFrame();\n                }\n                break;\n        }\n    }\n\n    getHeight(): number {\n        return this._kernelLines + Metrics.visibleOverscan;\n    }\n\n    setSurfaceFactory(factory: VideoOutputInterface.SurfaceFactoryInterface): void {\n        this._surfaceFactory = factory;\n    }\n\n    getCurrentLine(): number {\n        return this._state === State.frame ? this._lineInState : 0;\n    }\n\n    getDebugState(): string {\n        return `${this._getReadableState()}, line = ${this._lineInState}, ` + `vblank = ${this.vblank ? '1' : '0'}`;\n    }\n\n    private _getReadableState(): string {\n        switch (this._state) {\n            case State.waitForVsyncStart:\n                return `wait for vsync start`;\n\n            case State.waitForVsyncEnd:\n                return `wait for vsync end`;\n\n            case State.waitForFrameStart:\n                return `wait for frame start`;\n\n            case State.frame:\n                return `frame`;\n\n            case State.overscan:\n                return `overscan`;\n        }\n    }\n\n    private _startFrame(): void {\n        this._setState(State.frame);\n        this._surface = this._surfaceFactory();\n        this.surfaceBuffer = this._surface.getBuffer();\n    }\n\n    private _finalizeFrame(): void {\n        if (this._state !== State.frame) {\n            throw new Error(`finalize frame in invalid state ${this._state}`);\n        }\n\n        this.newFrame.dispatch(this._surface);\n        this._setState(State.overscan);\n    }\n\n    private _setState(newState: State) {\n        this._state = newState;\n        this._lineInState = 0;\n    }\n\n    newFrame = new Event<RGBASurfaceInterface>();\n\n    vblank = false;\n    surfaceBuffer: RGBASurfaceInterface.BufferInterface = null;\n\n    private _vblankLines = 0;\n    private _kernelLines = 0;\n    private _overscanLines = 0;\n\n    private _linesWithoutVsync = 0;\n    private _state = State.waitForVsyncStart;\n\n    private _vsync = false;\n    private _lineInState = 0;\n\n    private _surfaceFactory: VideoOutputInterface.SurfaceFactoryInterface = null;\n    private _surface: RGBASurfaceInterface = null;\n\n    private _frameStart = -1;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nclass DelayQueue {\n    constructor(private _length: number, size: number) {\n        this._queue = new Array<QueueEntry>(this._length);\n\n        for (let i = 0; i < this._length; i++) {\n            this._queue[i] = new QueueEntry(size);\n        }\n    }\n\n    reset() {\n        for (let i = 0; i < this._length; i++) {\n            this._queue[i].nextIndex = 0;\n        }\n    }\n\n    push(address: number, value: number, delay: number): this {\n        if (delay >= this._length) {\n            throw new Error('delay exceeds queue length');\n        }\n\n        const currentIndex = this._indices[address];\n\n        if (currentIndex < this._length) {\n            this._queue[currentIndex].remove(address);\n        }\n\n        const index = (this._nextIndex + delay) % this._length;\n        this._queue[index].push(address, value);\n\n        this._indices[address] = index;\n\n        return this;\n    }\n\n    execute<T>(handler: (address: number, value: number, scope: T) => void, scope?: T): void {\n        const entry = this._queue[this._nextIndex];\n        this._nextIndex = (this._nextIndex + 1) % this._length;\n\n        for (let i = 0; i < entry.nextIndex; i++) {\n            handler(entry.addresses[i], entry.values[i], scope);\n            this._indices[entry.addresses[i]] = 0xff;\n        }\n\n        entry.nextIndex = 0;\n    }\n\n    private _queue: Array<QueueEntry>;\n    private _nextIndex = 0;\n    private _indices = new Uint8Array(0xff);\n}\n\nclass QueueEntry {\n    constructor(public size: number) {\n        this.addresses = new Uint8Array(size);\n        this.values = new Uint8Array(size);\n    }\n\n    push(address: number, value: number): void {\n        if (this.nextIndex >= this.size) {\n            throw new Error('delay queue overflow');\n        }\n\n        this.addresses[this.nextIndex] = address;\n        this.values[this.nextIndex] = value;\n\n        this.nextIndex++;\n    }\n\n    remove(address: number): void {\n        let i: number;\n\n        for (i = 0; i < this.nextIndex; i++) {\n            if (this.addresses[i] === address) {\n                break;\n            }\n        }\n\n        if (i < this.nextIndex) {\n            this.addresses[i] = this.addresses[this.nextIndex - 1];\n            this.values[i] = this.values[this.nextIndex - 1];\n            this.nextIndex--;\n        }\n    }\n\n    addresses: Uint8Array;\n    values: Uint8Array;\n    nextIndex = 0;\n}\n\nexport { DelayQueue as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nexport const NTSC = new Uint32Array([\n    0xff000000,\n    0xff4a4a4a,\n    0xff6f6f6f,\n    0xff8e8e8e,\n    0xffaaaaaa,\n    0xffc0c0c0,\n    0xffd6d6d6,\n    0xffececec,\n    0xff004848,\n    0xff0f6969,\n    0xff1d8686,\n    0xff2aa2a2,\n    0xff35bbbb,\n    0xff40d2d2,\n    0xff4ae8e8,\n    0xff54fcfc,\n    0xff002c7c,\n    0xff114890,\n    0xff2162a2,\n    0xff307ab4,\n    0xff3d90c3,\n    0xff4aa4d2,\n    0xff55b7df,\n    0xff60c8ec,\n    0xff001c90,\n    0xff1539a3,\n    0xff2853b5,\n    0xff3a6cc6,\n    0xff4a82d5,\n    0xff5997e3,\n    0xff67aaf0,\n    0xff74bcfc,\n    0xff000094,\n    0xff1a1aa7,\n    0xff3232b8,\n    0xff4848c8,\n    0xff5c5cd6,\n    0xff6f6fe4,\n    0xff8080f0,\n    0xff9090fc,\n    0xff640084,\n    0xff7a1997,\n    0xff8f30a8,\n    0xffa246b8,\n    0xffb359c6,\n    0xffc36cd4,\n    0xffd27ce0,\n    0xffe08cec,\n    0xff840050,\n    0xff9a1968,\n    0xffad307d,\n    0xffc04692,\n    0xffd059a4,\n    0xffe06cb5,\n    0xffee7cc5,\n    0xfffc8cd4,\n    0xff900014,\n    0xffa31a33,\n    0xffb5324e,\n    0xffc64868,\n    0xffd55c7f,\n    0xffe36f95,\n    0xfff080a9,\n    0xfffc90bc,\n    0xff940000,\n    0xffa71a18,\n    0xffb8322d,\n    0xffc84842,\n    0xffd65c54,\n    0xffe46f65,\n    0xfff08075,\n    0xfffc9084,\n    0xff881c00,\n    0xff9d3b18,\n    0xffb0572d,\n    0xffc27242,\n    0xffd28a54,\n    0xffe1a065,\n    0xffefb575,\n    0xfffcc884,\n    0xff643000,\n    0xff805018,\n    0xff986d2d,\n    0xffb08842,\n    0xffc5a054,\n    0xffd9b765,\n    0xffebcc75,\n    0xfffce084,\n    0xff304000,\n    0xff4e6218,\n    0xff69812d,\n    0xff829e42,\n    0xff99b854,\n    0xffaed165,\n    0xffc2e775,\n    0xffd4fc84,\n    0xff004400,\n    0xff1a661a,\n    0xff328432,\n    0xff48a048,\n    0xff5cba5c,\n    0xff6fd26f,\n    0xff80e880,\n    0xff90fc90,\n    0xff003c14,\n    0xff185f35,\n    0xff2d7e52,\n    0xff429c6e,\n    0xff54b787,\n    0xff65d09e,\n    0xff75e7b4,\n    0xff84fcc8,\n    0xff003830,\n    0xff165950,\n    0xff2b766d,\n    0xff3e9288,\n    0xff4faba0,\n    0xff5fc2b7,\n    0xff6ed8cc,\n    0xff7cece0,\n    0xff002c48,\n    0xff144d69,\n    0xff266a86,\n    0xff3886a2,\n    0xff479fbb,\n    0xff56b6d2,\n    0xff63cce8,\n    0xff70e0fc\n]);\n\nexport const PAL = new Uint32Array([\n    0xff000000,\n    0xff2b2b2b,\n    0xff525252,\n    0xff767676,\n    0xff979797,\n    0xffb6b6b6,\n    0xffd2d2d2,\n    0xffececec,\n    0xff000000,\n    0xff2b2b2b,\n    0xff525252,\n    0xff767676,\n    0xff979797,\n    0xffb6b6b6,\n    0xffd2d2d2,\n    0xffececec,\n    0xff005880,\n    0xff1a7196,\n    0xff3287ab,\n    0xff489cbe,\n    0xff5cafcf,\n    0xff6fc0df,\n    0xff80d1ee,\n    0xff90e0fc,\n    0xff005c44,\n    0xff1a795e,\n    0xff329376,\n    0xff48ac8c,\n    0xff5cc2a0,\n    0xff6fd7b3,\n    0xff80eac4,\n    0xff90fcd4,\n    0xff003470,\n    0xff1a5189,\n    0xff326ba0,\n    0xff4884b6,\n    0xff5c9ac9,\n    0xff6fafdc,\n    0xff80c2ec,\n    0xff90d4fc,\n    0xff146400,\n    0xff35801a,\n    0xff529832,\n    0xff6eb048,\n    0xff87c55c,\n    0xff9ed96f,\n    0xffb4eb80,\n    0xffc8fc90,\n    0xff140070,\n    0xff351a89,\n    0xff5232a0,\n    0xff6e48b6,\n    0xff875cc9,\n    0xff9e6fdc,\n    0xffb480ec,\n    0xffc890fc,\n    0xff5c5c00,\n    0xff76761a,\n    0xff8e8e32,\n    0xffa4a448,\n    0xffb8b85c,\n    0xffcbcb6f,\n    0xffdcdc80,\n    0xffecec90,\n    0xff5c0070,\n    0xff741a84,\n    0xff893296,\n    0xff9e48a8,\n    0xffb05cb7,\n    0xffc16fc6,\n    0xffd180d3,\n    0xffe090e0,\n    0xff703c00,\n    0xff895a19,\n    0xffa0752f,\n    0xffb68e44,\n    0xffc9a557,\n    0xffdcba68,\n    0xffecce79,\n    0xfffce088,\n    0xff700058,\n    0xff891a6e,\n    0xffa03283,\n    0xffb64896,\n    0xffc95ca7,\n    0xffdc6fb7,\n    0xffec80c6,\n    0xfffc90d4,\n    0xff702000,\n    0xff893f19,\n    0xffa05a2f,\n    0xffb67444,\n    0xffc98b57,\n    0xffdca168,\n    0xffecb579,\n    0xfffcc888,\n    0xff800034,\n    0xff961a4a,\n    0xffab325f,\n    0xffbe4872,\n    0xffcf5c83,\n    0xffdf6f93,\n    0xffee80a2,\n    0xfffc90b0,\n    0xff880000,\n    0xff9d1a1a,\n    0xffb03232,\n    0xffc24848,\n    0xffd25c5c,\n    0xffe16f6f,\n    0xffef8080,\n    0xfffc9090,\n    0xff000000,\n    0xff2b2b2b,\n    0xff525252,\n    0xff767676,\n    0xff979797,\n    0xffb6b6b6,\n    0xffd2d2d2,\n    0xffececec,\n    0xff000000,\n    0xff2b2b2b,\n    0xff525252,\n    0xff767676,\n    0xff979797,\n    0xffb6b6b6,\n    0xffd2d2d2,\n    0xffececec\n]);\n\nexport const SECAM = new Uint32Array([\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff,\n    0xff000000,\n    0xffff2121,\n    0xff793cf0,\n    0xffff50ff,\n    0xff00ff7f,\n    0xffffff7f,\n    0xff3fffff,\n    0xffffffff\n]);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport VideoOutputInterface from '../../io/VideoOutputInterface';\nimport WaveformAudioOutputInterface from '../../io/WaveformAudioOutputInterface';\nimport PCMAudioOutputInterface from '../../io/PCMAudioOutputInterface';\nimport DigitalJoystickInterface from '../../io/DigitalJoystickInterface';\nimport RGBASurfaceInterface from '../../../video/surface/RGBASurfaceInterface';\nimport Config from '../Config';\nimport CpuInterface from '../../cpu/CpuInterface';\nimport WaveformAudio from './WaveformAudio';\nimport PCMAudio from './PCMAudio';\nimport AudioInterface from './AudioInterface';\nimport Paddle from '../../io/Paddle';\nimport Bus from '../Bus';\n\nimport Missile from './Missile';\nimport Playfield from './Playfield';\nimport Player from './Player';\nimport Ball from './Ball';\nimport LatchedInput from './LatchedInput';\nimport PaddleReader from './PaddleReader';\nimport FrameManager from './FrameManager';\nimport DelayQueue from './DelayQueue';\nimport * as palette from './palette';\n\nconst enum Metrics {\n    frameLinesPAL = 312,\n    frameLinesNTSC = 262\n}\n\nconst enum Delay {\n    hmove = 6,\n    pf = 2,\n    grp = 1,\n    shufflePlayer = 1,\n    shuffleBall = 1,\n    hmp = 2,\n    hmm = 2,\n    hmbl = 2,\n    hmclr = 2,\n    refp = 1,\n    vblank = 1,\n    enabl = 1,\n    enam = 1\n}\n\nconst enum ResxCounter {\n    hblank = 159,\n    lateHblank = 158,\n    frame = 157,\n    // This parameter still has room for tuning. If we go lower than 73, long005 will show\n    // a slight artifact (still have to crosscheck on real hardware), if we go lower than\n    // 70, the G.I. Joe will show an artifact (hole in roof).\n    lateHblankThreshold = 73\n}\n\n// Each bit in the collision mask identifies a single collision pair\nconst enum CollisionMask {\n    player0 = 0b0111110000000000,\n    player1 = 0b0100001111000000,\n    missile0 = 0b0010001000111000,\n    missile1 = 0b0001000100100110,\n    ball = 0b0000100010010101,\n    playfield = 0b0000010001001011\n}\n\nconst enum HState {\n    blank,\n    frame\n}\nconst enum Priority {\n    normal,\n    pfp,\n    score\n}\n\nclass Tia implements VideoOutputInterface {\n    constructor(\n        private _config: Config,\n        joystick0: DigitalJoystickInterface,\n        joystick1: DigitalJoystickInterface,\n        paddles: Array<Paddle>\n    ) {\n        this._frameManager = new FrameManager(this._config);\n        this._frameManager.newFrame.addHandler(Tia._onNewFrame, this);\n\n        this._palette = this._getPalette(this._config);\n        this._input0 = new LatchedInput(joystick0.getFire());\n        this._input1 = new LatchedInput(joystick1.getFire());\n\n        this._pcmAudio = new PCMAudio(this._config);\n        const pcmChannels = this._pcmAudio.getChannels();\n\n        for (let i = 0; i < 2; i++) {\n            this._waveformAudio[i] = new WaveformAudio(this._config);\n\n            this._audio[i] = this._config.pcmAudio ? pcmChannels[i] : this._waveformAudio[i];\n        }\n\n        const clockFreq = this._getClockFreq(this._config);\n\n        this._paddles = new Array(4);\n        for (let i = 0; i < 4; i++) {\n            this._paddles[i] = new PaddleReader(clockFreq, paddles[i]);\n        }\n\n        this.reset();\n    }\n\n    reset(): void {\n        this._hctr = 0;\n        this._movementInProgress = false;\n        this._extendedHblank = false;\n        this._movementClock = 0;\n        this._priority = Priority.normal;\n        this._hstate = HState.blank;\n        this._collisionMask = 0;\n        this._colorBk = 0xff000000;\n        this._linesSinceChange = 0;\n        this._collisionUpdateRequired = false;\n        this._maxLinesTotal = 0;\n        this._xDelta = 0;\n\n        this._delayQueue.reset();\n        this._frameManager.reset();\n\n        this._missile0.reset();\n        this._missile1.reset();\n        this._player0.reset();\n        this._player1.reset();\n        this._playfield.reset();\n        this._ball.reset();\n\n        this._audio[0].reset();\n        this._audio[1].reset();\n\n        this._input0.reset();\n        this._input1.reset();\n\n        for (let i = 0; i < 4; i++) {\n            this._paddles[i].reset();\n        }\n\n        if (this._cpu) {\n            this._cpu.resume();\n        }\n    }\n\n    setCpu(cpu: CpuInterface): Tia {\n        this._cpu = cpu;\n\n        return this;\n    }\n\n    setCpuTimeProvider(provider: () => number): this {\n        for (let i = 0; i < 4; i++) {\n            this._paddles[i].setCpuTimeProvider(provider);\n        }\n\n        return this;\n    }\n\n    getWidth(): number {\n        return 160;\n    }\n\n    getHeight(): number {\n        return this._frameManager.getHeight();\n    }\n\n    setSurfaceFactory(factory: VideoOutputInterface.SurfaceFactoryInterface): Tia {\n        this._frameManager.setSurfaceFactory(factory);\n\n        return this;\n    }\n\n    getWaveformChannel(i: number): WaveformAudioOutputInterface {\n        return this._waveformAudio[i];\n    }\n\n    getPCMChannel(): PCMAudioOutputInterface {\n        return this._pcmAudio;\n    }\n\n    setAudioEnabled(state: boolean): void {\n        this._audio[0].setActive(state && this._config.enableAudio);\n        this._audio[1].setActive(state && this._config.enableAudio);\n    }\n\n    read(address: number): number {\n        const lastDataBusValue = this._bus.getLastDataBusValue();\n\n        let result: number;\n\n        // Only keep the lowest four bits\n        switch (address & 0x0f) {\n            case Tia.Registers.inpt0:\n                result = (this._config.emulatePaddles ? this._paddles[0].inpt() : 0) | (lastDataBusValue & 0x40);\n                break;\n\n            case Tia.Registers.inpt1:\n                result = (this._config.emulatePaddles ? this._paddles[1].inpt() : 0) | (lastDataBusValue & 0x40);\n                break;\n\n            case Tia.Registers.inpt2:\n                result = (this._config.emulatePaddles ? this._paddles[2].inpt() : 0) | (lastDataBusValue & 0x40);\n                break;\n\n            case Tia.Registers.inpt3:\n                result = (this._config.emulatePaddles ? this._paddles[3].inpt() : 0) | (lastDataBusValue & 0x40);\n                break;\n\n            case Tia.Registers.inpt4:\n                result = this._input0.inpt() | (lastDataBusValue & 0x40);\n                break;\n\n            case Tia.Registers.inpt5:\n                result = this._input1.inpt() | (lastDataBusValue & 0x40);\n                break;\n\n            case Tia.Registers.cxm0p:\n                result =\n                    (this._collisionMask & CollisionMask.missile0 & CollisionMask.player0 ? 0x40 : 0) |\n                    (this._collisionMask & CollisionMask.missile0 & CollisionMask.player1 ? 0x80 : 0);\n                break;\n\n            case Tia.Registers.cxm1p:\n                result =\n                    (this._collisionMask & CollisionMask.missile1 & CollisionMask.player1 ? 0x40 : 0) |\n                    (this._collisionMask & CollisionMask.missile1 & CollisionMask.player0 ? 0x80 : 0);\n                break;\n\n            case Tia.Registers.cxp0fb:\n                result =\n                    (this._collisionMask & CollisionMask.player0 & CollisionMask.ball ? 0x40 : 0) |\n                    (this._collisionMask & CollisionMask.player0 & CollisionMask.playfield ? 0x80 : 0);\n                break;\n\n            case Tia.Registers.cxp1fb:\n                result =\n                    (this._collisionMask & CollisionMask.player1 & CollisionMask.ball ? 0x40 : 0) |\n                    (this._collisionMask & CollisionMask.player1 & CollisionMask.playfield ? 0x80 : 0);\n                break;\n\n            case Tia.Registers.cxm0fb:\n                result =\n                    (this._collisionMask & CollisionMask.missile0 & CollisionMask.ball ? 0x40 : 0) |\n                    (this._collisionMask & CollisionMask.missile0 & CollisionMask.playfield ? 0x80 : 0);\n                break;\n\n            case Tia.Registers.cxm1fb:\n                result =\n                    (this._collisionMask & CollisionMask.missile1 & CollisionMask.ball ? 0x40 : 0) |\n                    (this._collisionMask & CollisionMask.missile1 & CollisionMask.playfield ? 0x80 : 0);\n                break;\n\n            case Tia.Registers.cxppmm:\n                result =\n                    (this._collisionMask & CollisionMask.missile0 & CollisionMask.missile1 ? 0x40 : 0) |\n                    (this._collisionMask & CollisionMask.player0 & CollisionMask.player1 ? 0x80 : 0);\n                break;\n\n            case Tia.Registers.cxblpf:\n                result = this._collisionMask & CollisionMask.ball & CollisionMask.playfield ? 0x80 : 0;\n                break;\n\n            default:\n                result = 0;\n                break;\n        }\n\n        return (result & 0xc0) | (lastDataBusValue & 0x3f);\n    }\n\n    peek(address: number): number {\n        return this.read(address);\n    }\n\n    write(address: number, value: number): void {\n        let v = 0;\n\n        // Mask out A6 - A15\n        switch (address & 0x3f) {\n            case Tia.Registers.wsync:\n                this._cpu.halt();\n                break;\n\n            case Tia.Registers.rsync:\n                this._flushLineCache();\n                this._rsync();\n                break;\n\n            case Tia.Registers.vsync:\n                this._frameManager.setVsync((value & 0x02) > 0);\n                break;\n\n            case Tia.Registers.vblank:\n                this._input0.vblank(value);\n                this._input1.vblank(value);\n\n                for (let i = 0; i < 4; i++) {\n                    this._paddles[i].vblank(value);\n                }\n\n                this._delayQueue.push(Tia.Registers.vblank, value, Delay.vblank);\n                break;\n\n            case Tia.Registers.enam0:\n                this._delayQueue.push(Tia.Registers.enam0, value, Delay.enam);\n                break;\n\n            case Tia.Registers.enam1:\n                this._delayQueue.push(Tia.Registers.enam1, value, Delay.enam);\n                break;\n\n            case Tia.Registers.hmm0:\n                this._delayQueue.push(Tia.Registers.hmm0, value, Delay.hmm);\n                break;\n\n            case Tia.Registers.hmm1:\n                this._delayQueue.push(Tia.Registers.hmm1, value, Delay.hmm);\n                break;\n\n            case Tia.Registers.resm0:\n                this._flushLineCache();\n                this._missile0.resm(this._resxCounter(), this._hstate === HState.blank);\n                break;\n\n            case Tia.Registers.resm1:\n                this._flushLineCache();\n                this._missile1.resm(this._resxCounter(), this._hstate === HState.blank);\n                break;\n\n            case Tia.Registers.resmp0:\n                this._missile0.resmp(value, this._player0);\n                break;\n\n            case Tia.Registers.resmp1:\n                this._missile1.resmp(value, this._player1);\n                break;\n\n            case Tia.Registers.hmclr:\n                this._delayQueue.push(Tia.Registers.hmclr, value, Delay.hmclr);\n                break;\n\n            case Tia.Registers.nusiz0:\n                this._flushLineCache();\n                this._missile0.nusiz(value);\n                this._player0.nusiz(value, this._hstate === HState.blank);\n                break;\n\n            case Tia.Registers.nusiz1:\n                this._flushLineCache();\n                this._missile1.nusiz(value);\n                this._player1.nusiz(value, this._hstate === HState.blank);\n                break;\n\n            case Tia.Registers.hmove:\n                this._delayQueue.push(Tia.Registers.hmove, value, Delay.hmove);\n                break;\n\n            case Tia.Registers.colubk:\n                this._flushLineCache();\n                this._colorBk = this._palette[(value & 0xff) >>> 1];\n                break;\n\n            case Tia.Registers.colup0:\n                v = this._palette[(value & 0xff) >>> 1];\n                this._missile0.setColor(v);\n                this._player0.setColor(v);\n                this._playfield.setColorP0(v);\n\n                break;\n\n            case Tia.Registers.colup1:\n                v = this._palette[(value & 0xff) >>> 1];\n                this._missile1.setColor(v);\n                this._player1.setColor(v);\n                this._playfield.setColorP1(v);\n\n                break;\n\n            case Tia.Registers.pf0:\n                this._delayQueue.push(Tia.Registers.pf0, value, Delay.pf);\n                break;\n\n            case Tia.Registers.pf1:\n                this._delayQueue.push(Tia.Registers.pf1, value, Delay.pf);\n                break;\n\n            case Tia.Registers.pf2:\n                this._delayQueue.push(Tia.Registers.pf2, value, Delay.pf);\n                break;\n\n            case Tia.Registers.ctrlpf:\n                this._setPriority(value);\n                this._playfield.ctrlpf(value);\n                this._ball.ctrlpf(value);\n                break;\n\n            case Tia.Registers.colupf:\n                this._flushLineCache();\n                v = this._palette[(value & 0xff) >>> 1];\n                this._playfield.setColor(v);\n                this._ball.color = v;\n                break;\n\n            case Tia.Registers.grp0:\n                this._delayQueue\n                    .push(Tia.Registers.grp0, value, Delay.grp)\n                    .push(Tia.Registers._shuffleP1, 0, Delay.shufflePlayer);\n\n                break;\n\n            case Tia.Registers.grp1:\n                this._delayQueue\n                    .push(Tia.Registers.grp1, value, Delay.grp)\n                    .push(Tia.Registers._shuffleP0, 0, Delay.shufflePlayer)\n                    .push(Tia.Registers._shuffleBL, 0, Delay.shuffleBall);\n\n                break;\n\n            case Tia.Registers.resp0:\n                this._flushLineCache();\n                this._player0.resp(this._resxCounter());\n                break;\n\n            case Tia.Registers.resp1:\n                this._flushLineCache();\n                this._player1.resp(this._resxCounter());\n                break;\n\n            case Tia.Registers.refp0:\n                this._delayQueue.push(Tia.Registers.refp0, value, Delay.refp);\n                break;\n\n            case Tia.Registers.refp1:\n                this._delayQueue.push(Tia.Registers.refp1, value, Delay.refp);\n                break;\n\n            case Tia.Registers.hmp0:\n                this._delayQueue.push(Tia.Registers.hmp0, value, Delay.hmp);\n                break;\n\n            case Tia.Registers.hmp1:\n                this._delayQueue.push(Tia.Registers.hmp1, value, Delay.hmp);\n                break;\n\n            case Tia.Registers.vdelp0:\n                this._player0.vdelp(value);\n                break;\n\n            case Tia.Registers.vdelp1:\n                this._player1.vdelp(value);\n                break;\n\n            case Tia.Registers.enabl:\n                this._delayQueue.push(Tia.Registers.enabl, value, Delay.enabl);\n                break;\n\n            case Tia.Registers.hmbl:\n                this._delayQueue.push(Tia.Registers.hmbl, value, Delay.hmbl);\n                break;\n\n            case Tia.Registers.resbl:\n                this._flushLineCache();\n                this._ball.resbl(this._resxCounter());\n                break;\n\n            case Tia.Registers.vdelbl:\n                this._ball.vdelbl(value);\n                break;\n\n            case Tia.Registers.cxclr:\n                this._flushLineCache();\n                this._collisionMask = 0;\n                break;\n\n            case Tia.Registers.audc0:\n                this._audio[0].audc(value);\n                break;\n\n            case Tia.Registers.audc1:\n                this._audio[1].audc(value);\n                break;\n\n            case Tia.Registers.audf0:\n                this._audio[0].audf(value);\n                break;\n\n            case Tia.Registers.audf1:\n                this._audio[1].audf(value);\n                break;\n\n            case Tia.Registers.audv0:\n                this._audio[0].audv(value);\n                break;\n\n            case Tia.Registers.audv1:\n                this._audio[1].audv(value);\n                break;\n        }\n    }\n\n    getDebugState(): string {\n        return (\n            '' +\n            `hclock: ${this._hctr}   line: ${this._frameManager.getCurrentLine()}\\n` +\n            this._frameManager.getDebugState()\n        );\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    cycle(): void {\n        this._delayQueue.execute(Tia._delayedWrite, this);\n\n        this._collisionUpdateRequired = false;\n\n        if (this._linesSinceChange < 2) {\n            this._tickMovement();\n\n            if (this._hstate === HState.blank) {\n                this._tickHblank();\n            } else {\n                this._tickHframe();\n            }\n\n            if (this._collisionUpdateRequired && !this._frameManager.vblank) {\n                this._updateCollision();\n            }\n        } else {\n            if (this._hctr === 0) {\n                this._cpu.resume();\n            }\n        }\n\n        if (++this._hctr >= 228) {\n            this._nextLine();\n        }\n\n        if (this._config.pcmAudio) {\n            this._pcmAudio.tick();\n        }\n    }\n\n    private static _delayedWrite(address: number, value: number, self: Tia): void {\n        switch (address) {\n            case Tia.Registers.vblank:\n                self._flushLineCache();\n                self._frameManager.setVblank((value & 0x02) > 0);\n                break;\n\n            case Tia.Registers.hmove:\n                self._flushLineCache();\n\n                // Start the timer and increase hblank\n                self._movementClock = 0;\n                self._movementInProgress = true;\n\n                if (!self._extendedHblank) {\n                    self._clearHmoveComb();\n                    self._extendedHblank = true;\n                }\n\n                // Start sprite movement\n                self._missile0.startMovement();\n                self._missile1.startMovement();\n                self._player0.startMovement();\n                self._player1.startMovement();\n                self._ball.startMovement();\n\n                break;\n\n            case Tia.Registers.pf0:\n                self._playfield.pf0(value);\n                break;\n\n            case Tia.Registers.pf1:\n                self._playfield.pf1(value);\n                break;\n\n            case Tia.Registers.pf2:\n                self._playfield.pf2(value);\n                break;\n\n            case Tia.Registers.grp0:\n                self._player0.grp(value);\n                break;\n\n            case Tia.Registers.grp1:\n                self._player1.grp(value);\n                break;\n\n            case Tia.Registers._shuffleP0:\n                self._player0.shufflePatterns();\n                break;\n\n            case Tia.Registers._shuffleP1:\n                self._player1.shufflePatterns();\n                break;\n\n            case Tia.Registers.hmp0:\n                self._player0.hmp(value);\n                break;\n\n            case Tia.Registers.hmp1:\n                self._player1.hmp(value);\n                break;\n\n            case Tia.Registers.hmm0:\n                self._missile0.hmm(value);\n                break;\n\n            case Tia.Registers.hmm1:\n                self._missile1.hmm(value);\n                break;\n\n            case Tia.Registers.hmbl:\n                self._ball.hmbl(value);\n                break;\n\n            case Tia.Registers.hmclr:\n                self._missile0.hmm(0);\n                self._missile1.hmm(0);\n                self._player0.hmp(0);\n                self._player1.hmp(0);\n                self._ball.hmbl(0);\n                break;\n\n            case Tia.Registers.refp0:\n                self._player0.refp(value);\n                break;\n\n            case Tia.Registers.refp1:\n                self._player1.refp(value);\n                break;\n\n            case Tia.Registers._shuffleBL:\n                self._ball.shuffleStatus();\n                break;\n\n            case Tia.Registers.enabl:\n                self._ball.enabl(value);\n                break;\n\n            case Tia.Registers.enam0:\n                self._missile0.enam(value);\n                break;\n\n            case Tia.Registers.enam1:\n                self._missile1.enam(value);\n                break;\n        }\n    }\n\n    private static _onNewFrame(surface: RGBASurfaceInterface, self: Tia): void {\n        const linesTotal = self._frameManager.getCurrentLine();\n\n        if (linesTotal > self._maxLinesTotal) {\n            self._maxLinesTotal = linesTotal;\n        }\n\n        if (linesTotal < self._maxLinesTotal) {\n            const buffer = surface.getBuffer(),\n                base = 160 * linesTotal,\n                boundary = self._maxLinesTotal * 160;\n\n            for (let i = base; i < boundary; i++) {\n                buffer[i] = 0xff000000;\n            }\n        }\n\n        self.newFrame.dispatch(surface);\n    }\n\n    private _tickMovement(): void {\n        if (!this._movementInProgress) {\n            return;\n        }\n\n        // color clock mod 4\n        if ((this._hctr & 0x3) === 0) {\n            // The tick is only propagated to the sprite counters if we are in blank\n            // mode --- in frame mode, it overlaps with the sprite clock and is gobbled.\n            const apply = this._hstate === HState.blank;\n\n            // did any sprite receive the clock?\n            let m = false;\n\n            const movementCounter = this._movementClock > 15 ? 0 : this._movementClock;\n\n            m = this._missile0.movementTick(movementCounter, apply) || m;\n            m = this._missile1.movementTick(movementCounter, apply) || m;\n            m = this._player0.movementTick(movementCounter, apply) || m;\n            m = this._player1.movementTick(movementCounter, apply) || m;\n            m = this._ball.movementTick(movementCounter, apply) || m;\n\n            // stop collision counter if all latches were cleared\n            this._movementInProgress = m;\n\n            // the collision latches must be updated if any sprite received a tick\n            this._collisionUpdateRequired = m;\n\n            this._movementClock++;\n        }\n    }\n\n    private _tickHblank() {\n        switch (this._hctr) {\n            case 0:\n                this._extendedHblank = false;\n                this._cpu.resume();\n                break;\n\n            case 67:\n                if (!this._extendedHblank) {\n                    this._hstate = HState.frame;\n                }\n\n                break;\n\n            case 75:\n                if (this._extendedHblank) {\n                    this._hstate = HState.frame;\n                }\n\n                break;\n        }\n\n        if (this._extendedHblank && this._hctr > 67) {\n            this._playfield.tick(this._hctr - 68 + this._xDelta);\n        }\n    }\n\n    private _tickHframe() {\n        const y = this._frameManager.getCurrentLine(),\n            x = this._hctr - 68 + this._xDelta;\n\n        // collision latches must be updated if we cannot use cached line daa\n        this._collisionUpdateRequired = true;\n\n        // The playfield does not have its own counter and must be cycled before rendering the sprites.\n        this._playfield.tick(x);\n\n        // spin sprite timers\n        this._tickSprites();\n\n        // render pixel data\n        if (this._frameManager.isRendering()) {\n            this._renderPixel(x, y);\n        }\n    }\n\n    private _tickSprites() {\n        this._missile0.tick(true);\n        this._missile1.tick(true);\n        this._player0.tick();\n        this._player1.tick();\n        this._ball.tick(true);\n    }\n\n    private _nextLine() {\n        if (this._linesSinceChange >= 2) {\n            this._cloneLastLine();\n        }\n\n        // Reset the counters\n        this._hctr = 0;\n\n        this._playfield.tick(0);\n\n        if (!this._movementInProgress) {\n            this._linesSinceChange++;\n        }\n\n        this._hstate = HState.blank;\n        this._xDelta = 0;\n\n        this._frameManager.nextLine();\n\n        if (this._frameManager.isRendering() && this._frameManager.getCurrentLine() === 0) {\n            this._flushLineCache();\n        }\n    }\n\n    private _cloneLastLine(): void {\n        const y = this._frameManager.getCurrentLine();\n\n        if (!this._frameManager.isRendering() || y === 0) {\n            return;\n        }\n\n        const delta = y * 160,\n            prevDelta = (y - 1) * 160;\n\n        for (let x = 0; x < 160; x++) {\n            this._frameManager.surfaceBuffer[delta + x] = this._frameManager.surfaceBuffer[prevDelta + x];\n        }\n    }\n\n    private _getPalette(config: Config) {\n        switch (config.tvMode) {\n            case Config.TvMode.ntsc:\n                return palette.NTSC;\n\n            case Config.TvMode.pal:\n                return palette.PAL;\n\n            case Config.TvMode.secam:\n                return palette.SECAM;\n\n            default:\n                throw new Error('invalid TV mode');\n        }\n    }\n\n    private _getClockFreq(config: Config) {\n        return config.tvMode === Config.TvMode.ntsc\n            ? 60 * 228 * Metrics.frameLinesNTSC\n            : 50 * 228 * Metrics.frameLinesPAL;\n    }\n\n    private _renderPixel(x: number, y: number): void {\n        if (this._frameManager.vblank) {\n            this._frameManager.surfaceBuffer[y * 160 + x] = 0xff000000;\n            return;\n        }\n\n        let color = this._colorBk;\n\n        switch (this._priority) {\n            case Priority.normal:\n                color = this._playfield.getPixel(color);\n                color = this._ball.getPixel(color);\n                color = this._missile1.getPixel(color);\n                color = this._player1.getPixel(color);\n                color = this._missile0.getPixel(color);\n                color = this._player0.getPixel(color);\n                break;\n\n            case Priority.pfp:\n                color = this._missile1.getPixel(color);\n                color = this._player1.getPixel(color);\n                color = this._missile0.getPixel(color);\n                color = this._player0.getPixel(color);\n                color = this._playfield.getPixel(color);\n                color = this._ball.getPixel(color);\n                break;\n\n            case Priority.score:\n                color = this._ball.getPixel(color);\n                color = this._missile1.getPixel(color);\n                color = this._player1.getPixel(color);\n                color = this._playfield.getPixel(color);\n                color = this._missile0.getPixel(color);\n                color = this._player0.getPixel(color);\n                break;\n\n            default:\n                throw new Error('invalid priority');\n        }\n\n        this._frameManager.surfaceBuffer[y * 160 + x] = color;\n    }\n\n    private _updateCollision() {\n        this._collisionMask |=\n            ~this._player0.collision &\n            ~this._player1.collision &\n            ~this._missile0.collision &\n            ~this._missile1.collision &\n            ~this._ball.collision &\n            ~this._playfield.collision;\n    }\n\n    private _clearHmoveComb(): void {\n        if (this._frameManager.isRendering() && this._hstate === HState.blank) {\n            const offset = this._frameManager.getCurrentLine() * 160;\n\n            for (let i = 0; i < 8; i++) {\n                this._frameManager.surfaceBuffer[offset + i] = 0xff000000;\n            }\n        }\n    }\n\n    private _resxCounter(): number {\n        return this._hstate === HState.blank\n            ? this._hctr >= ResxCounter.lateHblankThreshold\n                ? ResxCounter.lateHblank\n                : ResxCounter.hblank\n            : ResxCounter.frame;\n    }\n\n    private _rsync(): void {\n        const x = this._hctr > 68 ? this._hctr - 68 : 0;\n\n        this._xDelta = 157 - x;\n\n        if (this._frameManager.isRendering()) {\n            const y = this._frameManager.getCurrentLine(),\n                base = y * 160 + x,\n                boundary = base + (y + 1) * 160;\n\n            for (let i = base; i < boundary; i++) {\n                this._frameManager.surfaceBuffer[i] = 0xff000000;\n            }\n        }\n\n        this._hctr = 225;\n    }\n\n    private _setPriority(value: number): void {\n        const priority = value & 0x04 ? Priority.pfp : value & 0x02 ? Priority.score : Priority.normal;\n\n        if (priority !== this._priority) {\n            this._flushLineCache();\n            this._priority = priority;\n        }\n    }\n\n    private _flushLineCache(): void {\n        const wasCaching = this._linesSinceChange >= 2;\n\n        this._linesSinceChange = 0;\n\n        if (wasCaching) {\n            const rewindCycles = this._hctr;\n\n            for (this._hctr = 0; this._hctr < rewindCycles; this._hctr++) {\n                if (this._hstate === HState.blank) {\n                    this._tickHblank();\n                } else {\n                    this._tickHframe();\n                }\n            }\n        }\n    }\n\n    newFrame = new Event<RGBASurfaceInterface>();\n\n    trap = new Event<Tia.TrapPayload>();\n\n    private _cpu: CpuInterface = null;\n    private _bus: Bus = null;\n\n    private _frameManager: FrameManager;\n    private _delayQueue = new DelayQueue(10, 20);\n\n    private _palette: Uint32Array;\n\n    private _hstate = HState.blank;\n\n    // hclock counter\n    private _hctr = 0;\n    // collision latch update required?\n    private _collisionUpdateRequired = false;\n    // Count the extra clocks triggered by move\n    private _movementClock = 0;\n    // Is the movement clock active and shoud pulse?\n    private _movementInProgress = false;\n    // do we have an extended hblank triggered by hmove?\n    private _extendedHblank = false;\n    // Delta during x calculation. Can become temporarily nonzero aftern a rsync.\n    private _xDelta = 0;\n\n    // Lines since the last cache-invalidating change. If this is > 1 we can safely use the linecache\n    private _linesSinceChange = 0;\n\n    // Max total lines. Used to clear garbage lines.\n    private _maxLinesTotal = 0;\n\n    private _colorBk = 0xff000000;\n    private _priority = Priority.normal;\n    // bitfield with collision latches\n    private _collisionMask = 0;\n\n    private _player0 = new Player(CollisionMask.player0, () => this._flushLineCache());\n    private _player1 = new Player(CollisionMask.player1, () => this._flushLineCache());\n    private _missile0 = new Missile(CollisionMask.missile0, () => this._flushLineCache());\n    private _missile1 = new Missile(CollisionMask.missile1, () => this._flushLineCache());\n    private _playfield = new Playfield(CollisionMask.playfield, () => this._flushLineCache());\n    private _ball = new Ball(CollisionMask.ball, () => this._flushLineCache());\n\n    private _waveformAudio = new Array<WaveformAudio>(2);\n    private _pcmAudio: PCMAudio = null;\n    private _audio = new Array<AudioInterface>(2);\n\n    private _input0: LatchedInput;\n    private _input1: LatchedInput;\n\n    private _paddles: Array<PaddleReader>;\n}\n\nnamespace Tia {\n    export const enum Registers {\n        vsync = 0x00,\n        vblank = 0x01,\n        wsync = 0x02,\n        rsync = 0x03,\n        nusiz0 = 0x04,\n        nusiz1 = 0x05,\n        colup0 = 0x06,\n        colup1 = 0x07,\n        colupf = 0x08,\n        colubk = 0x09,\n        ctrlpf = 0x0a,\n        refp0 = 0x0b,\n        refp1 = 0x0c,\n        pf0 = 0x0d,\n        pf1 = 0x0e,\n        pf2 = 0x0f,\n        resp0 = 0x10,\n        resp1 = 0x11,\n        resm0 = 0x12,\n        resm1 = 0x13,\n        resbl = 0x14,\n        audc0 = 0x15,\n        audc1 = 0x16,\n        audf0 = 0x17,\n        audf1 = 0x18,\n        audv0 = 0x19,\n        audv1 = 0x1a,\n        grp0 = 0x1b,\n        grp1 = 0x1c,\n        enam0 = 0x1d,\n        enam1 = 0x1e,\n        enabl = 0x1f,\n        hmp0 = 0x20,\n        hmp1 = 0x21,\n        hmm0 = 0x22,\n        hmm1 = 0x23,\n        hmbl = 0x24,\n        vdelp0 = 0x25,\n        vdelp1 = 0x26,\n        vdelbl = 0x27,\n        resmp0 = 0x28,\n        resmp1 = 0x29,\n        hmove = 0x2a,\n        hmclr = 0x2b,\n        cxclr = 0x2c,\n        cxm0p = 0x00,\n        cxm1p = 0x01,\n        cxp0fb = 0x02,\n        cxp1fb = 0x03,\n        cxm0fb = 0x04,\n        cxm1fb = 0x05,\n        cxblpf = 0x06,\n        cxppmm = 0x07,\n        inpt0 = 0x08,\n        inpt1 = 0x09,\n        inpt2 = 0x0a,\n        inpt3 = 0x0b,\n        inpt4 = 0x0c,\n        inpt5 = 0x0d,\n\n        // These \"registers\" are not exposed to the system and only used in delaying\n        // internal processes.\n        _shuffleP0 = 0xf0,\n        _shuffleP1 = 0xf1,\n        _shuffleBL = 0xf2\n    }\n\n    export const enum TrapReason {\n        invalidRead,\n        invalidWrite\n    }\n\n    export class TrapPayload {\n        constructor(public reason: TrapReason, public tia: Tia, public message?: string) {}\n    }\n}\n\nexport { Tia as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport SwitchInterface from './SwitchInterface';\n\nexport default class Switch implements SwitchInterface {\n    constructor(private _state: boolean = false) {}\n\n    read(): boolean {\n        this.beforeRead.dispatch(this);\n        return this._state;\n    }\n\n    peek(): boolean {\n        return this._state;\n    }\n\n    toggle(state: boolean): void {\n        if (this._state === state) {\n            return;\n        }\n\n        this._state = state;\n        this.stateChanged.dispatch(state);\n    }\n\n    stateChanged = new Event<boolean>();\n    beforeRead = new Event<this>();\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport Switch from '../io/Switch';\nimport SwitchInterface from '../io/SwitchInterface';\nimport ControlPanelInterface from './ControlPanelInterface';\n\nclass ControlPanel implements ControlPanelInterface {\n    getSelectSwitch(): SwitchInterface {\n        return this._selectSwitch;\n    }\n\n    getResetButton(): SwitchInterface {\n        return this._resetButton;\n    }\n\n    getColorSwitch(): SwitchInterface {\n        return this._colorSwitch;\n    }\n\n    getDifficultySwitchP0(): SwitchInterface {\n        return this._difficutlyP0;\n    }\n\n    getDifficultySwitchP1(): SwitchInterface {\n        return this._difficutlyP1;\n    }\n\n    private _selectSwitch = new Switch();\n    private _resetButton = new Switch();\n    private _colorSwitch = new Switch();\n    private _difficutlyP0 = new Switch();\n    private _difficutlyP1 = new Switch();\n}\n\nexport { ControlPanel as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport DigitalJoystickInterface from './DigitalJoystickInterface';\nimport Switch from './Switch';\nimport SwitchInterface from './SwitchInterface';\n\nexport default class DigitalJoystick implements DigitalJoystickInterface {\n    getLeft(): SwitchInterface {\n        return this._left;\n    }\n\n    getRight(): SwitchInterface {\n        return this._right;\n    }\n\n    getUp(): SwitchInterface {\n        return this._up;\n    }\n\n    getDown(): SwitchInterface {\n        return this._down;\n    }\n\n    getFire(): SwitchInterface {\n        return this._fire;\n    }\n\n    private _left = new Switch();\n    private _right = new Switch();\n    private _up = new Switch();\n    private _down = new Switch();\n\n    private _fire = new Switch();\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport Switch from './Switch';\nimport PaddleInterface from './PaddleInterface';\n\nexport default class Paddle implements PaddleInterface {\n    setValue(value: number): void {\n        this._value = value;\n        this.valueChanged.dispatch(value);\n    }\n\n    getValue(): number {\n        return this._value;\n    }\n\n    getFire(): Switch {\n        return this._fireSwitch;\n    }\n\n    valueChanged = new Event<number>();\n\n    protected _fireSwitch = new Switch();\n    protected _value = 0.5;\n}\n","// A port of an algorithm by Johannes Baagøe <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baagøe <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = String(data);\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xorshift7\" algorithm by\n// François Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n","// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","export default {};\n","/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (global, pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n\nvar width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n} else {\n  // When included as a plain script, set up Math.seedrandom global.\n  math['seed' + rngname] = seedrandom;\n}\n\n\n// End anonymous scope, and pass initial values.\n})(\n  // global: `self` in browsers (including strict mode and web workers),\n  // otherwise `this` in Node and other environments\n  (typeof self !== 'undefined') ? self : this,\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n","// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baagøe.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by François Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { EventInterface } from 'microevent.ts';\n\nimport CartridgeInfo from './CartridgeInfo';\nimport Cpuinterface from '../../cpu/CpuInterface';\nimport BusInterface from '../../bus/BusInterface';\n\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\n\ninterface CartridgeInterface {\n    init(): Promise<void>;\n\n    reset(): void;\n\n    read(address: number): number;\n\n    peek(address: number): number;\n\n    write(address: number, value: number): void;\n\n    getType(): CartridgeInfo.CartridgeType;\n\n    setCpu(cpu: Cpuinterface): this;\n\n    setBus(bus: BusInterface): this;\n\n    setRng(rng: RngInterface): this;\n\n    setCpuTimeProvider(provider: () => number): this;\n\n    notifyCpuCycleComplete(): void;\n\n    randomize(rng: RngInterface): void;\n\n    trap: EventInterface<CartridgeInterface.TrapPayload>;\n}\n\nnamespace CartridgeInterface {\n    export const enum TrapReason {\n        invalidRead,\n        invalidWrite,\n        other\n    }\n\n    export class TrapPayload {\n        constructor(public reason: TrapReason, public cartridge: CartridgeInterface, public message?: string) { }\n    }\n}\n\nexport { CartridgeInterface as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nnamespace CartridgeInfo {\n    export enum CartridgeType {\n        vanilla_2k = 'vanilla_2k',\n        vanilla_4k = 'vanilla_4k',\n\n        bankswitch_2k_cv = 'bankswitch_2k_cv',\n\n        bankswitch_8k_F8 = 'bankswitch_8k_F8',\n        bankswitch_8k_E0 = 'bankswitch_8k_E0',\n        bankswitch_8k_3F = 'bankswitch_8k_3F',\n        bankswitch_8k_FE = 'bankswitch_8k_FE',\n        bankswitch_8k_UA = 'bankswitch_8k_UA',\n        bankswitch_8k_DPC = 'bankswitch_8k_DPC',\n        bankswitch_8k_econobanking = 'bankswitch_8k_econobanking',\n        bankswitch_8k_pp = 'bankswitch_8k_pp',\n\n        bankswitch_12k_FA = 'bankswitch_12k_FA',\n\n        bankswitch_16k_F6 = 'bankswitch_16k_F6',\n        bankswitch_16k_E7 = 'bankswitch_16k_E7',\n\n        bankswitch_FA2 = 'bankswitch_FA2',\n\n        bankswitch_32k_F4 = 'bankswitch_32k_F4',\n\n        bankswitch_64k_F0 = 'bankswitch_64k_F0',\n        bankswitch_64k_EF = 'bankswitch_64k_EF',\n\n        bankswitch_3E = 'bankswitch_3E',\n        bankswitch_supercharger = 'bankswitch_supercharger',\n        bankswitch_dpc_plus = 'bankswitch_dpc_plus',\n        bankswitch_cdf = 'bankswitch_cdf',\n\n        unknown = 'unknown'\n    }\n\n    export function getAllTypes(): Array<CartridgeType> {\n        return [\n            CartridgeType.vanilla_2k,\n            CartridgeType.vanilla_4k,\n            CartridgeType.bankswitch_2k_cv,\n            CartridgeType.bankswitch_8k_F8,\n            CartridgeType.bankswitch_8k_E0,\n            CartridgeType.bankswitch_8k_3F,\n            CartridgeType.bankswitch_8k_FE,\n            CartridgeType.bankswitch_8k_UA,\n            CartridgeType.bankswitch_8k_econobanking,\n            CartridgeType.bankswitch_8k_pp,\n            CartridgeType.bankswitch_12k_FA,\n            CartridgeType.bankswitch_8k_DPC,\n            CartridgeType.bankswitch_16k_F6,\n            CartridgeType.bankswitch_16k_E7,\n            CartridgeType.bankswitch_FA2,\n            CartridgeType.bankswitch_32k_F4,\n            CartridgeType.bankswitch_3E,\n            CartridgeType.bankswitch_64k_F0,\n            CartridgeType.bankswitch_64k_EF,\n            CartridgeType.bankswitch_supercharger,\n            CartridgeType.bankswitch_dpc_plus,\n            CartridgeType.bankswitch_cdf,\n            CartridgeType.unknown\n        ];\n    }\n\n    export function describeCartridgeType(cartridgeType: CartridgeType): string {\n        switch (cartridgeType) {\n            case CartridgeType.vanilla_2k:\n                return 'plain 2k';\n\n            case CartridgeType.vanilla_4k:\n                return 'plain 4k';\n\n            case CartridgeType.bankswitch_2k_cv:\n                return '2k CommaVideo scheme';\n\n            case CartridgeType.bankswitch_8k_F8:\n                return 'bankswitched 8k, F8 (Atari) scheme';\n\n            case CartridgeType.bankswitch_8k_E0:\n                return 'bankswitched 8k, E0 (Parker Bros.) scheme';\n\n            case CartridgeType.bankswitch_8k_3F:\n                return 'bankswitched 8k, 3F (Tigervision) scheme';\n\n            case CartridgeType.bankswitch_8k_FE:\n                return 'bankswitched 8k, FE (Activision) scheme';\n\n            case CartridgeType.bankswitch_8k_UA:\n                return 'bankswitched 8k, UA (Pleiades) scheme';\n\n            case CartridgeType.bankswitch_8k_pp:\n                return 'bankswitched 8k, Pink Panther scheme';\n\n            case CartridgeType.bankswitch_12k_FA:\n                return 'bankswitched 12k, FA (CBS) scheme';\n\n            case CartridgeType.bankswitch_8k_DPC:\n                return 'bankswitched 8k + DPC';\n\n            case CartridgeType.bankswitch_8k_econobanking:\n                return 'bankswitched 8k, econobanking scheme';\n\n            case CartridgeType.bankswitch_16k_F6:\n                return 'bankswitched 16k, F6 (Atari) scheme';\n\n            case CartridgeType.bankswitch_16k_E7:\n                return 'bankswitched 16k, E7 (M-Network) scheme';\n\n            case CartridgeType.bankswitch_FA2:\n                return 'bankswitched 28k/29k, FA2 (modified CBS) scheme';\n\n            case CartridgeType.bankswitch_32k_F4:\n                return 'bankswitched 32k, F4 (Atari) scheme';\n\n            case CartridgeType.bankswitch_3E:\n                return 'bankswitched 3E (Tigervision + RAM) scheme';\n\n            case CartridgeType.bankswitch_64k_F0:\n                return 'bankswitched 64k, F0 (Megaboy) scheme';\n\n            case CartridgeType.bankswitch_64k_EF:\n                return 'bankswitched 64k, EFSC (Homestar Runner) scheme';\n\n            case CartridgeType.bankswitch_supercharger:\n                return 'bankswitched supercharger';\n\n            case CartridgeType.bankswitch_dpc_plus:\n                return 'bankswitched DPC+';\n\n            case CartridgeType.bankswitch_cdf:\n                return 'bankswitched CDF';\n\n            case CartridgeType.unknown:\n                return 'unknown';\n        }\n    }\n}\n\nexport { CartridgeInfo as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport GeneratorInterface from './GeneratorInterface';\n\nexport interface SeedrandomPrng {\n    quick(): number;\n    int32(): number;\n    double(): number;\n    state(): any;\n}\n\nclass SeedrandomGenerator implements GeneratorInterface {\n    constructor(private _rng: SeedrandomPrng) {}\n\n    single(): number {\n        return this._rng.quick();\n    }\n\n    double(): number {\n        return this._rng.double();\n    }\n\n    int32(): number {\n        return this._rng.int32();\n    }\n\n    int(max: number) {\n        return (this._rng.int32() >>> 0) % (max + 1);\n    }\n\n    saveState(): any {\n        return this._rng.state();\n    }\n}\n\nexport { SeedrandomGenerator as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport BoardInterface from '../board/BoardInterface';\nimport CpuInterface from '../cpu/CpuInterface';\nimport Bus from './Bus';\nimport BusInterface from '../bus/BusInterface';\nimport Pia from './Pia';\nimport Tia from './tia/Tia';\nimport CartridgeInterface from './cartridge/CartridgeInterface';\nimport Config from './Config';\n\nimport VideoOutputInterface from '../io/VideoOutputInterface';\nimport WaveformAudioOutputInterface from '../io/WaveformAudioOutputInterface';\nimport PCMAudioOutputInterface from '../io/PCMAudioOutputInterface';\nimport ControlPanel from './ControlPanel';\nimport ControlPanelInterface from './ControlPanelInterface';\nimport DigitalJoystickInterface from '../io/DigitalJoystickInterface';\nimport DigitalJoystick from '../io/DigitalJoystick';\nimport PaddleInterface from '../io/PaddleInterface';\nimport Paddle from '../io/Paddle';\n\nimport TimerInterface from '../board/TimerInterface';\nimport SchedulerInterface from '../../tools/scheduler/SchedulerInterface';\nimport TaskInterface from '../../tools/scheduler/TaskInterface';\nimport RngInterface from '../../tools/rng/GeneratorInterface';\nimport { createRng } from '../../tools/rng/factory';\nimport CpuFactory from '../cpu/Factory';\n\nclass Board implements BoardInterface {\n    constructor(\n        private _config: Config,\n        cartridge: CartridgeInterface,\n        cpuFactory?: (bus: BusInterface, rng?: RngInterface) => CpuInterface\n    ) {\n        this._rng = createRng(_config.randomSeed < 0 ? Math.random() : _config.randomSeed);\n        cartridge.randomize(this._rng);\n\n        const bus = new Bus();\n\n        if (typeof cpuFactory === 'undefined') {\n            cpuFactory = (_bus, rng) => new CpuFactory(_config.cpuType).create(_bus, rng);\n        }\n\n        const controlPanel = new ControlPanel(),\n            joystick0 = new DigitalJoystick(),\n            joystick1 = new DigitalJoystick(),\n            paddles = new Array(4);\n\n        for (let i = 0; i < 4; i++) {\n            paddles[i] = new Paddle();\n        }\n\n        const cpu = cpuFactory(bus, this._rng);\n        const pia = new Pia(controlPanel, joystick0, joystick1, this._rng);\n        const tia = new Tia(_config, joystick0, joystick1, paddles);\n\n        cpu.setInvalidInstructionCallback(() => this._onInvalidInstruction());\n\n        tia.setCpu(cpu)\n            .setBus(bus)\n            .setCpuTimeProvider(() => this.getCpuTime());\n\n        cartridge\n            .setCpu(cpu)\n            .setBus(bus)\n            .setCpuTimeProvider(() => this.getCpuTime())\n            .setRng(this._rng);\n\n        pia.setBus(bus);\n\n        bus.setTia(tia)\n            .setPia(pia)\n            .setCartridge(cartridge);\n\n        this._bus = bus;\n        this._cpu = cpu;\n        this._tia = tia;\n        this._pia = pia;\n        this._cartridge = cartridge;\n        this._controlPanel = controlPanel;\n        this._joystick0 = joystick0;\n        this._joystick1 = joystick1;\n        this._paddles = paddles;\n\n        this._bus.event.trap.addHandler((payload: Bus.TrapPayload) =>\n            this.triggerTrap(BoardInterface.TrapReason.bus, payload.message)\n        );\n\n        this._clockHz = Config.getClockHz(_config);\n        this._sliceSize = 228 * (_config.tvMode === Config.TvMode.ntsc ? 262 : 312);\n\n        this.reset();\n    }\n\n    getCpu(): CpuInterface {\n        return this._cpu;\n    }\n\n    getBus(): Bus {\n        return this._bus;\n    }\n\n    getVideoOutput(): VideoOutputInterface {\n        return this._tia;\n    }\n\n    getWaveformChannels(): Array<WaveformAudioOutputInterface> {\n        return [0, 1].map(i => this._tia.getWaveformChannel(i));\n    }\n\n    getPCMChannel(): PCMAudioOutputInterface {\n        return this._tia.getPCMChannel();\n    }\n\n    getTimer(): TimerInterface {\n        return this._timer;\n    }\n\n    getConfig(): Config {\n        return this._config;\n    }\n\n    reset(): Board {\n        this._cpu.reset();\n        this._tia.reset();\n        this._pia.reset();\n        this._cartridge.reset();\n\n        this._controlPanel.getResetButton().toggle(false);\n        this._controlPanel.getSelectSwitch().toggle(false);\n        this._controlPanel.getColorSwitch().toggle(false);\n        this._controlPanel.getDifficultySwitchP0().toggle(true);\n        this._controlPanel.getDifficultySwitchP1().toggle(true);\n\n        this._subClock = 0;\n        this._cpuCycles = 0;\n\n        this.systemReset.dispatch();\n\n        return this;\n    }\n\n    boot(): Board {\n        let cycles = 0,\n            cpuCycles = 0;\n\n        this.reset();\n\n        if (this._cpu.executionState !== CpuInterface.ExecutionState.boot) {\n            throw new Error('Already booted!');\n        }\n\n        while ((this._cpu.executionState as CpuInterface.ExecutionState) !== CpuInterface.ExecutionState.fetch) {\n            this._cycle();\n\n            cycles++;\n            if (this._subClock === 0) {\n                cpuCycles++;\n            }\n        }\n\n        this.cpuClock.dispatch(cpuCycles);\n        this.clock.dispatch(cycles);\n        return this;\n    }\n\n    suspend(): void {\n        this._suspended = true;\n        this._updateAudioState();\n    }\n\n    resume(): void {\n        this._suspended = false;\n        this._updateAudioState();\n    }\n\n    setAudioEnabled(state: boolean) {\n        this._audioEnabled = state;\n        this._updateAudioState();\n    }\n\n    triggerTrap(reason: BoardInterface.TrapReason, message?: string): Board {\n        this._stop();\n\n        this._trap = true;\n\n        if (this.trap.hasHandlers) {\n            this.trap.dispatch(new BoardInterface.TrapPayload(reason, this, message));\n        } else {\n            throw new Error(message);\n        }\n\n        return this;\n    }\n\n    getControlPanel(): ControlPanelInterface {\n        return this._controlPanel;\n    }\n\n    getJoystick0(): DigitalJoystickInterface {\n        return this._joystick0;\n    }\n\n    getJoystick1(): DigitalJoystickInterface {\n        return this._joystick1;\n    }\n\n    getBoardStateDebug(): string {\n        const sep = '============';\n\n        return (\n            'TIA:\\n' +\n            sep +\n            '\\n' +\n            this._tia.getDebugState() +\n            '\\n' +\n            `\\n` +\n            `PIA:\\n` +\n            `${sep}\\n` +\n            `${this._pia.getDebugState()}\\n`\n        );\n    }\n\n    setClockMode(clockMode: BoardInterface.ClockMode): Board {\n        this._clockMode = clockMode;\n\n        return this;\n    }\n\n    getClockMode(): BoardInterface.ClockMode {\n        return this._clockMode;\n    }\n\n    getPaddle(idx: number): PaddleInterface {\n        return this._paddles[idx];\n    }\n\n    getCpuTime(): number {\n        return (this._cpuCycles / Config.getClockHz(this._config)) * 3;\n    }\n\n    private static _executeSlice(board: Board, _timeSlice?: number) {\n        const slice = _timeSlice ? Math.round((_timeSlice * board._clockHz) / 1000) : board._sliceSize;\n\n        return (board._tick(slice) / board._clockHz) * 1000;\n    }\n\n    private _updateAudioState(): void {\n        this._tia.setAudioEnabled(this._audioEnabled && !this._suspended);\n    }\n\n    private _cycle(): void {\n        this._tia.cycle();\n\n        if (this._subClock++ >= 2) {\n            this._pia.cycle();\n            this._cpu.cycle();\n            this._subClock = 0;\n        }\n    }\n\n    private _tick(requestedCycles: number): number {\n        let i = 0,\n            cycles = 0,\n            cpuCycles = 0,\n            lastExecutionState = this._cpu.executionState;\n\n        this._trap = false;\n\n        while (i++ < requestedCycles && !this._trap) {\n            this._cycle();\n            cycles++;\n\n            if (this._subClock === 0) {\n                cpuCycles++;\n                this._cpuCycles++;\n            }\n\n            if (lastExecutionState !== this._cpu.executionState) {\n                lastExecutionState = this._cpu.executionState;\n\n                if (this._cpu.executionState === CpuInterface.ExecutionState.fetch) {\n                    this._cartridge.notifyCpuCycleComplete();\n\n                    if (\n                        this._clockMode === BoardInterface.ClockMode.instruction &&\n                        cpuCycles > 0 &&\n                        this.cpuClock.hasHandlers\n                    ) {\n                        this.cpuClock.dispatch(cpuCycles);\n                        cpuCycles = 0;\n                    }\n                }\n            }\n        }\n\n        if (cpuCycles > 0 && this.cpuClock.hasHandlers) {\n            this.cpuClock.dispatch(cpuCycles);\n        }\n\n        if (cycles > 0 && this.clock.hasHandlers) {\n            this.clock.dispatch(cycles);\n        }\n\n        return cycles;\n    }\n\n    private _start(scheduler: SchedulerInterface) {\n        if (this._runTask) {\n            return;\n        }\n\n        this._runTask = scheduler.start(\n            Board._executeSlice,\n            this,\n            1000 / (this._config.tvMode === Config.TvMode.ntsc ? 60 : 50)\n        );\n    }\n\n    private _stop() {\n        if (!this._runTask) {\n            return;\n        }\n\n        this._runTask.stop();\n\n        this._runTask = undefined;\n    }\n\n    private _onInvalidInstruction() {\n        this.triggerTrap(BoardInterface.TrapReason.cpu, 'invalid instruction');\n    }\n\n    trap = new Event<BoardInterface.TrapPayload>();\n\n    clock = new Event<number>();\n\n    cpuClock = new Event<number>();\n\n    systemReset = new Event<void>();\n\n    private _cpu: CpuInterface;\n    private _bus: Bus;\n    private _tia: Tia;\n    private _pia: Pia;\n    private _cartridge: CartridgeInterface;\n    private _controlPanel: ControlPanel;\n    private _joystick0: DigitalJoystick;\n    private _joystick1: DigitalJoystick;\n    private _paddles: Array<Paddle>;\n\n    private _runTask: TaskInterface;\n    private _clockMode = BoardInterface.ClockMode.lazy;\n    private _cpuCycles = 0;\n    private _trap = false;\n\n    private _audioEnabled = true;\n    private _suspended = true;\n\n    private _subClock = 0;\n\n    private _clockHz = 0;\n    private _sliceSize = 0;\n\n    private _timer = {\n        tick: (clocks: number): number => this._tick(clocks),\n        start: (scheduler: SchedulerInterface): void => this._start(scheduler),\n        stop: (): void => this._stop(),\n        isRunning: (): boolean => !!this._runTask\n    };\n\n    private _rng: RngInterface;\n}\n\nexport { Board as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport * as seedrandom from 'seedrandom';\n\nimport GeneratorInterface from './GeneratorInterface';\nimport SeedrandomGenerator from './SeedrandomGenerator';\n\nexport function createRng(seed: number): GeneratorInterface {\n    if (seed < 0) {\n        seed = Math.random();\n    }\n\n    return new SeedrandomGenerator(\n        seedrandom.alea(seed as any, {\n            state: true\n        })\n    );\n}\n\nexport function restoreRng(state: any): GeneratorInterface {\n    return new SeedrandomGenerator(\n        seedrandom.alea('', {\n            state\n        })\n    );\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport CartridgeInterface from './CartridgeInterface';\nimport CartridgeInfo from './CartridgeInfo';\nimport CpuInterface from '../../cpu/CpuInterface';\nimport Bus from '../Bus';\n\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\n\nclass AbstractCartridge implements CartridgeInterface {\n    async init(): Promise<void> { }\n\n    reset(): void { }\n\n    read(address: number): number {\n        return 0;\n    }\n\n    peek(address: number): number {\n        return this.read(address);\n    }\n\n    write(address: number, value: number) { }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.unknown;\n    }\n\n    setCpu(cpu: CpuInterface): this {\n        return this;\n    }\n\n    setBus(bus: Bus): this {\n        return this;\n    }\n\n    setRng(rng: RngInterface): this {\n        return this;\n    }\n\n    setCpuTimeProvider(provider: () => number) {\n        return this;\n    }\n\n    notifyCpuCycleComplete(): void { }\n\n    randomize(rng: RngInterface): void { }\n\n    protected triggerTrap(reason: CartridgeInterface.TrapReason, message: string) {\n        if (this.trap.hasHandlers) {\n            this.trap.dispatch(new CartridgeInterface.TrapPayload(reason, this, message));\n        } else {\n            throw new Error(message);\n        }\n    }\n\n    trap = new Event<CartridgeInterface.TrapPayload>();\n}\n\nexport { AbstractCartridge as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\n\nfunction nextPowerOfTwo(x: number): number {\n    let v = 1;\n\n    while (v < x) {\n        v *= 2;\n    }\n\n    return v;\n}\n\nfunction padBuffer(buffer: ArrayLike<number>): ArrayLike<number> {\n    const paddedLength = nextPowerOfTwo(buffer.length);\n\n    if (paddedLength === buffer.length) {\n        return buffer;\n    }\n\n    const paddedBuffer = new Uint8Array(paddedLength);\n\n    for (let i = 0; i < paddedLength; i++) {\n        paddedBuffer[paddedLength - i - 1] = i < buffer.length ? buffer[buffer.length - i - 1] : 0;\n    }\n\n    return paddedBuffer;\n}\n\nclass Cartridge2k extends AbstractCartridge {\n    constructor(buffer: { [i: number]: number; length: number }) {\n        super();\n\n        if (buffer.length > 0x0800) {\n            throw new Error(`buffer is not a 2k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        const paddedBuffer = padBuffer(buffer);\n\n        for (let i = 0; i < 0x0800; i++) {\n            this._rom[i] = buffer[i % paddedBuffer.length];\n        }\n    }\n\n    read(address: number): number {\n        // Mask out A11 - A15\n        return this._rom[address & 0x07ff];\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.vanilla_2k;\n    }\n\n    // A11 - A15 masked out -> 0x0800 bytes of ROM\n    protected _rom = new Uint8Array(0x0800);\n}\n\nexport { Cartridge2k as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\n\nclass Cartridge4k extends AbstractCartridge {\n    constructor(buffer: { [i: number]: number; length: number }) {\n        super();\n\n        if (buffer.length !== 0x1000) {\n            console.warn(`buffer has invalid size for 4K image: ${buffer.length} bytes`);\n        }\n\n        const len = Math.min(0x1000, buffer.length);\n\n        for (let i = 0; i < 0x1000 && i < buffer.length; i++) {\n            this._rom[0x0fff - i] = buffer[len - 1 - i];\n        }\n    }\n\n    read(address: number): number {\n        // Mask out A12 - A15\n        return this._rom[address & 0x0fff];\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.vanilla_4k;\n    }\n\n    // A12 - A15 masked out -> 0x1000 bytes of ROM\n    protected _rom = new Uint8Array(0x1000);\n}\n\nexport { Cartridge4k as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nexport interface BufferInterface {\n    [index: number]: number;\n    length: number;\n}\n\nexport function searchForSignatures(buffer: BufferInterface, signatures: Array<Array<number>>): Array<number> {\n    interface Candidate {\n        signature: number;\n        nextIndex: number;\n    }\n\n    const candidates: Array<Candidate> = [],\n        counts = signatures.map((signature: Array<number>) => 0);\n\n    for (let i = 0; i < buffer.length; i++) {\n        for (let iCandidate = 0; iCandidate < candidates.length; iCandidate++) {\n            const candidate = candidates[iCandidate],\n                signature = signatures[candidate.signature];\n\n            if (buffer[i] === signature[candidate.nextIndex]) {\n                if (++candidate.nextIndex === signature.length) {\n                    counts[candidate.signature]++;\n                    candidates.splice(iCandidate, 1);\n                    iCandidate--;\n                }\n            } else {\n                candidates.splice(iCandidate, 1);\n                iCandidate--;\n            }\n        }\n\n        for (let iSignature = 0; iSignature < signatures.length; iSignature++) {\n            const signature = signatures[iSignature];\n\n            if (signature.length > 0 && buffer[i] === signature[0]) {\n                if (signature.length === 1) {\n                    counts[iSignature]++;\n                } else {\n                    candidates.push({\n                        signature: iSignature,\n                        nextIndex: 1\n                    });\n                }\n            }\n        }\n    }\n\n    return counts;\n}\n\nexport function searchForSignature(buffer: BufferInterface, signature: Array<number>): number {\n    for (let i = 0; i < buffer.length; i++) {\n        let j: number;\n\n        for (j = 0; j < signature.length && (buffer[i + j] === signature[j] || signature[j] < 0); j++) {}\n\n        if (j === signature.length) {\n            return i;\n        }\n    }\n\n    return -1;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport RngGeneratorInterface from '../../../tools/rng/GeneratorInterface';\nimport Bus from '../Bus';\nimport { BufferInterface, searchForSignatures } from './util';\n\nclass CartridgeCV extends AbstractCartridge {\n    constructor(buffer: { [i: number]: number; length: number }) {\n        super();\n\n        if (buffer.length !== 0x0800) {\n            throw new Error(`buffer is not a 2k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 0x0800; i++) {\n            this._rom[i] = buffer[i];\n        }\n    }\n\n    static matchesBuffer(buffer: BufferInterface): boolean {\n        // Signatures shamelessly stolen from Stella\n        const signatureCounts = searchForSignatures(buffer, [[0x9d, 0xff, 0xf3], [0x99, 0x00, 0xf4]]);\n\n        return signatureCounts[0] > 0 || signatureCounts[1] > 0;\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    randomize(rng: RngGeneratorInterface): void {\n        for (let i = 0; i < 0x0400; i++) {\n            this._ram[i] = rng.int(0xff);\n        }\n    }\n\n    read(address: number): number {\n        address &= 0x0fff;\n\n        if (address < 0x0400) {\n            return this._ram[address];\n        }\n\n        if (address < 0x0800) {\n            return (this._ram[address & 0x03ff] = this._bus.getLastDataBusValue());\n        }\n\n        return this._rom[address & 0x07ff];\n    }\n\n    write(address: number, value: number): void {\n        address &= 0x0fff;\n\n        if (address >= 0x0400 && address < 0x0800) {\n            this._ram[address & 0x03ff] = value;\n        }\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        if (address < 0x0400) {\n            return this._ram[address];\n        }\n\n        if (address < 0x0800) {\n            return 0;\n        }\n\n        return this._rom[address & 0x07ff];\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_2k_cv;\n    }\n\n    private _rom = new Uint8Array(0x0800);\n    private _ram = new Uint8Array(0x0400);\n\n    private _bus: Bus;\n}\n\nexport default CartridgeCV;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\nimport * as cartridgeUtil from './util';\n\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\n\nclass CartridgeF8 extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface, private _supportSC = true) {\n        super();\n\n        if (buffer.length !== 0x2000) {\n            throw new Error(`buffer is not an 8k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 0x1000; i++) {\n            this._bank0[i] = buffer[i];\n            this._bank1[i] = buffer[0x1000 + i];\n        }\n\n        this.reset();\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        // Signatures shamelessly stolen from stella\n        const signatureCounts = cartridgeUtil.searchForSignatures(\n            buffer,\n            [[0x8d, 0xf9, 0x1f]] // STA $1FF9\n        );\n\n        return signatureCounts[0] >= 2;\n    }\n\n    reset(): void {\n        this._bank = this._bank1;\n        this._hasSC = false;\n    }\n\n    read(address: number): number {\n        this._access(address & 0x0fff, this._bus.getLastDataBusValue());\n\n        return this.peek(address);\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        if (this._hasSC && address >= 0x0080 && address < 0x0100) {\n            return this._saraRAM[address - 0x80];\n        }\n\n        return this._bank[address];\n    }\n\n    write(address: number, value: number): void {\n        address &= 0x0fff;\n\n        if (address < 0x80 && this._supportSC) {\n            this._hasSC = true;\n        }\n\n        this._access(address, value);\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_8k_F8;\n    }\n\n    randomize(rng: RngInterface): void {\n        for (let i = 0; i < this._saraRAM.length; i++) {\n            this._saraRAM[i] = rng.int(0xff);\n        }\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    private _access(address: number, value: number): void {\n        if (address < 0x80 && this._hasSC) {\n            this._saraRAM[address] = value & 0xff;\n            return;\n        }\n\n        switch (address) {\n            case 0x0ff8:\n                this._bank = this._bank0;\n                break;\n\n            case 0x0ff9:\n                this._bank = this._bank1;\n                break;\n        }\n    }\n\n    private _bank: Uint8Array = null;\n    private _bank0 = new Uint8Array(0x1000);\n    private _bank1 = new Uint8Array(0x1000);\n\n    private _hasSC = false;\n    private _saraRAM = new Uint8Array(0x80);\n\n    private _bus: Bus = null;\n}\n\nexport { CartridgeF8 as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\n\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\n\nclass CartridgeF6 extends AbstractCartridge {\n    constructor(buffer: { [i: number]: number; length: number }, private _supportSC: boolean = true) {\n        super();\n\n        if (buffer.length !== 0x4000) {\n            throw new Error(`buffer is not a 16k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 0x1000; i++) {\n            this._bank0[i] = buffer[i];\n            this._bank1[i] = buffer[0x1000 + i];\n            this._bank2[i] = buffer[0x2000 + i];\n            this._bank3[i] = buffer[0x3000 + i];\n        }\n\n        this.reset();\n    }\n\n    reset(): void {\n        this._bank = this._bank0;\n        this._hasSC = false;\n    }\n\n    read(address: number): number {\n        this._access(address & 0x0fff, this._bus.getLastDataBusValue());\n\n        return this.peek(address);\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        if (this._hasSC && address >= 0x0080 && address < 0x0100) {\n            return this._saraRAM[address - 0x80];\n        }\n\n        return this._bank[address];\n    }\n\n    write(address: number, value: number): void {\n        address &= 0x0fff;\n\n        if (address < 0x80 && this._supportSC) {\n            this._hasSC = true;\n        }\n\n        this._access(address, value);\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_16k_F6;\n    }\n\n    randomize(rng: RngInterface): void {\n        for (let i = 0; i < this._saraRAM.length; i++) {\n            this._saraRAM[i] = rng.int(0xff);\n        }\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    private _access(address: number, value: number): void {\n        if (address < 0x80 && this._hasSC) {\n            this._saraRAM[address] = value & 0xff;\n            return;\n        }\n\n        switch (address) {\n            case 0x0ff6:\n                this._bank = this._bank0;\n                break;\n\n            case 0x0ff7:\n                this._bank = this._bank1;\n                break;\n\n            case 0x0ff8:\n                this._bank = this._bank2;\n                break;\n\n            case 0x0ff9:\n                this._bank = this._bank3;\n                break;\n        }\n    }\n\n    private _bank: Uint8Array = null;\n    private _bank0 = new Uint8Array(0x1000);\n    private _bank1 = new Uint8Array(0x1000);\n    private _bank2 = new Uint8Array(0x1000);\n    private _bank3 = new Uint8Array(0x1000);\n\n    private _hasSC = false;\n    private _saraRAM = new Uint8Array(0x80);\n\n    private _bus: Bus = null;\n}\n\nexport { CartridgeF6 as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport * as cartridgeUtil from './util';\nimport CartridgeInfo from './CartridgeInfo';\n\nclass CartridgeE0 extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length !== 0x2000) {\n            throw new Error(`buffer is not an 8k cartridge image: invalid length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 8; i++) {\n            this._banks[i] = new Uint8Array(0x0400);\n        }\n\n        for (let i = 0; i < 0x0400; i++) {\n            for (let j = 0; j < 8; j++) {\n                this._banks[j][i] = buffer[j * 0x0400 + i];\n            }\n        }\n\n        this.reset();\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        // Signatures shamelessly stolen from stella\n        const signatureCounts = cartridgeUtil.searchForSignatures(buffer, [\n            [0x8d, 0xe0, 0x1f], // STA $1FE0\n            [0x8d, 0xe0, 0x5f], // STA $5FE0\n            [0x8d, 0xe9, 0xff], // STA $FFE9\n            [0x0c, 0xe0, 0x1f], // NOP $1FE0\n            [0xad, 0xe0, 0x1f], // LDA $1FE0\n            [0xad, 0xe9, 0xff], // LDA $FFE9\n            [0xad, 0xed, 0xff], // LDA $FFED\n            [0xad, 0xf3, 0xbf] // LDA $BFF3\n        ]);\n\n        for (let i = 0; i < signatureCounts.length; i++) {\n            if (signatureCounts[i] > 0) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    reset(): void {\n        for (let i = 0; i < 4; i++) {\n            this._activeBanks[i] = this._banks[7];\n        }\n    }\n\n    read(address: number): number {\n        address &= 0x0fff;\n\n        if (address >= 0x0fe0 && address < 0x0ff8) {\n            this._handleBankswitch(address);\n        }\n\n        return this._activeBanks[address >> 10][address & 0x03ff];\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        return this._activeBanks[address >> 10][address & 0x03ff];\n    }\n\n    write(address: number, value: number): void {\n        const addressMasked = address & 0x0fff;\n\n        if (addressMasked >= 0x0fe0 && addressMasked < 0x0ff8) {\n            this._handleBankswitch(addressMasked);\n        }\n\n        return super.write(address, value);\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_8k_E0;\n    }\n\n    private _handleBankswitch(address: number): void {\n        if (address < 0x0fe8) {\n            this._activeBanks[0] = this._banks[address - 0x0fe0];\n        } else if (address < 0x0ff0) {\n            this._activeBanks[1] = this._banks[address - 0x0fe8];\n        } else {\n            this._activeBanks[2] = this._banks[address - 0x0ff0];\n        }\n    }\n\n    private _banks = new Array<Uint8Array>(8);\n    private _activeBanks = new Array<Uint8Array>(4);\n}\n\nexport { CartridgeE0 as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport Bus from '../Bus';\nimport CartridgeInfo from './CartridgeInfo';\nimport * as cartridgeUtil from './util';\n\nclass CartridgeFE extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length !== 0x2000) {\n            throw new Error(`buffer is not an 8k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 0x1000; i++) {\n            this._bank0[i] = buffer[i];\n            this._bank1[i] = buffer[0x1000 + i];\n        }\n\n        this.reset();\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        // Signatures shamelessly stolen from stella\n        const signatureCounts = cartridgeUtil.searchForSignatures(buffer, [\n            [0x20, 0x00, 0xd0, 0xc6, 0xc5], // JSR $D000; DEC $C5\n            [0x20, 0xc3, 0xf8, 0xa5, 0x82], // JSR $F8C3; LDA $82\n            [0xd0, 0xfb, 0x20, 0x73, 0xfe], // BNE $FB; JSR $FE73\n            [0x20, 0x00, 0xf0, 0x84, 0xd6] // JSR $F000; STY $D6\n        ]);\n\n        for (let i = 0; i < signatureCounts.length; i++) {\n            if (signatureCounts[i] > 0) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    reset(): void {\n        this._bank = this._bank0;\n        this._lastAccessWasFE = false;\n        this._lastAddressBusValue = -1;\n    }\n\n    read(address: number): number {\n        return this._bank[address & 0x0fff];\n    }\n\n    write(address: number, value: number): void {\n        super.write(address, value);\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        this._bus.event.read.addHandler(CartridgeFE._onBusAccess, this);\n        this._bus.event.write.addHandler(CartridgeFE._onBusAccess, this);\n\n        return this;\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_8k_FE;\n    }\n\n    private static _onBusAccess(accessType: Bus.AccessType, self: CartridgeFE): void {\n        const previousAddressBusValue = self._lastAddressBusValue;\n        self._lastAddressBusValue = self._bus.getLastAddresBusValue() & 0x1fff;\n\n        if (self._lastAddressBusValue === previousAddressBusValue) {\n            return;\n        }\n\n        if (self._lastAccessWasFE) {\n            const dataBusHiBits = self._bus.getLastDataBusValue() & 0xe0;\n\n            self._bank =\n                dataBusHiBits === 0\n                    ? self._bank0\n                    : (self._bus.getLastDataBusValue() & 0x20) > 0\n                        ? self._bank0\n                        : self._bank1;\n        }\n\n        self._lastAccessWasFE = self._lastAddressBusValue === 0x01fe;\n    }\n\n    private _bus: Bus;\n\n    private _bank0 = new Uint8Array(0x1000);\n    private _bank1 = new Uint8Array(0x1000);\n    private _bank: Uint8Array;\n\n    private _lastAccessWasFE = false;\n    private _lastAddressBusValue = -1;\n}\n\nexport { CartridgeFE as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport * as cartridgeUtil from './util';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\n\nclass Cartridge3F extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length !== 0x2000) {\n            throw new Error(`buffer is not an 8k cartridge image: invalid length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 4; i++) {\n            this._banks[i] = new Uint8Array(0x0800);\n        }\n\n        this._bank1 = this._banks[3];\n        this._bank0 = this._banks[0];\n\n        for (let i = 0; i < 0x0800; i++) {\n            for (let j = 0; j < 4; j++) {\n                this._banks[j][i] = buffer[0x0800 * j + i];\n            }\n        }\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        // Signature shamelessly stolen from stella\n        const signatureCounts = cartridgeUtil.searchForSignatures(\n            buffer,\n            [[0x85, 0x3f]] // STA $3F\n        );\n\n        return signatureCounts[0] >= 2;\n    }\n\n    reset(): void {\n        this._bank0 = this._banks[0];\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        this._bus.event.read.addHandler(Cartridge3F._onBusAccess, this);\n        this._bus.event.write.addHandler(Cartridge3F._onBusAccess, this);\n\n        return this;\n    }\n\n    read(address: number): number {\n        address &= 0x0fff;\n\n        return address < 0x0800 ? this._bank0[address] : this._bank1[address & 0x07ff];\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_8k_3F;\n    }\n\n    private static _onBusAccess(accessType: Bus.AccessType, self: Cartridge3F): void {\n        if (self._bus.getLastAddresBusValue() === 0x003f) {\n            self._bank0 = self._banks[self._bus.getLastDataBusValue() & 0x03];\n        }\n    }\n\n    private _banks = new Array<Uint8Array>(4);\n    private _bank0: Uint8Array;\n    private _bank1: Uint8Array;\n    private _bus: Bus = null;\n}\n\nexport { Cartridge3F as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport * as cartridgeUtil from './util';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\n\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\n\nclass Cartridge3E extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if ((buffer.length & 0x07ff) !== 0) {\n            throw new Error(`buffer length ${buffer.length} is not a multiple of 2k`);\n        }\n\n        const bankCount = buffer.length >>> 11;\n        if (bankCount < 2) {\n            throw new Error('image must have at least 2k');\n        }\n\n        this._banks = new Array<Uint8Array>(bankCount);\n\n        for (let i = 0; i < bankCount; i++) {\n            this._banks[i] = new Uint8Array(0x0800);\n        }\n\n        for (let i = 0; i <= 0xff; i++) {\n            this._ramBanks[i] = new Uint8Array(0x0400);\n        }\n\n        this._ramBank = this._ramBanks[0];\n        this._bank1 = this._banks[bankCount - 1];\n        this._bank0 = this._banks[0];\n\n        for (let i = 0; i < 0x0800; i++) {\n            for (let j = 0; j < bankCount; j++) {\n                this._banks[j][i] = buffer[0x0800 * j + i];\n            }\n        }\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        // Signature shamelessly stolen from stella\n        const signatureCounts = cartridgeUtil.searchForSignatures(\n            buffer,\n            [[0x85, 0x3e, 0xa9, 0x00]] // STA $3E, LDA #0\n        );\n\n        return signatureCounts[0] >= 1;\n    }\n\n    reset(): void {\n        this._bank0 = this._banks[0];\n    }\n\n    randomize(rng: RngInterface): void {\n        for (let i = 0; i < this._ramBanks.length; i++) {\n            for (let j = 0; j < 0x0400; j++) {\n                this._ramBanks[i][j] = rng.int(0xff);\n            }\n        }\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        this._bus.event.read.addHandler(Cartridge3E._onBusAccess, this);\n        this._bus.event.write.addHandler(Cartridge3E._onBusAccess, this);\n\n        return this;\n    }\n\n    read(address: number): number {\n        address &= 0x0fff;\n\n        if (this._ramSelect) {\n            if (address < 0x0400) {\n                return this._ramBank[address];\n            }\n\n            if (address < 0x0800) {\n                return (this._ramBank[address & 0x03ff] = this._bus.getLastDataBusValue());\n            }\n\n            return this._bank1[address & 0x07ff];\n        }\n\n        return address < 0x0800 ? this._bank0[address] : this._bank1[address & 0x07ff];\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        if (this._ramSelect) {\n            if (address < 0x0400) {\n                return this._ramBank[address];\n            }\n\n            if (address < 0x0800) {\n                return this._bus.getLastDataBusValue();\n            }\n\n            return this._bank1[address & 0x07ff];\n        }\n\n        return address < 0x0800 ? this._bank0[address] : this._bank1[address & 0x07ff];\n    }\n\n    write(address: number, value: number): void {\n        if (!this._ramSelect) {\n            return;\n        }\n\n        address &= 0x0fff;\n\n        if (address >= 0x0400 && address < 0x0800) {\n            this._ramBank[address & 0x03ff] = value;\n        }\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_3E;\n    }\n\n    private static _onBusAccess(accessType: Bus.AccessType, self: Cartridge3E): void {\n        switch (self._bus.getLastAddresBusValue()) {\n            case 0x003f:\n                self._ramSelect = false;\n                self._bank0 = self._banks[self._bus.getLastDataBusValue() % self._banks.length];\n                break;\n\n            case 0x003e:\n                self._ramSelect = true;\n                self._ramBank = self._ramBanks[self._bus.getLastDataBusValue() % 32];\n                break;\n        }\n    }\n\n    private _banks: Array<Uint8Array> = null;\n    private _bank0: Uint8Array;\n    private _bank1: Uint8Array;\n\n    private _ramSelect = false;\n    private _ramBanks = new Array<Uint8Array>(0x0100);\n    private _ramBank: Uint8Array;\n\n    private _bus: Bus = null;\n}\n\nexport { Cartridge3E as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport * as cartridgeUtil from './util';\nimport Bus from '../Bus';\n\nclass CartridgeUA extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length !== 0x2000) {\n            throw new Error(`buffer is not an 8k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 0x1000; i++) {\n            this._bank0[i] = buffer[i];\n            this._bank1[i] = buffer[0x1000 + i];\n        }\n\n        this.reset();\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        // Signatures shamelessly stolen from stella\n        const signatureCounts = cartridgeUtil.searchForSignatures(buffer, [\n            [0x8d, 0x40, 0x02], // STA $240\n            [0xad, 0x40, 0x02], // LDA $240\n            [0xbd, 0x1f, 0x02] // LDA $21F,X\n        ]);\n\n        for (let i = 0; i < signatureCounts.length; i++) {\n            if (signatureCounts[i] > 0) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    reset(): void {\n        this._bank = this._bank0;\n    }\n\n    read(address: number): number {\n        return this._bank[address & 0x0fff];\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        bus.event.read.addHandler(CartridgeUA._onBusAccess, this);\n        bus.event.write.addHandler(CartridgeUA._onBusAccess, this);\n\n        return this;\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_8k_UA;\n    }\n\n    private static _onBusAccess(accessType: Bus.AccessType, self: CartridgeUA): void {\n        switch (self._bus.getLastAddresBusValue()) {\n            case 0x0220:\n                self._bank = self._bank0;\n                break;\n\n            case 0x0240:\n                self._bank = self._bank1;\n                break;\n        }\n    }\n\n    private _bus: Bus = null;\n\n    private _bank: Uint8Array = null;\n    private _bank0 = new Uint8Array(0x1000);\n    private _bank1 = new Uint8Array(0x1000);\n}\n\nexport { CartridgeUA as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\nimport * as cartridgeUtil from './util';\n\nclass CartridgeFA extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length !== 0x3000) {\n            throw new Error(`buffer is not a 12k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 0x1000; i++) {\n            this._bank0[i] = buffer[i];\n            this._bank1[i] = buffer[0x1000 + i];\n            this._bank2[i] = buffer[0x2000 + i];\n        }\n\n        this.reset();\n    }\n\n    reset(): void {\n        this._bank = this._bank0;\n    }\n\n    randomize(rng: RngInterface): void {\n        for (let i = 0; i < this._ram.length; i++) {\n            this._ram[i] = rng.int(0xff);\n        }\n    }\n\n    read(address: number): number {\n        this._handleBankswitch(address & 0x0fff);\n\n        return this.peek(address);\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        if (address >= 0x0100 && address < 0x0200) {\n            return this._ram[address & 0xff];\n        } else {\n            return this._bank[address];\n        }\n    }\n\n    write(address: number, value: number): void {\n        address &= 0x0fff;\n\n        this._handleBankswitch(address);\n\n        if (address < 0x0100) {\n            this._ram[address] = value & 0xff;\n        } else {\n            super.write(address, value);\n        }\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_12k_FA;\n    }\n\n    private _handleBankswitch(address: number): void {\n        switch (address) {\n            case 0x0ff8:\n                this._bank = this._bank0;\n                break;\n\n            case 0x0ff9:\n                this._bank = this._bank1;\n                break;\n\n            case 0x0ffa:\n                this._bank = this._bank2;\n                break;\n        }\n    }\n\n    private _bank0 = new Uint8Array(0x1000);\n    private _bank1 = new Uint8Array(0x1000);\n    private _bank2 = new Uint8Array(0x1000);\n\n    private _bank: Uint8Array;\n\n    private _ram = new Uint8Array(0x0100);\n}\n\nexport { CartridgeFA as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport * as cartridgeUtil from './util';\nimport CartridgeInfo from './CartridgeInfo';\n\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\n\nclass CartrdigeE7 extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length !== 0x4000) {\n            throw new Error(`buffer is not a 16k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 8; i++) {\n            this._banks[i] = new Uint8Array(0x0800);\n        }\n\n        for (let i = 0; i < 4; i++) {\n            this._ram1Banks[i] = new Uint8Array(0x100);\n        }\n\n        for (let i = 0; i < 0x0800; i++) {\n            for (let j = 0; j < 8; j++) {\n                this._banks[j][i] = buffer[j * 0x0800 + i];\n            }\n        }\n\n        this.reset();\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        // Signatures shamelessly stolen from stella\n        const signatureCounts = cartridgeUtil.searchForSignatures(buffer, [\n            [0xad, 0xe2, 0xff], // LDA $FFE2\n            [0xad, 0xe5, 0xff], // LDA $FFE5\n            [0xad, 0xe5, 0x1f], // LDA $1FE5\n            [0xad, 0xe7, 0x1f], // LDA $1FE7\n            [0x0c, 0xe7, 0x1f], // NOP $1FE7\n            [0x8d, 0xe7, 0xff], // STA $FFE7\n            [0x8d, 0xe7, 0x1f] // STA $1FE7\n        ]);\n\n        for (let i = 0; i < signatureCounts.length; i++) {\n            if (signatureCounts[i] > 0) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    reset(): void {\n        this._bank0 = this._banks[0];\n        this._ram1 = this._ram1Banks[0];\n        this._ram0Enabled = false;\n    }\n\n    read(address: number): number {\n        this._handleBankswitch(address & 0x0fff);\n\n        return this.peek(address);\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        // 0 -> 0x07FF: bank 0 - 6 or RAM\n        if (address < 0x0800) {\n            // RAM enabled?\n            if (this._ram0Enabled) {\n                // 0x0000 - 0x03FF is write, 0x0400 - 0x07FF is read\n                return address >= 0x0400 ? this._ram0[address - 0x0400] : 0;\n            } else {\n                //  bank 0 - 6\n                return this._bank0[address];\n            }\n        }\n\n        // 0x0800 -> 0x9FF is RAM\n        if (address <= 0x09ff) {\n            // 0x0800 - 0x08FF is write, 0x0900 - 0x09FF is read\n            return address >= 0x0900 ? this._ram1[address - 0x0900] : 0;\n        }\n\n        // Higher address are the remaining 1.5k of bank 7\n        return this._banks[7][0x07ff - (0x0fff - address)];\n    }\n\n    write(address: number, value: number) {\n        address &= 0x0fff;\n\n        this._handleBankswitch(address);\n\n        if (address < 0x0400) {\n            if (this._ram0Enabled) {\n                this._ram0[address] = value;\n            } else {\n                super.write(address, value);\n            }\n        } else if (address < 0x0800) {\n            super.write(address, value);\n        } else if (address < 0x08ff) {\n            this._ram1[address - 0x0800] = value;\n        } else {\n            super.write(address, value);\n        }\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_16k_E7;\n    }\n\n    randomize(rng: RngInterface): void {\n        for (let i = 0; i < 4; i++) {\n            for (let j = 0; j < this._ram1Banks[i].length; j++) {\n                this._ram1Banks[i][j] = rng.int(0xff);\n            }\n        }\n\n        for (let i = 0; i < this._ram0.length; i++) {\n            this._ram0[i] = rng.int(0xff);\n        }\n    }\n\n    private _handleBankswitch(address: number): void {\n        if (address < 0x0fe0) {\n            return;\n        }\n\n        if (address <= 0x0fe6) {\n            this._bank0 = this._banks[address & 0x000f];\n            this._ram0Enabled = false;\n        } else if (address === 0x0fe7) {\n            this._ram0Enabled = true;\n        } else if (address <= 0x0feb) {\n            this._ram1 = this._ram1Banks[address - 0x0fe8];\n        }\n    }\n\n    private _banks = new Array<Uint8Array>(8);\n    private _bank0: Uint8Array;\n\n    private _ram0 = new Uint8Array(0x0400);\n    private _ram1Banks = new Array<Uint8Array>(4);\n    private _ram1: Uint8Array;\n    private _ram0Enabled = false;\n}\n\nexport { CartrdigeE7 as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport * as cartridgeUtil from './util';\nimport CartridgeInfo from './CartridgeInfo';\n\nclass CartridgeF0 extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length !== 0x10000) {\n            throw new Error(`buffer is not a 64k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 16; i++) {\n            this._banks[i] = new Uint8Array(0x1000);\n        }\n\n        for (let i = 0; i < 0x1000; i++) {\n            for (let j = 0; j < 16; j++) {\n                this._banks[j][i] = buffer[j * 0x1000 + i];\n            }\n        }\n\n        this.reset();\n    }\n\n    reset(): void {\n        this._bankIdx = 0;\n        this._currentBank = this._banks[this._bankIdx];\n    }\n\n    read(address: number): number {\n        address &= 0x0fff;\n\n        this._handleBankswitch(address);\n\n        return this._currentBank[address];\n    }\n\n    peek(address: number): number {\n        return this._currentBank[address & 0x0fff];\n    }\n\n    write(address: number, value: number) {\n        address &= 0xfff;\n\n        this._handleBankswitch(address);\n\n        super.write(address, value);\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_64k_F0;\n    }\n\n    private _handleBankswitch(address: number): void {\n        if (address === 0x0ff0) {\n            this._bankIdx = (this._bankIdx + 1) & 0x0f;\n            this._currentBank = this._banks[this._bankIdx];\n        }\n    }\n\n    private _banks = new Array<Uint8Array>(16);\n    private _currentBank: Uint8Array;\n    private _bankIdx = 0;\n}\n\nexport { CartridgeF0 as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\nimport * as cartridgeUtil from './util';\n\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\n\nclass CartridgeEF extends AbstractCartridge {\n    constructor(buffer: { [i: number]: number; length: number }, private _supportSC: boolean = true) {\n        super();\n\n        if (buffer.length !== 0x10000) {\n            throw new Error(`buffer is not a 64k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 16; i++) {\n            this._banks[i] = new Uint8Array(0x1000);\n        }\n\n        for (let i = 0; i < 0x1000; i++) {\n            for (let j = 0; j < 16; j++) {\n                this._banks[j][i] = buffer[j * 0x1000 + i];\n            }\n        }\n\n        this.reset();\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        const matchMagic = (magicString: string): boolean => {\n            const magic = magicString.split('').map(x => x.charCodeAt(0));\n\n            for (let i = 0; i < magic.length; i++) {\n                if (magic[i] !== buffer[0xfff8 + i]) {\n                    return false;\n                }\n            }\n\n            return true;\n        };\n\n        if (buffer.length !== 0x10000) {\n            return false;\n        }\n\n        if (matchMagic('efef') || matchMagic('efsc')) {\n            return true;\n        }\n\n        // Signatures shamelessly stolen from stella\n        const signatureCounts = cartridgeUtil.searchForSignatures(buffer, [\n            [0x0c, 0xe0, 0xff], // NOP $FFE0\n            [0xad, 0xe0, 0xff], // LDA $FFE0\n            [0x0c, 0xe0, 0x1f], // NOP $1FE0\n            [0xad, 0xe0, 0x1f] // LDA $1FE0\n        ]);\n\n        for (let i = 0; i < 4; i++) {\n            if (signatureCounts[i] > 0) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    reset(): void {\n        this._bank = this._banks[15];\n        this._hasSC = false;\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_64k_EF;\n    }\n\n    randomize(rng: RngInterface): void {\n        for (let i = 0; i < this._ram.length; i++) {\n            this._ram[i] = rng.int(0xff);\n        }\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    read(address: number): number {\n        this._access(address & 0x0fff, this._bus.getLastDataBusValue());\n\n        return this.peek(address);\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        if (this._hasSC && address >= 0x0080 && address < 0x0100) {\n            return this._ram[address - 0x80];\n        } else {\n            return this._bank[address];\n        }\n    }\n\n    write(address: number, value: number): void {\n        address &= 0x0fff;\n\n        if (address < 0x80 && this._supportSC) {\n            this._hasSC = true;\n        }\n\n        this._access(address, value);\n    }\n\n    private _access(address: number, value: number): void {\n        if (address < 0x80 && this._hasSC) {\n            this._ram[address] = value;\n            return;\n        }\n\n        if (address >= 0x0fe0 && address <= 0x0fef) {\n            this._bank = this._banks[address - 0x0fe0];\n        }\n    }\n\n    private _bus: Bus = null;\n\n    private _bank: Uint8Array;\n    private _banks = new Array<Uint8Array>(16);\n    private _ram = new Uint8Array(0x80);\n    private _hasSC = false;\n}\n\nexport { CartridgeEF as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\n\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\n\nclass CartridgeF4 extends AbstractCartridge {\n    constructor(buffer: { [i: number]: number; length: number }, private _supportSC: boolean = true) {\n        super();\n\n        if (buffer.length !== 0x8000) {\n            throw new Error(`buffer is not a 32k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 8; i++) {\n            this._banks[i] = new Uint8Array(0x1000);\n        }\n\n        for (let i = 0; i < 0x1000; i++) {\n            for (let j = 0; j < 8; j++) {\n                this._banks[j][i] = buffer[j * 0x1000 + i];\n            }\n        }\n\n        this.reset();\n    }\n\n    reset(): void {\n        this._bank = this._banks[0];\n        this._hasSC = false;\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_32k_F4;\n    }\n\n    randomize(rng: RngInterface): void {\n        for (let i = 0; i < this._ram.length; i++) {\n            this._ram[i] = rng.int(0xff);\n        }\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    read(address: number): number {\n        this._access(address & 0x0fff, this._bus.getLastDataBusValue());\n\n        return this.peek(address);\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        if (this._hasSC && address >= 0x0080 && address < 0x0100) {\n            return this._ram[address - 0x80];\n        } else {\n            return this._bank[address];\n        }\n    }\n\n    write(address: number, value: number): void {\n        address &= 0x0fff;\n\n        if (address < 0x80 && this._supportSC) {\n            this._hasSC = true;\n        }\n\n        this._access(address, value);\n    }\n\n    private _access(address: number, value: number): void {\n        if (address < 0x80 && this._hasSC) {\n            this._ram[address] = value;\n            return;\n        }\n\n        if (address >= 0x0ff4 && address <= 0x0ffb) {\n            this._bank = this._banks[address - 0x0ff4];\n        }\n    }\n\n    private _bus: Bus = null;\n\n    private _bank: Uint8Array;\n    private _banks = new Array<Uint8Array>(8);\n    private _ram = new Uint8Array(0x80);\n    private _hasSC = false;\n}\n\nexport { CartridgeF4 as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\nimport Bus from '../Bus';\nimport * as cartridgeUtil from './util';\n\nconst enum IODelay {\n    load = 10,\n    save = 100\n}\n\nclass CartridgeFA2 extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length !== 0x7000 && buffer.length !== 0x7400) {\n            throw new Error(`buffer is not a 28k/29k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 7; i++) {\n            this._banks[i] = new Uint8Array(0x1000);\n        }\n\n        const offset = buffer.length === 0x7000 ? 0 : 0x0400;\n\n        for (let i = 0; i < 0x1000; i++) {\n            for (let j = 0; j < 7; j++) {\n                this._banks[j][i] = buffer[j * 0x1000 + i + offset];\n            }\n        }\n\n        this.reset();\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        // Signatures shamelessly stolen from Stella\n        const signatureCounts = cartridgeUtil.searchForSignatures(buffer, [\n            [0xa0, 0xc1, 0x1f, 0xe0],\n            [0x00, 0x80, 0x02, 0xe0]\n        ]);\n\n        return signatureCounts[0] > 0 || signatureCounts[1] > 0;\n    }\n\n    reset(): void {\n        this._accessCounter = 0;\n        this._accessCounterLimit = 0;\n        this._bank = this._banks[0];\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_FA2;\n    }\n\n    randomize(rng: RngInterface): void {\n        for (let i = 0; i < this._ram.length; i++) {\n            this._ram[i] = rng.int(0xff);\n        }\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    read(address: number): number {\n        this.write(address & 0x0fff, this._bus.getLastDataBusValue());\n\n        return this.peek(address);\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        if (address >= 0x0100 && address < 0x0200) {\n            return this._ram[address - 0x0100];\n        } else if (address === 0x0ff4) {\n            return this._accessCounter >= this._accessCounterLimit\n                ? // bit 6 zero: operation complete\n                  this._bank[address] & ~0x40\n                : // bit 6 one: operation pending\n                  this._bank[address] | 0x40;\n        } else {\n            return this._bank[address];\n        }\n    }\n\n    write(address: number, value: number): void {\n        address &= 0x0fff;\n\n        this._accessCounter++;\n\n        if (address < 0x0100) {\n            this._ram[address] = value;\n            return;\n        }\n\n        if (address === 0x0ff4) {\n            return this._handleIo();\n        }\n\n        if (address >= 0x0ff5 && address <= 0x0ffb) {\n            this._bank = this._banks[address - 0x0ff5];\n        }\n    }\n\n    private _handleIo(): void {\n        if (this._accessCounter < this._accessCounterLimit) {\n            return;\n        }\n\n        if (this._ram[0xff] === 1) {\n            for (let i = 0; i < 0x100; i++) {\n                this._ram[i] = this._savedRam[i];\n            }\n\n            this._accessCounterLimit = IODelay.load;\n        } else if (this._ram[0xff] === 2) {\n            for (let i = 0; i < 0x100; i++) {\n                this._savedRam[i] = this._ram[i];\n            }\n\n            this._accessCounterLimit = IODelay.save;\n        } else {\n            return;\n        }\n\n        this._accessCounter = 0;\n        this._ram[0xff] = 0;\n    }\n\n    private _bank: Uint8Array;\n    private _banks = new Array<Uint8Array>(7);\n    private _ram = new Uint8Array(0x100);\n\n    private _savedRam = new Uint8Array(0x100);\n    private _accessCounter = 0;\n    private _accessCounterLimit = 0;\n\n    private _bus: Bus;\n}\n\nexport { CartridgeFA2 as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nclass Header {\n    constructor(buffer: { [idx: number]: number; length: number }) {\n        this.startAddressLow = buffer[0x2000];\n        this.startAddressHigh = buffer[0x2001];\n        this.controlWord = buffer[0x2002];\n        this.blockCount = buffer[0x2003];\n        this.checksum = buffer[0x2004];\n        this.multiloadId = buffer[0x2005];\n        this.progressBarSpeedLow = buffer[0x2006];\n        this.progressBarSpeedHigh = buffer[0x2007];\n\n        this.blockLocation = new Uint8Array(this.blockCount);\n        this.blockChecksum = new Uint8Array(this.blockCount);\n\n        for (let i = 0; i < this.blockCount; i++) {\n            this.blockLocation[i] = buffer[0x2000 + 16 + i];\n            this.blockChecksum[i] = buffer[0x2000 + 64 + i];\n        }\n    }\n\n    verify(): boolean {\n        const checksum =\n            this.startAddressLow +\n            this.startAddressHigh +\n            this.controlWord +\n            this.blockCount +\n            this.checksum +\n            this.multiloadId +\n            this.progressBarSpeedLow +\n            this.progressBarSpeedHigh;\n\n        return (checksum & 0xff) === 0x55;\n    }\n\n    startAddressLow: number;\n    startAddressHigh: number;\n    controlWord: number;\n    blockCount: number;\n    checksum: number;\n    multiloadId: number;\n    progressBarSpeedLow: number;\n    progressBarSpeedHigh: number;\n\n    blockLocation: Uint8Array = null;\n    blockChecksum: Uint8Array = null;\n}\n\nexport { Header as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { decode } from '../../../../tools/base64';\n\nexport const bios = decode(\n    'pfpMGPj//3jYqQCi/5qqqJUA6ND7TBj4ogKGAa4G8I74/6AAoiiUBMoQ+6KAoACUAOjQ+6ILvGj4lPDKEPhM8ACiBr1z+JXwyhD4rvD/hoC8APCt8f+u8v+G9K7z/4b1ov+gAJpM8ACN+f+t+//Q+0xB+I34/0wAAA=='\n);\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\n\nimport Header from './supercharger/Header';\nimport { bios } from './supercharger/blob';\n\nconst enum BankType {\n    ram,\n    rom\n}\n\nclass CartridgeSupercharger extends AbstractCartridge {\n    constructor(buffer: { [i: number]: number; length: number }) {\n        super();\n\n        if (buffer.length % 8448 !== 0) {\n            throw new Error(`not a supercharger image --- invalid size`);\n        }\n\n        this._loadCount = buffer.length / 8448;\n\n        this._loads = new Array<Uint8Array>(this._loadCount);\n        this._headers = new Array<Header>(this._loadCount);\n\n        for (let i = 0; i < this._loadCount; i++) {\n            this._loads[i] = new Uint8Array(8448);\n        }\n\n        for (let i = 0; i < 8448; i++) {\n            for (let j = 0; j < this._loadCount; j++) {\n                this._loads[j][i] = buffer[j * 8448 + i];\n            }\n        }\n\n        for (let i = 0; i < this._loadCount; i++) {\n            this._headers[i] = new Header(this._loads[i]);\n\n            if (!this._headers[i].verify()) {\n                console.log(`load ${i} has invalid checksum`);\n            }\n        }\n\n        for (let i = 0; i < 3; i++) {\n            this._ramBanks[i] = new Uint8Array(0x0800);\n        }\n\n        this._setupRom();\n\n        this.reset();\n    }\n\n    reset() {\n        this._setBankswitchMode(0);\n        this._transitionCount = 0;\n        this._pendingWrite = false;\n        this._pendingWriteData = 0;\n        this._lastAddressBusValue = -1;\n        this._writeRamEnabled = false;\n        this._loadInProgress = false;\n        this._loadTimestamp = 0;\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        this._bus.event.read.addHandler(CartridgeSupercharger._onBusAccess, this);\n        this._bus.event.write.addHandler(CartridgeSupercharger._onBusAccess, this);\n\n        return this;\n    }\n\n    setCpuTimeProvider(provider: () => number): this {\n        this._cpuTimeProvider = provider;\n\n        return this;\n    }\n\n    setRng(rng: RngInterface): this {\n        this._rng = rng;\n\n        return this;\n    }\n\n    read(address: number): number {\n        return this._access(address, this._bus.getLastDataBusValue());\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        return address < 0x0800 ? this._bank0[address] : this._bank1[address & 0x07ff];\n    }\n\n    write(address: number, value: number): void {\n        this._access(address, value);\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_supercharger;\n    }\n\n    private static _onBusAccess(type: Bus.AccessType, self: CartridgeSupercharger) {\n        const address = self._bus.getLastAddresBusValue();\n\n        if (address !== self._lastAddressBusValue && !self._loadInProgress) {\n            if (self._transitionCount <= 5) {\n                self._transitionCount++;\n            }\n\n            self._lastAddressBusValue = address;\n        }\n    }\n\n    private _access(address: number, value: number): number {\n        address &= 0x0fff;\n\n        if (this._loadInProgress) {\n            if ((this._cpuTimeProvider() - this._loadTimestamp) > 1E-3) {\n                this._loadInProgress = false;\n            } else {\n                return value;\n            }\n        }\n\n        const readValue = address < 0x0800 ? this._bank0[address] : this._bank1[address & 0x07ff];\n\n        if ((address & 0x0f00) === 0 && (!this._pendingWrite || !this._writeRamEnabled)) {\n            this._pendingWriteData = address & 0x00ff;\n            this._transitionCount = 0;\n            this._pendingWrite = true;\n\n            return readValue;\n        }\n\n        if (address === 0x0ff8) {\n            this._setBankswitchMode((this._pendingWriteData & 28) >>> 2);\n            this._writeRamEnabled = (this._pendingWriteData & 0x02) > 0;\n\n            this._pendingWrite = false;\n\n            return readValue;\n        }\n\n        if (address === 0x0ff9 && this._bank1Type === BankType.rom && ((this._lastAddressBusValue & 0x1fff) < 0xff)) {\n            this._loadIntoRam(value);\n\n            return readValue;\n        }\n\n        if (this._pendingWrite && this._writeRamEnabled && this._transitionCount === 5) {\n            this._pendingWrite = false;\n\n            if (address < 0x0800) {\n                this._bank0[address] = this._pendingWriteData;\n            } else if (this._bank1Type === BankType.ram) {\n                this._bank1[address & 0x07ff] = this._pendingWriteData;\n            } else {\n                return readValue;\n            }\n\n            return this._pendingWriteData;\n        }\n\n        return readValue;\n    }\n\n    private _setBankswitchMode(mode: number): void {\n        switch (mode) {\n            case 0:\n                return this._configureBanks(2, BankType.rom);\n\n            case 1:\n                return this._configureBanks(0, BankType.rom);\n\n            case 2:\n                return this._configureBanks(2, BankType.ram, 0);\n\n            case 3:\n                return this._configureBanks(0, BankType.ram, 2);\n\n            case 4:\n                return this._configureBanks(2, BankType.rom);\n\n            case 5:\n                return this._configureBanks(1, BankType.rom);\n\n            case 6:\n                return this._configureBanks(2, BankType.ram, 1);\n\n            case 7:\n                return this._configureBanks(1, BankType.ram, 2);\n\n            default:\n                throw new Error('invalid bankswitching mode');\n        }\n    }\n\n    private _configureBanks(bank0: number, bank1Type: BankType, bank1 = 0): void {\n        this._bank0 = this._ramBanks[bank0];\n        this._bank1Type = bank1Type;\n        this._bank1 = bank1Type === BankType.ram ? this._ramBanks[bank1] : this._rom;\n    }\n\n    private _setupRom() {\n        for (let i = 0; i < 0x0800; i++) {\n            this._rom[i] = 0;\n        }\n\n        for (let i = 0; i < bios.length; i++) {\n            this._rom[i] = bios[i];\n        }\n\n        this._rom[0x07ff] = this._rom[0x07fd] = 0xf8;\n        this._rom[0x07fe] = this._rom[0x07fc] = 0x07;\n    }\n\n    private _loadIntoRam(loadId: number) {\n        let loadIndex: number;\n\n        for (loadIndex = 0; loadIndex < this._loadCount; loadIndex++) {\n            if (this._headers[loadIndex].multiloadId === loadId || this._loadCount === 1) {\n                break;\n            }\n        }\n\n        if (loadIndex >= this._loadCount) {\n            console.log(`no load with id ${loadId}`);\n        }\n\n        const header = this._headers[loadIndex],\n            load = this._loads[loadIndex];\n\n        for (let blockIdx = 0; blockIdx < header.blockCount; blockIdx++) {\n            const location = header.blockLocation[blockIdx];\n\n            let bank = location & 0x03;\n\n            if (bank > 2) {\n                bank = 0;\n                console.log(`invalid bank for block ${blockIdx}, load ${loadIndex}`);\n            }\n\n            const base = ((location & 28) >>> 2) * 256;\n            let checksum = location + header.blockChecksum[blockIdx];\n\n            for (let i = 0; i < 256; i++) {\n                checksum += load[256 * blockIdx + i];\n                this._ramBanks[bank][base + i] = load[256 * blockIdx + i];\n            }\n\n            if ((checksum & 0xff) !== 0x55) {\n                console.log(`load ${loadIndex}, block ${blockIdx}: invalid checksum`);\n            }\n        }\n\n        this._rom[0x7f0] = header.controlWord;\n        this._rom[0x7f1] = this._rng.int(0xff);\n        this._rom[0x7f2] = header.startAddressLow;\n        this._rom[0x7f3] = header.startAddressHigh;\n\n        this._loadInProgress = true;\n        this._loadTimestamp = this._cpuTimeProvider();\n    }\n\n    private _bus: Bus;\n\n    private _loadCount = 0;\n    private _loads: Array<Uint8Array> = null;\n    private _headers: Array<Header> = null;\n\n    private _rom = new Uint8Array(0x800);\n    private _ramBanks = new Array<Uint8Array>(3);\n\n    private _bank0: Uint8Array = null;\n    private _bank1: Uint8Array = null;\n    private _bank1Type = BankType.rom;\n\n    private _transitionCount = 0;\n    private _pendingWriteData = 0;\n    private _pendingWrite = false;\n    private _lastAddressBusValue = -1;\n    private _writeRamEnabled = false;\n    private _loadInProgress = false;\n    private _loadTimestamp = 0;\n\n    private _rng: RngInterface;\n    private _cpuTimeProvider: () => number = null;\n}\n\nexport { CartridgeSupercharger as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\nimport * as cartridgeUtil from './util';\n\nconst mixerTable = new Uint8Array([0x0, 0x4, 0x5, 0x9, 0x6, 0xa, 0xb, 0xf]);\n\nclass CartridgeDPC extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length < 0x2800) {\n            throw new Error(`buffer is not a DPC image: too small ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 8; i++) {\n            this._fetchers[i] = new Fetcher();\n        }\n\n        for (let i = 0; i < 0x1000; i++) {\n            this._bank0[i] = buffer[i];\n            this._bank1[i] = buffer[0x1000 + i];\n        }\n\n        for (let i = 0; i < 0x0800; i++) {\n            this._fetcherData[i] = buffer[0x2000 + i];\n        }\n\n        this.reset();\n    }\n\n    reset(): void {\n        this._bank = this._bank1;\n        this._rng = 1;\n        this._fetchers.forEach(fetcher => fetcher.reset());\n        this._lastCpuTime = 0;\n        this._clockAccumulator = 0;\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_8k_DPC;\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    setCpuTimeProvider(provider: () => number): this {\n        this._cpuTimeProvider = provider;\n\n        return this;\n    }\n\n    read(address: number): number {\n        return this._access(address, this._bus.getLastDataBusValue());\n    }\n\n    peek(address: number): number {\n        return this._bank[address & 0x0fff];\n    }\n\n    write(address: number, value: number): void {\n        this._access(address, value);\n    }\n\n    private _access(address: number, value: number): number {\n        address &= 0x0fff;\n\n        if (address > 0x7f) {\n            switch (address) {\n                case 0x0ff8:\n                    this._bank = this._bank0;\n                    break;\n\n                case 0x0ff9:\n                    this._bank = this._bank1;\n                    break;\n\n                default:\n                    break;\n            }\n\n            return this._bank[address];\n        }\n\n        if (address < 0x08) {\n            if (address & 0x04) {\n                this._clockMusicFetchers();\n\n                return mixerTable[\n                    (this._fetchers[5].mask & 0x4) | (this._fetchers[6].mask & 0x2) | (this._fetchers[7].mask & 0x1)\n                ];\n            } else {\n                return this._randomNext();\n            }\n        }\n\n        if (address < 0x40) {\n            const fetcher = this._fetchers[(address - 8) & 0x07],\n                mask = fetcher.mask;\n\n            let fetchedData = this._fetcherData[0x07ff - fetcher.pointer];\n\n            fetcher.next();\n\n            switch ((address - 8) >>> 3) {\n                case 0:\n                    return fetchedData;\n\n                case 1:\n                    return fetchedData & mask;\n\n                case 2:\n                    fetchedData &= mask;\n                    return ((fetchedData << 4) | (fetchedData >>> 4)) & 0xff;\n\n                case 3:\n                    fetchedData &= mask;\n\n                    return (\n                        ((fetchedData & 0x01) << 7) |\n                        ((fetchedData & 0x02) << 5) |\n                        ((fetchedData & 0x04) << 3) |\n                        ((fetchedData & 0x08) << 1) |\n                        ((fetchedData & 0x10) >>> 1) |\n                        ((fetchedData & 0x20) >>> 3) |\n                        ((fetchedData & 0x40) >>> 5) |\n                        ((fetchedData & 0x80) >>> 7)\n                    );\n\n                case 4:\n                    return (fetchedData & mask) >>> 1;\n\n                case 5:\n                    return (fetchedData << 1) & mask;\n\n                case 6:\n                    return mask;\n            }\n        }\n\n        if (address < 0x60) {\n            const fetcher = this._fetchers[(address - 0x40) & 0x07];\n\n            switch ((address - 0x40) >>> 3) {\n                case 0:\n                    this._clockMusicFetchers();\n                    fetcher.setStart(value);\n                    break;\n\n                case 1:\n                    this._clockMusicFetchers();\n                    fetcher.setEnd(value);\n                    break;\n\n                case 2:\n                    fetcher.setLow(value);\n                    break;\n\n                case 3:\n                    fetcher.setHigh(value);\n\n                    if (address > 0x5c) {\n                        fetcher.setMusicMode(value);\n                    }\n\n                    break;\n            }\n\n            return this._bank[address];\n        }\n\n        if (address >= 0x70 && address < 0x78) {\n            this._rng = 1;\n\n            return this._bank[address];\n        }\n\n        return this._bank[address];\n    }\n\n    private _randomNext(): number {\n        const oldRng = this._rng;\n\n        this._rng =\n            ((this._rng << 1) |\n                (~((this._rng >>> 7) ^ (this._rng >>> 5) ^ ((this._rng >>> 4) ^ (this._rng >>> 3))) & 0x01)) &\n            0xff;\n\n        return oldRng;\n    }\n\n    private _clockMusicFetchers(): void {\n        const cpuTime = this._cpuTimeProvider();\n        this._clockAccumulator += (cpuTime - this._lastCpuTime) * 20000;\n        this._lastCpuTime = cpuTime;\n\n        const clocks = Math.floor(this._clockAccumulator);\n        this._clockAccumulator -= clocks;\n\n        if (clocks === 0) {\n            return;\n        }\n\n        for (let i = 5; i < 8; i++) {\n            this._fetchers[i].forwardClock(clocks);\n        }\n    }\n\n    private _bank0 = new Uint8Array(0x1000);\n    private _bank1 = new Uint8Array(0x1000);\n\n    private _bank: Uint8Array;\n\n    private _fetcherData = new Uint8Array(0x0800);\n    private _fetchers: Array<Fetcher> = new Array(8);\n\n    private _rng = 1;\n\n    private _bus: Bus;\n\n    private _cpuTimeProvider: () => number = null;\n    private _lastCpuTime = 0;\n    private _clockAccumulator = 0;\n}\n\nclass Fetcher {\n    contructor() {\n        this.reset();\n    }\n\n    reset() {\n        this.pointer = this.start = this.end = this.mask = 0;\n        this.musicMode = false;\n    }\n\n    next(): void {\n        if (this.musicMode) {\n            return;\n        }\n\n        this.pointer = (this.pointer + 0x07ff) & 0x07ff;\n\n        this._updateMask();\n    }\n\n    setStart(start: number): void {\n        this.start = start;\n        this.mask = 0x00;\n\n        this._updateMask();\n    }\n\n    setEnd(end: number): void {\n        this.end = end;\n\n        this._updateMask();\n    }\n\n    setLow(value: number): void {\n        this.pointer = (this.pointer & 0x0700) | value;\n\n        this._updateMask();\n    }\n\n    setHigh(value: number): void {\n        this.pointer = (this.pointer & 0xff) | ((value & 0x07) << 8);\n\n        this._updateMask();\n    }\n\n    setMusicMode(value: number): void {\n        this.musicMode = (value & 0x10) !== 0;\n    }\n\n    forwardClock(clocks: number) {\n        if (!this.musicMode) {\n            return;\n        }\n\n        const period = this.start + 1,\n            newPointerLow = ((this.pointer & 0xff) + period - clocks % period) % period,\n            distanceStart = (256 + this.start - newPointerLow) & 0xff,\n            distanceEnd = (256 + this.end - newPointerLow) & 0xff;\n\n        this.pointer = (this.pointer & 0x0700) | newPointerLow;\n\n        this.mask = distanceStart > distanceEnd ? 0 : 0xff;\n    }\n\n    private _updateMask(): void {\n        if ((this.pointer & 0xff) === this.start) {\n            this.mask = 0xff;\n        }\n\n        if ((this.pointer & 0xff) === this.end) {\n            this.mask = 0x00;\n        }\n    }\n\n    pointer = 0;\n    start = 0;\n    end = 0;\n    musicMode = false;\n    mask = 0x00;\n}\n\nexport { CartridgeDPC as default };\n","export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","export default '/home/travis/build/6502ts/6502.ts/node_modules/thumbulator.ts/lib/native'","\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\nvar inited = false;\nfunction init () {\n  inited = true;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n}\n\nexport function toByteArray (b64) {\n  if (!inited) {\n    init();\n  }\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nexport function fromByteArray (uint8) {\n  if (!inited) {\n    init();\n  }\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n","\nexport function read (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexport function write (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nexport default Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\nimport * as base64 from './base64'\nimport * as ieee754 from './ieee754'\nimport isArray from './isArray'\n\nexport var INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : true\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nvar _kMaxLength = kMaxLength()\nexport {_kMaxLength as kMaxLength};\nfunction typedArraySupport () {\n  return true;\n  // rollup issues\n  // try {\n  //   var arr = new Uint8Array(1)\n  //   arr.__proto__ = {\n  //     __proto__: Uint8Array.prototype,\n  //     foo: function () { return 42 }\n  //   }\n  //   return arr.foo() === 42 && // typed array instances can be augmented\n  //       typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n  //       arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  // } catch (e) {\n  //   return false\n  // }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nexport function Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    // Object.defineProperty(Buffer, Symbol.species, {\n    //   value: null,\n    //   configurable: true\n    // })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (internalIsBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nexport function SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\nBuffer.isBuffer = isBuffer;\nfunction internalIsBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!internalIsBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (internalIsBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!internalIsBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (internalIsBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!internalIsBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = internalIsBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nexport function isBuffer(obj) {\n  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n}\n\nfunction isFastBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0))\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexport function resolve() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : '/';\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexport function normalize(path) {\n  var isPathAbsolute = isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isPathAbsolute).join('/');\n\n  if (!path && !isPathAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isPathAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexport function isAbsolute(path) {\n  return path.charAt(0) === '/';\n}\n\n// posix version\nexport function join() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n}\n\n\n// path.relative(from, to)\n// posix version\nexport function relative(from, to) {\n  from = resolve(from).substr(1);\n  to = resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n}\n\nexport var sep = '/';\nexport var delimiter = ':';\n\nexport function dirname(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n}\n\nexport function basename(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n}\n\n\nexport function extname(path) {\n  return splitPath(path)[3];\n}\nexport default {\n  extname: extname,\n  basename: basename,\n  dirname: dirname,\n  sep: sep,\n  delimiter: delimiter,\n  relative: relative,\n  join: join,\n  isAbsolute: isAbsolute,\n  normalize: normalize,\n  resolve: resolve\n};\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b' ?\n    function (str, start, len) { return str.substr(start, len) } :\n    function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","\nvar Module = (function() {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  return (\nfunction(Module) {\n  Module = Module || {};\n\nvar Module=typeof Module!==\"undefined\"?Module:{};var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var arguments_=[];var thisProgram=\"./this.program\";var quit_=function(status,toThrow){throw toThrow};var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_HAS_NODE=false;var ENVIRONMENT_IS_SHELL=false;ENVIRONMENT_IS_WEB=typeof window===\"object\";ENVIRONMENT_IS_WORKER=typeof importScripts===\"function\";ENVIRONMENT_HAS_NODE=typeof process===\"object\"&&typeof process.versions===\"object\"&&typeof process.versions.node===\"string\";ENVIRONMENT_IS_NODE=ENVIRONMENT_HAS_NODE&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER;ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;if(ENVIRONMENT_IS_NODE){scriptDirectory=__dirname+\"/\";var nodeFS;var nodePath;read_=function shell_read(filename,binary){var ret;ret=tryParseAsDataURI(filename);if(!ret){if(!nodeFS)nodeFS=require(\"fs\");if(!nodePath)nodePath=require(\"path\");filename=nodePath[\"normalize\"](filename);ret=nodeFS[\"readFileSync\"](filename)}return binary?ret:ret.toString()};readBinary=function readBinary(filename){var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};if(process[\"argv\"].length>1){thisProgram=process[\"argv\"][1].replace(/\\\\/g,\"/\")}arguments_=process[\"argv\"].slice(2);process[\"on\"](\"unhandledRejection\",abort);quit_=function(status){process[\"exit\"](status)};Module[\"inspect\"]=function(){return\"[Emscripten Module object]\"}}else if(ENVIRONMENT_IS_SHELL){if(typeof read!=\"undefined\"){read_=function shell_read(f){var data=tryParseAsDataURI(f);if(data){return intArrayToString(data)}return read(f)}}readBinary=function readBinary(f){var data;data=tryParseAsDataURI(f);if(data){return data}if(typeof readbuffer===\"function\"){return new Uint8Array(readbuffer(f))}data=read(f,\"binary\");assert(typeof data===\"object\");return data};if(typeof scriptArgs!=\"undefined\"){arguments_=scriptArgs}else if(typeof arguments!=\"undefined\"){arguments_=arguments}if(typeof quit===\"function\"){quit_=function(status){quit(status)}}if(typeof print!==\"undefined\"){if(typeof console===\"undefined\")console={};console.log=print;console.warn=console.error=typeof printErr!==\"undefined\"?printErr:print}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}read_=function shell_read(url){try{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText}catch(err){var data=tryParseAsDataURI(url);if(data){return intArrayToString(data)}throw err}};if(ENVIRONMENT_IS_WORKER){readBinary=function readBinary(url){try{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}catch(err){var data=tryParseAsDataURI(url);if(data){return data}throw err}}}readAsync=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=function xhr_onload(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}var data=tryParseAsDataURI(url);if(data){onload(data.buffer);return}onerror()};xhr.onerror=onerror;xhr.send(null)};setWindowTitle=function(title){document.title=title}}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.warn.bind(console);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var STACK_ALIGN=16;function dynamicAlloc(size){var ret=HEAP32[DYNAMICTOP_PTR>>2];var end=ret+size+15&-16;if(end>_emscripten_get_heap_size()){abort()}HEAP32[DYNAMICTOP_PTR>>2]=end;return ret}function getNativeTypeSize(type){switch(type){case\"i1\":case\"i8\":return 1;case\"i16\":return 2;case\"i32\":return 4;case\"i64\":return 8;case\"float\":return 4;case\"double\":return 8;default:{if(type[type.length-1]===\"*\"){return 4}else if(type[0]===\"i\"){var bits=parseInt(type.substr(1));assert(bits%8===0,\"getNativeTypeSize invalid bits \"+bits+\", type \"+type);return bits/8}else{return 0}}}}function warnOnce(text){if(!warnOnce.shown)warnOnce.shown={};if(!warnOnce.shown[text]){warnOnce.shown[text]=1;err(text)}}var jsCallStartIndex=1;var functionPointers=new Array(0);var funcWrappers={};function dynCall(sig,ptr,args){if(args&&args.length){return Module[\"dynCall_\"+sig].apply(null,[ptr].concat(args))}else{return Module[\"dynCall_\"+sig].call(null,ptr)}}var tempRet0=0;var setTempRet0=function(value){tempRet0=value};var getTempRet0=function(){return tempRet0};var GLOBAL_BASE=8;var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime;if(Module[\"noExitRuntime\"])noExitRuntime=Module[\"noExitRuntime\"];function setValue(ptr,value,type,noSafe){type=type||\"i8\";if(type.charAt(type.length-1)===\"*\")type=\"i32\";switch(type){case\"i1\":HEAP8[ptr>>0]=value;break;case\"i8\":HEAP8[ptr>>0]=value;break;case\"i16\":HEAP16[ptr>>1]=value;break;case\"i32\":HEAP32[ptr>>2]=value;break;case\"i64\":tempI64=[value>>>0,(tempDouble=value,+Math_abs(tempDouble)>=+1?tempDouble>+0?(Math_min(+Math_floor(tempDouble/+4294967296),+4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/+4294967296)>>>0:0)],HEAP32[ptr>>2]=tempI64[0],HEAP32[ptr+4>>2]=tempI64[1];break;case\"float\":HEAPF32[ptr>>2]=value;break;case\"double\":HEAPF64[ptr>>3]=value;break;default:abort(\"invalid type for setValue: \"+type)}}var ABORT=false;var EXITSTATUS=0;function assert(condition,text){if(!condition){abort(\"Assertion failed: \"+text)}}function getCFunc(ident){var func=Module[\"_\"+ident];assert(func,\"Cannot call unknown function \"+ident+\", make sure it is exported\");return func}function ccall(ident,returnType,argTypes,args,opts){var toC={\"string\":function(str){var ret=0;if(str!==null&&str!==undefined&&str!==0){var len=(str.length<<2)+1;ret=stackAlloc(len);stringToUTF8(str,ret,len)}return ret},\"array\":function(arr){var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType===\"string\")return UTF8ToString(ret);if(returnType===\"boolean\")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);ret=convertReturnValue(ret);if(stack!==0)stackRestore(stack);return ret}var ALLOC_NONE=3;var UTF8Decoder=typeof TextDecoder!==\"undefined\"?new TextDecoder(\"utf8\"):undefined;function UTF8ArrayToString(u8Array,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(u8Array[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&u8Array.subarray&&UTF8Decoder){return UTF8Decoder.decode(u8Array.subarray(idx,endPtr))}else{var str=\"\";while(idx<endPtr){var u0=u8Array[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=u8Array[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=u8Array[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|u8Array[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\"}function stringToUTF8Array(str,outU8Array,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;outU8Array[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;outU8Array[outIdx++]=192|u>>6;outU8Array[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;outU8Array[outIdx++]=224|u>>12;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;outU8Array[outIdx++]=240|u>>18;outU8Array[outIdx++]=128|u>>12&63;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}}outU8Array[outIdx]=0;return outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((u&1023)<<10)|str.charCodeAt(++i)&1023;if(u<=127)++len;else if(u<=2047)len+=2;else if(u<=65535)len+=3;else len+=4}return len}var UTF16Decoder=typeof TextDecoder!==\"undefined\"?new TextDecoder(\"utf-16le\"):undefined;function writeArrayToMemory(array,buffer){HEAP8.set(array,buffer)}function writeAsciiToMemory(str,buffer,dontAddNull){for(var i=0;i<str.length;++i){HEAP8[buffer++>>0]=str.charCodeAt(i)}if(!dontAddNull)HEAP8[buffer>>0]=0}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module[\"HEAP8\"]=HEAP8=new Int8Array(buf);Module[\"HEAP16\"]=HEAP16=new Int16Array(buf);Module[\"HEAP32\"]=HEAP32=new Int32Array(buf);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(buf);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(buf);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(buf);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(buf);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(buf)}var STACK_BASE=3680,DYNAMIC_BASE=13920,DYNAMICTOP_PTR=3648;var INITIAL_TOTAL_MEMORY=Module[\"TOTAL_MEMORY\"]||16777216;if(Module[\"buffer\"]){buffer=Module[\"buffer\"]}else{buffer=new ArrayBuffer(INITIAL_TOTAL_MEMORY)}INITIAL_TOTAL_MEMORY=buffer.byteLength;updateGlobalBufferAndViews(buffer);HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE;function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback==\"function\"){callback();continue}var func=callback.func;if(typeof func===\"number\"){if(callback.arg===undefined){Module[\"dynCall_v\"](func)}else{Module[\"dynCall_vi\"](func,callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;var runtimeExited=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){runtimeExited=true}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var Math_abs=Math.abs;var Math_ceil=Math.ceil;var Math_floor=Math.floor;var Math_min=Math.min;var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module[\"preloadedImages\"]={};Module[\"preloadedAudios\"]={};var memoryInitializer=null;var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return String.prototype.startsWith?filename.startsWith(dataURIPrefix):filename.indexOf(dataURIPrefix)===0}var tempDouble;var tempI64;var ASM_CONSTS=[function($0){return Module.trapOnInstructionFetch($0)},function($0){return Module.busRead32($0)},function($0,$1){Module.busWrite32($0,$1)},function($0){return Module.busRead16($0)},function($0,$1){return Module.trapOnBx32($0,$1)},function($0,$1){Module.busWrite16($0,$1)}];function _emscripten_asm_const_iii(code,a0,a1){return ASM_CONSTS[code](a0,a1)}function _emscripten_asm_const_ii(code,a0){return ASM_CONSTS[code](a0)}memoryInitializer=\"data:application/octet-stream;base64,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\";var tempDoublePtr=3664;function demangle(func){return func}function demangleAll(text){var regex=/\\b__Z[\\w\\d_]+/g;return text.replace(regex,function(x){var y=demangle(x);return x===y?x:y+\" [\"+x+\"]\"})}function jsStackTrace(){var err=new Error;if(!err.stack){try{throw new Error(0)}catch(e){err=e}if(!err.stack){return\"(no stack trace available)\"}}return err.stack.toString()}function stackTrace(){var js=jsStackTrace();if(Module[\"extraStackTrace\"])js+=\"\\n\"+Module[\"extraStackTrace\"]();return demangleAll(js)}var PATH={splitPath:function(filename){var splitPathRe=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:function(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last===\".\"){parts.splice(i,1)}else if(last===\"..\"){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift(\"..\")}}return parts},normalize:function(path){var isAbsolute=path.charAt(0)===\"/\",trailingSlash=path.substr(-1)===\"/\";path=PATH.normalizeArray(path.split(\"/\").filter(function(p){return!!p}),!isAbsolute).join(\"/\");if(!path&&!isAbsolute){path=\".\"}if(path&&trailingSlash){path+=\"/\"}return(isAbsolute?\"/\":\"\")+path},dirname:function(path){var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return\".\"}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:function(path){if(path===\"/\")return\"/\";var lastSlash=path.lastIndexOf(\"/\");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},extname:function(path){return PATH.splitPath(path)[3]},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join(\"/\"))},join2:function(l,r){return PATH.normalize(l+\"/\"+r)}};var SYSCALLS={buffers:[null,[],[]],printChar:function(stream,curr){var buffer=SYSCALLS.buffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}},varargs:0,get:function(varargs){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(){var ret=UTF8ToString(SYSCALLS.get());return ret},get64:function(){var low=SYSCALLS.get(),high=SYSCALLS.get();return low},getZero:function(){SYSCALLS.get()}};function ___syscall140(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),offset_high=SYSCALLS.get(),offset_low=SYSCALLS.get(),result=SYSCALLS.get(),whence=SYSCALLS.get();return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall6(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD();return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function flush_NO_FILESYSTEM(){var fflush=Module[\"_fflush\"];if(fflush)fflush(0);var buffers=SYSCALLS.buffers;if(buffers[1].length)SYSCALLS.printChar(1,10);if(buffers[2].length)SYSCALLS.printChar(2,10)}function _fd_write(stream,iov,iovcnt,pnum){try{var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];for(var j=0;j<len;j++){SYSCALLS.printChar(stream,HEAPU8[ptr+j])}num+=len}HEAP32[pnum>>2]=num;return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___wasi_fd_write(){return _fd_write.apply(null,arguments)}function _emscripten_get_heap_size(){return HEAP8.length}function _exit(status){exit(status)}function _emscripten_memcpy_big(dest,src,num){HEAPU8.set(HEAPU8.subarray(src,src+num),dest)}function ___setErrNo(value){if(Module[\"___errno_location\"])HEAP32[Module[\"___errno_location\"]()>>2]=value;return value}function abortOnCannotGrowMemory(requestedSize){abort(\"OOM\")}function _emscripten_resize_heap(requestedSize){abortOnCannotGrowMemory(requestedSize)}var ASSERTIONS=false;function intArrayToString(array){var ret=[];for(var i=0;i<array.length;i++){var chr=array[i];if(chr>255){if(ASSERTIONS){assert(false,\"Character code \"+chr+\" (\"+String.fromCharCode(chr)+\")  at offset \"+i+\" not in 0x00-0xFF.\")}chr&=255}ret.push(String.fromCharCode(chr))}return ret.join(\"\")}var decodeBase64=typeof atob===\"function\"?atob:function(input){var keyStr=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";var output=\"\";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");do{enc1=keyStr.indexOf(input.charAt(i++));enc2=keyStr.indexOf(input.charAt(i++));enc3=keyStr.indexOf(input.charAt(i++));enc4=keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!==64){output=output+String.fromCharCode(chr2)}if(enc4!==64){output=output+String.fromCharCode(chr3)}}while(i<input.length);return output};function intArrayFromBase64(s){if(typeof ENVIRONMENT_IS_NODE===\"boolean\"&&ENVIRONMENT_IS_NODE){var buf;try{buf=Buffer.from(s,\"base64\")}catch(_){buf=new Buffer(s,\"base64\")}return new Uint8Array(buf.buffer,buf.byteOffset,buf.byteLength)}try{var decoded=decodeBase64(s);var bytes=new Uint8Array(decoded.length);for(var i=0;i<decoded.length;++i){bytes[i]=decoded.charCodeAt(i)}return bytes}catch(_){throw new Error(\"Converting base64 string to bytes failed.\")}}function tryParseAsDataURI(filename){if(!isDataURI(filename)){return}return intArrayFromBase64(filename.slice(dataURIPrefix.length))}var asmGlobalArg={\"Math\":Math,\"Int8Array\":Int8Array,\"Int16Array\":Int16Array,\"Int32Array\":Int32Array,\"Uint8Array\":Uint8Array,\"Uint16Array\":Uint16Array,\"Float32Array\":Float32Array,\"Float64Array\":Float64Array};var asmLibraryArg={\"a\":abort,\"b\":setTempRet0,\"c\":getTempRet0,\"d\":___setErrNo,\"e\":___syscall140,\"f\":___syscall6,\"g\":___wasi_fd_write,\"h\":_emscripten_asm_const_ii,\"i\":_emscripten_asm_const_iii,\"j\":_emscripten_get_heap_size,\"k\":_emscripten_memcpy_big,\"l\":_emscripten_resize_heap,\"m\":_exit,\"n\":_fd_write,\"o\":abortOnCannotGrowMemory,\"p\":demangle,\"q\":demangleAll,\"r\":flush_NO_FILESYSTEM,\"s\":jsStackTrace,\"t\":stackTrace,\"u\":tempDoublePtr,\"v\":DYNAMICTOP_PTR};// EMSCRIPTEN_START_ASM\nvar asm=(/** @suppress {uselessCode} */ function(global,env,buffer) {\n\"use asm\";var a=new global.Int8Array(buffer),b=new global.Int16Array(buffer),c=new global.Int32Array(buffer),d=new global.Uint8Array(buffer),e=new global.Uint16Array(buffer),f=new global.Float32Array(buffer),g=new global.Float64Array(buffer),h=env.u|0,i=env.v|0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0.0,r=global.Math.imul,s=global.Math.clz32,t=env.a,u=env.b,v=env.c,w=env.d,x=env.e,y=env.f,z=env.g,A=env.h,B=env.i,C=env.j,D=env.k,E=env.l,F=env.m,G=env.n,H=env.o,I=env.p,J=env.q,K=env.r,L=env.s,M=env.t,N=3680,O=13920,P=0.0;\n// EMSCRIPTEN_START_FUNCS\nfunction V(a){a=a|0;var b=0;b=N;N=N+a|0;N=N+15&-16;return b|0}function W(){return N|0}function X(a){a=a|0;N=a}function Y(a,b){a=a|0;b=b|0;N=a;O=b}function Z(a){a=a|0;c[712]=a;return}function _(){return 888}function $(a){a=a|0;var b=0,d=0,e=0,f=0,g=0;c[713]=0;if(!a){f=0;return f|0}b=0;d=0;while(1){g=fa()|0;e=(c[713]|0)!=0;d=(g|0)==0?d:g;b=b+1|0;if(e|(g|0)==0^1)break;if(b>>>0>=a>>>0){b=0;f=6;break}}if((f|0)==6)return b|0;g=e?10:d;return g|0}function aa(){c[713]=1;return}function ba(b){b=b|0;a[3440]=b;return}function ca(a){a=a|0;var b=0,d=0;d=N;N=N+16|0;b=c[2784+((a&15)<<2)>>2]|0;if((a&15|0)!=15){N=d;return b|0}if(b&1|0){a=c[160]|0;c[d>>2]=b;va(a,1028,d)|0}b=b&-2;N=d;return b|0}function da(a,b){a=a|0;b=b|0;c[2784+((a&15)<<2)>>2]=(a&15|0)==15?b&-2:b;return}function ea(){c[714]=4;c[715]=0;c[716]=0;c[717]=0;c[718]=0;return 0}function fa(){var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0;o=N;N=N+1232|0;d=c[711]|0;if(d&1|0){n=c[160]|0;c[o>>2]=d;va(n,1028,o)|0}b=c[712]|0;if(!b){b=A(0,(d&-2)+-2|0)|0;if(b|0){n=b;N=o;return n|0}}else if(((d&-2)+-2|0)==(b|0)){n=20;N=o;return n|0}if((d&-2)>>>0>4026531839&(c[717]|0)!=0){c[717]=0;n=c[709]|0;c[696]=A(1,n|0)|0;c[697]=A(1,n+4|0)|0;c[698]=A(1,n+8|0)|0;c[699]=A(1,n+12|0)|0;c[708]=A(1,n+16|0)|0;c[710]=A(1,n+20|0)|0;e=A(1,n+24|0)|0;c[718]=A(1,n+28|0)|0;c[709]=n+32}else e=d&-2;b=c[714]|0;do if(b&1){d=c[716]|0;if(!d){c[716]=c[715];c[714]=b|65536;b=b|65536;break}else{c[716]=d+-1;break}}while(0);if((b&3|0)==3?(b&65536|0)!=0&(c[717]|0)==0:0){f=c[709]|0;d=c[718]|0;a:do if((f+-4&-268435456|0)==-536870912)switch((f+536813548|0)>>>2|f+536813548<<30|0){case 0:{c[714]=d&65543;if((b&1|0)!=0|(d&1|0)==0)break a;c[716]=c[715];break a}case 1:{c[715]=d&16777215;break a}case 2:{c[716]=d&16777215;break a}case 3:break a;default:break a}else B(2,f+-4|0,d|0)|0;while(0);b:do if((f+-8&-268435456|0)==-536870912)switch((f+536813544|0)>>>2|f+536813544<<30|0){case 0:{n=c[714]|0;c[714]=e&65543;if((e&1|0)==0|(n&1|0)!=0)break b;c[716]=c[715];break b}case 1:{c[715]=e&16777215;break b}case 2:{c[716]=e&16777215;break b}case 3:break b;default:break b}else B(2,f+-8|0,e|0)|0;while(0);b=c[710]|0;c:do if((f+-12&-268435456|0)==-536870912)switch((f+536813540|0)>>>2|f+536813540<<30|0){case 0:{n=c[714]|0;c[714]=b&65543;if((b&1|0)==0|(n&1|0)!=0)break c;c[716]=c[715];break c}case 1:{c[715]=b&16777215;break c}case 2:{c[716]=b&16777215;break c}case 3:break c;default:break c}else B(2,f+-12|0,b|0)|0;while(0);b=c[708]|0;d:do if((f+-16&-268435456|0)==-536870912)switch((f+536813536|0)>>>2|f+536813536<<30|0){case 0:{n=c[714]|0;c[714]=b&65543;if((b&1|0)==0|(n&1|0)!=0)break d;c[716]=c[715];break d}case 1:{c[715]=b&16777215;break d}case 2:{c[716]=b&16777215;break d}case 3:break d;default:break d}else B(2,f+-16|0,b|0)|0;while(0);b=c[699]|0;e:do if((f+-20&-268435456|0)==-536870912)switch((f+536813532|0)>>>2|f+536813532<<30|0){case 0:{n=c[714]|0;c[714]=b&65543;if((b&1|0)==0|(n&1|0)!=0)break e;c[716]=c[715];break e}case 1:{c[715]=b&16777215;break e}case 2:{c[716]=b&16777215;break e}case 3:break e;default:break e}else B(2,f+-20|0,b|0)|0;while(0);b=c[698]|0;f:do if((f+-24&-268435456|0)==-536870912)switch((f+536813528|0)>>>2|f+536813528<<30|0){case 0:{n=c[714]|0;c[714]=b&65543;if((b&1|0)==0|(n&1|0)!=0)break f;c[716]=c[715];break f}case 1:{c[715]=b&16777215;break f}case 2:{c[716]=b&16777215;break f}case 3:break f;default:break f}else B(2,f+-24|0,b|0)|0;while(0);b=c[697]|0;g:do if((f+-28&-268435456|0)==-536870912)switch((f+536813524|0)>>>2|f+536813524<<30|0){case 0:{n=c[714]|0;c[714]=b&65543;if((b&1|0)==0|(n&1|0)!=0)break g;c[716]=c[715];break g}case 1:{c[715]=b&16777215;break g}case 2:{c[716]=b&16777215;break g}case 3:break g;default:break g}else B(2,f+-28|0,b|0)|0;while(0);b=c[696]|0;h:do if((f+-32&-268435456|0)==-536870912)switch((f+536813520|0)>>>2|f+536813520<<30|0){case 0:{n=c[714]|0;c[714]=b&65543;if((b&1|0)==0|(n&1|0)!=0)break h;c[716]=c[715];break h}case 1:{c[715]=b&16777215;break h}case 2:{c[716]=b&16777215;break h}case 3:break h;default:break h}else B(2,f+-32|0,b|0)|0;while(0);c[709]=f+-32;e=(A(1,60)|0)+2|0;c[710]=-7;c[717]=1}g=e+-2|0;n=A(3,g|0)|0;m=e+2|0;c[711]=m&-2;if(a[3440]|0){l=c[160]|0;c[o+8>>2]=g;c[o+8+4>>2]=n;va(l,1099,o+8|0)|0}if((n&65472|0)==16704){if(a[3440]|0){m=c[160]|0;c[o+16>>2]=n&7;c[o+16+4>>2]=n>>>3&7;va(m,1119,o+16|0)|0}d=c[2784+((n&7)<<2)>>2]|0;e=c[2784+((n>>>3&7)<<2)>>2]|0;m=c[718]|0;c[2784+((n&7)<<2)>>2]=e+d+(m>>>29&1);b=(e+d+(m>>>29&1)|0)<0?m|-2147483648:m&2147483647;b=(e+d+(m>>>29&1)|0)==0?b|1073741824:b&-1073741825;c[718]=b;if(!(b&536870912)){n=((e>>>31)+(d>>>31)+(((e&2147483647)+(d&2147483647)|0)>>>31)&2|0)==0?b&-536870913:b|536870912;c[718]=(((e&2147483647)+(d&2147483647)|0)>>>31|0)==(((e>>>31)+(d>>>31)+(((e&2147483647)+(d&2147483647)|0)>>>31)|0)>>>1&1|0)?n&-268435457:n|268435456;n=0;N=o;return n|0}else{m=(e>>>31)+(d>>>31)+(((e&2147483647)+(d&2147483647)+1|0)>>>31)|0;n=(m&2|0)==0?b&-536870913:b|536870912;c[718]=(((e&2147483647)+(d&2147483647)+1|0)>>>31|0)==(m>>>1&1|0)?n&-268435457:n|268435456;n=0;N=o;return n|0}}if((n&65024|0)==7168?n>>>6&7|0:0){if(a[3440]|0){m=c[160]|0;c[o+24>>2]=n&7;c[o+24+4>>2]=n>>>3&7;c[o+24+8>>2]=n>>>6&7;va(m,1132,o+24|0)|0}l=c[2784+((n>>>3&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=l+(n>>>6&7);m=c[718]|0;m=(l+(n>>>6&7)|0)<0?m|-2147483648:m&2147483647;m=(l+(n>>>6&7)|0)==0?m|1073741824:m&-1073741825;m=((((l&2147483647)+(n>>>6&7)|0)>>>31)+(l>>>31)&2|0)==0?m&-536870913:m|536870912;c[718]=(((l&2147483647)+(n>>>6&7)|0)>>>31|0)==(((((l&2147483647)+(n>>>6&7)|0)>>>31)+(l>>>31)|0)>>>1|0)?m&-268435457:m|268435456;n=0;N=o;return n|0}if((n&63488|0)==12288){if(a[3440]|0){m=c[160]|0;c[o+40>>2]=n>>>8&7;c[o+40+4>>2]=n&255;va(m,1152,o+40|0)|0}l=c[2784+((n>>>8&7)<<2)>>2]|0;c[2784+((n>>>8&7)<<2)>>2]=l+(n&255);m=c[718]|0;m=(l+(n&255)|0)<0?m|-2147483648:m&2147483647;m=(l+(n&255)|0)==0?m|1073741824:m&-1073741825;m=((((l&2147483647)+(n&255)|0)>>>31)+(l>>>31)&2|0)==0?m&-536870913:m|536870912;c[718]=(((l&2147483647)+(n&255)|0)>>>31|0)==(((((l&2147483647)+(n&255)|0)>>>31)+(l>>>31)|0)>>>1|0)?m&-268435457:m|268435456;n=0;N=o;return n|0}if((n&65024|0)==6144){if(a[3440]|0){m=c[160]|0;c[o+48>>2]=n&7;c[o+48+4>>2]=n>>>3&7;c[o+48+8>>2]=n>>>6&7;va(m,1170,o+48|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]|0;l=c[2784+((n>>>6&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=l+m;n=c[718]|0;n=(l+m|0)<0?n|-2147483648:n&2147483647;n=(l+m|0)==0?n|1073741824:n&-1073741825;n=((l>>>31)+(m>>>31)+(((l&2147483647)+(m&2147483647)|0)>>>31)&2|0)==0?n&-536870913:n|536870912;c[718]=(((l&2147483647)+(m&2147483647)|0)>>>31|0)==(((l>>>31)+(m>>>31)+(((l&2147483647)+(m&2147483647)|0)>>>31)|0)>>>1&1|0)?n&-268435457:n|268435456;n=0;N=o;return n|0}if((n&65280|0)==17408){if(a[3440]|0){l=c[160]|0;c[o+64>>2]=n>>>4&8|n&7;c[o+64+4>>2]=n>>>3&15;va(l,1188,o+64|0)|0}b=c[2784+((n>>>4&8|n&7)<<2)>>2]|0;if((n>>>4&8|n&7|0)==15){if(b&1|0){l=c[160]|0;c[o+72>>2]=b;va(l,1028,o+72|0)|0}b=b&-2}d=c[2784+((n>>>3&15)<<2)>>2]|0;if((n>>>3&15|0)==15){if(d&1|0){l=c[160]|0;c[o+80>>2]=d;va(l,1028,o+80|0)|0}d=d&-2}b=d+b|0;if((n>>>4&8|n&7|0)!=15){c[2784+((n>>>4&8|n&7)<<2)>>2]=b;n=0;N=o;return n|0}if(!(b&1)){n=c[160]|0;c[o+88>>2]=m;c[o+88+4>>2]=b;va(n,1201,o+88|0)|0;F(1)}c[711]=b+2&-2;n=0;N=o;return n|0}d=n&63488;switch(d<<16>>16){case -24576:{if(a[3440]|0){m=c[160]|0;c[o+96>>2]=n>>>8&7;c[o+96+4>>2]=n<<2&1020;va(m,1251,o+96|0)|0}b=c[711]|0;if(b&1|0){m=c[160]|0;c[o+104>>2]=b;va(m,1028,o+104|0)|0}c[2784+((n>>>8&7)<<2)>>2]=(b&-4)+(n<<2&1020);n=0;N=o;return n|0}case -22528:{if(a[3440]|0){m=c[160]|0;c[o+112>>2]=n>>>8&7;c[o+112+4>>2]=n<<2&1020;va(m,1271,o+112|0)|0}c[2784+((n>>>8&7)<<2)>>2]=(c[709]|0)+(n<<2&1020);n=0;N=o;return n|0}default:{if((n&65408|0)==45056){if(a[3440]|0){m=c[160]|0;c[o+120>>2]=n<<2&508;va(m,1291,o+120|0)|0}c[709]=(c[709]|0)+(n<<2&508);n=0;N=o;return n|0}if((n&65472|0)==16384){if(a[3440]|0){m=c[160]|0;c[o+128>>2]=n&7;c[o+128+4>>2]=n>>>3&7;va(m,1307,o+128|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]&c[2784+((n&7)<<2)>>2];c[2784+((n&7)<<2)>>2]=m;n=c[718]|0;n=(m|0)<0?n|-2147483648:n&2147483647;c[718]=(m|0)==0?n|1073741824:n&-1073741825;n=0;N=o;return n|0}if((n&63488|0)==4096){if(a[3440]|0){m=c[160]|0;c[o+136>>2]=n&7;c[o+136+4>>2]=n>>>3&7;c[o+136+8>>2]=n>>>6&31;va(m,1321,o+136|0)|0}d=c[2784+((n>>>3&7)<<2)>>2]|0;do if(!(n>>>6&31)){b=c[718]|0;if((d|0)<0){c[718]=b|536870912;c[2784+((n&7)<<2)>>2]=-1;b=b|536870912;h=141;break}else{c[718]=b&-536870913;c[2784+((n&7)<<2)>>2]=0;b=b&1610612735;h=143;break}}else{b=c[718]|0;b=(d&1<<(n>>>6&31)+-1|0)==0?b&-536870913:b|536870912;c[718]=b;d=((d|0)<0?-1<<32-(n>>>6&31):0)|d>>>(n>>>6&31);c[2784+((n&7)<<2)>>2]=d;if((d|0)>=0)if(!d){b=b&1073741823;h=143}else b=b&1073741823;else h=141}while(0);if((h|0)==141)b=b&1073741823|-2147483648;else if((h|0)==143)b=b|1073741824;c[718]=b;n=0;N=o;return n|0}if((n&65472|0)==16640){if(a[3440]|0){m=c[160]|0;c[o+152>>2]=n&7;c[o+152+4>>2]=n>>>3&7;va(m,1341,o+152|0)|0}d=c[2784+((n&7)<<2)>>2]|0;b=c[2784+((n>>>3&7)<<2)>>2]&255;do if(b){if(b>>>0<32){h=c[718]|0;h=(1<<b+-1&d|0)==0?h&-536870913:h|536870912;c[718]=h;b=((d|0)<0?-1<<32-b:0)|d>>>b;d=h;h=155;break}b=c[718]|0;if((d|0)<0){c[718]=b|536870912;c[2784+((n&7)<<2)>>2]=-1;b=b|-1610612736;h=156;break}else{c[718]=b&-536870913;c[2784+((n&7)<<2)>>2]=0;b=b&536870911;h=158;break}}else{b=d;d=c[718]|0;h=155}while(0);do if((h|0)==155){c[2784+((n&7)<<2)>>2]=b;if((b|0)<0){b=d|-2147483648;h=156;break}if(!b){b=d&2147483647;h=158}else b=d&1073741823}while(0);if((h|0)==156)b=b&-1073741825;else if((h|0)==158)b=b|1073741824;c[718]=b;n=0;N=o;return n|0}i:do if((n&61440|0)==53248){f=(((n&128|0)==0?n&255:n|-256)<<1)+m|0;do switch(n>>>8&15){case 0:{if(a[3440]|0){n=c[160]|0;c[o+160>>2]=f+-1;va(n,1355,o+160|0)|0}if(!(c[718]&1073741824)){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 1:{if(a[3440]|0){n=c[160]|0;c[o+168>>2]=f+-1;va(n,1367,o+168|0)|0}if(c[718]&1073741824|0){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 2:{if(a[3440]|0){n=c[160]|0;c[o+176>>2]=f+-1;va(n,1379,o+176|0)|0}if(!(c[718]&536870912)){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 3:{if(a[3440]|0){n=c[160]|0;c[o+184>>2]=f+-1;va(n,1391,o+184|0)|0}if(c[718]&536870912|0){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 4:{if(a[3440]|0){n=c[160]|0;c[o+192>>2]=f+-1;va(n,1403,o+192|0)|0}if((c[718]|0)>=0){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 5:{if(a[3440]|0){n=c[160]|0;c[o+200>>2]=f+-1;va(n,1415,o+200|0)|0}if((c[718]|0)<0){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 6:{if(a[3440]|0){n=c[160]|0;c[o+208>>2]=f+-1;va(n,1427,o+208|0)|0}if(!(c[718]&268435456)){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 7:{if(a[3440]|0){n=c[160]|0;c[o+216>>2]=f+-1;va(n,1439,o+216|0)|0}if(c[718]&268435456|0){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 8:{if(a[3440]|0){n=c[160]|0;c[o+224>>2]=f+-1;va(n,1451,o+224|0)|0}if((c[718]&1610612736|0)!=536870912){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 9:{if(a[3440]|0){n=c[160]|0;c[o+232>>2]=f+-1;va(n,1463,o+232|0)|0}if((c[718]&1610612736|0)==536870912){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 10:{if(a[3440]|0){n=c[160]|0;c[o+240>>2]=f+-1;va(n,1475,o+240|0)|0}b=c[718]&-1879048192;j:do if((b|0)<0){switch(b|0){case -1879048192:break j;default:b=0}N=o;return b|0}else{switch(b|0){case 0:break j;default:b=0}N=o;return b|0}while(0);c[711]=f+2&-2;n=0;N=o;return n|0}case 11:{if(a[3440]|0){n=c[160]|0;c[o+248>>2]=f+-1;va(n,1487,o+248|0)|0}b=c[718]&-1879048192;k:do if((b|0)<268435456){switch(b|0){case -2147483648:break k;default:b=0}N=o;return b|0}else{switch(b|0){case 268435456:break k;default:b=0}N=o;return b|0}while(0);c[711]=f+2&-2;n=0;N=o;return n|0}case 12:{if(a[3440]|0){n=c[160]|0;c[o+256>>2]=f+-1;va(n,1499,o+256|0)|0}n=c[718]|0;if(n&1073741824|0?1:(((n&-1879048192|0)==0?((n&-1879048192|0)==-1879048192?2:1):(n&-1879048192|0)==-1879048192&1)|0)==0){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}case 13:{if(a[3440]|0){n=c[160]|0;c[o+264>>2]=f+-1;va(n,1511,o+264|0)|0}n=c[718]|0;if((((n&-1879048192|0)==-2147483648?((n&-1879048192|0)==268435456?2:1):(n&-1879048192|0)==268435456&1)|0)==(0-(n>>>30&1)|0)){n=0;N=o;return n|0}c[711]=f+2&-2;n=0;N=o;return n|0}default:break i}while(0)}while(0);if((n&63488|0)==57344){b=(((n&1024|0)==0?n&2047:n|-2048)<<1)+m|0;if(a[3440]|0){n=c[160]|0;c[o+272>>2]=b+-1;va(n,1523,o+272|0)|0}c[711]=b+2&-2;n=0;N=o;return n|0}if((n&65472|0)==17280){if(a[3440]|0){m=c[160]|0;c[o+280>>2]=n&7;c[o+280+4>>2]=n>>>3&7;va(m,1533,o+280|0)|0}m=c[2784+((n&7)<<2)>>2]&~c[2784+((n>>>3&7)<<2)>>2];c[2784+((n&7)<<2)>>2]=m;n=c[718]|0;n=(m|0)<0?n|-2147483648:n&2147483647;c[718]=(m|0)==0?n|1073741824:n&-1073741825;n=0;N=o;return n|0}if((n&65280|0)==48640){m=c[160]|0;c[o+288>>2]=n&255;va(m,1547,o+288|0)|0;n=1;N=o;return n|0}l:do if((n&57344|0)==57344){if((n&6144)<4096){switch(n&6144){case 2048:break;default:break l}b=(c[710]|0)+(n<<1&4094)&-4|2;if(a[3440]|0){n=c[160]|0;c[o+304>>2]=b+-3;va(n,1560,o+304|0)|0}c[710]=e|1;c[711]=b;n=0;N=o;return n|0}switch(n&6144){case 4096:{if(a[3440]|0)Na(10,c[160]|0)|0;c[710]=(((n&1024|0)==0?n&2047:n|1046528)<<12)+m;n=0;N=o;return n|0}case 6144:{b=(c[710]|0)+(n<<1&4094)|0;if(a[3440]|0){n=c[160]|0;c[o+296>>2]=b+-1;va(n,1560,o+296|0)|0}c[710]=e|1;c[711]=b+2&-2;n=0;N=o;return n|0}default:break l}}while(0);switch((n&65415)<<16>>16){case 18304:{if(a[3440]|0){l=c[160]|0;c[o+312>>2]=n>>>3&15;va(l,1571,o+312|0)|0}b=c[2784+((n>>>3&15)<<2)>>2]|0;if((n>>>3&15|0)==15){if(b&1|0){l=c[160]|0;c[o+320>>2]=b;va(l,1028,o+320|0)|0}b=b&-2}b=b+2|0;if(!(b&1)){l=c[160]|0;c[o+328>>2]=m;c[o+328+4>>2]=n;va(l,1580,o+328|0)|0;n=2;N=o;return n|0}else{c[710]=e|1;c[711]=b&-2;n=0;N=o;return n|0}}case 18176:{if(a[3440]|0){m=c[160]|0;c[o+336>>2]=n>>>3&15;va(m,1616,o+336|0)|0}b=c[2784+((n>>>3&15)<<2)>>2]|0;if((n>>>3&15|0)==15){if(b&1|0){n=c[160]|0;c[o+344>>2]=b;va(n,1028,o+344|0)|0}b=b&-2}b=b+2|0;if(b&1|0){c[711]=b&-2;n=0;N=o;return n|0}b=B(4,g|0,b|0)|0;if(b|0){n=b;N=o;return n|0}c[711]=(c[710]|0)+2&-2;n=0;N=o;return n|0}default:{if((n&65472|0)==17088){if(a[3440]|0){m=c[160]|0;c[o+352>>2]=n&7;c[o+352+4>>2]=n>>>3&7;va(m,1662,o+352|0)|0}m=c[2784+((n&7)<<2)>>2]|0;l=c[2784+((n>>>3&7)<<2)>>2]|0;n=c[718]|0;n=(l+m|0)<0?n|-2147483648:n&2147483647;n=(l+m|0)==0?n|1073741824:n&-1073741825;n=((l>>>31)+(m>>>31)+(((l&2147483647)+(m&2147483647)|0)>>>31)&2|0)==0?n&-536870913:n|536870912;c[718]=(((l&2147483647)+(m&2147483647)|0)>>>31|0)==(((l>>>31)+(m>>>31)+(((l&2147483647)+(m&2147483647)|0)>>>31)|0)>>>1&1|0)?n&-268435457:n|268435456;n=0;N=o;return n|0}if((n&63488|0)==10240){if(a[3440]|0){m=c[160]|0;c[o+360>>2]=n>>>8&7;c[o+360+4>>2]=n&255;va(m,1676,o+360|0)|0}k=c[2784+((n>>>8&7)<<2)>>2]|0;m=c[718]|0;m=(k-(n&255)|0)<0?m|-2147483648:m&2147483647;m=(k-(n&255)|0)==0?m|1073741824:m&-1073741825;l=(k>>>31)+1+((-2147483648-(n&255)+(k&2147483647)|0)>>>31)|0;m=(l&2|0)==0?m&-536870913:m|536870912;c[718]=((-2147483648-(n&255)+(k&2147483647)|0)>>>31|0)==(l>>>1&1|0)?m&-268435457:m|268435456;n=0;N=o;return n|0}if((n&65472|0)==17024){if(a[3440]|0){m=c[160]|0;c[o+368>>2]=n&7;c[o+368+4>>2]=n>>>3&7;va(m,1693,o+368|0)|0}k=c[2784+((n&7)<<2)>>2]|0;l=c[2784+((n>>>3&7)<<2)>>2]|0;n=c[718]|0;n=(k-l|0)<0?n|-2147483648:n&2147483647;n=(k-l|0)==0?n|1073741824:n&-1073741825;m=(~l>>>31)+(k>>>31)+(((k&2147483647)+1+(~l&2147483647)|0)>>>31)|0;n=(m&2|0)==0?n&-536870913:n|536870912;c[718]=(((k&2147483647)+1+(~l&2147483647)|0)>>>31|0)==(m>>>1&1|0)?n&-268435457:n|268435456;n=0;N=o;return n|0}if((n&65280|0)==17664){if(a[3440]|0){m=c[160]|0;c[o+376>>2]=n>>>4&8|n&7;c[o+376+4>>2]=n>>>3&15;va(m,1693,o+376|0)|0}b=c[2784+((n>>>4&8|n&7)<<2)>>2]|0;if((n>>>4&8|n&7|0)==15){if(b&1|0){m=c[160]|0;c[o+384>>2]=b;va(m,1028,o+384|0)|0}d=b&-2}else d=b;b=c[2784+((n>>>3&15)<<2)>>2]|0;if((n>>>3&15|0)==15){if(b&1|0){n=c[160]|0;c[o+392>>2]=b;va(n,1028,o+392|0)|0}b=b&-2}m=d-b|0;n=c[718]|0;n=(m|0)<0?n|-2147483648:n&2147483647;n=(m|0)==0?n|1073741824:n&-1073741825;m=~b;l=((d&2147483647)+1+(m&2147483647)|0)>>>31;m=(m>>>31)+(d>>>31)+l|0;n=(m&2|0)==0?n&-536870913:n|536870912;c[718]=(l|0)==(m>>>1&1|0)?n&-268435457:n|268435456;n=0;N=o;return n|0}if((n&65512|0)==46688&(a[3440]|0)!=0)oa(1707,9,1,c[160]|0)|0;b=n&65472;switch(b<<16>>16){case 17920:{if(a[3440]|0){m=c[160]|0;c[o+400>>2]=n&7;c[o+400+4>>2]=n>>>3&7;va(m,1717,o+400|0)|0}c[2784+((n&7)<<2)>>2]=c[2784+((n>>>3&7)<<2)>>2];n=0;N=o;return n|0}case 16448:{if(a[3440]|0){m=c[160]|0;c[o+408>>2]=n&7;c[o+408+4>>2]=n>>>3&7;va(m,1730,o+408|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]^c[2784+((n&7)<<2)>>2];c[2784+((n&7)<<2)>>2]=m;n=c[718]|0;n=(m|0)<0?n|-2147483648:n&2147483647;c[718]=(m|0)==0?n|1073741824:n&-1073741825;n=0;N=o;return n|0}default:{m:do if(d<<16>>16<26624){switch(d<<16>>16){case -14336:break;default:break m}if(!(a[3440]|0))d=n&1;else{d=c[160]|0;c[o+416>>2]=n>>>8&7;va(d,1744,o+416|0)|0;if(!(n&1))b=0;else{c[o+424>>2]=0;va(d,1757,o+424|0)|0;b=1}if(n&2){if(b|0)Na(44,d)|0;c[o+1168>>2]=1;va(d,1757,o+1168|0)|0;b=b+1|0}if(n&4){if(b|0)Na(44,d)|0;c[o+1176>>2]=2;va(d,1757,o+1176|0)|0;b=b+1|0}if(n&8){if(b|0)Na(44,d)|0;c[o+1184>>2]=3;va(d,1757,o+1184|0)|0;b=b+1|0}if(n&16){if(b|0)Na(44,d)|0;c[o+1192>>2]=4;va(d,1757,o+1192|0)|0;b=b+1|0}if(n&32){if(b|0)Na(44,d)|0;c[o+1200>>2]=5;va(d,1757,o+1200|0)|0;b=b+1|0}if(n&64){if(b|0)Na(44,d)|0;c[o+1208>>2]=6;va(d,1757,o+1208|0)|0;b=b+1|0}if(n&128|0){if(b|0)Na(44,d)|0;c[o+1216>>2]=7;va(d,1757,o+1216|0)|0}oa(1761,2,1,d)|0;d=n&1}b=c[2784+((n>>>8&7)<<2)>>2]|0;if(d){c[696]=A(1,b|0)|0;b=b+4|0}if(n&2){c[697]=A(1,b|0)|0;b=b+4|0}if(n&4){c[698]=A(1,b|0)|0;b=b+4|0}if(n&8){c[699]=A(1,b|0)|0;b=b+4|0}if(n&16){c[700]=A(1,b|0)|0;b=b+4|0}if(n&32){c[701]=A(1,b|0)|0;b=b+4|0}if(n&64){c[702]=A(1,b|0)|0;b=b+4|0}if(n&128){c[703]=A(1,b|0)|0;b=b+4|0}if(1<<(n>>>8&7)&n|0){n=0;N=o;return n|0}c[2784+((n>>>8&7)<<2)>>2]=b;n=0;N=o;return n|0}else{switch(d<<16>>16){case 26624:break;default:break m}if(a[3440]|0){m=c[160]|0;c[o+432>>2]=n&7;c[o+432+4>>2]=n>>>3&7;c[o+432+8>>2]=n>>>4&124;va(m,1764,o+432|0)|0}c[2784+((n&7)<<2)>>2]=A(1,(c[2784+((n>>>3&7)<<2)>>2]|0)+(n>>>4&124)|0)|0;n=0;N=o;return n|0}while(0);if((n&65024|0)==22528){if(a[3440]|0){m=c[160]|0;c[o+448>>2]=n&7;c[o+448+4>>2]=n>>>3&7;c[o+448+8>>2]=n>>>6&7;va(m,1785,o+448|0)|0}c[2784+((n&7)<<2)>>2]=A(1,(c[2784+((n>>>6&7)<<2)>>2]|0)+(c[2784+((n>>>3&7)<<2)>>2]|0)|0)|0;n=0;N=o;return n|0}n:do if(d<<16>>16<18432){switch(d<<16>>16){case -26624:break;default:break n}if(a[3440]|0){m=c[160]|0;c[o+480>>2]=n>>>8&7;c[o+480+4>>2]=n<<2&1020;va(m,1824,o+480|0)|0}c[2784+((n>>>8&7)<<2)>>2]=A(1,(c[709]|0)+(n<<2&1020)|0)|0;n=0;N=o;return n|0}else{if(d<<16>>16>=30720){switch(d<<16>>16){case 30720:break;default:break n}if(a[3440]|0){m=c[160]|0;c[o+488>>2]=n&7;c[o+488+4>>2]=n>>>3&7;c[o+488+8>>2]=n>>>6&31;va(m,1844,o+488|0)|0}l=(c[2784+((n>>>3&7)<<2)>>2]|0)+(n>>>6&31)|0;m=A(3,l&-2|0)|0;c[2784+((n&7)<<2)>>2]=((l&1|0)==0?m:m>>>8)&255;n=0;N=o;return n|0}switch(d<<16>>16){case 18432:break;default:break n}if(a[3440]|0){m=c[160]|0;c[o+464>>2]=n>>>8&7;c[o+464+4>>2]=n<<2&1020;va(m,1804,o+464|0)|0}b=c[711]|0;if(b&1|0){m=c[160]|0;c[o+472>>2]=b;va(m,1028,o+472|0)|0}c[2784+((n>>>8&7)<<2)>>2]=A(1,(b&-4)+(n<<2&1020)|0)|0;n=0;N=o;return n|0}while(0);if((n&65024|0)==23552){if(a[3440]|0){m=c[160]|0;c[o+504>>2]=n&7;c[o+504+4>>2]=n>>>3&7;c[o+504+8>>2]=n>>>6&7;va(m,1866,o+504|0)|0}l=(c[2784+((n>>>6&7)<<2)>>2]|0)+(c[2784+((n>>>3&7)<<2)>>2]|0)|0;m=A(3,l&-2|0)|0;c[2784+((n&7)<<2)>>2]=((l&1|0)==0?m:m>>>8)&255;n=0;N=o;return n|0}if((n&63488|0)==34816){if(a[3440]|0){m=c[160]|0;c[o+520>>2]=n&7;c[o+520+4>>2]=n>>>3&7;c[o+520+8>>2]=n>>>5&62;va(m,1886,o+520|0)|0}c[2784+((n&7)<<2)>>2]=(A(3,(c[2784+((n>>>3&7)<<2)>>2]|0)+(n>>>5&62)|0)|0)&65535;n=0;N=o;return n|0}switch((n&65024)<<16>>16){case 23040:{if(a[3440]|0){m=c[160]|0;c[o+536>>2]=n&7;c[o+536+4>>2]=n>>>3&7;c[o+536+8>>2]=n>>>6&7;va(m,1908,o+536|0)|0}c[2784+((n&7)<<2)>>2]=(A(3,(c[2784+((n>>>6&7)<<2)>>2]|0)+(c[2784+((n>>>3&7)<<2)>>2]|0)|0)|0)&65535;n=0;N=o;return n|0}case 22016:{if(a[3440]|0){m=c[160]|0;c[o+552>>2]=n&7;c[o+552+4>>2]=n>>>3&7;c[o+552+8>>2]=n>>>6&7;va(m,1928,o+552|0)|0}l=(c[2784+((n>>>6&7)<<2)>>2]|0)+(c[2784+((n>>>3&7)<<2)>>2]|0)|0;m=A(3,l&-2|0)|0;m=(l&1|0)==0?m:m>>>8;c[2784+((n&7)<<2)>>2]=(m&128|0)==0?m&255:m|-256;n=0;N=o;return n|0}case 24064:{if(a[3440]|0){m=c[160]|0;c[o+568>>2]=n&7;c[o+568+4>>2]=n>>>3&7;c[o+568+8>>2]=n>>>6&7;va(m,1949,o+568|0)|0}m=A(3,(c[2784+((n>>>6&7)<<2)>>2]|0)+(c[2784+((n>>>3&7)<<2)>>2]|0)|0)|0;c[2784+((n&7)<<2)>>2]=(m&32768|0)==0?m&65535:m|-65536;n=0;N=o;return n|0}default:{if(!(n&63488)){if(a[3440]|0){m=c[160]|0;c[o+584>>2]=n&7;c[o+584+4>>2]=n>>>3&7;c[o+584+8>>2]=n>>>6&31;va(m,1970,o+584|0)|0}b=c[2784+((n>>>3&7)<<2)>>2]|0;if(!(n>>>6&31))d=c[718]|0;else{d=c[718]|0;d=(b&1<<32-(n>>>6&31)|0)==0?d&-536870913:d|536870912;c[718]=d;b=b<<(n>>>6&31)}c[2784+((n&7)<<2)>>2]=b;n=(b|0)<0?d|-2147483648:d&2147483647;c[718]=(b|0)==0?n|1073741824:n&-1073741825;n=0;N=o;return n|0}if((n&65472|0)==16512){if(a[3440]|0){m=c[160]|0;c[o+600>>2]=n&7;c[o+600+4>>2]=n>>>3&7;va(m,1990,o+600|0)|0}b=c[2784+((n&7)<<2)>>2]|0;d=c[2784+((n>>>3&7)<<2)>>2]&255;do if(!d){d=c[718]|0;h=357}else{if(d>>>0<32){h=c[718]|0;h=(1<<32-d&b|0)==0?h&-536870913:h|536870912;c[718]=h;b=b<<d;d=h;h=357;break}if((d|0)==32){m=c[718]|0;b=(b&1|0)==0?m&-536870913:m|536870912}else b=c[718]&-536870913;c[718]=b;c[2784+((n&7)<<2)>>2]=0;b=b&1073741823;h=360}while(0);do if((h|0)==357){c[2784+((n&7)<<2)>>2]=b;if((b|0)>=0)if(!b){b=d&2147483647;h=360;break}else{b=d&1073741823;break}else{b=d&1073741823|-2147483648;break}}while(0);if((h|0)==360)b=b|1073741824;c[718]=b;n=0;N=o;return n|0}if((n&63488|0)==2048){if(a[3440]|0){m=c[160]|0;c[o+608>>2]=n&7;c[o+608+4>>2]=n>>>3&7;c[o+608+8>>2]=n>>>6&31;va(m,2004,o+608|0)|0}b=c[2784+((n>>>3&7)<<2)>>2]|0;do if(n>>>6&31){d=c[718]|0;d=(b&1<<(n>>>6&31)+-1|0)==0?d&-536870913:d|536870912;c[718]=d;c[2784+((n&7)<<2)>>2]=b>>>(n>>>6&31);if((b>>>(n>>>6&31)|0)>=0)if(!(b>>>(n>>>6&31))){b=d&1073741823;h=370;break}else{b=d&1073741823;break}else{b=d&1073741823|-2147483648;break}}else{h=c[718]|0;b=(b|0)>-1?h&-536870913:h|536870912;c[718]=b;c[2784+((n&7)<<2)>>2]=0;b=b&2147483647;h=370}while(0);if((h|0)==370)b=b|1073741824;c[718]=b;n=0;N=o;return n|0}if((n&65472|0)==16576){if(a[3440]|0){m=c[160]|0;c[o+624>>2]=n&7;c[o+624+4>>2]=n>>>3&7;va(m,2024,o+624|0)|0}b=c[2784+((n&7)<<2)>>2]|0;d=c[2784+((n>>>3&7)<<2)>>2]&255;do if(!d){d=c[718]|0;h=383}else{if(d>>>0<32){h=c[718]|0;h=(1<<d+-1&b|0)==0?h&-536870913:h|536870912;c[718]=h;b=b>>>d;d=h;h=383;break}if((d|0)==32){m=c[718]|0;b=(b|0)>-1?m&-536870913:m|536870912}else b=c[718]&-536870913;c[718]=b;c[2784+((n&7)<<2)>>2]=0;b=b&1073741823;h=386}while(0);do if((h|0)==383){c[2784+((n&7)<<2)>>2]=b;if((b|0)>=0)if(!b){b=d&2147483647;h=386;break}else{b=d&1073741823;break}else{b=d&1073741823|-2147483648;break}}while(0);if((h|0)==386)b=b|1073741824;c[718]=b;n=0;N=o;return n|0}if((n&63488|0)==8192){if(a[3440]|0){m=c[160]|0;c[o+632>>2]=n>>>8&7;c[o+632+4>>2]=n&255;va(m,2038,o+632|0)|0}c[2784+((n>>>8&7)<<2)>>2]=n&255;m=c[718]&1073741823;c[718]=(n&255|0)==0?m|1073741824:m;n=0;N=o;return n|0}if((n&65472|0)==7168){if(a[3440]|0){m=c[160]|0;c[o+640>>2]=n&7;c[o+640+4>>2]=n>>>3&7;va(m,2056,o+640|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=m;n=c[718]|0;n=(m|0)<0?n|-2147483648:n&2147483647;c[718]=((m|0)==0?n|1073741824:n&-1879048193)&-805306369;n=0;N=o;return n|0}if((n&65280|0)==17920){if(a[3440]|0){m=c[160]|0;c[o+648>>2]=n>>>4&8|n&7;c[o+648+4>>2]=n>>>3&15;va(m,2070,o+648|0)|0}b=c[2784+((n>>>3&15)<<2)>>2]|0;if((n>>>3&15|0)==15){if(b&1|0){m=c[160]|0;c[o+656>>2]=b;va(m,1028,o+656|0)|0}b=b&-2}if((n>>>4&8|n&7|0)==15){c[711]=b+2&-2;n=0;N=o;return n|0}else{c[2784+((n>>>4&8|n&7)<<2)>>2]=b;n=0;N=o;return n|0}}switch(((n&65472)+-16960|0)>>>6&67108863|0){case 4:{if(a[3440]|0){m=c[160]|0;c[o+664>>2]=n&7;c[o+664+4>>2]=n>>>3&7;va(m,2083,o+664|0)|0}m=r(c[2784+((n>>>3&7)<<2)>>2]|0,c[2784+((n&7)<<2)>>2]|0)|0;c[2784+((n&7)<<2)>>2]=m;n=c[718]|0;n=(m|0)<0?n|-2147483648:n&2147483647;c[718]=(m|0)==0?n|1073741824:n&-1073741825;n=0;N=o;return n|0}case 6:{if(a[3440]|0){m=c[160]|0;c[o+672>>2]=n&7;c[o+672+4>>2]=n>>>3&7;va(m,2097,o+672|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=~m;n=c[718]|0;n=(m|0)>-1?n|-2147483648:n&2147483647;c[718]=(m|0)==-1?n|1073741824:n&-1073741825;n=0;N=o;return n|0}case 0:{if(a[3440]|0){m=c[160]|0;c[o+680>>2]=n&7;c[o+680+4>>2]=n>>>3&7;va(m,2111,o+680|0)|0}l=c[2784+((n>>>3&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=0-l;n=c[718]|0;n=(0-l|0)<0?n|-2147483648:n&2147483647;n=(l|0)==0?n|1073741824:n&-1073741825;m=(((~l&2147483647)+1|0)>>>31)+(~l>>>31)|0;n=(m&2|0)==0?n&-536870913:n|536870912;c[718]=(((~l&2147483647)+1|0)>>>31|0)==(m>>>1|0)?n&-268435457:n|268435456;n=0;N=o;return n|0}case 3:{if(a[3440]|0){m=c[160]|0;c[o+688>>2]=n&7;c[o+688+4>>2]=n>>>3&7;va(m,2125,o+688|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]|c[2784+((n&7)<<2)>>2];c[2784+((n&7)<<2)>>2]=m;n=c[718]|0;n=(m|0)<0?n|-2147483648:n&2147483647;c[718]=(m|0)==0?n|1073741824:n&-1073741825;n=0;N=o;return n|0}default:switch((n&65024)<<16>>16){case -17408:{if(!(a[3440]|0))d=n&1;else{d=c[160]|0;oa(2139,5,1,d)|0;if(!(n&1))b=0;else{c[o+696>>2]=0;va(d,1757,o+696|0)|0;b=1}if(n&2){if(b|0)Na(44,d)|0;c[o+1056>>2]=1;va(d,1757,o+1056|0)|0;b=b+1|0}if(n&4){if(b|0)Na(44,d)|0;c[o+1064>>2]=2;va(d,1757,o+1064|0)|0;b=b+1|0}if(n&8){if(b|0)Na(44,d)|0;c[o+1072>>2]=3;va(d,1757,o+1072|0)|0;b=b+1|0}if(n&16){if(b|0)Na(44,d)|0;c[o+1080>>2]=4;va(d,1757,o+1080|0)|0;b=b+1|0}if(n&32){if(b|0)Na(44,d)|0;c[o+1088>>2]=5;va(d,1757,o+1088|0)|0;b=b+1|0}if(n&64){if(b|0)Na(44,d)|0;c[o+1096>>2]=6;va(d,1757,o+1096|0)|0;b=b+1|0}if(n&128){if(b|0)Na(44,d)|0;c[o+1104>>2]=7;va(d,1757,o+1104|0)|0;b=b+1|0}if(n&256|0){if(b|0)Na(44,d)|0;oa(2145,2,1,d)|0}oa(1761,2,1,d)|0;d=n&1}b=c[709]|0;if(d){c[696]=A(1,b|0)|0;b=b+4|0}if(n&2){c[697]=A(1,b|0)|0;b=b+4|0}if(n&4){c[698]=A(1,b|0)|0;b=b+4|0}if(n&8){c[699]=A(1,b|0)|0;b=b+4|0}if(n&16){c[700]=A(1,b|0)|0;b=b+4|0}if(n&32){c[701]=A(1,b|0)|0;b=b+4|0}if(n&64){c[702]=A(1,b|0)|0;b=b+4|0}if(n&128){c[703]=A(1,b|0)|0;b=b+4|0}if(n&256){d=A(1,b|0)|0;if(!(d&1)){n=c[160]|0;c[o+704>>2]=m;c[o+704+4>>2]=d;va(n,2148,o+704|0)|0;d=d&-2}c[711]=d+2&-2;b=b+4|0}c[709]=b;n=0;N=o;return n|0}case -19456:{l=c[160]|0;if(!(a[3440]|0)){b=n&2;d=n&4;e=n&8;f=n&16;g=n&32;h=n&64;i=n&128;k=n&256;j=n&1}else{oa(2202,6,1,l)|0;if(!(n&1))b=0;else{c[o+712>>2]=0;va(l,1757,o+712|0)|0;b=1}if(n&2){if(b|0)Na(44,l)|0;c[o+1112>>2]=1;va(l,1757,o+1112|0)|0;b=b+1|0}if(n&4){if(b|0)Na(44,l)|0;c[o+1120>>2]=2;va(l,1757,o+1120|0)|0;b=b+1|0}if(n&8){if(b|0)Na(44,l)|0;c[o+1128>>2]=3;va(l,1757,o+1128|0)|0;b=b+1|0}if(n&16){if(b|0)Na(44,l)|0;c[o+1136>>2]=4;va(l,1757,o+1136|0)|0;b=b+1|0}if(n&32){if(b|0)Na(44,l)|0;c[o+1144>>2]=5;va(l,1757,o+1144|0)|0;b=b+1|0}if(n&64){if(b|0)Na(44,l)|0;c[o+1152>>2]=6;va(l,1757,o+1152|0)|0;b=b+1|0}if(n&128){if(b|0)Na(44,l)|0;c[o+1160>>2]=7;va(l,1757,o+1160|0)|0;b=b+1|0}if(n&256|0){if(b|0)Na(44,l)|0;oa(2209,2,1,l)|0}oa(1761,2,1,l)|0;b=n&2;d=n&4;e=n&8;f=n&16;g=n&32;h=n&64;i=n&128;k=n&256;j=n&1}g=(c[709]|0)-(j+(b>>>1)+(d>>>2)+(e>>>3)+(f>>>4)+(g>>>5)+(h>>>6)+(i>>>7)+(k>>>8)<<2)|0;b=g;e=0;f=1;while(1){if(!(f&n))d=b;else{d=c[2784+(e<<2)>>2]|0;o:do if((b&-268435456|0)==-536870912){j=b+536813552|0;switch(j>>>2|j<<30|0){case 0:{j=c[714]|0;c[714]=d&65543;if((d&1|0)==0|(j&1|0)!=0)break o;c[716]=c[715];break o}case 1:{c[715]=d&16777215;break o}case 2:{c[716]=d&16777215;break o}case 3:break o;default:break o}}else B(2,b|0,d|0)|0;while(0);d=b+4|0}e=e+1|0;if((e|0)==8)break;else{b=d;f=f<<1&254}}do if(k|0){b=c[710]|0;p:do if((d&-268435456|0)==-536870912){n=d+536813552|0;switch(n>>>2|n<<30|0){case 0:{n=c[714]|0;c[714]=b&65543;if((b&1|0)==0|(n&1|0)!=0)break p;c[716]=c[715];break p}case 1:{c[715]=b&16777215;break p}case 2:{c[716]=b&16777215;break p}case 3:break p;default:break p}}else B(2,d|0,b|0)|0;while(0);if(b&1|0)break;c[o+720>>2]=m;c[o+720+4>>2]=b;va(l,2212,o+720|0)|0}while(0);c[709]=g;n=0;N=o;return n|0}default:{q:do if(b<<16>>16<-17728)switch(b<<16>>16){case -17920:{if(a[3440]|0){m=c[160]|0;c[o+728>>2]=n&7;c[o+728+4>>2]=n>>>3&7;va(m,2267,o+728|0)|0}c[2784+((n&7)<<2)>>2]=Za(c[2784+((n>>>3&7)<<2)>>2]|0)|0;n=0;N=o;return n|0}case -17856:{if(a[3440]|0){m=c[160]|0;c[o+736>>2]=n&7;c[o+736+4>>2]=n>>>3&7;va(m,2280,o+736|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=m<<8&65280|m>>>8&255|m>>>16<<24|m>>>24<<16;n=0;N=o;return n|0}default:break q}else{if(b<<16>>16<16768){switch(b<<16>>16){case -17728:break;default:break q}if(a[3440]|0){m=c[160]|0;c[o+744>>2]=n&7;c[o+744+4>>2]=n>>>3&7;va(m,2295,o+744|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=(m&128|0)==0?m<<8&65280|m>>>8&255:m<<8&65280|m>>>8&255|-65536;n=0;N=o;return n|0}switch(b<<16>>16){case 16832:break;case 16768:{if(a[3440]|0){m=c[160]|0;c[o+760>>2]=n&7;c[o+760+4>>2]=n>>>3&7;va(m,2324,o+760|0)|0}d=c[2784+((n&7)<<2)>>2]|0;e=c[2784+((n>>>3&7)<<2)>>2]|0;m=c[718]|0;c[2784+((n&7)<<2)>>2]=d-e+-1+(m>>>29&1);b=(d-e+-1+(m>>>29&1)|0)<0?m|-2147483648:m&2147483647;b=(d-e+-1+(m>>>29&1)|0)==0?b|1073741824:b&-1073741825;c[718]=b;if(!(b&536870912)){m=(~e>>>31)+(d>>>31)+(((~e&2147483647)+(d&2147483647)|0)>>>31)|0;n=(m&2|0)==0?b&-536870913:b|536870912;c[718]=(((~e&2147483647)+(d&2147483647)|0)>>>31|0)==(m>>>1&1|0)?n&-268435457:n|268435456;n=0;N=o;return n|0}else{m=(~e>>>31)+(d>>>31)+(((~e&2147483647)+(d&2147483647)+1|0)>>>31)|0;n=(m&2|0)==0?b&-536870913:b|536870912;c[718]=(((~e&2147483647)+(d&2147483647)+1|0)>>>31|0)==(m>>>1&1|0)?n&-268435457:n|268435456;n=0;N=o;return n|0}}default:break q}if(a[3440]|0){m=c[160]|0;c[o+752>>2]=n&7;c[o+752+4>>2]=n>>>3&7;va(m,2310,o+752|0)|0}b=c[2784+((n&7)<<2)>>2]|0;d=c[2784+((n>>>3&7)<<2)>>2]|0;do if(d&255)if(!(d&31)){d=c[718]|0;d=(b|0)>-1?d&-536870913:d|536870912;c[718]=d;break}else{m=c[718]|0;m=(1<<(d&31)+-1&b|0)==0?m&-536870913:m|536870912;c[718]=m;b=b<<32-(d&31)|b>>>(d&31);d=m;break}else d=c[718]|0;while(0);c[2784+((n&7)<<2)>>2]=b;n=(b|0)<0?d|-2147483648:d&2147483647;c[718]=(b|0)==0?n|1073741824:n&-1073741825;n=0;N=o;return n|0}while(0);if((n&65527|0)==46672){oa(2337,23,1,c[160]|0)|0;n=1;N=o;return n|0}r:do if(d<<16>>16<24576){switch(d<<16>>16){case -16384:break;default:break r}if(a[3440]|0){d=c[160]|0;c[o+768>>2]=n>>>8&7;va(d,2361,o+768|0)|0;if(!(n&1))b=0;else{c[o+776>>2]=0;va(d,1757,o+776|0)|0;b=1}if(n&2){if(b|0)Na(44,d)|0;c[o+1e3>>2]=1;va(d,1757,o+1e3|0)|0;b=b+1|0}if(n&4){if(b|0)Na(44,d)|0;c[o+1008>>2]=2;va(d,1757,o+1008|0)|0;b=b+1|0}if(n&8){if(b|0)Na(44,d)|0;c[o+1016>>2]=3;va(d,1757,o+1016|0)|0;b=b+1|0}if(n&16){if(b|0)Na(44,d)|0;c[o+1024>>2]=4;va(d,1757,o+1024|0)|0;b=b+1|0}if(n&32){if(b|0)Na(44,d)|0;c[o+1032>>2]=5;va(d,1757,o+1032|0)|0;b=b+1|0}if(n&64){if(b|0)Na(44,d)|0;c[o+1040>>2]=6;va(d,1757,o+1040|0)|0;b=b+1|0}if(n&128|0){if(b|0)Na(44,d)|0;c[o+1048>>2]=7;va(d,1757,o+1048|0)|0}oa(1761,2,1,d)|0}e=1;f=0;b=c[2784+((n>>>8&7)<<2)>>2]|0;while(1){if(e&n){d=c[2784+(f<<2)>>2]|0;s:do if((b&-268435456|0)==-536870912){m=b+536813552|0;switch(m>>>2|m<<30|0){case 0:{m=c[714]|0;c[714]=d&65543;if((d&1|0)==0|(m&1|0)!=0)break s;c[716]=c[715];break s}case 1:{c[715]=d&16777215;break s}case 2:{c[716]=d&16777215;break s}case 3:break s;default:break s}}else B(2,b|0,d|0)|0;while(0);b=b+4|0}f=f+1|0;if((f|0)==8)break;else e=e<<1&254}c[2784+((n>>>8&7)<<2)>>2]=b;n=0;N=o;return n|0}else{switch(d<<16>>16){case 24576:break;default:break r}if(a[3440]|0){m=c[160]|0;c[o+784>>2]=n&7;c[o+784+4>>2]=n>>>3&7;c[o+784+8>>2]=n>>>4&124;va(m,2374,o+784|0)|0}d=(c[2784+((n>>>3&7)<<2)>>2]|0)+(n>>>4&124)|0;b=c[2784+((n&7)<<2)>>2]|0;if((d&-268435456|0)!=-536870912){B(2,d|0,b|0)|0;n=0;N=o;return n|0}switch((d+536813552|0)>>>2|d+536813552<<30|0){case 0:{n=c[714]|0;c[714]=b&65543;if((b&1|0)==0|(n&1|0)!=0){n=0;N=o;return n|0}c[716]=c[715];n=0;N=o;return n|0}case 1:{c[715]=b&16777215;n=0;N=o;return n|0}case 2:{c[716]=b&16777215;n=0;N=o;return n|0}case 3:{n=0;N=o;return n|0}default:{n=0;N=o;return n|0}}}while(0);if((n&65024|0)==20480){if(a[3440]|0){m=c[160]|0;c[o+800>>2]=n&7;c[o+800+4>>2]=n>>>3&7;c[o+800+8>>2]=n>>>6&7;va(m,2395,o+800|0)|0}d=(c[2784+((n>>>6&7)<<2)>>2]|0)+(c[2784+((n>>>3&7)<<2)>>2]|0)|0;b=c[2784+((n&7)<<2)>>2]|0;if((d&-268435456|0)!=-536870912){B(2,d|0,b|0)|0;n=0;N=o;return n|0}switch((d+536813552|0)>>>2|d+536813552<<30|0){case 0:{n=c[714]|0;c[714]=b&65543;if((b&1|0)==0|(n&1|0)!=0){n=0;N=o;return n|0}c[716]=c[715];n=0;N=o;return n|0}case 1:{c[715]=b&16777215;n=0;N=o;return n|0}case 2:{c[716]=b&16777215;n=0;N=o;return n|0}case 3:{n=0;N=o;return n|0}default:{n=0;N=o;return n|0}}}t:do if(d<<16>>16<28672){switch(d<<16>>16){case -28672:break;default:break t}if(a[3440]|0){m=c[160]|0;c[o+816>>2]=n>>>8&7;c[o+816+4>>2]=n<<2&1020;va(m,2414,o+816|0)|0}d=(c[709]|0)+(n<<2&1020)|0;b=c[2784+((n>>>8&7)<<2)>>2]|0;if((d&-268435456|0)!=-536870912){B(2,d|0,b|0)|0;n=0;N=o;return n|0}switch((d+536813552|0)>>>2|d+536813552<<30|0){case 0:{n=c[714]|0;c[714]=b&65543;if((b&1|0)==0|(n&1|0)!=0){n=0;N=o;return n|0}c[716]=c[715];n=0;N=o;return n|0}case 1:{c[715]=b&16777215;n=0;N=o;return n|0}case 2:{c[716]=b&16777215;n=0;N=o;return n|0}case 3:{n=0;N=o;return n|0}default:{n=0;N=o;return n|0}}}else{switch(d<<16>>16){case 28672:break;default:break t}if(a[3440]|0){m=c[160]|0;c[o+824>>2]=n&7;c[o+824+4>>2]=n>>>3&7;c[o+824+8>>2]=n>>>6&31;va(m,2434,o+824|0)|0}e=(c[2784+((n>>>3&7)<<2)>>2]|0)+(n>>>6&31)|0;b=c[2784+((n&7)<<2)>>2]|0;d=A(3,e&-2|0)|0;if(!(e&1))b=d&65280|b&255;else b=d&255|b<<8;B(5,e&-2|0,b&65535|0)|0;n=0;N=o;return n|0}while(0);if((n&65024|0)==21504){if(a[3440]|0){m=c[160]|0;c[o+840>>2]=n&7;c[o+840+4>>2]=n>>>3&7;c[o+840+8>>2]=n>>>6&7;va(m,2456,o+840|0)|0}e=(c[2784+((n>>>6&7)<<2)>>2]|0)+(c[2784+((n>>>3&7)<<2)>>2]|0)|0;b=c[2784+((n&7)<<2)>>2]|0;d=A(3,e&-2|0)|0;if(!(e&1))b=d&65280|b&255;else b=d&255|b<<8;B(5,e&-2|0,b&65535|0)|0;n=0;N=o;return n|0}if((n&63488|0)==32768){if(a[3440]|0){m=c[160]|0;c[o+856>>2]=n&7;c[o+856+4>>2]=n>>>3&7;c[o+856+8>>2]=n>>>5&62;va(m,2476,o+856|0)|0}B(5,(c[2784+((n>>>3&7)<<2)>>2]|0)+(n>>>5&62)|0,c[2784+((n&7)<<2)>>2]&65535|0)|0;n=0;N=o;return n|0}u:do if((n&65024)<<16>>16<20992){switch((n&65024)<<16>>16){case 7680:break;default:break u}if(a[3440]|0){m=c[160]|0;c[o+888>>2]=n&7;c[o+888+4>>2]=n>>>3&7;c[o+888+8>>2]=n>>>6&7;va(m,2518,o+888|0)|0}k=c[2784+((n>>>3&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=k-(n>>>6&7);m=c[718]|0;m=(k-(n>>>6&7)|0)<0?m|-2147483648:m&2147483647;m=(k-(n>>>6&7)|0)==0?m|1073741824:m&-1073741825;l=(k>>>31)+1+((-2147483648-(n>>>6&7)+(k&2147483647)|0)>>>31)|0;m=(l&2|0)==0?m&-536870913:m|536870912;c[718]=((-2147483648-(n>>>6&7)+(k&2147483647)|0)>>>31|0)==(l>>>1&1|0)?m&-268435457:m|268435456;n=0;N=o;return n|0}else{switch((n&65024)<<16>>16){case 20992:break;default:break u}if(a[3440]|0){m=c[160]|0;c[o+872>>2]=n&7;c[o+872+4>>2]=n>>>3&7;c[o+872+8>>2]=n>>>6&7;va(m,2498,o+872|0)|0}B(5,(c[2784+((n>>>6&7)<<2)>>2]|0)+(c[2784+((n>>>3&7)<<2)>>2]|0)|0,c[2784+((n&7)<<2)>>2]&65535|0)|0;n=0;N=o;return n|0}while(0);if((n&63488|0)==14336){if(a[3440]|0){m=c[160]|0;c[o+904>>2]=n>>>8&7;c[o+904+4>>2]=n&255;va(m,2538,o+904|0)|0}k=c[2784+((n>>>8&7)<<2)>>2]|0;c[2784+((n>>>8&7)<<2)>>2]=k-(n&255);m=c[718]|0;m=(k-(n&255)|0)<0?m|-2147483648:m&2147483647;m=(k-(n&255)|0)==0?m|1073741824:m&-1073741825;l=(k>>>31)+1+((-2147483648-(n&255)+(k&2147483647)|0)>>>31)|0;m=(l&2|0)==0?m&-536870913:m|536870912;c[718]=((-2147483648-(n&255)+(k&2147483647)|0)>>>31|0)==(l>>>1&1|0)?m&-268435457:m|268435456;n=0;N=o;return n|0}if((n&65024|0)==6656){if(a[3440]|0){m=c[160]|0;c[o+912>>2]=n&7;c[o+912+4>>2]=n>>>3&7;c[o+912+8>>2]=n>>>6&7;va(m,2556,o+912|0)|0}k=c[2784+((n>>>3&7)<<2)>>2]|0;l=c[2784+((n>>>6&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=k-l;n=c[718]|0;n=(k-l|0)<0?n|-2147483648:n&2147483647;n=(k-l|0)==0?n|1073741824:n&-1073741825;m=(~l>>>31)+(k>>>31)+(((k&2147483647)+1+(~l&2147483647)|0)>>>31)|0;n=(m&2|0)==0?n&-536870913:n|536870912;c[718]=(((k&2147483647)+1+(~l&2147483647)|0)>>>31|0)==(m>>>1&1|0)?n&-268435457:n|268435456;n=0;N=o;return n|0}if((n&65408|0)==45184){if(a[3440]|0){m=c[160]|0;c[o+928>>2]=n<<2&508;va(m,2574,o+928|0)|0}c[709]=(c[709]|0)-(n<<2&508);n=0;N=o;return n|0}if((n&65280|0)==57088){if(a[3440]|0){m=c[160]|0;c[o+936>>2]=n&255;va(m,2590,o+936|0)|0}if((n&255|0)==204){c[696]=c[718];n=0;N=o;return n|0}else{m=c[160]|0;c[o+944>>2]=n&255;va(m,2602,o+944|0)|0;n=1;N=o;return n|0}}v:do if(b<<16>>16>=-19840){if(b<<16>>16<-19776){switch(b<<16>>16){case -19840:break;default:break v}if(a[3440]|0){m=c[160]|0;c[o+984>>2]=n&7;c[o+984+4>>2]=n>>>3&7;va(m,2671,o+984|0)|0}c[2784+((n&7)<<2)>>2]=c[2784+((n>>>3&7)<<2)>>2]&65535;n=0;N=o;return n|0}if(b<<16>>16<16896){switch(b<<16>>16){case -19776:break;default:break v}if(a[3440]|0){m=c[160]|0;c[o+976>>2]=n&7;c[o+976+4>>2]=n>>>3&7;va(m,2657,o+976|0)|0}c[2784+((n&7)<<2)>>2]=c[2784+((n>>>3&7)<<2)>>2]&255;n=0;N=o;return n|0}else{switch(b<<16>>16){case 16896:break;default:break v}if(a[3440]|0){m=c[160]|0;c[o+968>>2]=n&7;c[o+968+4>>2]=n>>>3&7;va(m,2644,o+968|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]&c[2784+((n&7)<<2)>>2];n=c[718]|0;n=(m|0)<0?n|-2147483648:n&2147483647;c[718]=(m|0)==0?n|1073741824:n&-1073741825;n=0;N=o;return n|0}}else switch(b<<16>>16){case -19904:{if(a[3440]|0){m=c[160]|0;c[o+952>>2]=n&7;c[o+952+4>>2]=n>>>3&7;va(m,2616,o+952|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=(m&128|0)==0?m&255:m|-256;n=0;N=o;return n|0}case -19968:{if(a[3440]|0){m=c[160]|0;c[o+960>>2]=n&7;c[o+960+4>>2]=n>>>3&7;va(m,2630,o+960|0)|0}m=c[2784+((n>>>3&7)<<2)>>2]|0;c[2784+((n&7)<<2)>>2]=(m&32768|0)==0?m&65535:m|-65536;n=0;N=o;return n|0}default:break v}while(0);m=c[160]|0;c[o+992>>2]=g;c[o+992+4>>2]=n;va(m,2685,o+992|0)|0;n=1;N=o;return n|0}}}}}}}}}}}return 0}function ga(a){a=a|0;var b=0;b=N;N=N+16|0;c[b>>2]=la(c[a+60>>2]|0)|0;a=ja(y(6,b|0)|0)|0;N=b;return a|0}function ha(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0;h=N;N=N+32|0;g=c[a+28>>2]|0;c[h>>2]=g;g=(c[a+20>>2]|0)-g|0;c[h+4>>2]=g;c[h+8>>2]=b;c[h+12>>2]=d;f=2;b=g+d|0;g=h;while(1){if(!((z(c[a+60>>2]|0,g|0,f|0,h+16|0)|0)<<16>>16))e=c[h+16>>2]|0;else{c[h+16>>2]=-1;e=-1}if((b|0)==(e|0)){b=6;break}if((e|0)<0){b=8;break}k=c[g+4>>2]|0;j=e>>>0>k>>>0;i=j?g+8|0:g;k=e-(j?k:0)|0;c[i>>2]=(c[i>>2]|0)+k;c[i+4>>2]=(c[i+4>>2]|0)-k;f=f+(j<<31>>31)|0;b=b-e|0;g=i}if((b|0)==6){k=c[a+44>>2]|0;c[a+16>>2]=k+(c[a+48>>2]|0);c[a+28>>2]=k;c[a+20>>2]=k}else if((b|0)==8){c[a+16>>2]=0;c[a+28>>2]=0;c[a+20>>2]=0;c[a>>2]=c[a>>2]|32;if((f|0)==2)d=0;else d=d-(c[g+4>>2]|0)|0}N=h;return d|0}function ia(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;f=N;N=N+32|0;c[f+8>>2]=c[a+60>>2];c[f+8+4>>2]=d;c[f+8+8>>2]=b;c[f+8+12>>2]=f;c[f+8+16>>2]=e;if((ja(x(140,f+8|0)|0)|0)<0){c[f>>2]=-1;c[f+4>>2]=-1;a=-1;b=-1}else{a=c[f+4>>2]|0;b=c[f>>2]|0}u(a|0);N=f;return b|0}function ja(a){a=a|0;if(a>>>0>4294963200){c[(ka()|0)>>2]=0-a;a=-1}return a|0}function ka(){return 2940}function la(a){a=a|0;return a|0}function ma(a){a=a|0;return (a+-48|0)>>>0<10|0}function na(){return 644}function oa(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0;f=r(d,b)|0;d=(b|0)==0?0:d;if((c[e+76>>2]|0)>-1){g=(qa(e)|0)==0;a=ta(a,f,e)|0;if(!g)pa(e)}else a=ta(a,f,e)|0;if((a|0)!=(f|0))d=(a>>>0)/(b>>>0)|0;return d|0}function pa(a){a=a|0;return}function qa(a){a=a|0;return 1}function ra(b,e){b=b|0;e=e|0;var f=0,g=0,h=0,i=0;i=N;N=N+16|0;a[i>>0]=e;f=c[b+16>>2]|0;if(!f)if(!(sa(b)|0)){g=c[b+16>>2]|0;h=4}else f=-1;else{g=f;h=4}do if((h|0)==4){f=c[b+20>>2]|0;if(f>>>0<g>>>0?(e&255|0)!=(a[b+75>>0]|0):0){c[b+20>>2]=f+1;a[f>>0]=e;f=e&255;break}if((S[c[b+36>>2]&1](b,i,1)|0)==1)f=d[i>>0]|0;else f=-1}while(0);N=i;return f|0}function sa(b){b=b|0;var d=0;d=a[b+74>>0]|0;a[b+74>>0]=d+255|d;d=c[b>>2]|0;if(!(d&8)){c[b+8>>2]=0;c[b+4>>2]=0;d=c[b+44>>2]|0;c[b+28>>2]=d;c[b+20>>2]=d;c[b+16>>2]=d+(c[b+48>>2]|0);b=0}else{c[b>>2]=d|32;b=-1}return b|0}function ta(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0;f=c[e+16>>2]|0;if(!f)if(!(sa(e)|0)){g=c[e+16>>2]|0;h=5}else f=0;else{g=f;h=5}a:do if((h|0)==5){f=c[e+20>>2]|0;if((g-f|0)>>>0<d>>>0){f=S[c[e+36>>2]&1](e,b,d)|0;break}b:do if((a[e+75>>0]|0)<0|(d|0)==0){i=0;g=b}else{h=d;while(1){g=h+-1|0;if((a[b+g>>0]|0)==10)break;if(!g){i=0;g=b;break b}else h=g}f=S[c[e+36>>2]&1](e,b,h)|0;if(f>>>0<h>>>0)break a;i=h;g=b+h|0;d=d-h|0;f=c[e+20>>2]|0}while(0);_a(f|0,g|0,d|0)|0;c[e+20>>2]=(c[e+20>>2]|0)+d;f=i+d|0}while(0);return f|0}function ua(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;a:do if((e|0)!=0&(b&3|0)!=0){f=e;while(1){if((a[b>>0]|0)==(d&255)<<24>>24){g=6;break a}b=b+1|0;e=f+-1|0;if((e|0)!=0&(b&3|0)!=0)f=e;else{f=e;e=(e|0)!=0;g=5;break}}}else{f=e;e=(e|0)!=0;g=5}while(0);if((g|0)==5)if(e)g=6;else g=16;b:do if((g|0)==6){if((a[b>>0]|0)==(d&255)<<24>>24)if(!f){g=16;break}else break;e=r(d&255,16843009)|0;c:do if(f>>>0>3)while(1){h=c[b>>2]^e;if((h&-2139062144^-2139062144)&h+-16843009|0)break c;b=b+4|0;f=f+-4|0;if(f>>>0<=3){g=11;break}}else g=11;while(0);if((g|0)==11)if(!f){g=16;break}while(1){if((a[b>>0]|0)==(d&255)<<24>>24)break b;f=f+-1|0;if(!f){g=16;break}else b=b+1|0}}while(0);if((g|0)==16)b=0;return b|0}function va(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=N;N=N+16|0;c[e>>2]=d;d=wa(a,b,e)|0;N=e;return d|0}function wa(a,b,c){a=a|0;b=b|0;c=c|0;return za(a,b,c,1,1)|0}function xa(b,e,f,g,h,i){b=b|0;e=+e;f=f|0;g=g|0;h=h|0;i=i|0;var j=0,k=0,l=0,m=0,n=0.0,o=0,p=0,q=0,s=0,t=0,u=0,w=0,x=0,y=0,z=0,A=0,B=0;B=N;N=N+560|0;c[B+536>>2]=0;A=B+540+12|0;La(e)|0;j=v()|0;if((j|0)<0){La(-e)|0;e=-e;z=1;x=2737;j=v()|0}else{z=(h&2049|0)!=0&1;x=(h&2048|0)==0?((h&1|0)==0?2738:2743):2740}do if(0==0&(j&2146435072|0)==2146435072){j=z+3|0;Ha(b,32,f,j,h&-65537);Ba(b,x,z);Ba(b,e!=e|0.0!=0.0?(i&32|0?2764:2768):i&32|0?2756:2760,3);Ha(b,32,f,j,h^8192)}else{n=+Ma(e,B+536|0)*2.0;if(n!=0.0)c[B+536>>2]=(c[B+536>>2]|0)+-1;if((i|32|0)==97){p=(i&32|0)==0?x:x+9|0;o=z|2;do if(!(g>>>0>11|(12-g|0)==0)){e=8.0;j=12-g|0;do{j=j+-1|0;e=e*16.0}while((j|0)!=0);if((a[p>>0]|0)==45){e=-(e+(-n-e));break}else{e=n+e-e;break}}else e=n;while(0);k=c[B+536>>2]|0;j=(k|0)<0?0-k|0:k;j=Ga(j,((j|0)<0)<<31>>31,A)|0;if((j|0)==(A|0)){a[B+540+11>>0]=48;j=B+540+11|0}a[j+-1>>0]=(k>>31&2)+43;m=j+-2|0;a[m>>0]=i+15;j=B;do{z=~~e;k=j+1|0;a[j>>0]=i&32|d[480+z>>0];e=(e-+(z|0))*16.0;if((k-B|0)==1?!((h&8|0)==0&((g|0)<1&e==0.0)):0){a[k>>0]=46;j=j+2|0}else j=k}while(e!=0.0);l=j;if((g|0)!=0?(-2-B+l|0)<(g|0):0){g=g+2+A-m|0;j=A;k=m}else{g=A-B-m+l|0;j=A;k=m}A=g+o|0;Ha(b,32,f,A,h);Ba(b,p,o);Ha(b,48,f,A,h^65536);Ba(b,B,l-B|0);j=j-k|0;Ha(b,48,g-(l-B+j)|0,0,0);Ba(b,m,j);Ha(b,32,f,A,h^8192);j=A;break}k=(g|0)<0?6:g;if(n!=0.0){j=(c[B+536>>2]|0)+-28|0;c[B+536>>2]=j;e=n*268435456.0}else{e=n;j=c[B+536>>2]|0}y=(j|0)<0?B+32|0:B+32+288|0;g=y;do{u=~~e>>>0;c[g>>2]=u;g=g+4|0;e=(e-+(u>>>0))*1.0e9}while(e!=0.0);if((j|0)>0){o=y;while(1){m=(j|0)<29?j:29;j=g+-4|0;if(j>>>0>=o>>>0){l=0;do{s=Ya(c[j>>2]|0,0,m|0)|0;s=Sa(s|0,v()|0,l|0,0)|0;t=v()|0;l=Wa(s|0,t|0,1e9,0)|0;u=Ra(l|0,v()|0,1e9,0)|0;u=Ta(s|0,t|0,u|0,v()|0)|0;v()|0;c[j>>2]=u;j=j+-4|0}while(j>>>0>=o>>>0);if(l){u=o+-4|0;c[u>>2]=l;l=u}else l=o}else l=o;a:do if(g>>>0>l>>>0){j=g;while(1){g=j+-4|0;if(c[g>>2]|0){g=j;break a}if(g>>>0>l>>>0)j=g;else break}}while(0);j=(c[B+536>>2]|0)-m|0;c[B+536>>2]=j;if((j|0)>0)o=l;else break}}else l=y;if((j|0)<0){do{o=0-j|0;o=(o|0)<9?o:9;if(l>>>0<g>>>0){m=0;j=l;do{u=c[j>>2]|0;c[j>>2]=(u>>>o)+m;m=r(u&(1<<o)+-1,1e9>>>o)|0;j=j+4|0}while(j>>>0<g>>>0);j=(c[l>>2]|0)==0?l+4|0:l;if(!m)l=j;else{c[g>>2]=m;g=g+4|0;l=j}}else l=(c[l>>2]|0)==0?l+4|0:l;j=(i|32|0)==102?y:l;g=(g-j>>2|0)>(((k+25|0)/9|0)+1|0)?j+(((k+25|0)/9|0)+1<<2)|0:g;j=(c[B+536>>2]|0)+o|0;c[B+536>>2]=j}while((j|0)<0);j=l}else j=l;if(j>>>0<g>>>0){l=(y-j>>2)*9|0;o=c[j>>2]|0;if(o>>>0>=10){m=10;do{m=m*10|0;l=l+1|0}while(o>>>0>=m>>>0)}}else l=0;m=k-((i|32|0)==102?0:l)+(((k|0)!=0&(i|32|0)==103)<<31>>31)|0;if((m|0)<(((g-y>>2)*9|0)+-9|0)){p=y+4+(((m+9216|0)/9|0)+-1024<<2)|0;m=m+9216-(((m+9216|0)/9|0)*9|0)|0;if((m|0)<8){o=10;while(1){o=o*10|0;if((m|0)<7)m=m+1|0;else break}}else o=10;s=c[p>>2]|0;m=(s>>>0)/(o>>>0)|0;t=s-(r(m,o)|0)|0;q=(p+4|0)==(g|0);if(!(q&(t|0)==0)){e=(m&1|0)==0?9007199254740992.0:9007199254740994.0;u=o>>>1;n=t>>>0<u>>>0?.5:q&(t|0)==(u|0)?1.0:1.5;if(z){u=(a[x>>0]|0)==45;n=u?-n:n;e=u?-e:e}c[p>>2]=s-t;if(e+n!=e){u=s-t+o|0;c[p>>2]=u;if(u>>>0>999999999){m=p;while(1){l=m+-4|0;c[m>>2]=0;if(l>>>0<j>>>0){j=j+-4|0;c[j>>2]=0}u=(c[l>>2]|0)+1|0;c[l>>2]=u;if(u>>>0>999999999)m=l;else{p=l;break}}}l=(y-j>>2)*9|0;o=c[j>>2]|0;if(o>>>0<10)m=p;else{m=10;do{m=m*10|0;l=l+1|0}while(o>>>0>=m>>>0);m=p}}else m=p}else m=p;t=m+4|0;g=g>>>0>t>>>0?t:g;t=j}else t=j;p=0-l|0;b:do if(g>>>0>t>>>0)while(1){j=g+-4|0;if(c[j>>2]|0){u=g;s=1;break b}if(j>>>0>t>>>0)g=j;else{u=j;s=0;break}}else{u=g;s=0}while(0);do if((i|32|0)==103){if((l|0)>-5?(k+(((k|0)!=0^1)&1)|0)>(l|0):0){m=i+-1|0;k=k+(((k|0)!=0^1)&1)+-1-l|0}else{m=i+-2|0;k=k+(((k|0)!=0^1)&1)+-1|0}if(!(h&8)){if(s?(w=c[u+-4>>2]|0,(w|0)!=0):0)if(!((w>>>0)%10|0)){j=0;g=10;do{g=g*10|0;j=j+1|0}while(!((w>>>0)%(g>>>0)|0|0))}else j=0;else j=9;g=((u-y>>2)*9|0)+-9|0;if((m|32|0)==102){i=g-j|0;i=(i|0)>0?i:0;k=(k|0)<(i|0)?k:i;break}else{i=g+l-j|0;i=(i|0)>0?i:0;k=(k|0)<(i|0)?k:i;break}}}else m=i;while(0);q=(k|0)!=0;g=q?1:h>>>3&1;o=(m|32|0)==102;if(o){p=0;j=(l|0)>0?l:0}else{j=(l|0)<0?p:l;j=Ga(j,((j|0)<0)<<31>>31,A)|0;if((A-j|0)<2)do{j=j+-1|0;a[j>>0]=48}while((A-j|0)<2);a[j+-1>>0]=(l>>31&2)+43;j=j+-2|0;a[j>>0]=m;p=j;j=A-j|0}j=z+1+k+g+j|0;Ha(b,32,f,j,h);Ba(b,x,z);Ha(b,48,f,j,h^65536);if(o){m=t>>>0>y>>>0?y:t;l=m;do{g=Ga(c[l>>2]|0,0,B+9|0)|0;if((l|0)==(m|0)){if((g|0)==(B+9|0)){a[B+8>>0]=48;g=B+8|0}}else if(g>>>0>B>>>0){$a(B|0,48,g-B|0)|0;do g=g+-1|0;while(g>>>0>B>>>0)}Ba(b,g,B+9-g|0);l=l+4|0}while(l>>>0<=y>>>0);if(!((h&8|0)==0&(q^1)))Ba(b,2772,1);if(l>>>0<u>>>0&(k|0)>0)while(1){g=Ga(c[l>>2]|0,0,B+9|0)|0;if(g>>>0>B>>>0){$a(B|0,48,g-B|0)|0;do g=g+-1|0;while(g>>>0>B>>>0)}Ba(b,g,(k|0)<9?k:9);l=l+4|0;g=k+-9|0;if(!(l>>>0<u>>>0&(k|0)>9)){k=g;break}else k=g}Ha(b,48,k+9|0,9,0)}else{o=s?u:t+4|0;if(t>>>0<o>>>0&(k|0)>-1){m=t;do{g=Ga(c[m>>2]|0,0,B+9|0)|0;if((g|0)==(B+9|0)){a[B+8>>0]=48;g=B+8|0}do if((m|0)==(t|0)){l=g+1|0;Ba(b,g,1);if((h&8|0)==0&(k|0)<1){g=l;break}Ba(b,2772,1);g=l}else{if(g>>>0<=B>>>0)break;$a(B|0,48,g+(0-B)|0)|0;do g=g+-1|0;while(g>>>0>B>>>0)}while(0);z=B+9-g|0;Ba(b,g,(k|0)>(z|0)?z:k);k=k-z|0;m=m+4|0}while(m>>>0<o>>>0&(k|0)>-1)}Ha(b,48,k+18|0,18,0);Ba(b,p,A-p|0)}Ha(b,32,f,j,h^8192)}while(0);N=B;return ((j|0)<(f|0)?f:j)|0}function ya(a,b){a=a|0;b=b|0;var d=0.0,e=0;e=(c[b>>2]|0)+(8-1)&~(8-1);d=+g[e>>3];c[b>>2]=e+8;g[a>>3]=d;return}function za(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0;k=N;N=N+224|0;h=k+160|0;i=h+40|0;do{c[h>>2]=0;h=h+4|0}while((h|0)<(i|0));c[k+208>>2]=c[e>>2];if((Aa(0,d,k+208|0,k+80|0,k+160|0,f,g)|0)<0)e=-1;else{if((c[b+76>>2]|0)>-1)j=qa(b)|0;else j=0;i=c[b>>2]|0;if((a[b+74>>0]|0)<1)c[b>>2]=i&-33;if(!(c[b+48>>2]|0)){h=c[b+44>>2]|0;c[b+44>>2]=k;c[b+28>>2]=k;c[b+20>>2]=k;c[b+48>>2]=80;c[b+16>>2]=k+80;e=Aa(b,d,k+208|0,k+80|0,k+160|0,f,g)|0;if(h){S[c[b+36>>2]&1](b,0,0)|0;e=(c[b+20>>2]|0)==0?-1:e;c[b+44>>2]=h;c[b+48>>2]=0;c[b+16>>2]=0;c[b+28>>2]=0;c[b+20>>2]=0}}else e=Aa(b,d,k+208|0,k+80|0,k+160|0,f,g)|0;h=c[b>>2]|0;c[b>>2]=h|i&32;if(j|0)pa(b);e=(h&32|0)==0?e:-1}N=k;return e|0}function Aa(d,e,f,h,i,j,k){d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;var l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,w=0,x=0,y=0,z=0,A=0,B=0;A=N;N=N+64|0;c[A+56>>2]=e;x=A+40|0;l=0;e=0;n=0;a:while(1){do{do if((e|0)>-1)if((l|0)>(2147483647-e|0)){c[(ka()|0)>>2]=75;e=-1;break}else{e=l+e|0;break}while(0);r=c[A+56>>2]|0;l=a[r>>0]|0;if(!(l<<24>>24)){w=92;break a}m=r;b:while(1){switch(l<<24>>24){case 37:{w=10;break b}case 0:{l=m;break b}default:{}}u=m+1|0;c[A+56>>2]=u;l=a[u>>0]|0;m=u}c:do if((w|0)==10){w=0;l=m;do{if((a[m+1>>0]|0)!=37)break c;l=l+1|0;m=m+2|0;c[A+56>>2]=m}while((a[m>>0]|0)==37)}while(0);l=l-r|0;if(d|0)Ba(d,r,l)}while((l|0)!=0);u=(ma(a[(c[A+56>>2]|0)+1>>0]|0)|0)==0;m=c[A+56>>2]|0;if(!u?(a[m+2>>0]|0)==36:0){s=(a[m+1>>0]|0)+-48|0;p=1;l=3}else{s=-1;p=n;l=1}l=m+l|0;c[A+56>>2]=l;m=a[l>>0]|0;if(((m<<24>>24)+-32|0)>>>0>31|(1<<(m<<24>>24)+-32&75913|0)==0)o=0;else{n=0;o=(m<<24>>24)+-32|0;do{n=1<<o|n;l=l+1|0;c[A+56>>2]=l;m=a[l>>0]|0;o=(m<<24>>24)+-32|0}while(!(o>>>0>31|(1<<o&75913|0)==0));o=n}if(m<<24>>24==42){if((ma(a[l+1>>0]|0)|0)!=0?(z=c[A+56>>2]|0,(a[z+2>>0]|0)==36):0){c[i+((a[z+1>>0]|0)+-48<<2)>>2]=10;l=c[h+((a[z+1>>0]|0)+-48<<3)>>2]|0;n=1;m=z+3|0}else{if(p|0){e=-1;break}if(d|0){u=(c[f>>2]|0)+(4-1)&~(4-1);l=c[u>>2]|0;c[f>>2]=u+4}else l=0;n=0;m=(c[A+56>>2]|0)+1|0}c[A+56>>2]=m;q=(l|0)<0;t=q?0-l|0:l;q=q?o|8192:o;u=n}else{l=Ca(A+56|0)|0;if((l|0)<0){e=-1;break}t=l;q=o;u=p;m=c[A+56>>2]|0}do if((a[m>>0]|0)==46){l=m+1|0;if((a[l>>0]|0)!=42){c[A+56>>2]=l;l=Ca(A+56|0)|0;m=c[A+56>>2]|0;break}if(ma(a[m+2>>0]|0)|0?(y=c[A+56>>2]|0,(a[y+3>>0]|0)==36):0){c[i+((a[y+2>>0]|0)+-48<<2)>>2]=10;l=c[h+((a[y+2>>0]|0)+-48<<3)>>2]|0;c[A+56>>2]=y+4;m=y+4|0;break}if(u|0){e=-1;break a}if(d|0){p=(c[f>>2]|0)+(4-1)&~(4-1);l=c[p>>2]|0;c[f>>2]=p+4}else l=0;m=(c[A+56>>2]|0)+2|0;c[A+56>>2]=m}else l=-1;while(0);p=0;while(1){if(((a[m>>0]|0)+-65|0)>>>0>57){e=-1;break a}n=m;m=m+1|0;c[A+56>>2]=m;n=a[(a[n>>0]|0)+-65+(16+(p*58|0))>>0]|0;if(((n&255)+-1|0)>>>0>=8)break;else p=n&255}if(!(n<<24>>24)){e=-1;break}o=(s|0)>-1;do if(n<<24>>24==19)if(o){e=-1;break a}else w=54;else{if(o){c[i+(s<<2)>>2]=n&255;s=h+(s<<3)|0;w=c[s+4>>2]|0;c[A+40>>2]=c[s>>2];c[A+40+4>>2]=w;w=54;break}if(!d){e=0;break a}Da(A+40|0,n&255,f,k);m=c[A+56>>2]|0;w=55}while(0);if((w|0)==54){w=0;if(d|0)w=55;else l=0}d:do if((w|0)==55){w=0;m=a[m+-1>>0]|0;m=(p|0)!=0&(m&15|0)==3?m&-33:m;n=q&-65537;s=(q&8192|0)==0?q:n;e:do switch(m|0){case 110:switch((p&255)<<24>>24){case 0:{c[c[A+40>>2]>>2]=e;l=0;break d}case 1:{c[c[A+40>>2]>>2]=e;l=0;break d}case 2:{l=c[A+40>>2]|0;c[l>>2]=e;c[l+4>>2]=((e|0)<0)<<31>>31;l=0;break d}case 3:{b[c[A+40>>2]>>1]=e;l=0;break d}case 4:{a[c[A+40>>2]>>0]=e;l=0;break d}case 6:{c[c[A+40>>2]>>2]=e;l=0;break d}case 7:{l=c[A+40>>2]|0;c[l>>2]=e;c[l+4>>2]=((e|0)<0)<<31>>31;l=0;break d}default:{l=0;break d}}case 112:{m=120;l=l>>>0>8?l:8;n=s|8;w=67;break}case 88:case 120:{n=s;w=67;break}case 111:{n=Fa(c[A+40>>2]|0,c[A+40+4>>2]|0,A+40|0)|0;q=n;o=0;p=2720;l=(s&8|0)==0|(l|0)>(x-n|0)?l:x-n+1|0;n=s;w=73;break}case 105:case 100:{m=c[A+40>>2]|0;n=c[A+40+4>>2]|0;if((n|0)<0){m=Ta(0,0,m|0,n|0)|0;n=v()|0;c[A+40>>2]=m;c[A+40+4>>2]=n;o=1;p=2720;w=72;break e}else{o=(s&2049|0)!=0&1;p=(s&2048|0)==0?((s&1|0)==0?2720:2722):2721;w=72;break e}}case 117:{o=0;p=2720;m=c[A+40>>2]|0;n=c[A+40+4>>2]|0;w=72;break}case 99:{a[A+39>>0]=c[A+40>>2];r=A+39|0;o=0;p=2720;q=1;m=n;l=x;break}case 115:{B=c[A+40>>2]|0;B=(B|0)==0?2730:B;s=ua(B,0,l)|0;r=B;o=0;p=2720;q=(s|0)==0?l:s-B|0;m=n;l=(s|0)==0?B+l|0:s;break}case 67:{c[A+48>>2]=c[A+40>>2];c[A+48+4>>2]=0;c[A+40>>2]=A+48;o=-1;w=79;break}case 83:{if(!l){Ha(d,32,t,0,s);l=0;w=89}else{o=l;w=79}break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{l=R[j&1](d,+g[A+40>>3],t,l,s,m)|0;break d}default:{o=0;p=2720;q=l;m=s;l=x}}while(0);f:do if((w|0)==67){q=Ea(c[A+40>>2]|0,c[A+40+4>>2]|0,A+40|0,m&32)|0;p=(n&8|0)==0|((c[A+40>>2]|0)==0?(c[A+40+4>>2]|0)==0:0);o=p?0:2;p=p?2720:2720+(m>>>4)|0;w=73}else if((w|0)==72){q=Ga(m,n,A+40|0)|0;n=s;w=73}else if((w|0)==79){w=0;n=c[A+40>>2]|0;l=0;while(1){m=c[n>>2]|0;if(!m)break;m=Ia(A+60|0,m)|0;if((m|0)<0|m>>>0>(o-l|0)>>>0){w=83;break}l=m+l|0;if(o>>>0>l>>>0)n=n+4|0;else break}if((w|0)==83){w=0;if((m|0)<0){e=-1;break a}}Ha(d,32,t,l,s);if(!l){l=0;w=89}else{n=c[A+40>>2]|0;o=0;while(1){m=c[n>>2]|0;if(!m){w=89;break f}m=Ia(A+60|0,m)|0;o=m+o|0;if((o|0)>(l|0)){w=89;break f}Ba(d,A+60|0,m);if(o>>>0>=l>>>0){w=89;break}else n=n+4|0}}}while(0);if((w|0)==73){w=0;m=c[A+40>>2]|0?1:(c[A+40+4>>2]|0)!=0;B=(l|0)!=0|m;m=x-q+((m^1)&1)|0;r=B?q:A+40|0;q=B?((l|0)>(m|0)?l:m):0;m=(l|0)>-1?n&-65537:n;l=x}else if((w|0)==89){w=0;Ha(d,32,t,l,s^8192);l=(t|0)>(l|0)?t:l;break}s=l-r|0;q=(q|0)<(s|0)?s:q;B=q+o|0;l=(t|0)<(B|0)?B:t;Ha(d,32,l,B,m);Ba(d,p,o);Ha(d,48,l,B,m^65536);Ha(d,48,q,s,0);Ba(d,r,s);Ha(d,32,l,B,m^8192)}while(0);n=u}g:do if((w|0)==92)if(!d)if(!n)e=0;else{e=1;while(1){l=c[i+(e<<2)>>2]|0;if(!l)break;Da(h+(e<<3)|0,l,f,k);e=e+1|0;if(e>>>0>=10){e=1;break g}}while(1){if(c[i+(e<<2)>>2]|0){e=-1;break g}e=e+1|0;if(e>>>0>=10){e=1;break}}}while(0);N=A;return e|0}function Ba(a,b,d){a=a|0;b=b|0;d=d|0;if(!(c[a>>2]&32))ta(b,d,a)|0;return}function Ca(b){b=b|0;var d=0,e=0;if(!(ma(a[c[b>>2]>>0]|0)|0))d=0;else{d=0;do{e=c[b>>2]|0;d=(d*10|0)+-48+(a[e>>0]|0)|0;c[b>>2]=e+1}while((ma(a[e+1>>0]|0)|0)!=0)}return d|0}function Da(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0.0;a:do if(b>>>0<=20)do switch(b|0){case 9:{b=(c[d>>2]|0)+(4-1)&~(4-1);e=c[b>>2]|0;c[d>>2]=b+4;c[a>>2]=e;break a}case 10:{b=(c[d>>2]|0)+(4-1)&~(4-1);e=c[b>>2]|0;c[d>>2]=b+4;c[a>>2]=e;c[a+4>>2]=((e|0)<0)<<31>>31;break a}case 11:{b=(c[d>>2]|0)+(4-1)&~(4-1);e=c[b>>2]|0;c[d>>2]=b+4;c[a>>2]=e;c[a+4>>2]=0;break a}case 12:{f=(c[d>>2]|0)+(8-1)&~(8-1);b=c[f>>2]|0;e=c[f+4>>2]|0;c[d>>2]=f+8;c[a>>2]=b;c[a+4>>2]=e;break a}case 13:{e=(c[d>>2]|0)+(4-1)&~(4-1);f=c[e>>2]|0;c[d>>2]=e+4;c[a>>2]=(f&65535)<<16>>16;c[a+4>>2]=(((f&65535)<<16>>16|0)<0)<<31>>31;break a}case 14:{e=(c[d>>2]|0)+(4-1)&~(4-1);f=c[e>>2]|0;c[d>>2]=e+4;c[a>>2]=f&65535;c[a+4>>2]=0;break a}case 15:{e=(c[d>>2]|0)+(4-1)&~(4-1);f=c[e>>2]|0;c[d>>2]=e+4;c[a>>2]=(f&255)<<24>>24;c[a+4>>2]=(((f&255)<<24>>24|0)<0)<<31>>31;break a}case 16:{e=(c[d>>2]|0)+(4-1)&~(4-1);f=c[e>>2]|0;c[d>>2]=e+4;c[a>>2]=f&255;c[a+4>>2]=0;break a}case 17:{f=(c[d>>2]|0)+(8-1)&~(8-1);h=+g[f>>3];c[d>>2]=f+8;g[a>>3]=h;break a}case 18:{U[e&1](a,d);break a}default:break a}while(0);while(0);return}function Ea(b,c,e,f){b=b|0;c=c|0;e=e|0;f=f|0;if(!((b|0)==0&(c|0)==0))do{e=e+-1|0;a[e>>0]=d[480+(b&15)>>0]|0|f;b=Xa(b|0,c|0,4)|0;c=v()|0}while(!((b|0)==0&(c|0)==0));return e|0}function Fa(b,c,d){b=b|0;c=c|0;d=d|0;if(!((b|0)==0&(c|0)==0))do{d=d+-1|0;a[d>>0]=b&7|48;b=Xa(b|0,c|0,3)|0;c=v()|0}while(!((b|0)==0&(c|0)==0));return d|0}function Ga(b,c,d){b=b|0;c=c|0;d=d|0;var e=0,f=0,g=0;if(c>>>0>0|(c|0)==0&b>>>0>4294967295){do{e=b;b=Wa(b|0,c|0,10,0)|0;f=c;c=v()|0;g=Ra(b|0,c|0,10,0)|0;g=Ta(e|0,f|0,g|0,v()|0)|0;v()|0;d=d+-1|0;a[d>>0]=g&255|48}while(f>>>0>9|(f|0)==9&e>>>0>4294967295);c=b}else c=b;if(c)do{g=c;c=(c>>>0)/10|0;d=d+-1|0;a[d>>0]=g-(c*10|0)|48}while(g>>>0>=10);return d|0}function Ha(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;var f=0;f=N;N=N+256|0;if((c|0)>(d|0)&(e&73728|0)==0){$a(f|0,b<<24>>24|0,((c-d|0)>>>0<256?c-d|0:256)|0)|0;if((c-d|0)>>>0>255){b=c-d|0;do{Ba(a,f,256);b=b+-256|0}while(b>>>0>255);b=c-d&255}else b=c-d|0;Ba(a,f,b)}N=f;return}function Ia(a,b){a=a|0;b=b|0;if(!a)a=0;else a=Ja(a,b,0)|0;return a|0}function Ja(b,d,e){b=b|0;d=d|0;e=e|0;do if(b){if(d>>>0<128){a[b>>0]=d;b=1;break}if(!(c[c[(Ka()|0)+188>>2]>>2]|0))if((d&-128|0)==57216){a[b>>0]=d;b=1;break}else{c[(ka()|0)>>2]=84;b=-1;break}if(d>>>0<2048){a[b>>0]=d>>>6|192;a[b+1>>0]=d&63|128;b=2;break}if(d>>>0<55296|(d&-8192|0)==57344){a[b>>0]=d>>>12|224;a[b+1>>0]=d>>>6&63|128;a[b+2>>0]=d&63|128;b=3;break}if((d+-65536|0)>>>0<1048576){a[b>>0]=d>>>18|240;a[b+1>>0]=d>>>12&63|128;a[b+2>>0]=d>>>6&63|128;a[b+3>>0]=d&63|128;b=4;break}else{c[(ka()|0)>>2]=84;b=-1;break}}else b=1;while(0);return b|0}function Ka(){return na()|0}function La(a){a=+a;var b=0;g[h>>3]=a;b=c[h>>2]|0;u(c[h+4>>2]|0);return b|0}function Ma(a,b){a=+a;b=b|0;var d=0,e=0,f=0;g[h>>3]=a;d=c[h>>2]|0;e=c[h+4>>2]|0;f=Xa(d|0,e|0,52)|0;v()|0;switch(f&2047){case 0:{if(a!=0.0){a=+Ma(a*18446744073709551616.0,b);d=(c[b>>2]|0)+-64|0}else d=0;c[b>>2]=d;break}case 2047:break;default:{c[b>>2]=(f&2047)+-1022;c[h>>2]=d;c[h+4>>2]=e&-2146435073|1071644672;a=+g[h>>3]}}return +a}function Na(b,d){b=b|0;d=d|0;var e=0,f=0,g=0;if((c[d+76>>2]|0)>=0?(qa(d)|0)!=0:0){if((b&255|0)!=(a[d+75>>0]|0)?(f=c[d+20>>2]|0,f>>>0<(c[d+16>>2]|0)>>>0):0){c[d+20>>2]=f+1;a[f>>0]=b;b=b&255}else b=ra(d,b)|0;pa(d)}else g=3;do if((g|0)==3){if((b&255|0)!=(a[d+75>>0]|0)?(e=c[d+20>>2]|0,e>>>0<(c[d+16>>2]|0)>>>0):0){c[d+20>>2]=e+1;a[e>>0]=b;b=b&255;break}b=ra(d,b)|0}while(0);return b|0}function Oa(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;v=N;N=N+16|0;do if(a>>>0<245){m=a>>>0<11?16:a+11&-8;k=c[736]|0;if(k>>>(m>>>3)&3|0){a=2984+((k>>>(m>>>3)&1^1)+(m>>>3)<<1<<2)|0;b=c[a+8>>2]|0;d=c[b+8>>2]|0;if((d|0)==(a|0))c[736]=k&~(1<<(k>>>(m>>>3)&1^1)+(m>>>3));else{c[d+12>>2]=a;c[a+8>>2]=d}u=(k>>>(m>>>3)&1^1)+(m>>>3)<<3;c[b+4>>2]=u|3;c[b+u+4>>2]=c[b+u+4>>2]|1;u=b+8|0;N=v;return u|0}l=c[738]|0;if(m>>>0>l>>>0){if(k>>>(m>>>3)|0){a=k>>>(m>>>3)<<(m>>>3)&(2<<(m>>>3)|0-(2<<(m>>>3)));f=((a&0-a)+-1|0)>>>(((a&0-a)+-1|0)>>>12&16);e=f>>>(f>>>5&8)>>>(f>>>(f>>>5&8)>>>2&4);e=(f>>>5&8|((a&0-a)+-1|0)>>>12&16|f>>>(f>>>5&8)>>>2&4|e>>>1&2|e>>>(e>>>1&2)>>>1&1)+(e>>>(e>>>1&2)>>>(e>>>(e>>>1&2)>>>1&1))|0;f=c[2984+(e<<1<<2)+8>>2]|0;a=c[f+8>>2]|0;if((a|0)==(2984+(e<<1<<2)|0)){c[736]=k&~(1<<e);a=k&~(1<<e)}else{c[a+12>>2]=2984+(e<<1<<2);c[2984+(e<<1<<2)+8>>2]=a;a=k}c[f+4>>2]=m|3;c[f+m+4>>2]=(e<<3)-m|1;c[f+(e<<3)>>2]=(e<<3)-m;if(l|0){d=c[741]|0;if(!(a&1<<(l>>>3))){c[736]=a|1<<(l>>>3);a=2984+(l>>>3<<1<<2)|0;b=2984+(l>>>3<<1<<2)+8|0}else{a=c[2984+(l>>>3<<1<<2)+8>>2]|0;b=2984+(l>>>3<<1<<2)+8|0}c[b>>2]=d;c[a+12>>2]=d;c[d+8>>2]=a;c[d+12>>2]=2984+(l>>>3<<1<<2)}c[738]=(e<<3)-m;c[741]=f+m;u=f+8|0;N=v;return u|0}g=c[737]|0;if(g){b=((g&0-g)+-1|0)>>>(((g&0-g)+-1|0)>>>12&16);j=b>>>(b>>>5&8)>>>(b>>>(b>>>5&8)>>>2&4);j=c[3248+((b>>>5&8|((g&0-g)+-1|0)>>>12&16|b>>>(b>>>5&8)>>>2&4|j>>>1&2|j>>>(j>>>1&2)>>>1&1)+(j>>>(j>>>1&2)>>>(j>>>(j>>>1&2)>>>1&1))<<2)>>2]|0;b=j;i=j;j=(c[j+4>>2]&-8)-m|0;while(1){a=c[b+16>>2]|0;if(!a){a=c[b+20>>2]|0;if(!a)break}h=(c[a+4>>2]&-8)-m|0;f=h>>>0<j>>>0;b=a;i=f?a:i;j=f?h:j}h=i+m|0;if(h>>>0>i>>>0){f=c[i+24>>2]|0;a=c[i+12>>2]|0;do if((a|0)==(i|0)){b=i+20|0;a=c[b>>2]|0;if(!a){b=i+16|0;a=c[b>>2]|0;if(!a){b=0;break}}while(1){e=a+20|0;d=c[e>>2]|0;if(!d){e=a+16|0;d=c[e>>2]|0;if(!d)break;else{a=d;b=e}}else{a=d;b=e}}c[b>>2]=0;b=a}else{b=c[i+8>>2]|0;c[b+12>>2]=a;c[a+8>>2]=b;b=a}while(0);do if(f|0){a=c[i+28>>2]|0;if((i|0)==(c[3248+(a<<2)>>2]|0)){c[3248+(a<<2)>>2]=b;if(!b){c[737]=g&~(1<<a);break}}else{c[((c[f+16>>2]|0)==(i|0)?f+16|0:f+20|0)>>2]=b;if(!b)break}c[b+24>>2]=f;a=c[i+16>>2]|0;if(a|0){c[b+16>>2]=a;c[a+24>>2]=b}a=c[i+20>>2]|0;if(a|0){c[b+20>>2]=a;c[a+24>>2]=b}}while(0);if(j>>>0<16){u=j+m|0;c[i+4>>2]=u|3;u=i+u+4|0;c[u>>2]=c[u>>2]|1}else{c[i+4>>2]=m|3;c[h+4>>2]=j|1;c[h+j>>2]=j;if(l|0){d=c[741]|0;if(!(1<<(l>>>3)&k)){c[736]=1<<(l>>>3)|k;a=2984+(l>>>3<<1<<2)|0;b=2984+(l>>>3<<1<<2)+8|0}else{a=c[2984+(l>>>3<<1<<2)+8>>2]|0;b=2984+(l>>>3<<1<<2)+8|0}c[b>>2]=d;c[a+12>>2]=d;c[d+8>>2]=a;c[d+12>>2]=2984+(l>>>3<<1<<2)}c[738]=j;c[741]=h}u=i+8|0;N=v;return u|0}}}}else if(a>>>0<=4294967231){m=a+11&-8;e=c[737]|0;if(e){if((a+11|0)>>>8)if(m>>>0>16777215)i=31;else{i=(a+11|0)>>>8<<((((a+11|0)>>>8)+1048320|0)>>>16&8);i=14-((i+520192|0)>>>16&4|(((a+11|0)>>>8)+1048320|0)>>>16&8|((i<<((i+520192|0)>>>16&4))+245760|0)>>>16&2)+(i<<((i+520192|0)>>>16&4)<<(((i<<((i+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;i=m>>>(i+7|0)&1|i<<1}else i=0;a=c[3248+(i<<2)>>2]|0;a:do if(!a){d=0;a=0;b=0-m|0;p=61}else{g=0;b=0-m|0;h=m<<((i|0)==31?0:25-(i>>>1)|0);d=0;while(1){f=(c[a+4>>2]&-8)-m|0;if(f>>>0<b>>>0)if(!f){f=a;b=0;d=a;p=65;break a}else{g=a;b=f}p=c[a+20>>2]|0;a=c[a+16+(h>>>31<<2)>>2]|0;d=(p|0)==0|(p|0)==(a|0)?d:p;if(!a){a=g;p=61;break}else h=h<<1}}while(0);if((p|0)==61){if((d|0)==0&(a|0)==0){a=2<<i;if(!((a|0-a)&e))break;k=((a|0-a)&e&0-((a|0-a)&e))+-1|0;l=k>>>(k>>>12&16)>>>(k>>>(k>>>12&16)>>>5&8);d=l>>>(l>>>2&4)>>>(l>>>(l>>>2&4)>>>1&2);a=0;d=c[3248+((k>>>(k>>>12&16)>>>5&8|k>>>12&16|l>>>2&4|l>>>(l>>>2&4)>>>1&2|d>>>1&1)+(d>>>(d>>>1&1))<<2)>>2]|0}if(!d){i=a;h=b}else{f=a;p=65}}if((p|0)==65)while(1){l=(c[d+4>>2]&-8)-m|0;a=l>>>0<b>>>0;b=a?l:b;f=a?d:f;a=c[d+16>>2]|0;if(!a)a=c[d+20>>2]|0;if(!a){i=f;h=b;break}else d=a}if(((i|0)!=0?h>>>0<((c[738]|0)-m|0)>>>0:0)?(j=i+m|0,j>>>0>i>>>0):0){g=c[i+24>>2]|0;a=c[i+12>>2]|0;do if((a|0)==(i|0)){b=i+20|0;a=c[b>>2]|0;if(!a){b=i+16|0;a=c[b>>2]|0;if(!a){a=0;break}}while(1){f=a+20|0;d=c[f>>2]|0;if(!d){f=a+16|0;d=c[f>>2]|0;if(!d)break;else{a=d;b=f}}else{a=d;b=f}}c[b>>2]=0}else{u=c[i+8>>2]|0;c[u+12>>2]=a;c[a+8>>2]=u}while(0);do if(g){b=c[i+28>>2]|0;if((i|0)==(c[3248+(b<<2)>>2]|0)){c[3248+(b<<2)>>2]=a;if(!a){c[737]=e&~(1<<b);e=e&~(1<<b);break}}else{c[((c[g+16>>2]|0)==(i|0)?g+16|0:g+20|0)>>2]=a;if(!a)break}c[a+24>>2]=g;b=c[i+16>>2]|0;if(b|0){c[a+16>>2]=b;c[b+24>>2]=a}b=c[i+20>>2]|0;if(b){c[a+20>>2]=b;c[b+24>>2]=a}}while(0);b:do if(h>>>0<16){u=h+m|0;c[i+4>>2]=u|3;u=i+u+4|0;c[u>>2]=c[u>>2]|1}else{c[i+4>>2]=m|3;c[j+4>>2]=h|1;c[j+h>>2]=h;d=h>>>3;if(h>>>0<256){a=c[736]|0;if(!(a&1<<d)){c[736]=a|1<<d;a=2984+(d<<1<<2)|0;b=2984+(d<<1<<2)+8|0}else{a=c[2984+(d<<1<<2)+8>>2]|0;b=2984+(d<<1<<2)+8|0}c[b>>2]=j;c[a+12>>2]=j;c[j+8>>2]=a;c[j+12>>2]=2984+(d<<1<<2);break}a=h>>>8;if(a)if(h>>>0>16777215)d=31;else{d=a<<((a+1048320|0)>>>16&8)<<(((a<<((a+1048320|0)>>>16&8))+520192|0)>>>16&4);d=14-(((a<<((a+1048320|0)>>>16&8))+520192|0)>>>16&4|(a+1048320|0)>>>16&8|(d+245760|0)>>>16&2)+(d<<((d+245760|0)>>>16&2)>>>15)|0;d=h>>>(d+7|0)&1|d<<1}else d=0;a=3248+(d<<2)|0;c[j+28>>2]=d;c[j+16+4>>2]=0;c[j+16>>2]=0;b=1<<d;if(!(e&b)){c[737]=e|b;c[a>>2]=j;c[j+24>>2]=a;c[j+12>>2]=j;c[j+8>>2]=j;break}a=c[a>>2]|0;c:do if((c[a+4>>2]&-8|0)!=(h|0)){e=h<<((d|0)==31?0:25-(d>>>1)|0);while(1){d=a+16+(e>>>31<<2)|0;b=c[d>>2]|0;if(!b)break;if((c[b+4>>2]&-8|0)==(h|0)){a=b;break c}else{e=e<<1;a=b}}c[d>>2]=j;c[j+24>>2]=a;c[j+12>>2]=j;c[j+8>>2]=j;break b}while(0);t=a+8|0;u=c[t>>2]|0;c[u+12>>2]=j;c[t>>2]=j;c[j+8>>2]=u;c[j+12>>2]=a;c[j+24>>2]=0}while(0);u=i+8|0;N=v;return u|0}}}else m=-1;while(0);d=c[738]|0;if(d>>>0>=m>>>0){a=d-m|0;b=c[741]|0;if(a>>>0>15){u=b+m|0;c[741]=u;c[738]=a;c[u+4>>2]=a|1;c[b+d>>2]=a;c[b+4>>2]=m|3}else{c[738]=0;c[741]=0;c[b+4>>2]=d|3;c[b+d+4>>2]=c[b+d+4>>2]|1}u=b+8|0;N=v;return u|0}f=c[739]|0;if(f>>>0>m>>>0){s=f-m|0;c[739]=s;u=c[742]|0;t=u+m|0;c[742]=t;c[t+4>>2]=s|1;c[u+4>>2]=m|3;u=u+8|0;N=v;return u|0}if(!(c[854]|0)){c[856]=4096;c[855]=4096;c[857]=-1;c[858]=-1;c[859]=0;c[847]=0;c[854]=v&-16^1431655768;a=4096}else a=c[856]|0;g=m+48|0;h=m+47|0;j=a+h|0;i=0-a|0;if((j&i)>>>0<=m>>>0){u=0;N=v;return u|0}a=c[846]|0;if(a|0?(l=c[844]|0,(l+(j&i)|0)>>>0<=l>>>0?1:(l+(j&i)|0)>>>0>a>>>0):0){u=0;N=v;return u|0}d:do if(!(c[847]&4)){d=c[742]|0;e:do if(d){b=3392;while(1){l=c[b>>2]|0;if(l>>>0<=d>>>0?(l+(c[b+4>>2]|0)|0)>>>0>d>>>0:0)break;a=c[b+8>>2]|0;if(!a){p=128;break e}else b=a}if((j-f&i)>>>0<2147483647){a=ab(j-f&i|0)|0;if((a|0)==((c[b>>2]|0)+(c[b+4>>2]|0)|0))if((a|0)==(-1|0))a=j-f&i;else{h=j-f&i;f=a;p=145;break d}else{e=a;d=j-f&i;p=136}}else a=0}else p=128;while(0);do if((p|0)==128){b=ab(0)|0;if((b|0)!=(-1|0)?(o=c[855]|0,o=((o+-1&b|0)==0?0:(o+-1+b&0-o)-b|0)+(j&i)|0,n=c[844]|0,o>>>0>m>>>0&o>>>0<2147483647):0){l=c[846]|0;if(l|0?(o+n|0)>>>0<=n>>>0|(o+n|0)>>>0>l>>>0:0){a=0;break}a=ab(o|0)|0;if((a|0)==(b|0)){h=o;f=b;p=145;break d}else{e=a;d=o;p=136}}else a=0}while(0);do if((p|0)==136){b=0-d|0;if(!(g>>>0>d>>>0&(d>>>0<2147483647&(e|0)!=(-1|0))))if((e|0)==(-1|0)){a=0;break}else{h=d;f=e;p=145;break d}a=c[856]|0;a=h-d+a&0-a;if(a>>>0>=2147483647){h=d;f=e;p=145;break d}if((ab(a|0)|0)==(-1|0)){ab(b|0)|0;a=0;break}else{h=a+d|0;f=e;p=145;break d}}while(0);c[847]=c[847]|4;p=143}else{a=0;p=143}while(0);if(((p|0)==143?(j&i)>>>0<2147483647:0)?(s=ab(j&i|0)|0,q=ab(0)|0,r=(q-s|0)>>>0>(m+40|0)>>>0,!((s|0)==(-1|0)|r^1|s>>>0<q>>>0&((s|0)!=(-1|0)&(q|0)!=(-1|0))^1)):0){h=r?q-s|0:a;f=s;p=145}if((p|0)==145){a=(c[844]|0)+h|0;c[844]=a;if(a>>>0>(c[845]|0)>>>0)c[845]=a;j=c[742]|0;f:do if(j){a=3392;while(1){b=c[a>>2]|0;d=c[a+4>>2]|0;if((f|0)==(b+d|0)){p=154;break}e=c[a+8>>2]|0;if(!e)break;else a=e}if(((p|0)==154?(t=a+4|0,(c[a+12>>2]&8|0)==0):0)?f>>>0>j>>>0&b>>>0<=j>>>0:0){c[t>>2]=d+h;u=(c[739]|0)+h|0;t=(j+8&7|0)==0?0:0-(j+8)&7;c[742]=j+t;c[739]=u-t;c[j+t+4>>2]=u-t|1;c[j+u+4>>2]=40;c[743]=c[858];break}if(f>>>0<(c[740]|0)>>>0)c[740]=f;d=f+h|0;a=3392;while(1){if((c[a>>2]|0)==(d|0)){p=162;break}b=c[a+8>>2]|0;if(!b)break;else a=b}if((p|0)==162?(c[a+12>>2]&8|0)==0:0){c[a>>2]=f;l=a+4|0;c[l>>2]=(c[l>>2]|0)+h;l=f+8|0;l=f+((l&7|0)==0?0:0-l&7)|0;a=d+((d+8&7|0)==0?0:0-(d+8)&7)|0;k=l+m|0;i=a-l-m|0;c[l+4>>2]=m|3;g:do if((j|0)==(a|0)){u=(c[739]|0)+i|0;c[739]=u;c[742]=k;c[k+4>>2]=u|1}else{if((c[741]|0)==(a|0)){u=(c[738]|0)+i|0;c[738]=u;c[741]=k;c[k+4>>2]=u|1;c[k+u>>2]=u;break}h=c[a+4>>2]|0;if((h&3|0)==1){h:do if(h>>>0<256){b=c[a+8>>2]|0;d=c[a+12>>2]|0;if((d|0)==(b|0)){c[736]=c[736]&~(1<<(h>>>3));break}else{c[b+12>>2]=d;c[d+8>>2]=b;break}}else{g=c[a+24>>2]|0;b=c[a+12>>2]|0;do if((b|0)==(a|0)){b=c[a+16+4>>2]|0;if(!b){b=c[a+16>>2]|0;if(!b){b=0;break}else d=a+16|0}else d=a+16+4|0;while(1){f=b+20|0;e=c[f>>2]|0;if(!e){f=b+16|0;e=c[f>>2]|0;if(!e)break;else{b=e;d=f}}else{b=e;d=f}}c[d>>2]=0}else{u=c[a+8>>2]|0;c[u+12>>2]=b;c[b+8>>2]=u}while(0);if(!g)break;d=c[a+28>>2]|0;do if((c[3248+(d<<2)>>2]|0)!=(a|0)){c[((c[g+16>>2]|0)==(a|0)?g+16|0:g+20|0)>>2]=b;if(!b)break h}else{c[3248+(d<<2)>>2]=b;if(b|0)break;c[737]=c[737]&~(1<<d);break h}while(0);c[b+24>>2]=g;d=c[a+16>>2]|0;if(d|0){c[b+16>>2]=d;c[d+24>>2]=b}d=c[a+16+4>>2]|0;if(!d)break;c[b+20>>2]=d;c[d+24>>2]=b}while(0);a=a+(h&-8)|0;f=(h&-8)+i|0}else f=i;d=a+4|0;c[d>>2]=c[d>>2]&-2;c[k+4>>2]=f|1;c[k+f>>2]=f;d=f>>>3;if(f>>>0<256){a=c[736]|0;if(!(a&1<<d)){c[736]=a|1<<d;a=2984+(d<<1<<2)|0;b=2984+(d<<1<<2)+8|0}else{a=c[2984+(d<<1<<2)+8>>2]|0;b=2984+(d<<1<<2)+8|0}c[b>>2]=k;c[a+12>>2]=k;c[k+8>>2]=a;c[k+12>>2]=2984+(d<<1<<2);break}a=f>>>8;do if(!a)e=0;else{if(f>>>0>16777215){e=31;break}e=a<<((a+1048320|0)>>>16&8)<<(((a<<((a+1048320|0)>>>16&8))+520192|0)>>>16&4);e=14-(((a<<((a+1048320|0)>>>16&8))+520192|0)>>>16&4|(a+1048320|0)>>>16&8|(e+245760|0)>>>16&2)+(e<<((e+245760|0)>>>16&2)>>>15)|0;e=f>>>(e+7|0)&1|e<<1}while(0);a=3248+(e<<2)|0;c[k+28>>2]=e;c[k+16+4>>2]=0;c[k+16>>2]=0;b=c[737]|0;d=1<<e;if(!(b&d)){c[737]=b|d;c[a>>2]=k;c[k+24>>2]=a;c[k+12>>2]=k;c[k+8>>2]=k;break}a=c[a>>2]|0;i:do if((c[a+4>>2]&-8|0)!=(f|0)){e=f<<((e|0)==31?0:25-(e>>>1)|0);while(1){d=a+16+(e>>>31<<2)|0;b=c[d>>2]|0;if(!b)break;if((c[b+4>>2]&-8|0)==(f|0)){a=b;break i}else{e=e<<1;a=b}}c[d>>2]=k;c[k+24>>2]=a;c[k+12>>2]=k;c[k+8>>2]=k;break g}while(0);t=a+8|0;u=c[t>>2]|0;c[u+12>>2]=k;c[t>>2]=k;c[k+8>>2]=u;c[k+12>>2]=a;c[k+24>>2]=0}while(0);u=l+8|0;N=v;return u|0}a=3392;while(1){b=c[a>>2]|0;if(b>>>0<=j>>>0?(u=b+(c[a+4>>2]|0)|0,u>>>0>j>>>0):0)break;a=c[a+8>>2]|0}g=u+-47+((u+-47+8&7|0)==0?0:0-(u+-47+8)&7)|0;g=g>>>0<(j+16|0)>>>0?j:g;a=h+-40|0;s=f+8|0;s=(s&7|0)==0?0:0-s&7;t=f+s|0;c[742]=t;c[739]=a-s;c[t+4>>2]=a-s|1;c[f+a+4>>2]=40;c[743]=c[858];c[g+4>>2]=27;c[g+8>>2]=c[848];c[g+8+4>>2]=c[849];c[g+8+8>>2]=c[850];c[g+8+12>>2]=c[851];c[848]=f;c[849]=h;c[851]=0;c[850]=g+8;a=g+24|0;do{t=a;a=a+4|0;c[a>>2]=7}while((t+8|0)>>>0<u>>>0);if((g|0)!=(j|0)){c[g+4>>2]=c[g+4>>2]&-2;c[j+4>>2]=g-j|1;c[g>>2]=g-j;if((g-j|0)>>>0<256){d=2984+((g-j|0)>>>3<<1<<2)|0;a=c[736]|0;if(!(a&1<<((g-j|0)>>>3))){c[736]=a|1<<((g-j|0)>>>3);a=d;b=d+8|0}else{a=c[d+8>>2]|0;b=d+8|0}c[b>>2]=j;c[a+12>>2]=j;c[j+8>>2]=a;c[j+12>>2]=d;break}if((g-j|0)>>>8)if((g-j|0)>>>0>16777215)e=31;else{e=(g-j|0)>>>8<<((((g-j|0)>>>8)+1048320|0)>>>16&8);e=14-((e+520192|0)>>>16&4|(((g-j|0)>>>8)+1048320|0)>>>16&8|((e<<((e+520192|0)>>>16&4))+245760|0)>>>16&2)+(e<<((e+520192|0)>>>16&4)<<(((e<<((e+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;e=(g-j|0)>>>(e+7|0)&1|e<<1}else e=0;a=3248+(e<<2)|0;c[j+28>>2]=e;c[j+20>>2]=0;c[j+16>>2]=0;b=c[737]|0;d=1<<e;if(!(b&d)){c[737]=b|d;c[a>>2]=j;c[j+24>>2]=a;c[j+12>>2]=j;c[j+8>>2]=j;break}a=c[a>>2]|0;j:do if((c[a+4>>2]&-8|0)!=(g-j|0)){e=g-j<<((e|0)==31?0:25-(e>>>1)|0);while(1){d=a+16+(e>>>31<<2)|0;b=c[d>>2]|0;if(!b)break;if((c[b+4>>2]&-8|0)==(g-j|0)){a=b;break j}else{e=e<<1;a=b}}c[d>>2]=j;c[j+24>>2]=a;c[j+12>>2]=j;c[j+8>>2]=j;break f}while(0);t=a+8|0;u=c[t>>2]|0;c[u+12>>2]=j;c[t>>2]=j;c[j+8>>2]=u;c[j+12>>2]=a;c[j+24>>2]=0}}else{u=c[740]|0;if((u|0)==0|f>>>0<u>>>0)c[740]=f;c[848]=f;c[849]=h;c[851]=0;c[745]=c[854];c[744]=-1;c[749]=2984;c[748]=2984;c[751]=2992;c[750]=2992;c[753]=3e3;c[752]=3e3;c[755]=3008;c[754]=3008;c[757]=3016;c[756]=3016;c[759]=3024;c[758]=3024;c[761]=3032;c[760]=3032;c[763]=3040;c[762]=3040;c[765]=3048;c[764]=3048;c[767]=3056;c[766]=3056;c[769]=3064;c[768]=3064;c[771]=3072;c[770]=3072;c[773]=3080;c[772]=3080;c[775]=3088;c[774]=3088;c[777]=3096;c[776]=3096;c[779]=3104;c[778]=3104;c[781]=3112;c[780]=3112;c[783]=3120;c[782]=3120;c[785]=3128;c[784]=3128;c[787]=3136;c[786]=3136;c[789]=3144;c[788]=3144;c[791]=3152;c[790]=3152;c[793]=3160;c[792]=3160;c[795]=3168;c[794]=3168;c[797]=3176;c[796]=3176;c[799]=3184;c[798]=3184;c[801]=3192;c[800]=3192;c[803]=3200;c[802]=3200;c[805]=3208;c[804]=3208;c[807]=3216;c[806]=3216;c[809]=3224;c[808]=3224;c[811]=3232;c[810]=3232;u=h+-40|0;s=f+8|0;s=(s&7|0)==0?0:0-s&7;t=f+s|0;c[742]=t;c[739]=u-s;c[t+4>>2]=u-s|1;c[f+u+4>>2]=40;c[743]=c[858]}while(0);a=c[739]|0;if(a>>>0>m>>>0){s=a-m|0;c[739]=s;u=c[742]|0;t=u+m|0;c[742]=t;c[t+4>>2]=s|1;c[u+4>>2]=m|3;u=u+8|0;N=v;return u|0}}c[(ka()|0)>>2]=12;u=0;N=v;return u|0}function Pa(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0;if(!a)return;b=c[740]|0;d=c[a+-4>>2]|0;j=a+-8+(d&-8)|0;do if(!(d&1)){e=c[a+-8>>2]|0;if(!(d&3))return;h=a+-8+(0-e)|0;g=e+(d&-8)|0;if(h>>>0<b>>>0)return;if((c[741]|0)==(h|0)){b=c[j+4>>2]|0;if((b&3|0)!=3){i=h;b=g;break}c[738]=g;c[j+4>>2]=b&-2;c[h+4>>2]=g|1;c[h+g>>2]=g;return}if(e>>>0<256){b=c[h+8>>2]|0;a=c[h+12>>2]|0;if((a|0)==(b|0)){c[736]=c[736]&~(1<<(e>>>3));i=h;b=g;break}else{c[b+12>>2]=a;c[a+8>>2]=b;i=h;b=g;break}}f=c[h+24>>2]|0;b=c[h+12>>2]|0;do if((b|0)==(h|0)){b=c[h+16+4>>2]|0;if(!b){b=c[h+16>>2]|0;if(!b){b=0;break}else a=h+16|0}else a=h+16+4|0;while(1){e=b+20|0;d=c[e>>2]|0;if(!d){e=b+16|0;d=c[e>>2]|0;if(!d)break;else{b=d;a=e}}else{b=d;a=e}}c[a>>2]=0}else{i=c[h+8>>2]|0;c[i+12>>2]=b;c[b+8>>2]=i}while(0);if(f){a=c[h+28>>2]|0;if((c[3248+(a<<2)>>2]|0)==(h|0)){c[3248+(a<<2)>>2]=b;if(!b){c[737]=c[737]&~(1<<a);i=h;b=g;break}}else{c[((c[f+16>>2]|0)==(h|0)?f+16|0:f+20|0)>>2]=b;if(!b){i=h;b=g;break}}c[b+24>>2]=f;a=c[h+16>>2]|0;if(a|0){c[b+16>>2]=a;c[a+24>>2]=b}a=c[h+16+4>>2]|0;if(a){c[b+20>>2]=a;c[a+24>>2]=b;i=h;b=g}else{i=h;b=g}}else{i=h;b=g}}else{i=a+-8|0;b=d&-8;h=a+-8|0}while(0);if(h>>>0>=j>>>0)return;d=c[j+4>>2]|0;if(!(d&1))return;if(!(d&2)){if((c[742]|0)==(j|0)){j=(c[739]|0)+b|0;c[739]=j;c[742]=i;c[i+4>>2]=j|1;if((i|0)!=(c[741]|0))return;c[741]=0;c[738]=0;return}if((c[741]|0)==(j|0)){j=(c[738]|0)+b|0;c[738]=j;c[741]=h;c[i+4>>2]=j|1;c[h+j>>2]=j;return}f=(d&-8)+b|0;do if(d>>>0<256){a=c[j+8>>2]|0;b=c[j+12>>2]|0;if((b|0)==(a|0)){c[736]=c[736]&~(1<<(d>>>3));break}else{c[a+12>>2]=b;c[b+8>>2]=a;break}}else{g=c[j+24>>2]|0;b=c[j+12>>2]|0;do if((b|0)==(j|0)){b=c[j+16+4>>2]|0;if(!b){b=c[j+16>>2]|0;if(!b){a=0;break}else a=j+16|0}else a=j+16+4|0;while(1){e=b+20|0;d=c[e>>2]|0;if(!d){e=b+16|0;d=c[e>>2]|0;if(!d)break;else{b=d;a=e}}else{b=d;a=e}}c[a>>2]=0;a=b}else{a=c[j+8>>2]|0;c[a+12>>2]=b;c[b+8>>2]=a;a=b}while(0);if(g|0){b=c[j+28>>2]|0;if((c[3248+(b<<2)>>2]|0)==(j|0)){c[3248+(b<<2)>>2]=a;if(!a){c[737]=c[737]&~(1<<b);break}}else{c[((c[g+16>>2]|0)==(j|0)?g+16|0:g+20|0)>>2]=a;if(!a)break}c[a+24>>2]=g;b=c[j+16>>2]|0;if(b|0){c[a+16>>2]=b;c[b+24>>2]=a}b=c[j+16+4>>2]|0;if(b|0){c[a+20>>2]=b;c[b+24>>2]=a}}}while(0);c[i+4>>2]=f|1;c[h+f>>2]=f;if((i|0)==(c[741]|0)){c[738]=f;return}}else{c[j+4>>2]=d&-2;c[i+4>>2]=b|1;c[h+b>>2]=b;f=b}d=f>>>3;if(f>>>0<256){b=c[736]|0;if(!(b&1<<d)){c[736]=b|1<<d;b=2984+(d<<1<<2)|0;a=2984+(d<<1<<2)+8|0}else{b=c[2984+(d<<1<<2)+8>>2]|0;a=2984+(d<<1<<2)+8|0}c[a>>2]=i;c[b+12>>2]=i;c[i+8>>2]=b;c[i+12>>2]=2984+(d<<1<<2);return}b=f>>>8;if(b)if(f>>>0>16777215)e=31;else{e=b<<((b+1048320|0)>>>16&8)<<(((b<<((b+1048320|0)>>>16&8))+520192|0)>>>16&4);e=14-(((b<<((b+1048320|0)>>>16&8))+520192|0)>>>16&4|(b+1048320|0)>>>16&8|(e+245760|0)>>>16&2)+(e<<((e+245760|0)>>>16&2)>>>15)|0;e=f>>>(e+7|0)&1|e<<1}else e=0;b=3248+(e<<2)|0;c[i+28>>2]=e;c[i+20>>2]=0;c[i+16>>2]=0;a=c[737]|0;d=1<<e;a:do if(!(a&d)){c[737]=a|d;c[b>>2]=i;c[i+24>>2]=b;c[i+12>>2]=i;c[i+8>>2]=i}else{b=c[b>>2]|0;b:do if((c[b+4>>2]&-8|0)!=(f|0)){e=f<<((e|0)==31?0:25-(e>>>1)|0);while(1){d=b+16+(e>>>31<<2)|0;a=c[d>>2]|0;if(!a)break;if((c[a+4>>2]&-8|0)==(f|0)){b=a;break b}else{e=e<<1;b=a}}c[d>>2]=i;c[i+24>>2]=b;c[i+12>>2]=i;c[i+8>>2]=i;break a}while(0);h=b+8|0;j=c[h>>2]|0;c[j+12>>2]=i;c[h>>2]=i;c[i+8>>2]=j;c[i+12>>2]=b;c[i+24>>2]=0}while(0);j=(c[744]|0)+-1|0;c[744]=j;if(j|0)return;b=3400;while(1){b=c[b>>2]|0;if(!b)break;else b=b+8|0}c[744]=-1;return}function Qa(a,b){a=a|0;b=b|0;var c=0,d=0,e=0;c=r(b&65535,a&65535)|0;e=(c>>>16)+(r(b&65535,a>>>16)|0)|0;d=r(b>>>16,a&65535)|0;return (u((e>>>16)+(r(b>>>16,a>>>16)|0)+(((e&65535)+d|0)>>>16)|0),e+d<<16|c&65535|0)|0}function Ra(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0,f=0;e=Qa(a,c)|0;f=v()|0;return (u((r(b,c)|0)+(r(d,a)|0)+f|f&0|0),e|0|0)|0}function Sa(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return (u(b+d+(a+c>>>0>>>0<a>>>0|0)>>>0|0),a+c>>>0|0)|0}function Ta(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;d=b-d-(c>>>0>a>>>0|0)>>>0;return (u(d|0),a-c>>>0|0)|0}function Ua(a){a=a|0;return (a?31-(s(a^a-1)|0)|0:32)|0}function Va(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;if(!b)if(!e){if(f|0){c[f>>2]=(a>>>0)%(d>>>0);c[f+4>>2]=0}e=0;f=(a>>>0)/(d>>>0)>>>0;return (u(e|0),f)|0}else{if(!f){e=0;f=0;return (u(e|0),f)|0}c[f>>2]=a|0;c[f+4>>2]=b&0;e=0;f=0;return (u(e|0),f)|0}do if(d){if(e|0){h=(s(e|0)|0)-(s(b|0)|0)|0;if(h>>>0<=31){n=h+1|0;i=a>>>((h+1|0)>>>0)&h-31>>31|b<<31-h;m=b>>>((h+1|0)>>>0)&h-31>>31;g=0;h=a<<31-h;break}if(!f){e=0;f=0;return (u(e|0),f)|0}c[f>>2]=a|0;c[f+4>>2]=b|b&0;e=0;f=0;return (u(e|0),f)|0}if(d-1&d|0){h=(s(d|0)|0)+33-(s(b|0)|0)|0;n=h;i=32-h-1>>31&b>>>((h-32|0)>>>0)|(b<<32-h|a>>>(h>>>0))&h-32>>31;m=h-32>>31&b>>>(h>>>0);g=a<<64-h&32-h>>31;h=(b<<64-h|a>>>((h-32|0)>>>0))&32-h>>31|a<<32-h&h-33>>31;break}if(f|0){c[f>>2]=d-1&a;c[f+4>>2]=0}if((d|0)==1){e=b|b&0;f=a|0|0;return (u(e|0),f)|0}else{f=Ua(d|0)|0;e=b>>>(f>>>0)|0;f=b<<32-f|a>>>(f>>>0)|0;return (u(e|0),f)|0}}else{if(!e){if(f|0){c[f>>2]=(b>>>0)%(d>>>0);c[f+4>>2]=0}e=0;f=(b>>>0)/(d>>>0)>>>0;return (u(e|0),f)|0}if(!a){if(f|0){c[f>>2]=0;c[f+4>>2]=(b>>>0)%(e>>>0)}d=0;f=(b>>>0)/(e>>>0)>>>0;return (u(d|0),f)|0}if(!(e-1&e)){if(f|0){c[f>>2]=a|0;c[f+4>>2]=e-1&b|b&0}d=0;f=b>>>((Ua(e|0)|0)>>>0);return (u(d|0),f)|0}h=(s(e|0)|0)-(s(b|0)|0)|0;if(h>>>0<=30){n=h+1|0;i=b<<31-h|a>>>((h+1|0)>>>0);m=b>>>((h+1|0)>>>0);g=0;h=a<<31-h;break}if(!f){e=0;f=0;return (u(e|0),f)|0}c[f>>2]=a|0;c[f+4>>2]=b|b&0;e=0;f=0;return (u(e|0),f)|0}while(0);if(!n){j=h;b=m;a=0;h=0}else{k=Sa(d|0|0,e|e&0|0,-1,-1)|0;l=v()|0;j=h;b=m;a=n;h=0;do{p=j;j=g>>>31|j<<1;g=h|g<<1;p=i<<1|p>>>31|0;o=i>>>31|b<<1|0;Ta(k|0,l|0,p|0,o|0)|0;n=v()|0;m=n>>31|((n|0)<0?-1:0)<<1;h=m&1;i=Ta(p|0,o|0,m&(d|0)|0,(((n|0)<0?-1:0)>>31|((n|0)<0?-1:0)<<1)&(e|e&0)|0)|0;b=v()|0;a=a-1|0}while((a|0)!=0);a=0}if(f|0){c[f>>2]=i;c[f+4>>2]=b}o=(g|0)>>>31|j<<1|(0<<1|g>>>31)&0|a;p=(g<<1|0>>>31)&-2|h;return (u(o|0),p)|0}function Wa(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return Va(a,b,c,d,0)|0}function Xa(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){u(b>>>c|0);return a>>>c|(b&(1<<c)-1)<<32-c}u(0);return b>>>c-32|0}function Ya(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){u(b<<c|(a&(1<<c)-1<<32-c)>>>32-c|0);return a<<c}u(a<<c-32|0);return 0}function Za(a){a=a|0;return (a&255)<<24|(a>>8&255)<<16|(a>>16&255)<<8|a>>>24|0}function _a(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;if((e|0)>=8192){D(b|0,d|0,e|0)|0;return b|0}h=b|0;g=b+e|0;if((b&3)==(d&3)){while(b&3){if(!e)return h|0;a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0;e=e-1|0}e=g&-4|0;f=e-64|0;while((b|0)<=(f|0)){c[b>>2]=c[d>>2];c[b+4>>2]=c[d+4>>2];c[b+8>>2]=c[d+8>>2];c[b+12>>2]=c[d+12>>2];c[b+16>>2]=c[d+16>>2];c[b+20>>2]=c[d+20>>2];c[b+24>>2]=c[d+24>>2];c[b+28>>2]=c[d+28>>2];c[b+32>>2]=c[d+32>>2];c[b+36>>2]=c[d+36>>2];c[b+40>>2]=c[d+40>>2];c[b+44>>2]=c[d+44>>2];c[b+48>>2]=c[d+48>>2];c[b+52>>2]=c[d+52>>2];c[b+56>>2]=c[d+56>>2];c[b+60>>2]=c[d+60>>2];b=b+64|0;d=d+64|0}while((b|0)<(e|0)){c[b>>2]=c[d>>2];b=b+4|0;d=d+4|0}}else{e=g-4|0;while((b|0)<(e|0)){a[b>>0]=a[d>>0]|0;a[b+1>>0]=a[d+1>>0]|0;a[b+2>>0]=a[d+2>>0]|0;a[b+3>>0]=a[d+3>>0]|0;b=b+4|0;d=d+4|0}}while((b|0)<(g|0)){a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0}return h|0}function $a(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0;f=b+e|0;d=d&255;if((e|0)>=67){while(b&3){a[b>>0]=d;b=b+1|0}g=d|d<<8|d<<16|d<<24;while((b|0)<=((f&-4)-64|0)){c[b>>2]=g;c[b+4>>2]=g;c[b+8>>2]=g;c[b+12>>2]=g;c[b+16>>2]=g;c[b+20>>2]=g;c[b+24>>2]=g;c[b+28>>2]=g;c[b+32>>2]=g;c[b+36>>2]=g;c[b+40>>2]=g;c[b+44>>2]=g;c[b+48>>2]=g;c[b+52>>2]=g;c[b+56>>2]=g;c[b+60>>2]=g;b=b+64|0}while((b|0)<(f&-4|0)){c[b>>2]=g;b=b+4|0}}while((b|0)<(f|0)){a[b>>0]=d;b=b+1|0}return f-e|0}function ab(a){a=a|0;var b=0,d=0;d=C()|0;b=c[i>>2]|0;if((a|0)>0&(b+a|0)<(b|0)|(b+a|0)<0){H(b+a|0)|0;w(12);return -1}if((b+a|0)>(d|0))if(!(E(b+a|0)|0)){w(12);return -1}c[i>>2]=b+a;return b|0}function bb(a,b){a=a|0;b=b|0;return Q[a&1](b|0)|0}function cb(a,b,c,d,e,f,g){a=a|0;b=b|0;c=+c;d=d|0;e=e|0;f=f|0;g=g|0;return R[a&1](b|0,+c,d|0,e|0,f|0,g|0)|0}function db(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return S[a&1](b|0,c|0,d|0)|0}function eb(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;return T[a&1](b|0,c|0,d|0,e|0)|0}function fb(a,b,c){a=a|0;b=b|0;c=c|0;U[a&1](b|0,c|0)}function gb(a){a=a|0;t(0);return 0}function hb(a,b,c,d,e,f){a=a|0;b=+b;c=c|0;d=d|0;e=e|0;f=f|0;t(1);return 0}function ib(a,b,c){a=a|0;b=b|0;c=c|0;t(2);return 0}function jb(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;t(3);return 0}function kb(a,b){a=a|0;b=b|0;t(4)}\n\n// EMSCRIPTEN_END_FUNCS\nvar Q=[gb,ga];var R=[hb,xa];var S=[ib,ha];var T=[jb,ia];var U=[kb,ya];return{___errno_location:ka,___muldi3:Ra,___udivdi3:Wa,_abort_run:aa,_bitshift64Lshr:Xa,_bitshift64Shl:Ya,_enable_debug:ba,_free:Pa,_i64Add:Sa,_i64Subtract:Ta,_llvm_bswap_i32:Za,_malloc:Oa,_memcpy:_a,_memset:$a,_ping:_,_read_register:ca,_reset:ea,_run:$,_sbrk:ab,_set_stop_address:Z,_write_register:da,dynCall_ii:bb,dynCall_iidiiii:cb,dynCall_iiii:db,dynCall_iiiii:eb,dynCall_vii:fb,establishStackSpace:Y,stackAlloc:V,stackRestore:X,stackSave:W}})\n\n\n// EMSCRIPTEN_END_ASM\n(asmGlobalArg,asmLibraryArg,buffer);var ___errno_location=Module[\"___errno_location\"]=asm[\"___errno_location\"];var ___muldi3=Module[\"___muldi3\"]=asm[\"___muldi3\"];var ___udivdi3=Module[\"___udivdi3\"]=asm[\"___udivdi3\"];var _abort_run=Module[\"_abort_run\"]=asm[\"_abort_run\"];var _bitshift64Lshr=Module[\"_bitshift64Lshr\"]=asm[\"_bitshift64Lshr\"];var _bitshift64Shl=Module[\"_bitshift64Shl\"]=asm[\"_bitshift64Shl\"];var _enable_debug=Module[\"_enable_debug\"]=asm[\"_enable_debug\"];var _free=Module[\"_free\"]=asm[\"_free\"];var _i64Add=Module[\"_i64Add\"]=asm[\"_i64Add\"];var _i64Subtract=Module[\"_i64Subtract\"]=asm[\"_i64Subtract\"];var _llvm_bswap_i32=Module[\"_llvm_bswap_i32\"]=asm[\"_llvm_bswap_i32\"];var _malloc=Module[\"_malloc\"]=asm[\"_malloc\"];var _memcpy=Module[\"_memcpy\"]=asm[\"_memcpy\"];var _memset=Module[\"_memset\"]=asm[\"_memset\"];var _ping=Module[\"_ping\"]=asm[\"_ping\"];var _read_register=Module[\"_read_register\"]=asm[\"_read_register\"];var _reset=Module[\"_reset\"]=asm[\"_reset\"];var _run=Module[\"_run\"]=asm[\"_run\"];var _sbrk=Module[\"_sbrk\"]=asm[\"_sbrk\"];var _set_stop_address=Module[\"_set_stop_address\"]=asm[\"_set_stop_address\"];var _write_register=Module[\"_write_register\"]=asm[\"_write_register\"];var establishStackSpace=Module[\"establishStackSpace\"]=asm[\"establishStackSpace\"];var stackAlloc=Module[\"stackAlloc\"]=asm[\"stackAlloc\"];var stackRestore=Module[\"stackRestore\"]=asm[\"stackRestore\"];var stackSave=Module[\"stackSave\"]=asm[\"stackSave\"];var dynCall_ii=Module[\"dynCall_ii\"]=asm[\"dynCall_ii\"];var dynCall_iidiiii=Module[\"dynCall_iidiiii\"]=asm[\"dynCall_iidiiii\"];var dynCall_iiii=Module[\"dynCall_iiii\"]=asm[\"dynCall_iiii\"];var dynCall_iiiii=Module[\"dynCall_iiiii\"]=asm[\"dynCall_iiiii\"];var dynCall_vii=Module[\"dynCall_vii\"]=asm[\"dynCall_vii\"];Module[\"asm\"]=asm;Module[\"ccall\"]=ccall;if(memoryInitializer){if(!isDataURI(memoryInitializer)){memoryInitializer=locateFile(memoryInitializer)}if(ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=readBinary(memoryInitializer);HEAPU8.set(data,GLOBAL_BASE)}else{addRunDependency(\"memory initializer\");var applyMemoryInitializer=function(data){if(data.byteLength)data=new Uint8Array(data);HEAPU8.set(data,GLOBAL_BASE);if(Module[\"memoryInitializerRequest\"])delete Module[\"memoryInitializerRequest\"].response;removeRunDependency(\"memory initializer\")};var doBrowserLoad=function(){readAsync(memoryInitializer,applyMemoryInitializer,function(){throw\"could not load memory initializer \"+memoryInitializer})};var memoryInitializerBytes=tryParseAsDataURI(memoryInitializer);if(memoryInitializerBytes){applyMemoryInitializer(memoryInitializerBytes.buffer)}else if(Module[\"memoryInitializerRequest\"]){var useRequest=function(){var request=Module[\"memoryInitializerRequest\"];var response=request.response;if(request.status!==200&&request.status!==0){var data=tryParseAsDataURI(Module[\"memoryInitializerRequestURL\"]);if(data){response=data.buffer}else{console.warn(\"a problem seems to have happened with Module.memoryInitializerRequest, status: \"+request.status+\", retrying \"+memoryInitializer);doBrowserLoad();return}}applyMemoryInitializer(response)};if(Module[\"memoryInitializerRequest\"].response){setTimeout(useRequest,0)}else{Module[\"memoryInitializerRequest\"].addEventListener(\"load\",useRequest)}}else{doBrowserLoad()}}}var calledRun;Module[\"then\"]=function(func){if(calledRun){func(Module)}else{var old=Module[\"onRuntimeInitialized\"];Module[\"onRuntimeInitialized\"]=function(){if(old)old();func(Module)}}return Module};function ExitStatus(status){this.name=\"ExitStatus\";this.message=\"Program terminated with exit(\"+status+\")\";this.status=status}dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0)return;function doRun(){if(calledRun)return;calledRun=true;if(ABORT)return;initRuntime();preMain();if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}Module[\"run\"]=run;function exit(status,implicit){if(implicit&&noExitRuntime&&status===0){return}if(noExitRuntime){}else{ABORT=true;EXITSTATUS=status;exitRuntime();if(Module[\"onExit\"])Module[\"onExit\"](status)}quit_(status,new ExitStatus(status))}function abort(what){if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}what+=\"\";out(what);err(what);ABORT=true;EXITSTATUS=1;throw\"abort(\"+what+\"). Build with -s ASSERTIONS=1 for more info.\"}Module[\"abort\"]=abort;if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}noExitRuntime=true;run();\n\n\n\n  return Module\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n      module.exports = Module;\n    else if (typeof define === 'function' && define['amd'])\n      define([], function() { return Module; });\n    else if (typeof exports === 'object')\n      exports[\"Module\"] = Module;\n    module.exports = Module;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar nativeThumbulator = require(\"./native/thumbulator\");\nvar Thumbulator = (function () {\n    function Thumbulator(bus, options) {\n        if (options === void 0) { options = {}; }\n        this._module = null;\n        this._options = null;\n        this._options = tslib_1.__assign({ stopAddress: 0 }, options);\n        this._module = nativeThumbulator(this._getApi(bus, this._options));\n        this.enableDebug(false);\n    }\n    Thumbulator.prototype.init = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                this._module._set_stop_address(this._options.stopAddress);\n                return [2];\n            });\n        });\n    };\n    Thumbulator.prototype.ping = function () {\n        return this._module.ccall('ping', 'string', [], []);\n    };\n    Thumbulator.prototype.run = function (cycles) {\n        return this._module._run(cycles);\n    };\n    Thumbulator.prototype.abort = function () {\n        this._module._abort_run();\n    };\n    Thumbulator.prototype.enableDebug = function (enable) {\n        this._module._enable_debug(enable ? 1 : 0);\n    };\n    Thumbulator.prototype.reset = function () {\n        this._module._reset();\n    };\n    Thumbulator.prototype.readRegister = function (register) {\n        if (register < 0 || register > 15) {\n            throw new Error(\"illegal thumb register \" + register);\n        }\n        return this._module._read_register(register);\n    };\n    Thumbulator.prototype.writeRegister = function (register, value) {\n        if (register < 0 || register > 15) {\n            throw new Error(\"illegal thumb register \" + register);\n        }\n        this._module._write_register(register, value);\n    };\n    Thumbulator.prototype._getApi = function (bus, options) {\n        var printer = options.printer || (function (data) { return console.log('thumbulator: ' + data); });\n        return {\n            print: printer,\n            printErr: printer,\n            trapOnInstructionFetch: options.trapOnInstructionFetch || (function () { return 0; }),\n            trapOnBx32: options.trapOnBx32 || (function () { return 3; }),\n            busRead16: bus.read16,\n            busRead32: bus.read32 || (function (address) { return (bus.read16(address) & 0xffff) | (bus.read16(address + 2) << 16); }),\n            busWrite16: bus.write16,\n            busWrite32: bus.write32 ||\n                (function (address, value) { return (bus.write16(address, value & 0xffff), bus.write16(address + 2, value >>> 16)); })\n        };\n    };\n    return Thumbulator;\n}());\nexports.default = Thumbulator;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nfunction encodeWithPrefix(value: number, width?: number, signed = true, prefix = ''): string {\n    if (!signed && value < 0) {\n        return (\n            encodeWithPrefix(value >>> 16, width && width > 8 ? width - 4 : 4, false, prefix) +\n            encodeWithPrefix(value & 0xffff, 4)\n        );\n    }\n\n    let result = Math.abs(value)\n        .toString(16)\n        .toUpperCase();\n\n    if (typeof width !== 'undefined') {\n        while (result.length < width) {\n            result = '0' + result;\n        }\n    }\n\n    return (value < 0 ? '-' : '') + prefix + result;\n}\n\nexport function encode(value: number, width?: number, signed = true): string {\n    return encodeWithPrefix(value, width, signed, '$');\n}\n\nexport function decode(value: string): number {\n    const sign = value.match(/^-/) ? -1 : 1;\n\n    let stripped = value.replace(/^-/, '').toUpperCase();\n\n    if (stripped.match(/^0X[0-9A-F]+$/)) {\n        stripped = stripped.replace(/^0x/, '');\n    } else if (stripped.match(/^\\$[0-9A-F]+$/)) {\n        stripped = stripped.replace(/^\\$/, '');\n    } else {\n        throw new TypeError('invalid hex number ' + value);\n    }\n\n    return sign * parseInt(stripped, 16);\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport Thumbulator from 'thumbulator.ts';\nimport { Event } from 'microevent.ts';\n\nimport { encode as hex } from '../../../../tools/hex';\n\nconst enum CONST {\n    returnAddress = 0x8004\n}\n\nfunction hostIsLittleEndian(): boolean {\n    const buffer8 = new Uint8Array([1, 2, 3, 4]),\n        buffer32 = new Uint32Array(buffer8.buffer);\n\n    return buffer32[0] === 0x04030201;\n}\n\nclass Soc {\n    constructor(blx32Handler: Soc.Blx32Handler = () => Thumbulator.TrapReason.bxLeaveThumb) {\n        if (hostIsLittleEndian()) {\n            // If we are on a little endian host, we use typed arrays to take advantage of\n            // hardware word access\n            this.getRom16 = address => this._rom16[address >>> 1];\n            this.getRom32 = address => this._rom32[address >>> 2];\n            this.getRam16 = address => this._ram16[address >>> 1];\n            this.getRam32 = address => this._ram32[address >>> 2];\n            this.setRam16 = (address, value) => (this._ram16[address >>> 1] = value);\n            this.setRam32 = (address, value) => (this._ram32[address >>> 2] = value);\n        } else {\n            // On big endian, we dance the endianness shuffle ourselves (DataView is dead slow)\n            this.getRom16 = address => this._rom8[address] | (this._rom8[address + 1] << 8);\n            this.getRom32 = address =>\n                this._rom8[address] |\n                (this._rom8[address + 1] << 8) |\n                (this._rom8[address + 2] << 16) |\n                (this._rom8[address + 3] << 24);\n            this.getRam16 = address => this._ram8[address] | (this._ram8[address + 1] << 8);\n            this.getRam32 = address =>\n                this._ram8[address] |\n                (this._ram8[address + 1] << 8) |\n                (this._ram8[address + 2] << 16) |\n                (this._ram8[address + 3] << 24);\n            this.setRam16 = (address, value) => {\n                this._ram8[address] = value & 0xff;\n                this._ram8[address + 1] = (value >>> 8) & 0xff;\n            };\n            this.setRam32 = (address, value) => {\n                this._ram8[address] = value & 0xff;\n                this._ram8[address + 1] = (value >>> 8) & 0xff;\n                this._ram8[address + 2] = (value >>> 16) & 0xff;\n                this._ram8[address + 3] = (value >>> 24) & 0xff;\n            };\n        }\n\n        // ARM ROM: the whole ROM image, suitable for 16bit and 32bit access\n        this._rom8 = new Uint8Array(this._romBuffer);\n        this._rom16 = new Uint16Array(this._romBuffer);\n        this._rom32 = new Uint32Array(this._romBuffer);\n\n        // ARM RAM\n        this._ram8 = new Uint8Array(this._ramBuffer);\n        this._ram16 = new Uint16Array(this._ramBuffer);\n        this._ram32 = new Uint32Array(this._ramBuffer);\n\n        this._thumbulator = new Thumbulator(this._thumbulatorBus, {\n            stopAddress: CONST.returnAddress,\n            trapOnBx32: blx32Handler\n        });\n\n        this.reset();\n    }\n\n    init(): Promise<void> {\n        return this._thumbulator.init();\n    }\n\n    reset(): void {}\n\n    getRom(): Uint8Array {\n        return this._rom8;\n    }\n\n    getRam(): Uint8Array {\n        return this._ram8;\n    }\n\n    run(entry: number): void {\n        this._thumbulator.reset();\n        this._thumbulator.enableDebug(false);\n\n        for (let i = 0; i <= 12; i++) {\n            this._thumbulator.writeRegister(i, 0);\n        }\n\n        this._thumbulator.writeRegister(13, 0x40001fb4);\n        this._thumbulator.writeRegister(14, CONST.returnAddress + 1);\n        this._thumbulator.writeRegister(15, entry);\n\n        this._armMamcr = 0;\n\n        const trap = this._thumbulator.run(500000);\n\n        if (trap !== Thumbulator.TrapReason.stop && trap !== Thumbulator.TrapReason.abort) {\n            this._triggerTrap(`ARM execution trapped: ${trap}`);\n        }\n    }\n\n    getThumbulator(): Thumbulator {\n        return this._thumbulator;\n    }\n\n    private _triggerTrap(message: string): void {\n        this._thumbulator.abort();\n        this.trap.dispatch(message);\n    }\n\n    getRom16: (address: number) => number;\n    getRom32: (address: number) => number;\n    getRam16: (address: number) => number;\n    getRam32: (address: number) => number;\n    setRam16: (address: number, value: number) => void;\n    setRam32: (address: number, value: number) => void;\n\n    trap = new Event<string>();\n\n    private _thumbulatorBus: Thumbulator.Bus = {\n        read16: (address: number): number => {\n            if (address & 0x01) {\n                this._triggerTrap(`unaligned 16 bit ARM read from ${hex(address, 8, false)}`);\n                return 0;\n            }\n\n            const region = address >>> 28,\n                addr = address & 0x0fffffff;\n\n            switch (region) {\n                case 0x0:\n                    if (addr < 0x8000) {\n                        return this.getRom16(addr);\n                    }\n                    break;\n\n                case 0x4:\n                    if (addr < 0x2000) {\n                        return this.getRam16(addr);\n                    }\n                    break;\n\n                case 0xe:\n                    switch (addr) {\n                        case 0x001fc000:\n                            return this._armMamcr;\n                    }\n\n                    break;\n\n                default:\n            }\n\n            this._triggerTrap(`invalid 16 bit ARM read from ${hex(address, 8, false)}`);\n        },\n\n        read32: (address: number): number => {\n            if (address & 0x03) {\n                this._triggerTrap(`unaligned 32 bit ARM read from ${hex(address, 8, false)}`);\n                return 0;\n            }\n\n            const region = address >>> 28,\n                addr = address & 0x0fffffff;\n\n            switch (region) {\n                case 0x0:\n                    if (addr < 0x8000) {\n                        return this.getRom32(addr);\n                    }\n                    break;\n\n                case 0x4:\n                    if (addr < 0x2000) {\n                        return this.getRam32(addr);\n                    }\n                    break;\n\n                case 0xe:\n                    switch (addr) {\n                        case 0x8004:\n                        case 0x8008:\n                            return 0;\n                    }\n\n                    break;\n\n                default:\n            }\n\n            this._triggerTrap(`invalid 32 bit ARM read from ${hex(address, 8, false)}`);\n        },\n\n        write16: (address: number, value: number): void => {\n            if (address & 0x01) {\n                this._triggerTrap(`unaligned 16 bit ARM write: ${hex(value, 4)} -> ${hex(address, 8, false)}`);\n                return;\n            }\n\n            const region = address >>> 28,\n                addr = address & 0x0fffffff;\n\n            switch (region) {\n                case 0x04:\n                    if (addr < 0x2000) {\n                        this.setRam16(addr, value & 0xffff);\n                        return;\n                    }\n                    break;\n\n                case 0xe:\n                    switch (addr) {\n                        case 0x001fc000:\n                            this._armMamcr = value;\n                            return;\n                    }\n\n                    break;\n            }\n\n            this._triggerTrap(`invalid 16 bit ARM write: ${hex(value, 4)} -> ${hex(address, 8, false)}`);\n        },\n\n        write32: (address: number, value: number): void => {\n            if (address & 0x03) {\n                this._triggerTrap(`unaligned 32 bit ARM write: ${hex(value, 8, false)} -> ${hex(address, 8, false)}`);\n                return;\n            }\n\n            const region = address >>> 28,\n                addr = address & 0x0fffffff;\n\n            switch (region) {\n                case 0x4:\n                    if (addr < 0x2000) {\n                        this.setRam32(addr, value);\n                        return;\n                    }\n\n                case 0xe:\n                    switch (addr) {\n                        case 0x8004:\n                        case 0x8008:\n                            return;\n                    }\n\n                    break;\n            }\n\n            this._triggerTrap(`invalid 32 bit ARM write: ${hex(value, 8, false)} -> ${hex(address, 8, false)}`);\n        }\n    };\n\n    private _romBuffer = new ArrayBuffer(0x8000);\n\n    private _rom8: Uint8Array;\n    private _rom16: Uint16Array;\n    private _rom32: Uint32Array;\n\n    private _ramBuffer = new ArrayBuffer(0x2000);\n\n    private _ram8: Uint8Array;\n    private _ram16: Uint16Array;\n    private _ram32: Uint32Array;\n\n    private _armMamcr = 0;\n\n    private _thumbulator: Thumbulator = null;\n}\n\nnamespace Soc {\n    export interface Blx32Handler {\n        (address: number, targetAddress: number): number;\n    }\n}\n\nexport { Soc as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport HarmonySoc from './harmony/Soc';\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\nimport CartridgeInterface from './CartridgeInterface';\nimport * as cartridgeUtil from './util';\n\nclass CartridgeDPCPlus extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length < 28 * 0x0400 || buffer.length > 0x8000) {\n            throw new Error(`not a DPC+ image: invalid lenght ${buffer.length}`);\n        }\n\n        /* ROM layout:\n         *\n         *    3k ARM driver\n         *    6 * 4k banks (either 6502 or ARM)\n         *    4k image ROM\n         *    1k frequency ROM\n         */\n\n        this._rom = this._soc.getRom();\n\n        for (let i = 0; i < 6; i++) {\n            this._banks[i] = new Uint8Array(this._rom.buffer, 0x0c00 + i * 0x1000, 0x1000);\n        }\n\n        // ARM RAM\n        this._ram = this._soc.getRam();\n\n        this._imageRam = new Uint8Array(this._ram.buffer, 0x0c00, 0x1000);\n\n        /* RAM layout\n         *\n         *    * 3k driver (copied to RAM)\n         *    * 4k display RAM\n         *    * 1k frequency RAM\n         */\n\n        const offset = 0x8000 - buffer.length;\n\n        for (let i = 0; i < buffer.length; i++) {\n            this._rom[offset + i] = buffer[i];\n        }\n\n        for (let i = 0; i < 8; i++) {\n            this._fetchers[i] = new Fetcher();\n            this._fractionalFetchers[i] = new FractionalFetcher();\n        }\n\n        for (let i = 0; i < 3; i++) {\n            this._musicFetchers[i] = new MusicFetcher();\n        }\n\n        this._soc.trap.addHandler(message => this.triggerTrap(CartridgeInterface.TrapReason.other, message));\n\n        this.reset();\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        const signatureCounts = cartridgeUtil.searchForSignatures(buffer, ['DPC+'.split('').map(x => x.charCodeAt(0))]);\n\n        return signatureCounts[0] === 2;\n    }\n\n    init(): Promise<void> {\n        return this._soc.init();\n    }\n\n    reset() {\n        this._soc.reset();\n\n        this._currentBank = this._banks[5];\n\n        for (let i = 0; i < 0x0300; i++) {\n            this._soc.setRam32(i << 2, this._soc.getRom32(i << 2));\n        }\n\n        for (let i = 0x1b00; i < 0x2000; i++) {\n            this._soc.setRam32((0x0300 + i - 0x1b00) << 2, this._soc.getRom32(i << 2));\n        }\n\n        this._currentBank = this._banks[5];\n\n        for (let i = 0; i < 8; i++) {\n            this._parameters[i] = 0;\n        }\n\n        for (let i = 0; i < 8; i++) {\n            this._fetchers[i].reset();\n            this._fractionalFetchers[i].reset();\n        }\n\n        for (let i = 0; i < 3; i++) {\n            this._musicFetchers[i].reset();\n        }\n\n        this._parameterIndex = 0;\n\n        this._fastFetch = this._ldaPending = false;\n\n        this._rng = 0x2b435044;\n\n        this._lastCpuTime = 0;\n        this._clockAccumulator = 0;\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_dpc_plus;\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    setCpuTimeProvider(provider: () => number): this {\n        this._cpuTimeProvider = provider;\n\n        return this;\n    }\n\n    read(address: number): number {\n        return this._access(address, this._bus.getLastDataBusValue());\n    }\n\n    peek(address: number): number {\n        return this._currentBank[address & 0x0fff];\n    }\n\n    write(address: number, value: number): void {\n        this._access(address, value);\n    }\n\n    protected triggerTrap(reason: CartridgeInterface.TrapReason, message: string) {\n        super.triggerTrap(reason, message);\n    }\n\n    private _access(address: number, value: number): number {\n        address &= 0x0fff;\n\n        const readResult = this._currentBank[address];\n\n        if (this._fastFetch && this._ldaPending && address > 0x7f && address < 0x0ff6 && readResult < 0x28) {\n            address = readResult;\n        }\n\n        this._ldaPending = false;\n\n        if (address < 0x28) {\n            const idx = address & 0x07,\n                fetcher = this._fetchers[idx],\n                fractionalFetcher = this._fractionalFetchers[idx];\n            let result = 0;\n\n            switch ((address >>> 3) & 0x07) {\n                case 0x00:\n                    switch (idx) {\n                        case 0x00:\n                            this._advanceRng();\n                            return this._rng & 0xff;\n\n                        case 0x01:\n                            this._rewindRng();\n                            return this._rng & 0xff;\n\n                        case 0x02:\n                            return (this._rng >>> 8) & 0xff;\n\n                        case 0x03:\n                            return (this._rng >>> 16) & 0xff;\n\n                        case 0x04:\n                            return (this._rng >>> 24) & 0xff;\n\n                        case 0x05: {\n                            this._clockMusicFetchers();\n\n                            let acc = 0;\n                            for (let i = 0; i < 3; i++) {\n                                acc += this._imageRam[\n                                    (this._musicFetchers[i].waveform << 5) + this._musicFetchers[i].waveformSample()\n                                ];\n                            }\n\n                            return acc & 0xff;\n                        }\n                    }\n\n                    return 0;\n\n                case 0x01:\n                    result = this._imageRam[fetcher.pointer];\n                    fetcher.increment();\n                    return result;\n\n                case 0x02:\n                    result = this._imageRam[fetcher.pointer] & fetcher.mask();\n                    fetcher.increment();\n                    return result;\n\n                case 0x03:\n                    result = this._imageRam[fractionalFetcher.pointer >>> 8];\n                    fractionalFetcher.increment();\n                    return result;\n\n                case 0x04:\n                    return idx < 4 ? fetcher.mask() : 0;\n\n                default:\n                    return 0;\n            }\n        } else if (address < 0x80) {\n            const idx = address & 0x07,\n                fetcher = this._fetchers[idx],\n                fractionalFetcher = this._fractionalFetchers[idx];\n\n            switch (((address - 0x28) >>> 3) & 0x0f) {\n                case 0x00:\n                    fractionalFetcher.setPointerLo(value);\n                    break;\n\n                case 0x01:\n                    fractionalFetcher.setPointerHi(value);\n                    break;\n\n                case 0x02:\n                    fractionalFetcher.setFraction(value);\n                    break;\n\n                case 0x03:\n                    fetcher.top = value;\n                    break;\n\n                case 0x04:\n                    fetcher.bottom = value;\n                    break;\n\n                case 0x05:\n                    fetcher.setPointerLo(value);\n                    break;\n\n                case 0x06:\n                    switch (idx) {\n                        case 0x00:\n                            this._fastFetch = value === 0;\n                            break;\n\n                        case 0x01:\n                            if (this._parameterIndex < 8) {\n                                this._parameters[this._parameterIndex++] = value;\n                            }\n\n                            break;\n\n                        case 0x02:\n                            this._dispatchFunction(value);\n                            break;\n\n                        case 0x05:\n                        case 0x06:\n                        case 0x07:\n                            this._musicFetchers[idx - 0x05].waveform = value & 0x7f;\n                            break;\n                    }\n\n                    break;\n\n                case 0x07:\n                    fetcher.decrement();\n                    this._imageRam[fetcher.pointer] = value;\n                    break;\n\n                case 0x08:\n                    fetcher.setPointerHi(value);\n                    break;\n\n                case 0x09:\n                    switch (idx) {\n                        case 0x00:\n                            this._rng = 0x2b435044;\n                            break;\n\n                        case 0x01:\n                            this._rng = (this._rng & 0xffffff00) | value;\n                            break;\n\n                        case 0x02:\n                            this._rng = (this._rng & 0xffff00ff) | (value << 8);\n                            break;\n\n                        case 0x03:\n                            this._rng = (this._rng & 0xff00ffff) | (value << 16);\n                            break;\n\n                        case 0x04:\n                            this._rng = (this._rng & 0x00ffffff) | (value << 24);\n                            break;\n\n                        case 0x05:\n                        case 0x06:\n                        case 0x07:\n                            this._musicFetchers[idx - 0x05].frequency = this._soc.getRam32(\n                                0x2000 - 0x400 + (value << 2)\n                            );\n                            break;\n                    }\n\n                    break;\n\n                case 0x0a:\n                    this._imageRam[fetcher.pointer] = value;\n                    fetcher.increment();\n                    break;\n\n                default:\n                    break;\n            }\n        } else if (address > 0x0ff5 && address < 0x0ffc) {\n            this._currentBank = this._banks[address - 0x0ff6];\n        }\n\n        if (this._fastFetch && address > 0x7f && address < 0x0ff6) {\n            this._ldaPending = readResult === 0xa9;\n        }\n\n        return readResult;\n    }\n\n    private _clockMusicFetchers(): void {\n        const cpuTime = this._cpuTimeProvider();\n\n        this._clockAccumulator += (cpuTime - this._lastCpuTime) * 20000;\n        this._lastCpuTime = cpuTime;\n\n        const clocks = Math.floor(this._clockAccumulator);\n        this._clockAccumulator -= clocks;\n\n        if (clocks === 0) {\n            return;\n        }\n\n        for (let i = 0; i < 3; i++) {\n            this._musicFetchers[i].increment(clocks);\n        }\n    }\n\n    private _dispatchFunction(index: number) {\n        const romBase = this._parameters[0] + (this._parameters[1] << 8);\n\n        switch (index) {\n            case 0:\n                this._parameterIndex = 0;\n                break;\n\n            case 1:\n                for (let i = 0; i < this._parameters[3]; i++) {\n                    this._ram[0x0c00 + ((this._fetchers[this._parameters[2] & 0x07].pointer + i) & 0x0fff)] = this._rom[\n                        0x0c00 + (romBase + i) % 0x7400\n                    ];\n                }\n\n                this._parameterIndex = 0;\n                break;\n\n            case 2:\n                for (let i = 0; i < this._parameters[3]; i++) {\n                    this._ram[\n                        0x0c00 + ((this._fetchers[this._parameters[2] & 0x07].pointer + i) & 0x0fff)\n                    ] = this._parameters[0];\n                }\n\n                this._parameterIndex = 0;\n                break;\n\n            case 254:\n            case 255:\n                this._soc.run(0x0c0b);\n                break;\n        }\n    }\n\n    private _advanceRng(): void {\n        this._rng = (this._rng & (1 << 10) ? 0x10adab1e : 0x00) ^ ((this._rng >>> 11) | (this._rng << 21));\n    }\n\n    private _rewindRng(): void {\n        this._rng =\n            this._rng & (1 << 31)\n                ? ((0x10adab1e ^ this._rng) << 11) | ((0x10adab1e ^ this._rng) >>> 21)\n                : (this._rng << 11) | (this._rng >>> 21);\n    }\n\n    private _rom: Uint8Array;\n    private _banks = new Array<Uint8Array>(6);\n    private _currentBank: Uint8Array;\n\n    private _ram: Uint8Array;\n    private _imageRam: Uint8Array;\n\n    private _fetchers = new Array<Fetcher>(8);\n    private _fractionalFetchers = new Array<FractionalFetcher>(8);\n    private _musicFetchers = new Array<MusicFetcher>(3);\n\n    private _parameters = new Uint8Array(8);\n    private _parameterIndex = 0;\n\n    private _rng = 0;\n\n    private _clockAccumulator = 0;\n    private _lastCpuTime = 0;\n\n    private _fastFetch = false;\n    private _ldaPending = false;\n\n    private _bus: Bus;\n    private _cpuTimeProvider: () => number = null;\n\n    private _soc = new HarmonySoc();\n}\n\nclass Fetcher {\n    contructor() {\n        this.reset();\n    }\n\n    reset() {\n        this.pointer = this.top = this.bottom = 0;\n    }\n\n    setPointerHi(value: number): void {\n        this.pointer = (this.pointer & 0xff) | ((value & 0x0f) << 8);\n    }\n\n    setPointerLo(value: number): void {\n        this.pointer = (this.pointer & 0x0f00) | (value & 0xff);\n    }\n\n    increment(): void {\n        this.pointer = (this.pointer + 1) & 0xfff;\n    }\n\n    decrement(): void {\n        this.pointer = (this.pointer + 0xfff) & 0xfff;\n    }\n\n    mask(): number {\n        return ((this.top - (this.pointer & 0xff)) & 0xff) > ((this.top - this.bottom) & 0xff) ? 0xff : 0;\n    }\n\n    pointer = 0;\n    top = 0;\n    bottom = 0;\n}\n\nclass FractionalFetcher {\n    contructor() {\n        this.reset();\n    }\n\n    reset() {\n        this.pointer = this.fraction = 0;\n    }\n\n    setPointerHi(value: number): void {\n        this.pointer = (this.pointer & 0x00ffff) | ((value & 0x0f) << 16);\n    }\n\n    setPointerLo(value: number): void {\n        this.pointer = (this.pointer & 0x0f00ff) | ((value & 0xff) << 8);\n    }\n\n    setFraction(value: number): void {\n        this.fraction = value;\n        this.pointer &= 0x0fff00;\n    }\n\n    increment(): void {\n        this.pointer = (this.pointer + this.fraction) & 0x0fffff;\n    }\n\n    pointer = 0;\n    fraction = 0;\n}\n\nclass MusicFetcher {\n    constructor() {\n        this.reset();\n    }\n\n    reset(): void {\n        this.frequency = 0;\n        this.waveform = 0;\n        this.counter = 0;\n    }\n\n    increment(clocks: number): void {\n        this.counter = (this.counter + clocks * this.frequency) | 0;\n    }\n\n    waveformSample(): number {\n        return this.counter >>> 27;\n    }\n\n    frequency = ~0;\n    counter = ~0;\n    waveform = 0;\n}\n\nexport { CartridgeDPCPlus as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport Thumbulator from 'thumbulator.ts';\n\nimport HarmonySoc from './harmony/Soc';\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\nimport CartridgeInterface from './CartridgeInterface';\nimport * as cartridgeUtil from './util';\n\nconst enum ReservedStream {\n    amplitudeCDF = 0x22,\n    amplitudeCDFJ = 0x23,\n    jump = 0x21,\n    comm = 0x20\n}\n\nconst enum CdfVersion {\n    cdf0,\n    cdf1,\n    cdfj,\n    invalid\n}\n\nclass CartridgeCDF extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        const version = CartridgeCDF.getVersion(buffer);\n\n        switch (version) {\n            case CdfVersion.cdf0:\n                this._jumpstreamMask = 0xff;\n                this._amplitudeStream = ReservedStream.amplitudeCDF;\n                this._datastreamBase = 0x06e0;\n                this._datastreamIncrementBase = 0x0768;\n                this._waveformBase = 0x7f0;\n                break;\n\n            case CdfVersion.cdf1:\n                this._jumpstreamMask = 0xff;\n                this._amplitudeStream = ReservedStream.amplitudeCDF;\n                this._datastreamBase = 0x00a0;\n                this._datastreamIncrementBase = 0x0128;\n                this._waveformBase = 0x01b0;\n                break;\n\n            case CdfVersion.cdfj:\n                this._jumpstreamMask = 0xfe;\n                this._amplitudeStream = ReservedStream.amplitudeCDFJ;\n                this._datastreamBase = 0x0098;\n                this._datastreamIncrementBase = 0x0124;\n                this._waveformBase = 0x01b0;\n                break;\n\n            default:\n                throw new Error('not a CDF image: missing signature');\n        }\n\n        if (buffer.length !== 0x8000) {\n            throw new Error(`not a CDF image: invalid lenght ${buffer.length}`);\n        }\n\n        this._soc = new HarmonySoc(version === CdfVersion.cdf0 ? this._handleBxCDF0 : this._handleBxCDF1);\n        this._soc.trap.addHandler(message => this.triggerTrap(CartridgeInterface.TrapReason.other, message));\n\n        /* ROM layout:\n         *\n         *    2k ARM driver\n         *    2k user ARM code\n         *    28k 6502 ROM\n         */\n\n        this._rom = this._soc.getRom();\n\n        for (let i = 0; i < 0x8000; i++) {\n            this._rom[i] = buffer[i];\n        }\n\n        for (let i = 0; i < 7; i++) {\n            this._banks[i] = new Uint8Array(this._rom.buffer, 0x1000 * (i + 1), 0x1000);\n        }\n\n        /* RAM layout\n         *\n         *    * 2k driver (copied to RAM)\n         *    * 4k display RAM\n         *    * 2k aux RAM\n         */\n\n        this._ram = this._soc.getRam();\n        this._displayRam = new Uint8Array(this._soc.getRam().buffer, 0x0800, 0x1000);\n\n        for (let i = 0; i < 3; i++) {\n            this._musicStreams[i] = new MusicStream();\n        }\n\n        this.reset();\n    }\n\n    static getVersion(buffer: cartridgeUtil.BufferInterface): CdfVersion {\n        const sig = 'CDF'.split('').map(x => x.charCodeAt(0)),\n            startAddress = cartridgeUtil.searchForSignature(buffer, [...sig, -1, ...sig, -1, ...sig]);\n\n        if (startAddress < 0) {\n            return CdfVersion.invalid;\n        }\n\n        switch (buffer[startAddress + 3]) {\n            case 0:\n                return CdfVersion.cdf0;\n\n            case 1:\n                return CdfVersion.cdf1;\n\n            case 'J'.charCodeAt(0):\n                return CdfVersion.cdfj;\n\n            default:\n                return CdfVersion.invalid;\n        }\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        return CartridgeCDF.getVersion(buffer) !== CdfVersion.invalid;\n    }\n\n    init(): Promise<void> {\n        return this._soc.init();\n    }\n\n    reset() {\n        for (let i = 0; i < 0x0200; i++) {\n            this._soc.setRam32(i << 2, this._soc.getRom32(i << 2));\n        }\n\n        this._fastFetch = false;\n        this._digitalAudio = false;\n\n        this._fastJumpCountdown = 0;\n        this._fastFetchPending = false;\n\n        this._jmpOperandAddress = 0;\n        this._ldaOperandAddress = 0;\n\n        this._currentBank = this._banks[6];\n\n        for (let i = 0; i < 3; i++) {\n            this._musicStreams[i].reset();\n        }\n\n        this._lastCpuTime = 0;\n        this._clockAccumulator = 0;\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_cdf;\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        return this;\n    }\n\n    setCpuTimeProvider(provider: () => number): this {\n        this._cpuTimeProvider = provider;\n\n        return this;\n    }\n\n    read(address: number): number {\n        return this._access(address, this._bus.getLastDataBusValue());\n    }\n\n    peek(address: number): number {\n        return this._currentBank[address & 0x0fff];\n    }\n\n    write(address: number, value: number): void {\n        this._access(address, value);\n    }\n\n    private _access(address: number, value: number): number {\n        address &= 0x0fff;\n\n        const romValue = this._currentBank[address];\n\n        if (this._fastJumpCountdown-- > 0 && address === this._jmpOperandAddress) {\n            this._jmpOperandAddress++;\n\n            return this._datastreamReadWithIncrement(this._jumpstream, 0x0100);\n        }\n\n        if (\n            this._fastFetch &&\n            romValue === 0x4c &&\n            (this._currentBank[(address + 1) & 0x0fff] & this._jumpstreamMask) === 0 &&\n            this._currentBank[(address + 2) & 0x0fff] === 0\n        ) {\n            this._fastJumpCountdown = 2;\n            this._jmpOperandAddress = (address + 1) & 0x0fff;\n            this._jumpstream = ReservedStream.jump + this._currentBank[(address + 1) & 0x0fff];\n\n            return romValue;\n        }\n\n        this._fastJumpCountdown = 0;\n\n        if (\n            this._fastFetch &&\n            this._fastFetchPending &&\n            this._ldaOperandAddress === address &&\n            romValue <= this._amplitudeStream\n        ) {\n            this._fastFetchPending = false;\n\n            if (romValue === this._amplitudeStream) {\n                this._clockMusicStreams();\n\n                if (this._digitalAudio) {\n                    const counter = this._musicStreams[0].counter,\n                        sampleAddress = this._soc.getRam32(this._waveformBase) + (counter >>> 21);\n\n                    let sample = 0;\n\n                    if (sampleAddress < 0x8000) {\n                        sample = this._rom[sampleAddress];\n                    }\n\n                    if (sampleAddress > 0x40000000 && sampleAddress < 0x40002000) {\n                        sample = this._ram[sampleAddress - 0x40000000];\n                    }\n\n                    if ((counter & 0x100000) === 0) {\n                        sample >>>= 4;\n                    }\n\n                    return sample & 0x0f;\n                } else {\n                    let acc = 0;\n                    for (let i = 0; i < 3; i++) {\n                        acc += this._displayRam[\n                            (this._getWaveform(i) +\n                                (this._musicStreams[i].counter >>> this._musicStreams[i].waveformSize)) &\n                                0x0fff\n                        ];\n                    }\n\n                    return acc;\n                }\n            }\n\n            return this._datastreamRead(romValue);\n        }\n\n        this._fastFetchPending = false;\n\n        if (address >= 0x0ff0) {\n            switch (address) {\n                case 0x0ff0:\n                    this._datastreamWriteWithIncrement(ReservedStream.comm, value, 0x0100);\n                    break;\n\n                case 0x0ff1: {\n                    let pointer = this._getDatastreamPointer(ReservedStream.comm);\n                    pointer <<= 8;\n                    pointer &= 0xf0000000;\n                    pointer |= value << 20;\n                    this._setDatastreamPointer(ReservedStream.comm, pointer);\n\n                    break;\n                }\n\n                case 0x0ff2:\n                    this._fastFetch = (value & 0x0f) === 0;\n                    this._digitalAudio = (value & 0xf0) === 0;\n                    break;\n\n                case 0x0ff3:\n                    switch (value) {\n                        case 254:\n                        case 255:\n                            this._soc.run(0x080b);\n                            break;\n                    }\n                    break;\n            }\n\n            if (address > 0x0ff4 && address < 0x0ffc) {\n                this._currentBank = this._banks[address - 0x0ff5];\n            }\n        }\n\n        if (this._fastFetch && romValue === 0xa9) {\n            this._fastFetchPending = true;\n            this._ldaOperandAddress = (address + 1) & 0x0fff;\n        }\n\n        return romValue;\n    }\n\n    private _clockMusicStreams(): void {\n        const cpuTime = this._cpuTimeProvider();\n\n        this._clockAccumulator += (cpuTime - this._lastCpuTime) * 20000;\n        this._lastCpuTime = cpuTime;\n\n        const clocks = Math.floor(this._clockAccumulator);\n        this._clockAccumulator -= clocks;\n\n        if (clocks === 0) {\n            return;\n        }\n\n        for (let i = 0; i < 3; i++) {\n            this._musicStreams[i].increment(clocks);\n        }\n    }\n\n    private _getDatastreamPointer(stream: number): number {\n        return this._soc.getRam32(this._datastreamBase + 4 * stream);\n    }\n\n    private _setDatastreamPointer(stream: number, value: number): void {\n        this._soc.setRam32(this._datastreamBase + 4 * stream, value);\n    }\n\n    private _getDatastreamIncrement(stream: number): number {\n        return this._soc.getRam32(this._datastreamIncrementBase + 4 * stream);\n    }\n\n    private _datastreamRead(stream: number): number {\n        const pointer = this._getDatastreamPointer(stream),\n            value = this._displayRam[pointer >>> 20];\n\n        this._setDatastreamPointer(stream, (pointer + (this._getDatastreamIncrement(stream) << 12)) | 0);\n\n        return value;\n    }\n\n    private _datastreamReadWithIncrement(stream: number, increment: number): number {\n        const pointer = this._getDatastreamPointer(stream),\n            value = this._displayRam[pointer >>> 20];\n\n        this._setDatastreamPointer(stream, (pointer + (increment << 12)) | 0);\n\n        return value;\n    }\n\n    private _datastreamWriteWithIncrement(stream: number, value: number, increment: number) {\n        const pointer = this._getDatastreamPointer(stream);\n\n        this._displayRam[pointer >>> 20] = value;\n\n        this._setDatastreamPointer(stream, (pointer + (increment << 12)) | 0);\n    }\n\n    private _getWaveform(index: number): number {\n        const value = this._soc.getRam32(this._waveformBase + 4 * index);\n\n        return (value - 0x40000000 - 0x0800) & 0x0fff;\n    }\n\n    private _handleBxCDF0 = (address: number): number => {\n        const thumbulator = this._soc.getThumbulator(),\n            r2 = thumbulator.readRegister(2),\n            r3 = thumbulator.readRegister(3);\n\n        switch (address) {\n            case 0x000006e2:\n                this._musicStreams[r2 % 3].frequency = r3;\n                return 0;\n\n            case 0x000006e6:\n                this._musicStreams[r2 % 3].counter = 0;\n                return 0;\n\n            case 0x000006ea:\n                thumbulator.writeRegister(2, this._musicStreams[r2 % 3].counter);\n                return 0;\n\n            case 0x000006ee:\n                this._musicStreams[r2 % 3].waveformSize = r3;\n                return 0;\n        }\n\n        return Thumbulator.TrapReason.bxLeaveThumb;\n    };\n\n    private _handleBxCDF1 = (address: number): number => {\n        const thumbulator = this._soc.getThumbulator(),\n            r2 = thumbulator.readRegister(2),\n            r3 = thumbulator.readRegister(3);\n\n        switch (address) {\n            case 0x00000752:\n                this._musicStreams[r2 % 3].frequency = r3;\n                return 0;\n\n            case 0x00000756:\n                this._musicStreams[r2 % 3].counter = 0;\n                return 0;\n\n            case 0x0000075a:\n                thumbulator.writeRegister(2, this._musicStreams[r2 % 3].counter);\n                return 0;\n\n            case 0x0000075e:\n                this._musicStreams[r2 % 3].waveformSize = r3;\n                return 0;\n        }\n\n        return Thumbulator.TrapReason.bxLeaveThumb;\n    };\n\n    private _banks = new Array<Uint8Array>(7);\n    private _currentBank: Uint8Array = null;\n\n    private _rom: Uint8Array = null;\n    private _ram: Uint8Array = null;\n    private _displayRam: Uint8Array = null;\n\n    private _musicStreams = new Array<MusicStream>(3);\n    private _clockAccumulator = 0;\n    private _lastCpuTime = 0;\n\n    private _soc: HarmonySoc = null;\n\n    private _fastFetch = false;\n    private _digitalAudio = false;\n\n    private _fastJumpCountdown = 0;\n    private _fastFetchPending = false;\n\n    private _jmpOperandAddress = 0;\n    private _ldaOperandAddress = 0;\n\n    private _datastreamBase = 0;\n    private _datastreamIncrementBase = 0;\n    private _waveformBase = 0;\n\n    private _jumpstream = 0;\n    private _jumpstreamMask = 0;\n    private _amplitudeStream = 0;\n\n    private _bus: Bus = null;\n    private _cpuTimeProvider: () => number = null;\n}\n\nclass MusicStream {\n    reset() {\n        this.counter = this.frequency = 0;\n        this.waveformSize = 27;\n    }\n\n    increment(clocks: number): void {\n        this.counter = (this.counter + clocks * this.frequency) | 0;\n    }\n\n    counter = 0;\n    frequency = 0;\n    waveformSize = 27;\n}\n\nexport { CartridgeCDF as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport Bus from '../Bus';\nimport * as cartridgeUtil from './util';\n\nclass Cartridge8040 extends AbstractCartridge {\n    constructor(buffer: cartridgeUtil.BufferInterface) {\n        super();\n\n        if (buffer.length !== 0x2000) {\n            throw new Error(`buffer is not an 8k cartridge image: wrong length ${buffer.length}`);\n        }\n\n        for (let i = 0; i < 0x1000; i++) {\n            this._bank0[i] = buffer[i];\n            this._bank1[i] = buffer[0x1000 + i];\n        }\n\n        this.reset();\n    }\n\n    static matchesBuffer(buffer: cartridgeUtil.BufferInterface): boolean {\n        // Signatures shamelessly stolen from stella\n        const signatureCounts = cartridgeUtil.searchForSignatures(buffer, [\n            [0xad, 0x00, 0x08], // LDA $0800\n            [0xad, 0x40, 0x08], // LDA $0840\n            [0x2c, 0x00, 0x08], // BIT $0800\n            [0x0c, 0x00, 0x08, 0x4c], // NOP $0800; JMP ...\n            [0x0c, 0xff, 0x0f, 0x4c] // NOP $0FFF; JMP ...\n        ]);\n\n        for (const count of signatureCounts) {\n            if (count >= 2) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    reset(): void {\n        this._bank = this._bank0;\n    }\n\n    read(address: number): number {\n        return this.peek(address);\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        return this._bank[address];\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_8k_econobanking;\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        this._bus.event.read.addHandler(this._onBusAccess, this);\n        this._bus.event.write.addHandler(this._onBusAccess, this);\n\n        return this;\n    }\n\n    private _onBusAccess(accessType: Bus.AccessType, self: Cartridge8040): void {\n        const address = self._bus.getLastAddresBusValue() & 0x1840;\n\n        switch (address) {\n            case 0x0800:\n                self._bank = self._bank0;\n                break;\n\n            case 0x0840:\n                self._bank = self._bank1;\n                break;\n        }\n    }\n\n    private _bank: Uint8Array = null;\n    private _bank0 = new Uint8Array(0x1000);\n    private _bank1 = new Uint8Array(0x1000);\n\n    private _bus: Bus = null;\n}\n\nexport { Cartridge8040 as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport AbstractCartridge from './AbstractCartridge';\nimport CartridgeInfo from './CartridgeInfo';\nimport RngInterface from '../../../tools/rng/GeneratorInterface';\nimport Bus from '../Bus';\nimport { BufferInterface } from './util';\n\nclass CartridgePP extends AbstractCartridge {\n    constructor(buffer: BufferInterface) {\n        super();\n\n        if (buffer.length !== 0x2000 && buffer.length !== 0x2003) {\n            throw new Error(`buffer is not a PP cartridge image; wrong length ${buffer.length} bytes`);\n        }\n\n        for (let i = 0; i < 8; i++) {\n            this._banks[i] = new Uint8Array(0x0400);\n\n            for (let j = 0; j < 0x0400; j++) {\n                this._banks[i][j] = buffer[i * 0x0400 + j];\n            }\n        }\n\n        this.reset();\n    }\n\n    getType(): CartridgeInfo.CartridgeType {\n        return CartridgeInfo.CartridgeType.bankswitch_8k_pp;\n    }\n\n    reset(): void {\n        this._switchLayout(0);\n\n        this._bankSwitchPending = false;\n    }\n\n    randomize(rng: RngInterface): void {\n        for (let i = 0; i < 0x40; i++) {\n            this._ram[i] = rng.int(0xff);\n        }\n    }\n\n    setBus(bus: Bus): this {\n        this._bus = bus;\n\n        bus.event.read.addHandler(CartridgePP._onBusAccess, this);\n        bus.event.write.addHandler(CartridgePP._onBusAccess, this);\n\n        return this;\n    }\n\n    read(address: number): number {\n        address &= 0x0fff;\n        this._access(address, this._bus.getLastDataBusValue());\n\n        if (address < 0x40) {\n            return this._ram[address];\n        }\n\n        if (address < 0x80) {\n            return this._bus.getLastDataBusValue();\n        }\n\n        return this._segments[address >>> 10][address & 0x03ff];\n    }\n\n    write(address: number, value: number) {\n        this._access(address & 0x0fff, value);\n    }\n\n    peek(address: number): number {\n        address &= 0x0fff;\n\n        if (address < 0x40) {\n            return this._ram[address];\n        }\n\n        if (address < 0x80) {\n            return this._bus.getLastDataBusValue();\n        }\n\n        return this._segments[address >>> 10][address & 0x03ff];\n    }\n\n    private static _onBusAccess(accessType: Bus.AccessType, self: CartridgePP): void {\n        let address = self._bus.getLastAddresBusValue();\n\n        if (self._bankSwitchPending && address !== self._previousAddressBusValue && --self._accessCounter === 0) {\n            self._switchLayout(self._pendingBank);\n            self._bankSwitchPending = false;\n        }\n\n        if (address & 0x1000) {\n            return;\n        }\n\n        address &= 0xff;\n\n        if (address >= 0x30 && address <= 0x3f) {\n            self._pendingBank = address & 0x0f;\n            self._accessCounter = 3;\n            self._bankSwitchPending = true;\n        }\n    }\n\n    private _access(address: number, value: number): void {\n        if (address >= 0x40 && address < 0x80) {\n            this._ram[address - 0x40] = value;\n        }\n    }\n\n    private _switchLayout(index: number): void {\n        switch (index) {\n            case 0:\n            case 8:\n                return this._configureSegments(0, 0, 1, 2);\n\n            case 1:\n            case 9:\n                return this._configureSegments(0, 1, 3, 2);\n\n            case 2:\n            case 10:\n                return this._configureSegments(4, 5, 6, 7);\n\n            case 3:\n            case 11:\n                return this._configureSegments(7, 4, 3, 2);\n\n            case 4:\n            case 12:\n                return this._configureSegments(0, 0, 6, 7);\n\n            case 5:\n            case 13:\n                return this._configureSegments(0, 1, 7, 6);\n\n            case 6:\n            case 14:\n                return this._configureSegments(3, 2, 4, 5);\n\n            case 7:\n            case 15:\n                return this._configureSegments(6, 0, 5, 1);\n\n            default:\n                throw new Error('illegal layout index');\n        }\n    }\n\n    private _configureSegments(zero: number, one: number, two: number, three: number): void {\n        this._segments[0] = this._banks[zero];\n        this._segments[1] = this._banks[one];\n        this._segments[2] = this._banks[two];\n        this._segments[3] = this._banks[three];\n    }\n\n    private _banks: Array<Uint8Array> = new Array(8);\n    private _segments: Array<Uint8Array> = new Array(4);\n    private _ram = new Uint8Array(0x40);\n\n    private _bus: Bus;\n\n    private _bankSwitchPending = false;\n    private _pendingBank = 0;\n    private _accessCounter = 0;\n    private _previousAddressBusValue = 0;\n}\n\nexport default CartridgePP;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport CartridgeInfo from './CartridgeInfo';\nimport CartridgeF8 from './CartridgeF8';\nimport CartridgeE0 from './CartridgeE0';\nimport Cartridge3F from './Cartridge3F';\nimport Cartridge3E from './Cartridge3E';\nimport CartridgeFE from './CartridgeFE';\nimport CartridgeUA from './CartridgeUA';\nimport CartridgeE7 from './CartridgeE7';\nimport CartridgeFA2 from './CartridgeFA2';\nimport CartridgeEF from './CartridgeEF';\nimport CartridgeDPCPlus from './CartridgeDPCPlus';\nimport CartridgeCDF from './CartridgeCDF';\nimport Cartridge8040 from './Cartridge0840';\nimport * as cartridgeUtil from './util';\nimport CartridgeCV from './CartridgeCV';\n\nclass CartridgeDetector {\n    detectCartridgeType(buffer: cartridgeUtil.BufferInterface): CartridgeInfo.CartridgeType {\n        if (buffer.length % 8448 === 0) {\n            return CartridgeInfo.CartridgeType.bankswitch_supercharger;\n        }\n\n        if (buffer.length < 0x0800) {\n            return CartridgeInfo.CartridgeType.vanilla_2k;\n        }\n\n        if (buffer.length >= 10240 && buffer.length <= 10496) {\n            return CartridgeInfo.CartridgeType.bankswitch_8k_DPC;\n        }\n\n        switch (buffer.length) {\n            case 0x0800:\n                return this._detect2k(buffer);\n\n            case 0x1000:\n                return CartridgeInfo.CartridgeType.vanilla_4k;\n\n            case 0x2000:\n                return this._detect8k(buffer);\n\n            case 0x2003:\n                return CartridgeInfo.CartridgeType.bankswitch_8k_pp;\n\n            case 0x3000:\n                return CartridgeInfo.CartridgeType.bankswitch_12k_FA;\n\n            case 0x4000:\n                return this._detect16k(buffer);\n\n            case 0x7000:\n                return CartridgeInfo.CartridgeType.bankswitch_FA2;\n\n            case 0x7400:\n                return this._detect29k(buffer);\n\n            case 0x8000:\n                return this._detect32k(buffer);\n\n            case 0x10000:\n                return this._detect64k(buffer);\n\n            default:\n                return CartridgeInfo.CartridgeType.unknown;\n        }\n    }\n\n    private _detect2k(buffer: cartridgeUtil.BufferInterface): CartridgeInfo.CartridgeType {\n        if (CartridgeCV.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_2k_cv;\n        }\n\n        return CartridgeInfo.CartridgeType.vanilla_2k;\n    }\n\n    private _detect8k(buffer: cartridgeUtil.BufferInterface): CartridgeInfo.CartridgeType {\n        const f8Matches = CartridgeF8.matchesBuffer(buffer);\n\n        if (CartridgeE0.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_8k_E0;\n        }\n\n        if (Cartridge3F.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_8k_3F;\n        }\n\n        if (CartridgeUA.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_8k_UA;\n        }\n\n        if (!f8Matches && CartridgeFE.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_8k_FE;\n        }\n\n        if (Cartridge8040.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_8k_econobanking;\n        }\n\n        return CartridgeInfo.CartridgeType.bankswitch_8k_F8;\n    }\n\n    private _detect16k(buffer: cartridgeUtil.BufferInterface): CartridgeInfo.CartridgeType {\n        if (CartridgeE7.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_16k_E7;\n        }\n\n        return CartridgeInfo.CartridgeType.bankswitch_16k_F6;\n    }\n\n    private _detect29k(buffer: cartridgeUtil.BufferInterface): CartridgeInfo.CartridgeType {\n        if (CartridgeFA2.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_FA2;\n        }\n\n        return CartridgeInfo.CartridgeType.bankswitch_dpc_plus;\n    }\n\n    private _detect32k(buffer: cartridgeUtil.BufferInterface): CartridgeInfo.CartridgeType {\n        if (Cartridge3E.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_3E;\n        }\n\n        if (CartridgeDPCPlus.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_dpc_plus;\n        }\n\n        if (CartridgeCDF.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_cdf;\n        }\n\n        return CartridgeInfo.CartridgeType.bankswitch_32k_F4;\n    }\n\n    private _detect64k(buffer: cartridgeUtil.BufferInterface): CartridgeInfo.CartridgeType {\n        if (CartridgeEF.matchesBuffer(buffer)) {\n            return CartridgeInfo.CartridgeType.bankswitch_64k_EF;\n        }\n\n        return CartridgeInfo.CartridgeType.bankswitch_64k_F0;\n    }\n}\n\nexport { CartridgeDetector as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport Cartridge2k from './Cartridge2k';\nimport Cartridge4k from './Cartridge4k';\nimport CartridgeCV from './CartridgeCV';\nimport CartridgeF8 from './CartridgeF8';\nimport CartridgeF6 from './CartridgeF6';\nimport CartridgeE0 from './CartridgeE0';\nimport CartridgeFE from './CartridgeFE';\nimport Cartridge3F from './Cartridge3F';\nimport Cartridge3E from './Cartridge3E';\nimport CartridgeUA from './CartridgeUA';\nimport CartridgeFA from './CartridgeFA';\nimport CartridgeE7 from './CartridgeE7';\nimport CartridgeF0 from './CartridgeF0';\nimport CartridgeEF from './CartridgeEF';\nimport CartridgeF4 from './CartridgeF4';\nimport CartridgeFA2 from './CartridgeFA2';\nimport CartridgeSupercharger from './CartridgeSupercharger';\nimport CartridgeDPC from './CartridgeDPC';\nimport CartridgeDPCPlus from './CartridgeDPCPlus';\nimport CartdridgeCDF from './CartridgeCDF';\nimport Cartidge8040 from './Cartridge0840';\nimport CartridgePP from './CartridgePP';\n\nimport CartridgeInfo from './CartridgeInfo';\nimport CartridgeDetector from './CartridgeDetector';\nimport CartridgeInterface from './CartridgeInterface';\n\nexport default class CartridgeFactory {\n    async createCartridge(\n        buffer: { [i: number]: number; length: number },\n        cartridgeType?: CartridgeInfo.CartridgeType\n    ): Promise<CartridgeInterface> {\n        const cartridge = this._createCartridge(buffer, cartridgeType);\n\n        await cartridge.init();\n\n        return cartridge;\n    }\n\n    private _createCartridge(\n        buffer: { [i: number]: number; length: number },\n        cartridgeType?: CartridgeInfo.CartridgeType\n    ): CartridgeInterface {\n        if (typeof cartridgeType === 'undefined') {\n            const detector = new CartridgeDetector();\n\n            cartridgeType = detector.detectCartridgeType(buffer);\n        }\n\n        switch (cartridgeType) {\n            case CartridgeInfo.CartridgeType.vanilla_2k:\n                return new Cartridge2k(buffer);\n\n            case CartridgeInfo.CartridgeType.vanilla_4k:\n                return new Cartridge4k(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_2k_cv:\n                return new CartridgeCV(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_8k_F8:\n                return new CartridgeF8(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_8k_E0:\n                return new CartridgeE0(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_8k_3F:\n                return new Cartridge3F(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_8k_FE:\n                return new CartridgeFE(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_8k_UA:\n                return new CartridgeUA(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_8k_DPC:\n                return new CartridgeDPC(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_8k_econobanking:\n                return new Cartidge8040(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_8k_pp:\n                return new CartridgePP(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_12k_FA:\n                return new CartridgeFA(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_16k_F6:\n                return new CartridgeF6(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_16k_E7:\n                return new CartridgeE7(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_FA2:\n                return new CartridgeFA2(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_32k_F4:\n                return new CartridgeF4(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_64k_F0:\n                return new CartridgeF0(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_64k_EF:\n                return new CartridgeEF(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_3E:\n                return new Cartridge3E(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_supercharger:\n                return new CartridgeSupercharger(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_dpc_plus:\n                return new CartridgeDPCPlus(buffer);\n\n            case CartridgeInfo.CartridgeType.bankswitch_cdf:\n                return new CartdridgeCDF(buffer);\n\n            default:\n                throw new Error(`invalid or unsupported cartridge image`);\n        }\n    }\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\n\nimport Bus from './Bus';\nimport Board from './Board';\nimport DataTapInterface from '../io/DataTapInterface';\n\nclass DataTap implements DataTapInterface {\n    constructor(private _board: Board) {\n        this._bus = this._board.getBus();\n\n        this._board.systemReset.addHandler(DataTap._onReset, this);\n        this._bus.event.write.addHandler(DataTap._onWrite, this);\n\n        this.reset();\n    }\n\n    reset(): this {\n        for (let i = 0; i < this._buffer.length; i++) {\n            this._buffer[i] = 0;\n        }\n\n        this._bufferIndex = 0;\n\n        return this;\n    }\n\n    private static _onWrite(accessType: Bus.AccessType, self: DataTap): void {\n        if (accessType !== Bus.AccessType.tia) {\n            return;\n        }\n\n        switch (self._bus.getLastAddresBusValue()) {\n            case 0x30:\n                self._buffer[self._bufferIndex] = self._bus.getLastDataBusValue();\n                self._bufferIndex = (self._bufferIndex + 1) % self._buffer.length;\n\n                break;\n\n            case 0x31: {\n                const count = self._bus.getLastDataBusValue();\n                const data = new Uint8Array(count);\n\n                for (let i = 0; i < count; i++) {\n                    const j = (self._bufferIndex - 1 + self._buffer.length) % self._buffer.length;\n\n                    data[count - i - 1] = self._buffer[j];\n                    self._bufferIndex = j;\n                }\n\n                self.message.dispatch(data);\n\n                break;\n            }\n        }\n    }\n\n    private static _onReset(payload: void, self: DataTap): void {\n        self.reset();\n    }\n\n    message = new Event<Uint8Array>();\n\n    private readonly _buffer = new Uint8Array(256);\n    private _bufferIndex = 0;\n    private _bus: Bus = null;\n}\n\nexport default DataTap;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport SchedulerInterface from './SchedulerInterface';\nimport TaskInterface from './TaskInterface';\n\nclass PeriodicScheduler implements SchedulerInterface {\n    constructor(private _period: number) {}\n\n    setPeriod(period: number): PeriodicScheduler {\n        this._period = period;\n\n        return this;\n    }\n\n    getPeriod(): number {\n        return this._period;\n    }\n\n    start<T>(worker: SchedulerInterface.WorkerInterface<T>, context?: T): TaskInterface {\n        let terminate = false;\n\n        const handler = () => {\n            if (terminate) {\n                return;\n            }\n\n            worker(context);\n\n            setTimeout(handler, this._period);\n        };\n\n        setTimeout(handler, this._period);\n\n        return {\n            stop: () => (terminate = true)\n        };\n    }\n}\n\nexport { PeriodicScheduler as default };\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.immediate = factory());\n}(this, (function () { 'use strict';\n\nvar context = (function () {\n  /* eslint no-eval: 0 */\n  return this || (1, eval)('this');\n})();\n\n// @see http://codeforhire.com/2013/09/21/setimmediate-and-messagechannel-broken-on-internet-explorer-10/\nvar useNative = (function () {\n  return !(context.navigator && /Trident|Edge/.test(context.navigator.userAgent));\n})();\n\nvar nextId = 1;\nvar lock = false;\nvar TASKS = {};\n\nfunction wrap(handler) {\n  var args = Array.prototype.slice.call(arguments, 1);\n  var len = args.length;\n\n  return !len ? function () {\n    return handler.call(undefined);\n  } : len === 1 ? function () {\n    return handler.call(undefined, args[0]);\n  } : len === 2 ? function () {\n    return handler.call(undefined, args[0], args[1]);\n  } : len === 3 ? function () {\n    return handler.call(undefined, args[0], args[1], args[2]);\n  } : function () {\n    return handler.apply(undefined, args);\n  };\n}\n\nfunction create(args) {\n  TASKS[nextId] = wrap.apply(undefined, args);\n  return nextId++;\n}\n\nfunction clear(handleId) {\n  delete TASKS[handleId];\n}\n\nfunction run(handleId) {\n  if (lock) {\n    context.setTimeout(wrap(run, handleId), 0);\n  } else {\n    var task = TASKS[handleId];\n\n    if (task) {\n      lock = true;\n\n      try {\n        task();\n      } finally {\n        clear(handleId);\n        lock = false;\n      }\n    }\n  }\n}\n\nfunction init() {\n  var polifill = function polifill() {\n    var handleId = create(arguments);\n    context.setTimeout(wrap(run, handleId), 0);\n    return handleId;\n  };\n\n  polifill.usePolifill = 'setTimeout';\n\n  return polifill;\n}\n\nfunction canUse() {\n  return 'setTimeout' in context;\n}\n\nvar setTimeoutPolifill = Object.freeze({\n\tinit: init,\n\tcanUse: canUse\n});\n\nfunction init$1() {\n  var polifill = function polifill() {\n    var handleId = create(arguments);\n    context.process.nextTick(wrap(run, handleId));\n    return handleId;\n  };\n\n  polifill.usePolifill = 'nextTick';\n\n  return polifill;\n}\n\n// Don't get fooled by e.g. browserify environments.\n// For Node.js before 0.9\nfunction canUse$1() {\n  return Object.prototype.toString.call(context.process) === '[object process]';\n}\n\nvar nextTickPolifill = Object.freeze({\n\tinit: init$1,\n\tcanUse: canUse$1\n});\n\nfunction init$2() {\n  var messagePrefix = 'setImmediate$' + Math.random() + '$';\n\n  var onGlobalMessage = function onGlobalMessage(event) {\n    if (event.source === context && typeof event.data === 'string' && event.data.indexOf(messagePrefix) === 0) {\n\n      run(Number(event.data.slice(messagePrefix.length)));\n    }\n  };\n\n  if (context.addEventListener) {\n    context.addEventListener('message', onGlobalMessage, false);\n  } else {\n    context.attachEvent('onmessage', onGlobalMessage);\n  }\n\n  var polifill = function polifill() {\n    var handleId = create(arguments);\n    context.postMessage(messagePrefix + handleId, '*');\n    return handleId;\n  };\n\n  polifill.usePolifill = 'postMessage';\n\n  return polifill;\n}\n\n// For non-IE10 modern browsers\nfunction canUse$2() {\n  if (context.importScripts || !context.postMessage) {\n    return false;\n  }\n\n  if (context.navigator && /Chrome/.test(context.navigator.userAgent)) {\n    //skip this method due to heavy minor GC on heavy use.\n    return false;\n  }\n\n  var asynch = true;\n  var oldOnMessage = context.onmessage;\n  context.onmessage = function () {\n    asynch = false;\n  };\n\n  context.postMessage('', '*');\n  context.onmessage = oldOnMessage;\n  return asynch;\n}\n\nvar postMessagePolifill = Object.freeze({\n\tinit: init$2,\n\tcanUse: canUse$2\n});\n\nfunction init$3() {\n  var channel = new context.MessageChannel();\n\n  channel.port1.onmessage = function (event) {\n    run(Number(event.data));\n  };\n\n  var polifill = function polifill() {\n    var handleId = create(arguments);\n    channel.port2.postMessage(handleId);\n    return handleId;\n  };\n\n  polifill.usePolifill = 'messageChannel';\n\n  return polifill;\n}\n\n// For web workers, where supported\nfunction canUse$3() {\n  return Boolean(context.MessageChannel);\n}\n\nvar messageChannelPolifill = Object.freeze({\n\tinit: init$3,\n\tcanUse: canUse$3\n});\n\nfunction init$4() {\n  var html = context.document.documentElement;\n\n  var polifill = function polifill() {\n    var handleId = create(arguments);\n    var script = context.document.createElement('script');\n\n    script.onreadystatechange = function () {\n      run(handleId);\n      script.onreadystatechange = null;\n      html.removeChild(script);\n      script = null;\n    };\n\n    html.appendChild(script);\n    return handleId;\n  };\n\n  polifill.usePolifill = 'readyStateChange';\n\n  return polifill;\n}\n\n// For IE 6–8\nfunction canUse$4() {\n  return context.document && 'onreadystatechange' in context.document.createElement('script');\n}\n\nvar readyStateChangePolifill = Object.freeze({\n\tinit: init$4,\n\tcanUse: canUse$4\n});\n\nvar POLIFILLS = [nextTickPolifill, postMessagePolifill, messageChannelPolifill, readyStateChangePolifill];\n\nvar setImmediate = useNative ? context.setImmediate || context.msSetImmediate || usePolifill(POLIFILLS, setTimeoutPolifill) : init();\n\nvar clearImmediate = useNative ? context.clearImmediate || context.msClearImmediate || clear : clear;\n\nfunction polifill() {\n  if (context.setImmediate !== setImmediate) {\n    context.setImmediate = setImmediate;\n    context.msSetImmediate = setImmediate;\n    context.clearImmediate = clearImmediate;\n    context.msClearImmediate = clearImmediate;\n  }\n}\n\nfunction usePolifill(list, def) {\n  for (var i = 0; i < list.length; i++) {\n    var _polifill = list[i];\n    if (_polifill.canUse()) {\n      return _polifill.init();\n    }\n  }\n\n  return def.init();\n}\n\nvar index = {\n  setImmediate: setImmediate,\n  clearImmediate: clearImmediate,\n  polifill: polifill\n};\n\nreturn index;\n\n})));\n//# sourceMappingURL=setImmediate.js.map\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport * as polyfill from 'setimmediate2';\n\n// Make sure that setTimeout is called every now and then in order to work around\n// scheduling issues in chrome.\n\nconst enum CONST {\n    setTimeoutRecurrence = 10\n}\n\nlet index = 0;\n\nexport function setImmediate(callback: () => void) {\n    if (index === 0) {\n        setTimeout(callback, 0);\n    } else {\n        polyfill.setImmediate(callback);\n    }\n\n    index = (index + 1) % CONST.setTimeoutRecurrence;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { setImmediate } from './setImmediate';\n\nimport SchedulerInterface from './SchedulerInterface';\nimport TaskInterface from './TaskInterface';\n\nclass ImmediateScheduler implements SchedulerInterface {\n    start<T>(worker: SchedulerInterface.WorkerInterface<T>, context?: T): TaskInterface {\n        let terminate = false;\n\n        function handler() {\n            if (terminate) {\n                return;\n            }\n\n            worker(context);\n            setImmediate(handler);\n        }\n\n        setImmediate(handler);\n\n        return {\n            stop: () => (terminate = true)\n        };\n    }\n}\n\nexport { ImmediateScheduler as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nconst getTimestamp =\n    (self as any).performance && (self as any).performance.now\n        ? () => (self as any).performance.now()\n        : () => Date.now();\n\nexport { getTimestamp as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport SchedulerInterface from '../SchedulerInterface';\nimport TaskInterface from '../TaskInterface';\nimport getTimestamp from '../getTimestamp';\nimport { setImmediate } from '../setImmediate';\n\nconst THRESHOLD = 1;\n\nclass ConstantTimesliceScheduler implements SchedulerInterface {\n    start<T>(worker: SchedulerInterface.WorkerInterface<T>, context?: T, _timeSlice?: number): TaskInterface {\n        const timeSlice = _timeSlice || 50;\n\n        let running = true;\n\n        function handler() {\n            if (!running) {\n                return;\n            }\n\n            const timestampStart = getTimestamp();\n            let emulationTime = 0,\n                delta = 0;\n\n            while (getTimestamp() - timestampStart < timeSlice) {\n                do {\n                    delta = getTimestamp() - timestampStart - emulationTime;\n                } while (delta < THRESHOLD);\n\n                emulationTime += worker(context, delta) as number;\n            }\n\n            delta = getTimestamp() - timestampStart - emulationTime;\n            if (delta > 0) {\n                emulationTime += worker(context, delta) as number;\n            }\n\n            if (running) {\n                setImmediate(handler);\n            }\n        }\n\n        setImmediate(handler);\n\n        return { stop: () => (running = false) };\n    }\n}\n\nexport { ConstantTimesliceScheduler as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport SchedulerInterface from '../SchedulerInterface';\nimport TaskInterface from '../TaskInterface';\nimport getTimestamp from '../getTimestamp';\nimport { setImmediate } from '../setImmediate';\n\nconst CORRECTION_THESHOLD = 3,\n    MAX_ACCUMULATED_DELTA = 100;\n\nclass ConstantCyclesScheduler implements SchedulerInterface {\n    start<T>(worker: SchedulerInterface.WorkerInterface<T>, context?: T): TaskInterface {\n        let terminate = false,\n            targetSleepInterval = -1,\n            lastYieldTimestamp = 0,\n            accumulatedDelta = 0;\n\n        function handler() {\n            if (terminate) {\n                return;\n            }\n\n            const timestamp0 = getTimestamp(),\n                targetDuration = worker(context) || 0,\n                timestamp1 = getTimestamp();\n\n            let delay = targetDuration - timestamp1 + timestamp0;\n\n            if (targetSleepInterval >= 0) {\n                accumulatedDelta += targetSleepInterval - timestamp0 + lastYieldTimestamp;\n            }\n\n            if (accumulatedDelta > MAX_ACCUMULATED_DELTA) {\n                accumulatedDelta = MAX_ACCUMULATED_DELTA;\n            } else if (accumulatedDelta < -MAX_ACCUMULATED_DELTA) {\n                accumulatedDelta = -MAX_ACCUMULATED_DELTA;\n            }\n\n            if (Math.abs(accumulatedDelta) > CORRECTION_THESHOLD) {\n                delay += accumulatedDelta;\n                accumulatedDelta = 0;\n            }\n\n            if (delay < 0) {\n                delay = 0;\n                accumulatedDelta = delay;\n            }\n\n            if (delay > 0) {\n                setTimeout(handler, Math.round(delay));\n            } else {\n                setImmediate(handler);\n            }\n\n            targetSleepInterval = delay;\n            lastYieldTimestamp = getTimestamp();\n        }\n\n        setImmediate(handler);\n\n        return {\n            stop: () => (terminate = true)\n        };\n    }\n}\n\nexport { ConstantCyclesScheduler as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport SchedulerInterface from '../SchedulerInterface';\nimport TaskInterface from '../TaskInterface';\nimport getTimestamp from '../getTimestamp';\nimport { setImmediate } from '../setImmediate';\n\nconst SAFETY_FACTOR = 3;\n\nclass ConstantTimesliceScheduler implements SchedulerInterface {\n    start<T>(worker: SchedulerInterface.WorkerInterface<T>, context?: T, _timeSlice?: number): TaskInterface {\n        const timeSlice = _timeSlice || 100;\n\n        let timestamp0 = getTimestamp(),\n            emulationTime = 0,\n            running = true;\n\n        function handler() {\n            if (!running) {\n                return;\n            }\n\n            const timestamp = getTimestamp();\n            let delta = timestamp - timestamp0 - emulationTime;\n\n            if (delta > SAFETY_FACTOR * timeSlice) {\n                delta = SAFETY_FACTOR * timeSlice;\n                timestamp0 = timestamp - delta;\n                emulationTime = 0;\n            }\n\n            emulationTime += worker(context, delta) as number;\n\n            const timeToSleep = timeSlice - getTimestamp() + timestamp;\n\n            if (timeToSleep > 0) {\n                setTimeout(handler, timeToSleep);\n            } else {\n                setImmediate(handler);\n            }\n        }\n\n        setImmediate(handler);\n\n        return { stop: () => (running = false) };\n    }\n}\n\nexport { ConstantTimesliceScheduler as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport SchedulerInterface from './SchedulerInterface';\nimport PeriodicScheduler from './PeriodicScheduler';\nimport ImmediateScheduler from './ImmedateScheduler';\n\nimport BusyWaitScheduler from './limiting/BusyWait';\nimport ConstantCyclesScheduler from './limiting/ConstantCycles';\nimport ConstantTimesliceScheduler from './limiting/ConstantTimeslice';\n\nclass Factory {\n    createPeriodicScheduler(period: number): PeriodicScheduler {\n        return new PeriodicScheduler(period);\n    }\n\n    createImmediateScheduler(): SchedulerInterface {\n        return new ImmediateScheduler();\n    }\n\n    createLimitingScheduler(strategy = Factory.LimitingSchedulingStrategy.constantCycles) {\n        switch (strategy) {\n            case Factory.LimitingSchedulingStrategy.busyWait:\n                return new BusyWaitScheduler();\n\n            case Factory.LimitingSchedulingStrategy.constantCycles:\n                return new ConstantCyclesScheduler();\n\n            case Factory.LimitingSchedulingStrategy.constantTimeslice:\n                return new ConstantTimesliceScheduler();\n\n            default:\n                throw new Error('invalud limiting scheduling strategy');\n        }\n    }\n\n    getLimitingSchedulingStrategies(): Array<Factory.LimitingSchedulingStrategy> {\n        return [\n            Factory.LimitingSchedulingStrategy.busyWait,\n            Factory.LimitingSchedulingStrategy.constantCycles,\n            Factory.LimitingSchedulingStrategy.constantTimeslice\n        ];\n    }\n\n    describeLimitingSchedulingStrategy(strategy: Factory.LimitingSchedulingStrategy): string {\n        switch (strategy) {\n            case Factory.LimitingSchedulingStrategy.busyWait:\n                return 'Busy wait, constant timeslice length';\n\n            case Factory.LimitingSchedulingStrategy.constantCycles:\n                return 'Constant cycle count';\n\n            case Factory.LimitingSchedulingStrategy.constantTimeslice:\n                return 'Constant timeslice length';\n\n            default:\n                throw new Error('invalid limiting scheduling strategy');\n        }\n    }\n}\n\nnamespace Factory {\n    export const enum LimitingSchedulingStrategy {\n        busyWait,\n        constantCycles,\n        constantTimeslice\n    }\n}\n\nexport { Factory as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event, EventInterface } from 'microevent.ts';\n\nimport SchedulerInterface from './scheduler/SchedulerInterface';\nimport TaskInterface from './scheduler/TaskInterface';\n\nclass ClockProbe {\n    constructor(private _scheduler: SchedulerInterface) {}\n\n    attach(clock: EventInterface<any>): ClockProbe {\n        if (this._clock) {\n            this.detach();\n        }\n\n        this._clock = clock;\n        clock.addHandler(this._clockHandler, this);\n\n        return this;\n    }\n\n    start(): ClockProbe {\n        if (this._measurementTask) {\n            return this;\n        }\n\n        this._timestamp = Date.now();\n        this._counter = 0;\n        this._measurementTask = this._scheduler.start(this._updateMeasurement, this);\n\n        return this;\n    }\n\n    detach(): ClockProbe {\n        if (!this._clock) {\n            return this;\n        }\n\n        this._clock.removeHandler(this._clockHandler, this);\n        this._clock = undefined;\n\n        return this;\n    }\n\n    stop(): ClockProbe {\n        if (!this._measurementTask) {\n            return this;\n        }\n\n        this._measurementTask.stop();\n        this._measurementTask = undefined;\n\n        return this;\n    }\n\n    getFrequency(): number {\n        return this._frequency;\n    }\n\n    private _updateMeasurement(probe: ClockProbe) {\n        const timestamp = Date.now();\n\n        probe._frequency = probe._counter / (timestamp - probe._timestamp) * 1000;\n\n        probe._counter = 0;\n        probe._timestamp = timestamp;\n\n        probe.frequencyUpdate.dispatch(probe._frequency);\n    }\n\n    private _clockHandler(clocks: number, ctx: ClockProbe) {\n        ctx._counter += clocks;\n    }\n\n    frequencyUpdate = new Event<number>();\n\n    private _counter = 0;\n    private _timestamp: number;\n    private _frequency = 0;\n\n    private _clock: EventInterface<any>;\n\n    private _measurementTask: TaskInterface;\n}\n\nexport { ClockProbe as default };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Mutex = /** @class */ (function () {\n    function Mutex() {\n        this._queue = [];\n        this._pending = false;\n    }\n    Mutex.prototype.isLocked = function () {\n        return this._pending;\n    };\n    Mutex.prototype.acquire = function () {\n        var _this = this;\n        var ticket = new Promise(function (resolve) { return _this._queue.push(resolve); });\n        if (!this._pending) {\n            this._dispatchNext();\n        }\n        return ticket;\n    };\n    Mutex.prototype.runExclusive = function (callback) {\n        return this\n            .acquire()\n            .then(function (release) {\n            var result;\n            try {\n                result = callback();\n            }\n            catch (e) {\n                release();\n                throw (e);\n            }\n            return Promise\n                .resolve(result)\n                .then(function (x) { return (release(), x); }, function (e) {\n                release();\n                throw e;\n            });\n        });\n    };\n    Mutex.prototype._dispatchNext = function () {\n        if (this._queue.length > 0) {\n            this._pending = true;\n            this._queue.shift()(this._dispatchNext.bind(this));\n        }\n        else {\n            this._pending = false;\n        }\n    };\n    return Mutex;\n}());\nexports.default = Mutex;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Mutex_1 = require(\"./Mutex\");\nexports.Mutex = Mutex_1.default;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event, EventInterface } from 'microevent.ts';\n\nimport EmulationServiceInterface from '../EmulationServiceInterface';\nimport EmulationContext from './EmulationContext';\nimport Board from '../../../../machine/stella/Board';\nimport BoardInterface from '../../../../machine/board/BoardInterface';\nimport CartridgeFactory from '../../../../machine/stella/cartridge/CartridgeFactory';\nimport CartridgeInfo from '../../../../machine/stella/cartridge/CartridgeInfo';\nimport SchedulerInterface from '../../../../tools/scheduler/SchedulerInterface';\nimport DataTap from '../../../../machine/stella/DataTap';\nimport SchedulerFactory from '../../../../tools/scheduler/Factory';\nimport ClockProbe from '../../../../tools/ClockProbe';\nimport PeriodicScheduler from '../../../../tools/scheduler/PeriodicScheduler';\nimport { ProcessorConfig as VideoProcessorConfig } from '../../../../video/processing/config';\nimport { Mutex } from 'async-mutex';\n\nconst CLOCK_UPDATE_INTERVAL = 2000;\n\nexport default class EmulationService implements EmulationServiceInterface {\n    constructor() {\n        this.frequencyUpdate = this._clockProbe.frequencyUpdate;\n        this._updateScheduler();\n    }\n\n    init(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    start(\n        buffer: { [i: number]: number; length: number },\n        config: EmulationServiceInterface.Config,\n        cartridgeType?: CartridgeInfo.CartridgeType,\n        videoProcessing?: Array<VideoProcessorConfig>\n    ): Promise<EmulationServiceInterface.State> {\n        const factory = new CartridgeFactory();\n\n        return this._mutex.runExclusive(async () => {\n            try {\n                this._stop();\n\n                this._limitingStrategy = config.pcmAudio\n                    ? SchedulerFactory.LimitingSchedulingStrategy.constantTimeslice\n                    : SchedulerFactory.LimitingSchedulingStrategy.constantCycles;\n                this._updateScheduler();\n\n                if (this._state === EmulationServiceInterface.State.error) {\n                    return this._state;\n                }\n\n                const cartridge = await factory.createCartridge(buffer, cartridgeType),\n                    board = new Board(config, cartridge);\n\n                this._board = board;\n                this._board.trap.addHandler(EmulationService._trapHandler, this);\n\n                if (config.dataTap) {\n                    this._dataTap = new DataTap(board);\n                }\n\n                this._context = new EmulationContext(board, this._dataTap, videoProcessing);\n\n                this._clockProbe.attach(this._board.clock);\n\n                this._setState(EmulationServiceInterface.State.paused);\n            } catch (e) {\n                this._setError(e);\n            }\n\n            return this._state;\n        });\n    }\n\n    stop(): Promise<EmulationServiceInterface.State> {\n        return this._mutex.runExclusive(() => this._stop());\n    }\n\n    pause(): Promise<EmulationServiceInterface.State> {\n        return this._mutex.runExclusive(() => {\n            try {\n                if (this._state === EmulationServiceInterface.State.running) {\n                    this._board.getTimer().stop();\n                    this._board.suspend();\n                    this._setState(EmulationServiceInterface.State.paused);\n\n                    this._clockProbe.stop();\n                }\n            } catch (e) {\n                this._setError(e);\n            }\n\n            return this._state;\n        });\n    }\n\n    resume(): Promise<EmulationServiceInterface.State> {\n        return this._mutex.runExclusive(() => {\n            if (this._state === EmulationServiceInterface.State.paused) {\n                try {\n                    this._tryToResume();\n                } catch (e) {\n                    this._setError(e);\n                }\n            }\n\n            return this._state;\n        });\n    }\n\n    reset(): Promise<EmulationServiceInterface.State> {\n        return this._mutex.runExclusive(() => {\n            try {\n                switch (this._state) {\n                    case EmulationServiceInterface.State.running:\n                    case EmulationServiceInterface.State.paused:\n                        this._board.reset();\n\n                        break;\n\n                    case EmulationServiceInterface.State.error:\n                        this._board.reset();\n                        this._tryToResume();\n\n                        break;\n                }\n            } catch (e) {\n                this._setError(e);\n            }\n\n            return this._state;\n        });\n    }\n\n    getState(): EmulationServiceInterface.State {\n        return this._state;\n    }\n\n    getEmulationContext(): EmulationContext {\n        switch (this._state) {\n            case EmulationServiceInterface.State.running:\n            case EmulationServiceInterface.State.paused:\n                return this._context;\n\n            default:\n                return null;\n        }\n    }\n\n    getLastError(): Error {\n        return this._lastError;\n    }\n\n    getFrequency(): number {\n        return this._clockProbe.getFrequency();\n    }\n\n    getRateLimit(): boolean {\n        return this._enforceRateLimit;\n    }\n\n    setRateLimit(enforce: boolean): Promise<void> {\n        if (this._enforceRateLimit === enforce) {\n            return Promise.resolve(undefined);\n        }\n\n        return this._mutex.runExclusive(() => {\n            if (this._state === EmulationServiceInterface.State.running) {\n                this._board.getTimer().stop();\n            }\n\n            this._enforceRateLimit = enforce;\n            this._updateScheduler();\n\n            if (this._state === EmulationServiceInterface.State.running) {\n                this._board.getTimer().start(this._scheduler);\n            }\n        });\n    }\n\n    private static _trapHandler(trap: BoardInterface.TrapPayload, self: EmulationService) {\n        self._setError(new Error(`TRAP: ${trap.message}`));\n        self.emulationError.dispatch(self._lastError);\n    }\n\n    private _stop(): EmulationServiceInterface.State {\n        try {\n            if (this._state === EmulationServiceInterface.State.running) {\n                this._board.getTimer().stop();\n                this._board.suspend();\n                this._board.trap.removeHandler(EmulationService._trapHandler, this);\n\n                this._clockProbe.stop().detach();\n            }\n\n            this._board = null;\n            this._context = null;\n            this._dataTap = undefined;\n\n            this._setState(EmulationServiceInterface.State.stopped);\n        } catch (e) {\n            this._setError(e);\n        }\n\n        return this._state;\n    }\n\n    private _tryToResume(): void {\n        if (this._state === EmulationServiceInterface.State.running) {\n            return;\n        }\n\n        this._board.getTimer().start(this._scheduler);\n        this._board.resume();\n        this._setState(EmulationServiceInterface.State.running);\n\n        this._clockProbe.start();\n    }\n\n    private _setError(e: Error): void {\n        this._lastError = e;\n        this._setState(EmulationServiceInterface.State.error);\n    }\n\n    private _setState(state: EmulationServiceInterface.State): EmulationServiceInterface.State {\n        if (state !== this._state) {\n            this._state = state;\n            this.stateChanged.dispatch(state);\n        }\n\n        return this._state;\n    }\n\n    private _updateScheduler(): void {\n        this._scheduler = this._enforceRateLimit\n            ? this._schedulerFactory.createLimitingScheduler(this._limitingStrategy)\n            : this._schedulerFactory.createImmediateScheduler();\n    }\n\n    stateChanged = new Event<EmulationServiceInterface.State>();\n    emulationError = new Event<Error>();\n    frequencyUpdate: EventInterface<number>;\n\n    private _enforceRateLimit = true;\n    private _state = EmulationServiceInterface.State.stopped;\n    private _lastError: Error = null;\n    private _board: Board;\n    private _context: EmulationContext;\n    private _dataTap: DataTap;\n    private _scheduler: SchedulerInterface = null;\n    private _clockProbe = new ClockProbe(new PeriodicScheduler(CLOCK_UPDATE_INTERVAL));\n    private _mutex = new Mutex();\n    private _schedulerFactory = new SchedulerFactory();\n    private _limitingStrategy = SchedulerFactory.LimitingSchedulingStrategy.constantCycles;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport EmulationServiceInterface from './EmulationServiceInterface';\nimport EmulationContextInterface from './EmulationContextInterface';\n\nclass DriverManager {\n    bind(emulationService: EmulationServiceInterface): this {\n        if (this._driversBound) {\n            return this;\n        }\n\n        this._emulationService = emulationService;\n\n        if (this._shouldBindDrivers()) {\n            this._bindDrivers();\n        }\n\n        this._emulationService.stateChanged.addHandler(DriverManager._onEmuStateChange, this);\n\n        return this;\n    }\n\n    unbind(): this {\n        if (!this._emulationService) {\n            return this;\n        }\n\n        this._unbindDrivers();\n\n        this._emulationService.stateChanged.removeHandler(DriverManager._onEmuStateChange, this);\n\n        this._emulationService = null;\n\n        return this;\n    }\n\n    addDriver(driver: DriverManager.Driver, binder: DriverManager.Binder): this {\n        this._drivers.set(driver, new DriverManager.DriverContext(driver, binder));\n\n        if (this._driversBound) {\n            binder(this._emulationService.getEmulationContext(), driver);\n        }\n\n        return this;\n    }\n\n    removeDriver(driver: DriverManager.Driver): this {\n        if (!this._drivers.get(driver)) {\n            return this;\n        }\n\n        driver.unbind();\n\n        this._drivers.delete(driver);\n\n        return this;\n    }\n\n    private static _onEmuStateChange(newState: EmulationServiceInterface.State, self: DriverManager): void {\n        if (self._shouldBindDrivers(newState)) {\n            self._bindDrivers();\n        } else {\n            self._unbindDrivers();\n        }\n    }\n\n    private _shouldBindDrivers(\n        state = this._emulationService ? this._emulationService.getState() : undefined\n    ): boolean {\n        return (\n            this._emulationService &&\n            (state === EmulationServiceInterface.State.running || state === EmulationServiceInterface.State.paused)\n        );\n    }\n\n    private _bindDrivers(): void {\n        if (this._driversBound) {\n            return;\n        }\n\n        this._drivers.forEach(driverContext =>\n            driverContext.binder(this._emulationService.getEmulationContext(), driverContext.driver)\n        );\n\n        this._driversBound = true;\n    }\n\n    private _unbindDrivers(): void {\n        if (!this._driversBound) {\n            return;\n        }\n\n        this._drivers.forEach(driverContext => driverContext.driver.unbind());\n\n        this._driversBound = false;\n    }\n\n    private _emulationService: EmulationServiceInterface;\n    private _drivers = new Map<DriverManager.Driver, DriverManager.DriverContext>();\n    private _driversBound = false;\n}\n\nnamespace DriverManager {\n    export interface Driver {\n        unbind(): void;\n    }\n\n    export interface Binder {\n        (context: EmulationContextInterface, driver: Driver): void;\n    }\n\n    export class DriverContext {\n        constructor(public driver: Driver, public binder: Binder) {}\n    }\n}\n\nexport { DriverManager as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { ProcessorConfig } from '../config';\n\nexport const messageIds = {\n    configure: 'pipeline/configure',\n    flush: 'pipeline/flush',\n    process: 'pipeline/process',\n    emit: 'pipeline/emit',\n    release: 'pipeline/release'\n};\nObject.freeze(messageIds);\n\nexport interface ConfigureMessage {\n    width: number;\n    height: number;\n    config: Array<ProcessorConfig>;\n}\n\nexport interface FlushMessage {}\n\nexport interface ProcessMessage {\n    id: number;\n    buffer: ArrayBuffer;\n    width: number;\n    height: number;\n}\n\nexport interface EmitMessage {\n    id: number;\n    buffer: ArrayBuffer;\n}\n\nexport interface ReleaseMessage {\n    id: number;\n    buffer: ArrayBuffer;\n}\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { RpcProviderInterface, RpcProvider } from 'worker-rpc';\nimport { Event } from 'microevent.ts';\n\nimport * as messages from './messages';\nimport ArrayBufferSurface from '../../surface/ArrayBufferSurface';\nimport PoolMemberInterface from '../../../tools/pool/PoolMemberInterface';\nimport { ProcessorConfig } from '../config';\n\nclass PipelineClient {\n    constructor(private _rpc: RpcProviderInterface) {\n        this._rpc\n            .registerSignalHandler(messages.messageIds.emit, this._onMessageEmit.bind(this))\n            .registerSignalHandler(messages.messageIds.release, this._onMessageRelease.bind(this));\n    }\n\n    static spawn(workerUrl = 'video-pipeline.js'): PipelineClient {\n        const worker = new Worker(workerUrl),\n            rpc = new RpcProvider((message: any, transfer: Array<any>) => worker.postMessage(message, transfer));\n\n        worker.onmessage = messageEvent => rpc.dispatch(messageEvent.data);\n\n        return new PipelineClient(rpc);\n    }\n\n    configure(width: number, height: number, videoConfig?: Array<ProcessorConfig>): Promise<any> {\n        return this._rpc.rpc(messages.messageIds.configure, {\n            width,\n            height,\n            config: videoConfig\n        } as messages.ConfigureMessage);\n    }\n\n    flush(): Promise<any> {\n        return this._rpc.rpc(messages.messageIds.flush);\n    }\n\n    processSurface(managedSurface: PoolMemberInterface<ArrayBufferSurface>): void {\n        const id = this._nextId++,\n            surface = managedSurface.get(),\n            buffer = surface.getUnderlyingBuffer();\n\n        this._surfaces.set(id, managedSurface);\n\n        this._rpc.signal(\n            messages.messageIds.process,\n            {\n                id,\n                width: surface.getWidth(),\n                height: surface.getHeight(),\n                buffer\n            } as messages.ProcessMessage,\n            [buffer]\n        );\n    }\n\n    private _onMessageEmit(msg: messages.EmitMessage): void {\n        if (!this._surfaces.has(msg.id)) {\n            throw new Error(`no surface with id ${msg.id}`);\n        }\n\n        const managedSurface = this._surfaces.get(msg.id),\n            surface = managedSurface.get();\n\n        this._surfaces.delete(msg.id);\n        surface.replaceUnderlyingBuffer(surface.getWidth(), surface.getHeight(), msg.buffer);\n\n        this.emit.dispatch(managedSurface);\n    }\n\n    private _onMessageRelease(msg: messages.ReleaseMessage): void {\n        if (!this._surfaces.has(msg.id)) {\n            throw new Error(`no surface with id ${msg.id}`);\n        }\n\n        const managedSurface = this._surfaces.get(msg.id),\n            surface = managedSurface.get();\n\n        this._surfaces.delete(msg.id);\n        surface.replaceUnderlyingBuffer(surface.getWidth(), surface.getHeight(), msg.buffer);\n\n        managedSurface.release();\n    }\n\n    emit = new Event<PoolMemberInterface<ArrayBufferSurface>>();\n\n    private _nextId = 0;\n    private _surfaces = new Map<number, PoolMemberInterface<ArrayBufferSurface>>();\n}\n\nexport { PipelineClient as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport EventServiceInterface from '../EmulationServiceInterface';\nimport CartridgeInfo from '../../../../machine/stella/cartridge/CartridgeInfo';\nimport { ProcessorConfig as VideoProcessorConfig } from '../../../../video/processing/config';\n\nexport const RPC_TYPE = {\n    emulationPause: 'emulation/pause',\n    emulationReset: 'emulation/reset',\n    emulationResume: 'emulation/resume',\n    emulationSetRateLimit: 'emulation/setRateLimit',\n    emulationStart: 'emulation/start',\n    emulationStop: 'emulation/stop',\n    emulationFetchLastError: 'emulation/fetchLastError',\n    getVideoParameters: 'video/getParameters',\n    getWaveformAudioParameters: (index: number) => `audio/waveform/getParameters/${index}`,\n    getPCMAudioParameters: (index: number) => `audio/pcm/getParameters/${index}`,\n    setup: '/setup'\n};\nObject.freeze(RPC_TYPE);\n\nexport const SIGNAL_TYPE = {\n    emulationError: 'emulation/error',\n    emulationFrequencyUpdate: 'emulation/frequencyUpdate',\n    videoNewFrame: 'video/newFrame',\n    videoReturnSurface: 'video/returnSurface',\n    controlStateUpdate: 'control/stateUpdate',\n    waveformAudioVolumeChange: 'audio/waveform/volumeChange',\n    waveformAudioBufferChange: 'audio/waveform/bufferChange',\n    pcmAudioNewFrame: (index: number) => `audio/pcm/newFrame/${index}`,\n    pcmAudioTogglePause: (index: number) => `audio/pcm/togglePause/${index}`,\n    pcmAudioReturnFrame: (index: number) => `audio/pcm/returnFrame/${index}`,\n    audioStop: 'audio/stop',\n    messageFromDataTap: 'data-tap/message'\n};\nObject.freeze(SIGNAL_TYPE);\n\nexport interface SetupMessage {\n    videoProcessorPort: MessagePort;\n}\n\nexport interface EmulationStartMessage {\n    buffer: { [i: number]: number; length: number };\n    config: EventServiceInterface.Config;\n    cartridgeType?: CartridgeInfo.CartridgeType;\n    videoProcessing?: Array<VideoProcessorConfig>;\n}\n\nexport interface VideoParametersResponse {\n    width: number;\n    height: number;\n}\n\nexport interface WaveformAudioParametersResponse {\n    volume: number;\n}\n\nexport interface VideoNewFrameMessage {\n    id: number;\n    width: number;\n    height: number;\n    buffer: ArrayBuffer;\n}\n\nexport interface VideoReturnSurfaceMessage {\n    id: number;\n    buffer: ArrayBuffer;\n}\n\nexport interface WaveformAudioVolumeChangeMessage {\n    index: number;\n    value: number;\n}\n\nexport interface WaveformAudioBufferChangeMessage {\n    index: number;\n    key: number;\n}\n\nexport interface PCMAudioParametersResponse {\n    sampleRate: number;\n    frameSize: number;\n    paused: boolean;\n}\n\nexport interface PCMAudioNewFrameMessage {\n    buffer: ArrayBuffer;\n    id: number;\n}\n\nexport interface PCMAudioTogglePauseMessage {\n    paused: boolean;\n}\n\nexport interface PCMAudioReturnFrameMessage {\n    id: number;\n    buffer: ArrayBuffer;\n}\n\nexport type MessageFromDataTapMessage = Array<number>;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Mutex } from 'async-mutex';\nimport { RpcProviderInterface, RpcProvider } from 'worker-rpc';\n\nimport VideoOutputInterface from '../../../../machine/io/VideoOutputInterface';\nimport ObjectPool from '../../../../tools/pool/Pool';\nimport ObjectPoolMember from '../../../../tools/pool/PoolMember';\nimport ArrayBufferSurface from '../../../../video/surface/ArrayBufferSurface';\nimport VideoPipelineClient from '../../../../video/processing/worker/PipelineClient';\nimport { ProcessorConfig as VideoProcessorConfig } from '../../../../video/processing/config';\n\nimport {\n    SIGNAL_TYPE,\n    RPC_TYPE,\n    VideoNewFrameMessage,\n    VideoReturnSurfaceMessage,\n    VideoParametersResponse\n} from './messages';\n\nclass VideoDriver {\n    constructor(private _rpc: RpcProviderInterface) {}\n\n    init(videoPipelinePort?: MessagePort): void {\n        this._rpc\n            .registerSignalHandler(SIGNAL_TYPE.videoReturnSurface, this._onReturnSurfaceFromHost.bind(this))\n            .registerRpcHandler(RPC_TYPE.getVideoParameters, this._onGetVideoParameters.bind(this));\n\n        if (videoPipelinePort) {\n            const videoPipelineRpc = new RpcProvider((data: any, transfer?: any) =>\n                videoPipelinePort.postMessage(data, transfer)\n            );\n            videoPipelinePort.onmessage = (e: MessageEvent) => videoPipelineRpc.dispatch(e.data);\n\n            this._videoPipelineClient = new VideoPipelineClient(videoPipelineRpc);\n\n            this._videoPipelineClient.emit.addHandler(VideoDriver._onEmitFromPipeline, this);\n        }\n    }\n\n    setVideoProcessingConfig(config: Array<VideoProcessorConfig>): void {\n        this._videoProcessingConfig = config;\n    }\n\n    bind(video: VideoOutputInterface): void {\n        this._mutex.runExclusive(() => this._bind(video));\n    }\n\n    unbind(): void {\n        this._mutex.runExclusive(() => this._unbind());\n    }\n\n    private static _onEmitFromPipeline(surface: ObjectPoolMember<ArrayBufferSurface>, self: VideoDriver) {\n        if (!self._active) {\n            console.warn('surface emmited from pipeline to inactive driver');\n            return;\n        }\n\n        if (!self._ids.has(surface)) {\n            console.warn('surface not registered');\n            return;\n        }\n\n        const buffer = surface.get().getUnderlyingBuffer(),\n            id = self._ids.get(surface);\n\n        self._rpc.signal<VideoNewFrameMessage>(\n            SIGNAL_TYPE.videoNewFrame,\n            {\n                id,\n                width: self._width,\n                height: self._height,\n                buffer\n            },\n            [buffer]\n        );\n    }\n\n    private static _onNewFrame(surface: ArrayBufferSurface, self: VideoDriver): void {\n        if (!self._active) {\n            console.warn('new frame passed to inactive driver');\n            return;\n        }\n\n        if (!self._managedSurfaces.has(surface)) {\n            console.warn(`surface not registered`);\n            return;\n        }\n\n        if (self._bypassProcessingPipeline || !self._videoPipelineClient) {\n            VideoDriver._onEmitFromPipeline(self._managedSurfaces.get(surface), self);\n        } else {\n            self._videoPipelineClient.processSurface(self._managedSurfaces.get(surface));\n        }\n    }\n\n    private async _bind(video: VideoOutputInterface): Promise<void> {\n        if (this._active) {\n            return;\n        }\n\n        this._width = video.getWidth();\n        this._height = video.getHeight();\n        this._video = video;\n\n        this._surfacePool = new ObjectPool<ArrayBufferSurface>(() =>\n            ArrayBufferSurface.createFromArrayBuffer(\n                this._width,\n                this._height,\n                new ArrayBuffer(4 * this._width * this._height)\n            )\n        );\n        this._managedSurfacesById = new Map<number, ObjectPoolMember<ArrayBufferSurface>>();\n        this._managedSurfaces = new WeakMap<ArrayBufferSurface, ObjectPoolMember<ArrayBufferSurface>>();\n        this._ids = new WeakMap<ObjectPoolMember<ArrayBufferSurface>, number>();\n\n        if (this._videoPipelineClient) {\n            await this._videoPipelineClient.configure(this._width, this._height, this._videoProcessingConfig);\n        }\n\n        this._video.setSurfaceFactory((): ArrayBufferSurface => {\n            const managedSurface = this._surfacePool.get(),\n                surface = managedSurface.get();\n\n            const isNewSurface = !this._ids.has(managedSurface);\n\n            if (isNewSurface) {\n                const id = this._nextId++;\n\n                this._ids.set(managedSurface, id);\n                this._managedSurfacesById.set(id, managedSurface);\n                this._managedSurfaces.set(surface, managedSurface);\n\n                surface.fill(0xff000000);\n            }\n\n            return managedSurface.get();\n        });\n\n        this._video.newFrame.addHandler(VideoDriver._onNewFrame, this);\n\n        this._bypassProcessingPipeline = !this._videoProcessingConfig || this._videoProcessingConfig.length === 0;\n        this._active = true;\n    }\n\n    private async _unbind(): Promise<void> {\n        if (!this._active) {\n            return;\n        }\n        this._active = false;\n\n        this._video.setSurfaceFactory(null);\n        this._video.newFrame.removeHandler(VideoDriver._onNewFrame, this);\n\n        if (this._videoPipelineClient) {\n            await this._videoPipelineClient.flush();\n        }\n\n        this._video = null;\n        this._surfacePool = null;\n        this._managedSurfacesById = null;\n        this._ids = null;\n    }\n\n    private _onReturnSurfaceFromHost(message: VideoReturnSurfaceMessage): void {\n        if (!this._active) {\n            console.warn('surface returned from host to inactive driver');\n            return;\n        }\n\n        const surface = this._managedSurfacesById.get(message.id);\n\n        if (!surface) {\n            console.warn(`invalid member ID ${message.id}`);\n            return;\n        }\n\n        surface.get().replaceUnderlyingBuffer(this._width, this._height, message.buffer);\n        surface.release();\n    }\n\n    private _onGetVideoParameters(): VideoParametersResponse {\n        return {\n            width: this._width,\n            height: this._height\n        };\n    }\n\n    private _active = false;\n\n    private _video: VideoOutputInterface = null;\n\n    private _videoPipelineClient: VideoPipelineClient = null;\n    private _mutex = new Mutex();\n    private _videoProcessingConfig: Array<VideoProcessorConfig> = null;\n    private _bypassProcessingPipeline = true;\n\n    private _surfacePool: ObjectPool<ArrayBufferSurface> = null;\n    private _managedSurfacesById: Map<number, ObjectPoolMember<ArrayBufferSurface>> = null;\n    private _managedSurfaces: WeakMap<ArrayBufferSurface, ObjectPoolMember<ArrayBufferSurface>>;\n    private _ids: WeakMap<ObjectPoolMember<ArrayBufferSurface>, number> = null;\n    private _width = 0;\n    private _height = 0;\n\n    private _nextId = 0;\n}\n\nexport { VideoDriver as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport EmulationContextInterface from '../EmulationContextInterface';\nimport ControlState from './ControlState';\nimport { RpcProviderInterface } from 'worker-rpc';\nimport JoystickInterface from '../../../../machine/io/DigitalJoystickInterface';\nimport PaddleInterface from '../../../../machine/io/PaddleInterface';\nimport ControlPanelInterface from '../../../../machine/stella/ControlPanelInterface';\n\nimport { SIGNAL_TYPE } from './messages';\n\nclass ControlDriver {\n    constructor(private _rpc: RpcProviderInterface) {}\n\n    init(): void {\n        this._rpc.registerSignalHandler(SIGNAL_TYPE.controlStateUpdate, this._onControlStateUpdate.bind(this));\n    }\n\n    bind(emulationContext: EmulationContextInterface): void {\n        if (this._active) {\n            return;\n        }\n\n        this._active = true;\n        this._emulationContext = emulationContext;\n    }\n\n    unbind(): void {\n        if (!this._active) {\n            return;\n        }\n\n        this._active = false;\n        this._emulationContext = null;\n    }\n\n    private _onControlStateUpdate(controlState: ControlState): void {\n        if (!this._active) {\n            return;\n        }\n\n        for (let i = 0; i < 2; i++) {\n            this._applyJoystickState(controlState.joystickState[i], this._emulationContext.getJoystick(i));\n        }\n\n        for (let i = 0; i < 4; i++) {\n            this._applyPaddleState(controlState.paddleState[i], this._emulationContext.getPaddle(i));\n        }\n\n        this._applyControlPanelState(controlState.controlPanelState, this._emulationContext.getControlPanel());\n    }\n\n    private _applyJoystickState(state: ControlState.JoystickState, joystick: JoystickInterface): void {\n        joystick.getUp().toggle(state.up);\n        joystick.getDown().toggle(state.down);\n        joystick.getLeft().toggle(state.left);\n        joystick.getRight().toggle(state.right);\n        joystick.getFire().toggle(state.fire);\n    }\n\n    private _applyPaddleState(state: ControlState.PaddleState, paddle: PaddleInterface): void {\n        paddle.setValue(state.value);\n        paddle.getFire().toggle(state.fire);\n    }\n\n    private _applyControlPanelState(state: ControlState.ControlPanelState, panel: ControlPanelInterface): void {\n        panel.getDifficultySwitchP0().toggle(state.difficulty0);\n        panel.getDifficultySwitchP1().toggle(state.difficulty1);\n        panel.getResetButton().toggle(state.reset);\n        panel.getColorSwitch().toggle(state.color);\n        panel.getSelectSwitch().toggle(state.select);\n    }\n\n    private _active = false;\n    private _emulationContext: EmulationContextInterface = null;\n}\n\nexport { ControlDriver as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { RpcProviderInterface } from 'worker-rpc';\nimport WaveformAudioOutputInterface from '../../../../machine/io/WaveformAudioOutputInterface';\n\nimport {\n    SIGNAL_TYPE,\n    RPC_TYPE,\n    WaveformAudioBufferChangeMessage,\n    WaveformAudioVolumeChangeMessage,\n    WaveformAudioParametersResponse\n} from './messages';\n\nclass WaveformAudioDriver {\n    constructor(private _index: number, private _rpc: RpcProviderInterface) {\n        this._rpc.registerRpcHandler(\n            RPC_TYPE.getWaveformAudioParameters(this._index),\n            this._onGetWaveformAudioParameters.bind(this)\n        );\n    }\n\n    bind(audio: WaveformAudioOutputInterface): void {\n        if (this._audio) {\n            return;\n        }\n\n        this._audio = audio;\n\n        this._audio.bufferChanged.addHandler(WaveformAudioDriver._onBufferChanged, this);\n        this._audio.volumeChanged.addHandler(WaveformAudioDriver._onVolumeChanged, this);\n        this._audio.stop.addHandler(WaveformAudioDriver._onStop, this);\n    }\n\n    unbind(): void {\n        if (!this._audio) {\n            return;\n        }\n\n        this._audio.bufferChanged.removeHandler(WaveformAudioDriver._onBufferChanged, this);\n        this._audio.volumeChanged.removeHandler(WaveformAudioDriver._onVolumeChanged, this);\n        this._audio.stop.removeHandler(WaveformAudioDriver._onStop, this);\n\n        this._audio = null;\n    }\n\n    private static _onBufferChanged(key: number, self: WaveformAudioDriver) {\n        self._rpc.signal<WaveformAudioBufferChangeMessage>(SIGNAL_TYPE.waveformAudioBufferChange, {\n            index: self._index,\n            key\n        });\n    }\n\n    private static _onVolumeChanged(value: number, self: WaveformAudioDriver) {\n        self._rpc.signal<WaveformAudioVolumeChangeMessage>(SIGNAL_TYPE.waveformAudioVolumeChange, {\n            index: self._index,\n            value\n        });\n    }\n\n    private static _onStop(value: void, self: WaveformAudioDriver) {\n        self._rpc.signal<number>(SIGNAL_TYPE.audioStop, self._index);\n    }\n\n    private _onGetWaveformAudioParameters(): WaveformAudioParametersResponse {\n        return { volume: this._audio.getVolume() };\n    }\n\n    private _audio: WaveformAudioOutputInterface = null;\n}\n\nexport { WaveformAudioDriver as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { RpcProviderInterface } from 'worker-rpc';\n\nimport PoolMemberInterface from '../../../../tools/pool/PoolMemberInterface';\nimport PCMAudioEndpointInterface from '../../../driver/PCMAudioEndpointInterface';\nimport {\n    RPC_TYPE,\n    SIGNAL_TYPE,\n    PCMAudioParametersResponse,\n    PCMAudioNewFrameMessage,\n    PCMAudioReturnFrameMessage,\n    PCMAudioTogglePauseMessage\n} from './messages';\n\nclass PCMAudioDriver {\n    constructor(index: number, private _rpc: RpcProviderInterface) {\n        this._rpc\n            .registerRpcHandler(RPC_TYPE.getPCMAudioParameters(index), this._onGetPCMAudioParameters.bind(this))\n            .registerSignalHandler(SIGNAL_TYPE.pcmAudioReturnFrame(index), this._onReturnFrame.bind(this));\n\n        this._signalNewFrame = SIGNAL_TYPE.pcmAudioNewFrame(index);\n        this._signalTogglePause = SIGNAL_TYPE.pcmAudioTogglePause(index);\n    }\n\n    bind(endpoint: PCMAudioEndpointInterface): void {\n        if (this._enabled) {\n            this.unbind();\n        }\n\n        this._endpoint = endpoint;\n\n        this._endpoint.newFrame.addHandler(PCMAudioDriver._onNewFrame, this);\n        this._endpoint.togglePause.addHandler(PCMAudioDriver._onTogglePause, this);\n\n        this._sampleRate = this._endpoint.getSampleRate();\n        this._frameSize = this._endpoint.getFrameSize();\n\n        this._enabled = true;\n    }\n\n    unbind(): void {\n        if (!this._enabled) {\n            return;\n        }\n\n        this._endpoint.newFrame.removeHandler(PCMAudioDriver._onNewFrame, this);\n        this._endpoint.togglePause.removeHandler(PCMAudioDriver._onTogglePause, this);\n        this._endpoint = null;\n\n        this._pendingFrames.clear();\n\n        this._sampleRate = this._frameSize = 0;\n\n        this._enabled = false;\n    }\n\n    private static _onNewFrame(frame: PoolMemberInterface<Float32Array>, self: PCMAudioDriver) {\n        if (!self._enabled) {\n            frame.dispose();\n            return;\n        }\n\n        const id = self._nextId++,\n            data = frame.get();\n        self._pendingFrames.set(id, frame);\n\n        self._rpc.signal<PCMAudioNewFrameMessage>(\n            self._signalNewFrame,\n            {\n                id,\n                buffer: data.buffer\n            },\n            [data.buffer]\n        );\n    }\n\n    private static _onTogglePause(paused: boolean, self: PCMAudioDriver) {\n        self._paused = paused;\n\n        self._rpc.signal<PCMAudioTogglePauseMessage>(self._signalTogglePause, {\n            paused\n        });\n    }\n\n    private _onGetPCMAudioParameters(): PCMAudioParametersResponse {\n        return {\n            sampleRate: this._sampleRate,\n            frameSize: this._frameSize,\n            paused: this._paused\n        };\n    }\n\n    private _onReturnFrame(msg: PCMAudioReturnFrameMessage): void {\n        if (!this._enabled || !this._pendingFrames.has(msg.id)) {\n            return;\n        }\n\n        const frame = this._pendingFrames.get(msg.id);\n        this._pendingFrames.delete(msg.id);\n\n        frame.adopt(new Float32Array(msg.buffer));\n        frame.release();\n    }\n\n    private _enabled = false;\n\n    private _endpoint: PCMAudioEndpointInterface;\n    private _sampleRate = 0;\n    private _frameSize = 0;\n\n    private _pendingFrames = new Map<number, PoolMemberInterface<Float32Array>>();\n    private _nextId = 0;\n\n    private _paused = false;\n\n    private _signalNewFrame = '';\n    private _signalTogglePause = '';\n}\n\nexport { PCMAudioDriver as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { Event } from 'microevent.ts';\nimport EmulationContextInterface from '../service/EmulationContextInterface';\n\nclass DataTap {\n    bind(context: EmulationContextInterface): void {\n        if (this._context) {\n            return;\n        }\n\n        const dataTap = context.getDataTap();\n\n        if (dataTap) {\n            dataTap.message.addHandler(DataTap._onDataTapMessage, this);\n        }\n\n        this._context = context;\n    }\n\n    unbind(): void {\n        if (!this._context) {\n            return;\n        }\n\n        const dataTap = this._context.getDataTap();\n\n        if (dataTap) {\n            dataTap.message.removeHandler(DataTap._onDataTapMessage, this);\n        }\n\n        this._context = null;\n    }\n\n    private static _onDataTapMessage(message: ArrayLike<number>, self: DataTap): void {\n        self.message.dispatch(message);\n    }\n\n    message = new Event<ArrayLike<number>>();\n\n    private _context: EmulationContextInterface = null;\n}\n\nexport default DataTap;\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport EmulationService from '../vanilla/EmulationService';\nimport EmulationServiceInterface from '../EmulationServiceInterface';\nimport { RpcProviderInterface } from 'worker-rpc';\nimport DriverManager from '../DriverManager';\nimport VideoDriver from './VideoDriver';\nimport ControlDriver from './ControlDriver';\nimport WaveformAudioDriver from './WaveformAudioDriver';\nimport PCMAudioDriver from './PCMAudioDriver';\nimport EmulationContext from '../vanilla/EmulationContext';\nimport DataTapDriver from '../../driver/DataTap';\n\nimport { RPC_TYPE, SIGNAL_TYPE, EmulationStartMessage, SetupMessage } from './messages';\n\nclass EmulationBackend {\n    constructor(private _rpc: RpcProviderInterface) {\n        this._service = new EmulationService();\n    }\n\n    startup(): void {\n        this._rpc\n            .registerRpcHandler(RPC_TYPE.setup, this._onSetup.bind(this))\n            .registerRpcHandler(RPC_TYPE.emulationFetchLastError, this._onFetchLastError.bind(this))\n            .registerRpcHandler(RPC_TYPE.emulationPause, this._onEmulationPause.bind(this))\n            .registerRpcHandler(RPC_TYPE.emulationReset, this._onEmulationReset.bind(this))\n            .registerRpcHandler(RPC_TYPE.emulationResume, this._onEmulationResume.bind(this))\n            .registerRpcHandler(RPC_TYPE.emulationSetRateLimit, this._onEmulationSetRateLimit.bind(this))\n            .registerRpcHandler(RPC_TYPE.emulationStart, this._onEmulationStart.bind(this))\n            .registerRpcHandler(RPC_TYPE.emulationStop, this._onEmulationStop.bind(this));\n\n        this._service.frequencyUpdate.addHandler(EmulationBackend._onFrequencyUpdate, this);\n        this._service.emulationError.addHandler(EmulationBackend._onEmulationError, this);\n\n        const driverManager = new DriverManager(),\n            videoDriver = new VideoDriver(this._rpc),\n            controlDriver = new ControlDriver(this._rpc),\n            waveformAduioDrivers = [0, 1].map(i => new WaveformAudioDriver(i, this._rpc)),\n            pcmAudioDriver = new PCMAudioDriver(0, this._rpc),\n            dataTapDriver = new DataTapDriver();\n\n        dataTapDriver.message.addHandler(message => this._rpc.signal(SIGNAL_TYPE.messageFromDataTap, message));\n\n        this._videoDriver = videoDriver;\n        controlDriver.init();\n\n        driverManager\n            .addDriver(videoDriver, (context: EmulationContext, driver: VideoDriver) =>\n                driver.bind(context.getRawVideo())\n            )\n            .addDriver(controlDriver, (context: EmulationContext, driver: ControlDriver) => driver.bind(context))\n            .addDriver(pcmAudioDriver, (context: EmulationContext, driver: PCMAudioDriver) =>\n                driver.bind(context.getPCMChannel())\n            )\n            .addDriver(dataTapDriver, (context: EmulationContext, driver: DataTapDriver) => driver.bind(context))\n            .bind(this._service);\n\n        for (let i = 0; i < 2; i++) {\n            driverManager.addDriver(waveformAduioDrivers[i], (context: EmulationContext, driver: WaveformAudioDriver) =>\n                driver.bind(context.getWaveformChannels()[i])\n            );\n        }\n    }\n\n    private static _onFrequencyUpdate(frequency: number, self: EmulationBackend): void {\n        self._rpc.signal<number>(SIGNAL_TYPE.emulationFrequencyUpdate, frequency);\n    }\n\n    private static _onEmulationError(error: Error, self: EmulationBackend): void {\n        self._rpc.signal<string>(SIGNAL_TYPE.emulationError, error ? error.message : null);\n    }\n\n    private _onSetup(msg: SetupMessage): void {\n        this._videoDriver.init(msg.videoProcessorPort);\n    }\n\n    private _onFetchLastError(): string {\n        const lastError = this._service.getLastError();\n\n        return lastError ? lastError.message : null;\n    }\n\n    private _onEmulationPause(): Promise<EmulationServiceInterface.State> {\n        return this._service.pause();\n    }\n\n    private _onEmulationReset(): Promise<EmulationServiceInterface.State> {\n        return this._service.reset();\n    }\n\n    private _onEmulationResume(): Promise<EmulationServiceInterface.State> {\n        return this._service.resume();\n    }\n\n    private _onEmulationStart(message: EmulationStartMessage): Promise<EmulationServiceInterface.State> {\n        this._videoDriver.setVideoProcessingConfig(message.videoProcessing);\n\n        return this._service.start(message.buffer, message.config, message.cartridgeType);\n    }\n\n    private _onEmulationStop(): Promise<EmulationServiceInterface.State> {\n        return this._service.stop();\n    }\n\n    private _onEmulationSetRateLimit(message: boolean): Promise<void> {\n        return this._service.setRateLimit(message);\n    }\n\n    private _service: EmulationService;\n    private _videoDriver: VideoDriver = null;\n}\n\nexport { EmulationBackend as default };\n","/*\n *   This file is part of 6502.ts, an emulator for 6502 based systems built\n *   in Typescript\n *\n *   Copyright (c) 2014 -- 2020 Christian Speckner and contributors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\nimport { getRpc } from '../rpc';\nimport EmulationBackend from '../../../src/web/stella/service/worker/EmulationBackend';\n\nconst emulationBackend = new EmulationBackend(getRpc());\nemulationBackend.startup();\n"],"names":["Object","defineProperty","exports","value","factories","getFactory","handlerCount","src","argsHandlers","argsContexts","i","push","Function","bind","apply","concat","compileFactory","callback","context","payload","Event","this","hasHandlers","_handlers","_contexts","_createDispatcher","prototype","addHandler","handler","isHandlerAttached","_updateHasHandlers","removeHandler","idx","_getHandlerIndex","splice","length","undefined","dispatch","Event_1","default","RpcProvider","_dispatch","_rpcTimeout","error","microevent_ts_1","_rpcHandlers","_signalHandlers","_pendingTransactions","_nextTransactionId","message","type","MessageType","signal","_handleSignal","rpc","_handeRpc","internal","_handleInternal","_raiseError","id","transfer","_this","transactionId","Promise","resolve","reject","transaction","timeoutHandle","setTimeout","_transactionTimeout","registerRpcHandler","Error","registerSignalHandler","deregisterRpcHandler","deregisterSignalHandler","filter","h","forEach","then","result","reason","_clearTransaction","clearTimeout","RpcProvider_1","rpcProvider","port","portPending","postMessage","onmessage","e","data","console","log","newPort","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__assign","assign","t","s","n","arguments","call","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","done","__values","o","m","Symbol","iterator","__read","ar","__await","v","EmulationServiceInterface","BoardInterface","CpuInterface","__","constructor","create","indexOf","getOwnPropertySymbols","propertyIsEnumerable","paramIndex","decorator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","op","TypeError","pop","il","k","a","j","jl","asyncIterator","q","resume","fulfill","settle","shift","cooked","raw","mod","__esModule","State","PoolMember","[object Object]","_value","_releaseCB","_disposeCB","Pool","_factory","release","dispose","member","_poolSize","newItem","victim","_releaseMember","_disposeMember","_pool","_isAvailable","_isDisposed","position","_poolPosition","event","get","ArrayBufferSurface","width","height","buffer","replaceUnderlyingBuffer","byteLength","_width","_height","_underlyingBuffer","_buffer","Uint32Array","InducedMember","_mapper","_adopter","InducedPool","WeakMap","original","_map","has","set","PassthroughProcessor","surface","emit","FrameMergeProcessor","flush","_nFramesOnHold","_framesOnHold","wrappedSurface","getHeight","getWidth","_process","buffer0","getBuffer","buffer1","ProcessorFactory","config","ProcessorPipeline","factory","_processors","map","cfg","processSurface","prc","init","VideoEndpoint","_video","videoProcessing","imageData","_surfaces","_videoProcessor","VideoProcessorPipeline","ObjectPool","ImageData","setSurfaceFactory","poolMember","newSurface","createFromArrayBuffer","fill","_poolMembers","newFrame","_surfacePool","AudioOutputBuffer","_content","_sampleRate","PCMAudioEndpoint","_output","Float32Array","getFrameSize","getSampleRate","getContent","_pcmDataPool","_audioBufferMap","togglePause","paused","setFrameBufferFactory","wrappedBuffer","_audioBufferPool","isPaused","EmulationContext","_board","_dataTap","_videoProcessing","getConfig","_videoEndpoint","getVideoOutput","getJoystick0","getJoystick1","getControlPanel","getPaddle","getWaveformChannels","_audioEndpoint","getPCMChannel","board","Bus","trap","read","write","tia","triggerTrap","_tia","pia","_pia","cartridge","_cartridge","address","_lastAddressBusValue","_lastDataBusValue","peek","TrapPayload","bus","Pia","_controlPanel","_joystick0","_joystick1","_rng","Uint8Array","reset","ram","int","_interruptFlag","_flagSetDuringThisCycle","_timerDivide","_subTimer","_timerValue","_timerWrapped","_readTimer","_readIo","_peekTimer","_writeTimer","_writeIo","_cycleTimer","_bus","_setTimer","divide","getUp","getDown","getLeft","getRight","getResetButton","getSelectSwitch","getColorSwitch","getDifficultySwitchP0","getDifficultySwitchP1","getLastDataBusValue","ResultImpl","nextStep","cycleType","poll","pollInterrupts","immutables","freezeImmutables","immutableProperties","prop","writable","configurable","Immutable","enumerable","Boot","state","_result","_pre1Step","_pre2Step","_stack1Step","_stack2Step","_state","_stack3Step","_readTargetLoStep","operand","_targetAddress","_readTargetHiStep","Interrupt","defaultVector","isBrk","_dummyRead","_isBrk","_pushPch","_pushPcl","_vector","nmi","_defaultVector","_pushFlags","flags","_fetchPcl","_fetchPch","irq","Instruction","operation","addressingMode","effectiveAddressingMode","OperationMap","__init","opcodes","opcode","_opcode","_operation","_addressingMode","_effectiveAdressingMode","Absolute","_fetchLo","_operand","_fetchHi","_next","AbsoluteIndexed","indexExtractor","writeOp","index","_indexExtractor","_carry","_writeOp","_dereferenceAndCarry","x","Dereference","_dereference","Immediate","_fetchOperand","IndexedIndirectX","_fetchAddress","_address","_addIndex","IndexedIndirectY","ZeroPage","ZeroPageIndexed","Branch","predicate","_fetchTarget","_predicate","_firstDummyRead","_target","_secondDummyRead","branch","Jsr","_addressLo","_dummyStackRead","ReadModifyWrite","_read","_dummyWrite","_write","readModifyWrite","Rts","_dummyOperandRead","_popPcl","_popPch","_incrementP","NullaryOneCycle","_executeOperation","nullaryOneCycle","Pull","_incrementS","_pull","pull","Push","_push","Rti","_popP","Write","setFlagsNZ","genRmw","genNullary","genUnary","adc","d0","d1","sum","aslImmediate","old","aslRmw","bit","cmp","getRegister","diff","sbc","lsrImmediate","lsrRmw","rolImmediate","rolRmw","rorImmediate","rorRmw","alr","dcp","axs","rra","rla","slo","aax","isc","aac","Indirect","_fetchAddressLo","_fetchAddressHi","Compiler","instruction","_createAddressing","ops.adc","deref","ops.genUnary","ops.aslImmediate","ops.aslRmw","ops.bit","ops.cmp","ops.genRmw","ops.genNullary","jsr","ops.lsrImmediate","ops.lsrRmw","ops.rolImmediate","ops.rolRmw","ops.rorImmediate","ops.rorRmw","rti","rts","ops.sbc","ops.aac","ops.aax","ops.alr","ops.arr","ops.axs","ops.dcp","ops.isc","ops.rla","ops.rra","ops.slo","dereference","immediate","zeroPage","absolute","zeroPageX","zeroPageY","absoluteX","absoluteY","indexedIndirectX","indirectIndexedY","indirect","StateMachineCpu","_opBoot","_opIrq","_opNmi","compiler","_operations","compile","executionState","_interruptPending","_nmiPending","_halt","_lastResult","_lastInstructionPointer","_invalidInstructionCallback","_fetch","_pollInterrupts","_pollInterruptsAfterLastInstruction","restoreFlagsFromStack","opAdc","opAnd","opAslAcc","opAslMem","opBit","opBrk","nextOpAddr","vector","readWord","opClc","opCld","opCli","opClv","opCmp","opCpx","opCpy","opDec","opDex","opEor","opDey","opInc","opInx","opIny","opJmp","opJsr","returnPtr","addrLo","opLda","opLdx","opLdy","opLsrAcc","opLsrMem","opNop","opOra","opPhp","opPlp","opPha","opPla","opRolAcc","opRolMem","opRorAcc","opRorMem","opRti","opRts","opSbc","opSec","opSed","opSei","opSta","opStx","opSty","opTax","opTay","opTsx","opTxa","opTxs","opTya","opAlr","opAxs","opDcp","opLax","opArr","opSlo","opAax","opLar","opIsc","opAac","opAtx","opRra","opRla","opBoot","dispatchInterrupt","opIrq","opNmi","BatchedAccessCpu","_halted","_opCycles","_instructionCallback","_interuptCheck","_checkForInterrupts","_currentAddressingMode","base","slowIndexedAccess","ops.opAdc","ops.opAnd","ops.opAslAcc","ops.opAslMem","ops.opNop","ops.opJmp","ops.opBit","ops.opBrk","ops.opClc","ops.opCld","ops.opCli","ops.opClv","ops.opCmp","ops.opCpx","ops.opCpy","ops.opDec","ops.opDex","ops.opDey","ops.opEor","ops.opInc","ops.opInx","ops.opIny","ops.opJsr","ops.opLda","ops.opLdx","ops.opLdy","ops.opLsrAcc","ops.opLsrMem","ops.opOra","ops.opPhp","ops.opPha","ops.opPla","ops.opPlp","ops.opRolAcc","ops.opRolMem","ops.opRorAcc","ops.opRorMem","ops.opRti","ops.opRts","ops.opSbc","ops.opSec","ops.opSed","ops.opSei","ops.opSta","ops.opStx","ops.opSty","ops.opTax","ops.opTay","ops.opTsx","ops.opTxa","ops.opTxs","ops.opTya","ops.opArr","ops.opAlr","ops.opAxs","ops.opDcp","ops.opLax","ops.opSlo","ops.opAax","ops.opLar","ops.opIsc","ops.opAac","ops.opAtx","ops.opRra","ops.opRla","Factory","_type","rng","Type","stateMachine","batchedAccess","Config","tvMode","enableAudio","randomSeed","emulatePaddles","frameStart","pcmAudio","cpuType","CpuFactory","encodings","decodeChar","charCodeAt","decodeNibble","decode","nibbles","decodedSize","padding","getPadding","decoded","nibble","FREQUENCY_DIVISIORS","decodeBase64","POLY0","Int8Array","POLY1","POLY2","POLY4","POLY5","POLY9","POLY68","POLYS","ToneGenerator","_config","tone","frequency","poly","content","sampleRate","getClockHz","count","offset","WaveformAudio","_toneGenerator","_volume","_tone","_frequency","_dispatchBufferChanged","volumeChanged","active","_active","stop","getKey","bufferChanged","_getKey","PCMChannel","_audc","_audf","_audv","_clkEnable","_noiseFeedback","_noiseCounterBit4","_pulseCounterHold","_divCounter","_noiseCounter","_pulseCounter","pulseFeedback","mixingTable","VOL_MAX","vol","PCMAudio","_frameSize","audv","_channel0","audc","audf","setActive","_channel1","_bufferIndex","_counter","phase0","_currentOutputBuffer","phase1","getLength","_dispatchBuffer","_isActive","isActive","_bufferFactory","decodes0","decodes1","decodes2","decodes3","decodes4","decodes6","decodesMissile","decodesPlayer","decodes","Missile","_collisionMask","_flushLineCache","color","_enabled","_rendering","_renderCounter","_moving","_hmmClocks","_decodes","_resmp","_enam","_effectiveWidth","_lastMovementTick","enam","enabled","counter","hblank","player","resmp","getRespClock","_widths","clock","tick","isReceivingHclock","collision","starfieldEffect","starfieldDelta","colorIn","Playfield","_pattern","_reflected","_refp","_pf0","_pf1","_pf2","_color","_colorP0","_colorP1","_colorMode","_applyColors","reflected","colorMode","_x","currentPixel","_colorLeft","_colorRight","Player","_patternNew","_patternOld","_delaying","_sampleCounter","_dividerPending","_dividerChangeCounter","_setDivider","pattern","_updatePattern","masked","oldDecodes","_divider","delta","oldReflected","oldDelaying","_renderCounterTripPoint","oldPatternOld","divider","Ball","_enabledOld","_enabledNew","enabledNewOldValue","_updateEnabled","oldEnabledOld","LatchedInput","_switch","_modeLatched","_latchedValue","PaddleReader","clockFreq","_paddle","_uThresh","Math","exp","valueChanged","_updateValue","provider","_cpuTimeProvider","_timestamp","_u","getValue","_dumped","oldValue","timestamp","FrameManager","_vblankLines","_kernelLines","_overscanLines","_frameStart","vblank","surfaceBuffer","_linesWithoutVsync","_vsync","_lineInState","_surface","_surfaceFactory","_setState","_startFrame","_finalizeFrame","vsync","_getReadableState","newState","DelayQueue","_length","size","_queue","QueueEntry","nextIndex","delay","currentIndex","_indices","remove","_nextIndex","scope","entry","addresses","values","NTSC","PAL","SECAM","Tia","joystick0","joystick1","paddles","_frameManager","_onNewFrame","_palette","_getPalette","_input0","getFire","_input1","_pcmAudio","pcmChannels","getChannels","_waveformAudio","_audio","_getClockFreq","_paddles","_hctr","_movementInProgress","_extendedHblank","_movementClock","_priority","_hstate","_colorBk","_linesSinceChange","_collisionUpdateRequired","_maxLinesTotal","_xDelta","_delayQueue","_missile0","_missile1","_player0","_player1","_playfield","_ball","_cpu","cpu","setCpuTimeProvider","lastDataBusValue","inpt","halt","_rsync","setVsync","resm","_resxCounter","nusiz","setColor","setColorP0","setColorP1","_setPriority","ctrlpf","resp","vdelp","resbl","vdelbl","getCurrentLine","getDebugState","execute","_delayedWrite","_tickMovement","_tickHblank","_tickHframe","_updateCollision","_nextLine","self","setVblank","_clearHmoveComb","startMovement","pf0","pf1","pf2","grp","shufflePatterns","hmp","hmm","hmbl","refp","shuffleStatus","enabl","linesTotal","boundary","movementCounter","movementTick","_tickSprites","isRendering","_renderPixel","_cloneLastLine","nextLine","prevDelta","palette.NTSC","palette.PAL","palette.SECAM","getPixel","priority","wasCaching","rewindCycles","Switch","beforeRead","stateChanged","ControlPanel","_selectSwitch","_resetButton","_colorSwitch","_difficutlyP0","_difficutlyP1","DigitalJoystick","_left","_right","_up","_down","_fire","Paddle","_fireSwitch","global","module","define","Alea","seed","me","mash","String","s0","s1","s2","copy","impl","opts","xg","prng","int32","double","quick","amd","alea","XorGen","strseed","z","w","xor128","xorwow","X","slice","Date","xorshift7","limit","max","xor4096","floor","tychei","pool","math","nodecrypto","startdenom","pow","significance","overflow","seedrandom","options","shortseed","mixkey","flatten","obj","depth","typ","entropy","tostring","out","randomBytes","crypto","msCrypto","getRandomValues","browser","navigator","plugins","screen","autoseed","arc4","ARC4","S","pass","is_math_call","keylen","smear","stringseed","fromCharCode","random","require$$0","ex","CartridgeInterface","CartridgeInfo","sr","SeedrandomGenerator","Board","cpuFactory","clocks","_tick","start","scheduler","_start","_stop","isRunning","_runTask","seedrandom.alea","randomize","controlPanel","setInvalidInstructionCallback","_onInvalidInstruction","setCpu","setBus","getCpuTime","setRng","setTia","setPia","setCartridge","_clockHz","_sliceSize","getWaveformChannel","_timer","toggle","_subClock","_cpuCycles","systemReset","cycles","cpuCycles","_cycle","cpuClock","_suspended","_updateAudioState","_audioEnabled","_trap","sep","clockMode","_clockMode","_timeSlice","round","setAudioEnabled","cycle","requestedCycles","lastExecutionState","notifyCpuCycleComplete","_executeSlice","CartridgeType","vanilla_2k","vanilla_4k","bankswitch_2k_cv","bankswitch_8k_F8","bankswitch_8k_E0","bankswitch_8k_3F","bankswitch_8k_FE","bankswitch_8k_UA","bankswitch_8k_econobanking","bankswitch_8k_pp","bankswitch_12k_FA","bankswitch_8k_DPC","bankswitch_16k_F6","bankswitch_16k_E7","bankswitch_FA2","bankswitch_32k_F4","bankswitch_3E","bankswitch_64k_F0","bankswitch_64k_EF","bankswitch_supercharger","bankswitch_dpc_plus","bankswitch_cdf","unknown","cartridgeType","AbstractCartridge","Cartridge2k","super","paddedBuffer","paddedLength","nextPowerOfTwo","padBuffer","_rom","Cartridge4k","warn","len","min","searchForSignatures","signatures","candidates","counts","signature","iCandidate","candidate","iSignature","CartridgeCV","signatureCounts","_ram","CartridgeF8","_supportSC","_bank0","_bank1","cartridgeUtil.searchForSignatures","_bank","_hasSC","_access","_saraRAM","CartridgeF6","_bank2","_bank3","CartridgeE0","_banks","_activeBanks","_handleBankswitch","addressMasked","CartridgeFE","_lastAccessWasFE","_onBusAccess","accessType","previousAddressBusValue","getLastAddresBusValue","dataBusHiBits","Cartridge3F","Cartridge3E","bankCount","_ramBanks","_ramBank","_ramSelect","CartridgeUA","CartridgeFA","CartrdigeE7","_ram1Banks","_ram1","_ram0Enabled","_ram0","CartridgeF0","_bankIdx","_currentBank","CartridgeEF","matchMagic","magicString","magic","split","CartridgeF4","CartridgeFA2","_accessCounter","_accessCounterLimit","_handleIo","_savedRam","Header","startAddressLow","startAddressHigh","controlWord","blockCount","checksum","multiloadId","progressBarSpeedLow","progressBarSpeedHigh","blockLocation","blockChecksum","bios","CartridgeSupercharger","_loadCount","_loads","_headers","verify","_setupRom","_setBankswitchMode","_transitionCount","_pendingWrite","_pendingWriteData","_writeRamEnabled","_loadInProgress","_loadTimestamp","readValue","_bank1Type","_loadIntoRam","mode","_configureBanks","bank0","bank1Type","bank1","loadId","loadIndex","header","load","blockIdx","location","bank","mixerTable","CartridgeDPC","_fetchers","Fetcher","_fetcherData","fetcher","_lastCpuTime","_clockAccumulator","_clockMusicFetchers","mask","_randomNext","fetchedData","pointer","setStart","setEnd","setLow","setHigh","setMusicMode","oldRng","cpuTime","forwardClock","end","musicMode","_updateMask","period","newPointerLow","distanceStart","distanceEnd","window","defaultSetTimout","defaultClearTimeout","cachedSetTimeout","cachedClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","array","noop","on","addListener","once","off","removeListener","removeAllListeners","performance","performanceNow","now","mozNow","msNow","oNow","webkitNow","getTime","startTime","nextTick","args","title","env","argv","version","versions","binding","name","cwd","chdir","dir","umask","hrtime","previousTimestamp","clocktime","seconds","nanoseconds","platform","uptime","lookup","revLookup","Arr","inited","code","encodeChunk","uint8","tmp","num","output","join","fromByteArray","extraBytes","parts","len2","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","Infinity","rt","abs","isNaN","LN2","toString","isArray","arr","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","arg","encodingOrOffset","allocUnsafe","from","ArrayBuffer","byteOffset","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","fromString","internalIsBuffer","checked","val","fromObject","assertSize","_isBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","hexWrite","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","base64.fromByteArray","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","poolSize","_augment","alloc","allocUnsafeSlow","isBuffer","isFastBuffer","readFloatLE","isSlowBuffer","compare","list","pos","swap16","swap32","swap64","equals","inspect","match","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754.write","writeDouble","newBuf","subarray","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","ieee754.read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","b64","l","placeHolders","L","base64.toByteArray","trim","replace","stringtrim","base64clean","dst","normalizeArray","allowAboveRoot","up","last","unshift","splitPathRe","splitPath","filename","exec","resolvedPath","resolvedAbsolute","path","charAt","normalize","isPathAbsolute","isAbsolute","trailingSlash","extname","basename","dirname","root","delimiter","relative","to","fromParts","toParts","samePartsLength","outputParts","paths","xs","_scriptDir","Module","document","currentScript","moduleOverrides","quit_","status","toThrow","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","ENVIRONMENT_IS_NODE","ENVIRONMENT_HAS_NODE","ENVIRONMENT_IS_SHELL","importScripts","process","node","read_","readAsync","readBinary","nodeFS","nodePath","scriptDirectory","locateFile","__dirname","binary","tryParseAsDataURI","require$$1","assert","abort","intArrayToString","readbuffer","scriptArgs","quit","print","printErr","href","url","xhr","XMLHttpRequest","open","send","responseText","err","responseType","response","onload","onerror","noExitRuntime","tempRet0","setTempRet0","getTempRet0","GLOBAL_BASE","ABORT","condition","text","getCFunc","ident","func","ccall","returnType","argTypes","toC","stringToUTF8","stackAlloc","writeArrayToMemory","cArgs","stack","converter","stackSave","UTF8ToString","Boolean","convertReturnValue","stackRestore","HEAP8","HEAPU8","HEAP32","UTF8Decoder","TextDecoder","UTF8ArrayToString","u8Array","maxBytesToRead","endIdx","endPtr","u0","u1","u2","ch","ptr","stringToUTF8Array","outU8Array","outIdx","maxBytesToWrite","startIdx","u","outPtr","updateGlobalBufferAndViews","Int16Array","Int32Array","Uint16Array","Float64Array","DYNAMIC_BASE","DYNAMICTOP_PTR","INITIAL_TOTAL_MEMORY","callRuntimeCallbacks","callbacks","__ATPRERUN__","__ATINIT__","__ATMAIN__","__ATPOSTRUN__","preRun","addOnPreRun","initRuntime","preMain","postRun","addOnPostRun","cb","runDependencies","dependenciesFulfilled","addRunDependency","removeRunDependency","memoryInitializer","dataURIPrefix","isDataURI","startsWith","ASM_CONSTS","$0","trapOnInstructionFetch","busRead32","$1","busWrite32","busRead16","trapOnBx32","busWrite16","_emscripten_asm_const_iii","a0","a1","_emscripten_asm_const_ii","tempDoublePtr","demangle","demangleAll","jsStackTrace","stackTrace","js","SYSCALLS","buffers","printChar","stream","curr","varargs","getStr","get64","low","getZero","___syscall140","which","getStreamFromFD","FS","ErrnoError","errno","___syscall6","flush_NO_FILESYSTEM","fflush","_fd_write","iov","iovcnt","pnum","___wasi_fd_write","_emscripten_get_heap_size","_exit","exit","_emscripten_memcpy_big","dest","___setErrNo","abortOnCannotGrowMemory","requestedSize","_emscripten_resize_heap","chr","atob","input","chr1","chr2","chr3","enc2","enc3","enc4","keyStr","intArrayFromBase64","calledRun","asmGlobalArg","asmLibraryArg","asm","imul","clz32","A","B","C","D","E","F","G","H","I","J","K","M","N","O","V","W","Y","Z","$","fa","aa","ba","ca","va","da","ea","Na","oa","Za","ga","la","ja","ha","ia","ka","ma","na","qa","ta","pa","ra","sa","_a","ua","wa","za","xa","La","Ha","Ba","Ma","Ga","Ya","Sa","Wa","Ra","Ta","$a","ya","Aa","Ca","Da","Fa","R","Ea","Ia","U","Xa","Ja","Ka","Oa","ab","Pa","Qa","Ua","Va","bb","Q","db","eb","T","fb","gb","hb","ib","jb","kb","___errno_location","___muldi3","___udivdi3","_abort_run","_bitshift64Lshr","_bitshift64Shl","_enable_debug","_free","_i64Add","_i64Subtract","_llvm_bswap_i32","_malloc","_memcpy","_memset","_ping","_read_register","_reset","_run","_sbrk","_set_stop_address","_write_register","dynCall_ii","dynCall_iidiiii","dynCall_iiii","dynCall_iiiii","dynCall_vii","establishStackSpace","applyMemoryInitializer","doBrowserLoad","memoryInitializerBytes","useRequest","request","addEventListener","ExitStatus","doRun","implicit","what","runCaller","Thumbulator","_module","_options","tslib_1","stopAddress","nativeThumbulator","_getApi","enableDebug","__generator","ping","enable","readRegister","register","writeRegister","printer","read16","read32","write16","write32","encode","signed","encodeWithPrefix","prefix","toUpperCase","Soc","blx32Handler","_triggerTrap","hex","addr","getRom16","getRam16","_armMamcr","getRom32","getRam32","setRam16","setRam32","buffer8","hostIsLittleEndian","_rom8","_ram8","_rom16","_rom32","_ram16","_ram32","_romBuffer","_ramBuffer","_thumbulator","_thumbulatorBus","CartridgeDPCPlus","HarmonySoc","_soc","getRom","getRam","_imageRam","_fractionalFetchers","FractionalFetcher","_musicFetchers","MusicFetcher","_parameters","_parameterIndex","_fastFetch","_ldaPending","readResult","fractionalFetcher","_advanceRng","_rewindRng","acc","waveform","waveformSample","increment","setPointerLo","setPointerHi","setFraction","top","bottom","_dispatchFunction","decrement","romBase","fraction","CartridgeCDF","thumbulator","getThumbulator","r2","r3","_musicStreams","waveformSize","getVersion","_jumpstreamMask","_amplitudeStream","_datastreamBase","_datastreamIncrementBase","_waveformBase","_handleBxCDF0","_handleBxCDF1","_displayRam","MusicStream","sig","startAddress","cartridgeUtil.searchForSignature","_digitalAudio","_fastJumpCountdown","_fastFetchPending","_jmpOperandAddress","_ldaOperandAddress","romValue","_datastreamReadWithIncrement","_jumpstream","_clockMusicStreams","sampleAddress","sample","_getWaveform","_datastreamRead","_datastreamWriteWithIncrement","_getDatastreamPointer","_setDatastreamPointer","_getDatastreamIncrement","Cartridge8040","CartridgePP","_switchLayout","_bankSwitchPending","_segments","_previousAddressBusValue","_pendingBank","_configureSegments","zero","one","two","three","CartridgeDetector","_detect2k","_detect8k","_detect16k","_detect29k","_detect32k","_detect64k","matchesBuffer","f8Matches","CartridgeE7","CartridgeFactory","_createCartridge","detectCartridgeType","Cartidge8040","CartdridgeCDF","DataTap","getBus","_onReset","_onWrite","PeriodicScheduler","_period","worker","terminate","eval","useNative","test","userAgent","nextId","lock","TASKS","wrap","clear","handleId","task","polifill","usePolifill","setTimeoutPolifill","freeze","canUse","nextTickPolifill","postMessagePolifill","messagePrefix","onGlobalMessage","source","attachEvent","asynch","oldOnMessage","messageChannelPolifill","channel","MessageChannel","port1","port2","readyStateChangePolifill","html","documentElement","script","createElement","onreadystatechange","removeChild","appendChild","POLIFILLS","setImmediate","msSetImmediate","def","_polifill","clearImmediate","msClearImmediate","polyfill.setImmediate","ImmediateScheduler","getTimestamp","ConstantTimesliceScheduler","timeSlice","running","timestampStart","emulationTime","ConstantCyclesScheduler","targetSleepInterval","lastYieldTimestamp","accumulatedDelta","timestamp0","timeToSleep","strategy","BusyWaitScheduler","ClockProbe","_scheduler","_clock","detach","_clockHandler","_measurementTask","_updateMeasurement","probe","frequencyUpdate","ctx","Mutex","_pending","isLocked","acquire","ticket","_dispatchNext","runExclusive","Mutex_1","EmulationService","stopped","SchedulerFactory","_clockProbe","_updateScheduler","_mutex","_limitingStrategy","createCartridge","_trapHandler","dataTap","_context","attach","_setError","getTimer","suspend","_tryToResume","_lastError","getFrequency","_enforceRateLimit","enforce","emulationError","_schedulerFactory","createLimitingScheduler","createImmediateScheduler","DriverManager","Map","emulationService","_driversBound","_emulationService","_shouldBindDrivers","_bindDrivers","_onEmuStateChange","_unbindDrivers","driver","binder","_drivers","DriverContext","getEmulationContext","unbind","delete","getState","driverContext","messageIds","configure","PipelineClient","_rpc","messages.messageIds","_onMessageEmit","_onMessageRelease","workerUrl","Worker","messageEvent","videoConfig","managedSurface","_nextId","getUnderlyingBuffer","msg","RPC_TYPE","emulationPause","emulationReset","emulationResume","emulationSetRateLimit","emulationStart","emulationStop","emulationFetchLastError","getVideoParameters","getWaveformAudioParameters","getPCMAudioParameters","setup","SIGNAL_TYPE","emulationFrequencyUpdate","videoNewFrame","videoReturnSurface","controlStateUpdate","waveformAudioVolumeChange","waveformAudioBufferChange","pcmAudioNewFrame","pcmAudioTogglePause","pcmAudioReturnFrame","audioStop","messageFromDataTap","VideoDriver","videoPipelinePort","_onReturnSurfaceFromHost","_onGetVideoParameters","videoPipelineRpc","_videoPipelineClient","VideoPipelineClient","_onEmitFromPipeline","_videoProcessingConfig","video","_bind","_unbind","_ids","_managedSurfaces","_bypassProcessingPipeline","_managedSurfacesById","ControlDriver","_onControlStateUpdate","emulationContext","_emulationContext","controlState","_applyJoystickState","joystickState","getJoystick","_applyPaddleState","paddleState","_applyControlPanelState","controlPanelState","joystick","down","left","right","fire","paddle","setValue","panel","difficulty0","difficulty1","select","WaveformAudioDriver","_index","_onGetWaveformAudioParameters","audio","_onBufferChanged","_onVolumeChanged","_onStop","volume","getVolume","PCMAudioDriver","_onGetPCMAudioParameters","_onReturnFrame","_signalNewFrame","_signalTogglePause","endpoint","_endpoint","_onTogglePause","_pendingFrames","frame","_paused","frameSize","adopt","getDataTap","_onDataTapMessage","EmulationBackend","_service","_onSetup","_onFetchLastError","_onEmulationPause","_onEmulationReset","_onEmulationResume","_onEmulationSetRateLimit","_onEmulationStart","_onEmulationStop","_onFrequencyUpdate","_onEmulationError","driverManager","videoDriver","controlDriver","waveformAduioDrivers","pcmAudioDriver","dataTapDriver","DataTapDriver","_videoDriver","addDriver","getRawVideo","videoProcessorPort","lastError","getLastError","pause","setVideoProcessingConfig","setRateLimit","startup"],"mappings":"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IAAK,IAAI34B,EAAI,EAAGA,EAAIs5B,EAAMP,UAAW/4B,IACjCkB,EAAQo4B,EAAMC,UAAUv5B,GAAIs5B,EAAME,OAAOx5B,GAAIq5B,GAC7C14B,KAAKu4B,SAASI,EAAMC,UAAUv5B,IAAM,IAGxCs5B,EAAMP,UAAY,GAQ1B,MAAMD,GACF/tB,YAAmB6tB,GAAAj4B,UAAAi4B,EAkCnBj4B,eAAY,EAjCRA,KAAK44B,UAAY,IAAIhmB,WAAWqlB,GAChCj4B,KAAK64B,OAAS,IAAIjmB,WAAWqlB,GAGjC7tB,KAAK6H,EAAiBnT,GAClB,GAAIkB,KAAKo4B,WAAap4B,KAAKi4B,KACvB,MAAM,IAAI/0B,MAAM,wBAGpBlD,KAAK44B,UAAU54B,KAAKo4B,WAAanmB,EACjCjS,KAAK64B,OAAO74B,KAAKo4B,WAAat5B,EAE9BkB,KAAKo4B,YAGThuB,OAAO6H,GACH,IAAI5S,EAEJ,IAAKA,EAAI,EAAGA,EAAIW,KAAKo4B,WACbp4B,KAAK44B,UAAUv5B,KAAO4S,EADE5S,KAM5BA,EAAIW,KAAKo4B,YACTp4B,KAAK44B,UAAUv5B,GAAKW,KAAK44B,UAAU54B,KAAKo4B,UAAY,GACpDp4B,KAAK64B,OAAOx5B,GAAKW,KAAK64B,OAAO74B,KAAKo4B,UAAY,GAC9Cp4B,KAAKo4B,cChFV,MAAMU,GAAO,IAAI3sB,YAAY,CAChC,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,aAGS4sB,GAAM,IAAI5sB,YAAY,CAC/B,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,aAGS6sB,GAAQ,IAAI7sB,YAAY,CACjC,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,aC1TJ,MAAM8sB,GACF7uB,YACY6iB,EACRiM,EACAC,EACAC,GAHQp5B,aAAAitB,EAi2BZjtB,cAAW,IAAID,EAEfC,UAAO,IAAID,EAEHC,UAAqB,KACrBA,UAAY,KAGZA,iBAAc,IAAI+3B,GAAW,GAAI,IAIjC/3B,eAGAA,WAAQ,EAERA,+BAA2B,EAE3BA,oBAAiB,EAEjBA,0BAAsB,EAEtBA,sBAAkB,EAElBA,aAAU,EAGVA,uBAAoB,EAGpBA,oBAAiB,EAEjBA,cAAW,WACXA,iBAEAA,oBAAiB,EAEjBA,cAAW,IAAIg0B,SAA8B,IAAMh0B,KAAKmxB,mBACxDnxB,cAAW,IAAIg0B,SAA8B,IAAMh0B,KAAKmxB,mBACxDnxB,eAAY,IAAIixB,QAAgC,IAAMjxB,KAAKmxB,mBAC3DnxB,eAAY,IAAIixB,QAAgC,IAAMjxB,KAAKmxB,mBAC3DnxB,gBAAa,IAAI8yB,QAAmC,IAAM9yB,KAAKmxB,mBAC/DnxB,WAAQ,IAAIm1B,QAAyB,IAAMn1B,KAAKmxB,mBAEhDnxB,oBAAiB,IAAI8E,MAAqB,GAC1C9E,eAAsB,KACtBA,YAAS,IAAI8E,MAAsB,GA34BvC9E,KAAKq5B,cAAgB,IAAIxC,GAAa72B,KAAKitB,SAC3CjtB,KAAKq5B,cAAcjqB,SAAS9O,WAAW24B,GAAIK,YAAat5B,MAExDA,KAAKu5B,SAAWv5B,KAAKw5B,YAAYx5B,KAAKitB,SACtCjtB,KAAKy5B,QAAU,IAAIhE,GAAayD,EAAUQ,WAC1C15B,KAAK25B,QAAU,IAAIlE,GAAa0D,EAAUO,WAE1C15B,KAAK45B,UAAY,IAAItK,GAAStvB,KAAKitB,SACnC,MAAM4M,EAAc75B,KAAK45B,UAAUE,cAEnC,IAAK,IAAIz6B,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAK+5B,eAAe16B,GAAK,IAAIquB,GAAc1tB,KAAKitB,SAEhDjtB,KAAKg6B,OAAO36B,GAAKW,KAAKitB,QAAQ1B,SAAWsO,EAAYx6B,GAAKW,KAAK+5B,eAAe16B,GAGlF,MAAMy2B,EAAY91B,KAAKi6B,cAAcj6B,KAAKitB,SAE1CjtB,KAAKk6B,SAAW,IAAIp1B,MAAM,GAC1B,IAAK,IAAIzF,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKk6B,SAAS76B,GAAK,IAAIw2B,GAAaC,EAAWsD,EAAQ/5B,IAG3DW,KAAK6S,QAGTzI,QACIpK,KAAKm6B,MAAQ,EACbn6B,KAAKo6B,qBAAsB,EAC3Bp6B,KAAKq6B,iBAAkB,EACvBr6B,KAAKs6B,eAAiB,EACtBt6B,KAAKu6B,YACLv6B,KAAKw6B,UACLx6B,KAAKkxB,eAAiB,EACtBlxB,KAAKy6B,SAAW,WAChBz6B,KAAK06B,kBAAoB,EACzB16B,KAAK26B,0BAA2B,EAChC36B,KAAK46B,eAAiB,EACtB56B,KAAK66B,QAAU,EAEf76B,KAAK86B,YAAYjoB,QACjB7S,KAAKq5B,cAAcxmB,QAEnB7S,KAAK+6B,UAAUloB,QACf7S,KAAKg7B,UAAUnoB,QACf7S,KAAKi7B,SAASpoB,QACd7S,KAAKk7B,SAASroB,QACd7S,KAAKm7B,WAAWtoB,QAChB7S,KAAKo7B,MAAMvoB,QAEX7S,KAAKg6B,OAAO,GAAGnnB,QACf7S,KAAKg6B,OAAO,GAAGnnB,QAEf7S,KAAKy5B,QAAQ5mB,QACb7S,KAAK25B,QAAQ9mB,QAEb,IAAK,IAAIxT,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKk6B,SAAS76B,GAAGwT,QAGjB7S,KAAKq7B,MACLr7B,KAAKq7B,KAAK3xB,SAIlBU,OAAOkxB,GAGH,OAFAt7B,KAAKq7B,KAAOC,EAELt7B,KAGXoK,mBAAmBisB,GACf,IAAK,IAAIh3B,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKk6B,SAAS76B,GAAGk8B,mBAAmBlF,GAGxC,OAAOr2B,KAGXoK,WACI,OAAO,IAGXA,YACI,OAAOpK,KAAKq5B,cAAchsB,YAG9BjD,kBAAkB0D,GAGd,OAFA9N,KAAKq5B,cAAcvqB,kBAAkBhB,GAE9B9N,KAGXoK,mBAAmB/K,GACf,OAAOW,KAAK+5B,eAAe16B,GAG/B+K,gBACI,OAAOpK,KAAK45B,UAGhBxvB,gBAAgBmL,GACZvV,KAAKg6B,OAAO,GAAGpK,UAAUra,GAASvV,KAAKitB,QAAQ9B,aAC/CnrB,KAAKg6B,OAAO,GAAGpK,UAAUra,GAASvV,KAAKitB,QAAQ9B,aAGnD/gB,KAAK6H,GACD,MAAMupB,EAAmBx7B,KAAK4T,KAAKY,sBAEnC,IAAI9Q,EAGJ,OAAkB,GAAVuO,GACJ,OACIvO,GAAU1D,KAAKitB,QAAQ5B,eAAiBrrB,KAAKk6B,SAAS,GAAGuB,OAAS,GAAyB,GAAnBD,EACxE,MAEJ,OACI93B,GAAU1D,KAAKitB,QAAQ5B,eAAiBrrB,KAAKk6B,SAAS,GAAGuB,OAAS,GAAyB,GAAnBD,EACxE,MAEJ,QACI93B,GAAU1D,KAAKitB,QAAQ5B,eAAiBrrB,KAAKk6B,SAAS,GAAGuB,OAAS,GAAyB,GAAnBD,EACxE,MAEJ,QACI93B,GAAU1D,KAAKitB,QAAQ5B,eAAiBrrB,KAAKk6B,SAAS,GAAGuB,OAAS,GAAyB,GAAnBD,EACxE,MAEJ,QACI93B,EAAS1D,KAAKy5B,QAAQgC,OAA6B,GAAnBD,EAChC,MAEJ,QACI93B,EAAS1D,KAAK25B,QAAQ8B,OAA6B,GAAnBD,EAChC,MAEJ,OACI93B,QACK1D,KAAKkxB,eAAkE,GAAO,QAC9ElxB,KAAKkxB,eAAkE,IAAO,GACnF,MAEJ,OACIxtB,OACK1D,KAAKkxB,eAAkE,GAAO,SAC9ElxB,KAAKkxB,eAAkE,IAAO,GACnF,MAEJ,OACIxtB,QACK1D,KAAKkxB,eAA8D,GAAO,SAC1ElxB,KAAKkxB,eAAmE,IAAO,GACpF,MAEJ,OACIxtB,OACK1D,KAAKkxB,eAA8D,GAAO,OAC1ElxB,KAAKkxB,eAAmE,IAAO,GACpF,MAEJ,OACIxtB,MACK1D,KAAKkxB,eAA+D,GAAO,MAC3ElxB,KAAKkxB,eAAoE,IAAO,GACrF,MAEJ,OACIxtB,KACK1D,KAAKkxB,eAA+D,GAAO,MAC3ElxB,KAAKkxB,eAAoE,IAAO,GACrF,MAEJ,OACIxtB,MACK1D,KAAKkxB,eAAmE,GAAO,UAC/ElxB,KAAKkxB,eAAiE,IAAO,GAClF,MAEJ,OACIxtB,IAAS1D,KAAKkxB,eAAgE,IAAO,EACrF,MAEJ,QACIxtB,EAAS,EAIjB,OAAiB,IAATA,EAAqC,GAAnB83B,EAG9BpxB,KAAK6H,GACD,OAAOjS,KAAKwR,KAAKS,GAGrB7H,MAAM6H,EAAiBnT,GACnB,IAAI0I,EAAI,EAGR,OAAkB,GAAVyK,GACJ,OACIjS,KAAKq7B,KAAKK,OACV,MAEJ,OACI17B,KAAKmxB,kBACLnxB,KAAK27B,SACL,MAEJ,OACI37B,KAAKq5B,cAAcuC,UAAkB,EAAR98B,GAAgB,GAC7C,MAEJ,OACIkB,KAAKy5B,QAAQvC,OAAOp4B,GACpBkB,KAAK25B,QAAQzC,OAAOp4B,GAEpB,IAAK,IAAIO,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKk6B,SAAS76B,GAAG63B,OAAOp4B,GAG5BkB,KAAK86B,YAAYx7B,OAA2BR,KAC5C,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAA0BR,KAC3C,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAA0BR,KAC3C,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAAyBR,KAC1C,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAAyBR,KAC1C,MAEJ,QACIkB,KAAKmxB,kBACLnxB,KAAK+6B,UAAUc,KAAK77B,KAAK87B,mBAAgB97B,KAAKw6B,SAC9C,MAEJ,QACIx6B,KAAKmxB,kBACLnxB,KAAKg7B,UAAUa,KAAK77B,KAAK87B,mBAAgB97B,KAAKw6B,SAC9C,MAEJ,QACIx6B,KAAK+6B,UAAU3I,MAAMtzB,EAAOkB,KAAKi7B,UACjC,MAEJ,QACIj7B,KAAKg7B,UAAU5I,MAAMtzB,EAAOkB,KAAKk7B,UACjC,MAEJ,QACIl7B,KAAK86B,YAAYx7B,QAA0BR,KAC3C,MAEJ,OACIkB,KAAKmxB,kBACLnxB,KAAK+6B,UAAUgB,MAAMj9B,GACrBkB,KAAKi7B,SAASc,MAAMj9B,MAAOkB,KAAKw6B,SAChC,MAEJ,OACIx6B,KAAKmxB,kBACLnxB,KAAKg7B,UAAUe,MAAMj9B,GACrBkB,KAAKk7B,SAASa,MAAMj9B,MAAOkB,KAAKw6B,SAChC,MAEJ,QACIx6B,KAAK86B,YAAYx7B,QAA0BR,KAC3C,MAEJ,OACIkB,KAAKmxB,kBACLnxB,KAAKy6B,SAAWz6B,KAAKu5B,UAAkB,IAARz6B,KAAkB,GACjD,MAEJ,OACI0I,EAAIxH,KAAKu5B,UAAkB,IAARz6B,KAAkB,GACrCkB,KAAK+6B,UAAUiB,SAASx0B,GACxBxH,KAAKi7B,SAASe,SAASx0B,GACvBxH,KAAKm7B,WAAWc,WAAWz0B,GAE3B,MAEJ,OACIA,EAAIxH,KAAKu5B,UAAkB,IAARz6B,KAAkB,GACrCkB,KAAKg7B,UAAUgB,SAASx0B,GACxBxH,KAAKk7B,SAASc,SAASx0B,GACvBxH,KAAKm7B,WAAWe,WAAW10B,GAE3B,MAEJ,QACIxH,KAAK86B,YAAYx7B,QAAwBR,KACzC,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAAwBR,KACzC,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAAwBR,KACzC,MAEJ,QACIkB,KAAKm8B,aAAar9B,GAClBkB,KAAKm7B,WAAWiB,OAAOt9B,GACvBkB,KAAKo7B,MAAMgB,OAAOt9B,GAClB,MAEJ,OACIkB,KAAKmxB,kBACL3pB,EAAIxH,KAAKu5B,UAAkB,IAARz6B,KAAkB,GACrCkB,KAAKm7B,WAAWa,SAASx0B,GACzBxH,KAAKo7B,MAAMhK,MAAQ5pB,EACnB,MAEJ,QACIxH,KAAK86B,YACAx7B,QAAyBR,KACzBQ,SAA+B,KAEpC,MAEJ,QACIU,KAAK86B,YACAx7B,QAAyBR,KACzBQ,SAA+B,KAC/BA,SAA+B,KAEpC,MAEJ,QACIU,KAAKmxB,kBACLnxB,KAAKi7B,SAASoB,KAAKr8B,KAAK87B,gBACxB,MAEJ,QACI97B,KAAKmxB,kBACLnxB,KAAKk7B,SAASmB,KAAKr8B,KAAK87B,gBACxB,MAEJ,QACI97B,KAAK86B,YAAYx7B,QAA0BR,KAC3C,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAA0BR,KAC3C,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAAyBR,KAC1C,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAAyBR,KAC1C,MAEJ,QACIkB,KAAKi7B,SAASqB,MAAMx9B,GACpB,MAEJ,QACIkB,KAAKk7B,SAASoB,MAAMx9B,GACpB,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAA0BR,KAC3C,MAEJ,QACIkB,KAAK86B,YAAYx7B,QAAyBR,KAC1C,MAEJ,QACIkB,KAAKmxB,kBACLnxB,KAAKo7B,MAAMmB,MAAMv8B,KAAK87B,gBACtB,MAEJ,QACI97B,KAAKo7B,MAAMoB,OAAO19B,GAClB,MAEJ,QACIkB,KAAKmxB,kBACLnxB,KAAKkxB,eAAiB,EACtB,MAEJ,QACIlxB,KAAKg6B,OAAO,GAAGtK,KAAK5wB,GACpB,MAEJ,QACIkB,KAAKg6B,OAAO,GAAGtK,KAAK5wB,GACpB,MAEJ,QACIkB,KAAKg6B,OAAO,GAAGrK,KAAK7wB,GACpB,MAEJ,QACIkB,KAAKg6B,OAAO,GAAGrK,KAAK7wB,GACpB,MAEJ,QACIkB,KAAKg6B,OAAO,GAAGxK,KAAK1wB,GACpB,MAEJ,QACIkB,KAAKg6B,OAAO,GAAGxK,KAAK1wB,IAKhCsL,gBACI,MACI,GACA,WAAWpK,KAAKm6B,iBAAiBn6B,KAAKq5B,cAAcoD,qBACpDz8B,KAAKq5B,cAAcqD,gBAI3BtyB,OAAOkI,GAGH,OAFAtS,KAAK4T,KAAOtB,EAELtS,KAGXoK,QACIpK,KAAK86B,YAAY6B,QAAQ1D,GAAI2D,cAAe58B,MAE5CA,KAAK26B,0BAA2B,EAE5B36B,KAAK06B,kBAAoB,GACzB16B,KAAK68B,oBAED78B,KAAKw6B,QACLx6B,KAAK88B,cAEL98B,KAAK+8B,cAGL/8B,KAAK26B,2BAA6B36B,KAAKq5B,cAAcnC,QACrDl3B,KAAKg9B,oBAGU,IAAfh9B,KAAKm6B,OACLn6B,KAAKq7B,KAAK3xB,WAIZ1J,KAAKm6B,OAAS,KAChBn6B,KAAKi9B,YAGLj9B,KAAKitB,QAAQ1B,UACbvrB,KAAK45B,UAAUpH,OAIfpoB,qBAAqB6H,EAAiBnT,EAAeo+B,GACzD,OAAQjrB,GACJ,OACIirB,EAAK/L,kBACL+L,EAAK7D,cAAc8D,WAAmB,EAARr+B,GAAgB,GAC9C,MAEJ,QACIo+B,EAAK/L,kBAGL+L,EAAK5C,eAAiB,EACtB4C,EAAK9C,qBAAsB,EAEtB8C,EAAK7C,kBACN6C,EAAKE,kBACLF,EAAK7C,iBAAkB,GAI3B6C,EAAKnC,UAAUsC,gBACfH,EAAKlC,UAAUqC,gBACfH,EAAKjC,SAASoC,gBACdH,EAAKhC,SAASmC,gBACdH,EAAK9B,MAAMiC,gBAEX,MAEJ,QACIH,EAAK/B,WAAWmC,IAAIx+B,GACpB,MAEJ,QACIo+B,EAAK/B,WAAWoC,IAAIz+B,GACpB,MAEJ,QACIo+B,EAAK/B,WAAWqC,IAAI1+B,GACpB,MAEJ,QACIo+B,EAAKjC,SAASwC,IAAI3+B,GAClB,MAEJ,QACIo+B,EAAKhC,SAASuC,IAAI3+B,GAClB,MAEJ,SACIo+B,EAAKjC,SAASyC,kBACd,MAEJ,SACIR,EAAKhC,SAASwC,kBACd,MAEJ,QACIR,EAAKjC,SAAS0C,IAAI7+B,GAClB,MAEJ,QACIo+B,EAAKhC,SAASyC,IAAI7+B,GAClB,MAEJ,QACIo+B,EAAKnC,UAAU6C,IAAI9+B,GACnB,MAEJ,QACIo+B,EAAKlC,UAAU4C,IAAI9+B,GACnB,MAEJ,QACIo+B,EAAK9B,MAAMyC,KAAK/+B,GAChB,MAEJ,QACIo+B,EAAKnC,UAAU6C,IAAI,GACnBV,EAAKlC,UAAU4C,IAAI,GACnBV,EAAKjC,SAAS0C,IAAI,GAClBT,EAAKhC,SAASyC,IAAI,GAClBT,EAAK9B,MAAMyC,KAAK,GAChB,MAEJ,QACIX,EAAKjC,SAAS6C,KAAKh/B,GACnB,MAEJ,QACIo+B,EAAKhC,SAAS4C,KAAKh/B,GACnB,MAEJ,SACIo+B,EAAK9B,MAAM2C,gBACX,MAEJ,QACIb,EAAK9B,MAAM4C,MAAMl/B,GACjB,MAEJ,QACIo+B,EAAKnC,UAAUhJ,KAAKjzB,GACpB,MAEJ,QACIo+B,EAAKlC,UAAUjJ,KAAKjzB,IAKxBsL,mBAAmB0C,EAA+BowB,GACtD,MAAMe,EAAaf,EAAK7D,cAAcoD,iBAMtC,GAJIwB,EAAaf,EAAKtC,iBAClBsC,EAAKtC,eAAiBqD,GAGtBA,EAAaf,EAAKtC,eAAgB,CAClC,MAAMhvB,EAASkB,EAAQW,YACnB+Y,EAAO,IAAMyX,EACbC,EAAiC,IAAtBhB,EAAKtC,eAEpB,IAAK,IAAIv7B,EAAImnB,EAAMnnB,EAAI6+B,EAAU7+B,IAC7BuM,EAAOvM,GAAK,WAIpB69B,EAAK9tB,SAASpO,SAAS8L,GAGnB1C,gBACJ,GAAKpK,KAAKo6B,qBAKiB,IAAT,EAAbp6B,KAAKm6B,OAAoB,CAG1B,MAAM16B,MAAQO,KAAKw6B,QAGnB,IAAItzB,GAAI,EAER,MAAMi3B,EAAkBn+B,KAAKs6B,eAAiB,GAAK,EAAIt6B,KAAKs6B,eAE5DpzB,EAAIlH,KAAK+6B,UAAUqD,aAAaD,EAAiB1+B,IAAUyH,EAC3DA,EAAIlH,KAAKg7B,UAAUoD,aAAaD,EAAiB1+B,IAAUyH,EAC3DA,EAAIlH,KAAKi7B,SAASmD,aAAaD,EAAiB1+B,IAAUyH,EAC1DA,EAAIlH,KAAKk7B,SAASkD,aAAaD,EAAiB1+B,IAAUyH,EAC1DA,EAAIlH,KAAKo7B,MAAMgD,aAAaD,EAAiB1+B,IAAUyH,EAGvDlH,KAAKo6B,oBAAsBlzB,EAG3BlH,KAAK26B,yBAA2BzzB,EAEhClH,KAAKs6B,kBAILlwB,cACJ,OAAQpK,KAAKm6B,OACT,KAAK,EACDn6B,KAAKq6B,iBAAkB,EACvBr6B,KAAKq7B,KAAK3xB,SACV,MAEJ,KAAK,GACI1J,KAAKq6B,kBACNr6B,KAAKw6B,WAGT,MAEJ,KAAK,GACGx6B,KAAKq6B,kBACLr6B,KAAKw6B,WAMbx6B,KAAKq6B,iBAAmBr6B,KAAKm6B,MAAQ,IACrCn6B,KAAKm7B,WAAW3I,KAAKxyB,KAAKm6B,MAAQ,GAAKn6B,KAAK66B,SAI5CzwB,cACJ,MAAM9B,EAAItI,KAAKq5B,cAAcoD,iBACzB9jB,EAAI3Y,KAAKm6B,MAAQ,GAAKn6B,KAAK66B,QAG/B76B,KAAK26B,0BAA2B,EAGhC36B,KAAKm7B,WAAW3I,KAAK7Z,GAGrB3Y,KAAKq+B,eAGDr+B,KAAKq5B,cAAciF,eACnBt+B,KAAKu+B,aAAa5lB,EAAGrQ,GAIrB8B,eACJpK,KAAK+6B,UAAUvI,MAAK,GACpBxyB,KAAKg7B,UAAUxI,MAAK,GACpBxyB,KAAKi7B,SAASzI,OACdxyB,KAAKk7B,SAAS1I,OACdxyB,KAAKo7B,MAAM5I,MAAK,GAGZpoB,YACApK,KAAK06B,mBAAqB,GAC1B16B,KAAKw+B,iBAITx+B,KAAKm6B,MAAQ,EAEbn6B,KAAKm7B,WAAW3I,KAAK,GAEhBxyB,KAAKo6B,qBACNp6B,KAAK06B,oBAGT16B,KAAKw6B,UACLx6B,KAAK66B,QAAU,EAEf76B,KAAKq5B,cAAcoF,WAEfz+B,KAAKq5B,cAAciF,eAAyD,IAAxCt+B,KAAKq5B,cAAcoD,kBACvDz8B,KAAKmxB,kBAIL/mB,iBACJ,MAAM9B,EAAItI,KAAKq5B,cAAcoD,iBAE7B,IAAKz8B,KAAKq5B,cAAciF,eAAuB,IAANh2B,EACrC,OAGJ,MAAMusB,EAAY,IAAJvsB,EACVo2B,EAAsB,KAATp2B,EAAI,GAErB,IAAK,IAAIqQ,EAAI,EAAGA,EAAI,IAAKA,IACrB3Y,KAAKq5B,cAAclC,cAActC,EAAQlc,GAAK3Y,KAAKq5B,cAAclC,cAAcuH,EAAY/lB,GAI3FvO,YAAYwD,GAChB,OAAQA,EAAOsd,QACX,OACI,OAAOyT,GAEX,OACI,OAAOC,GAEX,OACI,OAAOC,GAEX,QACI,MAAM,IAAI37B,MAAM,oBAIpBkH,cAAcwD,GAClB,WAAOA,EAAOsd,OACR,QACA,QAGF9gB,aAAauO,EAAWrQ,GAC5B,GAAItI,KAAKq5B,cAAcnC,OAEnB,YADAl3B,KAAKq5B,cAAclC,cAAkB,IAAJ7uB,EAAUqQ,GAAK,YAIpD,IAAIyY,EAAQpxB,KAAKy6B,SAEjB,OAAQz6B,KAAKu6B,WACT,OACInJ,EAAQpxB,KAAKm7B,WAAW2D,SAAS1N,GACjCA,EAAQpxB,KAAKo7B,MAAM0D,SAAS1N,GAC5BA,EAAQpxB,KAAKg7B,UAAU8D,SAAS1N,GAChCA,EAAQpxB,KAAKk7B,SAAS4D,SAAS1N,GAC/BA,EAAQpxB,KAAK+6B,UAAU+D,SAAS1N,GAChCA,EAAQpxB,KAAKi7B,SAAS6D,SAAS1N,GAC/B,MAEJ,OACIA,EAAQpxB,KAAKg7B,UAAU8D,SAAS1N,GAChCA,EAAQpxB,KAAKk7B,SAAS4D,SAAS1N,GAC/BA,EAAQpxB,KAAK+6B,UAAU+D,SAAS1N,GAChCA,EAAQpxB,KAAKi7B,SAAS6D,SAAS1N,GAC/BA,EAAQpxB,KAAKm7B,WAAW2D,SAAS1N,GACjCA,EAAQpxB,KAAKo7B,MAAM0D,SAAS1N,GAC5B,MAEJ,OACIA,EAAQpxB,KAAKo7B,MAAM0D,SAAS1N,GAC5BA,EAAQpxB,KAAKg7B,UAAU8D,SAAS1N,GAChCA,EAAQpxB,KAAKk7B,SAAS4D,SAAS1N,GAC/BA,EAAQpxB,KAAKm7B,WAAW2D,SAAS1N,GACjCA,EAAQpxB,KAAK+6B,UAAU+D,SAAS1N,GAChCA,EAAQpxB,KAAKi7B,SAAS6D,SAAS1N,GAC/B,MAEJ,QACI,MAAM,IAAIluB,MAAM,oBAGxBlD,KAAKq5B,cAAclC,cAAkB,IAAJ7uB,EAAUqQ,GAAKyY,EAG5ChnB,mBACJpK,KAAKkxB,iBACAlxB,KAAKi7B,SAASvI,WACd1yB,KAAKk7B,SAASxI,WACd1yB,KAAK+6B,UAAUrI,WACf1yB,KAAKg7B,UAAUtI,WACf1yB,KAAKo7B,MAAM1I,WACX1yB,KAAKm7B,WAAWzI,UAGjBtoB,kBACJ,GAAIpK,KAAKq5B,cAAciF,mBAAiBt+B,KAAKw6B,QAA0B,CACnE,MAAM/M,EAA+C,IAAtCztB,KAAKq5B,cAAcoD,iBAElC,IAAK,IAAIp9B,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKq5B,cAAclC,cAAc1J,EAASpuB,GAAK,YAKnD+K,eACJ,WAAOpK,KAAKw6B,QACNx6B,KAAKm6B,sBAMP/vB,SACJ,MAAMuO,EAAI3Y,KAAKm6B,MAAQ,GAAKn6B,KAAKm6B,MAAQ,GAAK,EAI9C,GAFAn6B,KAAK66B,QAAU,IAAMliB,EAEjB3Y,KAAKq5B,cAAciF,cAAe,CAClC,MAAMh2B,EAAItI,KAAKq5B,cAAcoD,iBACzBjW,EAAW,IAAJle,EAAUqQ,EACjBulB,EAAW1X,EAAiB,KAATle,EAAI,GAE3B,IAAK,IAAIjJ,EAAImnB,EAAMnnB,EAAI6+B,EAAU7+B,IAC7BW,KAAKq5B,cAAclC,cAAc93B,GAAK,WAI9CW,KAAKm6B,MAAQ,IAGT/vB,aAAatL,GACjB,MAAMigC,EAAmB,EAARjgC,IAAsC,EAARA,MAE3CigC,IAAa/+B,KAAKu6B,YAClBv6B,KAAKmxB,kBACLnxB,KAAKu6B,UAAYwE,GAIjB30B,kBACJ,MAAM40B,EAAah/B,KAAK06B,mBAAqB,EAI7C,GAFA16B,KAAK06B,kBAAoB,EAErBsE,EAAY,CACZ,MAAMC,EAAej/B,KAAKm6B,MAE1B,IAAKn6B,KAAKm6B,MAAQ,EAAGn6B,KAAKm6B,MAAQ8E,EAAcj/B,KAAKm6B,YAC7Cn6B,KAAKw6B,QACLx6B,KAAK88B,cAEL98B,KAAK+8B,iBA6DzB,SAAU9D,GA0EOA,cAAb,MACI7uB,YAAmBzG,EAA2B+N,EAAiB9P,GAA5C5B,YAAA2D,EAA2B3D,SAAA0R,EAAiB1R,aAAA4B,IA3EvE,CAAUq3B,KAAAA,cCl+BWiG,GACjB90B,YAAoByL,GAAkB,GAAlB7V,YAAA6V,EAoBpB7V,kBAAe,IAAID,EACnBC,gBAAa,IAAID,EAnBjBqK,OAEI,OADApK,KAAKm/B,WAAWn+B,SAAShB,MAClBA,KAAK6V,OAGhBzL,OACI,OAAOpK,KAAK6V,OAGhBzL,OAAOmL,GACCvV,KAAK6V,SAAWN,IAIpBvV,KAAK6V,OAASN,EACdvV,KAAKo/B,aAAap+B,SAASuU,KClBnC,MAAM8pB,GAANj1B,cAqBYpK,mBAAgB,IAAIk/B,GACpBl/B,kBAAe,IAAIk/B,GACnBl/B,kBAAe,IAAIk/B,GACnBl/B,mBAAgB,IAAIk/B,GACpBl/B,mBAAgB,IAAIk/B,GAxB5B90B,kBACI,OAAOpK,KAAKs/B,cAGhBl1B,iBACI,OAAOpK,KAAKu/B,aAGhBn1B,iBACI,OAAOpK,KAAKw/B,aAGhBp1B,wBACI,OAAOpK,KAAKy/B,cAGhBr1B,wBACI,OAAOpK,KAAK0/B,qBClBCC,GAArBv1B,cAqBYpK,WAAQ,IAAIk/B,GACZl/B,YAAS,IAAIk/B,GACbl/B,SAAM,IAAIk/B,GACVl/B,WAAQ,IAAIk/B,GAEZl/B,WAAQ,IAAIk/B,GAzBpB90B,UACI,OAAOpK,KAAK4/B,MAGhBx1B,WACI,OAAOpK,KAAK6/B,OAGhBz1B,QACI,OAAOpK,KAAK8/B,IAGhB11B,UACI,OAAOpK,KAAK+/B,MAGhB31B,UACI,OAAOpK,KAAKggC,aCjBCC,GAArB71B,cAcIpK,kBAAe,IAAID,EAETC,iBAAc,IAAIk/B,GAClBl/B,YAAS,GAhBnBoK,SAAStL,GACLkB,KAAKqK,OAASvL,EACdkB,KAAKm2B,aAAan1B,SAASlC,GAG/BsL,WACI,OAAOpK,KAAKqK,OAGhBD,UACI,OAAOpK,KAAKkgC,oCCdpB,SAAUC,EAAQC,EAAQC,GAE1B,SAASC,EAAKC,GACZ,IAgDIl7B,EAhDAm7B,EAAKxgC,KAAMygC,GAgDXp7B,EAAI,WAEG,SAAShB,GAClBA,EAAOq8B,OAAOr8B,GACd,IAAK,IAAIhF,EAAI,EAAGA,EAAIgF,EAAKvD,OAAQzB,IAAK,CAEpC,IAAIkE,EAAI,oBADR8B,GAAKhB,EAAKunB,WAAWvsB,IAGrBkE,GADA8B,EAAI9B,IAAM,EAGV8B,GADA9B,GAAK8B,KACK,EAEVA,GAAS,YADT9B,GAAK8B,GAGP,OAAmB,wBAAXA,IAAM,KA5DhBm7B,EAAG35B,KAAO,WACR,IAAI1B,EAAI,QAAUq7B,EAAGG,GAAY,uBAAPH,EAAG36B,EAG7B,OAFA26B,EAAGG,GAAKH,EAAGI,GACXJ,EAAGI,GAAKJ,EAAGK,GACJL,EAAGK,GAAK17B,GAAKq7B,EAAG36B,EAAQ,EAAJV,IAI7Bq7B,EAAG36B,EAAI,EACP26B,EAAGG,GAAKF,EAAK,KACbD,EAAGI,GAAKH,EAAK,KACbD,EAAGK,GAAKJ,EAAK,KACbD,EAAGG,IAAMF,EAAKF,GACVC,EAAGG,GAAK,IAAKH,EAAGG,IAAM,GAC1BH,EAAGI,IAAMH,EAAKF,GACVC,EAAGI,GAAK,IAAKJ,EAAGI,IAAM,GAC1BJ,EAAGK,IAAMJ,EAAKF,GACVC,EAAGK,GAAK,IAAKL,EAAGK,IAAM,GAC1BJ,EAAO,KAGT,SAASK,EAAKz4B,EAAGlD,GAKf,OAJAA,EAAEU,EAAIwC,EAAExC,EACRV,EAAEw7B,GAAKt4B,EAAEs4B,GACTx7B,EAAEy7B,GAAKv4B,EAAEu4B,GACTz7B,EAAE07B,GAAKx4B,EAAEw4B,GACF17B,EAGT,SAAS47B,EAAKR,EAAMS,GAClB,IAAIC,EAAK,IAAIX,EAAKC,GACdhrB,EAAQyrB,GAAQA,EAAKzrB,MACrB2rB,EAAOD,EAAGp6B,KAUd,OATAq6B,EAAKC,MAAQ,WAAa,OAAoB,WAAZF,EAAGp6B,OAAwB,GAC7Dq6B,EAAKE,OAAS,WACZ,OAAOF,IAAmC,uBAAhB,QAATA,IAAoB,IAEvCA,EAAKG,MAAQH,EACT3rB,IACmB,oBAAUurB,EAAKvrB,EAAO0rB,GAC3CC,EAAK3rB,MAAQ,WAAa,OAAOurB,EAAKG,EAAI,MAErCC,EAyBLd,GAAUA,EAAOvhC,QACnBuhC,EAAOvhC,QAAUkiC,EACRV,GAAUA,EAAOiB,IAC1BjB,GAAO,WAAa,OAAOU,KAE3B/gC,KAAKuhC,KAAOR,EA7Ed,CAiFE/gC,EAC+BogC,GAC/B,yBC3GF,SAAUD,EAAQC,EAAQC,GAE1B,SAASmB,EAAOjB,GACd,IAAIC,EAAKxgC,KAAMyhC,EAAU,GAEzBjB,EAAG7nB,EAAI,EACP6nB,EAAGl4B,EAAI,EACPk4B,EAAGkB,EAAI,EACPlB,EAAGmB,EAAI,EAGPnB,EAAG35B,KAAO,WACR,IAAI1B,EAAIq7B,EAAG7nB,EAAK6nB,EAAG7nB,GAAK,GAIxB,OAHA6nB,EAAG7nB,EAAI6nB,EAAGl4B,EACVk4B,EAAGl4B,EAAIk4B,EAAGkB,EACVlB,EAAGkB,EAAIlB,EAAGmB,EACHnB,EAAGmB,GAAMnB,EAAGmB,IAAM,GAAMx8B,EAAKA,IAAM,GAGxCo7B,KAAiB,EAAPA,GAEZC,EAAG7nB,EAAI4nB,EAGPkB,GAAWlB,EAIb,IAAK,IAAIn3B,EAAI,EAAGA,EAAIq4B,EAAQ3gC,OAAS,GAAIsI,IACvCo3B,EAAG7nB,GAA6B,EAAxB8oB,EAAQ7V,WAAWxiB,GAC3Bo3B,EAAG35B,OAIP,SAASi6B,EAAKz4B,EAAGlD,GAKf,OAJAA,EAAEwT,EAAItQ,EAAEsQ,EACRxT,EAAEmD,EAAID,EAAEC,EACRnD,EAAEu8B,EAAIr5B,EAAEq5B,EACRv8B,EAAEw8B,EAAIt5B,EAAEs5B,EACDx8B,EAGT,SAAS47B,EAAKR,EAAMS,GAClB,IAAIC,EAAK,IAAIO,EAAOjB,GAChBhrB,EAAQyrB,GAAQA,EAAKzrB,MACrB2rB,EAAO,WAAa,OAAQD,EAAGp6B,SAAW,GAAK,YAenD,OAdAq6B,EAAKE,OAAS,WACZ,GACE,IAEI19B,IAFMu9B,EAAGp6B,SAAW,KACbo6B,EAAGp6B,SAAW,GAAK,aACF,GAAK,UACf,IAAXnD,GACT,OAAOA,GAETw9B,EAAKC,MAAQF,EAAGp6B,KAChBq6B,EAAKG,MAAQH,EACT3rB,IACmB,oBAAUurB,EAAKvrB,EAAO0rB,GAC3CC,EAAK3rB,MAAQ,WAAa,OAAOurB,EAAKG,EAAI,MAErCC,EAGLd,GAAUA,EAAOvhC,QACnBuhC,EAAOvhC,QAAUkiC,EACRV,GAAUA,EAAOiB,IAC1BjB,GAAO,WAAa,OAAOU,KAE3B/gC,KAAK4hC,OAASb,EApEhB,CAwEE/gC,EAC+BogC,GAC/B,yBC1EF,SAAUD,EAAQC,EAAQC,GAE1B,SAASmB,EAAOjB,GACd,IAAIC,EAAKxgC,KAAMyhC,EAAU,GAGzBjB,EAAG35B,KAAO,WACR,IAAI1B,EAAKq7B,EAAG7nB,EAAK6nB,EAAG7nB,IAAM,EAE1B,OADA6nB,EAAG7nB,EAAI6nB,EAAGl4B,EAAGk4B,EAAGl4B,EAAIk4B,EAAGkB,EAAGlB,EAAGkB,EAAIlB,EAAGmB,EAAGnB,EAAGmB,EAAInB,EAAGh5B,GACzCg5B,EAAG97B,EAAK87B,EAAG97B,EAAI,OAAS,IAC5B87B,EAAGh5B,EAAKg5B,EAAGh5B,EAAKg5B,EAAGh5B,GAAK,EAAOrC,EAAKA,GAAK,GAAO,GAGtDq7B,EAAG7nB,EAAI,EACP6nB,EAAGl4B,EAAI,EACPk4B,EAAGkB,EAAI,EACPlB,EAAGmB,EAAI,EACPnB,EAAGh5B,EAAI,EAEH+4B,KAAiB,EAAPA,GAEZC,EAAG7nB,EAAI4nB,EAGPkB,GAAWlB,EAIb,IAAK,IAAIn3B,EAAI,EAAGA,EAAIq4B,EAAQ3gC,OAAS,GAAIsI,IACvCo3B,EAAG7nB,GAA6B,EAAxB8oB,EAAQ7V,WAAWxiB,GACvBA,GAAKq4B,EAAQ3gC,SACf0/B,EAAG97B,EAAI87B,EAAG7nB,GAAK,GAAK6nB,EAAG7nB,IAAM,GAE/B6nB,EAAG35B,OAIP,SAASi6B,EAAKz4B,EAAGlD,GAOf,OANAA,EAAEwT,EAAItQ,EAAEsQ,EACRxT,EAAEmD,EAAID,EAAEC,EACRnD,EAAEu8B,EAAIr5B,EAAEq5B,EACRv8B,EAAEw8B,EAAIt5B,EAAEs5B,EACRx8B,EAAEqC,EAAIa,EAAEb,EACRrC,EAAET,EAAI2D,EAAE3D,EACDS,EAGT,SAAS47B,EAAKR,EAAMS,GAClB,IAAIC,EAAK,IAAIO,EAAOjB,GAChBhrB,EAAQyrB,GAAQA,EAAKzrB,MACrB2rB,EAAO,WAAa,OAAQD,EAAGp6B,SAAW,GAAK,YAenD,OAdAq6B,EAAKE,OAAS,WACZ,GACE,IAEI19B,IAFMu9B,EAAGp6B,SAAW,KACbo6B,EAAGp6B,SAAW,GAAK,aACF,GAAK,UACf,IAAXnD,GACT,OAAOA,GAETw9B,EAAKC,MAAQF,EAAGp6B,KAChBq6B,EAAKG,MAAQH,EACT3rB,IACmB,oBAAUurB,EAAKvrB,EAAO0rB,GAC3CC,EAAK3rB,MAAQ,WAAa,OAAOurB,EAAKG,EAAI,MAErCC,EAGLd,GAAUA,EAAOvhC,QACnBuhC,EAAOvhC,QAAUkiC,EACRV,GAAUA,EAAOiB,IAC1BjB,GAAO,WAAa,OAAOU,KAE3B/gC,KAAK6hC,OAASd,EAzEhB,CA6EE/gC,EAC+BogC,GAC/B,yBC7EF,SAAUD,EAAQC,EAAQC,GAE1B,SAASmB,EAAOjB,GACd,IAAIC,EAAKxgC,KAGTwgC,EAAG35B,KAAO,eAEgB1B,EAAGqC,EAAvBs6B,EAAItB,EAAG7nB,EAAGtZ,EAAImhC,EAAGnhC,EAQrB,OAPA8F,EAAI28B,EAAEziC,GAAoBmI,GAAhBrC,GAAMA,IAAM,GAAaA,GAAK,GACpBqC,IAApBrC,EAAI28B,EAAGziC,EAAI,EAAK,IAAc8F,IAAM,GAChBqC,IAApBrC,EAAI28B,EAAGziC,EAAI,EAAK,IAAc8F,IAAM,EAChBqC,IAApBrC,EAAI28B,EAAGziC,EAAI,EAAK,IAAc8F,GAAK,EACnCA,EAAI28B,EAAGziC,EAAI,EAAK,GAAuBmI,IAAnBrC,GAASA,GAAK,IAAeA,GAAK,EACtD28B,EAAEziC,GAAKmI,EACPg5B,EAAGnhC,EAAKA,EAAI,EAAK,EACVmI,GAGT,SAAcg5B,EAAID,GAChB,IAAIj3B,EAAMw4B,EAAI,GAEd,GAAIvB,KAAiB,EAAPA,GAERuB,EAAE,GAAKvB,OAIX,IADAA,EAAO,GAAKA,EACPj3B,EAAI,EAAGA,EAAIi3B,EAAKz/B,SAAUwI,EAC7Bw4B,EAAM,EAAJx4B,GAAUw4B,EAAM,EAAJx4B,IAAU,GACnBi3B,EAAK3U,WAAWtiB,GAAKw4B,EAAGx4B,EAAI,EAAK,IAAM,GAIhD,KAAOw4B,EAAEhhC,OAAS,GAAGghC,EAAExiC,KAAK,GAC5B,IAAKgK,EAAI,EAAGA,EAAI,GAAc,IAATw4B,EAAEx4B,KAAYA,GAOnC,IANS,GAALA,EAAYw4B,EAAE,IAAM,EAAYA,EAAEx4B,GAEtCk3B,EAAG7nB,EAAImpB,EACPtB,EAAGnhC,EAAI,EAGFiK,EAAI,IAAKA,EAAI,IAAKA,EACrBk3B,EAAG35B,OAIPuH,CAAKoyB,EAAID,GAGX,SAASO,EAAKz4B,EAAGlD,GAGf,OAFAA,EAAEwT,EAAItQ,EAAEsQ,EAAEopB,QACV58B,EAAE9F,EAAIgJ,EAAEhJ,EACD8F,EAGT,SAAS47B,EAAKR,EAAMS,GACN,MAART,IAAcA,OAAayB,MAC/B,IAAIf,EAAK,IAAIO,EAAOjB,GAChBhrB,EAAQyrB,GAAQA,EAAKzrB,MACrB2rB,EAAO,WAAa,OAAQD,EAAGp6B,SAAW,GAAK,YAenD,OAdAq6B,EAAKE,OAAS,WACZ,GACE,IAEI19B,IAFMu9B,EAAGp6B,SAAW,KACbo6B,EAAGp6B,SAAW,GAAK,aACF,GAAK,UACf,IAAXnD,GACT,OAAOA,GAETw9B,EAAKC,MAAQF,EAAGp6B,KAChBq6B,EAAKG,MAAQH,EACT3rB,IACEA,EAAMoD,GAAGmoB,EAAKvrB,EAAO0rB,GACzBC,EAAK3rB,MAAQ,WAAa,OAAOurB,EAAKG,EAAI,MAErCC,EAGLd,GAAUA,EAAOvhC,QACnBuhC,EAAOvhC,QAAUkiC,EACRV,GAAUA,EAAOiB,IAC1BjB,GAAO,WAAa,OAAOU,KAE3B/gC,KAAKiiC,UAAYlB,EAnFnB,CAuFE/gC,EAC+BogC,GAC/B,yBCrEF,SAAUD,EAAQC,EAAQC,GAE1B,SAASmB,EAAOjB,GACd,IAAIC,EAAKxgC,KAGTwgC,EAAG35B,KAAO,WACR,IACwB1B,EAAGqC,EADvBm6B,EAAInB,EAAGmB,EACPG,EAAItB,EAAGsB,EAAGziC,EAAImhC,EAAGnhC,EAcrB,OAZAmhC,EAAGmB,EAAIA,EAAKA,EAAI,WAAc,EAE9Bn6B,EAAIs6B,EAAGziC,EAAI,GAAM,KACjB8F,EAAI28B,EAAEziC,EAAMA,EAAI,EAAK,KACrBmI,GAAKA,GAAK,GACVrC,GAAKA,GAAK,GACVqC,GAAKA,IAAM,GACXrC,GAAKA,IAAM,GAEXqC,EAAIs6B,EAAEziC,GAAKmI,EAAIrC,EACfq7B,EAAGnhC,EAAIA,EAECmI,GAAKm6B,EAAKA,IAAM,IAAQ,GAGlC,SAAcnB,EAAID,GAChB,IAAIp7B,EAAGqC,EAAGnI,EAAGiK,EAAGq4B,EAAGG,EAAI,GAAII,EAAQ,IAYnC,IAXI3B,KAAiB,EAAPA,IAEZ/4B,EAAI+4B,EACJA,EAAO,OAGPA,GAAc,KACd/4B,EAAI,EACJ06B,EAAQjM,KAAKkM,IAAID,EAAO3B,EAAKz/B,SAG1BzB,EAAI,EAAGiK,GAAK,GAAIA,EAAI44B,IAAS54B,EAE5Bi3B,IAAM/4B,GAAK+4B,EAAK3U,YAAYtiB,EAAI,IAAMi3B,EAAKz/B,SAErC,IAANwI,IAASq4B,EAAIn6B,GACjBA,GAAKA,GAAK,GACVA,GAAKA,IAAM,GACXA,GAAKA,GAAK,EACVA,GAAKA,IAAM,GACP8B,GAAK,IACPq4B,EAAKA,EAAI,WAAc,EAEvBtiC,EAAK,IADL8F,EAAK28B,EAAM,IAAJx4B,IAAa9B,EAAIm6B,GACTtiC,EAAI,EAAI,GAW3B,IAPIA,GAAK,MACPyiC,EAA+B,KAA5BvB,GAAQA,EAAKz/B,QAAU,KAAa,GAKzCzB,EAAI,IACCiK,EAAI,IAASA,EAAI,IAAKA,EACzB9B,EAAIs6B,EAAGziC,EAAI,GAAM,KACjB8F,EAAI28B,EAAEziC,EAAMA,EAAI,EAAK,KACrBmI,GAAKA,GAAK,GACVrC,GAAKA,GAAK,GACVqC,GAAKA,IAAM,GACXrC,GAAKA,IAAM,GACX28B,EAAEziC,GAAKmI,EAAIrC,EAGbq7B,EAAGmB,EAAIA,EACPnB,EAAGsB,EAAIA,EACPtB,EAAGnhC,EAAIA,EAGT+O,CAAKoyB,EAAID,GAGX,SAASO,EAAKz4B,EAAGlD,GAIf,OAHAA,EAAE9F,EAAIgJ,EAAEhJ,EACR8F,EAAEw8B,EAAIt5B,EAAEs5B,EACRx8B,EAAE28B,EAAIz5B,EAAEy5B,EAAEC,QACH58B,EAGT,SAAS47B,EAAKR,EAAMS,GACN,MAART,IAAcA,OAAayB,MAC/B,IAAIf,EAAK,IAAIO,EAAOjB,GAChBhrB,EAAQyrB,GAAQA,EAAKzrB,MACrB2rB,EAAO,WAAa,OAAQD,EAAGp6B,SAAW,GAAK,YAenD,OAdAq6B,EAAKE,OAAS,WACZ,GACE,IAEI19B,IAFMu9B,EAAGp6B,SAAW,KACbo6B,EAAGp6B,SAAW,GAAK,aACF,GAAK,UACf,IAAXnD,GACT,OAAOA,GAETw9B,EAAKC,MAAQF,EAAGp6B,KAChBq6B,EAAKG,MAAQH,EACT3rB,IACEA,EAAMusB,GAAGhB,EAAKvrB,EAAO0rB,GACzBC,EAAK3rB,MAAQ,WAAa,OAAOurB,EAAKG,EAAI,MAErCC,EAGLd,GAAUA,EAAOvhC,QACnBuhC,EAAOvhC,QAAUkiC,EACRV,GAAUA,EAAOiB,IAC1BjB,GAAO,WAAa,OAAOU,KAE3B/gC,KAAKoiC,QAAUrB,EAjHjB,CAqHE/gC,EAC+BogC,GAC/B,yBC5IF,SAAUD,EAAQC,EAAQC,GAE1B,SAASmB,EAAOjB,GACd,IAAIC,EAAKxgC,KAAMyhC,EAAU,GAGzBjB,EAAG35B,KAAO,WACR,IAAIlC,EAAI67B,EAAG77B,EAAGkB,EAAI26B,EAAG36B,EAAGnB,EAAI87B,EAAG97B,EAAG2E,EAAIm3B,EAAGn3B,EAQzC,OAPA1E,EAAKA,GAAK,GAAOA,IAAM,EAAKkB,EAC5BA,EAAKA,EAAInB,EAAK,EACdA,EAAKA,GAAK,GAAOA,IAAM,EAAK2E,EAC5BA,EAAKA,EAAI1E,EAAK,EACd67B,EAAG77B,EAAIA,EAAKA,GAAK,GAAOA,IAAM,GAAMkB,EACpC26B,EAAG36B,EAAIA,EAAKA,EAAInB,EAAK,EACrB87B,EAAG97B,EAAKA,GAAK,GAAOmB,IAAM,GAAMwD,EACzBm3B,EAAGn3B,EAAKA,EAAI1E,EAAK,GAmB1B67B,EAAGn3B,EAAI,EACPm3B,EAAG77B,EAAI,EACP67B,EAAG36B,GAAI,WACP26B,EAAG97B,EAAI,WAEH67B,IAAStK,KAAKoM,MAAM9B,IAEtBC,EAAGn3B,EAAKk3B,EAAO,WAAe,EAC9BC,EAAG77B,EAAW,EAAP47B,GAGPkB,GAAWlB,EAIb,IAAK,IAAIn3B,EAAI,EAAGA,EAAIq4B,EAAQ3gC,OAAS,GAAIsI,IACvCo3B,EAAG77B,GAA6B,EAAxB88B,EAAQ7V,WAAWxiB,GAC3Bo3B,EAAG35B,OAIP,SAASi6B,EAAKz4B,EAAGlD,GAKf,OAJAA,EAAEkE,EAAIhB,EAAEgB,EACRlE,EAAER,EAAI0D,EAAE1D,EACRQ,EAAEU,EAAIwC,EAAExC,EACRV,EAAET,EAAI2D,EAAE3D,EACDS,EAGT,SAAS47B,EAAKR,EAAMS,GAClB,IAAIC,EAAK,IAAIO,EAAOjB,GAChBhrB,EAAQyrB,GAAQA,EAAKzrB,MACrB2rB,EAAO,WAAa,OAAQD,EAAGp6B,SAAW,GAAK,YAenD,OAdAq6B,EAAKE,OAAS,WACZ,GACE,IAEI19B,IAFMu9B,EAAGp6B,SAAW,KACbo6B,EAAGp6B,SAAW,GAAK,aACF,GAAK,UACf,IAAXnD,GACT,OAAOA,GAETw9B,EAAKC,MAAQF,EAAGp6B,KAChBq6B,EAAKG,MAAQH,EACT3rB,IACmB,oBAAUurB,EAAKvrB,EAAO0rB,GAC3CC,EAAK3rB,MAAQ,WAAa,OAAOurB,EAAKG,EAAI,MAErCC,EAGLd,GAAUA,EAAOvhC,QACnBuhC,EAAOvhC,QAAUkiC,EACRV,GAAUA,EAAOiB,IAC1BjB,GAAO,WAAa,OAAOU,KAE3B/gC,KAAKsiC,OAASvB,EAzFhB,CA6FE/gC,EAC+BogC,GAC/B,SCnGa,sBCwBf,SAAWD,EAAQoC,EAAMC,GAKzB,IAQIC,EAJAC,EAAaF,EAAKG,IAJV,IACC,GAITC,EAAeJ,EAAKG,IAAI,EAHf,IAITE,EAA0B,EAAfD,EAQf,SAASE,EAAWvC,EAAMwC,EAASnjC,GACjC,IAAI+F,EAAM,GAINq9B,EAAYC,EAmHlB,SAASC,EAAQC,EAAKC,GACpB,IAAqCnuB,EAAjCvR,EAAS,GAAI2/B,SAAcF,EAC/B,GAAIC,GAAgB,UAAPC,EACX,IAAKpuB,KAAQkuB,EACX,IAAMz/B,EAAOpE,KAAK4jC,EAAQC,EAAIluB,GAAOmuB,EAAQ,IAAO,MAAOh/B,IAG/D,OAAQV,EAAO5C,OAAS4C,EAAgB,UAAP2/B,EAAkBF,EAAMA,EAAM,KA1HxCD,EAHvBH,EAAsB,GAAXA,EAAmB,CAAEO,SAAS,GAAUP,GAAW,IAIpDO,QAAU,CAAC/C,EAAMgD,EAAShB,IACzB,MAARhC,EA8IL,WACE,IACE,IAAIiD,EAQJ,OAPIf,IAAee,EAAMf,EAAWgB,aAElCD,EAAMA,EAxKA,MA0KNA,EAAM,IAAI5wB,WA1KJ,MA2KLutB,EAAOuD,QAAUvD,EAAOwD,UAAUC,gBAAgBJ,IAE9CD,EAASC,GAChB,MAAOp/B,GACP,IAAIy/B,EAAU1D,EAAO2D,UACjBC,EAAUF,GAAWA,EAAQE,QACjC,MAAO,EAAE,IAAI/B,KAAM7B,EAAQ4D,EAAS5D,EAAO6D,OAAQT,EAAShB,KA5J3C0B,GAAa1D,EAAM,GAAI56B,GAGtCu+B,EAAO,IAAIC,EAAKx+B,GAIhBu7B,EAAO,WAIT,IAHA,IAAI77B,EAAI6+B,EAAK37B,EA5BJ,GA6BL7D,EAAIg+B,EACJ/pB,EAAI,EACDtT,EAAIu9B,GACTv9B,EAjCM,KAiCDA,EAAIsT,GACTjU,GAlCM,IAmCNiU,EAAIurB,EAAK37B,EAAE,GAEb,KAAOlD,GAAKw9B,GACVx9B,GAAK,EACLX,GAAK,EACLiU,KAAO,EAET,OAAQtT,EAAIsT,GAAKjU,GAWnB,OARAw8B,EAAKC,MAAQ,WAAa,OAAmB,EAAZ+C,EAAK37B,EAAE,IACxC24B,EAAKG,MAAQ,WAAa,OAAO6C,EAAK37B,EAAE,GAAK,YAC7C24B,EAAKE,OAASF,EAGd+B,EAAOM,EAASW,EAAKE,GAAI7B,IAGjBQ,EAAQsB,MAAQzkC,GACpB,SAASshC,EAAMX,EAAM+D,EAAc/uB,GAUjC,OATIA,IAEEA,EAAM6uB,GAAKtD,EAAKvrB,EAAO2uB,GAE3BhD,EAAK3rB,MAAQ,WAAa,OAAOurB,EAAKoD,EAAM,MAK1CI,GAAgB9B,EAAY,OAAItB,EAAaX,GAIrCW,IAElBA,EACA8B,EACA,WAAYD,EAAUA,EAAQ5C,OAAUngC,MAAQwiC,EAChDO,EAAQxtB,OAaV,SAAS4uB,EAAKx+B,GACZ,IAAIR,EAAGo/B,EAAS5+B,EAAI7E,OAChB0/B,EAAKxgC,KAAMX,EAAI,EAAGiK,EAAIk3B,EAAGnhC,EAAImhC,EAAGl3B,EAAI,EAAGlE,EAAIo7B,EAAG4D,EAAI,GAMtD,IAHKG,IAAU5+B,EAAM,CAAC4+B,MAGfllC,EA9FG,KA+FR+F,EAAE/F,GAAKA,IAET,IAAKA,EAAI,EAAGA,EAjGF,IAiGaA,IACrB+F,EAAE/F,GAAK+F,EAAEkE,EA3FFoC,IA2FcpC,EAAI3D,EAAItG,EAAIklC,IAAWp/B,EAAIC,EAAE/F,KAClD+F,EAAEkE,GAAKnE,GAIRq7B,EAAGj4B,EAAI,SAASilB,GAIf,IAFA,IAAIroB,EAAGW,EAAI,EACPzG,EAAImhC,EAAGnhC,EAAGiK,EAAIk3B,EAAGl3B,EAAGlE,EAAIo7B,EAAG4D,EACxB5W,KACLroB,EAAIC,EAAE/F,EArGDqM,IAqGarM,EAAI,GACtByG,EA7GM,IA6GFA,EAAYV,EAtGXsG,KAsGsBtG,EAAE/F,GAAK+F,EAAEkE,EAtG/BoC,IAsG2CpC,EAAInE,KAAQC,EAAEkE,GAAKnE,IAGrE,OADAq7B,EAAGnhC,EAAIA,EAAGmhC,EAAGl3B,EAAIA,EACVxD,IAhHC,KA2HZ,SAASg7B,EAAKz4B,EAAGlD,GAIf,OAHAA,EAAE9F,EAAIgJ,EAAEhJ,EACR8F,EAAEmE,EAAIjB,EAAEiB,EACRnE,EAAEi/B,EAAI/7B,EAAE+7B,EAAErC,QACH58B,EAsBT,SAAS89B,EAAO1C,EAAM56B,GAEpB,IADA,IAA4B6+B,EAAxBC,EAAalE,EAAO,GAAWj3B,EAAI,EAChCA,EAAIm7B,EAAW3jC,QACpB6E,EAjJO+F,IAiJIpC,GAjJJoC,KAkJI84B,GAAyB,GAAhB7+B,EAlJb+F,IAkJwBpC,IAAWm7B,EAAW7Y,WAAWtiB,KAElE,OAAOi6B,EAAS59B,GA8BlB,SAAS49B,EAASl6B,GAChB,OAAOq3B,OAAOgE,aAAajlC,MAAM,EAAG4J,GAgBtC,GANA45B,EAAOT,EAAKmC,SAAUpC,GAManC,EAAOvhC,QAAS,CACjDuhC,UAAiB0C,EAEjB,IACEL,EAAamC,GACb,MAAOC,UAKTrC,EAAqB,WAAIM,EAzN3B,CAiOmB,oBAAT5F,KAAwBA,KAAOl9B,EACvC,GACAi2B,YCvMCsL,KAAOA,MACPK,OAASA,MACTC,OAASA,MACTI,UAAYA,MACZG,QAAUA,MACVE,OAASA,GAEZ,ICEUwC,GCpCAC,MFkCOC,QGzBjB,MAAMC,GACF76B,YAAoBuI,GAAA3S,UAAA2S,EAEpBvI,SACI,OAAOpK,KAAK2S,KAAK0uB,QAGrBj3B,SACI,OAAOpK,KAAK2S,KAAKyuB,SAGrBh3B,QACI,OAAOpK,KAAK2S,KAAKwuB,QAGrB/2B,IAAI+3B,GACA,OAAQniC,KAAK2S,KAAKwuB,UAAY,IAAMgB,EAAM,GAG9C/3B,YACI,OAAOpK,KAAK2S,KAAK4C,SCDzB,MAAM2vB,GACF96B,YACY6iB,EACRlb,EACAozB,OC3BkB5E,EDyBVvgC,aAAAitB,EA+SZjtB,UAAO,IAAID,EAEXC,WAAQ,IAAID,EAEZC,cAAW,IAAID,EAEfC,iBAAc,IAAID,EAaVC,kBACAA,gBAAa,EACbA,YAAQ,EAERA,oBAAgB,EAChBA,iBAAa,EAEbA,eAAY,EAEZA,cAAW,EACXA,gBAAa,EAEbA,YAAS,CACbwyB,KAAO4S,GAA2BplC,KAAKqlC,MAAMD,GAC7CE,MAAQC,GAAwCvlC,KAAKwlC,OAAOD,GAC5DpX,KAAM,IAAYnuB,KAAKylC,QACvBC,UAAW,MAAiB1lC,KAAK2lC,UA9UjC3lC,KAAK2S,OC7Ba4tB,ED6BItT,EAAQ7B,WAAa,EAAI6K,KAAK0O,SAAW1X,EAAQ7B,YC5BhE,IACPmV,EAAOtK,KAAK0O,UAGT,IAAIM,GACPW,GAAgBrF,EAAa,CACzBhrB,OAAO,MDuBXxD,EAAU8zB,UAAU7lC,KAAK2S,MAEzB,MAAML,EAAM,IAAIhB,OAEU,IAAf6zB,IACPA,EAAa,CAACvxB,EAAMiX,IAAQ,IAAIY,GAAWwB,EAAQzB,SAAS1jB,OAAO8L,EAAMiX,IAG7E,MAAMib,EAAe,IAAIzG,GACrBnG,EAAY,IAAIyG,GAChBxG,EAAY,IAAIwG,GAChBvG,EAAU,IAAIt0B,MAAM,GAExB,IAAK,IAAIzF,EAAI,EAAGA,EAAI,EAAGA,IACnB+5B,EAAQ/5B,GAAK,IAAI4gC,GAGrB,MAAM3E,EAAM6J,EAAW7yB,EAAKtS,KAAK2S,MAC3Bd,EAAM,IAAIU,EAAIuzB,EAAc5M,EAAWC,EAAWn5B,KAAK2S,MACvDjB,EAAM,IAAIunB,GAAIhM,EAASiM,EAAWC,EAAWC,GAEnDkC,EAAIyK,8BAA8B,IAAM/lC,KAAKgmC,yBAE7Ct0B,EAAIu0B,OAAO3K,GACN4K,OAAO5zB,GACPipB,mBAAmB,IAAMv7B,KAAKmmC,cAEnCp0B,EACKk0B,OAAO3K,GACP4K,OAAO5zB,GACPipB,mBAAmB,IAAMv7B,KAAKmmC,cAC9BC,OAAOpmC,KAAK2S,MAEjBd,EAAIq0B,OAAO5zB,GAEXA,EAAI+zB,OAAO30B,GACN40B,OAAOz0B,GACP00B,aAAax0B,GAElB/R,KAAK4T,KAAOtB,EACZtS,KAAKq7B,KAAOC,EACZt7B,KAAK4R,KAAOF,EACZ1R,KAAK8R,KAAOD,EACZ7R,KAAKgS,WAAaD,EAClB/R,KAAKwS,cAAgBszB,EACrB9lC,KAAKyS,WAAaymB,EAClBl5B,KAAK0S,WAAaymB,EAClBn5B,KAAKk6B,SAAWd,EAEhBp5B,KAAK4T,KAAKrI,MAAMgG,KAAKjR,WAAYR,GAC7BE,KAAK2R,cAA2C7R,EAAQ8B,UAG5D5B,KAAKwmC,SAAWvb,GAAOsC,WAAWN,GAClCjtB,KAAKymC,WAAa,SAAOxZ,EAAQ/B,OAAgC,IAAM,KAEvElrB,KAAK6S,QAGTzI,SACI,OAAOpK,KAAKq7B,KAGhBjxB,SACI,OAAOpK,KAAK4T,KAGhBxJ,iBACI,OAAOpK,KAAK4R,KAGhBxH,sBACI,MAAO,CAAC,EAAG,GAAG4D,IAAI3O,GAAKW,KAAK4R,KAAK80B,mBAAmBrnC,IAGxD+K,gBACI,OAAOpK,KAAK4R,KAAKR,gBAGrBhH,WACI,OAAOpK,KAAK2mC,OAGhBv8B,YACI,OAAOpK,KAAKitB,QAGhB7iB,QAiBI,OAhBApK,KAAKq7B,KAAKxoB,QACV7S,KAAK4R,KAAKiB,QACV7S,KAAK8R,KAAKe,QACV7S,KAAKgS,WAAWa,QAEhB7S,KAAKwS,cAAc2B,iBAAiByyB,QAAO,GAC3C5mC,KAAKwS,cAAc4B,kBAAkBwyB,QAAO,GAC5C5mC,KAAKwS,cAAc6B,iBAAiBuyB,QAAO,GAC3C5mC,KAAKwS,cAAc8B,wBAAwBsyB,QAAO,GAClD5mC,KAAKwS,cAAc+B,wBAAwBqyB,QAAO,GAElD5mC,KAAK6mC,UAAY,EACjB7mC,KAAK8mC,WAAa,EAElB9mC,KAAK+mC,YAAY/lC,WAEVhB,KAGXoK,OACI,IAAI48B,EAAS,EACTC,EAAY,EAIhB,GAFAjnC,KAAK6S,YAED7S,KAAKq7B,KAAKza,eACV,MAAM,IAAI1d,MAAM,mBAGpB,SAAQlD,KAAKq7B,KAAKza,gBACd5gB,KAAKknC,SAELF,IACuB,IAAnBhnC,KAAK6mC,WACLI,IAMR,OAFAjnC,KAAKmnC,SAASnmC,SAASimC,GACvBjnC,KAAKuyB,MAAMvxB,SAASgmC,GACbhnC,KAGXoK,UACIpK,KAAKonC,YAAa,EAClBpnC,KAAKqnC,oBAGTj9B,SACIpK,KAAKonC,YAAa,EAClBpnC,KAAKqnC,oBAGTj9B,gBAAgBmL,GACZvV,KAAKsnC,cAAgB/xB,EACrBvV,KAAKqnC,oBAGTj9B,YAAYzG,EAAmC/B,GAK3C,GAJA5B,KAAKylC,QAELzlC,KAAKunC,OAAQ,GAETvnC,KAAKuR,KAAKtR,YAGV,MAAM,IAAIiD,MAAMtB,GAGpB,OALI5B,KAAKuR,KAAKvQ,SAAS,IAAI0G,EAAe2K,YAAY1O,EAAQ3D,KAAM4B,IAK7D5B,KAGXoK,kBACI,OAAOpK,KAAKwS,cAGhBpI,eACI,OAAOpK,KAAKyS,WAGhBrI,eACI,OAAOpK,KAAK0S,WAGhBtI,qBACI,MAAMo9B,EAAM,eAEZ,MACI,SACAA,EACA,KACAxnC,KAAK4R,KAAK8qB,gBACV,aAGA,GAAG8K,MACH,GAAGxnC,KAAK8R,KAAK4qB,oBAIrBtyB,aAAaq9B,GAGT,OAFAznC,KAAK0nC,WAAaD,EAEXznC,KAGXoK,eACI,OAAOpK,KAAK0nC,WAGhBt9B,UAAUzJ,GACN,OAAOX,KAAKk6B,SAASv5B,GAGzByJ,aACI,OAAQpK,KAAK8mC,WAAa7b,GAAOsC,WAAWvtB,KAAKitB,SAAY,EAGzD7iB,qBAAqBiH,EAAcs2B,GACvC,MAAM5F,EAAQ4F,EAAa1R,KAAK2R,MAAOD,EAAat2B,EAAMm1B,SAAY,KAAQn1B,EAAMo1B,WAEpF,OAAQp1B,EAAMg0B,MAAMtD,GAAS1wB,EAAMm1B,SAAY,IAG3Cp8B,oBACJpK,KAAK4R,KAAKi2B,gBAAgB7nC,KAAKsnC,gBAAkBtnC,KAAKonC,YAGlDh9B,SACJpK,KAAK4R,KAAKk2B,QAEN9nC,KAAK6mC,aAAe,IACpB7mC,KAAK8R,KAAKg2B,QACV9nC,KAAKq7B,KAAKyM,QACV9nC,KAAK6mC,UAAY,GAIjBz8B,MAAM29B,GACV,IAAI1oC,EAAI,EACJ2nC,EAAS,EACTC,EAAY,EACZe,EAAqBhoC,KAAKq7B,KAAKza,eAInC,IAFA5gB,KAAKunC,OAAQ,EAENloC,IAAM0oC,IAAoB/nC,KAAKunC,OAClCvnC,KAAKknC,SACLF,IAEuB,IAAnBhnC,KAAK6mC,YACLI,IACAjnC,KAAK8mC,cAGLkB,IAAuBhoC,KAAKq7B,KAAKza,iBACjConB,EAAqBhoC,KAAKq7B,KAAKza,mBAE3B5gB,KAAKq7B,KAAKza,iBACV5gB,KAAKgS,WAAWi2B,6BAGZjoC,KAAK0nC,YACLT,EAAY,GACZjnC,KAAKmnC,SAASlnC,cAEdD,KAAKmnC,SAASnmC,SAASimC,GACvBA,EAAY,KAc5B,OARIA,EAAY,GAAKjnC,KAAKmnC,SAASlnC,aAC/BD,KAAKmnC,SAASnmC,SAASimC,GAGvBD,EAAS,GAAKhnC,KAAKuyB,MAAMtyB,aACzBD,KAAKuyB,MAAMvxB,SAASgmC,GAGjBA,EAGH58B,OAAOm7B,GACPvlC,KAAK2lC,WAIT3lC,KAAK2lC,SAAWJ,EAAUD,MACtBJ,GAAMgD,cACNloC,KACA,SAAQA,KAAKitB,QAAQ/B,OAAgC,GAAK,MAI1D9gB,QACCpK,KAAK2lC,WAIV3lC,KAAK2lC,SAASxX,OAEdnuB,KAAK2lC,cAAW5kC,GAGZqJ,wBACJpK,KAAK2R,cAA2C,yBHtSxD,SAAUmzB,GAOOA,cAAb,MACI16B,YAAmBzG,EAA2BoO,EAAsCnQ,GAAjE5B,YAAA2D,EAA2B3D,eAAA+R,EAAsC/R,aAAA4B,IAR5F,CAAUkjC,KAAAA,QCpCV,SAAUC,GACN,IAAYoD,GAAZ,SAAYA,GACRA,0BACAA,0BAEAA,sCAEAA,sCACAA,sCACAA,sCACAA,sCACAA,sCACAA,wCACAA,0DACAA,sCAEAA,wCAEAA,wCACAA,wCAEAA,kCAEAA,wCAEAA,wCACAA,wCAEAA,gCACAA,oDACAA,4CACAA,kCAEAA,oBAhCJ,CAAYA,EAAApD,kBAAAA,qBAmCIA,cAAhB,WACI,MAAO,CACHoD,EAAcC,WACdD,EAAcE,WACdF,EAAcG,iBACdH,EAAcI,iBACdJ,EAAcK,iBACdL,EAAcM,iBACdN,EAAcO,iBACdP,EAAcQ,iBACdR,EAAcS,2BACdT,EAAcU,iBACdV,EAAcW,kBACdX,EAAcY,kBACdZ,EAAca,kBACdb,EAAcc,kBACdd,EAAce,eACdf,EAAcgB,kBACdhB,EAAciB,cACdjB,EAAckB,kBACdlB,EAAcmB,kBACdnB,EAAcoB,wBACdpB,EAAcqB,oBACdrB,EAAcsB,eACdtB,EAAcuB,UAIN3E,wBAAhB,SAAsC4E,GAClC,OAAQA,GACJ,KAAKxB,EAAcC,WACf,MAAO,WAEX,KAAKD,EAAcE,WACf,MAAO,WAEX,KAAKF,EAAcG,iBACf,MAAO,uBAEX,KAAKH,EAAcI,iBACf,MAAO,qCAEX,KAAKJ,EAAcK,iBACf,MAAO,4CAEX,KAAKL,EAAcM,iBACf,MAAO,2CAEX,KAAKN,EAAcO,iBACf,MAAO,0CAEX,KAAKP,EAAcQ,iBACf,MAAO,wCAEX,KAAKR,EAAcU,iBACf,MAAO,uCAEX,KAAKV,EAAcW,kBACf,MAAO,oCAEX,KAAKX,EAAcY,kBACf,MAAO,wBAEX,KAAKZ,EAAcS,2BACf,MAAO,uCAEX,KAAKT,EAAca,kBACf,MAAO,sCAEX,KAAKb,EAAcc,kBACf,MAAO,0CAEX,KAAKd,EAAce,eACf,MAAO,kDAEX,KAAKf,EAAcgB,kBACf,MAAO,sCAEX,KAAKhB,EAAciB,cACf,MAAO,6CAEX,KAAKjB,EAAckB,kBACf,MAAO,wCAEX,KAAKlB,EAAcmB,kBACf,MAAO,kDAEX,KAAKnB,EAAcoB,wBACf,MAAO,4BAEX,KAAKpB,EAAcqB,oBACf,MAAO,oBAEX,KAAKrB,EAAcsB,eACf,MAAO,mBAEX,KAAKtB,EAAcuB,QACf,MAAO,YArIvB,CAAU3E,KAAAA,QISV,MAAM6E,GAANx/B,cA+CIpK,UAAO,IAAID,EA9CLqK,oDAENA,SAEAA,KAAK6H,GACD,OAAO,EAGX7H,KAAK6H,GACD,OAAOjS,KAAKwR,KAAKS,GAGrB7H,MAAM6H,EAAiBnT,IAEvBsL,UACI,OAAO26B,GAAcoD,cAAcuB,QAGvCt/B,OAAOkxB,GACH,OAAOt7B,KAGXoK,OAAOkI,GACH,OAAOtS,KAGXoK,OAAOygB,GACH,OAAO7qB,KAGXoK,mBAAmBisB,GACf,OAAOr2B,KAGXoK,0BAEAA,UAAUygB,IAEAzgB,YAAYzG,EAAuC/B,GACzD,IAAI5B,KAAKuR,KAAKtR,YAGV,MAAM,IAAIiD,MAAMtB,GAFhB5B,KAAKuR,KAAKvQ,SAAS,IAAI8jC,GAAmBzyB,YAAY1O,EAAQ3D,KAAM4B,KCrBhF,MAAMioC,WAAoBD,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QAuBM9pC,UAAO,IAAI4S,WAAW,MArBxBhH,EAAO9K,OAAS,KAChB,MAAM,IAAIoC,MAAM,oDAAoD0I,EAAO9K,UAG/E,MAAMipC,EAxBd,SAAmBn+B,GACf,MAAMo+B,EAXV,SAAwBrxB,GACpB,IAAInR,EAAI,EAER,KAAOA,EAAImR,GACPnR,GAAK,EAGT,OAAOA,EAIcyiC,CAAer+B,EAAO9K,QAE3C,GAAIkpC,IAAiBp+B,EAAO9K,OACxB,OAAO8K,EAGX,MAAMm+B,EAAe,IAAIn3B,WAAWo3B,GAEpC,IAAK,IAAI3qC,EAAI,EAAGA,EAAI2qC,EAAc3qC,IAC9B0qC,EAAaC,EAAe3qC,EAAI,GAAKA,EAAIuM,EAAO9K,OAAS8K,EAAOA,EAAO9K,OAASzB,EAAI,GAAK,EAG7F,OAAO0qC,EAWkBG,CAAUt+B,GAE/B,IAAK,IAAIvM,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKmqC,KAAK9qC,GAAKuM,EAAOvM,EAAI0qC,EAAajpC,QAI/CsJ,KAAK6H,GAED,OAAOjS,KAAKmqC,KAAe,KAAVl4B,GAGrB7H,UACI,OAAO26B,GAAcoD,cAAcC,YC/C3C,MAAMgC,WAAoBR,GACtBx/B,YAAYwB,GACRk+B,QAuBM9pC,UAAO,IAAI4S,WAAW,MArBN,OAAlBhH,EAAO9K,QACPwD,QAAQ+lC,KAAK,yCAAyCz+B,EAAO9K,gBAGjE,MAAMwpC,EAAMrU,KAAKsU,IAAI,KAAQ3+B,EAAO9K,QAEpC,IAAK,IAAIzB,EAAI,EAAGA,EAAI,MAAUA,EAAIuM,EAAO9K,OAAQzB,IAC7CW,KAAKmqC,KAAK,KAAS9qC,GAAKuM,EAAO0+B,EAAM,EAAIjrC,GAIjD+K,KAAK6H,GAED,OAAOjS,KAAKmqC,KAAe,KAAVl4B,GAGrB7H,UACI,OAAO26B,GAAcoD,cAAcE,qBCnB3BmC,GAAoB5+B,EAAyB6+B,GAMzD,MAAMC,EAA+B,GACjCC,EAASF,EAAWz8B,IAAK48B,GAA6B,GAE1D,IAAK,IAAIvrC,EAAI,EAAGA,EAAIuM,EAAO9K,OAAQzB,IAAK,CACpC,IAAK,IAAIwrC,EAAa,EAAGA,EAAaH,EAAW5pC,OAAQ+pC,IAAc,CACnE,MAAMC,EAAYJ,EAAWG,GACzBD,EAAYH,EAAWK,EAAUF,WAEjCh/B,EAAOvM,KAAOurC,EAAUE,EAAU1S,aAC5B0S,EAAU1S,YAAcwS,EAAU9pC,SACpC6pC,EAAOG,EAAUF,aACjBF,EAAW7pC,OAAOgqC,EAAY,GAC9BA,MAGJH,EAAW7pC,OAAOgqC,EAAY,GAC9BA,KAIR,IAAK,IAAIE,EAAa,EAAGA,EAAaN,EAAW3pC,OAAQiqC,IAAc,CACnE,MAAMH,EAAYH,EAAWM,GAEzBH,EAAU9pC,OAAS,GAAK8K,EAAOvM,KAAOurC,EAAU,KACvB,IAArBA,EAAU9pC,OACV6pC,EAAOI,KAEPL,EAAWprC,KAAK,CACZsrC,UAAWG,EACX3S,UAAW,MAO/B,OAAOuS,ECzCX,MAAMK,WAAoBpB,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QAsEI9pC,UAAO,IAAI4S,WAAW,MACtB5S,UAAO,IAAI4S,WAAW,MArEJ,OAAlBhH,EAAO9K,OACP,MAAM,IAAIoC,MAAM,oDAAoD0I,EAAO9K,UAG/E,IAAK,IAAIzB,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKmqC,KAAK9qC,GAAKuM,EAAOvM,GAI9B+K,qBAAqBwB,GAEjB,MAAMq/B,EAAkBT,GAAoB5+B,EAAQ,CAAC,CAAC,IAAM,IAAM,KAAO,CAAC,IAAM,EAAM,OAEtF,OAAOq/B,EAAgB,GAAK,GAAKA,EAAgB,GAAK,EAG1D7gC,OAAOkI,GAGH,OAFAtS,KAAK4T,KAAOtB,EAELtS,KAGXoK,UAAUygB,GACN,IAAK,IAAIxrB,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKkrC,KAAK7rC,GAAKwrB,EAAI9X,IAAI,KAI/B3I,KAAK6H,GAGD,OAFAA,GAAW,MAEG,KACHjS,KAAKkrC,KAAKj5B,GAGjBA,EAAU,KACFjS,KAAKkrC,KAAe,KAAVj5B,GAAoBjS,KAAK4T,KAAKY,sBAG7CxU,KAAKmqC,KAAe,KAAVl4B,GAGrB7H,MAAM6H,EAAiBnT,IACnBmT,GAAW,OAEI,MAAUA,EAAU,OAC/BjS,KAAKkrC,KAAe,KAAVj5B,GAAoBnT,GAItCsL,KAAK6H,GAGD,OAFAA,GAAW,MAEG,KACHjS,KAAKkrC,KAAKj5B,GAGjBA,EAAU,KACH,EAGJjS,KAAKmqC,KAAe,KAAVl4B,GAGrB7H,UACI,OAAO26B,GAAcoD,cAAcG,kBCpE3C,MAAM6C,WAAoBvB,GACtBx/B,YAAYwB,EAA+Cw/B,GAAa,GAGpE,GAFAtB,QADuD9pC,gBAAAorC,EAyFnDprC,WAAoB,KACpBA,YAAS,IAAI4S,WAAW,MACxB5S,YAAS,IAAI4S,WAAW,MAExB5S,aAAS,EACTA,cAAW,IAAI4S,WAAW,KAE1B5S,UAAY,KA7FM,OAAlB4L,EAAO9K,OACP,MAAM,IAAIoC,MAAM,qDAAqD0I,EAAO9K,UAGhF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKqrC,OAAOhsC,GAAKuM,EAAOvM,GACxBW,KAAKsrC,OAAOjsC,GAAKuM,EAAO,KAASvM,GAGrCW,KAAK6S,QAGTzI,qBAAqBwB,GAOjB,OALwB2/B,GACpB3/B,EACA,CAAC,CAAC,IAAM,IAAM,MAGK,IAAM,EAGjCxB,QACIpK,KAAKwrC,MAAQxrC,KAAKsrC,OAClBtrC,KAAKyrC,QAAS,EAGlBrhC,KAAK6H,GAGD,OAFAjS,KAAK0rC,QAAkB,KAAVz5B,EAAkBjS,KAAK4T,KAAKY,uBAElCxU,KAAKoS,KAAKH,GAGrB7H,KAAK6H,GAGD,OAFAA,GAAW,KAEPjS,KAAKyrC,QAAUx5B,GAAW,KAAUA,EAAU,IACvCjS,KAAK2rC,SAAS15B,EAAU,KAG5BjS,KAAKwrC,MAAMv5B,GAGtB7H,MAAM6H,EAAiBnT,IACnBmT,GAAW,MAEG,KAAQjS,KAAKorC,aACvBprC,KAAKyrC,QAAS,GAGlBzrC,KAAK0rC,QAAQz5B,EAASnT,GAG1BsL,UACI,OAAO26B,GAAcoD,cAAcI,iBAGvCn+B,UAAUygB,GACN,IAAK,IAAIxrB,EAAI,EAAGA,EAAIW,KAAK2rC,SAAS7qC,OAAQzB,IACtCW,KAAK2rC,SAAStsC,GAAKwrB,EAAI9X,IAAI,KAInC3I,OAAOkI,GAGH,OAFAtS,KAAK4T,KAAOtB,EAELtS,KAGHoK,QAAQ6H,EAAiBnT,GAC7B,GAAImT,EAAU,KAAQjS,KAAKyrC,OACvBzrC,KAAK2rC,SAAS15B,GAAmB,IAARnT,OAI7B,OAAQmT,GACJ,KAAK,KACDjS,KAAKwrC,MAAQxrC,KAAKqrC,OAClB,MAEJ,KAAK,KACDrrC,KAAKwrC,MAAQxrC,KAAKsrC,SCtFlC,MAAMM,WAAoBhC,GACtBx/B,YAAYwB,EAAyDw/B,GAAsB,GAGvF,GAFAtB,QADiE9pC,gBAAAorC,EAyF7DprC,WAAoB,KACpBA,YAAS,IAAI4S,WAAW,MACxB5S,YAAS,IAAI4S,WAAW,MACxB5S,YAAS,IAAI4S,WAAW,MACxB5S,YAAS,IAAI4S,WAAW,MAExB5S,aAAS,EACTA,cAAW,IAAI4S,WAAW,KAE1B5S,UAAY,KA/FM,QAAlB4L,EAAO9K,OACP,MAAM,IAAIoC,MAAM,qDAAqD0I,EAAO9K,UAGhF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKqrC,OAAOhsC,GAAKuM,EAAOvM,GACxBW,KAAKsrC,OAAOjsC,GAAKuM,EAAO,KAASvM,GACjCW,KAAK6rC,OAAOxsC,GAAKuM,EAAO,KAASvM,GACjCW,KAAK8rC,OAAOzsC,GAAKuM,EAAO,MAASvM,GAGrCW,KAAK6S,QAGTzI,QACIpK,KAAKwrC,MAAQxrC,KAAKqrC,OAClBrrC,KAAKyrC,QAAS,EAGlBrhC,KAAK6H,GAGD,OAFAjS,KAAK0rC,QAAkB,KAAVz5B,EAAkBjS,KAAK4T,KAAKY,uBAElCxU,KAAKoS,KAAKH,GAGrB7H,KAAK6H,GAGD,OAFAA,GAAW,KAEPjS,KAAKyrC,QAAUx5B,GAAW,KAAUA,EAAU,IACvCjS,KAAK2rC,SAAS15B,EAAU,KAG5BjS,KAAKwrC,MAAMv5B,GAGtB7H,MAAM6H,EAAiBnT,IACnBmT,GAAW,MAEG,KAAQjS,KAAKorC,aACvBprC,KAAKyrC,QAAS,GAGlBzrC,KAAK0rC,QAAQz5B,EAASnT,GAG1BsL,UACI,OAAO26B,GAAcoD,cAAca,kBAGvC5+B,UAAUygB,GACN,IAAK,IAAIxrB,EAAI,EAAGA,EAAIW,KAAK2rC,SAAS7qC,OAAQzB,IACtCW,KAAK2rC,SAAStsC,GAAKwrB,EAAI9X,IAAI,KAInC3I,OAAOkI,GAGH,OAFAtS,KAAK4T,KAAOtB,EAELtS,KAGHoK,QAAQ6H,EAAiBnT,GAC7B,GAAImT,EAAU,KAAQjS,KAAKyrC,OACvBzrC,KAAK2rC,SAAS15B,GAAmB,IAARnT,OAI7B,OAAQmT,GACJ,KAAK,KACDjS,KAAKwrC,MAAQxrC,KAAKqrC,OAClB,MAEJ,KAAK,KACDrrC,KAAKwrC,MAAQxrC,KAAKsrC,OAClB,MAEJ,KAAK,KACDtrC,KAAKwrC,MAAQxrC,KAAK6rC,OAClB,MAEJ,KAAK,KACD7rC,KAAKwrC,MAAQxrC,KAAK8rC,SCvFlC,MAAMC,WAAoBnC,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QAuFI9pC,YAAS,IAAI8E,MAAkB,GAC/B9E,kBAAe,IAAI8E,MAAkB,GAtFnB,OAAlB8G,EAAO9K,OACP,MAAM,IAAIoC,MAAM,uDAAuD0I,EAAO9K,UAGlF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW,MAGpC,IAAK,IAAIvT,EAAI,EAAGA,EAAI,KAAQA,IACxB,IAAK,IAAIiK,EAAI,EAAGA,EAAI,EAAGA,IACnBtJ,KAAKgsC,OAAO1iC,GAAGjK,GAAKuM,EAAW,KAAJtC,EAAajK,GAIhDW,KAAK6S,QAGTzI,qBAAqBwB,GAEjB,MAAMq/B,EAAkBM,GAAkC3/B,EAAQ,CAC9D,CAAC,IAAM,IAAM,IACb,CAAC,IAAM,IAAM,IACb,CAAC,IAAM,IAAM,KACb,CAAC,GAAM,IAAM,IACb,CAAC,IAAM,IAAM,IACb,CAAC,IAAM,IAAM,KACb,CAAC,IAAM,IAAM,KACb,CAAC,IAAM,IAAM,OAGjB,IAAK,IAAIvM,EAAI,EAAGA,EAAI4rC,EAAgBnqC,OAAQzB,IACxC,GAAI4rC,EAAgB5rC,GAAK,EACrB,OAAO,EAIf,OAAO,EAGX+K,QACI,IAAK,IAAI/K,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKisC,aAAa5sC,GAAKW,KAAKgsC,OAAO,GAI3C5hC,KAAK6H,GAOD,OANAA,GAAW,OAEI,MAAUA,EAAU,MAC/BjS,KAAKksC,kBAAkBj6B,GAGpBjS,KAAKisC,aAAah6B,GAAW,IAAc,KAAVA,GAG5C7H,KAAK6H,GAGD,OAFAA,GAAW,KAEJjS,KAAKisC,aAAah6B,GAAW,IAAc,KAAVA,GAG5C7H,MAAM6H,EAAiBnT,GACnB,MAAMqtC,EAA0B,KAAVl6B,EAMtB,OAJIk6B,GAAiB,MAAUA,EAAgB,MAC3CnsC,KAAKksC,kBAAkBC,GAGpBrC,MAAMr4B,MAAMQ,EAASnT,GAGhCsL,UACI,OAAO26B,GAAcoD,cAAcK,iBAG/Bp+B,kBAAkB6H,GAClBA,EAAU,KACVjS,KAAKisC,aAAa,GAAKjsC,KAAKgsC,OAAO/5B,EAAU,MACtCA,EAAU,KACjBjS,KAAKisC,aAAa,GAAKjsC,KAAKgsC,OAAO/5B,EAAU,MAE7CjS,KAAKisC,aAAa,GAAKjsC,KAAKgsC,OAAO/5B,EAAU,OCpFzD,MAAMm6B,WAAoBxC,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QAmFI9pC,YAAS,IAAI4S,WAAW,MACxB5S,YAAS,IAAI4S,WAAW,MAGxB5S,uBAAmB,EACnBA,2BAAwB,EAtFN,OAAlB4L,EAAO9K,OACP,MAAM,IAAIoC,MAAM,qDAAqD0I,EAAO9K,UAGhF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKqrC,OAAOhsC,GAAKuM,EAAOvM,GACxBW,KAAKsrC,OAAOjsC,GAAKuM,EAAO,KAASvM,GAGrCW,KAAK6S,QAGTzI,qBAAqBwB,GAEjB,MAAMq/B,EAAkBM,GAAkC3/B,EAAQ,CAC9D,CAAC,GAAM,EAAM,IAAM,IAAM,KACzB,CAAC,GAAM,IAAM,IAAM,IAAM,KACzB,CAAC,IAAM,IAAM,GAAM,IAAM,KACzB,CAAC,GAAM,EAAM,IAAM,IAAM,OAG7B,IAAK,IAAIvM,EAAI,EAAGA,EAAI4rC,EAAgBnqC,OAAQzB,IACxC,GAAI4rC,EAAgB5rC,GAAK,EACrB,OAAO,EAIf,OAAO,EAGX+K,QACIpK,KAAKwrC,MAAQxrC,KAAKqrC,OAClBrrC,KAAKqsC,kBAAmB,EACxBrsC,KAAKkS,sBAAwB,EAGjC9H,KAAK6H,GACD,OAAOjS,KAAKwrC,MAAgB,KAAVv5B,GAGtB7H,MAAM6H,EAAiBnT,GACnBgrC,MAAMr4B,MAAMQ,EAASnT,GAGzBsL,OAAOkI,GAMH,OALAtS,KAAK4T,KAAOtB,EAEZtS,KAAK4T,KAAKrI,MAAMiG,KAAKlR,WAAW8rC,GAAYE,aAActsC,MAC1DA,KAAK4T,KAAKrI,MAAMkG,MAAMnR,WAAW8rC,GAAYE,aAActsC,MAEpDA,KAGXoK,UACI,OAAO26B,GAAcoD,cAAcO,iBAG/Bt+B,oBAAoBmiC,EAA4BrP,GACpD,MAAMsP,EAA0BtP,EAAKhrB,qBAGrC,GAFAgrB,EAAKhrB,qBAA2D,KAApCgrB,EAAKtpB,KAAK64B,wBAElCvP,EAAKhrB,uBAAyBs6B,EAAlC,CAIA,GAAItP,EAAKmP,iBAAkB,CACvB,MAAMK,EAAkD,IAAlCxP,EAAKtpB,KAAKY,sBAEhC0oB,EAAKsO,MACiB,IAAlBkB,EACMxP,EAAKmO,QAC8B,GAAlCnO,EAAKtpB,KAAKY,uBAAgC,EACvC0oB,EAAKmO,OACLnO,EAAKoO,OAGvBpO,EAAKmP,iBAAiD,MAA9BnP,EAAKhrB,uBChFrC,MAAMy6B,WAAoB/C,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QA2DI9pC,YAAS,IAAI8E,MAAkB,GAG/B9E,UAAY,KA5DM,OAAlB4L,EAAO9K,OACP,MAAM,IAAIoC,MAAM,uDAAuD0I,EAAO9K,UAGlF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW,MAGpC5S,KAAKsrC,OAAStrC,KAAKgsC,OAAO,GAC1BhsC,KAAKqrC,OAASrrC,KAAKgsC,OAAO,GAE1B,IAAK,IAAI3sC,EAAI,EAAGA,EAAI,KAAQA,IACxB,IAAK,IAAIiK,EAAI,EAAGA,EAAI,EAAGA,IACnBtJ,KAAKgsC,OAAO1iC,GAAGjK,GAAKuM,EAAO,KAAStC,EAAIjK,GAKpD+K,qBAAqBwB,GAOjB,OALwB2/B,GACpB3/B,EACA,CAAC,CAAC,IAAM,MAGW,IAAM,EAGjCxB,QACIpK,KAAKqrC,OAASrrC,KAAKgsC,OAAO,GAG9B5hC,OAAOkI,GAMH,OALAtS,KAAK4T,KAAOtB,EAEZtS,KAAK4T,KAAKrI,MAAMiG,KAAKlR,WAAWqsC,GAAYL,aAActsC,MAC1DA,KAAK4T,KAAKrI,MAAMkG,MAAMnR,WAAWqsC,GAAYL,aAActsC,MAEpDA,KAGXoK,KAAK6H,GAGD,OAFAA,GAAW,MAEM,KAASjS,KAAKqrC,OAAOp5B,GAAWjS,KAAKsrC,OAAiB,KAAVr5B,GAGjE7H,UACI,OAAO26B,GAAcoD,cAAcM,iBAG/Br+B,oBAAoBmiC,EAA4BrP,GACV,KAAtCA,EAAKtpB,KAAK64B,0BACVvP,EAAKmO,OAASnO,EAAK8O,OAAyC,EAAlC9O,EAAKtpB,KAAKY,yBCvDhD,MAAMo4B,WAAoBhD,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QAiII9pC,YAA4B,KAI5BA,iBAAa,EACbA,eAAY,IAAI8E,MAAkB,KAGlC9E,UAAY,KAvIiB,IAAZ,KAAhB4L,EAAO9K,QACR,MAAM,IAAIoC,MAAM,iBAAiB0I,EAAO9K,kCAG5C,MAAM+rC,EAAYjhC,EAAO9K,SAAW,GACpC,GAAI+rC,EAAY,EACZ,MAAM,IAAI3pC,MAAM,+BAGpBlD,KAAKgsC,OAAS,IAAIlnC,MAAkB+nC,GAEpC,IAAK,IAAIxtC,EAAI,EAAGA,EAAIwtC,EAAWxtC,IAC3BW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW,MAGpC,IAAK,IAAIvT,EAAI,EAAGA,GAAK,IAAMA,IACvBW,KAAK8sC,UAAUztC,GAAK,IAAIuT,WAAW,MAGvC5S,KAAK+sC,SAAW/sC,KAAK8sC,UAAU,GAC/B9sC,KAAKsrC,OAAStrC,KAAKgsC,OAAOa,EAAY,GACtC7sC,KAAKqrC,OAASrrC,KAAKgsC,OAAO,GAE1B,IAAK,IAAI3sC,EAAI,EAAGA,EAAI,KAAQA,IACxB,IAAK,IAAIiK,EAAI,EAAGA,EAAIujC,EAAWvjC,IAC3BtJ,KAAKgsC,OAAO1iC,GAAGjK,GAAKuM,EAAO,KAAStC,EAAIjK,GAKpD+K,qBAAqBwB,GAOjB,OALwB2/B,GACpB3/B,EACA,CAAC,CAAC,IAAM,GAAM,IAAM,KAGD,IAAM,EAGjCxB,QACIpK,KAAKqrC,OAASrrC,KAAKgsC,OAAO,GAG9B5hC,UAAUygB,GACN,IAAK,IAAIxrB,EAAI,EAAGA,EAAIW,KAAK8sC,UAAUhsC,OAAQzB,IACvC,IAAK,IAAIiK,EAAI,EAAGA,EAAI,KAAQA,IACxBtJ,KAAK8sC,UAAUztC,GAAGiK,GAAKuhB,EAAI9X,IAAI,KAK3C3I,OAAOkI,GAMH,OALAtS,KAAK4T,KAAOtB,EAEZtS,KAAK4T,KAAKrI,MAAMiG,KAAKlR,WAAWssC,GAAYN,aAActsC,MAC1DA,KAAK4T,KAAKrI,MAAMkG,MAAMnR,WAAWssC,GAAYN,aAActsC,MAEpDA,KAGXoK,KAAK6H,GAGD,OAFAA,GAAW,KAEPjS,KAAKgtC,WACD/6B,EAAU,KACHjS,KAAK+sC,SAAS96B,GAGrBA,EAAU,KACFjS,KAAK+sC,SAAmB,KAAV96B,GAAoBjS,KAAK4T,KAAKY,sBAGjDxU,KAAKsrC,OAAiB,KAAVr5B,GAGhBA,EAAU,KAASjS,KAAKqrC,OAAOp5B,GAAWjS,KAAKsrC,OAAiB,KAAVr5B,GAGjE7H,KAAK6H,GAGD,OAFAA,GAAW,KAEPjS,KAAKgtC,WACD/6B,EAAU,KACHjS,KAAK+sC,SAAS96B,GAGrBA,EAAU,KACHjS,KAAK4T,KAAKY,sBAGdxU,KAAKsrC,OAAiB,KAAVr5B,GAGhBA,EAAU,KAASjS,KAAKqrC,OAAOp5B,GAAWjS,KAAKsrC,OAAiB,KAAVr5B,GAGjE7H,MAAM6H,EAAiBnT,GACdkB,KAAKgtC,aAIV/6B,GAAW,OAEI,MAAUA,EAAU,OAC/BjS,KAAK+sC,SAAmB,KAAV96B,GAAoBnT,GAI1CsL,UACI,OAAO26B,GAAcoD,cAAciB,cAG/Bh/B,oBAAoBmiC,EAA4BrP,GACpD,OAAQA,EAAKtpB,KAAK64B,yBACd,KAAK,GACDvP,EAAK8P,YAAa,EAClB9P,EAAKmO,OAASnO,EAAK8O,OAAO9O,EAAKtpB,KAAKY,sBAAwB0oB,EAAK8O,OAAOlrC,QACxE,MAEJ,KAAK,GACDo8B,EAAK8P,YAAa,EAClB9P,EAAK6P,SAAW7P,EAAK4P,UAAU5P,EAAKtpB,KAAKY,sBAAwB,MChIjF,MAAMy4B,WAAoBrD,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QAgEI9pC,UAAY,KAEZA,WAAoB,KACpBA,YAAS,IAAI4S,WAAW,MACxB5S,YAAS,IAAI4S,WAAW,MAlEN,OAAlBhH,EAAO9K,OACP,MAAM,IAAIoC,MAAM,qDAAqD0I,EAAO9K,UAGhF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKqrC,OAAOhsC,GAAKuM,EAAOvM,GACxBW,KAAKsrC,OAAOjsC,GAAKuM,EAAO,KAASvM,GAGrCW,KAAK6S,QAGTzI,qBAAqBwB,GAEjB,MAAMq/B,EAAkBM,GAAkC3/B,EAAQ,CAC9D,CAAC,IAAM,GAAM,GACb,CAAC,IAAM,GAAM,GACb,CAAC,IAAM,GAAM,KAGjB,IAAK,IAAIvM,EAAI,EAAGA,EAAI4rC,EAAgBnqC,OAAQzB,IACxC,GAAI4rC,EAAgB5rC,GAAK,EACrB,OAAO,EAIf,OAAO,EAGX+K,QACIpK,KAAKwrC,MAAQxrC,KAAKqrC,OAGtBjhC,KAAK6H,GACD,OAAOjS,KAAKwrC,MAAgB,KAAVv5B,GAGtB7H,OAAOkI,GAMH,OALAtS,KAAK4T,KAAOtB,EAEZA,EAAI/G,MAAMiG,KAAKlR,WAAW2sC,GAAYX,aAActsC,MACpDsS,EAAI/G,MAAMkG,MAAMnR,WAAW2sC,GAAYX,aAActsC,MAE9CA,KAGXoK,UACI,OAAO26B,GAAcoD,cAAcQ,iBAG/Bv+B,oBAAoBmiC,EAA4BrP,GACpD,OAAQA,EAAKtpB,KAAK64B,yBACd,KAAK,IACDvP,EAAKsO,MAAQtO,EAAKmO,OAClB,MAEJ,KAAK,IACDnO,EAAKsO,MAAQtO,EAAKoO,SC7DlC,MAAM4B,WAAoBtD,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QAyEI9pC,YAAS,IAAI4S,WAAW,MACxB5S,YAAS,IAAI4S,WAAW,MACxB5S,YAAS,IAAI4S,WAAW,MAIxB5S,UAAO,IAAI4S,WAAW,KA7EJ,QAAlBhH,EAAO9K,OACP,MAAM,IAAIoC,MAAM,qDAAqD0I,EAAO9K,UAGhF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKqrC,OAAOhsC,GAAKuM,EAAOvM,GACxBW,KAAKsrC,OAAOjsC,GAAKuM,EAAO,KAASvM,GACjCW,KAAK6rC,OAAOxsC,GAAKuM,EAAO,KAASvM,GAGrCW,KAAK6S,QAGTzI,QACIpK,KAAKwrC,MAAQxrC,KAAKqrC,OAGtBjhC,UAAUygB,GACN,IAAK,IAAIxrB,EAAI,EAAGA,EAAIW,KAAKkrC,KAAKpqC,OAAQzB,IAClCW,KAAKkrC,KAAK7rC,GAAKwrB,EAAI9X,IAAI,KAI/B3I,KAAK6H,GAGD,OAFAjS,KAAKksC,kBAA4B,KAAVj6B,GAEhBjS,KAAKoS,KAAKH,GAGrB7H,KAAK6H,GAGD,OAFAA,GAAW,OAEI,KAAUA,EAAU,IACxBjS,KAAKkrC,KAAe,IAAVj5B,GAEVjS,KAAKwrC,MAAMv5B,GAI1B7H,MAAM6H,EAAiBnT,GACnBmT,GAAW,KAEXjS,KAAKksC,kBAAkBj6B,GAEnBA,EAAU,IACVjS,KAAKkrC,KAAKj5B,GAAmB,IAARnT,EAErBgrC,MAAMr4B,MAAMQ,EAASnT,GAI7BsL,UACI,OAAO26B,GAAcoD,cAAcW,kBAG/B1+B,kBAAkB6H,GACtB,OAAQA,GACJ,KAAK,KACDjS,KAAKwrC,MAAQxrC,KAAKqrC,OAClB,MAEJ,KAAK,KACDrrC,KAAKwrC,MAAQxrC,KAAKsrC,OAClB,MAEJ,KAAK,KACDtrC,KAAKwrC,MAAQxrC,KAAK6rC,SCrElC,MAAMsB,WAAoBvD,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QAoII9pC,YAAS,IAAI8E,MAAkB,GAG/B9E,WAAQ,IAAI4S,WAAW,MACvB5S,gBAAa,IAAI8E,MAAkB,GAEnC9E,mBAAe,EAxIG,QAAlB4L,EAAO9K,OACP,MAAM,IAAIoC,MAAM,qDAAqD0I,EAAO9K,UAGhF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW,MAGpC,IAAK,IAAIvT,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKotC,WAAW/tC,GAAK,IAAIuT,WAAW,KAGxC,IAAK,IAAIvT,EAAI,EAAGA,EAAI,KAAQA,IACxB,IAAK,IAAIiK,EAAI,EAAGA,EAAI,EAAGA,IACnBtJ,KAAKgsC,OAAO1iC,GAAGjK,GAAKuM,EAAW,KAAJtC,EAAajK,GAIhDW,KAAK6S,QAGTzI,qBAAqBwB,GAEjB,MAAMq/B,EAAkBM,GAAkC3/B,EAAQ,CAC9D,CAAC,IAAM,IAAM,KACb,CAAC,IAAM,IAAM,KACb,CAAC,IAAM,IAAM,IACb,CAAC,IAAM,IAAM,IACb,CAAC,GAAM,IAAM,IACb,CAAC,IAAM,IAAM,KACb,CAAC,IAAM,IAAM,MAGjB,IAAK,IAAIvM,EAAI,EAAGA,EAAI4rC,EAAgBnqC,OAAQzB,IACxC,GAAI4rC,EAAgB5rC,GAAK,EACrB,OAAO,EAIf,OAAO,EAGX+K,QACIpK,KAAKqrC,OAASrrC,KAAKgsC,OAAO,GAC1BhsC,KAAKqtC,MAAQrtC,KAAKotC,WAAW,GAC7BptC,KAAKstC,cAAe,EAGxBljC,KAAK6H,GAGD,OAFAjS,KAAKksC,kBAA4B,KAAVj6B,GAEhBjS,KAAKoS,KAAKH,GAGrB7H,KAAK6H,GAID,OAHAA,GAAW,MAGG,KAENjS,KAAKstC,aAEEr7B,GAAW,KAASjS,KAAKutC,MAAMt7B,EAAU,MAAU,EAGnDjS,KAAKqrC,OAAOp5B,GAKvBA,GAAW,KAEJA,GAAW,KAASjS,KAAKqtC,MAAMp7B,EAAU,MAAU,EAIvDjS,KAAKgsC,OAAO,GAAG,MAAU,KAAS/5B,IAG7C7H,MAAM6H,EAAiBnT,GACnBmT,GAAW,KAEXjS,KAAKksC,kBAAkBj6B,GAEnBA,EAAU,KACNjS,KAAKstC,aACLttC,KAAKutC,MAAMt7B,GAAWnT,EAEtBgrC,MAAMr4B,MAAMQ,EAASnT,GAElBmT,EAAU,KACjB63B,MAAMr4B,MAAMQ,EAASnT,GACdmT,EAAU,KACjBjS,KAAKqtC,MAAMp7B,EAAU,MAAUnT,EAE/BgrC,MAAMr4B,MAAMQ,EAASnT,GAI7BsL,UACI,OAAO26B,GAAcoD,cAAcc,kBAGvC7+B,UAAUygB,GACN,IAAK,IAAIxrB,EAAI,EAAGA,EAAI,EAAGA,IACnB,IAAK,IAAIiK,EAAI,EAAGA,EAAItJ,KAAKotC,WAAW/tC,GAAGyB,OAAQwI,IAC3CtJ,KAAKotC,WAAW/tC,GAAGiK,GAAKuhB,EAAI9X,IAAI,KAIxC,IAAK,IAAI1T,EAAI,EAAGA,EAAIW,KAAKutC,MAAMzsC,OAAQzB,IACnCW,KAAKutC,MAAMluC,GAAKwrB,EAAI9X,IAAI,KAIxB3I,kBAAkB6H,GAClBA,EAAU,OAIVA,GAAW,MACXjS,KAAKqrC,OAASrrC,KAAKgsC,OAAiB,GAAV/5B,GAC1BjS,KAAKstC,cAAe,GACD,OAAZr7B,EACPjS,KAAKstC,cAAe,EACbr7B,GAAW,OAClBjS,KAAKqtC,MAAQrtC,KAAKotC,WAAWn7B,EAAU,SCpInD,MAAMu7B,WAAoB5D,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QAuDI9pC,YAAS,IAAI8E,MAAkB,IAE/B9E,cAAW,EAvDO,QAAlB4L,EAAO9K,OACP,MAAM,IAAIoC,MAAM,qDAAqD0I,EAAO9K,UAGhF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,GAAIA,IACpBW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW,MAGpC,IAAK,IAAIvT,EAAI,EAAGA,EAAI,KAAQA,IACxB,IAAK,IAAIiK,EAAI,EAAGA,EAAI,GAAIA,IACpBtJ,KAAKgsC,OAAO1iC,GAAGjK,GAAKuM,EAAW,KAAJtC,EAAajK,GAIhDW,KAAK6S,QAGTzI,QACIpK,KAAKytC,SAAW,EAChBztC,KAAK0tC,aAAe1tC,KAAKgsC,OAAOhsC,KAAKytC,UAGzCrjC,KAAK6H,GAKD,OAJAA,GAAW,KAEXjS,KAAKksC,kBAAkBj6B,GAEhBjS,KAAK0tC,aAAaz7B,GAG7B7H,KAAK6H,GACD,OAAOjS,KAAK0tC,aAAuB,KAAVz7B,GAG7B7H,MAAM6H,EAAiBnT,GACnBmT,GAAW,KAEXjS,KAAKksC,kBAAkBj6B,GAEvB63B,MAAMr4B,MAAMQ,EAASnT,GAGzBsL,UACI,OAAO26B,GAAcoD,cAAckB,kBAG/Bj/B,kBAAkB6H,GACN,OAAZA,IACAjS,KAAKytC,SAAYztC,KAAKytC,SAAW,EAAK,GACtCztC,KAAK0tC,aAAe1tC,KAAKgsC,OAAOhsC,KAAKytC,YClDjD,MAAME,WAAoB/D,GACtBx/B,YAAYwB,EAAyDw/B,GAAsB,GAGvF,GAFAtB,QADiE9pC,gBAAAorC,EAoH7DprC,UAAY,KAGZA,YAAS,IAAI8E,MAAkB,IAC/B9E,UAAO,IAAI4S,WAAW,KACtB5S,aAAS,EAtHS,QAAlB4L,EAAO9K,OACP,MAAM,IAAIoC,MAAM,qDAAqD0I,EAAO9K,UAGhF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,GAAIA,IACpBW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW,MAGpC,IAAK,IAAIvT,EAAI,EAAGA,EAAI,KAAQA,IACxB,IAAK,IAAIiK,EAAI,EAAGA,EAAI,GAAIA,IACpBtJ,KAAKgsC,OAAO1iC,GAAGjK,GAAKuM,EAAW,KAAJtC,EAAajK,GAIhDW,KAAK6S,QAGTzI,qBAAqBwB,GACjB,MAAMgiC,EAAcC,IAChB,MAAMC,EAAQD,EAAYE,MAAM,IAAI//B,IAAI2K,GAAKA,EAAEiT,WAAW,IAE1D,IAAK,IAAIvsB,EAAI,EAAGA,EAAIyuC,EAAMhtC,OAAQzB,IAC9B,GAAIyuC,EAAMzuC,KAAOuM,EAAO,MAASvM,GAC7B,OAAO,EAIf,OAAO,GAGX,GAAsB,QAAlBuM,EAAO9K,OACP,OAAO,EAGX,GAAI8sC,EAAW,SAAWA,EAAW,QACjC,OAAO,EAIX,MAAM3C,EAAkBM,GAAkC3/B,EAAQ,CAC9D,CAAC,GAAM,IAAM,KACb,CAAC,IAAM,IAAM,KACb,CAAC,GAAM,IAAM,IACb,CAAC,IAAM,IAAM,MAGjB,IAAK,IAAIvM,EAAI,EAAGA,EAAI,EAAGA,IACnB,GAAI4rC,EAAgB5rC,GAAK,EACrB,OAAO,EAIf,OAAO,EAGX+K,QACIpK,KAAKwrC,MAAQxrC,KAAKgsC,OAAO,IACzBhsC,KAAKyrC,QAAS,EAGlBrhC,UACI,OAAO26B,GAAcoD,cAAcmB,kBAGvCl/B,UAAUygB,GACN,IAAK,IAAIxrB,EAAI,EAAGA,EAAIW,KAAKkrC,KAAKpqC,OAAQzB,IAClCW,KAAKkrC,KAAK7rC,GAAKwrB,EAAI9X,IAAI,KAI/B3I,OAAOkI,GAGH,OAFAtS,KAAK4T,KAAOtB,EAELtS,KAGXoK,KAAK6H,GAGD,OAFAjS,KAAK0rC,QAAkB,KAAVz5B,EAAkBjS,KAAK4T,KAAKY,uBAElCxU,KAAKoS,KAAKH,GAGrB7H,KAAK6H,GAGD,OAFAA,GAAW,KAEPjS,KAAKyrC,QAAUx5B,GAAW,KAAUA,EAAU,IACvCjS,KAAKkrC,KAAKj5B,EAAU,KAEpBjS,KAAKwrC,MAAMv5B,GAI1B7H,MAAM6H,EAAiBnT,IACnBmT,GAAW,MAEG,KAAQjS,KAAKorC,aACvBprC,KAAKyrC,QAAS,GAGlBzrC,KAAK0rC,QAAQz5B,EAASnT,GAGlBsL,QAAQ6H,EAAiBnT,GACzBmT,EAAU,KAAQjS,KAAKyrC,OACvBzrC,KAAKkrC,KAAKj5B,GAAWnT,EAIrBmT,GAAW,MAAUA,GAAW,OAChCjS,KAAKwrC,MAAQxrC,KAAKgsC,OAAO/5B,EAAU,QClH/C,MAAM+7B,WAAoBpE,GACtBx/B,YAAYwB,EAAyDw/B,GAAsB,GAGvF,GAFAtB,QADiE9pC,gBAAAorC,EA8E7DprC,UAAY,KAGZA,YAAS,IAAI8E,MAAkB,GAC/B9E,UAAO,IAAI4S,WAAW,KACtB5S,aAAS,EAhFS,QAAlB4L,EAAO9K,OACP,MAAM,IAAIoC,MAAM,qDAAqD0I,EAAO9K,UAGhF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW,MAGpC,IAAK,IAAIvT,EAAI,EAAGA,EAAI,KAAQA,IACxB,IAAK,IAAIiK,EAAI,EAAGA,EAAI,EAAGA,IACnBtJ,KAAKgsC,OAAO1iC,GAAGjK,GAAKuM,EAAW,KAAJtC,EAAajK,GAIhDW,KAAK6S,QAGTzI,QACIpK,KAAKwrC,MAAQxrC,KAAKgsC,OAAO,GACzBhsC,KAAKyrC,QAAS,EAGlBrhC,UACI,OAAO26B,GAAcoD,cAAcgB,kBAGvC/+B,UAAUygB,GACN,IAAK,IAAIxrB,EAAI,EAAGA,EAAIW,KAAKkrC,KAAKpqC,OAAQzB,IAClCW,KAAKkrC,KAAK7rC,GAAKwrB,EAAI9X,IAAI,KAI/B3I,OAAOkI,GAGH,OAFAtS,KAAK4T,KAAOtB,EAELtS,KAGXoK,KAAK6H,GAGD,OAFAjS,KAAK0rC,QAAkB,KAAVz5B,EAAkBjS,KAAK4T,KAAKY,uBAElCxU,KAAKoS,KAAKH,GAGrB7H,KAAK6H,GAGD,OAFAA,GAAW,KAEPjS,KAAKyrC,QAAUx5B,GAAW,KAAUA,EAAU,IACvCjS,KAAKkrC,KAAKj5B,EAAU,KAEpBjS,KAAKwrC,MAAMv5B,GAI1B7H,MAAM6H,EAAiBnT,IACnBmT,GAAW,MAEG,KAAQjS,KAAKorC,aACvBprC,KAAKyrC,QAAS,GAGlBzrC,KAAK0rC,QAAQz5B,EAASnT,GAGlBsL,QAAQ6H,EAAiBnT,GACzBmT,EAAU,KAAQjS,KAAKyrC,OACvBzrC,KAAKkrC,KAAKj5B,GAAWnT,EAIrBmT,GAAW,MAAUA,GAAW,OAChCjS,KAAKwrC,MAAQxrC,KAAKgsC,OAAO/5B,EAAU,QCtE/C,MAAMg8B,WAAqBrE,GACvBx/B,YAAYwB,GAGR,GAFAk+B,QAwHI9pC,YAAS,IAAI8E,MAAkB,GAC/B9E,UAAO,IAAI4S,WAAW,KAEtB5S,eAAY,IAAI4S,WAAW,KAC3B5S,oBAAiB,EACjBA,yBAAsB,EA3HJ,QAAlB4L,EAAO9K,QAAuC,QAAlB8K,EAAO9K,OACnC,MAAM,IAAIoC,MAAM,yDAAyD0I,EAAO9K,UAGpF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW,MAGpC,MAAM6a,EAA2B,QAAlB7hB,EAAO9K,OAAoB,EAAI,KAE9C,IAAK,IAAIzB,EAAI,EAAGA,EAAI,KAAQA,IACxB,IAAK,IAAIiK,EAAI,EAAGA,EAAI,EAAGA,IACnBtJ,KAAKgsC,OAAO1iC,GAAGjK,GAAKuM,EAAW,KAAJtC,EAAajK,EAAIouB,GAIpDztB,KAAK6S,QAGTzI,qBAAqBwB,GAEjB,MAAMq/B,EAAkBM,GAAkC3/B,EAAQ,CAC9D,CAAC,IAAM,IAAM,GAAM,KACnB,CAAC,EAAM,IAAM,EAAM,OAGvB,OAAOq/B,EAAgB,GAAK,GAAKA,EAAgB,GAAK,EAG1D7gC,QACIpK,KAAKkuC,eAAiB,EACtBluC,KAAKmuC,oBAAsB,EAC3BnuC,KAAKwrC,MAAQxrC,KAAKgsC,OAAO,GAG7B5hC,UACI,OAAO26B,GAAcoD,cAAce,eAGvC9+B,UAAUygB,GACN,IAAK,IAAIxrB,EAAI,EAAGA,EAAIW,KAAKkrC,KAAKpqC,OAAQzB,IAClCW,KAAKkrC,KAAK7rC,GAAKwrB,EAAI9X,IAAI,KAI/B3I,OAAOkI,GAGH,OAFAtS,KAAK4T,KAAOtB,EAELtS,KAGXoK,KAAK6H,GAGD,OAFAjS,KAAKyR,MAAgB,KAAVQ,EAAkBjS,KAAK4T,KAAKY,uBAEhCxU,KAAKoS,KAAKH,GAGrB7H,KAAK6H,GAGD,OAFAA,GAAW,OAEI,KAAUA,EAAU,IACxBjS,KAAKkrC,KAAKj5B,EAAU,KACR,OAAZA,EACAjS,KAAKkuC,gBAAkBluC,KAAKmuC,qBAEP,GAAtBnuC,KAAKwrC,MAAMv5B,GAEW,GAAtBjS,KAAKwrC,MAAMv5B,GAEVjS,KAAKwrC,MAAMv5B,GAI1B7H,MAAM6H,EAAiBnT,GAKnB,GAJAmT,GAAW,KAEXjS,KAAKkuC,mBAEDj8B,EAAU,KAKd,OAAgB,OAAZA,EACOjS,KAAKouC,iBAGZn8B,GAAW,MAAUA,GAAW,OAChCjS,KAAKwrC,MAAQxrC,KAAKgsC,OAAO/5B,EAAU,QATnCjS,KAAKkrC,KAAKj5B,GAAWnT,EAarBsL,YACJ,KAAIpK,KAAKkuC,eAAiBluC,KAAKmuC,qBAA/B,CAIA,GAAwB,IAApBnuC,KAAKkrC,KAAK,KAAa,CACvB,IAAK,IAAI7rC,EAAI,EAAGA,EAAI,IAAOA,IACvBW,KAAKkrC,KAAK7rC,GAAKW,KAAKquC,UAAUhvC,GAGlCW,KAAKmuC,2BACF,CAAA,GAAwB,IAApBnuC,KAAKkrC,KAAK,KAOjB,OANA,IAAK,IAAI7rC,EAAI,EAAGA,EAAI,IAAOA,IACvBW,KAAKquC,UAAUhvC,GAAKW,KAAKkrC,KAAK7rC,GAGlCW,KAAKmuC,wBAKTnuC,KAAKkuC,eAAiB,EACtBluC,KAAKkrC,KAAK,KAAQ,ICjI1B,MAAMoD,GACFlkC,YAAYwB,GA0CZ5L,mBAA4B,KAC5BA,mBAA4B,KA1CxBA,KAAKuuC,gBAAkB3iC,EAAO,MAC9B5L,KAAKwuC,iBAAmB5iC,EAAO,MAC/B5L,KAAKyuC,YAAc7iC,EAAO,MAC1B5L,KAAK0uC,WAAa9iC,EAAO,MACzB5L,KAAK2uC,SAAW/iC,EAAO,MACvB5L,KAAK4uC,YAAchjC,EAAO,MAC1B5L,KAAK6uC,oBAAsBjjC,EAAO,MAClC5L,KAAK8uC,qBAAuBljC,EAAO,MAEnC5L,KAAK+uC,cAAgB,IAAIn8B,WAAW5S,KAAK0uC,YACzC1uC,KAAKgvC,cAAgB,IAAIp8B,WAAW5S,KAAK0uC,YAEzC,IAAK,IAAIrvC,EAAI,EAAGA,EAAIW,KAAK0uC,WAAYrvC,IACjCW,KAAK+uC,cAAc1vC,GAAKuM,EAAO,KAAcvM,GAC7CW,KAAKgvC,cAAc3vC,GAAKuM,EAAO,KAAcvM,GAIrD+K,SAWI,OAA6B,KAAV,IATfpK,KAAKuuC,gBACLvuC,KAAKwuC,iBACLxuC,KAAKyuC,YACLzuC,KAAK0uC,WACL1uC,KAAK2uC,SACL3uC,KAAK4uC,YACL5uC,KAAK6uC,oBACL7uC,KAAK8uC,uBC3BV,MAAMG,GAAOnjB,GAChB,wKCUJ,MAAMojB,WAA8BtF,GAChCx/B,YAAYwB,GAGR,GAFAk+B,QA6PI9pC,gBAAa,EACbA,YAA4B,KAC5BA,cAA0B,KAE1BA,UAAO,IAAI4S,WAAW,MACtB5S,eAAY,IAAI8E,MAAkB,GAElC9E,YAAqB,KACrBA,YAAqB,KACrBA,kBAEAA,sBAAmB,EACnBA,uBAAoB,EACpBA,oBAAgB,EAChBA,2BAAwB,EACxBA,uBAAmB,EACnBA,sBAAkB,EAClBA,oBAAiB,EAGjBA,sBAAiC,KA/QjC4L,EAAO9K,OAAS,MAAS,EACzB,MAAM,IAAIoC,MAAM,6CAGpBlD,KAAKmvC,WAAavjC,EAAO9K,OAAS,KAElCd,KAAKovC,OAAS,IAAItqC,MAAkB9E,KAAKmvC,YACzCnvC,KAAKqvC,SAAW,IAAIvqC,MAAc9E,KAAKmvC,YAEvC,IAAK,IAAI9vC,EAAI,EAAGA,EAAIW,KAAKmvC,WAAY9vC,IACjCW,KAAKovC,OAAO/vC,GAAK,IAAIuT,WAAW,MAGpC,IAAK,IAAIvT,EAAI,EAAGA,EAAI,KAAMA,IACtB,IAAK,IAAIiK,EAAI,EAAGA,EAAItJ,KAAKmvC,WAAY7lC,IACjCtJ,KAAKovC,OAAO9lC,GAAGjK,GAAKuM,EAAW,KAAJtC,EAAWjK,GAI9C,IAAK,IAAIA,EAAI,EAAGA,EAAIW,KAAKmvC,WAAY9vC,IACjCW,KAAKqvC,SAAShwC,GAAK,IAAIivC,GAAOtuC,KAAKovC,OAAO/vC,IAErCW,KAAKqvC,SAAShwC,GAAGiwC,UAClBhrC,QAAQC,IAAI,QAAQlF,0BAI5B,IAAK,IAAIA,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAK8sC,UAAUztC,GAAK,IAAIuT,WAAW,MAGvC5S,KAAKuvC,YAELvvC,KAAK6S,QAGTzI,QACIpK,KAAKwvC,mBAAmB,GACxBxvC,KAAKyvC,iBAAmB,EACxBzvC,KAAK0vC,eAAgB,EACrB1vC,KAAK2vC,kBAAoB,EACzB3vC,KAAKkS,sBAAwB,EAC7BlS,KAAK4vC,kBAAmB,EACxB5vC,KAAK6vC,iBAAkB,EACvB7vC,KAAK8vC,eAAiB,EAG1B1lC,OAAOkI,GAMH,OALAtS,KAAK4T,KAAOtB,EAEZtS,KAAK4T,KAAKrI,MAAMiG,KAAKlR,WAAW4uC,GAAsB5C,aAActsC,MACpEA,KAAK4T,KAAKrI,MAAMkG,MAAMnR,WAAW4uC,GAAsB5C,aAActsC,MAE9DA,KAGXoK,mBAAmBisB,GAGf,OAFAr2B,KAAKs2B,iBAAmBD,EAEjBr2B,KAGXoK,OAAOygB,GAGH,OAFA7qB,KAAK2S,KAAOkY,EAEL7qB,KAGXoK,KAAK6H,GACD,OAAOjS,KAAK0rC,QAAQz5B,EAASjS,KAAK4T,KAAKY,uBAG3CpK,KAAK6H,GAGD,OAFAA,GAAW,MAEM,KAASjS,KAAKqrC,OAAOp5B,GAAWjS,KAAKsrC,OAAiB,KAAVr5B,GAGjE7H,MAAM6H,EAAiBnT,GACnBkB,KAAK0rC,QAAQz5B,EAASnT,GAG1BsL,UACI,OAAO26B,GAAcoD,cAAcoB,wBAG/Bn/B,oBAAoBvI,EAAsBq7B,GAC9C,MAAMjrB,EAAUirB,EAAKtpB,KAAK64B,wBAEtBx6B,IAAYirB,EAAKhrB,sBAAyBgrB,EAAK2S,kBAC3C3S,EAAKuS,kBAAoB,GACzBvS,EAAKuS,mBAGTvS,EAAKhrB,qBAAuBD,GAI5B7H,QAAQ6H,EAAiBnT,GAG7B,GAFAmT,GAAW,KAEPjS,KAAK6vC,gBAAiB,CACtB,KAAK7vC,KAAKs2B,mBAAqBt2B,KAAK8vC,eAAkB,MAGlD,OAAOhxC,EAFPkB,KAAK6vC,iBAAkB,EAM/B,MAAME,EAAY99B,EAAU,KAASjS,KAAKqrC,OAAOp5B,GAAWjS,KAAKsrC,OAAiB,KAAVr5B,GAExE,KAA2B,IAAZ,KAAVA,IAA6BjS,KAAK0vC,eAAkB1vC,KAAK4vC,kBAK1D,OAJA5vC,KAAK2vC,kBAA8B,IAAV19B,EACzBjS,KAAKyvC,iBAAmB,EACxBzvC,KAAK0vC,eAAgB,EAEdK,EAGX,GAAgB,OAAZ99B,EAMA,OALAjS,KAAKwvC,oBAA6C,GAAzBxvC,KAAK2vC,qBAA4B,GAC1D3vC,KAAK4vC,kBAA6C,EAAzB5vC,KAAK2vC,mBAA4B,EAE1D3vC,KAAK0vC,eAAgB,EAEdK,EAGX,GAAgB,OAAZ99B,OAAsBjS,KAAKgwC,aAA6D,KAA5BhwC,KAAKkS,sBAAiC,IAGlG,OAFAlS,KAAKiwC,aAAanxC,GAEXixC,EAGX,GAAI/vC,KAAK0vC,eAAiB1vC,KAAK4vC,kBAA8C,IAA1B5vC,KAAKyvC,iBAAwB,CAG5E,GAFAzvC,KAAK0vC,eAAgB,EAEjBz9B,EAAU,KACVjS,KAAKqrC,OAAOp5B,GAAWjS,KAAK2vC,sBACzB,CAAA,OAAI3vC,KAAKgwC,WAGZ,OAAOD,EAFP/vC,KAAKsrC,OAAiB,KAAVr5B,GAAoBjS,KAAK2vC,kBAKzC,OAAO3vC,KAAK2vC,kBAGhB,OAAOI,EAGH3lC,mBAAmB8lC,GACvB,OAAQA,GACJ,KAAK,EACD,OAAOlwC,KAAKmwC,gBAAgB,KAEhC,KAAK,EACD,OAAOnwC,KAAKmwC,gBAAgB,KAEhC,KAAK,EACD,OAAOnwC,KAAKmwC,gBAAgB,IAAiB,GAEjD,KAAK,EACD,OAAOnwC,KAAKmwC,gBAAgB,IAAiB,GAEjD,KAAK,EACD,OAAOnwC,KAAKmwC,gBAAgB,KAEhC,KAAK,EACD,OAAOnwC,KAAKmwC,gBAAgB,KAEhC,KAAK,EACD,OAAOnwC,KAAKmwC,gBAAgB,IAAiB,GAEjD,KAAK,EACD,OAAOnwC,KAAKmwC,gBAAgB,IAAiB,GAEjD,QACI,MAAM,IAAIjtC,MAAM,+BAIpBkH,gBAAgBgmC,EAAeC,EAAqBC,EAAQ,GAChEtwC,KAAKqrC,OAASrrC,KAAK8sC,UAAUsD,GAC7BpwC,KAAKgwC,WAAaK,EAClBrwC,KAAKsrC,WAAS+E,EAA6BrwC,KAAK8sC,UAAUwD,GAAStwC,KAAKmqC,KAGpE//B,YACJ,IAAK,IAAI/K,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKmqC,KAAK9qC,GAAK,EAGnB,IAAK,IAAIA,EAAI,EAAGA,EAAI4vC,GAAKnuC,OAAQzB,IAC7BW,KAAKmqC,KAAK9qC,GAAK4vC,GAAK5vC,GAGxBW,KAAKmqC,KAAK,MAAUnqC,KAAKmqC,KAAK,MAAU,IACxCnqC,KAAKmqC,KAAK,MAAUnqC,KAAKmqC,KAAK,MAAU,EAGpC//B,aAAammC,GACjB,IAAIC,EAEJ,IAAKA,EAAY,EAAGA,EAAYxwC,KAAKmvC,aAC7BnvC,KAAKqvC,SAASmB,GAAW5B,cAAgB2B,GAA8B,IAApBvwC,KAAKmvC,YADfqB,KAM7CA,GAAaxwC,KAAKmvC,YAClB7qC,QAAQC,IAAI,mBAAmBgsC,KAGnC,MAAME,EAASzwC,KAAKqvC,SAASmB,GACzBE,EAAO1wC,KAAKovC,OAAOoB,GAEvB,IAAK,IAAIG,EAAW,EAAGA,EAAWF,EAAO/B,WAAYiC,IAAY,CAC7D,MAAMC,EAAWH,EAAO1B,cAAc4B,GAEtC,IAAIE,EAAkB,EAAXD,EAEPC,EAAO,IACPA,EAAO,EACPvsC,QAAQC,IAAI,0BAA0BosC,WAAkBH,MAG5D,MAAMhqB,EAAiC,MAAb,GAAXoqB,KAAmB,GAClC,IAAIjC,EAAWiC,EAAWH,EAAOzB,cAAc2B,GAE/C,IAAK,IAAItxC,EAAI,EAAGA,EAAI,IAAKA,IACrBsvC,GAAY+B,EAAK,IAAMC,EAAWtxC,GAClCW,KAAK8sC,UAAU+D,GAAMrqB,EAAOnnB,GAAKqxC,EAAK,IAAMC,EAAWtxC,GAGjC,KAAV,IAAXsvC,IACDrqC,QAAQC,IAAI,QAAQisC,YAAoBG,uBAIhD3wC,KAAKmqC,KAAK,MAASsG,EAAOhC,YAC1BzuC,KAAKmqC,KAAK,MAASnqC,KAAK2S,KAAKI,IAAI,KACjC/S,KAAKmqC,KAAK,MAASsG,EAAOlC,gBAC1BvuC,KAAKmqC,KAAK,MAASsG,EAAOjC,iBAE1BxuC,KAAK6vC,iBAAkB,EACvB7vC,KAAK8vC,eAAiB9vC,KAAKs2B,oBClQnC,MAAMwa,GAAa,IAAIl+B,WAAW,CAAC,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,GAAK,KAEtE,MAAMm+B,WAAqBnH,GACvBx/B,YAAYwB,GAGR,GAFAk+B,QA0MI9pC,YAAS,IAAI4S,WAAW,MACxB5S,YAAS,IAAI4S,WAAW,MAIxB5S,kBAAe,IAAI4S,WAAW,MAC9B5S,eAA4B,IAAI8E,MAAM,GAEtC9E,UAAO,EAIPA,sBAAiC,KACjCA,kBAAe,EACfA,uBAAoB,EAtNpB4L,EAAO9K,OAAS,MAChB,MAAM,IAAIoC,MAAM,wCAAwC0I,EAAO9K,UAGnE,IAAK,IAAIzB,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgxC,UAAU3xC,GAAK,IAAI4xC,GAG5B,IAAK,IAAI5xC,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKqrC,OAAOhsC,GAAKuM,EAAOvM,GACxBW,KAAKsrC,OAAOjsC,GAAKuM,EAAO,KAASvM,GAGrC,IAAK,IAAIA,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKkxC,aAAa7xC,GAAKuM,EAAO,KAASvM,GAG3CW,KAAK6S,QAGTzI,QACIpK,KAAKwrC,MAAQxrC,KAAKsrC,OAClBtrC,KAAK2S,KAAO,EACZ3S,KAAKgxC,UAAUxtC,QAAQ2tC,GAAWA,EAAQt+B,SAC1C7S,KAAKoxC,aAAe,EACpBpxC,KAAKqxC,kBAAoB,EAG7BjnC,UACI,OAAO26B,GAAcoD,cAAcY,kBAGvC3+B,OAAOkI,GAGH,OAFAtS,KAAK4T,KAAOtB,EAELtS,KAGXoK,mBAAmBisB,GAGf,OAFAr2B,KAAKs2B,iBAAmBD,EAEjBr2B,KAGXoK,KAAK6H,GACD,OAAOjS,KAAK0rC,QAAQz5B,EAASjS,KAAK4T,KAAKY,uBAG3CpK,KAAK6H,GACD,OAAOjS,KAAKwrC,MAAgB,KAAVv5B,GAGtB7H,MAAM6H,EAAiBnT,GACnBkB,KAAK0rC,QAAQz5B,EAASnT,GAGlBsL,QAAQ6H,EAAiBnT,GAG7B,IAFAmT,GAAW,MAEG,IAAM,CAChB,OAAQA,GACJ,KAAK,KACDjS,KAAKwrC,MAAQxrC,KAAKqrC,OAClB,MAEJ,KAAK,KACDrrC,KAAKwrC,MAAQxrC,KAAKsrC,OAO1B,OAAOtrC,KAAKwrC,MAAMv5B,GAGtB,GAAIA,EAAU,EACV,OAAc,EAAVA,GACAjS,KAAKsxC,sBAEER,GACuB,EAAzB9wC,KAAKgxC,UAAU,GAAGO,KAAwC,EAAzBvxC,KAAKgxC,UAAU,GAAGO,KAAwC,EAAzBvxC,KAAKgxC,UAAU,GAAGO,OAGlFvxC,KAAKwxC,cAIpB,GAAIv/B,EAAU,GAAM,CAChB,MAAMk/B,EAAUnxC,KAAKgxC,UAAW/+B,EAAU,EAAK,GAC3Cs/B,EAAOJ,EAAQI,KAEnB,IAAIE,EAAczxC,KAAKkxC,aAAa,KAASC,EAAQO,SAIrD,OAFAP,EAAQtqC,OAECoL,EAAU,IAAO,GACtB,KAAK,EACD,OAAOw/B,EAEX,KAAK,EACD,OAAOA,EAAcF,EAEzB,KAAK,EAED,OADAE,GAAeF,EACqC,KAA3CE,GAAe,EAAMA,IAAgB,GAElD,KAAK,EAGD,OAFAA,GAAeF,GAGK,EAAdE,IAAuB,GACT,EAAdA,IAAuB,GACT,EAAdA,IAAuB,GACT,EAAdA,IAAuB,GACT,GAAdA,KAAwB,GACV,GAAdA,KAAwB,GACV,GAAdA,KAAwB,GACV,IAAdA,KAAwB,EAGlC,KAAK,EACD,OAAQA,EAAcF,KAAU,EAEpC,KAAK,EACD,OAAQE,GAAe,EAAKF,EAEhC,KAAK,EACD,OAAOA,GAInB,GAAIt/B,EAAU,GAAM,CAChB,MAAMk/B,EAAUnxC,KAAKgxC,UAAW/+B,EAAU,GAAQ,GAElD,OAASA,EAAU,KAAU,GACzB,KAAK,EACDjS,KAAKsxC,sBACLH,EAAQQ,SAAS7yC,GACjB,MAEJ,KAAK,EACDkB,KAAKsxC,sBACLH,EAAQS,OAAO9yC,GACf,MAEJ,KAAK,EACDqyC,EAAQU,OAAO/yC,GACf,MAEJ,KAAK,EACDqyC,EAAQW,QAAQhzC,GAEZmT,EAAU,IACVk/B,EAAQY,aAAajzC,GAMjC,OAAOkB,KAAKwrC,MAAMv5B,GAGtB,OAAIA,GAAW,KAAQA,EAAU,KAC7BjS,KAAK2S,KAAO,EAEL3S,KAAKwrC,MAAMv5B,IAGfjS,KAAKwrC,MAAMv5B,GAGd7H,cACJ,MAAM4nC,EAAShyC,KAAK2S,KAOpB,OALA3S,KAAK2S,KAGD,KAFE3S,KAAK2S,MAAQ,EAC2E,IAAlF3S,KAAK2S,OAAS,EAAM3S,KAAK2S,OAAS,EAAO3S,KAAK2S,OAAS,EAAM3S,KAAK2S,OAAS,IAGhFq/B,EAGH5nC,sBACJ,MAAM6nC,EAAUjyC,KAAKs2B,mBACrBt2B,KAAKqxC,mBAAqD,KAA/BY,EAAUjyC,KAAKoxC,cAC1CpxC,KAAKoxC,aAAea,EAEpB,MAAM7M,EAASnP,KAAKoM,MAAMriC,KAAKqxC,mBAG/B,GAFArxC,KAAKqxC,mBAAqBjM,EAEX,IAAXA,EAIJ,IAAK,IAAI/lC,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgxC,UAAU3xC,GAAG6yC,aAAa9M,IAqB3C,MAAM6L,GAAN7mC,cA0EIpK,aAAU,EACVA,WAAQ,EACRA,SAAM,EACNA,gBAAY,EACZA,UAAO,EA7EPoK,aACIpK,KAAK6S,QAGTzI,QACIpK,KAAK0xC,QAAU1xC,KAAKslC,MAAQtlC,KAAKmyC,IAAMnyC,KAAKuxC,KAAO,EACnDvxC,KAAKoyC,WAAY,EAGrBhoC,OACQpK,KAAKoyC,YAITpyC,KAAK0xC,QAAW1xC,KAAK0xC,QAAU,KAAU,KAEzC1xC,KAAKqyC,eAGTjoC,SAASk7B,GACLtlC,KAAKslC,MAAQA,EACbtlC,KAAKuxC,KAAO,EAEZvxC,KAAKqyC,cAGTjoC,OAAO+nC,GACHnyC,KAAKmyC,IAAMA,EAEXnyC,KAAKqyC,cAGTjoC,OAAOtL,GACHkB,KAAK0xC,QAA0B,KAAf1xC,KAAK0xC,QAAoB5yC,EAEzCkB,KAAKqyC,cAGTjoC,QAAQtL,GACJkB,KAAK0xC,QAA0B,IAAf1xC,KAAK0xC,SAA4B,EAAR5yC,IAAiB,EAE1DkB,KAAKqyC,cAGTjoC,aAAatL,GACTkB,KAAKoyC,UAA+B,IAAV,GAARtzC,GAGtBsL,aAAag7B,GACT,IAAKplC,KAAKoyC,UACN,OAGJ,MAAME,EAAStyC,KAAKslC,MAAQ,EACxBiN,IAAiC,IAAfvyC,KAAK0xC,SAAkBY,EAASlN,EAASkN,GAAUA,EACrEE,EAAiB,IAAMxyC,KAAKslC,MAAQiN,EAAiB,IACrDE,EAAe,IAAMzyC,KAAKmyC,IAAMI,EAAiB,IAErDvyC,KAAK0xC,QAA0B,KAAf1xC,KAAK0xC,QAAoBa,EAEzCvyC,KAAKuxC,KAAOiB,EAAgBC,EAAc,EAAI,IAG1CroC,eACgB,IAAfpK,KAAK0xC,WAAoB1xC,KAAKslC,QAC/BtlC,KAAKuxC,KAAO,MAGI,IAAfvxC,KAAK0xC,WAAoB1xC,KAAKmyC,MAC/BnyC,KAAKuxC,KAAO,WCnUU,oBAAXpR,OAAyBA,OACpB,oBAATjD,KAAuBA,KACZ,oBAAXwV,OAAyBA,OAAS,GCCrD,SAASC,KACL,MAAM,IAAIzvC,MAAM,mCAEpB,SAAS0vC,KACL,MAAM,IAAI1vC,MAAM,qCAEpB,IAAI2vC,GAAmBF,GACnBG,GAAqBF,GAQzB,SAASG,GAAWC,GAChB,GAAIH,KAAqB9vC,WAErB,OAAOA,WAAWiwC,EAAK,GAG3B,IAAKH,KAAqBF,KAAqBE,KAAqB9vC,WAEhE,OADA8vC,GAAmB9vC,WACZA,WAAWiwC,EAAK,GAE3B,IAEI,OAAOH,GAAiBG,EAAK,GAC/B,MAAM5uC,GACJ,IAEI,OAAOyuC,GAAiBttC,KAAK,KAAMytC,EAAK,GAC1C,MAAM5uC,GAEJ,OAAOyuC,GAAiBttC,KAAKvF,KAAMgzC,EAAK,KA1BnB,mBAAtB7S,GAAOp9B,aACd8vC,GAAmB9vC,YAEY,mBAAxBo9B,GAAOt8B,eACdivC,GAAqBjvC,cAuDzB,IAEIovC,GAFAC,GAAQ,GACRC,IAAW,EAEXC,IAAc,EAElB,SAASC,KACAF,IAAaF,KAGlBE,IAAW,EACPF,GAAanyC,OACboyC,GAAQD,GAAavzC,OAAOwzC,IAE5BE,IAAc,EAEdF,GAAMpyC,QACNwyC,MAIR,SAASA,KACL,IAAIH,GAAJ,CAGA,IAAII,EAAUR,GAAWM,IACzBF,IAAW,EAGX,IADA,IAAI7I,EAAM4I,GAAMpyC,OACVwpC,GAAK,CAGP,IAFA2I,GAAeC,GACfA,GAAQ,KACCE,GAAa9I,GACd2I,IACAA,GAAaG,IAAYI,MAGjCJ,IAAc,EACd9I,EAAM4I,GAAMpyC,OAEhBmyC,GAAe,KACfE,IAAW,EAnEf,SAAyBM,GACrB,GAAIX,KAAuBjvC,aAEvB,OAAOA,aAAa4vC,GAGxB,IAAKX,KAAuBF,KAAwBE,KAAuBjvC,aAEvE,OADAivC,GAAqBjvC,aACdA,aAAa4vC,GAExB,IAEWX,GAAmBW,GAC5B,MAAOrvC,GACL,IAEI,OAAO0uC,GAAmBvtC,KAAK,KAAMkuC,GACvC,MAAOrvC,GAGL,OAAO0uC,GAAmBvtC,KAAKvF,KAAMyzC,KAgD7CC,CAAgBH,IAepB,SAASI,GAAKX,EAAKY,GACf5zC,KAAKgzC,IAAMA,EACXhzC,KAAK4zC,MAAQA,EAEjBD,GAAKtzC,UAAUmzC,IAAM,WACjBxzC,KAAKgzC,IAAIvzC,MAAM,KAAMO,KAAK4zC,QAY9B,SAASC,MAEF,IAAIC,GAAKD,GACLE,GAAcF,GACdG,GAAOH,GACPI,GAAMJ,GACNK,GAAiBL,GACjBM,GAAqBN,GACrB9mC,GAAO8mC,GAalB,IAAIO,GAAcjU,GAAOiU,aAAe,GACpCC,GACFD,GAAYE,KACZF,GAAYG,QACZH,GAAYI,OACZJ,GAAYK,MACZL,GAAYM,WACZ,WAAY,OAAO,IAAK1S,MAAQ2S,WAmBlC,IAAIC,GAAY,IAAI5S,YAOL,CACb6S,SArFK,SAAkB7B,GACrB,IAAI8B,EAAO,IAAIhwC,MAAMQ,UAAUxE,OAAS,GACxC,GAAIwE,UAAUxE,OAAS,EACnB,IAAK,IAAIzB,EAAI,EAAGA,EAAIiG,UAAUxE,OAAQzB,IAClCy1C,EAAKz1C,EAAI,GAAKiG,UAAUjG,GAGhC6zC,GAAM5zC,KAAK,IAAIq0C,GAAKX,EAAK8B,IACJ,IAAjB5B,GAAMpyC,QAAiBqyC,IACvBJ,GAAWO,KA6EjByB,MAlEiB,UAmEjBlR,SAjEmB,EAkEnBmR,IAjEe,GAkEfC,KAjEgB,GAkEhBC,QAjEmB,GAkEnBC,SAjEoB,GAkEpBrB,GAAIA,GACJC,YAAaA,GACbC,KAAMA,GACNC,IAAKA,GACLC,eAAgBA,GAChBC,mBAAoBA,GACpBpnC,KAAMA,GACNqoC,QA3DK,SAAiBC,GACpB,MAAM,IAAInyC,MAAM,qCA2DlBoyC,IAxDK,WAAkB,MAAO,KAyD9BC,MAxDK,SAAgBC,GACnB,MAAM,IAAItyC,MAAM,mCAwDlBuyC,MAtDK,WAAmB,OAAO,GAuD/BC,OAzCK,SAAgBC,GACrB,IAAIC,EAA6C,KAAjCvB,GAAe9uC,KAAK6uC,IAChCyB,EAAU5f,KAAKoM,MAAMuT,GACrBE,EAAc7f,KAAKoM,MAAOuT,EAAU,EAAG,KAS3C,OARID,IACFE,GAAoBF,EAAkB,IACtCG,GAA4BH,EAAkB,IAC9B,IACdE,IACAC,GAAe,MAGZ,CAACD,EAAQC,IA8BhBC,SAnFoB,UAoFpBrrC,QA9EmB,GA+EnBkD,OA9EkB,GA+ElBooC,OA7BK,WAGL,OAFkB,IAAIhU,KACE4S,IACX,SClMA,2ECCXqB,GAAS,GACTC,GAAY,GACZC,GAA4B,oBAAfvjC,WAA6BA,WAAa9N,MACvDsxC,IAAS,EACb,SAAShoC,KACPgoC,IAAS,EAET,IADA,IAAIC,EAAO,mEACFh3C,EAAI,EAAGirC,EAAM+L,EAAKv1C,OAAQzB,EAAIirC,IAAOjrC,EAC5C42C,GAAO52C,GAAKg3C,EAAKh3C,GACjB62C,GAAUG,EAAKzqB,WAAWvsB,IAAMA,EAGlC62C,GAAU,IAAItqB,WAAW,IAAM,GAC/BsqB,GAAU,IAAItqB,WAAW,IAAM,GAoDjC,SAAS0qB,GAAaC,EAAOjR,EAAO6M,GAGlC,IAFA,IAAIqE,EALoBC,EAMpBC,EAAS,GACJr3C,EAAIimC,EAAOjmC,EAAI8yC,EAAK9yC,GAAK,EAChCm3C,GAAOD,EAAMl3C,IAAM,KAAOk3C,EAAMl3C,EAAI,IAAM,GAAMk3C,EAAMl3C,EAAI,GAC1Dq3C,EAAOp3C,KARF22C,IADiBQ,EASMD,IART,GAAK,IAAQP,GAAOQ,GAAO,GAAK,IAAQR,GAAOQ,GAAO,EAAI,IAAQR,GAAa,GAANQ,IAU9F,OAAOC,EAAOC,KAAK,IAGd,SAASC,GAAeL,GAI7B,IAAIC,EAHCJ,IACHhoC,KAUF,IAPA,IAAIk8B,EAAMiM,EAAMz1C,OACZ+1C,EAAavM,EAAM,EACnBoM,EAAS,GACTI,EAAQ,GAIHz3C,EAAI,EAAG03C,EAAOzM,EAAMuM,EAAYx3C,EAAI03C,EAAM13C,GAH9B,MAInBy3C,EAAMx3C,KAAKg3C,GAAYC,EAAOl3C,EAAIA,EAJf,MAIqC03C,EAAOA,EAAQ13C,EAJpD,QAuBrB,OAfmB,IAAfw3C,GACFL,EAAMD,EAAMjM,EAAM,GAClBoM,GAAUT,GAAOO,GAAO,GACxBE,GAAUT,GAAQO,GAAO,EAAK,IAC9BE,GAAU,MACc,IAAfG,IACTL,GAAOD,EAAMjM,EAAM,IAAM,GAAMiM,EAAMjM,EAAM,GAC3CoM,GAAUT,GAAOO,GAAO,IACxBE,GAAUT,GAAQO,GAAO,EAAK,IAC9BE,GAAUT,GAAQO,GAAO,EAAK,IAC9BE,GAAU,KAGZI,EAAMx3C,KAAKo3C,GAEJI,EAAMH,KAAK,IC3Gb,SAASnlC,GAAM5F,EAAQ6hB,EAAQupB,EAAMC,EAAMC,GAChD,IAAI9yC,EAAG8C,EACHiwC,EAAgB,EAATD,EAAaD,EAAO,EAC3BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACTj4C,EAAI23C,EAAQE,EAAS,EAAK,EAC1BxyC,EAAIsyC,GAAQ,EAAI,EAChB5xC,EAAIwG,EAAO6hB,EAASpuB,GAOxB,IALAA,GAAKqF,EAELN,EAAIgB,GAAM,IAAOkyC,GAAU,EAC3BlyC,KAAQkyC,EACRA,GAASH,EACFG,EAAQ,EAAGlzC,EAAQ,IAAJA,EAAUwH,EAAO6hB,EAASpuB,GAAIA,GAAKqF,EAAG4yC,GAAS,GAKrE,IAHApwC,EAAI9C,GAAM,IAAOkzC,GAAU,EAC3BlzC,KAAQkzC,EACRA,GAASL,EACFK,EAAQ,EAAGpwC,EAAQ,IAAJA,EAAU0E,EAAO6hB,EAASpuB,GAAIA,GAAKqF,EAAG4yC,GAAS,GAErE,GAAU,IAANlzC,EACFA,EAAI,EAAIizC,MACH,CAAA,GAAIjzC,IAAMgzC,EACf,OAAOlwC,EAAIqwC,IAAsBC,EAAAA,GAAdpyC,GAAK,EAAI,GAE5B8B,GAAQ+uB,KAAK0M,IAAI,EAAGsU,GACpB7yC,GAAQizC,EAEV,OAAQjyC,GAAK,EAAI,GAAK8B,EAAI+uB,KAAK0M,IAAI,EAAGv+B,EAAI6yC,GAGrC,SAASxlC,GAAO7F,EAAQ9M,EAAO2uB,EAAQupB,EAAMC,EAAMC,GACxD,IAAI9yC,EAAG8C,EAAGrB,EACNsxC,EAAgB,EAATD,EAAaD,EAAO,EAC3BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBK,EAAe,KAATR,EAAchhB,KAAK0M,IAAI,GAAI,IAAM1M,KAAK0M,IAAI,GAAI,IAAM,EAC1DtjC,EAAI23C,EAAO,EAAKE,EAAS,EACzBxyC,EAAIsyC,EAAO,GAAK,EAChB5xC,EAAItG,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQm3B,KAAKyhB,IAAI54C,GAEb64C,MAAM74C,IAAUA,IAAU04C,EAAAA,GAC5BtwC,EAAIywC,MAAM74C,GAAS,EAAI,EACvBsF,EAAIgzC,IAEJhzC,EAAI6xB,KAAKoM,MAAMpM,KAAK1xB,IAAIzF,GAASm3B,KAAK2hB,KAClC94C,GAAS+G,EAAIowB,KAAK0M,IAAI,GAAIv+B,IAAM,IAClCA,IACAyB,GAAK,IAGL/G,GADEsF,EAAIizC,GAAS,EACNI,EAAK5xC,EAEL4xC,EAAKxhB,KAAK0M,IAAI,EAAG,EAAI0U,IAEpBxxC,GAAK,IACfzB,IACAyB,GAAK,GAGHzB,EAAIizC,GAASD,GACflwC,EAAI,EACJ9C,EAAIgzC,GACKhzC,EAAIizC,GAAS,GACtBnwC,GAAKpI,EAAQ+G,EAAI,GAAKowB,KAAK0M,IAAI,EAAGsU,GAClC7yC,GAAQizC,IAERnwC,EAAIpI,EAAQm3B,KAAK0M,IAAI,EAAG0U,EAAQ,GAAKphB,KAAK0M,IAAI,EAAGsU,GACjD7yC,EAAI,IAID6yC,GAAQ,EAAGrrC,EAAO6hB,EAASpuB,GAAS,IAAJ6H,EAAU7H,GAAKqF,EAAGwC,GAAK,IAAK+vC,GAAQ,GAI3E,IAFA7yC,EAAKA,GAAK6yC,EAAQ/vC,EAClBiwC,GAAQF,EACDE,EAAO,EAAGvrC,EAAO6hB,EAASpuB,GAAS,IAAJ+E,EAAU/E,GAAKqF,EAAGN,GAAK,IAAK+yC,GAAQ,GAE1EvrC,EAAO6hB,EAASpuB,EAAIqF,IAAU,IAAJU,ECnF5B,IAAIyyC,GAAW,GAAGA,YAEH/yC,MAAMgzC,SAAW,SAAUC,GACxC,MAA6B,kBAAtBF,GAAStyC,KAAKwyC,IC8DvB,SAASC,KACP,OAAOC,GAAOC,oBACV,WACA,WAGN,SAASC,GAAcC,EAAMt3C,GAC3B,GAAIk3C,KAAel3C,EACjB,MAAM,IAAIu3C,WAAW,8BAcvB,OAZIJ,GAAOC,qBAETE,EAAO,IAAIxlC,WAAW9R,IACjB+D,UAAYozC,GAAO53C,WAGX,OAAT+3C,IACFA,EAAO,IAAIH,GAAOn3C,IAEpBs3C,EAAKt3C,OAASA,GAGTs3C,EAaF,SAASH,GAAQK,EAAKC,EAAkBz3C,GAC7C,KAAKm3C,GAAOC,qBAAyBl4C,gBAAgBi4C,IACnD,OAAO,IAAIA,GAAOK,EAAKC,EAAkBz3C,GAI3C,GAAmB,iBAARw3C,EAAkB,CAC3B,GAAgC,iBAArBC,EACT,MAAM,IAAIr1C,MACR,qEAGJ,OAAOs1C,GAAYx4C,KAAMs4C,GAE3B,OAAOG,GAAKz4C,KAAMs4C,EAAKC,EAAkBz3C,GAW3C,SAAS23C,GAAML,EAAMt5C,EAAOy5C,EAAkBz3C,GAC5C,GAAqB,iBAAVhC,EACT,MAAM,IAAImK,UAAU,yCAGtB,MAA2B,oBAAhByvC,aAA+B55C,aAAiB45C,YA6H7D,SAA0BN,EAAMxE,EAAO+E,EAAY73C,GAGjD,GAFA8yC,EAAM9nC,WAEF6sC,EAAa,GAAK/E,EAAM9nC,WAAa6sC,EACvC,MAAM,IAAIN,WAAW,6BAGvB,GAAIzE,EAAM9nC,WAAa6sC,GAAc73C,GAAU,GAC7C,MAAM,IAAIu3C,WAAW,6BAIrBzE,OADiB7yC,IAAf43C,QAAuC53C,IAAXD,EACtB,IAAI8R,WAAWghC,QACH7yC,IAAXD,EACD,IAAI8R,WAAWghC,EAAO+E,GAEtB,IAAI/lC,WAAWghC,EAAO+E,EAAY73C,GAGxCm3C,GAAOC,qBAETE,EAAOxE,GACF/uC,UAAYozC,GAAO53C,UAGxB+3C,EAAOQ,GAAcR,EAAMxE,GAE7B,OAAOwE,EAvJES,CAAgBT,EAAMt5C,EAAOy5C,EAAkBz3C,GAGnC,iBAAVhC,EAwFb,SAAqBs5C,EAAMU,EAAQC,GACT,iBAAbA,GAAsC,KAAbA,IAClCA,EAAW,QAGb,IAAKd,GAAOe,WAAWD,GACrB,MAAM,IAAI9vC,UAAU,8CAGtB,IAAInI,EAAwC,EAA/BgL,GAAWgtC,EAAQC,GAG5BE,GAFJb,EAAOD,GAAaC,EAAMt3C,IAER2Q,MAAMqnC,EAAQC,GAE5BE,IAAWn4C,IAIbs3C,EAAOA,EAAKrW,MAAM,EAAGkX,IAGvB,OAAOb,EA5GEc,CAAWd,EAAMt5C,EAAOy5C,GAsJnC,SAAqBH,EAAMjV,GACzB,GAAIgW,GAAiBhW,GAAM,CACzB,IAAImH,EAA4B,EAAtB8O,GAAQjW,EAAIriC,QAGtB,OAAoB,KAFpBs3C,EAAOD,GAAaC,EAAM9N,IAEjBxpC,OACAs3C,GAGTjV,EAAIrC,KAAKsX,EAAM,EAAG,EAAG9N,GACd8N,GAGT,GAAIjV,EAAK,CACP,GAA4B,oBAAhBuV,aACRvV,EAAIv3B,kBAAkB8sC,aAAgB,WAAYvV,EACpD,MAA0B,iBAAfA,EAAIriC,SAg9CLu4C,EAh9CkClW,EAAIriC,SAi9CrCu4C,EAh9CFlB,GAAaC,EAAM,GAErBQ,GAAcR,EAAMjV,GAG7B,GAAiB,WAAbA,EAAIthC,MAAqBi2C,GAAQ3U,EAAI9+B,MACvC,OAAOu0C,GAAcR,EAAMjV,EAAI9+B,MAy8CrC,IAAgBg1C,EAr8Cd,MAAM,IAAIpwC,UAAU,sFA9KbqwC,CAAWlB,EAAMt5C,GA4B1B,SAASy6C,GAAYthB,GACnB,GAAoB,iBAATA,EACT,MAAM,IAAIhvB,UAAU,oCACf,GAAIgvB,EAAO,EAChB,MAAM,IAAIogB,WAAW,wCA4BzB,SAASG,GAAaJ,EAAMngB,GAG1B,GAFAshB,GAAWthB,GACXmgB,EAAOD,GAAaC,EAAMngB,EAAO,EAAI,EAAoB,EAAhBmhB,GAAQnhB,KAC5CggB,GAAOC,oBACV,IAAK,IAAI74C,EAAI,EAAGA,EAAI44B,IAAQ54B,EAC1B+4C,EAAK/4C,GAAK,EAGd,OAAO+4C,EAwCT,SAASQ,GAAeR,EAAMxE,GAC5B,IAAI9yC,EAAS8yC,EAAM9yC,OAAS,EAAI,EAA4B,EAAxBs4C,GAAQxF,EAAM9yC,QAClDs3C,EAAOD,GAAaC,EAAMt3C,GAC1B,IAAK,IAAIzB,EAAI,EAAGA,EAAIyB,EAAQzB,GAAK,EAC/B+4C,EAAK/4C,GAAgB,IAAXu0C,EAAMv0C,GAElB,OAAO+4C,EA+DT,SAASgB,GAASt4C,GAGhB,GAAIA,GAAUk3C,KACZ,MAAM,IAAIK,WAAW,0DACaL,KAAaH,SAAS,IAAM,UAEhE,OAAgB,EAAT/2C,EAUT,SAASq4C,GAAkBx0C,GACzB,QAAe,MAALA,IAAaA,EAAE60C,WA2E3B,SAAS1tC,GAAYgtC,EAAQC,GAC3B,GAAII,GAAiBL,GACnB,OAAOA,EAAOh4C,OAEhB,GAA2B,oBAAhB43C,aAA6D,mBAAvBA,YAAYe,SACxDf,YAAYe,OAAOX,IAAWA,aAAkBJ,aACnD,OAAOI,EAAOhtC,WAEM,iBAAXgtC,IACTA,EAAS,GAAKA,GAGhB,IAAIxO,EAAMwO,EAAOh4C,OACjB,GAAY,IAARwpC,EAAW,OAAO,EAItB,IADA,IAAIoP,GAAc,IAEhB,OAAQX,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAOzO,EACT,IAAK,OACL,IAAK,QACL,UAAKvpC,EACH,OAAO44C,GAAYb,GAAQh4C,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAANwpC,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAOsP,GAAcd,GAAQh4C,OAC/B,QACE,GAAI44C,EAAa,OAAOC,GAAYb,GAAQh4C,OAC5Ci4C,GAAY,GAAKA,GAAUc,cAC3BH,GAAc,GAMtB,SAASI,GAAcf,EAAUzT,EAAO6M,GACtC,IAAIuH,GAAc,EAclB,SALc34C,IAAVukC,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQtlC,KAAKc,OACf,MAAO,GAOT,SAJYC,IAARoxC,GAAqBA,EAAMnyC,KAAKc,UAClCqxC,EAAMnyC,KAAKc,QAGTqxC,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACT7M,KAAW,GAGT,MAAO,GAKT,IAFKyT,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAOgB,GAAS/5C,KAAMslC,EAAO6M,GAE/B,IAAK,OACL,IAAK,QACH,OAAO6H,GAAUh6C,KAAMslC,EAAO6M,GAEhC,IAAK,QACH,OAAO8H,GAAWj6C,KAAMslC,EAAO6M,GAEjC,IAAK,SACL,IAAK,SACH,OAAO+H,GAAYl6C,KAAMslC,EAAO6M,GAElC,IAAK,SACH,OAAOgI,GAAYn6C,KAAMslC,EAAO6M,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOiI,GAAap6C,KAAMslC,EAAO6M,GAEnC,QACE,GAAIuH,EAAa,MAAM,IAAIzwC,UAAU,qBAAuB8vC,GAC5DA,GAAYA,EAAW,IAAIc,cAC3BH,GAAc,GAStB,SAASW,GAAM11C,EAAGU,EAAG6B,GACnB,IAAI7H,EAAIsF,EAAEU,GACVV,EAAEU,GAAKV,EAAEuC,GACTvC,EAAEuC,GAAK7H,EAmIT,SAASi7C,GAAsB1uC,EAAQytC,EAAKV,EAAYI,EAAUvD,GAEhE,GAAsB,IAAlB5pC,EAAO9K,OAAc,OAAQ,EAmBjC,GAhB0B,iBAAf63C,GACTI,EAAWJ,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAEhBA,GAAcA,EACVhB,MAAMgB,KAERA,EAAanD,EAAM,EAAK5pC,EAAO9K,OAAS,GAItC63C,EAAa,IAAGA,EAAa/sC,EAAO9K,OAAS63C,GAC7CA,GAAc/sC,EAAO9K,OAAQ,CAC/B,GAAI00C,EAAK,OAAQ,EACZmD,EAAa/sC,EAAO9K,OAAS,OAC7B,GAAI63C,EAAa,EAAG,CACzB,IAAInD,EACC,OAAQ,EADJmD,EAAa,EAUxB,GALmB,iBAARU,IACTA,EAAMpB,GAAOQ,KAAKY,EAAKN,IAIrBI,GAAiBE,GAEnB,OAAmB,IAAfA,EAAIv4C,QACE,EAEHy5C,GAAa3uC,EAAQytC,EAAKV,EAAYI,EAAUvD,GAClD,GAAmB,iBAAR6D,EAEhB,OADAA,GAAY,IACRpB,GAAOC,qBACiC,mBAAjCtlC,WAAWvS,UAAU0H,QAC1BytC,EACK5iC,WAAWvS,UAAU0H,QAAQxC,KAAKqG,EAAQytC,EAAKV,GAE/C/lC,WAAWvS,UAAUm6C,YAAYj1C,KAAKqG,EAAQytC,EAAKV,GAGvD4B,GAAa3uC,EAAQ,CAAEytC,GAAOV,EAAYI,EAAUvD,GAG7D,MAAM,IAAIvsC,UAAU,wCAGtB,SAASsxC,GAAcxC,EAAKsB,EAAKV,EAAYI,EAAUvD,GACrD,IA0BIn2C,EA1BAo7C,EAAY,EACZC,EAAY3C,EAAIj3C,OAChB65C,EAAYtB,EAAIv4C,OAEpB,QAAiBC,IAAbg4C,IAEe,UADjBA,EAAWrY,OAAOqY,GAAUc,gBACY,UAAbd,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAIhB,EAAIj3C,OAAS,GAAKu4C,EAAIv4C,OAAS,EACjC,OAAQ,EAEV25C,EAAY,EACZC,GAAa,EACbC,GAAa,EACbhC,GAAc,EAIlB,SAASnnC,EAAMopC,EAAKv7C,GAClB,OAAkB,IAAdo7C,EACKG,EAAIv7C,GAEJu7C,EAAIC,aAAax7C,EAAIo7C,GAKhC,GAAIjF,EAAK,CACP,IAAIsF,GAAc,EAClB,IAAKz7C,EAAIs5C,EAAYt5C,EAAIq7C,EAAWr7C,IAClC,GAAImS,EAAKumC,EAAK14C,KAAOmS,EAAK6nC,GAAqB,IAAhByB,EAAoB,EAAIz7C,EAAIy7C,IAEzD,IADoB,IAAhBA,IAAmBA,EAAaz7C,GAChCA,EAAIy7C,EAAa,IAAMH,EAAW,OAAOG,EAAaL,OAEtC,IAAhBK,IAAmBz7C,GAAKA,EAAIy7C,GAChCA,GAAc,OAKlB,IADInC,EAAagC,EAAYD,IAAW/B,EAAa+B,EAAYC,GAC5Dt7C,EAAIs5C,EAAYt5C,GAAK,EAAGA,IAAK,CAEhC,IADA,IAAI07C,GAAQ,EACHzxC,EAAI,EAAGA,EAAIqxC,EAAWrxC,IAC7B,GAAIkI,EAAKumC,EAAK14C,EAAIiK,KAAOkI,EAAK6nC,EAAK/vC,GAAI,CACrCyxC,GAAQ,EACR,MAGJ,GAAIA,EAAO,OAAO17C,EAItB,OAAQ,EAeV,SAAS27C,GAAUJ,EAAK9B,EAAQrrB,EAAQ3sB,GACtC2sB,EAASwtB,OAAOxtB,IAAW,EAC3B,IAAIytB,EAAYN,EAAI95C,OAAS2sB,EACxB3sB,GAGHA,EAASm6C,OAAOn6C,IACHo6C,IACXp6C,EAASo6C,GAJXp6C,EAASo6C,EASX,IAAIC,EAASrC,EAAOh4C,OACpB,GAAIq6C,EAAS,GAAM,EAAG,MAAM,IAAIlyC,UAAU,sBAEtCnI,EAASq6C,EAAS,IACpBr6C,EAASq6C,EAAS,GAEpB,IAAK,IAAI97C,EAAI,EAAGA,EAAIyB,IAAUzB,EAAG,CAC/B,IAAI+7C,EAASC,SAASvC,EAAOwC,OAAW,EAAJj8C,EAAO,GAAI,IAC/C,GAAIs4C,MAAMyD,GAAS,OAAO/7C,EAC1Bu7C,EAAIntB,EAASpuB,GAAK+7C,EAEpB,OAAO/7C,EAGT,SAASk8C,GAAWX,EAAK9B,EAAQrrB,EAAQ3sB,GACvC,OAAO06C,GAAW7B,GAAYb,EAAQ8B,EAAI95C,OAAS2sB,GAASmtB,EAAKntB,EAAQ3sB,GAG3E,SAAS26C,GAAYb,EAAK9B,EAAQrrB,EAAQ3sB,GACxC,OAAO06C,GAq6BT,SAAuBE,GAErB,IADA,IAAIC,EAAY,GACPt8C,EAAI,EAAGA,EAAIq8C,EAAI56C,SAAUzB,EAEhCs8C,EAAUr8C,KAAyB,IAApBo8C,EAAI9vB,WAAWvsB,IAEhC,OAAOs8C,EA36BWC,CAAa9C,GAAS8B,EAAKntB,EAAQ3sB,GAGvD,SAAS+6C,GAAajB,EAAK9B,EAAQrrB,EAAQ3sB,GACzC,OAAO26C,GAAWb,EAAK9B,EAAQrrB,EAAQ3sB,GAGzC,SAASg7C,GAAalB,EAAK9B,EAAQrrB,EAAQ3sB,GACzC,OAAO06C,GAAW5B,GAAcd,GAAS8B,EAAKntB,EAAQ3sB,GAGxD,SAASi7C,GAAWnB,EAAK9B,EAAQrrB,EAAQ3sB,GACvC,OAAO06C,GAk6BT,SAAyBE,EAAKM,GAG5B,IAFA,IAAIn2C,EAAGo2C,EAAIC,EACPP,EAAY,GACPt8C,EAAI,EAAGA,EAAIq8C,EAAI56C,WACjBk7C,GAAS,GAAK,KADa38C,EAGhCwG,EAAI61C,EAAI9vB,WAAWvsB,GACnB48C,EAAKp2C,GAAK,EACVq2C,EAAKr2C,EAAI,IACT81C,EAAUr8C,KAAK48C,GACfP,EAAUr8C,KAAK28C,GAGjB,OAAON,EA/6BWQ,CAAerD,EAAQ8B,EAAI95C,OAAS2sB,GAASmtB,EAAKntB,EAAQ3sB,GAkF9E,SAASq5C,GAAaS,EAAKtV,EAAO6M,GAChC,OAAc,IAAV7M,GAAe6M,IAAQyI,EAAI95C,OACtBs7C,GAAqBxB,GAErBwB,GAAqBxB,EAAI7Y,MAAMuD,EAAO6M,IAIjD,SAAS6H,GAAWY,EAAKtV,EAAO6M,GAC9BA,EAAMlc,KAAKsU,IAAIqQ,EAAI95C,OAAQqxC,GAI3B,IAHA,IAAIkK,EAAM,GAENh9C,EAAIimC,EACDjmC,EAAI8yC,GAAK,CACd,IAQMmK,EAAYC,EAAWC,EAAYC,EARrCC,EAAY9B,EAAIv7C,GAChBs9C,EAAY,KACZC,EAAoBF,EAAY,IAAQ,EACvCA,EAAY,IAAQ,EACpBA,EAAY,IAAQ,EACrB,EAEJ,GAAIr9C,EAAIu9C,GAAoBzK,EAG1B,OAAQyK,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EAEyB,MAAV,KADlBJ,EAAa1B,EAAIv7C,EAAI,OAEnBo9C,GAA6B,GAAZC,IAAqB,EAAoB,GAAbJ,GACzB,MAClBK,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAa1B,EAAIv7C,EAAI,GACrBk9C,EAAY3B,EAAIv7C,EAAI,GACQ,MAAV,IAAbi9C,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZC,IAAoB,IAAoB,GAAbJ,IAAsB,EAAmB,GAAZC,GACrD,OAAUE,EAAgB,OAAUA,EAAgB,SACtEE,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAa1B,EAAIv7C,EAAI,GACrBk9C,EAAY3B,EAAIv7C,EAAI,GACpBm9C,EAAa5B,EAAIv7C,EAAI,GACO,MAAV,IAAbi9C,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZC,IAAoB,IAAqB,GAAbJ,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,GAClF,OAAUC,EAAgB,UAC5CE,EAAYF,GAMJ,OAAdE,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbN,EAAI/8C,KAAKq9C,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBN,EAAI/8C,KAAKq9C,GACTt9C,GAAKu9C,EAGP,OAQF,SAAgCC,GAC9B,IAAIvS,EAAMuS,EAAW/7C,OACrB,GAAIwpC,GAJqB,KAKvB,OAAO5J,OAAOgE,aAAajlC,MAAMihC,OAAQmc,GAI3C,IAAIR,EAAM,GACNh9C,EAAI,EACR,KAAOA,EAAIirC,GACT+R,GAAO3b,OAAOgE,aAAajlC,MACzBihC,OACAmc,EAAW9a,MAAM1iC,EAAGA,GAdC,OAiBzB,OAAOg9C,EAvBAS,CAAsBT,GAv7B/BpE,GAAOC,yBAAqDn3C,IAA/Bo/B,GAAO+X,qBAChC/X,GAAO+X,oBA6EXD,GAAO8E,SAAW,KAGlB9E,GAAO+E,SAAW,SAAUjF,GAE1B,OADAA,EAAIlzC,UAAYozC,GAAO53C,UAChB03C,GA2BTE,GAAOQ,KAAO,SAAU35C,EAAOy5C,EAAkBz3C,GAC/C,OAAO23C,GAAK,KAAM35C,EAAOy5C,EAAkBz3C,IAGzCm3C,GAAOC,sBACTD,GAAO53C,UAAUwE,UAAY+N,WAAWvS,UACxC43C,GAAOpzC,UAAY+N,YAuCrBqlC,GAAOgF,MAAQ,SAAUhlB,EAAM/oB,EAAM6pC,GACnC,OArBF,SAAgBX,EAAMngB,EAAM/oB,EAAM6pC,GAEhC,OADAQ,GAAWthB,GACPA,GAAQ,EACHkgB,GAAaC,EAAMngB,QAEfl3B,IAATmO,EAIyB,iBAAb6pC,EACVZ,GAAaC,EAAMngB,GAAM/oB,KAAKA,EAAM6pC,GACpCZ,GAAaC,EAAMngB,GAAM/oB,KAAKA,GAE7BipC,GAAaC,EAAMngB,GAQnBglB,CAAM,KAAMhlB,EAAM/oB,EAAM6pC,IAiBjCd,GAAOO,YAAc,SAAUvgB,GAC7B,OAAOugB,GAAY,KAAMvgB,IAK3BggB,GAAOiF,gBAAkB,SAAUjlB,GACjC,OAAOugB,GAAY,KAAMvgB,IAgH3BggB,GAAOkF,SA07CA,SAAkBha,GACvB,OAAc,MAAPA,MAAkBA,EAAIqW,WAAa4D,GAAaja,IAQzD,SAAuBA,GACrB,MAAkC,mBAApBA,EAAIka,aAAmD,mBAAdla,EAAIpB,OAAwBqb,GAAaja,EAAIpB,MAAM,EAAG,IAT9Cub,CAAana,KAt7C9E8U,GAAOsF,QAAU,SAAkBl0C,EAAG1E,GACpC,IAAKw0C,GAAiB9vC,KAAO8vC,GAAiBx0C,GAC5C,MAAM,IAAIsE,UAAU,6BAGtB,GAAII,IAAM1E,EAAG,OAAO,EAKpB,IAHA,IAAIgU,EAAItP,EAAEvI,OACNwH,EAAI3D,EAAE7D,OAEDzB,EAAI,EAAGirC,EAAMrU,KAAKsU,IAAI5xB,EAAGrQ,GAAIjJ,EAAIirC,IAAOjrC,EAC/C,GAAIgK,EAAEhK,KAAOsF,EAAEtF,GAAI,CACjBsZ,EAAItP,EAAEhK,GACNiJ,EAAI3D,EAAEtF,GACN,MAIJ,OAAIsZ,EAAIrQ,GAAW,EACfA,EAAIqQ,EAAU,EACX,GAGTs/B,GAAOe,WAAa,SAAqBD,GACvC,OAAQrY,OAAOqY,GAAUc,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,IAIb5B,GAAOv4C,OAAS,SAAiB89C,EAAM18C,GACrC,IAAKg3C,GAAQ0F,GACX,MAAM,IAAIv0C,UAAU,+CAGtB,GAAoB,IAAhBu0C,EAAK18C,OACP,OAAOm3C,GAAOgF,MAAM,GAGtB,IAAI59C,EACJ,QAAe0B,IAAXD,EAEF,IADAA,EAAS,EACJzB,EAAI,EAAGA,EAAIm+C,EAAK18C,SAAUzB,EAC7ByB,GAAU08C,EAAKn+C,GAAGyB,OAItB,IAAI8K,EAASqsC,GAAOO,YAAY13C,GAC5B28C,EAAM,EACV,IAAKp+C,EAAI,EAAGA,EAAIm+C,EAAK18C,SAAUzB,EAAG,CAChC,IAAIu7C,EAAM4C,EAAKn+C,GACf,IAAK85C,GAAiByB,GACpB,MAAM,IAAI3xC,UAAU,+CAEtB2xC,EAAI9Z,KAAKl1B,EAAQ6xC,GACjBA,GAAO7C,EAAI95C,OAEb,OAAO8K,GA8CTqsC,GAAOnsC,WAAaA,GA0EpBmsC,GAAO53C,UAAUm5C,WAAY,EAQ7BvB,GAAO53C,UAAUq9C,OAAS,WACxB,IAAIpT,EAAMtqC,KAAKc,OACf,GAAIwpC,EAAM,GAAM,EACd,MAAM,IAAI+N,WAAW,6CAEvB,IAAK,IAAIh5C,EAAI,EAAGA,EAAIirC,EAAKjrC,GAAK,EAC5Bg7C,GAAKr6C,KAAMX,EAAGA,EAAI,GAEpB,OAAOW,MAGTi4C,GAAO53C,UAAUs9C,OAAS,WACxB,IAAIrT,EAAMtqC,KAAKc,OACf,GAAIwpC,EAAM,GAAM,EACd,MAAM,IAAI+N,WAAW,6CAEvB,IAAK,IAAIh5C,EAAI,EAAGA,EAAIirC,EAAKjrC,GAAK,EAC5Bg7C,GAAKr6C,KAAMX,EAAGA,EAAI,GAClBg7C,GAAKr6C,KAAMX,EAAI,EAAGA,EAAI,GAExB,OAAOW,MAGTi4C,GAAO53C,UAAUu9C,OAAS,WACxB,IAAItT,EAAMtqC,KAAKc,OACf,GAAIwpC,EAAM,GAAM,EACd,MAAM,IAAI+N,WAAW,6CAEvB,IAAK,IAAIh5C,EAAI,EAAGA,EAAIirC,EAAKjrC,GAAK,EAC5Bg7C,GAAKr6C,KAAMX,EAAGA,EAAI,GAClBg7C,GAAKr6C,KAAMX,EAAI,EAAGA,EAAI,GACtBg7C,GAAKr6C,KAAMX,EAAI,EAAGA,EAAI,GACtBg7C,GAAKr6C,KAAMX,EAAI,EAAGA,EAAI,GAExB,OAAOW,MAGTi4C,GAAO53C,UAAUw3C,SAAW,WAC1B,IAAI/2C,EAAuB,EAAdd,KAAKc,OAClB,OAAe,IAAXA,EAAqB,GACA,IAArBwE,UAAUxE,OAAqBk5C,GAAUh6C,KAAM,EAAGc,GAC/Cg5C,GAAar6C,MAAMO,KAAMsF,YAGlC2yC,GAAO53C,UAAUw9C,OAAS,SAAiBl5C,GACzC,IAAKw0C,GAAiBx0C,GAAI,MAAM,IAAIsE,UAAU,6BAC9C,OAAIjJ,OAAS2E,GACsB,IAA5BszC,GAAOsF,QAAQv9C,KAAM2E,IAG9BszC,GAAO53C,UAAUy9C,QAAU,WACzB,IAAIpC,EAAM,GAMV,OAJI17C,KAAKc,OAAS,IAChB46C,EAAM17C,KAAK63C,SAAS,MAAO,EA9jBA,IA8jBQkG,MAAM,SAASpH,KAAK,KACnD32C,KAAKc,OA/jBkB,KA+jBJ46C,GAAO,UAEzB,WAAaA,EAAM,KAG5BzD,GAAO53C,UAAUk9C,QAAU,SAAkB73C,EAAQ4/B,EAAO6M,EAAK6L,EAAWC,GAC1E,IAAK9E,GAAiBzzC,GACpB,MAAM,IAAIuD,UAAU,6BAgBtB,QAbclI,IAAVukC,IACFA,EAAQ,QAEEvkC,IAARoxC,IACFA,EAAMzsC,EAASA,EAAO5E,OAAS,QAEfC,IAAdi9C,IACFA,EAAY,QAEEj9C,IAAZk9C,IACFA,EAAUj+C,KAAKc,QAGbwkC,EAAQ,GAAK6M,EAAMzsC,EAAO5E,QAAUk9C,EAAY,GAAKC,EAAUj+C,KAAKc,OACtE,MAAM,IAAIu3C,WAAW,sBAGvB,GAAI2F,GAAaC,GAAW3Y,GAAS6M,EACnC,OAAO,EAET,GAAI6L,GAAaC,EACf,OAAQ,EAEV,GAAI3Y,GAAS6M,EACX,OAAO,EAQT,GAAInyC,OAAS0F,EAAQ,OAAO,EAS5B,IAPA,IAAIiT,GAJJslC,KAAa,IADbD,KAAe,GAMX11C,GAPJ6pC,KAAS,IADT7M,KAAW,GASPgF,EAAMrU,KAAKsU,IAAI5xB,EAAGrQ,GAElB41C,EAAWl+C,KAAK+hC,MAAMic,EAAWC,GACjCE,EAAaz4C,EAAOq8B,MAAMuD,EAAO6M,GAE5B9yC,EAAI,EAAGA,EAAIirC,IAAOjrC,EACzB,GAAI6+C,EAAS7+C,KAAO8+C,EAAW9+C,GAAI,CACjCsZ,EAAIulC,EAAS7+C,GACbiJ,EAAI61C,EAAW9+C,GACf,MAIJ,OAAIsZ,EAAIrQ,GAAW,EACfA,EAAIqQ,EAAU,EACX,GA6HTs/B,GAAO53C,UAAU+9C,SAAW,SAAmB/E,EAAKV,EAAYI,GAC9D,OAAoD,IAA7C/4C,KAAK+H,QAAQsxC,EAAKV,EAAYI,IAGvCd,GAAO53C,UAAU0H,QAAU,SAAkBsxC,EAAKV,EAAYI,GAC5D,OAAOuB,GAAqBt6C,KAAMq5C,EAAKV,EAAYI,GAAU,IAG/Dd,GAAO53C,UAAUm6C,YAAc,SAAsBnB,EAAKV,EAAYI,GACpE,OAAOuB,GAAqBt6C,KAAMq5C,EAAKV,EAAYI,GAAU,IAkD/Dd,GAAO53C,UAAUoR,MAAQ,SAAgBqnC,EAAQrrB,EAAQ3sB,EAAQi4C,GAE/D,QAAeh4C,IAAX0sB,EACFsrB,EAAW,OACXj4C,EAASd,KAAKc,OACd2sB,EAAS,OAEJ,QAAe1sB,IAAXD,GAA0C,iBAAX2sB,EACxCsrB,EAAWtrB,EACX3sB,EAASd,KAAKc,OACd2sB,EAAS,MAEJ,CAAA,IAAI4wB,SAAS5wB,GAWlB,MAAM,IAAIvqB,MACR,2EAXFuqB,GAAkB,EACd4wB,SAASv9C,IACXA,GAAkB,OACDC,IAAbg4C,IAAwBA,EAAW,UAEvCA,EAAWj4C,EACXA,OAASC,GASb,IAAIm6C,EAAYl7C,KAAKc,OAAS2sB,EAG9B,SAFe1sB,IAAXD,GAAwBA,EAASo6C,KAAWp6C,EAASo6C,GAEpDpC,EAAOh4C,OAAS,IAAMA,EAAS,GAAK2sB,EAAS,IAAOA,EAASztB,KAAKc,OACrE,MAAM,IAAIu3C,WAAW,0CAGlBU,IAAUA,EAAW,QAG1B,IADA,IAAIW,GAAc,IAEhB,OAAQX,GACN,IAAK,MACH,OAAOiC,GAASh7C,KAAM84C,EAAQrrB,EAAQ3sB,GAExC,IAAK,OACL,IAAK,QACH,OAAOy6C,GAAUv7C,KAAM84C,EAAQrrB,EAAQ3sB,GAEzC,IAAK,QACH,OAAO26C,GAAWz7C,KAAM84C,EAAQrrB,EAAQ3sB,GAE1C,IAAK,SACL,IAAK,SACH,OAAO+6C,GAAY77C,KAAM84C,EAAQrrB,EAAQ3sB,GAE3C,IAAK,SAEH,OAAOg7C,GAAY97C,KAAM84C,EAAQrrB,EAAQ3sB,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOi7C,GAAU/7C,KAAM84C,EAAQrrB,EAAQ3sB,GAEzC,QACE,GAAI44C,EAAa,MAAM,IAAIzwC,UAAU,qBAAuB8vC,GAC5DA,GAAY,GAAKA,GAAUc,cAC3BH,GAAc,IAKtBzB,GAAO53C,UAAUi+C,OAAS,WACxB,MAAO,CACLz8C,KAAM,SACNwC,KAAMS,MAAMzE,UAAU0hC,MAAMx8B,KAAKvF,KAAKu+C,MAAQv+C,KAAM,KA4GxD,SAASi6C,GAAYW,EAAKtV,EAAO6M,GAC/B,IAAIqM,EAAM,GACVrM,EAAMlc,KAAKsU,IAAIqQ,EAAI95C,OAAQqxC,GAE3B,IAAK,IAAI9yC,EAAIimC,EAAOjmC,EAAI8yC,IAAO9yC,EAC7Bm/C,GAAO9d,OAAOgE,aAAsB,IAATkW,EAAIv7C,IAEjC,OAAOm/C,EAGT,SAAStE,GAAaU,EAAKtV,EAAO6M,GAChC,IAAIqM,EAAM,GACVrM,EAAMlc,KAAKsU,IAAIqQ,EAAI95C,OAAQqxC,GAE3B,IAAK,IAAI9yC,EAAIimC,EAAOjmC,EAAI8yC,IAAO9yC,EAC7Bm/C,GAAO9d,OAAOgE,aAAakW,EAAIv7C,IAEjC,OAAOm/C,EAGT,SAASzE,GAAUa,EAAKtV,EAAO6M,GAC7B,IAAI7H,EAAMsQ,EAAI95C,SAETwkC,GAASA,EAAQ,KAAGA,EAAQ,KAC5B6M,GAAOA,EAAM,GAAKA,EAAM7H,KAAK6H,EAAM7H,GAGxC,IADA,IAAI9G,EAAM,GACDnkC,EAAIimC,EAAOjmC,EAAI8yC,IAAO9yC,EAC7BmkC,GAAOib,GAAM7D,EAAIv7C,IAEnB,OAAOmkC,EAGT,SAAS4W,GAAcQ,EAAKtV,EAAO6M,GAGjC,IAFA,IAAIuM,EAAQ9D,EAAI7Y,MAAMuD,EAAO6M,GACzBkK,EAAM,GACDh9C,EAAI,EAAGA,EAAIq/C,EAAM59C,OAAQzB,GAAK,EACrCg9C,GAAO3b,OAAOgE,aAAaga,EAAMr/C,GAAoB,IAAfq/C,EAAMr/C,EAAI,IAElD,OAAOg9C,EA0CT,SAASsC,GAAalxB,EAAQmxB,EAAK99C,GACjC,GAAK2sB,EAAS,GAAO,GAAKA,EAAS,EAAG,MAAM,IAAI4qB,WAAW,sBAC3D,GAAI5qB,EAASmxB,EAAM99C,EAAQ,MAAM,IAAIu3C,WAAW,yCA+JlD,SAASwG,GAAUjE,EAAK97C,EAAO2uB,EAAQmxB,EAAKzc,EAAKoI,GAC/C,IAAK4O,GAAiByB,GAAM,MAAM,IAAI3xC,UAAU,+CAChD,GAAInK,EAAQqjC,GAAOrjC,EAAQyrC,EAAK,MAAM,IAAI8N,WAAW,qCACrD,GAAI5qB,EAASmxB,EAAMhE,EAAI95C,OAAQ,MAAM,IAAIu3C,WAAW,sBAkDtD,SAASyG,GAAmBlE,EAAK97C,EAAO2uB,EAAQsxB,GAC1CjgD,EAAQ,IAAGA,EAAQ,MAASA,EAAQ,GACxC,IAAK,IAAIO,EAAI,EAAGiK,EAAI2sB,KAAKsU,IAAIqQ,EAAI95C,OAAS2sB,EAAQ,GAAIpuB,EAAIiK,IAAKjK,EAC7Du7C,EAAIntB,EAASpuB,IAAMP,EAAS,KAAS,GAAKigD,EAAe1/C,EAAI,EAAIA,MAClC,GAA5B0/C,EAAe1/C,EAAI,EAAIA,GA8B9B,SAAS2/C,GAAmBpE,EAAK97C,EAAO2uB,EAAQsxB,GAC1CjgD,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5C,IAAK,IAAIO,EAAI,EAAGiK,EAAI2sB,KAAKsU,IAAIqQ,EAAI95C,OAAS2sB,EAAQ,GAAIpuB,EAAIiK,IAAKjK,EAC7Du7C,EAAIntB,EAASpuB,GAAMP,IAAuC,GAA5BigD,EAAe1/C,EAAI,EAAIA,GAAU,IAmJnE,SAAS4/C,GAAcrE,EAAK97C,EAAO2uB,EAAQmxB,EAAKzc,EAAKoI,GACnD,GAAI9c,EAASmxB,EAAMhE,EAAI95C,OAAQ,MAAM,IAAIu3C,WAAW,sBACpD,GAAI5qB,EAAS,EAAG,MAAM,IAAI4qB,WAAW,sBAGvC,SAAS6G,GAAYtE,EAAK97C,EAAO2uB,EAAQsxB,EAAcI,GAKrD,OAJKA,GACHF,GAAarE,EAAK97C,EAAO2uB,EAAQ,GAEnC2xB,GAAcxE,EAAK97C,EAAO2uB,EAAQsxB,EAAc,GAAI,GAC7CtxB,EAAS,EAWlB,SAAS4xB,GAAazE,EAAK97C,EAAO2uB,EAAQsxB,EAAcI,GAKtD,OAJKA,GACHF,GAAarE,EAAK97C,EAAO2uB,EAAQ,GAEnC2xB,GAAcxE,EAAK97C,EAAO2uB,EAAQsxB,EAAc,GAAI,GAC7CtxB,EAAS,EA/clBwqB,GAAO53C,UAAU0hC,MAAQ,SAAgBuD,EAAO6M,GAC9C,IAoBImN,EApBAhV,EAAMtqC,KAAKc,OAqBf,IApBAwkC,IAAUA,GAGE,GACVA,GAASgF,GACG,IAAGhF,EAAQ,GACdA,EAAQgF,IACjBhF,EAAQgF,IANV6H,OAAcpxC,IAARoxC,EAAoB7H,IAAQ6H,GASxB,GACRA,GAAO7H,GACG,IAAG6H,EAAM,GACVA,EAAM7H,IACf6H,EAAM7H,GAGJ6H,EAAM7M,IAAO6M,EAAM7M,GAGnB2S,GAAOC,qBACToH,EAASt/C,KAAKu/C,SAASja,EAAO6M,IACvBttC,UAAYozC,GAAO53C,cACrB,CACL,IAAIm/C,EAAWrN,EAAM7M,EACrBga,EAAS,IAAIrH,GAAOuH,OAAUz+C,GAC9B,IAAK,IAAI1B,EAAI,EAAGA,EAAImgD,IAAYngD,EAC9BigD,EAAOjgD,GAAKW,KAAKX,EAAIimC,GAIzB,OAAOga,GAWTrH,GAAO53C,UAAUo/C,WAAa,SAAqBhyB,EAAQ3hB,EAAYqzC,GACrE1xB,GAAkB,EAClB3hB,GAA0B,EACrBqzC,GAAUR,GAAYlxB,EAAQ3hB,EAAY9L,KAAKc,QAKpD,IAHA,IAAIu4C,EAAMr5C,KAAKytB,GACXiyB,EAAM,EACNrgD,EAAI,IACCA,EAAIyM,IAAe4zC,GAAO,MACjCrG,GAAOr5C,KAAKytB,EAASpuB,GAAKqgD,EAG5B,OAAOrG,GAGTpB,GAAO53C,UAAUs/C,WAAa,SAAqBlyB,EAAQ3hB,EAAYqzC,GACrE1xB,GAAkB,EAClB3hB,GAA0B,EACrBqzC,GACHR,GAAYlxB,EAAQ3hB,EAAY9L,KAAKc,QAKvC,IAFA,IAAIu4C,EAAMr5C,KAAKytB,IAAW3hB,GACtB4zC,EAAM,EACH5zC,EAAa,IAAM4zC,GAAO,MAC/BrG,GAAOr5C,KAAKytB,IAAW3hB,GAAc4zC,EAGvC,OAAOrG,GAGTpB,GAAO53C,UAAUu/C,UAAY,SAAoBnyB,EAAQ0xB,GAEvD,OADKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QACpCd,KAAKytB,IAGdwqB,GAAO53C,UAAUw/C,aAAe,SAAuBpyB,EAAQ0xB,GAE7D,OADKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QACpCd,KAAKytB,GAAWztB,KAAKytB,EAAS,IAAM,GAG7CwqB,GAAO53C,UAAUw6C,aAAe,SAAuBptB,EAAQ0xB,GAE7D,OADKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QACnCd,KAAKytB,IAAW,EAAKztB,KAAKytB,EAAS,IAG7CwqB,GAAO53C,UAAUy/C,aAAe,SAAuBryB,EAAQ0xB,GAG7D,OAFKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,SAElCd,KAAKytB,GACTztB,KAAKytB,EAAS,IAAM,EACpBztB,KAAKytB,EAAS,IAAM,IACD,SAAnBztB,KAAKytB,EAAS,IAGrBwqB,GAAO53C,UAAU0/C,aAAe,SAAuBtyB,EAAQ0xB,GAG7D,OAFKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QAEpB,SAAfd,KAAKytB,IACTztB,KAAKytB,EAAS,IAAM,GACrBztB,KAAKytB,EAAS,IAAM,EACrBztB,KAAKytB,EAAS,KAGlBwqB,GAAO53C,UAAU2/C,UAAY,SAAoBvyB,EAAQ3hB,EAAYqzC,GACnE1xB,GAAkB,EAClB3hB,GAA0B,EACrBqzC,GAAUR,GAAYlxB,EAAQ3hB,EAAY9L,KAAKc,QAKpD,IAHA,IAAIu4C,EAAMr5C,KAAKytB,GACXiyB,EAAM,EACNrgD,EAAI,IACCA,EAAIyM,IAAe4zC,GAAO,MACjCrG,GAAOr5C,KAAKytB,EAASpuB,GAAKqgD,EAM5B,OAFIrG,IAFJqG,GAAO,OAESrG,GAAOpjB,KAAK0M,IAAI,EAAG,EAAI72B,IAEhCutC,GAGTpB,GAAO53C,UAAU4/C,UAAY,SAAoBxyB,EAAQ3hB,EAAYqzC,GACnE1xB,GAAkB,EAClB3hB,GAA0B,EACrBqzC,GAAUR,GAAYlxB,EAAQ3hB,EAAY9L,KAAKc,QAKpD,IAHA,IAAIzB,EAAIyM,EACJ4zC,EAAM,EACNrG,EAAMr5C,KAAKytB,IAAWpuB,GACnBA,EAAI,IAAMqgD,GAAO,MACtBrG,GAAOr5C,KAAKytB,IAAWpuB,GAAKqgD,EAM9B,OAFIrG,IAFJqG,GAAO,OAESrG,GAAOpjB,KAAK0M,IAAI,EAAG,EAAI72B,IAEhCutC,GAGTpB,GAAO53C,UAAU6/C,SAAW,SAAmBzyB,EAAQ0xB,GAErD,OADKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QACtB,IAAfd,KAAKytB,IAC0B,GAA5B,IAAOztB,KAAKytB,GAAU,GADKztB,KAAKytB,IAI3CwqB,GAAO53C,UAAU8/C,YAAc,SAAsB1yB,EAAQ0xB,GACtDA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QAC3C,IAAIu4C,EAAMr5C,KAAKytB,GAAWztB,KAAKytB,EAAS,IAAM,EAC9C,OAAc,MAAN4rB,EAAsB,WAANA,EAAmBA,GAG7CpB,GAAO53C,UAAU+/C,YAAc,SAAsB3yB,EAAQ0xB,GACtDA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QAC3C,IAAIu4C,EAAMr5C,KAAKytB,EAAS,GAAMztB,KAAKytB,IAAW,EAC9C,OAAc,MAAN4rB,EAAsB,WAANA,EAAmBA,GAG7CpB,GAAO53C,UAAUggD,YAAc,SAAsB5yB,EAAQ0xB,GAG3D,OAFKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QAEnCd,KAAKytB,GACVztB,KAAKytB,EAAS,IAAM,EACpBztB,KAAKytB,EAAS,IAAM,GACpBztB,KAAKytB,EAAS,IAAM,IAGzBwqB,GAAO53C,UAAUigD,YAAc,SAAsB7yB,EAAQ0xB,GAG3D,OAFKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QAEnCd,KAAKytB,IAAW,GACrBztB,KAAKytB,EAAS,IAAM,GACpBztB,KAAKytB,EAAS,IAAM,EACpBztB,KAAKytB,EAAS,IAGnBwqB,GAAO53C,UAAUg9C,YAAc,SAAsB5vB,EAAQ0xB,GAE3D,OADKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QACpCy/C,GAAavgD,KAAMytB,GAAQ,EAAM,GAAI,IAG9CwqB,GAAO53C,UAAUmgD,YAAc,SAAsB/yB,EAAQ0xB,GAE3D,OADKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QACpCy/C,GAAavgD,KAAMytB,GAAQ,EAAO,GAAI,IAG/CwqB,GAAO53C,UAAUogD,aAAe,SAAuBhzB,EAAQ0xB,GAE7D,OADKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QACpCy/C,GAAavgD,KAAMytB,GAAQ,EAAM,GAAI,IAG9CwqB,GAAO53C,UAAUqgD,aAAe,SAAuBjzB,EAAQ0xB,GAE7D,OADKA,GAAUR,GAAYlxB,EAAQ,EAAGztB,KAAKc,QACpCy/C,GAAavgD,KAAMytB,GAAQ,EAAO,GAAI,IAS/CwqB,GAAO53C,UAAUsgD,YAAc,SAAsB7hD,EAAO2uB,EAAQ3hB,EAAYqzC,IAC9ErgD,GAASA,EACT2uB,GAAkB,EAClB3hB,GAA0B,EACrBqzC,IAEHN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ3hB,EADfmqB,KAAK0M,IAAI,EAAG,EAAI72B,GAAc,EACO,GAGtD,IAAI4zC,EAAM,EACNrgD,EAAI,EAER,IADAW,KAAKytB,GAAkB,IAAR3uB,IACNO,EAAIyM,IAAe4zC,GAAO,MACjC1/C,KAAKytB,EAASpuB,GAAMP,EAAQ4gD,EAAO,IAGrC,OAAOjyB,EAAS3hB,GAGlBmsC,GAAO53C,UAAUugD,YAAc,SAAsB9hD,EAAO2uB,EAAQ3hB,EAAYqzC,IAC9ErgD,GAASA,EACT2uB,GAAkB,EAClB3hB,GAA0B,EACrBqzC,IAEHN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ3hB,EADfmqB,KAAK0M,IAAI,EAAG,EAAI72B,GAAc,EACO,GAGtD,IAAIzM,EAAIyM,EAAa,EACjB4zC,EAAM,EAEV,IADA1/C,KAAKytB,EAASpuB,GAAa,IAARP,IACVO,GAAK,IAAMqgD,GAAO,MACzB1/C,KAAKytB,EAASpuB,GAAMP,EAAQ4gD,EAAO,IAGrC,OAAOjyB,EAAS3hB,GAGlBmsC,GAAO53C,UAAUwgD,WAAa,SAAqB/hD,EAAO2uB,EAAQ0xB,GAMhE,OALArgD,GAASA,EACT2uB,GAAkB,EACb0xB,GAAUN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ,EAAG,IAAM,GACjDwqB,GAAOC,sBAAqBp5C,EAAQm3B,KAAKoM,MAAMvjC,IACpDkB,KAAKytB,GAAmB,IAAR3uB,EACT2uB,EAAS,GAWlBwqB,GAAO53C,UAAUygD,cAAgB,SAAwBhiD,EAAO2uB,EAAQ0xB,GAUtE,OATArgD,GAASA,EACT2uB,GAAkB,EACb0xB,GAAUN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ,EAAG,MAAQ,GACpDwqB,GAAOC,qBACTl4C,KAAKytB,GAAmB,IAAR3uB,EAChBkB,KAAKytB,EAAS,GAAM3uB,IAAU,GAE9BggD,GAAkB9+C,KAAMlB,EAAO2uB,GAAQ,GAElCA,EAAS,GAGlBwqB,GAAO53C,UAAU0gD,cAAgB,SAAwBjiD,EAAO2uB,EAAQ0xB,GAUtE,OATArgD,GAASA,EACT2uB,GAAkB,EACb0xB,GAAUN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ,EAAG,MAAQ,GACpDwqB,GAAOC,qBACTl4C,KAAKytB,GAAW3uB,IAAU,EAC1BkB,KAAKytB,EAAS,GAAc,IAAR3uB,GAEpBggD,GAAkB9+C,KAAMlB,EAAO2uB,GAAQ,GAElCA,EAAS,GAUlBwqB,GAAO53C,UAAU2gD,cAAgB,SAAwBliD,EAAO2uB,EAAQ0xB,GAYtE,OAXArgD,GAASA,EACT2uB,GAAkB,EACb0xB,GAAUN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ,EAAG,WAAY,GACxDwqB,GAAOC,qBACTl4C,KAAKytB,EAAS,GAAM3uB,IAAU,GAC9BkB,KAAKytB,EAAS,GAAM3uB,IAAU,GAC9BkB,KAAKytB,EAAS,GAAM3uB,IAAU,EAC9BkB,KAAKytB,GAAmB,IAAR3uB,GAEhBkgD,GAAkBh/C,KAAMlB,EAAO2uB,GAAQ,GAElCA,EAAS,GAGlBwqB,GAAO53C,UAAU4gD,cAAgB,SAAwBniD,EAAO2uB,EAAQ0xB,GAYtE,OAXArgD,GAASA,EACT2uB,GAAkB,EACb0xB,GAAUN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ,EAAG,WAAY,GACxDwqB,GAAOC,qBACTl4C,KAAKytB,GAAW3uB,IAAU,GAC1BkB,KAAKytB,EAAS,GAAM3uB,IAAU,GAC9BkB,KAAKytB,EAAS,GAAM3uB,IAAU,EAC9BkB,KAAKytB,EAAS,GAAc,IAAR3uB,GAEpBkgD,GAAkBh/C,KAAMlB,EAAO2uB,GAAQ,GAElCA,EAAS,GAGlBwqB,GAAO53C,UAAU6gD,WAAa,SAAqBpiD,EAAO2uB,EAAQ3hB,EAAYqzC,GAG5E,GAFArgD,GAASA,EACT2uB,GAAkB,GACb0xB,EAAU,CACb,IAAIjd,EAAQjM,KAAK0M,IAAI,EAAG,EAAI72B,EAAa,GAEzC+yC,GAAS7+C,KAAMlB,EAAO2uB,EAAQ3hB,EAAYo2B,EAAQ,GAAIA,GAGxD,IAAI7iC,EAAI,EACJqgD,EAAM,EACNyB,EAAM,EAEV,IADAnhD,KAAKytB,GAAkB,IAAR3uB,IACNO,EAAIyM,IAAe4zC,GAAO,MAC7B5gD,EAAQ,GAAa,IAARqiD,GAAsC,IAAzBnhD,KAAKytB,EAASpuB,EAAI,KAC9C8hD,EAAM,GAERnhD,KAAKytB,EAASpuB,IAAOP,EAAQ4gD,GAAQ,GAAKyB,EAAM,IAGlD,OAAO1zB,EAAS3hB,GAGlBmsC,GAAO53C,UAAU+gD,WAAa,SAAqBtiD,EAAO2uB,EAAQ3hB,EAAYqzC,GAG5E,GAFArgD,GAASA,EACT2uB,GAAkB,GACb0xB,EAAU,CACb,IAAIjd,EAAQjM,KAAK0M,IAAI,EAAG,EAAI72B,EAAa,GAEzC+yC,GAAS7+C,KAAMlB,EAAO2uB,EAAQ3hB,EAAYo2B,EAAQ,GAAIA,GAGxD,IAAI7iC,EAAIyM,EAAa,EACjB4zC,EAAM,EACNyB,EAAM,EAEV,IADAnhD,KAAKytB,EAASpuB,GAAa,IAARP,IACVO,GAAK,IAAMqgD,GAAO,MACrB5gD,EAAQ,GAAa,IAARqiD,GAAsC,IAAzBnhD,KAAKytB,EAASpuB,EAAI,KAC9C8hD,EAAM,GAERnhD,KAAKytB,EAASpuB,IAAOP,EAAQ4gD,GAAQ,GAAKyB,EAAM,IAGlD,OAAO1zB,EAAS3hB,GAGlBmsC,GAAO53C,UAAUghD,UAAY,SAAoBviD,EAAO2uB,EAAQ0xB,GAO9D,OANArgD,GAASA,EACT2uB,GAAkB,EACb0xB,GAAUN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ,EAAG,KAAO,KAClDwqB,GAAOC,sBAAqBp5C,EAAQm3B,KAAKoM,MAAMvjC,IAChDA,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCkB,KAAKytB,GAAmB,IAAR3uB,EACT2uB,EAAS,GAGlBwqB,GAAO53C,UAAUihD,aAAe,SAAuBxiD,EAAO2uB,EAAQ0xB,GAUpE,OATArgD,GAASA,EACT2uB,GAAkB,EACb0xB,GAAUN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ,EAAG,OAAS,OACrDwqB,GAAOC,qBACTl4C,KAAKytB,GAAmB,IAAR3uB,EAChBkB,KAAKytB,EAAS,GAAM3uB,IAAU,GAE9BggD,GAAkB9+C,KAAMlB,EAAO2uB,GAAQ,GAElCA,EAAS,GAGlBwqB,GAAO53C,UAAUkhD,aAAe,SAAuBziD,EAAO2uB,EAAQ0xB,GAUpE,OATArgD,GAASA,EACT2uB,GAAkB,EACb0xB,GAAUN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ,EAAG,OAAS,OACrDwqB,GAAOC,qBACTl4C,KAAKytB,GAAW3uB,IAAU,EAC1BkB,KAAKytB,EAAS,GAAc,IAAR3uB,GAEpBggD,GAAkB9+C,KAAMlB,EAAO2uB,GAAQ,GAElCA,EAAS,GAGlBwqB,GAAO53C,UAAUmhD,aAAe,SAAuB1iD,EAAO2uB,EAAQ0xB,GAYpE,OAXArgD,GAASA,EACT2uB,GAAkB,EACb0xB,GAAUN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ,EAAG,YAAa,YACzDwqB,GAAOC,qBACTl4C,KAAKytB,GAAmB,IAAR3uB,EAChBkB,KAAKytB,EAAS,GAAM3uB,IAAU,EAC9BkB,KAAKytB,EAAS,GAAM3uB,IAAU,GAC9BkB,KAAKytB,EAAS,GAAM3uB,IAAU,IAE9BkgD,GAAkBh/C,KAAMlB,EAAO2uB,GAAQ,GAElCA,EAAS,GAGlBwqB,GAAO53C,UAAUohD,aAAe,SAAuB3iD,EAAO2uB,EAAQ0xB,GAapE,OAZArgD,GAASA,EACT2uB,GAAkB,EACb0xB,GAAUN,GAAS7+C,KAAMlB,EAAO2uB,EAAQ,EAAG,YAAa,YACzD3uB,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GACxCm5C,GAAOC,qBACTl4C,KAAKytB,GAAW3uB,IAAU,GAC1BkB,KAAKytB,EAAS,GAAM3uB,IAAU,GAC9BkB,KAAKytB,EAAS,GAAM3uB,IAAU,EAC9BkB,KAAKytB,EAAS,GAAc,IAAR3uB,GAEpBkgD,GAAkBh/C,KAAMlB,EAAO2uB,GAAQ,GAElCA,EAAS,GAgBlBwqB,GAAO53C,UAAUqhD,aAAe,SAAuB5iD,EAAO2uB,EAAQ0xB,GACpE,OAAOD,GAAWl/C,KAAMlB,EAAO2uB,GAAQ,EAAM0xB,IAG/ClH,GAAO53C,UAAUshD,aAAe,SAAuB7iD,EAAO2uB,EAAQ0xB,GACpE,OAAOD,GAAWl/C,KAAMlB,EAAO2uB,GAAQ,EAAO0xB,IAWhDlH,GAAO53C,UAAUuhD,cAAgB,SAAwB9iD,EAAO2uB,EAAQ0xB,GACtE,OAAOE,GAAYr/C,KAAMlB,EAAO2uB,GAAQ,EAAM0xB,IAGhDlH,GAAO53C,UAAUwhD,cAAgB,SAAwB/iD,EAAO2uB,EAAQ0xB,GACtE,OAAOE,GAAYr/C,KAAMlB,EAAO2uB,GAAQ,EAAO0xB,IAIjDlH,GAAO53C,UAAUygC,KAAO,SAAep7B,EAAQo8C,EAAaxc,EAAO6M,GAQjE,GAPK7M,IAAOA,EAAQ,GACf6M,GAAe,IAARA,IAAWA,EAAMnyC,KAAKc,QAC9BghD,GAAep8C,EAAO5E,SAAQghD,EAAcp8C,EAAO5E,QAClDghD,IAAaA,EAAc,GAC5B3P,EAAM,GAAKA,EAAM7M,IAAO6M,EAAM7M,GAG9B6M,IAAQ7M,EAAO,OAAO,EAC1B,GAAsB,IAAlB5/B,EAAO5E,QAAgC,IAAhBd,KAAKc,OAAc,OAAO,EAGrD,GAAIghD,EAAc,EAChB,MAAM,IAAIzJ,WAAW,6BAEvB,GAAI/S,EAAQ,GAAKA,GAAStlC,KAAKc,OAAQ,MAAM,IAAIu3C,WAAW,6BAC5D,GAAIlG,EAAM,EAAG,MAAM,IAAIkG,WAAW,2BAG9BlG,EAAMnyC,KAAKc,SAAQqxC,EAAMnyC,KAAKc,QAC9B4E,EAAO5E,OAASghD,EAAc3P,EAAM7M,IACtC6M,EAAMzsC,EAAO5E,OAASghD,EAAcxc,GAGtC,IACIjmC,EADAirC,EAAM6H,EAAM7M,EAGhB,GAAItlC,OAAS0F,GAAU4/B,EAAQwc,GAAeA,EAAc3P,EAE1D,IAAK9yC,EAAIirC,EAAM,EAAGjrC,GAAK,IAAKA,EAC1BqG,EAAOrG,EAAIyiD,GAAe9hD,KAAKX,EAAIimC,QAEhC,GAAIgF,EAAM,MAAS2N,GAAOC,oBAE/B,IAAK74C,EAAI,EAAGA,EAAIirC,IAAOjrC,EACrBqG,EAAOrG,EAAIyiD,GAAe9hD,KAAKX,EAAIimC,QAGrC1yB,WAAWvS,UAAUuM,IAAIrH,KACvBG,EACA1F,KAAKu/C,SAASja,EAAOA,EAAQgF,GAC7BwX,GAIJ,OAAOxX,GAOT2N,GAAO53C,UAAU6O,KAAO,SAAemqC,EAAK/T,EAAO6M,EAAK4G,GAEtD,GAAmB,iBAARM,EAAkB,CAS3B,GARqB,iBAAV/T,GACTyT,EAAWzT,EACXA,EAAQ,EACR6M,EAAMnyC,KAAKc,QACa,iBAARqxC,IAChB4G,EAAW5G,EACXA,EAAMnyC,KAAKc,QAEM,IAAfu4C,EAAIv4C,OAAc,CACpB,IAAIu1C,EAAOgD,EAAIztB,WAAW,GACtByqB,EAAO,MACTgD,EAAMhD,GAGV,QAAiBt1C,IAAbg4C,GAA8C,iBAAbA,EACnC,MAAM,IAAI9vC,UAAU,6BAEtB,GAAwB,iBAAb8vC,IAA0Bd,GAAOe,WAAWD,GACrD,MAAM,IAAI9vC,UAAU,qBAAuB8vC,OAErB,iBAARM,IAChBA,GAAY,KAId,GAAI/T,EAAQ,GAAKtlC,KAAKc,OAASwkC,GAAStlC,KAAKc,OAASqxC,EACpD,MAAM,IAAIkG,WAAW,sBAGvB,GAAIlG,GAAO7M,EACT,OAAOtlC,KAQT,IAAIX,EACJ,GANAimC,KAAkB,EAClB6M,OAAcpxC,IAARoxC,EAAoBnyC,KAAKc,OAASqxC,IAAQ,EAE3CkH,IAAKA,EAAM,GAGG,iBAARA,EACT,IAAKh6C,EAAIimC,EAAOjmC,EAAI8yC,IAAO9yC,EACzBW,KAAKX,GAAKg6C,MAEP,CACL,IAAIqF,EAAQvF,GAAiBE,GACzBA,EACAM,GAAY,IAAI1B,GAAOoB,EAAKN,GAAUlB,YACtCvN,EAAMoU,EAAM59C,OAChB,IAAKzB,EAAI,EAAGA,EAAI8yC,EAAM7M,IAASjmC,EAC7BW,KAAKX,EAAIimC,GAASoZ,EAAMr/C,EAAIirC,GAIhC,OAAOtqC,MAMT,IAAI+hD,GAAoB,qBAmBxB,SAAStD,GAAOp5C,GACd,OAAIA,EAAI,GAAW,IAAMA,EAAEwyC,SAAS,IAC7BxyC,EAAEwyC,SAAS,IAGpB,SAAS8B,GAAab,EAAQkD,GAE5B,IAAIW,EADJX,EAAQA,GAASxE,EAAAA,EAMjB,IAJA,IAAI12C,EAASg4C,EAAOh4C,OAChBkhD,EAAgB,KAChBtD,EAAQ,GAEHr/C,EAAI,EAAGA,EAAIyB,IAAUzB,EAAG,CAI/B,IAHAs9C,EAAY7D,EAAOltB,WAAWvsB,IAGd,OAAUs9C,EAAY,MAAQ,CAE5C,IAAKqF,EAAe,CAElB,GAAIrF,EAAY,MAAQ,EAEjBX,GAAS,IAAM,GAAG0C,EAAMp/C,KAAK,IAAM,IAAM,KAC9C,SACK,GAAID,EAAI,IAAMyB,EAAQ,EAEtBk7C,GAAS,IAAM,GAAG0C,EAAMp/C,KAAK,IAAM,IAAM,KAC9C,SAIF0iD,EAAgBrF,EAEhB,SAIF,GAAIA,EAAY,MAAQ,EACjBX,GAAS,IAAM,GAAG0C,EAAMp/C,KAAK,IAAM,IAAM,KAC9C0iD,EAAgBrF,EAChB,SAIFA,EAAkE,OAArDqF,EAAgB,OAAU,GAAKrF,EAAY,YAC/CqF,IAEJhG,GAAS,IAAM,GAAG0C,EAAMp/C,KAAK,IAAM,IAAM,KAMhD,GAHA0iD,EAAgB,KAGZrF,EAAY,IAAM,CACpB,IAAKX,GAAS,GAAK,EAAG,MACtB0C,EAAMp/C,KAAKq9C,QACN,GAAIA,EAAY,KAAO,CAC5B,IAAKX,GAAS,GAAK,EAAG,MACtB0C,EAAMp/C,KACJq9C,GAAa,EAAM,IACP,GAAZA,EAAmB,UAEhB,GAAIA,EAAY,MAAS,CAC9B,IAAKX,GAAS,GAAK,EAAG,MACtB0C,EAAMp/C,KACJq9C,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,SAEhB,CAAA,KAAIA,EAAY,SASrB,MAAM,IAAIz5C,MAAM,sBARhB,IAAK84C,GAAS,GAAK,EAAG,MACtB0C,EAAMp/C,KACJq9C,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,MAOzB,OAAO+B,EA6BT,SAAS9E,GAAe8B,GACtB,OHjuDK,SAAsBuG,GAI3B,IAAI5iD,EAAGiK,EAAG44C,EAAG1L,EAAK2L,EAAcpK,EAH3B3B,IACHhoC,KAGF,IAAIk8B,EAAM2X,EAAInhD,OAEd,GAAIwpC,EAAM,EAAI,EACZ,MAAM,IAAIpnC,MAAM,kDAQlBi/C,EAAgC,MAAjBF,EAAI3X,EAAM,GAAa,EAAqB,MAAjB2X,EAAI3X,EAAM,GAAa,EAAI,EAGrEyN,EAAM,IAAI5B,GAAU,EAAN7L,EAAU,EAAI6X,GAG5BD,EAAIC,EAAe,EAAI7X,EAAM,EAAIA,EAEjC,IAAI8X,EAAI,EAER,IAAK/iD,EAAI,EAAGiK,EAAI,EAAGjK,EAAI6iD,EAAG7iD,GAAK,EAAGiK,GAAK,EACrCktC,EAAON,GAAU+L,EAAIr2B,WAAWvsB,KAAO,GAAO62C,GAAU+L,EAAIr2B,WAAWvsB,EAAI,KAAO,GAAO62C,GAAU+L,EAAIr2B,WAAWvsB,EAAI,KAAO,EAAK62C,GAAU+L,EAAIr2B,WAAWvsB,EAAI,IAC/J04C,EAAIqK,KAAQ5L,GAAO,GAAM,IACzBuB,EAAIqK,KAAQ5L,GAAO,EAAK,IACxBuB,EAAIqK,KAAa,IAAN5L,EAYb,OATqB,IAAjB2L,GACF3L,EAAON,GAAU+L,EAAIr2B,WAAWvsB,KAAO,EAAM62C,GAAU+L,EAAIr2B,WAAWvsB,EAAI,KAAO,EACjF04C,EAAIqK,KAAa,IAAN5L,GACe,IAAjB2L,IACT3L,EAAON,GAAU+L,EAAIr2B,WAAWvsB,KAAO,GAAO62C,GAAU+L,EAAIr2B,WAAWvsB,EAAI,KAAO,EAAM62C,GAAU+L,EAAIr2B,WAAWvsB,EAAI,KAAO,EAC5H04C,EAAIqK,KAAQ5L,GAAO,EAAK,IACxBuB,EAAIqK,KAAa,IAAN5L,GAGNuB,EGurDAsK,CAjIT,SAAsB3G,GAIpB,IAFAA,EAUF,SAAqBA,GACnB,OAAIA,EAAI4G,KAAa5G,EAAI4G,OAClB5G,EAAI6G,QAAQ,aAAc,IAZ3BC,CAAW9G,GAAK6G,QAAQR,GAAmB,KAEzCjhD,OAAS,EAAG,MAAO,GAE3B,KAAO46C,EAAI56C,OAAS,GAAM,GACxB46C,GAAY,IAEd,OAAOA,EAwHmB+G,CAAY/G,IAGxC,SAASF,GAAYt8C,EAAKwjD,EAAKj1B,EAAQ3sB,GACrC,IAAK,IAAIzB,EAAI,EAAGA,EAAIyB,KACbzB,EAAIouB,GAAUi1B,EAAI5hD,QAAYzB,GAAKH,EAAI4B,UADhBzB,EAE5BqjD,EAAIrjD,EAAIouB,GAAUvuB,EAAIG,GAExB,OAAOA,EAeT,SAAS+9C,GAAcja,GACrB,QAASA,EAAIt7B,aAAmD,mBAA7Bs7B,EAAIt7B,YAAYs1C,UAA2Bha,EAAIt7B,YAAYs1C,SAASha,GCjvDzG,SAASwf,GAAe7L,EAAO8L,GAG7B,IADA,IAAIC,EAAK,EACAxjD,EAAIy3C,EAAMh2C,OAAS,EAAGzB,GAAK,EAAGA,IAAK,CAC1C,IAAIyjD,EAAOhM,EAAMz3C,GACJ,MAATyjD,EACFhM,EAAMj2C,OAAOxB,EAAG,GACE,OAATyjD,GACThM,EAAMj2C,OAAOxB,EAAG,GAChBwjD,KACSA,IACT/L,EAAMj2C,OAAOxB,EAAG,GAChBwjD,KAKJ,GAAID,EACF,KAAOC,IAAMA,EACX/L,EAAMiM,QAAQ,MAIlB,OAAOjM,EAKT,IAAIkM,GACA,gEACAC,GAAY,SAASC,GACvB,OAAOF,GAAYG,KAAKD,GAAUnhB,MAAM,IAKnC,SAASp/B,KAId,IAHA,IAAIygD,EAAe,GACfC,GAAmB,EAEdhkD,EAAIiG,UAAUxE,OAAS,EAAGzB,IAAM,IAAMgkD,EAAkBhkD,IAAK,CACpE,IAAIikD,EAAQjkD,GAAK,EAAKiG,UAAUjG,GAAK,IAGrC,GAAoB,iBAATikD,EACT,MAAM,IAAIr6C,UAAU,6CACVq6C,IAIZF,EAAeE,EAAO,IAAMF,EAC5BC,EAAsC,MAAnBC,EAAKC,OAAO,IAWjC,OAASF,EAAmB,IAAM,KAJlCD,EAAeT,GAAer/C,GAAO8/C,EAAarV,MAAM,MAAM,SAAShpC,GACrE,QAASA,MACNs+C,GAAkB1M,KAAK,OAE6B,IAKpD,SAAS6M,GAAUF,GACxB,IAAIG,EAAiBC,GAAWJ,GAC5BK,EAAqC,MAArBrI,GAAOgI,GAAO,GAclC,OAXAA,EAAOX,GAAer/C,GAAOggD,EAAKvV,MAAM,MAAM,SAAShpC,GACrD,QAASA,MACN0+C,GAAgB9M,KAAK,OAEZ8M,IACZH,EAAO,KAELA,GAAQK,IACVL,GAAQ,MAGFG,EAAiB,IAAM,IAAMH,EAIhC,SAASI,GAAWJ,GACzB,MAA0B,MAAnBA,EAAKC,OAAO,UA4FN,CACbK,QAJK,SAAiBN,GACtB,OAAOL,GAAUK,GAAM,IAIvBO,SAfK,SAAkBP,EAAM1E,GAC7B,IAAIv2C,EAAI46C,GAAUK,GAAM,GAKxB,OAHI1E,GAAOv2C,EAAEizC,QAAQ,EAAIsD,EAAI99C,UAAY89C,IACvCv2C,EAAIA,EAAEizC,OAAO,EAAGjzC,EAAEvH,OAAS89C,EAAI99C,SAE1BuH,GAUPy7C,QAlCK,SAAiBR,GACtB,IAAI5/C,EAASu/C,GAAUK,GACnBS,EAAOrgD,EAAO,GACd8xC,EAAM9xC,EAAO,GAEjB,OAAKqgD,GAASvO,GAKVA,IAEFA,EAAMA,EAAI8F,OAAO,EAAG9F,EAAI10C,OAAS,IAG5BijD,EAAOvO,GARL,KA4BThO,IAtCe,IAuCfwc,UAtCqB,IAuCrBC,SAjFK,SAAkBxL,EAAMyL,GAI7B,SAAS5B,EAAKvK,GAEZ,IADA,IAAIzS,EAAQ,EACLA,EAAQyS,EAAIj3C,QACE,KAAfi3C,EAAIzS,GADiBA,KAK3B,IADA,IAAI6M,EAAM4F,EAAIj3C,OAAS,EAChBqxC,GAAO,GACK,KAAb4F,EAAI5F,GADOA,KAIjB,OAAI7M,EAAQ6M,EAAY,GACjB4F,EAAIhW,MAAMuD,EAAO6M,EAAM7M,EAAQ,GAfxCmT,EAAO91C,GAAQ81C,GAAM6C,OAAO,GAC5B4I,EAAKvhD,GAAQuhD,GAAI5I,OAAO,GAsBxB,IALA,IAAI6I,EAAY7B,EAAK7J,EAAK1K,MAAM,MAC5BqW,EAAU9B,EAAK4B,EAAGnW,MAAM,MAExBjtC,EAASm1B,KAAKsU,IAAI4Z,EAAUrjD,OAAQsjD,EAAQtjD,QAC5CujD,EAAkBvjD,EACbzB,EAAI,EAAGA,EAAIyB,EAAQzB,IAC1B,GAAI8kD,EAAU9kD,KAAO+kD,EAAQ/kD,GAAI,CAC/BglD,EAAkBhlD,EAClB,MAIJ,IAAIilD,EAAc,GAClB,IAASjlD,EAAIglD,EAAiBhlD,EAAI8kD,EAAUrjD,OAAQzB,IAClDilD,EAAYhlD,KAAK,MAKnB,OAFAglD,EAAcA,EAAY5kD,OAAO0kD,EAAQriB,MAAMsiB,KAE5B1N,KAAK,MA4CxBA,KA/FK,WACL,IAAI4N,EAAQz/C,MAAMzE,UAAU0hC,MAAMx8B,KAAKD,UAAW,GAClD,OAAOk+C,GAAUlgD,GAAOihD,GAAO,SAASx/C,EAAGuT,GACzC,GAAiB,iBAANvT,EACT,MAAM,IAAIkE,UAAU,0CAEtB,OAAOlE,KACN4xC,KAAK,OAyFR+M,WAAYA,GACZF,UAAWA,GACX7gD,QAASA,IAEX,SAASW,GAAQkhD,EAAIn8C,GACjB,GAAIm8C,EAAGlhD,OAAQ,OAAOkhD,EAAGlhD,OAAO+E,GAEhC,IADA,IAAIg0C,EAAM,GACDh9C,EAAI,EAAGA,EAAImlD,EAAG1jD,OAAQzB,IACvBgJ,EAAEm8C,EAAGnlD,GAAIA,EAAGmlD,IAAKnI,EAAI/8C,KAAKklD,EAAGnlD,IAErC,OAAOg9C,EAIX,IAAIf,GAA6B,MAApB,KAAKA,QAAQ,GACtB,SAAUI,EAAKpW,EAAOgF,GAAO,OAAOoR,EAAIJ,OAAOhW,EAAOgF,IACtD,SAAUoR,EAAKpW,EAAOgF,GAElB,OADIhF,EAAQ,IAAGA,EAAQoW,EAAI56C,OAASwkC,GAC7BoW,EAAIJ,OAAOhW,EAAOgF,wBCtOjC,IACMma,EADFC,GACED,EAAiC,oBAAbE,UAA4BA,SAASC,cAAgBD,SAASC,cAAc1lD,SAAM6B,WAEnG2jD,GAGLA,OAAuB,KAFzBA,EAASA,GAAU,IAEkBA,EAAO,GAA9C,IAA4E/+C,EAAvBk/C,EAAgB,GAAW,IAAIl/C,KAAO++C,EAAWA,EAAO1/C,eAAeW,KAAMk/C,EAAgBl/C,GAAK++C,EAAO/+C,IAAM,IAAuDm/C,EAAM,SAASC,EAAOC,GAAS,MAAMA,GAAaC,GAAmB,EAAUC,GAAsB,EAAUC,GAAoB,EAAUC,GAAqB,EAAUC,GAAqB,EAAMJ,EAAmC,iBAATvS,OAAkBwS,EAA6C,mBAAhBI,cAA2BF,EAAsC,iBAAVG,IAA8C,iBAAnBA,GAAQpQ,UAAoD,iBAAxBoQ,GAAQpQ,SAASqQ,KAAgBL,EAAoBC,IAAuBH,IAAqBC,EAAsBG,GAAsBJ,IAAqBE,IAAsBD,EAAsB,IAA4JO,EAAMC,EAAUC,EAAoFC,EAAWC,EAAvQC,EAAgB,GAAG,SAASC,EAAWzC,GAAM,OAAGoB,EAAmB,WAAUA,EAAmB,WAAEpB,EAAKwC,GAAwBA,EAAgBxC,EAAsD6B,GAAqBW,EAAgBE,GAAU,IAA4BP,EAAM,SAAoBvC,EAAS+C,GAAQ,IAAIzH,EAAiM,OAA7LA,EAAI0H,GAAkBhD,MAAuB0C,IAAOA,EAAOhhB,IAAkBihB,IAASA,EAASM,IAAgBjD,EAAS2C,EAAoB,UAAE3C,GAAU1E,EAAIoH,EAAqB,aAAE1C,IAAiB+C,EAAOzH,EAAIA,EAAI3G,YAAY8N,EAAW,SAAoBzC,GAAU,IAAI1E,EAAIiH,EAAMvC,GAAS,GAAiE,OAAvD1E,EAAI5yC,SAAQ4yC,EAAI,IAAI5rC,WAAW4rC,IAAK4H,EAAO5H,EAAI5yC,QAAe4yC,GAAQ+G,GAAc,KAAEzkD,OAAO,GAAeykD,GAAc,KAAE,GAAGhD,QAAQ,MAAM,KAAgBgD,GAAc,KAAExjB,MAAM,GAAGwjB,GAAY,GAAE,qBAAqBc,IAAOvB,EAAM,SAASC,GAAQQ,GAAc,KAAER,IAASL,EAAgB,QAAE,WAAW,MAAM,+BAAsCW,GAAsC,oBAAN7zC,OAAmBi0C,EAAM,SAAoBp9C,GAAG,IAAIhE,EAAK6hD,GAAkB79C,GAAG,OAAGhE,EAAaiiD,GAAiBjiD,GAAamN,KAAKnJ,KAAIs9C,EAAW,SAAoBt9C,GAAG,IAAIhE,EAA+B,OAA1BA,EAAK6hD,GAAkB79C,IAAmBhE,EAA4B,mBAAbkiD,WAAgC,IAAI3zC,WAAW2zC,WAAWl+C,KAA0B+9C,EAAqB,iBAA3C/hD,EAAKmN,KAAKnJ,EAAE,YAAgDhE,IAA4B,oBAAZmiD,YAAoCA,WAAwF,mBAAPC,OAAmB3B,EAAM,SAASC,GAAQ0B,KAAK1B,KAA2B,oBAAR2B,QAAyC,oBAAVpiD,UAAsBA,QAAQ,IAAGA,QAAQC,IAAImiD,MAAMpiD,QAAQ+lC,KAAK/lC,QAAQhD,MAAwB,oBAAXqlD,SAAuBA,SAASD,SAAezB,GAAoBC,KAA0BA,EAAuBY,EAAgB5oB,KAAK0T,SAASgW,KAAajC,SAASC,gBAAekB,EAAgBnB,SAASC,cAAc1lD,KAAOulD,IAAYqB,EAAgBrB,GAAoDqB,EAAH,IAAnCA,EAAgB/9C,QAAQ,SAA8B+9C,EAAgBxK,OAAO,EAAEwK,EAAgBtL,YAAY,KAAK,GAAwB,GAAGiL,EAAM,SAAoBoB,GAAK,IAAI,IAAIC,EAAI,IAAIC,eAAwD,OAAzCD,EAAIE,KAAK,MAAMH,GAAI,GAAOC,EAAIG,KAAK,MAAaH,EAAII,aAAa,MAAMC,GAAK,IAAI9iD,EAAK6hD,GAAkBW,GAAK,GAAGxiD,EAAM,OAAOiiD,GAAiBjiD,GAAM,MAAM8iD,IAASjC,IAAuBS,EAAW,SAAoBkB,GAAK,IAAI,IAAIC,EAAI,IAAIC,eAAuF,OAAxED,EAAIE,KAAK,MAAMH,GAAI,GAAOC,EAAIM,aAAa,cAAcN,EAAIG,KAAK,MAAa,IAAIr0C,WAAWk0C,EAAIO,UAAU,MAAMF,GAAK,IAAI9iD,EAAK6hD,GAAkBW,GAAK,GAAGxiD,EAAM,OAAOA,EAAK,MAAM8iD,KAAMzB,EAAU,SAAmBmB,EAAIS,EAAOC,GAAS,IAAIT,EAAI,IAAIC,eAAeD,EAAIE,KAAK,MAAMH,GAAI,GAAMC,EAAIM,aAAa,cAAcN,EAAIQ,OAAO,WAAsB,GAAe,KAAZR,EAAI/B,QAAyB,GAAZ+B,EAAI/B,QAAW+B,EAAIO,SAAUC,EAAOR,EAAIO,cAA5D,CAA6E,IAAIhjD,EAAK6hD,GAAkBW,GAAQxiD,EAAMijD,EAAOjjD,EAAKuH,QAAe27C,MAAWT,EAAIS,QAAQA,EAAQT,EAAIG,KAAK,QAA4D,IAAUzjB,EAAIkhB,EAAc,OAAGpgD,QAAQC,IAAI/E,KAAK8E,SAAa6iD,EAAIzC,EAAiB,UAAGpgD,QAAQ+lC,KAAK7qC,KAAK8E,SAAS,IAAIqB,KAAOk/C,EAAoBA,EAAgB7/C,eAAeW,KAAM++C,EAAO/+C,GAAKk/C,EAAgBl/C,IAAMk/C,EAAgB,KAAQH,EAAkB,WAAaA,EAAkB,UAAKA,EAAoB,aAAcA,EAAoB,YAAKA,EAAa,OAAEI,EAAMJ,EAAa,MAAmuB,IAAI5/C,MAAM,GAA/B,IAAma0iD,EAApMC,EAAS,EAAMC,EAAY,SAAS5oD,GAAO2oD,EAAS3oD,GAAW6oD,EAAY,WAAW,OAAOF,GAAcG,EAAY,EAAoBlD,EAAmB,YAAaA,EAAmB,WAAuBA,EAAsB,gBAAE8C,EAAc9C,EAAsB,eAAE,IAAqqBmD,GAAM,EAAM,SAA0BzB,EAAO0B,EAAUC,GAAUD,GAAWzB,GAAM,qBAAqB0B,GAAO,SAASC,EAASC,GAAO,IAAIC,EAAKxD,EAAO,IAAIuD,GAAuF,OAAhF7B,EAAO8B,EAAK,gCAAgCD,EAAM,8BAAqCC,EAAK,SAASC,EAAMF,EAAMG,EAAWC,EAASvT,EAAK9T,GAAM,IAAIsnB,EAAI,CAACxP,OAAS,SAAS4C,GAAK,IAAI8C,EAAI,EAAE,GAAG9C,MAAAA,GAAmC,IAANA,EAAQ,CAAC,IAAIpR,EAAoB,GAAfoR,EAAI56C,QAAQ,GAAyBynD,EAAa7M,EAAjC8C,EAAIgK,GAAWle,GAA0BA,GAAK,OAAOkU,GAAK5K,MAAQ,SAASmE,GAAK,IAAIyG,EAAIgK,GAAWzQ,EAAIj3C,QAAoC,OAA5B2nD,EAAmB1Q,EAAIyG,GAAYA,IAAsJ0J,EAAKF,EAASC,GAAWS,EAAM,GAAOC,EAAM,EAAE,GAAG7T,EAAM,IAAI,IAAIz1C,EAAE,EAAEA,EAAEy1C,EAAKh0C,OAAOzB,IAAI,CAAC,IAAIupD,EAAUN,EAAID,EAAShpD,IAAOupD,GAAsB,IAARD,IAAUA,EAAME,MAAYH,EAAMrpD,GAAGupD,EAAU9T,EAAKz1C,KAASqpD,EAAMrpD,GAAGy1C,EAAKz1C,GAAK,IAAIm/C,EAAI0J,EAAKzoD,MAAM,KAAKipD,GAAoE,OAA7DlK,EAArY,SAA4BA,GAAK,MAAgB,WAAb4J,EAA6BU,EAAatK,GAAqB,YAAb4J,EAA8BW,QAAQvK,GAAYA,EAAiQwK,CAAmBxK,GAAgB,IAARmK,GAAUM,GAAaN,GAAcnK,EAAI,IAA+zE5yC,EAAOs9C,EAAMC,EAAsBC,EAA70EC,EAAiC,oBAAdC,YAA0B,IAAIA,YAAY,aAAQvoD,EAAU,SAASwoD,EAAkBC,EAAQ7oD,EAAI8oD,GAA6D,IAA7C,IAAIC,EAAO/oD,EAAI8oD,EAAmBE,EAAOhpD,EAAU6oD,EAAQG,MAAWA,GAAQD,MAAUC,EAAO,GAAGA,EAAOhpD,EAAI,IAAI6oD,EAAQjK,UAAU8J,EAAa,OAAOA,EAAYv9B,OAAO09B,EAAQjK,SAAS5+C,EAAIgpD,IAAyB,IAAX,IAAIjO,EAAI,GAAS/6C,EAAIgpD,GAAO,CAAC,IAAIC,EAAGJ,EAAQ7oD,KAAO,GAAQ,IAAHipD,EAAL,CAAoD,IAAIC,EAAkB,GAAfL,EAAQ7oD,KAAU,GAAa,MAAN,IAAHipD,GAAJ,CAAmE,IAAIE,EAAkB,GAAfN,EAAQ7oD,KAAsG,IAA1EipD,EAAL,MAAN,IAAHA,IAAqB,GAAHA,IAAQ,GAAGC,GAAI,EAAEC,GAAe,EAAHF,IAAO,GAAGC,GAAI,GAAGC,GAAI,EAAiB,GAAfN,EAAQ7oD,MAAgB,MAAO+6C,GAAKhb,OAAOgE,aAAaklB,OAAQ,CAAC,IAAIG,EAAGH,EAAG,MAAMlO,GAAKhb,OAAOgE,aAAa,MAAMqlB,GAAI,GAAG,MAAS,KAAHA,SAAjRrO,GAAKhb,OAAOgE,cAAiB,GAAHklB,IAAQ,EAAEC,QAArHnO,GAAKhb,OAAOgE,aAAaklB,GAAoV,OAAOlO,EAAI,SAASoN,EAAakB,EAAIP,GAAgB,OAAOO,EAAIT,EAAkBJ,EAAOa,EAAIP,GAAgB,GAAG,SAASQ,EAAkBvO,EAAIwO,EAAWC,EAAOC,GAAiB,KAAKA,EAAgB,GAAG,OAAO,EAA0D,IAAxD,IAAIC,EAASF,EAAWT,EAAOS,EAAOC,EAAgB,EAAU/qD,EAAE,EAAEA,EAAEq8C,EAAI56C,SAASzB,EAAE,CAAC,IAAIirD,EAAE5O,EAAI9vB,WAAWvsB,GAAoF,GAA9EirD,GAAG,OAAOA,GAAG,QAAkCA,EAAE,QAAU,KAAFA,IAAS,IAAO,KAA9C5O,EAAI9vB,aAAavsB,IAAqCirD,GAAG,IAAI,CAAC,GAAGH,GAAQT,EAAO,MAAMQ,EAAWC,KAAUG,OAAO,GAAGA,GAAG,KAAK,CAAC,GAAGH,EAAO,GAAGT,EAAO,MAAMQ,EAAWC,KAAU,IAAIG,GAAG,EAAEJ,EAAWC,KAAU,IAAM,GAAFG,OAAU,GAAGA,GAAG,MAAM,CAAC,GAAGH,EAAO,GAAGT,EAAO,MAAMQ,EAAWC,KAAU,IAAIG,GAAG,GAAGJ,EAAWC,KAAU,IAAIG,GAAG,EAAE,GAAGJ,EAAWC,KAAU,IAAM,GAAFG,MAAS,CAAC,GAAGH,EAAO,GAAGT,EAAO,MAAMQ,EAAWC,KAAU,IAAIG,GAAG,GAAGJ,EAAWC,KAAU,IAAIG,GAAG,GAAG,GAAGJ,EAAWC,KAAU,IAAIG,GAAG,EAAE,GAAGJ,EAAWC,KAAU,IAAM,GAAFG,GAA2B,OAArBJ,EAAWC,GAAQ,EAASA,EAAOE,EAAS,SAAS9B,EAAa7M,EAAI6O,EAAOH,GAAiB,OAAOH,EAAkBvO,EAAIyN,EAAOoB,EAAOH,GAAmW,SAAS3B,EAAmB7U,EAAMhoC,GAAQs9C,EAAMt8C,IAAIgnC,EAAMhoC,GAAwO,SAAS4+C,EAA2B5P,GAAKhvC,EAAOgvC,EAAI8J,EAAc,MAAEwE,EAAM,IAAI18B,UAAUouB,GAAK8J,EAAe,OAAS,IAAI+F,WAAW7P,GAAK8J,EAAe,OAAE0E,EAAO,IAAIsB,WAAW9P,GAAK8J,EAAe,OAAEyE,EAAO,IAAIv2C,WAAWgoC,GAAK8J,EAAgB,QAAU,IAAIiG,YAAY/P,GAAK8J,EAAgB,QAAU,IAAIv4C,YAAYyuC,GAAK8J,EAAgB,QAAU,IAAI/0C,aAAairC,GAAK8J,EAAgB,QAAU,IAAIkG,aAAahQ,GAA9uB,oBAAd0O,aAA0B,IAAIA,YAAY,gBAA2uBuB,EAAa,MAAMC,EAAe,KAASC,EAAqBrG,EAAqB,cAAG,SAAyN,SAASsG,EAAqBC,GAAW,KAAMA,EAAUnqD,OAAO,GAAE,CAAC,IAAIlB,EAASqrD,EAAUphD,QAAQ,GAAoB,mBAAVjK,EAAV,CAAoD,IAAIsoD,EAAKtoD,EAASsoD,KAAsB,iBAAPA,OAAmCnnD,IAAfnB,EAAS04C,IAAiBoM,EAAkB,UAAEwD,GAAWxD,EAAmB,WAAEwD,EAAKtoD,EAAS04C,KAAW4P,OAAoBnnD,IAAfnB,EAAS04C,IAAgB,KAAK14C,EAAS04C,UAA5N14C,KAAnPmrD,GAA1En/C,EAAlB84C,EAAe,OAAUA,EAAe,OAAc,IAAIhM,YAAYqS,IAAkDj/C,WAAW0+C,EAA2B5+C,GAAQw9C,EAAO0B,GAAgB,GAAGD,EAAkX,IAAIK,EAAa,GAAOC,EAAW,GAAOC,EAAW,GAAOC,EAAc,GAAwD,SAASC,IAAS,GAAG5G,EAAe,OAA8E,IAA/C,mBAAlBA,EAAe,SAAcA,EAAe,OAAE,CAACA,EAAe,SAASA,EAAe,OAAE5jD,QAAQyqD,EAAY7G,EAAe,OAAE76C,SAAUmhD,EAAqBE,GAAc,SAASM,IAAcR,EAA6CG,GAAY,SAASM,IAAUT,EAAqBI,GAAsD,SAASM,IAAU,GAAGhH,EAAgB,QAAiF,IAAjD,mBAAnBA,EAAgB,UAAcA,EAAgB,QAAE,CAACA,EAAgB,UAASA,EAAgB,QAAE5jD,QAAQ6qD,EAAajH,EAAgB,QAAE76C,SAAUmhD,EAAqBK,GAAe,SAASE,EAAYK,GAAIV,EAAanI,QAAQ6I,GAAI,SAASD,EAAaC,GAAIP,EAActI,QAAQ6I,GAAkG,IAAIC,EAAgB,EAAoCC,GAAsB,KAAK,SAASC,GAAiBzpD,GAAIupD,IAAqBnH,EAA+B,wBAAGA,EAA+B,uBAAEmH,GAAkB,SAASG,GAAoB1pD,GAA6G,GAAzGupD,IAAqBnH,EAA+B,wBAAGA,EAA+B,uBAAEmH,GAAqC,GAAjBA,GAAqHC,GAAsB,CAAC,IAAIlsD,EAASksD,GAAsBA,GAAsB,KAAKlsD,KAAa8kD,EAAwB,gBAAE,GAAGA,EAAwB,gBAAE,GAAG,IAAIuH,GAAkB,KAASC,GAAc,wCAAwC,SAASC,GAAUjJ,GAAU,OAAOxiB,OAAOrgC,UAAU+rD,WAAWlJ,EAASkJ,WAAWF,IAAiD,IAAlChJ,EAASn7C,QAAQmkD,IAA8C,IAAIG,GAAW,CAAC,SAASC,GAAI,OAAO5H,EAAO6H,uBAAuBD,IAAK,SAASA,GAAI,OAAO5H,EAAO8H,UAAUF,IAAK,SAASA,EAAGG,GAAI/H,EAAOgI,WAAWJ,EAAGG,IAAK,SAASH,GAAI,OAAO5H,EAAOiI,UAAUL,IAAK,SAASA,EAAGG,GAAI,OAAO/H,EAAOkI,WAAWN,EAAGG,IAAK,SAASH,EAAGG,GAAI/H,EAAOmI,WAAWP,EAAGG,KAAM,SAASK,GAA0BzW,EAAK0W,EAAGC,GAAI,OAAOX,GAAWhW,GAAM0W,EAAGC,GAAI,SAASC,GAAyB5W,EAAK0W,GAAI,OAAOV,GAAWhW,GAAM0W,GAAId,GAAkB,gpHAAgpH,IAAIiB,GAAc,KAAK,SAASC,GAASjF,GAAM,OAAOA,EAAK,SAASkF,GAAYrF,GAAiC,OAAOA,EAAKxF,QAA7B,kBAA2C,SAAS5pC,GAAqB,OAAOA,GAAVA,EAAgBA,EAAhBA,EAAoB,KAAKA,EAAE,OAAM,SAAS00C,KAAe,IAAIlG,EAAI,IAAIjkD,MAAM,IAAIikD,EAAIwB,MAAM,CAAC,IAAI,MAAM,IAAIzlD,MAAM,GAAG,MAAMkB,GAAG+iD,EAAI/iD,EAAE,IAAI+iD,EAAIwB,MAAO,MAAM,6BAA8B,OAAOxB,EAAIwB,MAAM9Q,WAAW,SAASyV,KAAa,IAAIC,EAAGF,KAAiF,OAA/D3I,EAAwB,kBAAE6I,GAAI,KAAK7I,EAAwB,mBAAW0I,GAAYG,GAAyvC,IAAIC,GAAS,CAACC,QAAQ,CAAC,KAAK,GAAG,IAAIC,UAAU,SAASC,EAAOC,GAAM,IAAIhiD,EAAO4hD,GAASC,QAAQE,GAAkB,IAAPC,GAAiB,KAAPA,IAAqB,IAATD,EAAWnqB,EAAI2jB,GAAKoC,EAAkB39C,EAAO,IAAIA,EAAO9K,OAAO,GAAO8K,EAAOtM,KAAKsuD,IAAQC,QAAQ,EAAEriD,IAAI,SAASqiD,GAAmE,OAA1DL,GAASK,SAAS,EAAUzE,EAAOoE,GAASK,QAAQ,GAAG,IAAeC,OAAO,WAAgD,OAA7BhF,EAAa0E,GAAShiD,QAAmBuiD,MAAM,WAAW,IAAIC,EAAIR,GAAShiD,MAA0B,OAAfgiD,GAAShiD,MAAawiD,GAAKC,QAAQ,WAAWT,GAAShiD,QAAQ,SAAS0iD,GAAcC,EAAMN,GAASL,GAASK,QAAQA,EAAQ,IAA2I,OAA5HL,GAASY,kBAA8BZ,GAAShiD,MAAiBgiD,GAAShiD,MAAagiD,GAAShiD,MAAagiD,GAAShiD,MAAa,EAAE,MAAMpH,GAAsE,MAApD,oBAALiqD,IAAoBjqD,aAAaiqD,GAAGC,YAAYjI,GAAMjiD,IAAUA,EAAEmqD,OAAO,SAASC,GAAYL,EAAMN,GAASL,GAASK,QAAQA,EAAQ,IAA0C,OAA3BL,GAASY,kBAAyB,EAAE,MAAMhqD,GAAsE,MAApD,oBAALiqD,IAAoBjqD,aAAaiqD,GAAGC,YAAYjI,GAAMjiD,IAAUA,EAAEmqD,OAAO,SAASE,KAAsB,IAAIC,EAAOhK,EAAgB,QAAKgK,GAAOA,EAAO,GAAG,IAAIjB,EAAQD,GAASC,QAAWA,EAAQ,GAAG3sD,QAAO0sD,GAASE,UAAU,EAAE,IAAOD,EAAQ,GAAG3sD,QAAO0sD,GAASE,UAAU,EAAE,IAAI,SAASiB,GAAUhB,EAAOiB,EAAIC,EAAOC,GAAM,IAAc,IAAV,IAAIrY,EAAI,EAAUp3C,EAAE,EAAEA,EAAEwvD,EAAOxvD,IAAI,CAA2D,IAA1D,IAAI2qD,EAAIZ,EAAOwF,EAAM,EAAFvvD,GAAK,GAAOirC,EAAI8e,EAAOwF,GAAO,EAAFvvD,EAAI,IAAI,GAAWiK,EAAE,EAAEA,EAAEghC,EAAIhhC,IAAKkkD,GAASE,UAAUC,EAAOxE,EAAOa,EAAI1gD,IAAImtC,GAAKnM,EAAwB,OAApB8e,EAAO0F,GAAM,GAAGrY,EAAW,EAAE,MAAMryC,GAAsE,MAApD,oBAALiqD,IAAoBjqD,aAAaiqD,GAAGC,YAAYjI,GAAMjiD,IAAUA,EAAEmqD,OAAO,SAASQ,KAAmB,OAAOJ,GAAUlvD,MAAM,KAAK6F,WAAW,SAAS0pD,KAA4B,OAAO9F,EAAMpoD,OAAO,SAASmuD,GAAMlK,GAAQmK,GAAKnK,GAAQ,SAASoK,GAAuBC,EAAKlwD,EAAIu3C,GAAK0S,EAAOv8C,IAAIu8C,EAAO5J,SAASrgD,EAAIA,EAAIu3C,GAAK2Y,GAAM,SAASC,GAAYvwD,GAAqF,OAA3E4lD,EAA0B,oBAAE0E,EAAO1E,EAA0B,qBAAK,GAAG5lD,GAAaA,EAAM,SAASwwD,GAAwBC,GAAelJ,GAAM,OAAO,SAASmJ,GAAwBD,GAAeD,KAAuC,SAA8BhJ,GAAiB1S,GAAkB,IAAX,IAAI4K,EAAI,GAAWn/C,EAAE,EAAEA,EAAEu0C,EAAM9yC,OAAOzB,IAAI,CAAC,IAAIowD,EAAI7b,EAAMv0C,GAAMowD,EAAI,MAAKA,GAA6H,KAAIjR,EAAIl/C,KAAKohC,OAAOgE,aAAa+qB,IAAM,OAAOjR,EAAI7H,KAAK,IAAI,IAAIrqB,GAA2B,mBAAPojC,KAAkBA,KAAK,SAASC,GAAO,IAAiGC,EAAKC,EAAKC,EAAcC,EAAKC,EAAKC,EAA/HC,EAAO,oEAAwExZ,EAAO,GAAkDr3C,EAAE,EAAEswD,EAAMA,EAAMpN,QAAQ,sBAAsB,IAAI,GAA+JqN,EAAvJM,EAAOnoD,QAAQ4nD,EAAMpM,OAAOlkD,OAAsI,GAAhI0wD,EAAKG,EAAOnoD,QAAQ4nD,EAAMpM,OAAOlkD,QAAuG,EAAEwwD,GAAW,GAALE,IAAU,GAAnHC,EAAKE,EAAOnoD,QAAQ4nD,EAAMpM,OAAOlkD,QAA0F,EAAEywD,GAAW,EAALE,IAAS,GAArGC,EAAKC,EAAOnoD,QAAQ4nD,EAAMpM,OAAOlkD,OAA2Eq3C,GAAchW,OAAOgE,aAAakrB,GAAgB,KAAPI,IAAWtZ,GAAchW,OAAOgE,aAAamrB,IAAgB,KAAPI,IAAWvZ,GAAchW,OAAOgE,aAAaorB,UAAazwD,EAAEswD,EAAM7uD,QAAQ,OAAO41C,GAAQ,SAASyZ,GAAmB/qD,GAAG,GAAgC,kBAAtB+/C,GAAiCA,EAAoB,CAAC,IAAIvK,EAAI,IAAIA,EAAI3C,GAAOQ,KAAKrzC,EAAE,UAAU,MAAMoD,GAAGoyC,EAAI,IAAI3C,GAAO7yC,EAAE,UAAU,OAAO,IAAIwN,WAAWgoC,EAAIhvC,OAAOgvC,EAAIjC,WAAWiC,EAAI9uC,YAAY,IAAyE,IAArE,IAAIqgB,EAAQG,GAAalnB,GAAOs5C,EAAM,IAAI9rC,WAAWuZ,EAAQrrB,QAAgBzB,EAAE,EAAEA,EAAE8sB,EAAQrrB,SAASzB,EAAGq/C,EAAMr/C,GAAG8sB,EAAQP,WAAWvsB,GAAG,OAAOq/C,EAAM,MAAMl2C,GAAG,MAAM,IAAItF,MAAM,8CAA8C,SAASgjD,GAAkBhD,GAAU,GAAIiJ,GAAUjJ,GAAkB,OAAOiN,GAAmBjN,EAASnhB,MAAMmqB,GAAcprD,SAAS,IAW/2kBsvD,GAXm3kBC,GAAa,CAACp6B,KAAOA,KAAKzJ,UAAYA,UAAUi+B,WAAaA,WAAWC,WAAaA,WAAW93C,WAAaA,WAAW+3C,YAAcA,YAAYh7C,aAAeA,aAAai7C,aAAeA,cAAkB0F,GAAc,CAACjnD,EAAIg9C,GAAM1hD,EAAI+iD,EAAY7hD,EAAI8hD,EAAYjjD,EAAI2qD,GAAYjrD,EAAI8pD,GAAc7lD,EAAImmD,GAAYjmD,EAAIwmD,GAAiBxrD,EAAI0pD,GAAyB5tD,EAAIytD,GAA0BxjD,EAAI0lD,GAA0B5lD,EAAI+lD,GAAuBjN,EAAIsN,GAAwBtoD,EAAI+nD,GAAM5pD,EAAIspD,GAAU1nD,EAAIqoD,GAAwBvqD,EAAIooD,GAAS1jD,EAAI2jD,GAAYtnD,EAAI2oD,GAAoBrpD,EAAIioD,GAAaloD,EAAImoD,GAAWhD,EAAI4C,GAAc1lD,EAAIsjD,GAChqsByF,GAAI,SAAyCpwB,EAAO6U,EAAIppC,GAC5D,UAAU,IAAIvC,EAAE,IAAI82B,EAAO3T,UAAU5gB,GAAQjH,EAAE,IAAIw7B,EAAOsqB,WAAW7+C,GAAQ/F,EAAE,IAAIs6B,EAAOuqB,WAAW9+C,GAAQlH,EAAE,IAAIy7B,EAAOvtB,WAAWhH,GAAQxH,EAAE,IAAI+7B,EAAOwqB,YAAY/+C,GAAQvD,EAAE,IAAI83B,EAAOxwB,aAAa/D,GAAQrD,EAAE,IAAI43B,EAAOyqB,aAAah/C,GAAQrI,EAAEyxC,EAAIsV,EAAE,EAAEjrD,EAAE21C,EAAIxtC,EAAE,EAAE8B,EAAE,EAAEF,EAAE,EAAE84C,EAAE,EAAEh7C,EAAE,EAAE7B,EAAE,EAAE4B,EAAE,EAAElC,EAAE,EAAE0E,EAAE,IAAI3D,EAAEq6B,EAAOlK,KAAKu6B,KAAKprD,EAAE+6B,EAAOlK,KAAKw6B,MAAMtrD,EAAE6vC,EAAI3rC,EAAEihD,EAAEtV,EAAIrwC,EAAE6C,EAAEwtC,EAAInvC,EAAE87B,EAAEqT,EAAItwC,EAAEiU,EAAEq8B,EAAI5wC,EAAEkE,EAAE0sC,EAAI3sC,EAAEq5B,EAAEsT,EAAIzsC,EAAEmoD,EAAE1b,EAAIzxC,EAAEotD,EAAE3b,EAAI31C,EAAEuxD,EAAE5b,EAAI1rC,EAAEunD,EAAE7b,EAAI5rC,EAAE0nD,EAAE9b,EAAIkN,EAAE6O,EAAE/b,EAAI9tC,EAAE8pD,EAAEhc,EAAI3vC,EAAE4rD,EAAEjc,EAAI/tC,EAAEiqD,EAAElc,EAAIjwC,EAAEosD,EAAEnc,EAAIvrC,EAAE2nD,EAAEpc,EAAIlvC,EAAEs8C,EAAEpN,EAAI5vC,EAAEisD,EAAErc,EAAI7vC,EAAEmsD,EAAE,KAAKC,EAAE,MAAM9qD,EAAE,IAEhgB,SAAS+qD,EAAEnoD,GAAGA,EAAEA,EAAE,EAAE,IAAI1E,EAAE,EAAEA,EAAE2sD,EAAEA,EAAEA,EAAEjoD,EAAE,EAAEioD,EAAEA,EAAE,IAAI,GAAG,OAAO3sD,EAAE,EAAE,SAAS8sD,IAAI,OAAOH,EAAE,EAAE,SAASxvB,EAAEz4B,GAAGA,EAAEA,EAAE,EAAEioD,EAAEjoD,EAAE,SAASqoD,EAAEroD,EAAE1E,GAAG0E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAE2sD,EAAEjoD,EAAEkoD,EAAE5sD,EAAE,SAASgtD,EAAEtoD,GAAGA,EAAEA,EAAE,EAAExD,EAAE,KAAKwD,EAAE,OAAO,SAASb,IAAI,OAAO,IAAI,SAASopD,EAAEvoD,GAAGA,EAAEA,EAAE,EAAE,IAAI1E,EAAE,EAAED,EAAE,EAAEN,EAAE,EAAEiE,EAAE,EAAEE,EAAE,EAAE1C,EAAE,KAAK,EAAE,IAAIwD,EAAE,CAAChB,EAAE,EAAE,OAAOA,EAAE,EAAE1D,EAAE,EAAED,EAAE,EAAE,MAAM,EAAE,CAAC6D,EAAEspD,KAAK,EAAEztD,GAAGyB,EAAE,KAAK,IAAI,EAAEnB,GAAG6D,EAAE,IAAI,EAAE7D,EAAE6D,EAAE5D,EAAEA,EAAE,EAAE,EAAE,GAAGP,GAAGmE,EAAE,IAAI,EAAE,EAAE,MAAM,GAAG5D,IAAI,GAAG0E,IAAI,EAAE,CAAC1E,EAAE,EAAE0D,EAAE,EAAE,OAAO,IAAIA,EAAE,IAAI,EAAE,OAAO1D,EAAE,EAAE4D,EAAEnE,EAAE,GAAGM,EAAE,OAAO6D,EAAE,EAAE,SAASupD,IAAKjsD,EAAE,KAAK,EAAE,OAAO,SAASksD,EAAGptD,GAAGA,EAAEA,EAAE,EAAE0E,EAAE,MAAM1E,EAAE,OAAO,SAASqtD,GAAG3oD,GAAGA,EAAEA,EAAE,EAAE,IAAI1E,EAAE,EAAED,EAAE,EAAEA,EAAE4sD,EAAEA,EAAEA,EAAE,GAAG,EAAE3sD,EAAEkB,EAAE,OAAOwD,EAAE,KAAK,IAAI,GAAG,EAAE,IAAIA,EAAE,GAAG,IAAI,GAAG,CAACioD,EAAE5sD,EAAE,OAAOC,EAAE,EAAE,GAAGA,EAAE,EAAE,EAAE,CAAC0E,EAAExD,EAAE,KAAK,EAAEA,EAAEnB,GAAG,GAAGC,EAAEstD,GAAG5oD,EAAE,KAAK3E,GAAG,EAAEC,EAAEA,GAAG,EAAE2sD,EAAE5sD,EAAE,OAAOC,EAAE,EAAE,SAASutD,GAAG7oD,EAAE1E,GAAG0E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAE,OAAOwD,EAAE,KAAK,IAAI,IAAIA,EAAE,GAAG,IAAI,GAAG1E,GAAG,EAAEA,EAAE,OAAO,SAASwtD,KAAKtsD,EAAE,KAAK,EAAEA,EAAE,KAAK,EAAEA,EAAE,KAAK,EAAEA,EAAE,KAAK,EAAEA,EAAE,KAAK,EAAE,OAAO,EAAE,SAASgsD,KAAK,IAAIltD,EAAE,EAAED,EAAE,EAAEN,EAAE,EAAEiE,EAAE,EAAEE,EAAE,EAAEhF,EAAE,EAAElE,EAAE,EAAEiK,EAAE,EAAEF,EAAE,EAAE84C,EAAE,EAAEh7C,EAAE,EAAE7B,EAAE,EAAE4B,EAAE,EAAEA,EAAEqqD,EAAEA,EAAEA,EAAE,KAAK,EAAE5sD,EAAEmB,EAAE,KAAK,EAAE,GAAGnB,EAAE,EAAE,EAAE,CAACW,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,GAAG,GAAGvC,EAAEutD,GAAG5sD,EAAE,KAAK4B,GAAG,EAAEtC,EAAEkB,EAAE,KAAK,EAAE,IAAIlB,EAAE,CAACA,EAAE+rD,EAAE,GAAGhsD,GAAG,IAAI,EAAE,GAAG,EAAE,GAAGC,EAAE,EAAE,CAACU,EAAEV,EAAE2sD,EAAErqD,EAAE,OAAO5B,EAAE,QAAQ,KAAKX,GAAG,IAAI,EAAE,KAAKC,EAAE,GAAG,CAACU,EAAE,GAAGisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIX,GAAG,KAAK,EAAE,YAAYmB,EAAE,KAAK,IAAI,EAAE,CAACA,EAAE,KAAK,EAAER,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAK6qD,EAAE,EAAErrD,EAAE,GAAG,EAAEQ,EAAE,KAAK6qD,EAAE,EAAErrD,EAAE,EAAE,GAAG,EAAEQ,EAAE,KAAK6qD,EAAE,EAAErrD,EAAE,EAAE,GAAG,EAAEQ,EAAE,KAAK6qD,EAAE,EAAErrD,EAAE,GAAG,GAAG,EAAEQ,EAAE,KAAK6qD,EAAE,EAAErrD,EAAE,GAAG,GAAG,EAAEQ,EAAE,KAAK6qD,EAAE,EAAErrD,EAAE,GAAG,GAAG,EAAEjB,EAAEssD,EAAE,EAAErrD,EAAE,GAAG,GAAG,EAAEQ,EAAE,KAAK6qD,EAAE,EAAErrD,EAAE,GAAG,GAAG,EAAEQ,EAAE,KAAKR,EAAE,QAAQjB,EAAEM,GAAG,EAAEC,EAAEkB,EAAE,KAAK,EAAE,GAAG,GAAGlB,EAAE,EAAE,CAACD,EAAEmB,EAAE,KAAK,EAAE,IAAInB,EAAE,CAACmB,EAAE,KAAKA,EAAE,KAAKA,EAAE,KAAKlB,EAAE,MAAMA,EAAEA,EAAE,MAAM,UAAU,CAACkB,EAAE,KAAKnB,GAAG,EAAE,cAAa,GAAG,IAAIC,EAAE,EAAE,IAAI,GAAGA,EAAE,MAAM,IAAI,GAAGkB,EAAE,KAAK,IAAI,EAAE,EAAE,CAACwC,EAAExC,EAAE,KAAK,EAAEnB,EAAEmB,EAAE,KAAK,EAAEwD,EAAE,GAAG,IAAIhB,GAAG,GAAG,UAAU,KAAK,UAAU,QAAQA,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAACxC,EAAE,KAAKnB,EAAE,MAAM,IAAIC,EAAE,EAAE,IAAI,GAAGD,EAAE,EAAE,IAAI,EAAE,MAAM2E,EAAExD,EAAE,KAAKA,EAAE,KAAK,MAAMwD,EAAE,KAAK,EAAE,CAACxD,EAAE,KAAKnB,EAAE,SAAS,MAAM2E,EAAE,KAAK,EAAE,CAACxD,EAAE,KAAKnB,EAAE,SAAS,MAAM2E,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,OAAOsnD,EAAE,EAAEtoD,GAAG,EAAE,EAAE3D,EAAE,GAAG,QAAQ,GAAGC,EAAE,GAAG,IAAI0D,GAAG,GAAG,UAAU,KAAK,UAAU,QAAQA,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAAChD,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKzB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGiB,EAAE,EAAE,IAAI,EAAE,MAAMV,EAAEkB,EAAE,KAAKA,EAAE,KAAK,MAAMlB,EAAE,KAAK,EAAE,CAACkB,EAAE,KAAKzB,EAAE,SAAS,MAAMO,EAAE,KAAK,EAAE,CAACkB,EAAE,KAAKzB,EAAE,SAAS,MAAMO,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,OAAOgsD,EAAE,EAAEtoD,GAAG,EAAE,EAAEjE,EAAE,GAAG,QAAQ,GAAGO,EAAEkB,EAAE,KAAK,EAAEA,EAAE,GAAG,IAAIwC,GAAG,IAAI,UAAU,KAAK,UAAU,QAAQA,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAAChD,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKlB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGU,EAAE,EAAE,IAAI,EAAE,MAAMQ,EAAEA,EAAE,KAAKA,EAAE,KAAK,MAAMA,EAAE,KAAK,EAAE,CAACA,EAAE,KAAKlB,EAAE,SAAS,MAAMkB,EAAE,KAAK,EAAE,CAACA,EAAE,KAAKlB,EAAE,SAAS,MAAMkB,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,OAAO8qD,EAAE,EAAEtoD,GAAG,GAAG,EAAE1D,EAAE,GAAG,QAAQ,GAAGA,EAAEkB,EAAE,KAAK,EAAEnB,EAAE,GAAG,IAAI2D,GAAG,IAAI,UAAU,KAAK,UAAU,QAAQA,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAAChD,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKlB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGU,EAAE,EAAE,IAAI,EAAE,MAAMX,EAAEmB,EAAE,KAAKA,EAAE,KAAK,MAAMnB,EAAE,KAAK,EAAE,CAACmB,EAAE,KAAKlB,EAAE,SAAS,MAAMD,EAAE,KAAK,EAAE,CAACmB,EAAE,KAAKlB,EAAE,SAAS,MAAMD,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,OAAOisD,EAAE,EAAEtoD,GAAG,GAAG,EAAE1D,EAAE,GAAG,QAAQ,GAAGA,EAAEkB,EAAE,KAAK,EAAEzB,EAAE,GAAG,IAAIiE,GAAG,IAAI,UAAU,KAAK,UAAU,QAAQA,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAAChD,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKlB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGU,EAAE,EAAE,IAAI,EAAE,MAAMjB,EAAEyB,EAAE,KAAKA,EAAE,KAAK,MAAMzB,EAAE,KAAK,EAAE,CAACyB,EAAE,KAAKlB,EAAE,SAAS,MAAMP,EAAE,KAAK,EAAE,CAACyB,EAAE,KAAKlB,EAAE,SAAS,MAAMP,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,OAAOusD,EAAE,EAAEtoD,GAAG,GAAG,EAAE1D,EAAE,GAAG,QAAQ,GAAGA,EAAEkB,EAAE,KAAK,EAAEwC,EAAE,GAAG,IAAIA,GAAG,IAAI,UAAU,KAAK,UAAU,QAAQA,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAAChD,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKlB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGU,EAAE,EAAE,IAAI,EAAE,MAAMgD,EAAExC,EAAE,KAAKA,EAAE,KAAK,MAAMwC,EAAE,KAAK,EAAE,CAACxC,EAAE,KAAKlB,EAAE,SAAS,MAAM0D,EAAE,KAAK,EAAE,CAACxC,EAAE,KAAKlB,EAAE,SAAS,MAAM0D,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,OAAOsoD,EAAE,EAAEtoD,GAAG,GAAG,EAAE1D,EAAE,GAAG,QAAQ,GAAGA,EAAEkB,EAAE,KAAK,EAAE0C,EAAE,GAAG,IAAIF,GAAG,IAAI,UAAU,KAAK,UAAU,QAAQA,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAAChD,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKlB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGU,EAAE,EAAE,IAAI,EAAE,MAAMkD,EAAE1C,EAAE,KAAKA,EAAE,KAAK,MAAM0C,EAAE,KAAK,EAAE,CAAC1C,EAAE,KAAKlB,EAAE,SAAS,MAAM4D,EAAE,KAAK,EAAE,CAAC1C,EAAE,KAAKlB,EAAE,SAAS,MAAM4D,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,OAAOooD,EAAE,EAAEtoD,GAAG,GAAG,EAAE1D,EAAE,GAAG,QAAQ,GAAGA,EAAEkB,EAAE,KAAK,EAAEtC,EAAE,GAAG,IAAI8E,GAAG,IAAI,UAAU,KAAK,UAAU,QAAQA,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAAChD,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKlB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGU,EAAE,EAAE,IAAI,EAAE,MAAM9B,EAAEsC,EAAE,KAAKA,EAAE,KAAK,MAAMtC,EAAE,KAAK,EAAE,CAACsC,EAAE,KAAKlB,EAAE,SAAS,MAAMpB,EAAE,KAAK,EAAE,CAACsC,EAAE,KAAKlB,EAAE,SAAS,MAAMpB,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,OAAOotD,EAAE,EAAEtoD,GAAG,GAAG,EAAE1D,EAAE,GAAG,QAAQ,GAAGkB,EAAE,KAAKwC,GAAG,GAAGjE,GAAGssD,EAAE,EAAE,IAAI,GAAG,EAAE,EAAE7qD,EAAE,MAAM,EAAEA,EAAE,KAAK,EAAE0C,EAAEnE,GAAG,EAAE,EAAEiB,EAAEqrD,EAAE,EAAEnoD,EAAE,GAAG,EAAErB,EAAE9C,EAAE,EAAE,EAAEyB,EAAE,KAAKqB,GAAG,EAAE,GAAGmC,EAAE,MAAM,EAAE,CAAC64C,EAAEr8C,EAAE,KAAK,EAAEA,EAAEoB,EAAE,GAAG,GAAGsB,EAAE1C,EAAEoB,EAAE,EAAE,GAAG,GAAG5B,EAAE4sD,GAAG/P,EAAE,KAAKj7C,EAAE,EAAE,GAAG,EAAE,IAAI5B,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,IAAI,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,GAAG,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,GAAG,GAAG,EAAEvC,EAAEmB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEjB,EAAEyB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE6B,EAAErB,EAAE,KAAK,EAAEA,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGjB,EAAEM,GAAGwC,IAAI,GAAG,GAAGvC,GAAGP,EAAEM,GAAGwC,IAAI,GAAG,GAAG,GAAG,EAAEA,GAAG,WAAWA,EAAE,WAAWvC,GAAGP,EAAEM,GAAGwC,IAAI,GAAG,GAAG,IAAI,EAAEvC,EAAE,WAAWA,GAAG,WAAWkB,EAAE,KAAKlB,EAAE,KAAKA,EAAE,WAAW,CAACU,IAAIjB,IAAI,KAAKM,IAAI,OAAON,EAAE,aAAaM,EAAE,YAAY,KAAK,IAAI,EAAE,IAAI,EAAEC,GAAG,UAAUA,EAAE,UAAUkB,EAAE,QAAQzB,EAAE,aAAaM,EAAE,YAAY,KAAK,GAAG,OAAON,IAAI,KAAKM,IAAI,OAAON,EAAE,aAAaM,EAAE,YAAY,KAAK,IAAI,KAAK,EAAE,EAAE,GAAGW,GAAG,UAAUA,EAAE,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,MAAM,CAAC6B,GAAG9C,IAAI,KAAKM,IAAI,OAAON,EAAE,aAAaM,EAAE,YAAY,EAAE,KAAK,IAAI,EAAEW,GAAG6B,EAAE,EAAE,IAAI,EAAEvC,GAAG,UAAUA,EAAE,UAAUkB,EAAE,QAAQzB,EAAE,aAAaM,EAAE,YAAY,EAAE,KAAK,GAAG,KAAKwC,IAAI,EAAE,EAAE,GAAG7B,GAAG,UAAUA,EAAE,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,GAAG,IAAIA,EAAE,MAAM,IAAI,KAAKA,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,IAAI,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,GAAG,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,GAAG,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,GAAG,GAAG,EAAEi7C,EAAEr8C,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG68C,GAAG78C,IAAI,EAAE,GAAG6B,EAAErB,EAAE,KAAK,EAAEqB,GAAGg7C,GAAG78C,IAAI,EAAE,GAAG,GAAG,EAAE6B,GAAG,WAAWA,EAAE,WAAWA,GAAGg7C,GAAG78C,IAAI,EAAE,GAAG,IAAI,EAAE6B,EAAE,WAAWA,GAAG,WAAWA,MAAMg7C,EAAE,aAAa78C,IAAI,EAAE,GAAG,KAAK,KAAK68C,IAAI,IAAI,EAAE,IAAI,EAAEh7C,GAAG,UAAUA,EAAE,UAAUrB,EAAE,QAAQq8C,EAAE,aAAa78C,IAAI,EAAE,GAAG,KAAK,GAAG,SAAS68C,EAAE,aAAa78C,IAAI,EAAE,GAAG,KAAK,KAAK68C,IAAI,IAAI,KAAK,EAAE,GAAGh7C,GAAG,UAAUA,EAAE,UAAU7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,IAAI,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,GAAG,GAAG,GAAG5B,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,GAAG,GAAG,EAAEi7C,EAAEr8C,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG68C,GAAG78C,EAAE,KAAK6B,EAAErB,EAAE,KAAK,EAAEqB,GAAGg7C,GAAG78C,EAAE,KAAK,GAAG,EAAE6B,GAAG,WAAWA,EAAE,WAAWA,GAAGg7C,GAAG78C,EAAE,KAAK,IAAI,EAAE6B,EAAE,WAAWA,GAAG,WAAWA,MAAMg7C,EAAE,aAAa78C,EAAE,KAAK,KAAK,KAAK68C,IAAI,IAAI,EAAE,IAAI,EAAEh7C,GAAG,UAAUA,EAAE,UAAUrB,EAAE,QAAQq8C,EAAE,aAAa78C,EAAE,KAAK,KAAK,GAAG,SAAS68C,EAAE,aAAa78C,EAAE,KAAK,KAAK,KAAK68C,IAAI,IAAI,KAAK,EAAE,GAAGh7C,GAAG,UAAUA,EAAE,UAAU7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,KAAK,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,IAAI,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,GAAG,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,GAAG,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,GAAG,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE68C,EAAEr8C,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG68C,EAAEh7C,EAAE7B,EAAEQ,EAAE,KAAK,EAAER,GAAG68C,EAAEh7C,EAAE,GAAG,EAAE7B,GAAG,WAAWA,EAAE,WAAWA,GAAG68C,EAAEh7C,EAAE,IAAI,EAAE7B,EAAE,WAAWA,GAAG,WAAWA,IAAI68C,IAAI,KAAKh7C,IAAI,OAAOg7C,EAAE,aAAah7C,EAAE,YAAY,KAAK,IAAI,EAAE,IAAI,EAAE7B,GAAG,UAAUA,EAAE,UAAUQ,EAAE,QAAQq8C,EAAE,aAAah7C,EAAE,YAAY,KAAK,GAAG,OAAOg7C,IAAI,KAAKh7C,IAAI,OAAOg7C,EAAE,aAAah7C,EAAE,YAAY,KAAK,IAAI,KAAK,EAAE,EAAE,GAAG7B,GAAG,UAAUA,EAAE,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAC64C,EAAEr8C,EAAE,KAAK,EAAEA,EAAEoB,EAAE,IAAI,GAAG5B,IAAI,EAAE,EAAEA,EAAE,EAAEQ,EAAEoB,EAAE,GAAG,GAAG,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/P,EAAE,KAAKj7C,EAAE,GAAG,GAAG,EAAEtC,EAAEkB,EAAE,OAAOR,IAAI,EAAE,EAAEA,EAAE,IAAI,IAAI,GAAG,EAAE,IAAIA,IAAI,EAAE,EAAEA,EAAE,EAAE,IAAI,GAAG,CAAC,GAAGV,EAAE,EAAE,EAAE,CAACu9C,EAAEr8C,EAAE,KAAK,EAAEA,EAAEoB,EAAE,IAAI,GAAGtC,EAAEstD,GAAG/P,EAAE,KAAKj7C,EAAE,GAAG,GAAG,EAAEtC,EAAEA,GAAG,EAAED,EAAEmB,EAAE,OAAOR,IAAI,EAAE,KAAK,IAAI,GAAG,EAAE,IAAIA,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,GAAGX,EAAE,EAAE,EAAE,CAACw9C,EAAEr8C,EAAE,KAAK,EAAEA,EAAEoB,EAAE,IAAI,GAAGvC,EAAEutD,GAAG/P,EAAE,KAAKj7C,EAAE,GAAG,GAAG,EAAEvC,EAAEA,GAAG,EAAEC,EAAED,EAAEC,EAAE,EAAE,IAAIU,IAAI,EAAE,EAAEA,EAAE,EAAE,IAAI,GAAG,CAACQ,EAAE,OAAOR,IAAI,EAAE,EAAEA,EAAE,IAAI,IAAI,GAAGV,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAKV,EAAE,GAAG,CAACU,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,IAAI,GAAGC,EAAErB,EAAEoB,EAAE,GAAG,GAAG,GAAGtC,EAAEstD,GAAG5sD,EAAE,KAAK4B,EAAE,GAAG,GAAG,EAAE8pD,EAAE,GAAGlrD,EAAE,KAAKlB,EAAE,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEX,EAAEW,EAAE,MAAM,OAAOX,GAAG,IAAI,IAAI,KAAM,MAAM,CAAC,GAAG2E,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,IAAI,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,GAAG,GAAG,GAAG5B,GAAG,EAAE,KAAK4sD,GAAG/qD,EAAE,KAAKD,EAAE,GAAG,GAAG,EAAEtC,EAAEkB,EAAE,KAAK,EAAE,GAAGlB,EAAE,EAAE,EAAE,CAACuC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGtC,EAAEstD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,IAAIV,GAAG,IAAIU,GAAG,EAAE,MAAMA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAM,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,GAAG,EAAE,KAAK4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,IAAIQ,EAAE,KAAK,IAAIR,GAAG,EAAE,MAAMA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,CAAC,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,GAAG,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,MAAMA,EAAE,KAAK,IAAIR,GAAG,EAAE,KAAKA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG6B,EAAE7B,EAAEQ,EAAE,KAAK,EAAER,GAAG6B,EAAE,GAAG,EAAE7B,GAAG,WAAWA,EAAE,WAAWQ,EAAE,MAAMqB,EAAE,IAAI,EAAE7B,EAAE,WAAWA,GAAG,WAAWA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,KAAK,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEvC,EAAEmB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE,GAAG,KAAKA,IAAI,EAAE,IAAI,CAACV,EAAEkB,EAAE,KAAK,EAAE,IAAInB,EAAE,GAAG,EAAE,CAACmB,EAAE,KAAKlB,EAAE,UAAUkB,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAI,EAAEV,EAAEA,EAAE,UAAUpB,EAAE,IAAI,UAAU,CAACsC,EAAE,KAAKlB,GAAG,UAAUkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEV,EAAEA,EAAE,WAAWpB,EAAE,IAAI,WAAW,CAACoB,EAAEkB,EAAE,KAAK,EAAElB,GAAGD,EAAE,IAAIW,IAAI,EAAE,KAAK,EAAE,IAAI,EAAEV,GAAG,UAAUA,EAAE,UAAUkB,EAAE,KAAKlB,EAAED,IAAIA,EAAE,GAAG,GAAG,GAAG,IAAIW,IAAI,EAAE,IAAI,GAAGX,KAAKW,IAAI,EAAE,IAAIQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGX,EAAE,IAAIA,EAAE,IAAI,EAAE,IAAIA,EAAE,CAACC,EAAEA,EAAE,WAAWpB,EAAE,SAASoB,EAAEA,EAAE,gBAAgBpB,EAAE,WAAU,GAAG,IAAIA,EAAE,IAAI,IAAIoB,EAAEA,EAAE,YAAY,gBAAgB,IAAIpB,EAAE,IAAI,IAAIoB,EAAEA,EAAE,WAAWkB,EAAE,KAAKlB,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEvC,EAAEmB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEV,EAAEkB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAI,GAAG,GAAGV,EAAE,CAAC,GAAGA,IAAI,EAAE,GAAG,CAACpB,EAAEsC,EAAE,KAAK,EAAEtC,GAAG,GAAGoB,GAAG,EAAED,EAAE,IAAI,EAAEnB,GAAG,UAAUA,EAAE,UAAUsC,EAAE,KAAKtC,EAAEoB,IAAID,EAAE,GAAG,GAAG,GAAG,GAAGC,EAAE,GAAGD,IAAIC,EAAED,EAAEnB,EAAEA,EAAE,IAAI,MAAMoB,EAAEkB,EAAE,KAAK,EAAE,IAAInB,EAAE,GAAG,EAAE,CAACmB,EAAE,KAAKlB,EAAE,UAAUkB,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAI,EAAEV,EAAEA,GAAG,WAAWpB,EAAE,IAAI,UAAU,CAACsC,EAAE,KAAKlB,GAAG,UAAUkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEV,EAAEA,EAAE,UAAUpB,EAAE,IAAI,WAAW,CAACoB,EAAED,EAAEA,EAAEmB,EAAE,KAAK,EAAEtC,EAAE,WAAU,GAAG,GAAG,IAAIA,EAAE,IAAI,IAAI,CAACsC,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGV,EAAE,IAAIA,EAAE,GAAG,EAAE,CAACA,EAAED,GAAG,WAAWnB,EAAE,IAAI,MAAM,IAAIoB,EAAE,CAACA,EAAED,EAAE,WAAWnB,EAAE,SAASoB,EAAED,EAAE,kBAAiB,GAAG,IAAInB,EAAE,IAAI,IAAIoB,EAAEA,GAAG,gBAAgB,IAAIpB,EAAE,IAAI,IAAIoB,EAAEA,EAAE,WAAWkB,EAAE,KAAKlB,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEhG,EAAE,GAAG,IAAIgG,EAAE,MAAM,IAAI,MAAM,CAACgD,KAAKhD,EAAE,IAAI,IAAI,EAAEA,EAAE,IAAIA,GAAG,MAAM,GAAG6B,EAAE,EAAE,GAAG,OAAO7B,IAAI,EAAE,IAAI,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE,KAAKpB,EAAE,KAAK,YAAY,CAACR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE,GAAGpB,EAAE,KAAK,WAAW,EAAE,CAACR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE,KAAKpB,EAAE,KAAK,WAAW,CAACR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE,GAAGpB,EAAE,KAAK,UAAU,EAAE,CAACR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE,IAAIpB,EAAE,KAAK,IAAI,EAAE,CAACR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE,IAAIpB,EAAE,KAAK,GAAG,EAAE,CAACR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE,KAAKpB,EAAE,KAAK,WAAW,CAACR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE,GAAGpB,EAAE,KAAK,UAAU,EAAE,CAACR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE,IAAIpB,EAAE,KAAK,WAAW,IAAI,UAAU,CAACR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE,IAAIpB,EAAE,KAAK,WAAW,IAAI,UAAU,CAACR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,GAAG,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,MAAM,WAAWyD,EAAE,GAAG,IAAI3E,EAAE,GAAG,EAAE,CAAC,OAAOA,EAAE,GAAG,KAAM,WAAW,MAAM2E,EAAE,QAAQ3E,EAAE,EAAE2sD,EAAErqD,EAAE,OAAOtC,EAAE,MAAM,CAAC,OAAOA,EAAE,GAAG,KAAK,EAAE,MAAM2E,EAAE,QAAQ3E,EAAE,EAAE2sD,EAAErqD,EAAE,OAAOtC,EAAE,SAAQ,GAAGkB,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,GAAG,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,MAAM,WAAWuD,EAAE,GAAG,IAAIzE,EAAE,GAAG,UAAU,CAAC,OAAOA,EAAE,GAAG,KAAM,WAAW,MAAMyE,EAAE,QAAQzE,EAAE,EAAE2sD,EAAErqD,EAAE,OAAOtC,EAAE,MAAM,CAAC,OAAOA,EAAE,GAAG,KAAK,UAAU,MAAMyE,EAAE,QAAQzE,EAAE,EAAE2sD,EAAErqD,EAAE,OAAOtC,EAAE,SAAQ,GAAGkB,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,GAAG,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE5B,EAAEQ,EAAE,KAAK,EAAE,GAAGR,EAAE,WAAW,EAAE,KAAKA,GAAG,WAAW,IAAI,GAAIA,GAAG,WAAW,KAAK,WAAW,EAAE,GAAIA,GAAG,WAAW,KAAK,WAAW,GAAG,IAAI,EAAE,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,GAAG,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGoB,GAAG,EAAE4pD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAE5B,EAAEQ,EAAE,KAAK,EAAE,MAAMR,GAAG,WAAW,KAAK,YAAaA,GAAG,WAAW,IAAI,UAAU,EAAE,GAAIA,GAAG,WAAW,IAAI,UAAU,GAAG,KAAK,GAAGA,IAAI,GAAG,GAAG,GAAG,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKwC,EAAE,GAAG,EAAEhD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,MAAMhG,SAAQ,UAAS,GAAG,IAAIgG,EAAE,MAAM,IAAI,MAAM,CAACV,KAAKU,EAAE,KAAK,IAAI,EAAEA,EAAE,KAAKA,GAAG,OAAO,GAAG6B,EAAE,EAAE,GAAGmC,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGtC,GAAG,EAAEstD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAEpB,EAAE,KAAKlB,EAAE,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAIQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG6B,EAAE7B,EAAEQ,EAAE,KAAK,EAAER,GAAG6B,EAAE,GAAG,EAAE7B,GAAG,WAAWA,EAAE,WAAWQ,EAAE,MAAMqB,EAAE,IAAI,EAAE7B,EAAE,WAAWA,GAAG,WAAWA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC6B,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAE5B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE68C,EAAE,GAAG,IAAI78C,EAAE,MAAM,IAAI,MAAM,CAAC,IAAIA,EAAE,MAAM,KAAK,CAAC,OAAOA,EAAE,MAAM,KAAK,KAAK,MAAM,QAAQ,MAAM68C,EAAEv9C,GAAGkB,EAAE,KAAK,IAAIR,GAAG,EAAE,OAAO,EAAE,EAAE,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGtC,GAAG,EAAEstD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAEpB,EAAE,KAAKzB,EAAE,EAAEyB,EAAE,KAAKlB,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,OAAOA,EAAE,MAAM,KAAK,KAAK,CAAC,GAAGgE,EAAE,MAAM,EAAE+oD,GAAG,GAAGvsD,EAAE,KAAK,GAAG,EAAEA,EAAE,QAAQR,EAAE,KAAK,IAAI,EAAEA,EAAE,KAAKA,EAAE,UAAU,IAAI6B,EAAE7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,KAAK,CAACV,GAAGkB,EAAE,KAAK,IAAIR,GAAG,EAAE,MAAM,EAAE,GAAGgE,EAAE,MAAM,EAAE,CAAChE,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGtC,GAAG,EAAEstD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAEpB,EAAE,KAAKzB,EAAE,EAAEyB,EAAE,KAAKlB,EAAE,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,MAAM68C,UAAS,GAAG,QAAQ78C,EAAE,QAAQ,IAAI,IAAI,KAAK,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAAC64C,EAAEr8C,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/P,EAAE,KAAKj7C,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,OAAOR,IAAI,EAAE,KAAK,IAAI,GAAG,EAAE,IAAIA,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,GAAGV,EAAE,EAAE,EAAE,CAACu9C,EAAEr8C,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGtC,EAAEstD,GAAG/P,EAAE,KAAKj7C,EAAE,IAAI,GAAG,EAAEtC,EAAEA,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,KAAKA,EAAE,GAAG,CAACu9C,EAAEr8C,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGC,EAAErB,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,EAAE4sD,GAAG/P,EAAE,KAAKj7C,EAAE,IAAI,GAAG,EAAE5B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,MAAM,CAACQ,EAAE,KAAKzB,EAAE,EAAEyB,EAAE,KAAKlB,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,GAAG,KAAK,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,OAAOR,IAAI,EAAE,KAAK,IAAI,GAAG,EAAE,IAAIA,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,GAAGV,EAAE,EAAE,EAAE,CAACU,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGtC,EAAEstD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAEtC,EAAEA,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGA,EAAE,EAAE,EAAE,CAACkB,EAAE,KAAKlB,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEV,EAAEgsD,EAAE,EAAEpoD,EAAE,EAAE5D,EAAE,GAAG,EAAE,GAAGA,EAAE,EAAE,CAACU,EAAEV,EAAE2sD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,MAAMA,EAAE,KAAK,GAAG,GAAG,EAAER,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,CAAC,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAE68C,EAAEr8C,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEA,EAAEQ,EAAE,KAAK,EAAER,GAAG68C,EAAEh7C,EAAE,GAAG,EAAE7B,GAAG,WAAWA,EAAE,WAAWA,GAAG68C,EAAEh7C,EAAE,IAAI,EAAE7B,EAAE,WAAWA,GAAG,WAAWA,IAAI68C,IAAI,KAAKh7C,IAAI,OAAOg7C,EAAE,aAAah7C,EAAE,YAAY,KAAK,IAAI,EAAE,IAAI,EAAE7B,GAAG,UAAUA,EAAE,UAAUQ,EAAE,QAAQq8C,EAAE,aAAah7C,EAAE,YAAY,KAAK,GAAG,OAAOg7C,IAAI,KAAKh7C,IAAI,OAAOg7C,EAAE,aAAah7C,EAAE,YAAY,KAAK,IAAI,KAAK,EAAE,EAAE,GAAG7B,GAAG,UAAUA,EAAE,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEmC,EAAEvD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE6B,EAAErB,EAAE,KAAK,EAAEqB,GAAGkC,GAAG/D,EAAE,KAAK,GAAG,EAAE6B,GAAG,WAAWA,EAAE,WAAWA,GAAGkC,GAAG/D,EAAE,KAAK,IAAI,EAAE6B,EAAE,WAAWA,GAAG,WAAWg7C,GAAG94C,IAAI,IAAI,KAAK,YAAY/D,EAAE,MAAM+D,EAAE,YAAY,KAAK,IAAI,EAAElC,GAAGg7C,EAAE,EAAE,IAAI,EAAEh7C,GAAG,UAAUA,EAAE,UAAUrB,EAAE,QAAQ,YAAYR,EAAE,MAAM+D,EAAE,YAAY,KAAK,GAAG,KAAK84C,IAAI,EAAE,EAAE,GAAGh7C,GAAG,UAAUA,EAAE,UAAU7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEmC,EAAEvD,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAE68C,EAAEr8C,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEA,EAAEQ,EAAE,KAAK,EAAER,GAAG+D,EAAE84C,EAAE,GAAG,EAAE78C,GAAG,WAAWA,EAAE,WAAWA,GAAG+D,EAAE84C,EAAE,IAAI,EAAE78C,EAAE,WAAWA,GAAG,WAAW6B,IAAIg7C,IAAI,KAAK94C,IAAI,OAAOA,EAAE,YAAY,IAAI84C,EAAE,YAAY,KAAK,IAAI,EAAE78C,GAAG6B,EAAE,EAAE,IAAI,EAAE7B,GAAG,UAAUA,EAAE,UAAUQ,EAAE,QAAQuD,EAAE,YAAY,IAAI84C,EAAE,YAAY,KAAK,GAAG,KAAKh7C,IAAI,EAAE,EAAE,GAAG7B,GAAG,UAAUA,EAAE,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAEA,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,OAAOR,IAAI,EAAE,EAAEA,EAAE,IAAI,IAAI,GAAG,EAAE,IAAIA,IAAI,EAAE,EAAEA,EAAE,EAAE,IAAI,GAAG,CAAC,GAAGV,EAAE,EAAE,EAAE,CAACuC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGtC,EAAEstD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEvC,EAAEC,GAAG,OAAOD,EAAEC,EAAEA,EAAEkB,EAAE,OAAOR,IAAI,EAAE,KAAK,IAAI,GAAG,EAAE,IAAIA,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,GAAGV,EAAE,EAAE,EAAE,CAACU,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGtC,EAAEstD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAEtC,EAAEA,GAAG,EAAEuC,EAAExC,EAAEC,EAAE,EAAEU,EAAEQ,EAAE,KAAK,EAAER,GAAG6B,EAAE,GAAG,EAAE7B,GAAG,WAAWA,EAAE,WAAWA,GAAG6B,EAAE,IAAI,EAAE7B,EAAE,WAAWA,GAAG,WAAW6B,GAAGvC,EAAEu9C,IAAIx9C,EAAE,YAAY,GAAGwC,EAAE,YAAY,KAAK,GAAGA,GAAGA,IAAI,KAAKxC,IAAI,IAAIw9C,EAAE,EAAE78C,GAAG6B,EAAE,EAAE,IAAI,EAAE7B,GAAG,UAAUA,EAAE,UAAUQ,EAAE,MAAMq8C,EAAE,KAAKh7C,IAAI,EAAE,EAAE,GAAG7B,GAAG,UAAUA,EAAE,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,OAAOgE,EAAE,MAAM,IAAI,EAAEgpD,GAAG,KAAK,EAAE,EAAExsD,EAAE,KAAK,GAAG,EAAElB,EAAEU,EAAE,MAAM,OAAOV,GAAG,IAAI,IAAI,KAAK,MAAM,CAAC,GAAG0E,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG6B,EAAE7B,EAAEQ,EAAE,KAAK,EAAER,GAAG6B,EAAE,GAAG,EAAE7B,GAAG,WAAWA,EAAE,WAAWQ,EAAE,MAAMqB,EAAE,IAAI,EAAE7B,EAAE,WAAWA,GAAG,WAAWA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,CAAC6B,EAAE,GAAG,GAAGxC,GAAG,IAAI,GAAG,MAAM,CAAC,OAAOA,GAAG,IAAI,IAAI,KAAM,MAAM,MAAM,QAAQ,MAAMwC,EAAE,KAAKmC,EAAE,MAAM,GAAG3E,EAAEW,EAAE,MAAM,CAACX,EAAEmB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAE4sD,GAAGvtD,EAAE,KAAKuC,EAAE,IAAI,GAAG,EAAE,KAAK5B,EAAE,GAAGV,EAAE,MAAM,CAACkB,EAAEoB,EAAE,KAAK,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,IAAI,GAAG,EAAEtC,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,IAAI,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEorD,GAAG,KAAK,EAAE,EAAE3tD,GAAG,EAAEA,EAAEW,EAAE,EAAEV,EAAEkB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE,GAAGX,EAAE,CAACmB,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,IAAI,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAG,IAAIU,IAAI,EAAE,GAAGA,EAAE,EAAE,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGV,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,MAAM,CAAC,OAAOX,GAAG,IAAI,IAAI,KAAK,MAAM,MAAM,QAAQ,MAAMwC,EAAE,GAAGmC,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGqrD,EAAE,GAAG7qD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIA,IAAI,EAAE,KAAK,GAAG,EAAEA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,SAAQ,GAAG,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGqrD,EAAE,GAAG7qD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,GAAG,EAAEA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEA,EAAE,GAAG,GAAGX,GAAG,IAAI,GAAG,MAAM,CAAC,OAAOA,GAAG,IAAI,IAAI,KAAM,MAAM,MAAM,QAAQ,MAAMW,EAAE,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,GAAG,EAAE,KAAK4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGqrD,EAAE,GAAG7qD,EAAE,KAAK,IAAIR,GAAG,EAAE,MAAM,GAAG,EAAEA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,MAAM,CAAC,GAAGX,GAAG,IAAI,IAAI,MAAM,CAAC,OAAOA,GAAG,IAAI,IAAI,KAAK,MAAM,MAAM,QAAQ,MAAMW,EAAE,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEi7C,GAAGr8C,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIA,IAAI,EAAE,IAAI,EAAE6B,EAAEwpD,EAAE,EAAExO,GAAG,EAAE,GAAG,EAAEr8C,EAAE,OAAOR,EAAE,IAAI,IAAI,KAAK68C,EAAE,EAAE,IAAI,EAAEh7C,EAAEA,IAAI,GAAG,IAAI7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,OAAOX,GAAG,IAAI,IAAI,KAAK,MAAM,MAAM,QAAQ,MAAMW,EAAE,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,GAAG,EAAE,KAAK4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,KAAK,EAAE,GAAGlB,EAAE,EAAE,EAAE,CAACuC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGtC,EAAEstD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGqrD,EAAE,GAAG/rD,GAAG,IAAIU,GAAG,EAAE,MAAM,GAAG,EAAEA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,SAAQ,GAAG,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEi7C,GAAGr8C,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,EAAE6B,EAAEwpD,EAAE,EAAExO,GAAG,EAAE,GAAG,EAAEr8C,EAAE,OAAOR,EAAE,IAAI,IAAI,KAAK68C,EAAE,EAAE,IAAI,EAAEh7C,EAAEA,IAAI,GAAG,IAAI7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAIqrD,EAAE,GAAG7qD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIA,IAAI,EAAE,IAAI,GAAG,GAAG,MAAMA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQA,EAAE,QAAQ,IAAI,IAAI,KAAK,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAIqrD,EAAE,GAAG7qD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,MAAMA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEi7C,GAAGr8C,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,EAAE6B,EAAEwpD,EAAE,EAAExO,GAAG,EAAE,GAAG,EAAEh7C,GAAGg7C,EAAE,EAAE,IAAI,EAAEh7C,EAAEA,IAAI,EAAErB,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAI6B,EAAE,IAAI,IAAI,EAAEA,EAAE,IAAIA,GAAG,IAAI7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAEwpD,EAAE,GAAG7qD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAI6B,EAAE,MAAM,IAAI,EAAEA,EAAE,MAAMA,GAAG,MAAM7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,CAAC,KAAKA,EAAE,OAAO,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE,KAAKA,IAAI,EAAE,IAAIX,EAAEmB,EAAE,KAAK,MAAM,CAACnB,EAAEmB,EAAE,KAAK,EAAEnB,GAAGC,EAAE,GAAG,IAAIU,IAAI,EAAE,IAAI,IAAI,EAAEX,GAAG,UAAUA,EAAE,UAAUmB,EAAE,KAAKnB,EAAEC,EAAEA,IAAIU,IAAI,EAAE,IAAIQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGV,EAAEU,GAAGV,EAAE,GAAG,EAAED,GAAG,WAAWA,EAAE,WAAWmB,EAAE,MAAMlB,EAAE,IAAI,EAAEU,EAAE,WAAWA,GAAG,WAAWA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEX,EAAEmB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAI,GAAG,IAAIX,EAAE,CAACA,EAAEmB,EAAE,KAAK,EAAEtC,EAAE,QAAQ,CAAC,GAAGmB,IAAI,EAAE,GAAG,CAACnB,EAAEsC,EAAE,KAAK,EAAEtC,GAAG,GAAG,GAAGmB,EAAEC,EAAE,IAAI,EAAEpB,GAAG,UAAUA,EAAE,UAAUsC,EAAE,KAAKtC,EAAEoB,EAAEA,GAAGD,EAAEA,EAAEnB,EAAEA,EAAE,IAAI,MAAM,IAAImB,EAAE,IAAI,GAAG,CAACwC,EAAErB,EAAE,KAAK,EAAElB,GAAGA,EAAE,EAAE,IAAI,EAAEuC,GAAG,UAAUA,EAAE,eAAevC,EAAEkB,EAAE,MAAM,UAAUA,EAAE,KAAKlB,EAAEkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEV,EAAEA,EAAE,WAAWpB,EAAE,WAAU,GAAG,GAAG,IAAIA,EAAE,IAAI,IAAI,CAACsC,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGV,EAAE,IAAIA,EAAE,IAAI,EAAE,IAAIA,EAAE,CAACA,EAAED,EAAE,WAAWnB,EAAE,IAAI,UAAU,CAACoB,EAAED,EAAE,WAAW,UAAU,CAACC,EAAED,EAAE,YAAY,WAAW,cAAa,GAAG,IAAInB,EAAE,IAAI,IAAIoB,EAAEA,EAAE,WAAWkB,EAAE,KAAKlB,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,KAAK,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE,GAAG,GAAGA,IAAI,EAAE,GAAG,CAACX,EAAEmB,EAAE,KAAK,EAAEnB,GAAGC,EAAE,IAAIU,IAAI,EAAE,KAAK,EAAE,IAAI,EAAEX,GAAG,UAAUA,EAAE,UAAUmB,EAAE,KAAKnB,EAAEmB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGV,KAAKU,IAAI,EAAE,IAAI,IAAIV,KAAKU,IAAI,EAAE,IAAI,IAAI,EAAE,KAAKV,KAAKU,IAAI,EAAE,KAAK,CAACV,EAAED,EAAE,WAAWnB,EAAE,IAAI,UAAU,CAACoB,EAAED,EAAE,WAAW,UAAU,CAACC,EAAED,EAAE,YAAY,WAAW,WAAW,CAACnB,EAAEsC,EAAE,KAAK,EAAElB,GAAGA,EAAE,IAAI,EAAEpB,GAAG,UAAUA,EAAE,UAAUsC,EAAE,KAAKlB,EAAEkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEV,EAAEA,EAAE,WAAWpB,EAAE,WAAU,GAAG,IAAIA,EAAE,IAAI,IAAIoB,EAAEA,EAAE,WAAWkB,EAAE,KAAKlB,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEX,EAAEmB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAI,GAAG,IAAIX,EAAE,CAACA,EAAEmB,EAAE,KAAK,EAAEtC,EAAE,QAAQ,CAAC,GAAGmB,IAAI,EAAE,GAAG,CAACnB,EAAEsC,EAAE,KAAK,EAAEtC,GAAG,GAAGmB,GAAG,EAAEC,EAAE,IAAI,EAAEpB,GAAG,UAAUA,EAAE,UAAUsC,EAAE,KAAKtC,EAAEoB,EAAEA,IAAID,EAAEA,EAAEnB,EAAEA,EAAE,IAAI,MAAM,IAAImB,EAAE,IAAI,GAAG,CAACwC,EAAErB,EAAE,KAAK,EAAElB,GAAGA,EAAE,IAAI,EAAEuC,GAAG,UAAUA,EAAE,eAAevC,EAAEkB,EAAE,MAAM,UAAUA,EAAE,KAAKlB,EAAEkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEV,EAAEA,EAAE,WAAWpB,EAAE,WAAU,GAAG,GAAG,IAAIA,EAAE,IAAI,IAAI,CAACsC,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGV,EAAE,IAAIA,EAAE,IAAI,EAAE,IAAIA,EAAE,CAACA,EAAED,EAAE,WAAWnB,EAAE,IAAI,UAAU,CAACoB,EAAED,EAAE,WAAW,UAAU,CAACC,EAAED,EAAE,YAAY,WAAW,cAAa,GAAG,IAAInB,EAAE,IAAI,IAAIoB,EAAEA,EAAE,WAAWkB,EAAE,KAAKlB,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,KAAK,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGA,EAAE,IAAI6B,EAAErB,EAAE,KAAK,WAAWA,EAAE,MAAMR,EAAE,IAAI,IAAI,EAAE6B,EAAE,WAAWA,EAAE7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,KAAK,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG6B,EAAE7B,EAAEQ,EAAE,KAAK,EAAER,GAAG6B,EAAE,GAAG,EAAE7B,GAAG,WAAWA,EAAE,WAAWQ,EAAE,OAAOqB,EAAE,IAAI,EAAE7B,EAAE,WAAWA,GAAG,aAAa,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAEA,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,OAAOR,IAAI,EAAE,KAAK,IAAI,GAAG,EAAE,IAAIA,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,GAAGV,EAAE,EAAE,EAAE,CAACuC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGtC,EAAEstD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEtC,EAAEA,GAAG,EAAE,IAAIU,IAAI,EAAE,EAAEA,EAAE,EAAE,IAAI,GAAG,CAACQ,EAAE,KAAKlB,EAAE,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,MAAM,CAACQ,EAAE,OAAOR,IAAI,EAAE,EAAEA,EAAE,IAAI,IAAI,GAAGV,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,GAAG,SAASA,EAAE,QAAQ,MAAM,KAAK,EAAE,SAAS,GAAG,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAEpB,EAAED,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG6B,EAAE7B,EAAEQ,EAAE,KAAK,EAAER,GAAG6B,EAAE,GAAG,EAAE7B,GAAG,WAAWA,EAAE,WAAWQ,EAAE,MAAMqB,EAAE,IAAI,EAAE7B,EAAE,WAAWA,GAAG,WAAWA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAI6B,EAAE7B,EAAEQ,EAAE,KAAK,EAAER,GAAG6B,EAAE,IAAI,EAAE7B,GAAG,WAAWA,EAAE,WAAWQ,EAAE,MAAMqB,EAAE,KAAK,EAAE7B,EAAE,WAAWA,GAAG,WAAWA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEi7C,EAAEr8C,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAE68C,EAAE78C,EAAEQ,EAAE,KAAK,EAAER,GAAG,EAAE68C,EAAE,GAAG,EAAE78C,GAAG,WAAWA,EAAE,WAAWA,GAAG68C,EAAE,IAAI,EAAE78C,EAAE,WAAWA,GAAG,WAAW6B,MAAMg7C,EAAE,YAAY,EAAE,KAAK,MAAMA,IAAI,IAAI,EAAE78C,GAAG6B,EAAE,EAAE,IAAI,EAAE7B,GAAG,UAAUA,EAAE,UAAUQ,EAAE,SAASq8C,EAAE,YAAY,EAAE,KAAK,GAAG,KAAKh7C,IAAI,EAAE,GAAG7B,GAAG,UAAUA,EAAE,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG6B,EAAE7B,EAAEQ,EAAE,KAAK,EAAER,GAAG6B,EAAE,GAAG,EAAE7B,GAAG,WAAWA,EAAE,WAAWQ,EAAE,MAAMqB,EAAE,IAAI,EAAE7B,EAAE,WAAWA,GAAG,WAAWA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,QAAQA,EAAE,QAAQ,IAAI,IAAI,KAAM,MAAM,CAAC,KAAKgE,EAAE,MAAM,GAAG3E,EAAEW,EAAE,MAAM,CAACX,EAAEmB,EAAE,KAAK,EAAEwsD,GAAG,KAAK,EAAE,EAAE3tD,GAAG,EAAE,KAAKW,EAAE,GAAGV,EAAE,MAAM,CAACkB,EAAEoB,EAAE,KAAK,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,IAAI,GAAG,EAAEtC,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,IAAI,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,IAAI,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAE2tD,GAAG,KAAK,EAAE,EAAE3tD,GAAG,EAAE2tD,GAAG,KAAK,EAAE,EAAE3tD,GAAG,EAAEA,EAAEW,EAAE,EAAEV,EAAEkB,EAAE,KAAK,EAAE,GAAGnB,EAAE,CAACmB,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,IAAI,CAACQ,EAAE,KAAK6qD,EAAE,EAAE/rD,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,IAAI,CAACX,EAAEgsD,EAAE,EAAE/rD,EAAE,GAAG,EAAE,KAAKD,EAAE,GAAG,CAACW,EAAEQ,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGC,EAAErB,EAAEoB,EAAE,IAAI,GAAG,GAAGvC,EAAEutD,GAAG5sD,EAAE,KAAK4B,EAAE,IAAI,GAAG,EAAEvC,EAAEA,GAAG,EAAEmB,EAAE,KAAKnB,EAAE,GAAG,EAAEC,EAAEA,EAAE,EAAE,EAAEkB,EAAE,KAAKlB,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAM,MAAM,CAAC68C,EAAEr8C,EAAE,KAAK,EAAE,KAAKwD,EAAE,MAAM,GAAG,CAAC1E,EAAEU,EAAE,EAAEX,EAAEW,EAAE,EAAEjB,EAAEiB,EAAE,EAAEgD,EAAEhD,EAAE,GAAGkD,EAAElD,EAAE,GAAG9B,EAAE8B,EAAE,GAAGhG,EAAEgG,EAAE,IAAI+D,EAAE/D,EAAE,IAAIiE,EAAEjE,EAAE,MAAM,CAACgtD,GAAG,KAAK,EAAE,EAAEnQ,GAAG,EAAE,KAAK78C,EAAE,GAAGV,EAAE,MAAM,CAACkB,EAAEoB,EAAE,KAAK,GAAG,EAAEgrD,GAAG/P,EAAE,KAAKj7C,EAAE,IAAI,GAAG,EAAEtC,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAGlQ,GAAG,EAAEr8C,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAG/P,EAAE,KAAKj7C,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAGlQ,GAAG,EAAEr8C,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAG/P,EAAE,KAAKj7C,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAGlQ,GAAG,EAAEr8C,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAG/P,EAAE,KAAKj7C,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAGlQ,GAAG,EAAEr8C,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAG/P,EAAE,KAAKj7C,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAGlQ,GAAG,EAAEr8C,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAG/P,EAAE,KAAKj7C,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAGlQ,GAAG,EAAEr8C,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAG/P,EAAE,KAAKj7C,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,IAAI,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAGlQ,GAAG,EAAEr8C,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAG/P,EAAE,KAAKj7C,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,IAAI,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAGlQ,GAAG,EAAEmQ,GAAG,KAAK,EAAE,EAAEnQ,GAAG,EAAEmQ,GAAG,KAAK,EAAE,EAAEnQ,GAAG,EAAEv9C,EAAEU,EAAE,EAAEX,EAAEW,EAAE,EAAEjB,EAAEiB,EAAE,EAAEgD,EAAEhD,EAAE,GAAGkD,EAAElD,EAAE,GAAG9B,EAAE8B,EAAE,GAAGhG,EAAEgG,EAAE,IAAI+D,EAAE/D,EAAE,IAAIiE,EAAEjE,EAAE,EAAEkD,GAAG1C,EAAE,KAAK,IAAIyD,GAAG3E,IAAI,IAAID,IAAI,IAAIN,IAAI,IAAIiE,IAAI,IAAIE,IAAI,IAAIhF,IAAI,IAAIlE,IAAI,IAAI+J,IAAI,IAAI,GAAG,EAAEzE,EAAE4D,EAAEnE,EAAE,EAAEiE,EAAE,EAAE,MAAM,EAAE,CAAC,KAAKA,EAAEhD,GAAGX,EAAEC,MAAM,CAACD,EAAEmB,EAAE,MAAMzB,GAAG,IAAI,GAAG,EAAE6C,EAAE,GAAG,IAAItC,GAAG,UAAU,KAAK,UAAU,CAAC2E,EAAE3E,EAAE,UAAU,EAAE,OAAO2E,IAAI,EAAEA,GAAG,GAAG,GAAG,KAAK,EAAE,CAACA,EAAEzD,EAAE,KAAK,EAAEA,EAAE,KAAKnB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAG4E,EAAE,EAAE,IAAI,EAAE,MAAMrC,EAAEpB,EAAE,KAAKA,EAAE,KAAK,MAAMoB,EAAE,KAAK,EAAE,CAACpB,EAAE,KAAKnB,EAAE,SAAS,MAAMuC,EAAE,KAAK,EAAE,CAACpB,EAAE,KAAKnB,EAAE,SAAS,MAAMuC,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,QAAQ0pD,EAAE,EAAEhsD,EAAE,EAAED,EAAE,GAAG,QAAQ,GAAGA,EAAEC,EAAE,EAAE,EAAEP,EAAEA,EAAE,EAAE,EAAE,IAAIA,EAAE,IAAI,EAAE,UAAU,CAACO,EAAED,EAAE2D,EAAEA,GAAG,EAAE,KAAK,GAAG,GAAGe,EAAE,EAAE,CAACzE,EAAEkB,EAAE,KAAK,EAAEd,EAAE,GAAG,IAAIL,GAAG,UAAU,KAAK,UAAU,CAACW,EAAEX,EAAE,UAAU,EAAE,OAAOW,IAAI,EAAEA,GAAG,GAAG,GAAG,KAAK,EAAE,CAACA,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKlB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGU,EAAE,EAAE,IAAI,EAAE,MAAMN,EAAEc,EAAE,KAAKA,EAAE,KAAK,MAAMd,EAAE,KAAK,EAAE,CAACc,EAAE,KAAKlB,EAAE,SAAS,MAAMI,EAAE,KAAK,EAAE,CAACc,EAAE,KAAKlB,EAAE,SAAS,MAAMI,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,QAAQ4rD,EAAE,EAAEjsD,EAAE,EAAEC,EAAE,GAAG,QAAQ,GAAG,GAAGA,EAAE,EAAE,EAAE,MAAMkB,EAAEoB,EAAE,KAAK,GAAGC,EAAErB,EAAEoB,EAAE,IAAI,GAAG,GAAGtC,EAAEstD,GAAG/P,EAAE,KAAKj7C,EAAE,IAAI,GAAG,SAAQ,GAAGpB,EAAE,KAAK0C,EAAElD,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,CAACoE,EAAE,GAAG,GAAG9E,GAAG,IAAI,IAAI,MAAM,OAAOA,GAAG,IAAI,IAAI,KAAM,MAAM,CAAC,GAAG0E,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGitD,GAAGzsD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,EAAEA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAM,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG6B,GAAG,EAAE,MAAMA,IAAI,EAAE,IAAIA,IAAI,IAAI,GAAGA,IAAI,IAAI,GAAG7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,MAAMoE,MAAM,CAAC,GAAG9E,GAAG,IAAI,GAAG,MAAM,CAAC,OAAOA,GAAG,IAAI,IAAI,KAAM,MAAM,MAAM,QAAQ,MAAM8E,EAAE,GAAGJ,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAI6B,EAAE,IAAI,IAAI,EAAEA,GAAG,EAAE,MAAMA,IAAI,EAAE,IAAIA,GAAG,EAAE,MAAMA,IAAI,EAAE,KAAK,MAAM7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,OAAOV,GAAG,IAAI,IAAI,KAAK,MAAM,MAAM,KAAK,MAAM,CAAC,GAAG0E,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEvC,EAAEmB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEjB,EAAEyB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE6B,EAAErB,EAAE,KAAK,EAAEA,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGX,EAAEN,GAAG,GAAG8C,IAAI,GAAG,GAAGvC,GAAGD,EAAEN,GAAG,GAAG8C,IAAI,GAAG,GAAG,GAAG,EAAEA,GAAG,WAAWA,EAAE,WAAWvC,GAAGD,EAAEN,GAAG,GAAG8C,IAAI,GAAG,GAAG,IAAI,EAAEvC,EAAE,WAAWA,GAAG,WAAWkB,EAAE,KAAKlB,EAAE,KAAKA,EAAE,WAAW,CAACuC,IAAI9C,IAAI,KAAKM,IAAI,QAAQN,EAAE,aAAaM,EAAE,YAAY,KAAK,IAAI,EAAEW,GAAG6B,EAAE,EAAE,IAAI,EAAEvC,GAAG,UAAUA,EAAE,UAAUkB,EAAE,SAASzB,EAAE,aAAaM,EAAE,YAAY,KAAK,GAAG,KAAKwC,IAAI,EAAE,EAAE,GAAG7B,GAAG,UAAUA,EAAE,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,MAAM,CAAC6B,IAAI9C,IAAI,KAAKM,IAAI,QAAQN,EAAE,aAAaM,EAAE,YAAY,EAAE,KAAK,IAAI,EAAEW,GAAG6B,EAAE,EAAE,IAAI,EAAEvC,GAAG,UAAUA,EAAE,UAAUkB,EAAE,SAASzB,EAAE,aAAaM,EAAE,YAAY,EAAE,KAAK,GAAG,KAAKwC,IAAI,EAAE,EAAE,GAAG7B,GAAG,UAAUA,EAAE,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,GAAG,QAAQ,MAAMoE,EAAE,GAAGJ,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEtC,EAAEkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEX,EAAEmB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE,GAAG,GAAGX,EAAE,IAAI,KAAKA,EAAE,IAAI,CAACA,EAAEmB,EAAE,KAAK,EAAEnB,GAAGC,EAAE,IAAI,EAAED,GAAG,UAAUA,EAAE,UAAUmB,EAAE,KAAKnB,EAAE,UAAU,CAACwC,EAAErB,EAAE,KAAK,EAAEqB,GAAG,IAAIxC,EAAE,KAAK,EAAEC,EAAE,IAAI,EAAEuC,GAAG,UAAUA,EAAE,UAAUrB,EAAE,KAAKqB,EAAEvC,EAAEA,GAAG,IAAID,EAAE,IAAIC,KAAKD,EAAE,IAAIA,EAAEwC,EAAE,WAAWxC,EAAEmB,EAAE,KAAK,QAAQ,GAAGA,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGV,EAAEU,GAAGV,EAAE,GAAG,EAAED,GAAG,WAAWA,EAAE,WAAWmB,EAAE,MAAMlB,EAAE,IAAI,EAAEU,EAAE,WAAWA,GAAG,WAAWA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,SAAQ,GAAG,IAAIA,EAAE,MAAM,IAAI,MAAM,CAACgtD,GAAG,KAAK,GAAG,EAAExsD,EAAE,KAAK,GAAG,EAAER,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAES,EAAE,GAAG,GAAGpB,GAAG,IAAI,GAAG,MAAM,CAAC,OAAOA,GAAG,IAAI,IAAI,KAAM,MAAM,MAAM,QAAQ,MAAMoB,EAAE,GAAGuD,EAAE,MAAM,EAAE,CAAC3E,EAAEmB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAE4sD,GAAGvtD,EAAE,KAAKuC,EAAE,IAAI,GAAG,EAAE,KAAK5B,EAAE,GAAGV,EAAE,MAAM,CAACkB,EAAEoB,EAAE,KAAK,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,IAAI,GAAG,EAAEtC,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,KAAK,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,IAAI,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,GAAG,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEtC,EAAEA,EAAE,EAAE,EAAE,GAAGU,EAAE,IAAI,EAAE,CAAC,GAAGV,EAAE,EAAEytD,GAAG,GAAG1tD,GAAG,EAAEmB,EAAEoB,EAAE,MAAM,GAAG,EAAEgrD,GAAGvtD,EAAE,KAAKuC,EAAE,KAAK,GAAG,EAAEorD,GAAG,KAAK,EAAE,EAAE3tD,GAAG,EAAEN,EAAE,EAAEiE,EAAE,EAAE1D,EAAEkB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE,MAAM,EAAE,CAAC,GAAGjB,EAAEiB,EAAE,CAACX,EAAEmB,EAAE,MAAMwC,GAAG,IAAI,GAAG,EAAEjD,EAAE,GAAG,IAAIT,GAAG,UAAU,KAAK,UAAU,CAACuC,EAAEvC,EAAE,UAAU,EAAE,OAAOuC,IAAI,EAAEA,GAAG,GAAG,GAAG,KAAK,EAAE,CAACA,EAAErB,EAAE,KAAK,EAAEA,EAAE,KAAKnB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGwC,EAAE,EAAE,IAAI,EAAE,MAAM9B,EAAES,EAAE,KAAKA,EAAE,KAAK,MAAMT,EAAE,KAAK,EAAE,CAACS,EAAE,KAAKnB,EAAE,SAAS,MAAMU,EAAE,KAAK,EAAE,CAACS,EAAE,KAAKnB,EAAE,SAAS,MAAMU,EAAE,KAAK,EAAE,MAAMA,EAAE,QAAQ,MAAMA,QAAQurD,EAAE,EAAEhsD,EAAE,EAAED,EAAE,GAAG,QAAQ,GAAGC,EAAEA,EAAE,EAAE,EAAE0D,EAAEA,EAAE,EAAE,EAAE,IAAIA,EAAE,IAAI,EAAE,WAAWjE,EAAEA,GAAG,EAAE,IAAIyB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGV,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,MAAM,CAAC,OAAOX,GAAG,IAAI,IAAI,KAAK,MAAM,MAAM,QAAQ,MAAMoB,EAAE,GAAGuD,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEvC,GAAGmB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIA,IAAI,EAAE,KAAK,EAAEV,EAAEkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAE,IAAIX,GAAG,UAAU,KAAK,UAAU,CAACisD,EAAE,EAAEjsD,EAAE,EAAEC,EAAE,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQX,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAACW,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKlB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGU,EAAE,EAAE,IAAI,EAAE,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKA,EAAE,KAAKR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAACQ,EAAE,KAAKlB,EAAE,SAASU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAACQ,EAAE,KAAKlB,EAAE,SAASU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,WAAU,GAAG,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEvC,GAAGmB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,EAAEV,EAAEkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAE,IAAIX,GAAG,UAAU,KAAK,UAAU,CAACisD,EAAE,EAAEjsD,EAAE,EAAEC,EAAE,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQX,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAACW,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKlB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGU,EAAE,EAAE,IAAI,EAAE,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKA,EAAE,KAAKR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAACQ,EAAE,KAAKlB,EAAE,SAASU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAACQ,EAAE,KAAKlB,EAAE,SAASU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,IAAIF,EAAE,GAAG,GAAGT,GAAG,IAAI,GAAG,MAAM,CAAC,OAAOA,GAAG,IAAI,IAAI,KAAM,MAAM,MAAM,QAAQ,MAAMS,EAAE,GAAGkE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,GAAG,EAAE,KAAK4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEvC,GAAGmB,EAAE,KAAK,IAAIR,GAAG,EAAE,MAAM,EAAEV,EAAEkB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE,IAAIX,GAAG,UAAU,KAAK,UAAU,CAACisD,EAAE,EAAEjsD,EAAE,EAAEC,EAAE,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQX,EAAE,UAAU,KAAK,EAAEA,EAAE,WAAW,GAAG,GAAG,KAAK,EAAE,CAACW,EAAEQ,EAAE,KAAK,EAAEA,EAAE,KAAKlB,EAAE,MAAM,IAAIA,EAAE,EAAE,IAAI,GAAGU,EAAE,EAAE,IAAI,EAAE,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEQ,EAAE,KAAKA,EAAE,KAAKR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAACQ,EAAE,KAAKlB,EAAE,SAASU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAACQ,EAAE,KAAKlB,EAAE,SAASU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAK,EAAE,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,CAACA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,QAAQ,CAAC,OAAOX,GAAG,IAAI,IAAI,KAAK,MAAM,MAAM,QAAQ,MAAMS,EAAE,GAAGkE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAE7C,GAAGyB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIA,IAAI,EAAE,IAAI,EAAEV,EAAEkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEX,EAAEgsD,EAAE,EAAEtsD,GAAG,EAAE,GAAG,EAAE,KAAKA,EAAE,GAAGO,EAAED,EAAE,MAAMC,EAAE,SAASA,EAAED,EAAE,IAAIC,GAAG,EAAEgsD,EAAE,EAAEvsD,GAAG,EAAE,EAAEO,EAAE,MAAM,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,SAAQ,GAAG,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAE7C,GAAGyB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,EAAEV,EAAEkB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,EAAEX,EAAEgsD,EAAE,EAAEtsD,GAAG,EAAE,GAAG,EAAE,KAAKA,EAAE,GAAGO,EAAED,EAAE,MAAMC,EAAE,SAASA,EAAED,EAAE,IAAIC,GAAG,EAAEgsD,EAAE,EAAEvsD,GAAG,EAAE,EAAEO,EAAE,MAAM,GAAG,EAAEU,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,GAAG4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAE0pD,EAAE,GAAG9qD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIA,IAAI,EAAE,IAAI,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,MAAM,GAAG,EAAEA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAEilD,EAAE,GAAG,IAAIjlD,EAAE,QAAQ,IAAI,GAAG,MAAM,CAAC,QAAQA,EAAE,QAAQ,IAAI,IAAI,KAAK,KAAK,MAAM,QAAQ,MAAMilD,EAAE,GAAGjhD,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEmC,EAAEvD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG+D,GAAG/D,IAAI,EAAE,GAAG6B,EAAErB,EAAE,KAAK,EAAEqB,GAAGkC,GAAG/D,IAAI,EAAE,GAAG,GAAG,EAAE6B,GAAG,WAAWA,EAAE,WAAWA,GAAGkC,GAAG/D,IAAI,EAAE,GAAG,IAAI,EAAE6B,EAAE,WAAWA,GAAG,WAAWg7C,GAAG94C,IAAI,IAAI,KAAK,YAAY/D,IAAI,EAAE,IAAI+D,EAAE,YAAY,KAAK,IAAI,EAAElC,GAAGg7C,EAAE,EAAE,IAAI,EAAEh7C,GAAG,UAAUA,EAAE,UAAUrB,EAAE,QAAQ,YAAYR,IAAI,EAAE,IAAI+D,EAAE,YAAY,KAAK,GAAG,KAAK84C,IAAI,EAAE,EAAE,GAAGh7C,GAAG,UAAUA,EAAE,UAAU7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,MAAM,CAAC,QAAQA,EAAE,QAAQ,IAAI,IAAI,KAAK,MAAM,MAAM,QAAQ,MAAMilD,EAAE,GAAGjhD,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAE0pD,EAAE,GAAG9qD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG,MAAM,GAAG,EAAEA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,SAAQ,GAAG,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEmC,EAAEvD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG+D,GAAG/D,EAAE,KAAK6B,EAAErB,EAAE,KAAK,EAAEqB,GAAGkC,GAAG/D,EAAE,KAAK,GAAG,EAAE6B,GAAG,WAAWA,EAAE,WAAWA,GAAGkC,GAAG/D,EAAE,KAAK,IAAI,EAAE6B,EAAE,WAAWA,GAAG,WAAWg7C,GAAG94C,IAAI,IAAI,KAAK,YAAY/D,EAAE,MAAM+D,EAAE,YAAY,KAAK,IAAI,EAAElC,GAAGg7C,EAAE,EAAE,IAAI,EAAEh7C,GAAG,UAAUA,EAAE,UAAUrB,EAAE,QAAQ,YAAYR,EAAE,MAAM+D,EAAE,YAAY,KAAK,GAAG,KAAK84C,IAAI,EAAE,EAAE,GAAGh7C,GAAG,UAAUA,EAAE,UAAU7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,KAAK,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEmC,EAAEvD,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAE68C,EAAEr8C,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAG+D,EAAE84C,EAAE78C,EAAEQ,EAAE,KAAK,EAAER,GAAG+D,EAAE84C,EAAE,GAAG,EAAE78C,GAAG,WAAWA,EAAE,WAAWA,GAAG+D,EAAE84C,EAAE,IAAI,EAAE78C,EAAE,WAAWA,GAAG,WAAW6B,IAAIg7C,IAAI,KAAK94C,IAAI,OAAOA,EAAE,YAAY,IAAI84C,EAAE,YAAY,KAAK,IAAI,EAAE78C,GAAG6B,EAAE,EAAE,IAAI,EAAE7B,GAAG,UAAUA,EAAE,UAAUQ,EAAE,QAAQuD,EAAE,YAAY,IAAI84C,EAAE,YAAY,KAAK,GAAG,KAAKh7C,IAAI,EAAE,EAAE,GAAG7B,GAAG,UAAUA,EAAE,UAAUA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,GAAG,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,MAAMA,EAAE,KAAK,IAAIR,GAAG,EAAE,KAAKA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,IAAIA,EAAE,MAAM,IAAI,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAE,IAAI5B,EAAE,IAAI,IAAI,IAAI,CAACQ,EAAE,KAAKA,EAAE,KAAKR,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,MAAM,CAAC6B,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,IAAI4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAE5B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,GAAGmC,EAAE,GAAG,GAAG7C,GAAG,IAAI,KAAK,MAAM,CAAC,GAAGA,GAAG,IAAI,IAAI,MAAM,CAAC,OAAOA,GAAG,IAAI,IAAI,KAAM,MAAM,MAAM,QAAQ,MAAM6C,EAAE,GAAG6B,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,MAAMA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,GAAGV,GAAG,IAAI,GAAG,MAAM,CAAC,OAAOA,GAAG,IAAI,IAAI,KAAM,MAAM,MAAM,QAAQ,MAAM6C,EAAE,GAAG6B,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,IAAIA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,MAAM,CAAC,OAAOV,GAAG,IAAI,IAAI,KAAK,MAAM,MAAM,QAAQ,MAAM6C,EAAE,GAAG6B,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAGQ,EAAE,OAAOR,EAAE,IAAI,IAAI,GAAGA,EAAEQ,EAAE,KAAK,EAAER,GAAG6B,EAAE,GAAG,EAAE7B,GAAG,WAAWA,EAAE,WAAWQ,EAAE,MAAMqB,EAAE,IAAI,EAAE7B,EAAE,WAAWA,GAAG,WAAWA,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,QAAQ,OAAOV,GAAG,IAAI,IAAI,KAAM,MAAM,CAAC,GAAG0E,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAI6B,EAAE,IAAI,IAAI,EAAEA,EAAE,IAAIA,GAAG,IAAI7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,KAAM,MAAM,CAAC,GAAGgE,EAAE,MAAM,EAAE,CAACnC,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAG5B,EAAE,EAAEQ,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,IAAI,EAAE,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAEC,EAAErB,EAAE,OAAOR,IAAI,EAAE,IAAI,IAAI,GAAG,EAAEQ,EAAE,OAAOR,EAAE,IAAI,IAAI,IAAI6B,EAAE,MAAM,IAAI,EAAEA,EAAE,MAAMA,GAAG,MAAM7B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,EAAE,QAAQ,MAAMmC,SAAQ,GAAGN,EAAErB,EAAE,KAAK,EAAEA,EAAEoB,EAAE,KAAK,GAAGsB,EAAE1C,EAAEoB,EAAE,IAAI,GAAG,GAAG5B,EAAE4sD,GAAG/qD,EAAE,KAAKD,EAAE,IAAI,GAAG,EAAE5B,EAAE,EAAEisD,EAAErqD,EAAE,OAAO5B,EAAE,YAAY,OAAO,EAAE,SAASktD,GAAGlpD,GAAGA,EAAEA,EAAE,EAAE,IAAI1E,EAAE,EAAEA,EAAE2sD,EAAEA,EAAEA,EAAE,GAAG,EAAEzrD,EAAElB,GAAG,GAAG6tD,GAAG3sD,EAAEwD,EAAE,IAAI,GAAG,GAAG,EAAEA,EAAEopD,GAAGnqD,EAAE,EAAE3D,EAAE,GAAG,GAAG,EAAE2sD,EAAE3sD,EAAE,OAAO0E,EAAE,EAAE,SAASqpD,GAAGrpD,EAAE1E,EAAED,GAAG2E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAE,IAAIN,EAAE,EAAEiE,EAAE,EAAEE,EAAE,EAAEhF,EAAE,EAAElE,EAAE,EAAEiK,EAAE,EAAEF,EAAE,EAAE7F,EAAE+tD,EAAEA,EAAEA,EAAE,GAAG,EAAE/oD,EAAE1C,EAAEwD,EAAE,IAAI,GAAG,EAAExD,EAAEtC,GAAG,GAAGgF,EAAEA,GAAG1C,EAAEwD,EAAE,IAAI,GAAG,GAAGd,EAAE,EAAE1C,EAAEtC,EAAE,GAAG,GAAGgF,EAAE1C,EAAEtC,EAAE,GAAG,GAAGoB,EAAEkB,EAAEtC,EAAE,IAAI,GAAGmB,EAAE2D,EAAE,EAAE1D,EAAE4D,EAAE7D,EAAE,EAAE6D,EAAEhF,EAAE,MAAM,EAAE,CAAC,MAAMm+B,EAAE77B,EAAEwD,EAAE,IAAI,GAAG,EAAEd,EAAE,EAAEF,EAAE,EAAE9E,EAAE,GAAG,GAAG,IAAI,IAAI,IAAIa,EAAEyB,EAAEtC,EAAE,IAAI,GAAG,MAAM,CAACsC,EAAEtC,EAAE,IAAI,IAAI,EAAEa,GAAG,EAAE,IAAIO,EAAE,KAAKP,EAAE,GAAG,CAACO,EAAE,EAAE,MAAM,IAAIP,EAAE,GAAG,EAAE,CAACO,EAAE,EAAE,MAAMyE,EAAEvD,EAAE0C,EAAE,GAAG,GAAG,EAAEe,EAAElF,IAAI,EAAEgF,IAAI,EAAE/J,EAAEiK,EAAEf,EAAE,EAAE,EAAEA,EAAEa,EAAEhF,GAAGkF,EAAEF,EAAE,GAAG,EAAEvD,EAAExG,GAAG,IAAIwG,EAAExG,GAAG,GAAG,GAAG+J,EAAEvD,EAAExG,EAAE,GAAG,IAAIwG,EAAExG,EAAE,GAAG,GAAG,GAAG+J,EAAEf,EAAEA,GAAGiB,GAAG,IAAI,IAAI,EAAE3E,EAAEA,EAAEP,EAAE,EAAEmE,EAAElJ,EAAE,IAAIsF,EAAE,IAAI,EAAE,CAACyE,EAAEvD,EAAEwD,EAAE,IAAI,GAAG,EAAExD,EAAEwD,EAAE,IAAI,GAAGD,GAAGvD,EAAEwD,EAAE,IAAI,GAAG,GAAGxD,EAAEwD,EAAE,IAAI,GAAGD,EAAEvD,EAAEwD,EAAE,IAAI,GAAGD,OAAO,IAAIzE,EAAE,IAAI,EAAE,CAACkB,EAAEwD,EAAE,IAAI,GAAG,EAAExD,EAAEwD,EAAE,IAAI,GAAG,EAAExD,EAAEwD,EAAE,IAAI,GAAG,EAAExD,EAAEwD,GAAG,GAAGxD,EAAEwD,GAAG,GAAG,GAAG,IAAIhB,EAAE,IAAI,EAAE3D,EAAE,OAAOA,EAAEA,GAAGmB,EAAE0C,EAAE,GAAG,GAAG,GAAG,EAAE+oD,EAAE/tD,EAAE,OAAOmB,EAAE,EAAE,SAASiuD,GAAGtpD,EAAE1E,EAAED,EAAEN,GAAGiF,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAE,IAAIiE,EAAE,EAAEA,EAAEipD,EAAEA,EAAEA,EAAE,GAAG,EAAEzrD,EAAEwC,EAAE,GAAG,GAAGxC,EAAEwD,EAAE,IAAI,GAAGxD,EAAEwC,EAAE,EAAE,GAAG,GAAG3D,EAAEmB,EAAEwC,EAAE,EAAE,GAAG,GAAG1D,EAAEkB,EAAEwC,EAAE,EAAE,IAAI,GAAGA,EAAExC,EAAEwC,EAAE,EAAE,IAAI,GAAGjE,EAAE,IAAIquD,GAAG95C,EAAE,IAAItQ,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,CAACxC,EAAEwC,GAAG,IAAI,EAAExC,EAAEwC,EAAE,GAAG,IAAI,EAAEgB,GAAG,EAAE1E,GAAG,MAAM,CAAC0E,EAAExD,EAAEwC,EAAE,GAAG,GAAG,EAAE1D,EAAEkB,EAAEwC,GAAG,GAAG,EAAEiiD,EAAEjhD,EAAE,GAAGioD,EAAEjpD,EAAE,OAAO1D,EAAE,EAAE,SAAS8tD,GAAGppD,GAAGA,EAAEA,EAAE,EAAE,GAAGA,IAAI,EAAE,WAAW,CAACxD,GAAG+sD,KAAK,IAAI,GAAG,EAAEvpD,EAAEA,GAAG,EAAE,OAAOA,EAAE,EAAE,SAASupD,KAAK,OAAO,KAAK,SAASJ,GAAGnpD,GAAGA,EAAEA,EAAE,EAAE,OAAOA,EAAE,EAAE,SAASwpD,GAAGxpD,GAAGA,EAAEA,EAAE,EAAE,OAAQA,GAAG,GAAG,KAAK,EAAE,GAAG,EAAE,SAASypD,KAAK,OAAO,IAAI,SAAST,GAAGhpD,EAAE1E,EAAED,EAAEN,GAAGiF,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAE,IAAIiE,EAAE,EAAEE,EAAE,EAAEF,EAAEvC,EAAEpB,EAAEC,GAAG,EAAED,GAAGC,EAAE,IAAI,EAAE,EAAED,EAAE,IAAImB,EAAEzB,EAAE,IAAI,GAAG,IAAI,EAAE,CAACmE,GAAGwqD,GAAG3uD,GAAG,IAAI,EAAEiF,EAAE2pD,GAAG3pD,EAAEhB,EAAEjE,GAAG,EAAE,IAAImE,EAAE0qD,GAAG7uD,QAAQiF,EAAE2pD,GAAG3pD,EAAEhB,EAAEjE,GAAG,EAAE,IAAIiF,EAAE,KAAKhB,EAAE,GAAG3D,GAAG2E,IAAI,IAAI1E,IAAI,GAAG,EAAE,OAAOD,EAAE,EAAE,SAASuuD,GAAG5pD,GAAGA,EAAEA,EAAE,EAAE,OAAO,SAAS0pD,GAAG1pD,GAAGA,EAAEA,EAAE,EAAE,OAAO,EAAE,SAAS6pD,GAAGvuD,EAAEP,GAAGO,EAAEA,EAAE,EAAEP,EAAEA,EAAE,EAAE,IAAIiE,EAAE,EAAEE,EAAE,EAAEhF,EAAE,EAAElE,EAAE,EAAEA,EAAEiyD,EAAEA,EAAEA,EAAE,GAAG,EAAEjoD,EAAEhK,GAAG,GAAG+E,EAAEiE,EAAExC,EAAElB,EAAE,IAAI,GAAG,EAAE,IAAI0D,EAAE,KAAK8qD,GAAGxuD,GAAG,GAAG,CAAC4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG,EAAEpB,EAAE,OAAO8E,GAAG,MAAM,CAACE,EAAEF,EAAE9E,EAAE,EAAE,GAAG,IAAIA,EAAE,IAAI,EAAE,CAAC8E,EAAExC,EAAElB,EAAE,IAAI,GAAG,EAAE,GAAG0D,IAAI,EAAEE,IAAI,GAAGnE,EAAE,IAAI,KAAKiF,EAAE1E,EAAE,IAAI,GAAG,GAAG,EAAE,CAACkB,EAAElB,EAAE,IAAI,GAAG0D,EAAE,EAAEgB,EAAEhB,GAAG,GAAGjE,EAAEiE,EAAEjE,EAAE,IAAI,MAAM,IAAIggC,GAAEv+B,EAAElB,EAAE,IAAI,GAAG,GAAGA,EAAEtF,EAAE,GAAG,IAAI,EAAEgJ,EAAE3D,EAAErF,GAAG,GAAG,OAAOgJ,GAAG,SAAQ,GAAGipD,EAAEjyD,EAAE,OAAOgJ,EAAE,EAAE,SAAS8qD,GAAGxuD,GAAGA,EAAEA,EAAE,EAAE,IAAID,EAAE,EAAEA,EAAE2E,EAAE1E,EAAE,IAAI,GAAG,EAAE0E,EAAE1E,EAAE,IAAI,GAAGD,EAAE,IAAIA,EAAEA,EAAEmB,EAAElB,GAAG,GAAG,EAAE,KAAKD,EAAE,GAAG,CAACmB,EAAElB,EAAE,GAAG,GAAG,EAAEkB,EAAElB,EAAE,GAAG,GAAG,EAAED,EAAEmB,EAAElB,EAAE,IAAI,GAAG,EAAEkB,EAAElB,EAAE,IAAI,GAAGD,EAAEmB,EAAElB,EAAE,IAAI,GAAGD,EAAEmB,EAAElB,EAAE,IAAI,GAAGD,GAAGmB,EAAElB,EAAE,IAAI,GAAG,GAAGA,EAAE,MAAM,CAACkB,EAAElB,GAAG,GAAGD,EAAE,GAAGC,GAAG,EAAE,OAAOA,EAAE,EAAE,SAASquD,GAAGruD,EAAED,EAAEN,GAAGO,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAE,IAAIiE,EAAE,EAAEE,EAAE,EAAEhF,EAAE,EAAElE,EAAE,EAAEgJ,EAAExC,EAAEzB,EAAE,IAAI,GAAG,EAAE,IAAIiE,EAAE,KAAK8qD,GAAG/uD,GAAG,GAAG,CAACmE,EAAE1C,EAAEzB,EAAE,IAAI,GAAG,EAAEb,EAAE,OAAO8E,EAAE,MAAM,CAACE,EAAEF,EAAE9E,EAAE,EAAE8F,EAAE,GAAG,IAAI9F,EAAE,IAAI,EAAE,CAAC8E,EAAExC,EAAEzB,EAAE,IAAI,GAAG,EAAE,IAAImE,EAAEF,EAAE,KAAK,EAAE3D,IAAI,EAAE,CAAC2D,EAAE+7B,GAAEv+B,EAAEzB,EAAE,IAAI,GAAG,GAAGA,EAAEO,EAAED,GAAG,EAAE,MAAMC,EAAE,GAAG,IAAI0E,EAAEjF,EAAE,IAAI,GAAG,GAAG,GAAGM,EAAE,IAAI,EAAE,CAACrF,EAAE,EAAEkJ,EAAE5D,MAAM,CAACpB,EAAEmB,EAAE,MAAM,EAAE,CAAC6D,EAAEhF,GAAG,EAAE,EAAE,IAAI8F,EAAE1E,EAAE4D,GAAG,GAAG,IAAI,GAAG,MAAM,IAAIA,EAAE,CAAClJ,EAAE,EAAEkJ,EAAE5D,EAAE,MAAMA,OAAOpB,EAAEgF,EAAEF,EAAE+7B,GAAEv+B,EAAEzB,EAAE,IAAI,GAAG,GAAGA,EAAEO,EAAEpB,GAAG,EAAE,GAAG8E,IAAI,EAAE9E,IAAI,EAAE,MAAM8F,EAAEhK,EAAEkE,EAAEgF,EAAE5D,EAAEpB,EAAE,EAAEmB,EAAEA,EAAEnB,EAAE,EAAE8E,EAAExC,EAAEzB,EAAE,IAAI,GAAG,SAAQ,GAAGgvD,GAAG/qD,EAAE,EAAEE,EAAE,EAAE7D,EAAE,GAAG,EAAEmB,EAAEzB,EAAE,IAAI,IAAIyB,EAAEzB,EAAE,IAAI,GAAG,GAAGM,EAAE2D,EAAEhJ,EAAEqF,EAAE,SAAQ,GAAG,OAAO2D,EAAE,EAAE,SAASgrD,GAAG1uD,EAAED,EAAEN,GAAGO,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAE,IAAIiE,EAAE,EAAEE,EAAE,EAAEhF,EAAE,EAAE8F,EAAE,GAAG,IAAIjF,EAAE,IAAI,GAAGO,EAAE,EAAE,IAAI,EAAE,CAAC0D,EAAEjE,EAAE,MAAM,EAAE,CAAC,IAAIiF,EAAE1E,GAAG,GAAG,KAAKD,EAAE,MAAM,IAAI,GAAG,CAAC6D,EAAE,EAAE,MAAMc,EAAE1E,EAAEA,EAAE,EAAE,EAAEP,EAAEiE,GAAG,EAAE,EAAE,IAAIjE,EAAE,IAAI,GAAGO,EAAE,EAAE,IAAI,EAAE0D,EAAEjE,MAAM,CAACiE,EAAEjE,EAAEA,GAAGA,EAAE,IAAI,EAAEmE,EAAE,EAAE,YAAY,CAACF,EAAEjE,EAAEA,GAAGA,EAAE,IAAI,EAAEmE,EAAE,SAAQ,GAAG,IAAIA,EAAE,IAAI,EAAE,GAAGnE,EAAEmE,EAAE,OAAOA,EAAE,GAAG5D,EAAE,GAAG,IAAI4D,EAAE,IAAI,EAAE,CAAC,IAAIc,EAAE1E,GAAG,GAAG,KAAKD,EAAE,MAAM,IAAI,GAAG,IAAI2D,EAAE,CAACE,EAAE,GAAG,WAAW,MAAMnE,EAAE0B,EAAEpB,EAAE,IAAI,UAAU,EAAEmB,EAAE,GAAG,GAAGwC,IAAI,EAAE,EAAE,MAAM,EAAE,CAAC9E,EAAEsC,EAAElB,GAAG,GAAGP,EAAE,IAAIb,GAAG,YAAY,YAAYA,GAAG,SAAS,EAAE,MAAMsC,EAAElB,EAAEA,EAAE,EAAE,EAAE0D,EAAEA,GAAG,EAAE,EAAE,GAAGA,IAAI,GAAG,EAAE,CAACE,EAAE,GAAG,YAAYA,EAAE,SAAS,GAAG,IAAIA,EAAE,IAAI,GAAG,IAAIF,EAAE,CAACE,EAAE,GAAG,MAAM,MAAM,EAAE,CAAC,IAAIc,EAAE1E,GAAG,GAAG,KAAKD,EAAE,MAAM,IAAI,GAAG,MAAMC,EAAE0D,EAAEA,GAAG,EAAE,EAAE,IAAIA,EAAE,CAACE,EAAE,GAAG,WAAW5D,EAAEA,EAAE,EAAE,UAAS,GAAG,IAAI4D,EAAE,IAAI,GAAG5D,EAAE,EAAE,OAAOA,EAAE,EAAE,SAASstD,GAAG5oD,EAAE1E,EAAED,GAAG2E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAE,IAAIN,EAAE,EAAEA,EAAEktD,EAAEA,EAAEA,EAAE,GAAG,EAAEzrD,EAAEzB,GAAG,GAAGM,EAAEA,EAAE4uD,GAAGjqD,EAAE1E,EAAEP,GAAG,EAAEktD,EAAEltD,EAAE,OAAOM,EAAE,EAAE,SAAS4uD,GAAGjqD,EAAE1E,EAAEkB,GAAGwD,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAE,OAAO0tD,GAAGlqD,EAAE1E,EAAEkB,EAAE,EAAE,GAAG,EAAE,SAAS2tD,GAAG7uD,EAAEP,EAAEiE,EAAEE,EAAEhF,EAAElE,GAAGsF,EAAEA,EAAE,EAAEP,GAAGA,EAAEiE,EAAEA,EAAE,EAAEE,EAAEA,EAAE,EAAEhF,EAAEA,EAAE,EAAElE,EAAEA,EAAE,EAAE,IAAIiK,EAAE,EAAEF,EAAE,EAAE84C,EAAE,EAAEh7C,EAAE,EAAE7B,EAAE,IAAI4B,EAAE,EAAElC,EAAE,EAAE0E,EAAE,EAAErE,EAAE,EAAED,EAAE,EAAEmlD,EAAE,EAAE3oB,EAAE,EAAEhpB,EAAE,EAAErQ,EAAE,EAAEo5B,EAAE,EAAEgvB,EAAE,EAAEC,EAAE,EAAEA,EAAEW,EAAEA,EAAEA,EAAE,IAAI,EAAEzrD,EAAE8qD,EAAE,KAAK,GAAG,EAAED,EAAEC,EAAE,IAAI,GAAG,EAAE8C,GAAGrvD,GAAG,EAAEkF,EAAE9B,IAAI,EAAE,IAAI8B,EAAE,GAAG,EAAE,CAACmqD,IAAIrvD,GAAG,EAAEA,GAAGA,EAAEs9B,EAAE,EAAE/oB,EAAE,KAAKrP,EAAE9B,IAAI,MAAM,CAACk6B,GAAGn+B,EAAE,KAAK,IAAI,EAAE,EAAEoV,GAAGpV,EAAE,KAAK,IAAI,GAAIA,EAAE,EAAE,IAAI,EAAE,KAAK,KAAM,KAAK,GAAG,GAAG,GAAG,GAAG+F,EAAE,WAAW,IAAI,WAAW,CAACA,EAAEo4B,EAAE,EAAE,EAAEgyB,GAAG/uD,EAAE,GAAG0D,EAAEiB,EAAE/F,GAAG,OAAOowD,GAAGhvD,EAAEgU,EAAE+oB,GAAGiyB,GAAGhvD,EAAEP,GAAGA,EAAE,KAAK,IAAK/E,EAAE,GAAG,EAAE,KAAK,KAAMA,EAAE,GAAG,EAAE,KAAK,KAAK,GAAGq0D,GAAG/uD,EAAE,GAAG0D,EAAEiB,EAAE/F,EAAE,UAAU,CAAC8B,GAAGuuD,GAAGxvD,EAAEusD,EAAE,IAAI,GAAG,IAAI,GAAGtrD,GAAG,IAAIQ,EAAE8qD,EAAE,KAAK,IAAI9qD,EAAE8qD,EAAE,KAAK,GAAG,IAAI,EAAE,IAAItxD,EAAE,GAAG,IAAI,GAAG,CAAC0F,GAAG1F,EAAE,GAAG,IAAI,EAAEsZ,EAAEA,EAAE,EAAE,EAAE1R,EAAEy6B,EAAE,EAAE,GAAG,KAAKn5B,IAAI,EAAE,IAAI,GAAGA,EAAE,IAAI,GAAG,CAACnE,EAAE,IAAIkF,EAAE,GAAGf,EAAE,EAAE,EAAE,CAACe,EAAEA,GAAG,EAAE,EAAElF,EAAEA,EAAE,YAAYkF,EAAE,IAAI,GAAG,IAAID,EAAEtE,GAAG,GAAG,IAAI,GAAG,CAACX,IAAIA,IAAIiB,EAAEjB,IAAI,UAAU,CAACA,EAAEiB,EAAEjB,EAAEA,EAAE,YAAYA,EAAEiB,QAAQ,GAAG+D,EAAEvD,EAAE8qD,EAAE,KAAK,GAAG,EAAErnD,GAAGF,EAAE,GAAG,EAAE,EAAEA,EAAE,EAAEA,EAAEE,EAAEuqD,GAAGvqD,IAAIA,EAAE,GAAG,IAAI,IAAI,GAAGonD,GAAG,EAAE,IAAIpnD,EAAE,KAAKonD,EAAE,GAAG,CAACrnD,EAAEsnD,EAAE,IAAI,IAAI,GAAG,GAAGrnD,EAAEqnD,EAAE,IAAI,GAAG,EAAEtnD,EAAEC,GAAG,GAAG,IAAIF,GAAG,GAAG,GAAG,GAAGlC,EAAEoC,GAAG,EAAE,EAAED,EAAEnC,GAAG,GAAG7H,EAAE,GAAGiK,EAAEqnD,EAAE,EAAE,CAACjvB,IAAIt9B,EAAEgF,EAAEE,EAAE,EAAE,EAAED,EAAEC,GAAG,GAAGjK,EAAE,GAAGqF,EAAE,IAAIg9B,GAAG,GAAGt9B,GAAGA,IAAIs9B,EAAE,IAAI,KAAK,IAAIt4B,EAAEunD,EAAE,IAAI,KAAKptD,EAAE,EAAE,IAAI,IAAIgF,EAAE,GAAG,EAAEnE,GAAG,MAAM,EAAE,CAACiF,EAAED,GAAG,GAAG,GAAGE,EAAEA,EAAE,EAAE,OAAOA,EAAEF,QAAQhF,GAAG,KAAK89C,EAAE54C,EAAE,IAAIf,EAAE,IAAI,IAAI,EAAEooD,EAAEzO,EAAE,IAAI35C,EAAE,GAAG,EAAE,CAACA,EAAEA,EAAE,EAAEmoD,EAAExpD,EAAE,EAAEoC,EAAEonD,EAAEtnD,EAAElC,MAAM,CAACqB,EAAEmoD,EAAEC,EAAEzpD,EAAEg7C,EAAE,EAAE54C,EAAEonD,EAAEtnD,EAAElC,EAAEwpD,EAAEnoD,EAAEtB,EAAE,EAAEysD,GAAG/uD,EAAE,GAAG0D,EAAEqoD,EAAEntD,GAAGowD,GAAGhvD,EAAEI,EAAEkC,GAAGysD,GAAG/uD,EAAE,GAAG0D,EAAEqoD,EAAEntD,EAAE,OAAOowD,GAAGhvD,EAAEgsD,EAAEzO,EAAEyO,EAAE,GAAGrnD,EAAEA,EAAEF,EAAE,EAAEsqD,GAAG/uD,EAAE,GAAG4D,GAAG25C,EAAEyO,EAAErnD,GAAG,EAAE,EAAE,GAAGqqD,GAAGhvD,EAAEuC,EAAEoC,GAAGoqD,GAAG/uD,EAAE,GAAG0D,EAAEqoD,EAAEntD,EAAE,MAAM+F,EAAEonD,EAAE,MAAMtnD,GAAGb,EAAE,GAAG,EAAE,EAAEA,EAAE,GAAGlD,GAAG,IAAI,CAACiE,GAAGzD,EAAE8qD,EAAE,KAAK,GAAG,IAAI,GAAG,EAAE9qD,EAAE8qD,EAAE,KAAK,GAAGrnD,EAAElF,EAAEiB,EAAE,gBAAgB,CAACjB,EAAEiB,EAAEiE,EAAEzD,EAAE8qD,EAAE,KAAK,GAAG,EAAEroD,GAAGgB,EAAE,GAAG,EAAEqnD,EAAE,GAAG,EAAEA,EAAE,GAAG,IAAI,EAAEpoD,EAAED,EAAE,EAAE,CAACgiD,IAAIlmD,IAAI,EAAEyB,EAAE0C,GAAG,GAAG+hD,EAAE/hD,EAAEA,EAAE,EAAE,EAAEnE,GAAGA,IAAIkmD,IAAI,IAAI,YAAYlmD,GAAG,KAAK,IAAIkF,EAAE,GAAG,EAAE,CAACrC,EAAEqB,EAAE,MAAM,EAAE,CAACpB,GAAGoC,EAAE,GAAG,GAAGA,EAAE,GAAGA,EAAEf,GAAG,EAAE,EAAE,GAAGe,IAAI,GAAGrC,IAAI,EAAE,CAACi7C,EAAE,EAAE,EAAE,CAAC98C,EAAE0uD,GAAGjuD,EAAEyD,GAAG,GAAG,EAAE,EAAEpC,EAAE,GAAG,EAAE9B,EAAE2uD,GAAG3uD,EAAE,EAAEoC,IAAI,EAAE06C,EAAE,EAAE,GAAG,EAAE/8C,EAAEqC,IAAI,EAAE06C,EAAE8R,GAAG5uD,EAAE,EAAED,EAAE,EAAE,IAAI,GAAG,EAAEmlD,EAAE2J,GAAG/R,EAAE,EAAE16C,IAAI,EAAE,IAAI,GAAG,EAAE8iD,EAAE4J,GAAG9uD,EAAE,EAAED,EAAE,EAAEmlD,EAAE,EAAE9iD,IAAI,GAAG,EAAEA,IAAI,EAAE3B,EAAEyD,GAAG,GAAGghD,EAAEhhD,EAAEA,GAAG,EAAE,QAAQA,IAAI,GAAGrC,IAAI,GAAG,GAAGi7C,EAAE,CAACoI,EAAErjD,GAAG,EAAE,EAAEpB,EAAEykD,GAAG,GAAGpI,EAAEA,EAAEoI,OAAOpI,EAAEj7C,OAAOi7C,EAAEj7C,EAAEoC,EAAE,GAAG,GAAGd,IAAI,EAAE25C,IAAI,EAAE,CAAC54C,EAAEf,EAAE,MAAM,EAAE,CAACA,EAAEe,GAAG,EAAE,EAAE,GAAGzD,EAAE0C,GAAG,GAAG,EAAE,CAACA,EAAEe,EAAE,MAAMD,EAAE,GAAGd,IAAI,EAAE25C,IAAI,EAAE54C,EAAEf,OAAO,cAAa,GAAGe,GAAGzD,EAAE8qD,EAAE,KAAK,GAAG,GAAGzpD,EAAE,EAAErB,EAAE8qD,EAAE,KAAK,GAAGrnD,EAAE,IAAIA,EAAE,GAAG,EAAErC,EAAEi7C,OAAO,YAAYA,EAAE55C,EAAE,IAAIgB,EAAE,GAAG,EAAE,CAAC,EAAE,CAACrC,EAAE,EAAEqC,EAAE,EAAErC,GAAGA,EAAE,GAAG,EAAEA,EAAE,EAAE,GAAGi7C,IAAI,EAAE35C,IAAI,EAAE,CAACrB,EAAE,EAAEoC,EAAE44C,EAAE,EAAE,CAACoI,EAAEzkD,EAAEyD,GAAG,GAAG,EAAEzD,EAAEyD,GAAG,IAAIghD,IAAIrjD,GAAGC,EAAEA,EAAEpB,EAAEwkD,GAAG,GAAGrjD,IAAI,EAAE,MAAMA,GAAG,EAAEqC,EAAEA,EAAE,EAAE,QAAQA,IAAI,EAAEf,IAAI,GAAGe,GAAGzD,EAAEq8C,GAAG,GAAG,IAAI,EAAEA,EAAE,EAAE,EAAEA,EAAE,IAAIh7C,EAAEg7C,EAAE54C,MAAM,CAACzD,EAAE0C,GAAG,GAAGrB,EAAEqB,EAAEA,EAAE,EAAE,EAAE25C,EAAE54C,QAAQ44C,GAAGr8C,EAAEq8C,GAAG,GAAG,IAAI,EAAEA,EAAE,EAAE,EAAEA,EAAE54C,GAAGjK,EAAE,GAAG,IAAI,IAAIiJ,EAAE45C,EAAE35C,GAAGA,EAAEe,GAAG,EAAE,MAAMF,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,GAAGE,KAAKF,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAEb,EAAEe,GAAGzD,EAAE8qD,EAAE,KAAK,GAAG,GAAG1pD,EAAE,EAAEpB,EAAE8qD,EAAE,KAAK,GAAGrnD,SAASA,EAAE,GAAG,GAAGA,EAAE44C,OAAO54C,EAAE44C,EAAE,GAAG54C,IAAI,EAAEf,IAAI,EAAE,CAAC25C,GAAG55C,EAAEgB,GAAG,GAAG,EAAE,EAAErC,EAAEpB,EAAEyD,GAAG,GAAG,EAAE,GAAGrC,IAAI,GAAG,GAAG,CAACC,EAAE,GAAG,EAAE,CAACA,EAAEA,EAAE,GAAG,EAAEg7C,EAAEA,EAAE,EAAE,QAAQj7C,IAAI,GAAGC,IAAI,SAASg7C,EAAE,EAAEh7C,EAAEkC,IAAI/J,EAAE,GAAG,IAAI,IAAI,EAAE6iD,MAAM94C,EAAE,IAAI,GAAG/J,EAAE,GAAG,IAAI,MAAM,IAAI,IAAI,EAAE,IAAI6H,EAAE,MAAMqB,EAAED,GAAG,GAAG,EAAE,IAAI,EAAE,GAAG,CAACvD,EAAEuD,EAAE,KAAKpB,EAAE,KAAK,GAAG,EAAE,IAAI,MAAM,GAAG,EAAEA,EAAEA,EAAE,QAAQA,EAAE,KAAK,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAIA,EAAE,GAAG,EAAE,CAACD,EAAE,GAAG,MAAM,EAAE,CAACA,EAAEA,EAAE,GAAG,EAAE,IAAIC,EAAE,GAAG,EAAEA,EAAEA,EAAE,EAAE,OAAO,YAAYD,EAAE,GAAG7B,EAAES,EAAEd,GAAG,GAAG,EAAEmC,GAAG9B,IAAI,IAAI6B,IAAI,GAAG,EAAE9B,EAAEC,GAAGU,EAAEoB,EAAED,GAAG,GAAG,EAAEwC,GAAG1E,EAAE,EAAE,KAAKwD,EAAE,GAAG,KAAKkB,GAAGtE,EAAE,IAAI,GAAG,CAACf,GAAG8C,EAAE,EAAE,IAAI,EAAE,mBAAmB,mBAAmBojD,EAAErjD,IAAI,EAAE5B,EAAEF,IAAI,EAAEmlD,IAAI,EAAE,GAAG7gD,GAAGtE,EAAE,KAAKmlD,EAAE,GAAG,IAAI,IAAI,GAAG5oB,EAAE,CAAC4oB,GAAGjhD,EAAEsP,GAAG,GAAG,IAAI,GAAGtT,EAAEilD,GAAGjlD,EAAEA,EAAEjB,EAAEkmD,GAAGlmD,EAAEA,EAAEyB,EAAEd,GAAG,GAAGK,EAAED,EAAE,GAAGf,EAAEiB,GAAGjB,EAAE,CAACkmD,EAAEllD,EAAED,EAAE8B,EAAE,EAAEpB,EAAEd,GAAG,GAAGulD,EAAE,GAAGA,IAAI,EAAE,UAAU,CAACpjD,EAAEnC,EAAE,MAAM,EAAE,CAACm9C,EAAEh7C,GAAG,EAAE,EAAErB,EAAEqB,GAAG,GAAG,EAAE,GAAGg7C,IAAI,EAAE54C,IAAI,EAAE,CAACA,EAAEA,GAAG,EAAE,EAAEzD,EAAEyD,GAAG,GAAG,EAAEghD,GAAGzkD,EAAEq8C,GAAG,GAAG,GAAG,EAAE,EAAEr8C,EAAEq8C,GAAG,GAAGoI,EAAE,GAAGA,IAAI,EAAE,UAAUpjD,EAAEg7C,MAAM,CAACn9C,EAAEm9C,EAAE,QAAQA,GAAG55C,EAAEgB,GAAG,GAAG,EAAE,EAAErC,EAAEpB,EAAEyD,GAAG,GAAG,EAAE,GAAGrC,IAAI,EAAE,GAAGC,EAAEnC,MAAM,CAACmC,EAAE,GAAG,EAAE,CAACA,EAAEA,EAAE,GAAG,EAAEg7C,EAAEA,EAAE,EAAE,QAAQj7C,IAAI,GAAGC,IAAI,GAAGA,EAAEnC,QAAQmC,EAAEnC,OAAOmC,EAAEnC,EAAEI,EAAE+B,EAAE,EAAE,EAAEqB,EAAEA,IAAI,EAAEpD,IAAI,EAAEA,EAAEoD,EAAEpD,EAAEmE,OAAOnE,EAAEmE,EAAEvE,EAAE,EAAEm9C,EAAE,EAAEv9C,EAAE,GAAG,GAAG4D,IAAI,EAAEpD,IAAI,EAAE,MAAM,EAAE,CAACmE,EAAEf,GAAG,EAAE,EAAE,GAAG1C,EAAEyD,GAAG,GAAG,EAAE,CAACghD,EAAE/hD,EAAEnD,EAAE,EAAE,MAAMT,EAAE,GAAG2E,IAAI,EAAEnE,IAAI,EAAEoD,EAAEe,MAAM,CAACghD,EAAEhhD,EAAElE,EAAE,EAAE,WAAW,CAACklD,EAAE/hD,EAAEnD,EAAE,SAAQ,GAAG,GAAG,IAAI/F,EAAE,GAAG,IAAI,IAAI,CAAC,IAAI6iD,EAAE,IAAI,GAAG94C,KAAKA,EAAE,IAAI,EAAE,GAAG,GAAG,IAAI84C,EAAE,GAAG,EAAE,CAACh7C,EAAE7H,GAAG,EAAE,EAAE+J,EAAEA,KAAKA,EAAE,IAAI,EAAE,GAAG,IAAI,EAAE84C,EAAE,MAAM,CAACh7C,EAAE7H,GAAG,EAAE,EAAE+J,EAAEA,KAAKA,EAAE,IAAI,EAAE,GAAG,IAAI,EAAE,EAAE,KAAK7F,EAAE,GAAG,CAAC,GAAG6B,GAAGu8B,EAAE97B,EAAEykD,GAAG,GAAG,GAAG,GAAG3oB,EAAE,IAAI,GAAG,EAAE,MAAMA,IAAI,GAAG,GAAG,GAAG,CAACr4B,EAAE,EAAEf,EAAE,GAAG,EAAE,CAACA,EAAEA,EAAE,GAAG,EAAEe,EAAEA,EAAE,EAAE,WAAWq4B,IAAI,IAAIp5B,IAAI,GAAG,EAAE,SAASe,EAAE,OAAOA,EAAE,EAAEf,IAAI+hD,EAAEhiD,GAAG,GAAG,EAAE,IAAI,EAAE,EAAE,IAAIpB,EAAE,GAAG,IAAI,IAAI,CAAC7H,EAAEkJ,EAAEe,EAAE,EAAEjK,GAAGA,EAAE,GAAG,EAAEA,EAAE,EAAE+J,GAAGA,EAAE,IAAI/J,EAAE,GAAG+J,EAAE/J,EAAE,UAAU,CAACA,EAAEkJ,EAAE25C,EAAE54C,EAAE,EAAEjK,GAAGA,EAAE,GAAG,EAAEA,EAAE,EAAE+J,GAAGA,EAAE,IAAI/J,EAAE,GAAG+J,EAAE/J,EAAE,aAAa6H,EAAE7H,QAAQ,GAAGoK,GAAGL,EAAE,IAAI,EAAEb,EAAEkB,EAAE,EAAElG,IAAI,EAAE,EAAE0D,GAAGC,EAAE,GAAG,IAAI,IAAI,GAAGD,EAAE,CAAClC,EAAE,EAAEuE,GAAG44C,EAAE,GAAG,EAAEA,EAAE,MAAM,CAAC54C,GAAG44C,EAAE,GAAG,EAAEn9C,EAAEm9C,EAAE54C,EAAEuqD,GAAGvqD,IAAIA,EAAE,GAAG,IAAI,IAAI,GAAGonD,GAAG,EAAE,IAAIA,EAAEpnD,EAAE,GAAG,EAAE,EAAE,CAACA,EAAEA,GAAG,EAAE,EAAED,EAAEC,GAAG,GAAG,UAAUonD,EAAEpnD,EAAE,GAAG,GAAGD,EAAEC,GAAG,GAAG,IAAI44C,GAAG,GAAG,GAAG,GAAG54C,EAAEA,GAAG,EAAE,EAAED,EAAEC,GAAG,GAAGpC,EAAEnC,EAAEuE,EAAEA,EAAEonD,EAAEpnD,EAAE,EAAEA,EAAEo4B,EAAE,EAAEt4B,EAAEb,EAAEe,EAAE,EAAEoqD,GAAG/uD,EAAE,GAAG0D,EAAEiB,EAAE/F,GAAGowD,GAAGhvD,EAAEgU,EAAE+oB,GAAGgyB,GAAG/uD,EAAE,GAAG0D,EAAEiB,EAAE/F,EAAE,OAAO,GAAG0D,EAAE,CAACC,EAAE/B,IAAI,EAAEmD,IAAI,EAAEA,EAAEnD,EAAE+8C,EAAEh7C,EAAE,EAAE,CAACqB,EAAEsrD,GAAGhuD,EAAEq8C,GAAG,GAAG,EAAE,EAAEyO,EAAE,EAAE,GAAG,EAAE,IAAIzO,EAAE,KAAKh7C,EAAE,GAAG,CAAC,IAAIqB,EAAE,KAAKooD,EAAE,EAAE,GAAG,CAACtnD,EAAEsnD,EAAE,GAAG,GAAG,GAAGpoD,EAAEooD,EAAE,EAAE,QAAQ,GAAGpoD,IAAI,EAAEooD,IAAI,EAAE,CAACwD,GAAGxD,EAAE,EAAE,GAAGpoD,EAAEooD,EAAE,GAAG,EAAE,GAAGpoD,EAAEA,GAAG,EAAE,QAAQA,IAAI,EAAEooD,IAAI,GAAGgD,GAAGhvD,EAAE4D,EAAEooD,EAAE,EAAEpoD,EAAE,GAAG25C,EAAEA,EAAE,EAAE,QAAQA,IAAI,GAAG55C,IAAI,GAAG,MAAM/E,EAAE,EAAE,IAAI,GAAGkG,EAAE,IAAIkqD,GAAGhvD,EAAE,KAAK,GAAG,GAAGu9C,IAAI,EAAEoI,IAAI,GAAGlhD,EAAE,GAAG,EAAE,MAAM,EAAE,CAACb,EAAEsrD,GAAGhuD,EAAEq8C,GAAG,GAAG,EAAE,EAAEyO,EAAE,EAAE,GAAG,EAAE,GAAGpoD,IAAI,EAAEooD,IAAI,EAAE,CAACwD,GAAGxD,EAAE,EAAE,GAAGpoD,EAAEooD,EAAE,GAAG,EAAE,GAAGpoD,EAAEA,GAAG,EAAE,QAAQA,IAAI,EAAEooD,IAAI,GAAGgD,GAAGhvD,EAAE4D,GAAGa,EAAE,GAAG,EAAEA,EAAE,GAAG84C,EAAEA,EAAE,EAAE,EAAE35C,EAAEa,GAAG,EAAE,EAAE,KAAK84C,IAAI,EAAEoI,IAAI,GAAGlhD,EAAE,GAAG,GAAG,CAACA,EAAEb,EAAE,WAAWa,EAAEb,EAAEmrD,GAAG/uD,EAAE,GAAGyE,EAAE,EAAE,EAAE,EAAE,OAAO,CAACnC,EAAE7B,EAAEklD,EAAEnlD,EAAE,EAAE,EAAE,GAAGA,IAAI,EAAE8B,IAAI,GAAGmC,EAAE,IAAI,EAAE,CAAClC,EAAE/B,EAAE,EAAE,CAACoD,EAAEsrD,GAAGhuD,EAAEqB,GAAG,GAAG,EAAE,EAAEypD,EAAE,EAAE,GAAG,EAAE,IAAIpoD,EAAE,KAAKooD,EAAE,EAAE,GAAG,CAACtnD,EAAEsnD,EAAE,GAAG,GAAG,GAAGpoD,EAAEooD,EAAE,EAAE,EAAE,GAAG,IAAIzpD,EAAE,KAAK/B,EAAE,GAAG,CAAC+8C,EAAE35C,EAAE,EAAE,EAAEorD,GAAGhvD,EAAE4D,EAAE,GAAG,IAAIhF,EAAE,EAAE,IAAI,GAAG6F,EAAE,GAAG,EAAE,CAACb,EAAE25C,EAAE,MAAMyR,GAAGhvD,EAAE,KAAK,GAAG4D,EAAE25C,MAAM,CAAC,GAAG35C,IAAI,GAAGooD,IAAI,EAAE,MAAMwD,GAAGxD,EAAE,EAAE,GAAGpoD,GAAG,EAAEooD,GAAG,GAAG,EAAE,GAAGpoD,EAAEA,GAAG,EAAE,QAAQA,IAAI,EAAEooD,IAAI,UAAS,GAAGjvB,EAAEivB,EAAE,EAAEpoD,EAAE,EAAEorD,GAAGhvD,EAAE4D,GAAGa,EAAE,IAAIs4B,EAAE,GAAGA,EAAEt4B,GAAGA,EAAEA,EAAEs4B,EAAE,EAAEx6B,EAAEA,EAAE,EAAE,QAAQA,IAAI,EAAED,IAAI,GAAGmC,EAAE,IAAI,GAAGsqD,GAAG/uD,EAAE,GAAGyE,EAAE,GAAG,EAAE,GAAG,GAAGuqD,GAAGhvD,EAAEI,EAAE2rD,EAAE3rD,EAAE,GAAG2uD,GAAG/uD,EAAE,GAAG0D,EAAEiB,EAAE/F,EAAE,aAAY,GAAG+tD,EAAEX,EAAE,QAASrnD,EAAE,IAAIjB,EAAE,GAAGA,EAAEiB,GAAG,EAAE,SAAS8qD,GAAG/qD,EAAE1E,GAAG0E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAE,IAAID,EAAE,IAAIN,EAAE,EAAEA,GAAGyB,EAAElB,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAGD,GAAG6D,EAAEnE,GAAG,GAAGyB,EAAElB,GAAG,GAAGP,EAAE,EAAEmE,EAAEc,GAAG,GAAG3E,EAAE,OAAO,SAAS6uD,GAAG5uD,EAAED,EAAEN,EAAEiE,EAAEE,GAAG5D,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAEiE,EAAEA,EAAE,EAAEE,EAAEA,EAAE,EAAE,IAAIhF,EAAE,EAAElE,EAAE,EAAEiK,EAAE,EAAEF,EAAE,EAAEA,EAAEkoD,EAAEA,EAAEA,EAAE,IAAI,EAAE/tD,EAAE6F,EAAE,IAAI,EAAE/J,EAAEkE,EAAE,GAAG,EAAE,EAAE,CAACsC,EAAEtC,GAAG,GAAG,EAAEA,EAAEA,EAAE,EAAE,SAASA,EAAE,IAAIlE,EAAE,IAAIwG,EAAEuD,EAAE,KAAK,GAAGvD,EAAEzB,GAAG,GAAG,IAAIiwD,GAAG,EAAE3vD,EAAE0E,EAAE,IAAI,EAAEA,EAAE,GAAG,EAAEA,EAAE,IAAI,EAAEf,EAAEE,GAAG,GAAG,EAAEnE,GAAG,MAAM,CAAC,IAAIyB,EAAElB,EAAE,IAAI,GAAG,IAAI,EAAE2E,EAAEypD,GAAGpuD,GAAG,OAAO2E,EAAE,EAAEjK,EAAEwG,EAAElB,GAAG,GAAG,EAAE,IAAI0E,EAAE1E,EAAE,IAAI,GAAG,GAAG,EAAEkB,EAAElB,GAAG,GAAGtF,GAAG,GAAG,KAAKwG,EAAElB,EAAE,IAAI,GAAG,GAAG,CAACpB,EAAEsC,EAAElB,EAAE,IAAI,GAAG,EAAEkB,EAAElB,EAAE,IAAI,GAAGyE,EAAEvD,EAAElB,EAAE,IAAI,GAAGyE,EAAEvD,EAAElB,EAAE,IAAI,GAAGyE,EAAEvD,EAAElB,EAAE,IAAI,GAAG,GAAGkB,EAAElB,EAAE,IAAI,GAAGyE,EAAE,GAAGhF,EAAEiwD,GAAG1vD,EAAED,EAAE0E,EAAE,IAAI,EAAEA,EAAE,GAAG,EAAEA,EAAE,IAAI,EAAEf,EAAEE,GAAG,EAAE,GAAGhF,EAAE,CAAC6gC,GAAEv+B,EAAElB,EAAE,IAAI,GAAG,GAAGA,EAAE,EAAE,GAAG,EAAEP,GAAGyB,EAAElB,EAAE,IAAI,GAAG,IAAI,GAAG,EAAEP,EAAEyB,EAAElB,EAAE,IAAI,GAAGpB,EAAEsC,EAAElB,EAAE,IAAI,GAAG,EAAEkB,EAAElB,EAAE,IAAI,GAAG,EAAEkB,EAAElB,EAAE,IAAI,GAAG,EAAEkB,EAAElB,EAAE,IAAI,GAAG,QAAQP,EAAEiwD,GAAG1vD,EAAED,EAAE0E,EAAE,IAAI,EAAEA,EAAE,GAAG,EAAEA,EAAE,IAAI,EAAEf,EAAEE,GAAG,EAAEhF,EAAEsC,EAAElB,GAAG,GAAG,EAAEkB,EAAElB,GAAG,GAAGpB,EAAElE,EAAE,GAAG,GAAGiK,EAAE,EAAE2pD,GAAGtuD,GAAGP,GAAGb,EAAE,GAAG,IAAI,EAAEa,GAAG,EAAEktD,EAAEloD,EAAE,OAAOhF,EAAE,EAAE,SAASiwD,GAAG3vD,EAAEN,EAAEiE,EAAE9E,EAAElE,EAAEiK,EAAEF,GAAG1E,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAEiE,EAAEA,EAAE,EAAE9E,EAAEA,EAAE,EAAElE,EAAEA,EAAE,EAAEiK,EAAEA,EAAE,EAAEF,EAAEA,EAAE,EAAE,IAAI84C,EAAE,EAAEh7C,EAAE,EAAE7B,EAAE,EAAE4B,EAAE,EAAElC,EAAE,EAAE0E,EAAE,EAAE3D,EAAE,EAAEV,EAAE,EAAED,EAAE,EAAEmlD,EAAE,EAAE3oB,EAAE,EAAEhpB,EAAE,EAAErQ,EAAE,EAAEo5B,EAAE,EAAEgvB,EAAE,EAAEC,EAAE,EAAED,EAAEY,EAAEA,EAAEA,EAAE,GAAG,EAAEzrD,EAAE6qD,EAAE,IAAI,GAAGtsD,EAAEuU,EAAE+3C,EAAE,GAAG,EAAExO,EAAE,EAAE99C,EAAE,EAAEiB,EAAE,EAAEgE,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,GAAG,IAAIjF,EAAE,IAAI,EAAE,IAAI89C,EAAE,IAAI,WAAW99C,EAAE,GAAG,CAACyB,GAAG+sD,KAAK,IAAI,GAAG,GAAGxuD,GAAG,EAAE,UAAU,CAACA,EAAE89C,EAAE99C,EAAE,EAAE,aAAY,GAAG0B,EAAED,EAAE6qD,EAAE,IAAI,GAAG,EAAExO,EAAE74C,EAAEvD,GAAG,GAAG,EAAE,KAAKo8C,GAAG,IAAI,IAAI,CAACvgB,EAAE,GAAG,MAAMt4B,EAAEnC,EAAEpB,EAAEnB,EAAE,MAAM,EAAE,CAAC,OAAOu9C,GAAG,IAAI,IAAI,KAAK,GAAG,CAACvgB,EAAE,GAAG,MAAMh9B,EAAE,KAAK,EAAE,CAACu9C,EAAEh7C,EAAE,MAAMvC,EAAE,QAAQ,GAAG2lD,EAAEpjD,EAAE,EAAE,EAAErB,EAAE6qD,EAAE,IAAI,GAAGpG,EAAEpI,EAAE74C,EAAEihD,GAAG,GAAG,EAAEpjD,EAAEojD,EAAEzkD,EAAE,GAAG,IAAI87B,EAAE,IAAI,GAAG,CAACA,EAAE,EAAEugB,EAAEh7C,EAAE,EAAE,CAAC,IAAImC,EAAEnC,EAAE,GAAG,GAAG,IAAI,GAAG,MAAMrB,EAAEq8C,EAAEA,EAAE,EAAE,EAAEh7C,EAAEA,EAAE,EAAE,EAAErB,EAAE6qD,EAAE,IAAI,GAAGxpD,SAASmC,EAAEnC,GAAG,GAAG,IAAI,WAAU,GAAGg7C,EAAEA,EAAEp8C,EAAE,EAAE,GAAGpB,EAAE,EAAEivD,GAAGjvD,EAAEoB,EAAEo8C,UAAUA,EAAE,IAAI,GAAGoI,GAAGuI,GAAGxpD,GAAGxD,EAAE6qD,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,EAAExpD,EAAErB,EAAE6qD,EAAE,IAAI,GAAG,EAAE,IAAIpG,GAAGjhD,EAAEnC,EAAE,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC9B,GAAGiE,EAAEnC,EAAE,GAAG,GAAG,IAAI,GAAG,EAAEnC,EAAE,EAAEm9C,EAAE,MAAM,CAAC98C,GAAG,EAAEL,EAAEM,EAAE68C,EAAE,EAAEA,EAAEh7C,EAAEg7C,EAAE,EAAEr8C,EAAE6qD,EAAE,IAAI,GAAGxO,EAAEh7C,EAAEmC,EAAE64C,GAAG,GAAG,EAAE,KAAKh7C,GAAG,IAAI,KAAK,GAAG,KAAK,EAAE,IAAI,IAAIA,GAAG,IAAI,KAAK,GAAG,MAAM,IAAI,EAAED,EAAE,MAAM,CAAC5B,EAAE,EAAE4B,GAAGC,GAAG,IAAI,KAAK,GAAG,EAAE,EAAE,CAAC7B,EAAE,GAAG4B,EAAE5B,EAAE68C,EAAEA,EAAE,EAAE,EAAEr8C,EAAE6qD,EAAE,IAAI,GAAGxO,EAAEh7C,EAAEmC,EAAE64C,GAAG,GAAG,EAAEj7C,GAAGC,GAAG,IAAI,KAAK,GAAG,UAAUD,IAAI,EAAE,IAAI,GAAGA,EAAE,MAAM,IAAI,IAAIA,EAAE5B,EAAE,GAAG6B,GAAG,IAAI,IAAI,GAAG,CAAC,IAAI2rD,GAAGxpD,EAAE64C,EAAE,GAAG,GAAG,GAAG,IAAI,GAAGxgB,EAAE77B,EAAE6qD,EAAE,IAAI,GAAG,GAAGrnD,EAAEq4B,EAAE,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC77B,EAAExG,IAAIgK,EAAEq4B,EAAE,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAGwgB,EAAEr8C,EAAEtC,IAAI8F,EAAEq4B,EAAE,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,EAAEr8B,EAAE,EAAE6B,EAAEw6B,EAAE,EAAE,MAAM,CAAC,GAAG38B,EAAE,EAAE,CAACX,GAAG,EAAE,MAAM,GAAGM,EAAE,EAAE,CAAC4lD,GAAGzkD,EAAEwC,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAG65C,EAAEr8C,EAAEykD,GAAG,GAAG,EAAEzkD,EAAEwC,GAAG,GAAGiiD,EAAE,OAAOpI,EAAE,EAAE78C,EAAE,EAAE6B,GAAGrB,EAAE6qD,EAAE,IAAI,GAAG,GAAG,EAAE,EAAE7qD,EAAE6qD,EAAE,IAAI,GAAGxpD,EAAEuC,GAAGy4C,EAAE,GAAG,EAAE/8C,EAAEsE,EAAE,EAAEy4C,EAAE,EAAEA,EAAEz4C,EAAEA,EAAExC,EAAE,KAAKA,EAAEqjD,EAAEjlD,MAAM,CAAC68C,EAAEoS,GAAG5D,EAAE,GAAG,GAAG,EAAE,IAAIxO,EAAE,GAAG,EAAE,CAAC99C,GAAG,EAAE,MAAMe,EAAE+8C,EAAEz4C,EAAExC,EAAEqjD,EAAEvlD,EAAEmC,EAAErB,EAAE6qD,EAAE,IAAI,GAAG,EAAE,GAAG,IAAIrnD,EAAEnC,GAAG,GAAG,IAAI,GAAG,CAACg7C,EAAEh7C,EAAE,EAAE,EAAE,IAAImC,EAAE64C,GAAG,GAAG,IAAI,GAAG,CAACr8C,EAAE6qD,EAAE,IAAI,GAAGxO,EAAEA,EAAEoS,GAAG5D,EAAE,GAAG,GAAG,EAAExpD,EAAErB,EAAE6qD,EAAE,IAAI,GAAG,EAAE,MAAM,GAAGmC,GAAGxpD,EAAEnC,EAAE,GAAG,GAAG,GAAG,GAAGoB,EAAEzC,EAAE6qD,EAAE,IAAI,GAAG,GAAGrnD,EAAEf,EAAE,GAAG,GAAG,IAAI,IAAI,EAAE,CAACzC,EAAExG,IAAIgK,EAAEf,EAAE,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG45C,EAAEr8C,EAAEtC,IAAI8F,EAAEf,EAAE,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,EAAEzC,EAAE6qD,EAAE,IAAI,GAAGpoD,EAAE,EAAEpB,EAAEoB,EAAE,EAAE,EAAE,MAAM,GAAGgiD,EAAE,EAAE,CAAClmD,GAAG,EAAE,MAAMiF,EAAE,GAAG3E,EAAE,EAAE,CAACK,GAAGc,EAAEwC,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAG65C,EAAEr8C,EAAEd,GAAG,GAAG,EAAEc,EAAEwC,GAAG,GAAGtD,EAAE,OAAOm9C,EAAE,EAAEh7C,GAAGrB,EAAE6qD,EAAE,IAAI,GAAG,GAAG,EAAE,EAAE7qD,EAAE6qD,EAAE,IAAI,GAAGxpD,OAAOg7C,GAAG,QAAQ,GAAGn9C,EAAE,EAAE,MAAM,EAAE,CAAC,KAAKsE,EAAEnC,GAAG,GAAG,IAAI,GAAG,KAAK,EAAE,GAAG,CAAC9C,GAAG,EAAE,MAAMiF,EAAEhE,EAAE6B,EAAEA,EAAEA,EAAE,EAAE,EAAErB,EAAE6qD,EAAE,IAAI,GAAGxpD,EAAE7B,EAAEgE,GAAGA,EAAEhE,GAAG,GAAG,IAAI,IAAI,IAAIN,EAAE,GAAG,KAAK,GAAG,EAAE,KAAKM,EAAE,MAAM,EAAE,KAAK,GAAG,EAAE,WAAWN,EAAEM,EAAE,IAAI,KAAKA,GAAG,IAAI,IAAI,CAACjB,GAAG,EAAE,MAAM6C,GAAG7B,EAAE,IAAI,EAAE,GAAG,GAAGC,GAAG,IAAI,IAAI,GAAG,GAAG4B,EAAE,CAAC7C,GAAG,EAAE,MAAMiF,OAAOs4B,EAAE,OAAO,CAAC,GAAG16B,EAAE,CAACpB,EAAExG,GAAG+F,GAAG,IAAI,GAAGC,EAAE,IAAID,EAAE7B,GAAG6B,GAAG,GAAG,EAAEu8B,EAAE97B,EAAET,EAAE,GAAG,GAAG,EAAES,EAAE6qD,EAAE,IAAI,GAAG7qD,EAAET,GAAG,GAAGS,EAAE6qD,EAAE,GAAG,GAAG,GAAG/uB,EAAEA,EAAE,GAAG,MAAM,IAAIj9B,EAAE,CAACN,EAAE,EAAE,MAAMiF,EAAEkrD,GAAG7D,EAAE,GAAG,EAAErrD,EAAE,IAAIgD,EAAEe,GAAGlC,EAAErB,EAAE6qD,EAAE,IAAI,GAAG,EAAE/uB,EAAE,UAAS,GAAG,IAAIA,EAAE,IAAI,GAAG,CAACA,EAAE,EAAE,GAAGj9B,EAAE,EAAEi9B,EAAE,QAAQugB,EAAE,EAAEx9C,EAAE,GAAG,IAAIi9B,EAAE,IAAI,GAAG,CAACA,EAAE,EAAEz6B,EAAEmC,EAAEnC,GAAG,GAAG,GAAG,EAAEA,GAAGnC,EAAE,IAAI,GAAGmC,EAAE,GAAG,IAAI,EAAEA,GAAG,GAAGA,EAAE7B,EAAEoE,GAAG,MAAMrE,GAAGqE,EAAE,KAAK,IAAI,EAAEA,EAAEpE,EAAEjB,EAAE,GAAG,OAAO8C,EAAE,GAAG,KAAK,IAAI,QAAQnC,EAAE,MAAM,IAAI,IAAI,KAAK,EAAE,CAACc,EAAEA,EAAE6qD,EAAE,IAAI,IAAI,GAAGtsD,EAAE89C,EAAE,EAAE,MAAMx9C,EAAE,KAAK,EAAE,CAACmB,EAAEA,EAAE6qD,EAAE,IAAI,IAAI,GAAGtsD,EAAE89C,EAAE,EAAE,MAAMx9C,EAAE,KAAK,EAAE,CAACw9C,EAAEr8C,EAAE6qD,EAAE,IAAI,GAAG,EAAE7qD,EAAEq8C,GAAG,GAAG99C,EAAEyB,EAAEq8C,EAAE,GAAG,KAAK99C,EAAE,GAAG,IAAI,IAAI,GAAG89C,EAAE,EAAE,MAAMx9C,EAAE,KAAK,EAAE,CAACC,EAAEkB,EAAE6qD,EAAE,IAAI,IAAI,GAAGtsD,EAAE89C,EAAE,EAAE,MAAMx9C,EAAE,KAAK,EAAE,CAAC2E,EAAExD,EAAE6qD,EAAE,IAAI,IAAI,GAAGtsD,EAAE89C,EAAE,EAAE,MAAMx9C,EAAE,KAAK,EAAE,CAACmB,EAAEA,EAAE6qD,EAAE,IAAI,IAAI,GAAGtsD,EAAE89C,EAAE,EAAE,MAAMx9C,EAAE,KAAK,EAAE,CAACw9C,EAAEr8C,EAAE6qD,EAAE,IAAI,GAAG,EAAE7qD,EAAEq8C,GAAG,GAAG99C,EAAEyB,EAAEq8C,EAAE,GAAG,KAAK99C,EAAE,GAAG,IAAI,IAAI,GAAG89C,EAAE,EAAE,MAAMx9C,EAAE,QAAQ,CAACw9C,EAAE,EAAE,MAAMx9C,GAAG,KAAK,IAAI,CAACwC,EAAE,IAAIg7C,EAAEA,IAAI,EAAE,EAAEA,EAAE,EAAE78C,EAAED,EAAE,EAAEu8B,EAAE,GAAG,MAAM,KAAK,GAAG,KAAK,IAAI,CAACt8B,EAAED,EAAEu8B,EAAE,GAAG,MAAM,KAAK,IAAI,CAACt8B,EAAEmvD,GAAG3uD,EAAE6qD,EAAE,IAAI,GAAG,EAAE7qD,EAAE6qD,EAAE,GAAG,GAAG,GAAG,EAAEA,EAAE,GAAG,GAAG,EAAEjnD,EAAEpE,EAAE4B,EAAE,EAAElC,EAAE,KAAKm9C,GAAG98C,EAAE,EAAE,IAAI,GAAG88C,EAAE,IAAIvpC,EAAEtT,EAAE,GAAG68C,EAAEvpC,EAAEtT,EAAE,EAAE,EAAEA,EAAED,EAAEu8B,EAAE,GAAG,MAAM,KAAK,IAAI,KAAK,IAAI,CAACz6B,EAAErB,EAAE6qD,EAAE,IAAI,GAAG,EAAErrD,EAAEQ,EAAE6qD,EAAE,GAAG,GAAG,GAAG,EAAE,IAAIrrD,EAAE,GAAG,EAAE,CAAC6B,EAAEgtD,GAAG,EAAE,EAAEhtD,EAAE,EAAE7B,EAAE,GAAG,EAAEA,EAAEmC,IAAI,EAAE3B,EAAE6qD,EAAE,IAAI,GAAGxpD,EAAErB,EAAE6qD,EAAE,GAAG,GAAG,GAAGrrD,EAAE4B,EAAE,EAAElC,EAAE,KAAK48B,EAAE,GAAG,MAAMv9B,MAAM,CAAC6C,GAAG7B,EAAE,KAAK,IAAI,EAAE,EAAEL,GAAGK,EAAE,KAAK,IAAI,GAAIA,EAAE,EAAE,IAAI,EAAE,KAAK,KAAM,KAAKu8B,EAAE,GAAG,MAAMv9B,GAAG,KAAK,IAAI,CAAC6C,EAAE,EAAElC,EAAE,KAAKmC,EAAErB,EAAE6qD,EAAE,IAAI,GAAG,EAAErrD,EAAEQ,EAAE6qD,EAAE,GAAG,GAAG,GAAG,EAAE/uB,EAAE,GAAG,MAAM,KAAK,GAAG,CAACt4B,EAAEqnD,EAAE,IAAI,GAAG7qD,EAAE6qD,EAAE,IAAI,GAAG5qD,EAAE4qD,EAAE,GAAG,EAAEzpD,EAAE,EAAElC,EAAE,KAAK0E,EAAE,EAAEvC,EAAE7B,EAAE68C,EAAEvpC,EAAE,MAAM,KAAK,IAAI,CAACg4C,EAAE9qD,EAAE6qD,EAAE,IAAI,GAAG,EAAEC,GAAGA,EAAE,IAAI,EAAE,KAAKA,EAAEvrD,EAAEiuD,GAAG1C,EAAE,EAAEzO,GAAG,EAAEp8C,EAAE6qD,EAAE1pD,EAAE,EAAElC,EAAE,KAAK0E,GAAGrE,EAAE,IAAI,EAAE88C,EAAE98C,EAAEurD,EAAE,EAAEzpD,EAAE7B,EAAE68C,GAAG98C,EAAE,IAAI,EAAEurD,EAAEzO,EAAE,EAAE98C,EAAE,MAAM,KAAK,GAAG,CAACS,EAAE6qD,EAAE,IAAI,GAAG7qD,EAAE6qD,EAAE,IAAI,GAAG7qD,EAAE6qD,EAAE,GAAG,GAAG,GAAG,EAAE7qD,EAAE6qD,EAAE,IAAI,GAAGA,EAAE,GAAGzpD,GAAG,EAAE06B,EAAE,GAAG,MAAM,KAAK,GAAG,CAAC,IAAIugB,EAAE,CAACwR,GAAGhvD,EAAE,GAAGS,EAAE,EAAEC,GAAG88C,EAAE,EAAEvgB,EAAE,OAAO,CAAC16B,EAAEi7C,EAAEvgB,EAAE,GAAG,MAAM,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,CAACugB,EAAEuS,GAAEnrD,EAAE,GAAG5E,GAAG6D,EAAEmoD,EAAE,IAAI,GAAGvrD,EAAE+8C,EAAE98C,EAAE8B,GAAG,EAAE,MAAMxC,EAAE,QAAQ,CAACuC,EAAE,EAAElC,EAAE,KAAK0E,EAAEy4C,EAAEh7C,EAAE9B,EAAE88C,EAAEvpC,UAAS,GAAGtQ,EAAE,GAAG,IAAIs5B,EAAE,IAAI,GAAG,CAACl4B,EAAEirD,GAAG7uD,EAAE6qD,EAAE,IAAI,GAAG,EAAE7qD,EAAE6qD,EAAE,GAAG,GAAG,GAAG,EAAEA,EAAE,GAAG,EAAExpD,EAAE,IAAI,EAAEnC,GAAGM,EAAE,EAAE,IAAI,IAAIQ,EAAE6qD,EAAE,IAAI,GAAG,IAAI,GAAG7qD,EAAE6qD,EAAE,GAAG,GAAG,GAAG,IAAI,EAAE,GAAGzpD,EAAElC,EAAE,EAAE,EAAEA,EAAEA,EAAE,KAAK,MAAMmC,IAAI,GAAG,EAAEy6B,EAAE,QAAQ,IAAIA,EAAE,IAAI,GAAG,CAACl4B,EAAEoqD,GAAG3sD,EAAE7B,EAAEqrD,EAAE,GAAG,GAAG,EAAErrD,EAAED,EAAEu8B,EAAE,QAAQ,IAAIA,EAAE,IAAI,GAAG,CAACA,EAAE,EAAEt8B,EAAEQ,EAAE6qD,EAAE,IAAI,GAAG,EAAExO,EAAE,EAAE,MAAM,EAAE,CAACh7C,EAAErB,EAAER,GAAG,GAAG,EAAE,IAAI6B,EAAE,MAAMA,EAAEytD,GAAGjE,EAAE,GAAG,EAAExpD,GAAG,EAAE,IAAIA,EAAE,GAAG,EAAEA,IAAI,GAAGD,EAAEi7C,EAAE,KAAK,EAAE,CAACvgB,EAAE,GAAG,MAAMugB,EAAEh7C,EAAEg7C,EAAE,EAAE,GAAGj7C,IAAI,EAAEi7C,IAAI,EAAE78C,EAAEA,EAAE,EAAE,OAAO,MAAM,IAAIs8B,EAAE,IAAI,GAAG,CAACA,EAAE,EAAE,IAAIz6B,EAAE,GAAG,EAAE,CAAC9C,GAAG,EAAE,MAAMiF,GAAGqqD,GAAGhvD,EAAE,GAAGS,EAAE+8C,EAAE98C,GAAG,IAAI88C,EAAE,CAACA,EAAE,EAAEvgB,EAAE,OAAO,CAACt8B,EAAEQ,EAAE6qD,EAAE,IAAI,GAAG,EAAEzpD,EAAE,EAAE,MAAM,EAAE,CAACC,EAAErB,EAAER,GAAG,GAAG,EAAE,IAAI6B,EAAE,CAACy6B,EAAE,GAAG,MAAMt5B,EAAEnB,EAAEytD,GAAGjE,EAAE,GAAG,EAAExpD,GAAG,EAAED,EAAEC,EAAED,EAAE,EAAE,IAAIA,EAAE,IAAIi7C,EAAE,GAAG,CAACvgB,EAAE,GAAG,MAAMt5B,EAAEsrD,GAAGjvD,EAAEgsD,EAAE,GAAG,EAAExpD,GAAG,GAAGD,IAAI,GAAGi7C,IAAI,EAAE,CAACvgB,EAAE,GAAG,WAAWt8B,EAAEA,EAAE,EAAE,WAAU,GAAG,IAAIs8B,EAAE,IAAI,GAAG,CAACA,EAAE,EAAEz6B,EAAErB,EAAE6qD,EAAE,IAAI,GAAG,EAAE,GAAG7qD,EAAE6qD,EAAE,GAAG,GAAG,GAAG,IAAI,EAAEC,GAAGzO,EAAE,IAAI,EAAEh7C,EAAEA,EAAEyR,EAAElP,IAAIvC,EAAE,GAAG,GAAG,EAAEpB,EAAE6qD,EAAElnD,EAAEinD,EAAE,GAAG,EAAEjnD,EAAEknD,GAAIzO,EAAE,IAAIh7C,EAAE,GAAGg7C,EAAEh7C,EAAG,EAAEA,GAAGg7C,EAAE,IAAI,EAAE78C,GAAG,MAAMA,EAAE68C,EAAEvpC,OAAO,IAAIgpB,EAAE,IAAI,GAAG,CAACA,EAAE,EAAE+xB,GAAGhvD,EAAE,GAAGS,EAAE+8C,EAAE98C,EAAE,MAAM88C,GAAG/8C,EAAE,IAAI+8C,EAAE,GAAG/8C,EAAE+8C,EAAE,MAAM98C,EAAE88C,EAAEp8C,EAAE,EAAE2D,GAAGA,EAAE,IAAIrE,EAAE,GAAGA,EAAEqE,EAAEknD,EAAElnD,EAAExC,EAAE,EAAEi7C,GAAG/8C,EAAE,IAAIwrD,EAAE,GAAGA,EAAExrD,EAAEuuD,GAAGhvD,EAAE,GAAGw9C,EAAEyO,EAAEzpD,GAAGysD,GAAGjvD,EAAEK,EAAEkC,GAAGysD,GAAGhvD,EAAE,GAAGw9C,EAAEyO,EAAEzpD,EAAE,OAAOwsD,GAAGhvD,EAAE,GAAG+E,EAAErE,EAAE,GAAGuuD,GAAGjvD,EAAEoB,EAAEV,GAAGsuD,GAAGhvD,EAAE,GAAGw9C,EAAEyO,EAAEzpD,EAAE,aAAY,GAAG7B,EAAEilD,EAAE/hD,EAAE,GAAG,IAAIo5B,EAAE,IAAI,GAAG,IAAIj9B,EAAE,IAAIW,EAAEjB,EAAE,MAAM,CAACA,EAAE,EAAE,MAAM,EAAE,CAAC89C,EAAEr8C,EAAExG,GAAG+E,GAAG,IAAI,GAAG,EAAE,IAAI89C,EAAE,MAAMqS,GAAGhxD,GAAGa,GAAG,GAAG,EAAE89C,EAAE75C,EAAEe,GAAGhF,EAAEA,EAAE,EAAE,EAAE,GAAGA,IAAI,GAAG,GAAG,CAACA,EAAE,EAAE,MAAMmE,GAAG,MAAM,EAAE,CAAC,GAAG1C,EAAExG,GAAG+E,GAAG,IAAI,GAAG,EAAE,CAACA,GAAG,EAAE,MAAMmE,EAAEnE,EAAEA,EAAE,EAAE,EAAE,GAAGA,IAAI,GAAG,GAAG,CAACA,EAAE,EAAE,eAAc,GAAGktD,EAAEZ,EAAE,OAAOtsD,EAAE,EAAE,SAASuvD,GAAGtqD,EAAE1E,EAAED,GAAG2E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAE,KAAKmB,EAAEwD,GAAG,GAAG,IAAI2pD,GAAGruD,EAAED,EAAE2E,GAAG,EAAE,OAAO,SAASirD,GAAG3vD,GAAGA,EAAEA,EAAE,EAAE,IAAID,EAAE,EAAEN,EAAE,EAAE,KAAKyuD,GAAGxpD,EAAExD,EAAElB,GAAG,IAAI,GAAG,GAAG,GAAGD,EAAE,MAAM,CAACA,EAAE,EAAE,EAAE,CAACN,EAAEyB,EAAElB,GAAG,GAAG,EAAED,GAAGA,EAAE,GAAG,IAAI,IAAI2E,EAAEjF,GAAG,GAAG,GAAG,EAAEyB,EAAElB,GAAG,GAAGP,EAAE,SAASyuD,GAAGxpD,EAAEjF,EAAE,GAAG,GAAG,GAAG,IAAI,GAAG,OAAOM,EAAE,EAAE,SAAS6vD,GAAGlrD,EAAE1E,EAAED,EAAEN,GAAGiF,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAE,IAAIiE,EAAE,EAAE9E,EAAE,IAAI8F,EAAE,GAAG,GAAG1E,IAAI,GAAG,GAAG,GAAG,OAAOA,EAAE,GAAG,KAAK,EAAE,CAACA,GAAGkB,EAAEnB,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAGN,EAAEyB,EAAElB,GAAG,GAAG,EAAEkB,EAAEnB,GAAG,GAAGC,EAAE,EAAEkB,EAAEwD,GAAG,GAAGjF,EAAE,MAAMiF,EAAE,KAAK,GAAG,CAAC1E,GAAGkB,EAAEnB,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAGN,EAAEyB,EAAElB,GAAG,GAAG,EAAEkB,EAAEnB,GAAG,GAAGC,EAAE,EAAEkB,EAAEwD,GAAG,GAAGjF,EAAEyB,EAAEwD,EAAE,GAAG,KAAKjF,EAAE,GAAG,IAAI,IAAI,GAAG,MAAMiF,EAAE,KAAK,GAAG,CAAC1E,GAAGkB,EAAEnB,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAGN,EAAEyB,EAAElB,GAAG,GAAG,EAAEkB,EAAEnB,GAAG,GAAGC,EAAE,EAAEkB,EAAEwD,GAAG,GAAGjF,EAAEyB,EAAEwD,EAAE,GAAG,GAAG,EAAE,MAAMA,EAAE,KAAK,GAAG,CAAChB,GAAGxC,EAAEnB,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAGC,EAAEkB,EAAEwC,GAAG,GAAG,EAAEjE,EAAEyB,EAAEwC,EAAE,GAAG,GAAG,EAAExC,EAAEnB,GAAG,GAAG2D,EAAE,EAAExC,EAAEwD,GAAG,GAAG1E,EAAEkB,EAAEwD,EAAE,GAAG,GAAGjF,EAAE,MAAMiF,EAAE,KAAK,GAAG,CAACjF,GAAGyB,EAAEnB,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAG2D,EAAExC,EAAEzB,GAAG,GAAG,EAAEyB,EAAEnB,GAAG,GAAGN,EAAE,EAAEyB,EAAEwD,GAAG,IAAIhB,EAAE,QAAQ,IAAI,GAAGxC,EAAEwD,EAAE,GAAG,MAAMhB,EAAE,QAAQ,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,MAAMgB,EAAE,KAAK,GAAG,CAACjF,GAAGyB,EAAEnB,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAG2D,EAAExC,EAAEzB,GAAG,GAAG,EAAEyB,EAAEnB,GAAG,GAAGN,EAAE,EAAEyB,EAAEwD,GAAG,GAAGhB,EAAE,MAAMxC,EAAEwD,EAAE,GAAG,GAAG,EAAE,MAAMA,EAAE,KAAK,GAAG,CAACjF,GAAGyB,EAAEnB,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAG2D,EAAExC,EAAEzB,GAAG,GAAG,EAAEyB,EAAEnB,GAAG,GAAGN,EAAE,EAAEyB,EAAEwD,GAAG,IAAIhB,EAAE,MAAM,IAAI,GAAGxC,EAAEwD,EAAE,GAAG,MAAMhB,EAAE,MAAM,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,MAAMgB,EAAE,KAAK,GAAG,CAACjF,GAAGyB,EAAEnB,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAG2D,EAAExC,EAAEzB,GAAG,GAAG,EAAEyB,EAAEnB,GAAG,GAAGN,EAAE,EAAEyB,EAAEwD,GAAG,GAAGhB,EAAE,IAAIxC,EAAEwD,EAAE,GAAG,GAAG,EAAE,MAAMA,EAAE,KAAK,GAAG,CAAChB,GAAGxC,EAAEnB,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,GAAGnB,GAAGgF,EAAEF,GAAG,GAAGxC,EAAEnB,GAAG,GAAG2D,EAAE,EAAEE,EAAEc,GAAG,GAAG9F,EAAE,MAAM8F,EAAE,KAAK,GAAG,CAACurD,GAAExwD,EAAE,GAAGiF,EAAE3E,GAAG,MAAM2E,EAAE,QAAQ,MAAMA,SAAQ,SAAS,GAAG,OAAO,SAASqrD,GAAG/vD,EAAEkB,EAAEzB,EAAEiE,GAAG1D,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEzB,EAAEA,EAAE,EAAEiE,EAAEA,EAAE,EAAE,MAAM1D,EAAE,IAAI,GAAGkB,EAAE,IAAI,GAAG,EAAE,CAACzB,EAAEA,GAAG,EAAE,EAAEiF,EAAEjF,GAAG,GAAGM,EAAE,KAAKC,EAAE,KAAK,GAAG,EAAE0D,EAAE1D,EAAEkwD,GAAGlwD,EAAE,EAAEkB,EAAE,EAAE,GAAG,EAAEA,EAAE2B,IAAI,WAAW7C,EAAE,IAAI,GAAGkB,EAAE,IAAI,IAAI,OAAOzB,EAAE,EAAE,SAASowD,GAAG7vD,EAAEkB,EAAEnB,GAAGC,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAE,MAAMC,EAAE,IAAI,GAAGkB,EAAE,IAAI,GAAG,EAAE,CAACnB,EAAEA,GAAG,EAAE,EAAE2E,EAAE3E,GAAG,GAAGC,EAAE,EAAE,GAAGA,EAAEkwD,GAAGlwD,EAAE,EAAEkB,EAAE,EAAE,GAAG,EAAEA,EAAE2B,IAAI,WAAW7C,EAAE,IAAI,GAAGkB,EAAE,IAAI,IAAI,OAAOnB,EAAE,EAAE,SAASmvD,GAAGlvD,EAAEkB,EAAEnB,GAAGC,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAE,IAAIN,EAAE,EAAEiE,EAAE,EAAEE,EAAE,EAAE,GAAG1C,IAAI,EAAE,GAAGA,EAAE,IAAI,EAAElB,IAAI,EAAE,WAAW,CAAC,EAAE,CAACP,EAAEO,EAAEA,EAAEqvD,GAAGrvD,EAAE,EAAEkB,EAAE,EAAE,GAAG,GAAG,EAAEwC,EAAExC,EAAEA,EAAE2B,IAAI,EAAEe,EAAE0rD,GAAGtvD,EAAE,EAAEkB,EAAE,EAAE,GAAG,GAAG,EAAE0C,EAAE2rD,GAAG9vD,EAAE,EAAEiE,EAAE,EAAEE,EAAE,EAAEf,IAAI,GAAG,EAAEA,IAAI,EAAE9C,EAAEA,GAAG,EAAE,EAAE2E,EAAE3E,GAAG,GAAG6D,EAAE,IAAI,SAASF,IAAI,EAAE,GAAGA,EAAE,IAAI,EAAEjE,IAAI,EAAE,YAAYyB,EAAElB,OAAOkB,EAAElB,EAAE,GAAGkB,EAAE,EAAE,CAAC0C,EAAE1C,EAAEA,GAAGA,IAAI,GAAG,GAAG,EAAEnB,EAAEA,GAAG,EAAE,EAAE2E,EAAE3E,GAAG,GAAG6D,GAAG1C,EAAE,GAAG,GAAG,SAAS0C,IAAI,GAAG,IAAI,OAAO7D,EAAE,EAAE,SAASgvD,GAAGrqD,EAAE1E,EAAEkB,EAAEnB,EAAEN,GAAGiF,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAE,IAAIiE,EAAE,EAAEA,EAAEipD,EAAEA,EAAEA,EAAE,IAAI,EAAE,IAAIzrD,EAAE,IAAInB,EAAE,IAAIN,EAAE,MAAM,IAAI,EAAE,CAAC+vD,GAAG9rD,EAAE,EAAE1D,GAAG,IAAI,GAAG,IAAIkB,EAAEnB,EAAE,KAAK,EAAE,IAAImB,EAAEnB,EAAE,EAAE,KAAK,GAAG,EAAE,IAAImB,EAAEnB,EAAE,KAAK,EAAE,IAAI,CAACC,EAAEkB,EAAEnB,EAAE,EAAE,EAAE,CAACivD,GAAGtqD,EAAEhB,EAAE,KAAK1D,EAAEA,GAAG,IAAI,QAAQA,IAAI,EAAE,KAAKA,EAAEkB,EAAEnB,EAAE,SAASC,EAAEkB,EAAEnB,EAAE,EAAEivD,GAAGtqD,EAAEhB,EAAE1D,GAAG2sD,EAAEjpD,EAAE,OAAO,SAASssD,GAAGtrD,EAAE1E,GAAG0E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAE,IAAI0E,EAAEA,EAAE,OAAOA,EAAEyrD,GAAGzrD,EAAE1E,EAAE,GAAG,EAAE,OAAO0E,EAAE,EAAE,SAASyrD,GAAGnwD,EAAED,EAAEN,GAAGO,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAE,GAAG,GAAGO,EAAE,CAAC,GAAGD,IAAI,EAAE,IAAI,CAAC2E,EAAE1E,GAAG,GAAGD,EAAEC,EAAE,EAAE,MAAM,KAAKkB,EAAEA,GAAGkvD,KAAK,GAAG,KAAK,IAAI,GAAG,GAAG,IAAIrwD,GAAG,IAAI,IAAI,MAAM,CAAC2E,EAAE1E,GAAG,GAAGD,EAAEC,EAAE,EAAE,UAAU,CAACkB,GAAG+sD,KAAK,IAAI,GAAG,GAAGjuD,GAAG,EAAE,MAAM,GAAGD,IAAI,EAAE,KAAK,CAAC2E,EAAE1E,GAAG,GAAGD,IAAI,EAAE,IAAI2E,EAAE1E,EAAE,GAAG,GAAGD,EAAE,GAAG,IAAIC,EAAE,EAAE,MAAM,GAAGD,IAAI,EAAE,OAAOA,GAAG,KAAK,IAAI,MAAM,CAAC2E,EAAE1E,GAAG,GAAGD,IAAI,GAAG,IAAI2E,EAAE1E,EAAE,GAAG,GAAGD,IAAI,EAAE,GAAG,IAAI2E,EAAE1E,EAAE,GAAG,GAAGD,EAAE,GAAG,IAAIC,EAAE,EAAE,MAAM,IAAID,GAAG,MAAM,KAAK,EAAE,QAAQ,CAAC2E,EAAE1E,GAAG,GAAGD,IAAI,GAAG,IAAI2E,EAAE1E,EAAE,GAAG,GAAGD,IAAI,GAAG,GAAG,IAAI2E,EAAE1E,EAAE,GAAG,GAAGD,IAAI,EAAE,GAAG,IAAI2E,EAAE1E,EAAE,GAAG,GAAGD,EAAE,GAAG,IAAIC,EAAE,EAAE,UAAU,CAACkB,GAAG+sD,KAAK,IAAI,GAAG,GAAGjuD,GAAG,EAAE,YAAYA,EAAE,QAAQ,GAAG,OAAOA,EAAE,EAAE,SAASowD,KAAK,OAAOjC,KAAK,EAAE,SAASW,GAAGpqD,GAAGA,GAAGA,EAAE,IAAI1E,EAAE,EAAE4D,EAAEhF,GAAG,GAAG8F,EAAE1E,EAAEkB,EAAEtC,GAAG,GAAG,EAAE+mD,EAAEzkD,EAAEtC,EAAE,GAAG,GAAG,GAAG,OAAOoB,EAAE,EAAE,SAASivD,GAAGvqD,EAAE1E,GAAG0E,GAAGA,EAAE1E,EAAEA,EAAE,EAAE,IAAID,EAAE,EAAEN,EAAE,EAAEiE,EAAE,EAAEE,EAAEhF,GAAG,GAAG8F,EAAE3E,EAAEmB,EAAEtC,GAAG,GAAG,EAAEa,EAAEyB,EAAEtC,EAAE,GAAG,GAAG,EAAE8E,EAAEwsD,GAAGnwD,EAAE,EAAEN,EAAE,EAAE,IAAI,EAAEoD,IAAI,EAAE,OAAOa,EAAE,MAAM,KAAK,EAAE,CAAC,GAAGgB,GAAG,IAAI,CAACA,GAAGuqD,GAAGvqD,EAAE,uBAAuB1E,GAAGD,GAAGmB,EAAElB,GAAG,GAAG,IAAI,GAAG,OAAOD,EAAE,EAAEmB,EAAElB,GAAG,GAAGD,EAAE,MAAM,KAAK,KAAK,MAAM,QAAQ,CAACmB,EAAElB,GAAG,IAAI0D,EAAE,OAAO,KAAKxC,EAAEtC,GAAG,GAAGmB,EAAEmB,EAAEtC,EAAE,GAAG,GAAGa,GAAG,WAAW,WAAWiF,GAAGd,EAAEhF,GAAG,IAAI,OAAQ8F,EAAE,SAAS+oD,GAAGztD,EAAED,GAAGC,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAE,IAAIN,EAAE,EAAEiE,EAAE,EAAEE,EAAE,EAAE,IAAI1C,EAAEnB,EAAE,IAAI,GAAG,IAAI,GAAGquD,GAAGruD,GAAG,IAAI,EAAE,EAAE,CAAC,IAAIC,EAAE,IAAI,KAAK0E,EAAE3E,EAAE,IAAI,GAAG,IAAI2D,EAAExC,EAAEnB,EAAE,IAAI,GAAG,EAAE2D,IAAI,GAAGxC,EAAEnB,EAAE,IAAI,GAAG,KAAK,GAAG,EAAE,CAACmB,EAAEnB,EAAE,IAAI,GAAG2D,EAAE,EAAEgB,EAAEhB,GAAG,GAAG1D,EAAEA,EAAEA,EAAE,SAASA,EAAEuuD,GAAGxuD,EAAEC,GAAG,EAAEsuD,GAAGvuD,QAAQ6D,EAAE,EAAE,GAAG,IAAIA,EAAE,IAAI,EAAE,CAAC,IAAI5D,EAAE,IAAI,KAAK0E,EAAE3E,EAAE,IAAI,GAAG,IAAIN,EAAEyB,EAAEnB,EAAE,IAAI,GAAG,EAAEN,IAAI,GAAGyB,EAAEnB,EAAE,IAAI,GAAG,KAAK,GAAG,EAAE,CAACmB,EAAEnB,EAAE,IAAI,GAAGN,EAAE,EAAEiF,EAAEjF,GAAG,GAAGO,EAAEA,EAAEA,EAAE,IAAI,MAAMA,EAAEuuD,GAAGxuD,EAAEC,GAAG,SAAQ,GAAG,OAAOA,EAAE,EAAE,SAASqwD,GAAG3rD,GAAGA,EAAEA,EAAE,EAAE,IAAI1E,EAAE,EAAED,EAAE,EAAEN,EAAE,EAAEiE,EAAE,EAAEE,EAAE,EAAEhF,EAAE,EAAElE,EAAE,EAAEiK,EAAE,EAAEF,EAAE,EAAE84C,EAAE,EAAEh7C,EAAE,EAAE7B,EAAE,EAAE4B,EAAE,EAAElC,EAAE,EAAE0E,EAAE,EAAE3D,EAAE,EAAEV,EAAE,EAAED,EAAE,EAAEmlD,EAAE,EAAE9iD,EAAE,EAAEA,EAAE8pD,EAAEA,EAAEA,EAAE,GAAG,EAAE,GAAG,GAAGjoD,IAAI,EAAE,IAAI,CAACnC,EAAEmC,IAAI,EAAE,GAAG,GAAGA,EAAE,IAAI,EAAED,EAAEvD,EAAE,KAAK,EAAE,GAAGuD,KAAKlC,IAAI,GAAG,EAAE,EAAE,CAACmC,EAAE,OAAOD,KAAKlC,IAAI,GAAG,EAAE,IAAIA,IAAI,IAAI,GAAG,GAAG,EAAEvC,EAAEkB,EAAEwD,EAAE,GAAG,GAAG,EAAE3E,EAAEmB,EAAElB,EAAE,GAAG,GAAG,EAAE,IAAID,EAAE,KAAK2E,EAAE,GAAGxD,EAAE,KAAKuD,IAAI,IAAIA,KAAKlC,IAAI,GAAG,EAAE,IAAIA,IAAI,QAAQ,CAACrB,EAAEnB,EAAE,IAAI,GAAG2E,EAAExD,EAAEwD,EAAE,GAAG,GAAG3E,EAAE4lD,GAAGlhD,KAAKlC,IAAI,GAAG,EAAE,IAAIA,IAAI,IAAI,EAAErB,EAAElB,EAAE,GAAG,GAAG2lD,EAAE,EAAEzkD,EAAElB,EAAE2lD,EAAE,GAAG,GAAGzkD,EAAElB,EAAE2lD,EAAE,GAAG,GAAG,EAAEA,EAAE3lD,EAAE,EAAE,EAAE2sD,EAAE9pD,EAAE,OAAO8iD,EAAE,EAAEpI,EAAEr8C,EAAE,KAAK,EAAE,GAAGqB,IAAI,EAAEg7C,IAAI,EAAE,CAAC,GAAG94C,KAAKlC,IAAI,GAAG,EAAE,CAACmC,EAAED,KAAKlC,IAAI,KAAKA,IAAI,IAAI,IAAIA,IAAI,GAAG,GAAG,IAAIA,IAAI,KAAKmB,IAAIgB,EAAE,EAAEA,IAAI,EAAE,QAAQA,EAAE,EAAEA,IAAI,EAAE,KAAK,GAAG,IAAIjF,EAAEiE,KAAKA,IAAI,EAAE,MAAMA,KAAKA,IAAI,EAAE,KAAK,EAAE,GAAGjE,GAAGiE,IAAI,EAAE,IAAIgB,EAAE,EAAEA,IAAI,EAAE,KAAK,GAAG,GAAGhB,KAAKA,IAAI,EAAE,KAAK,EAAE,EAAEjE,IAAI,EAAE,EAAEA,KAAKA,IAAI,EAAE,KAAK,EAAE,IAAIA,KAAKA,IAAI,EAAE,MAAMA,KAAKA,IAAI,EAAE,KAAK,EAAE,IAAI,EAAEiE,EAAExC,EAAE,MAAMzB,GAAG,GAAG,GAAG,GAAG,GAAG,EAAEiF,EAAExD,EAAEwC,EAAE,GAAG,GAAG,EAAE,IAAIgB,EAAE,KAAK,MAAMjF,GAAG,GAAG,GAAG,GAAG,CAACyB,EAAE,KAAKuD,IAAI,GAAGhF,GAAGiF,EAAED,IAAI,GAAGhF,OAAO,CAACyB,EAAEwD,EAAE,IAAI,GAAG,MAAMjF,GAAG,GAAG,GAAGyB,EAAE,MAAMzB,GAAG,GAAG,GAAG,GAAG,GAAGiF,EAAEA,EAAED,EAAEvD,EAAEwC,EAAE,GAAG,GAAGnB,EAAE,EAAErB,EAAEwC,EAAEnB,EAAE,GAAG,IAAI9C,GAAG,GAAG8C,EAAE,EAAErB,EAAEwC,GAAGjE,GAAG,IAAI,IAAIA,GAAG,GAAG8C,EAAE,GAAGg7C,EAAE,EAAE,CAACx9C,EAAEmB,EAAE,KAAK,EAAE,KAAKwD,EAAE,IAAI64C,IAAI,IAAI,CAACr8C,EAAE,KAAKwD,EAAE,IAAI64C,IAAI,GAAG74C,EAAE,MAAM64C,IAAI,GAAG,GAAG,GAAG,EAAEv9C,EAAE,MAAMu9C,IAAI,GAAG,GAAG,GAAG,EAAE,MAAM,CAAC74C,EAAExD,EAAE,MAAMq8C,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,EAAEv9C,EAAE,MAAMu9C,IAAI,GAAG,GAAG,GAAG,EAAE,EAAEr8C,EAAElB,GAAG,GAAGD,EAAEmB,EAAEwD,EAAE,IAAI,GAAG3E,EAAEmB,EAAEnB,EAAE,GAAG,GAAG2E,EAAExD,EAAEnB,EAAE,IAAI,GAAG,MAAMw9C,IAAI,GAAG,GAAG,GAAGr8C,EAAE,MAAMzB,GAAG,GAAG8C,EAAErB,EAAE,KAAKwC,EAAEnB,EAAEojD,EAAEjiD,EAAE,EAAE,EAAEipD,EAAE9pD,EAAE,OAAO8iD,EAAE,EAAE/hD,EAAE1C,EAAE,KAAK,EAAE,GAAG0C,EAAE,CAAC5D,IAAI4D,EAAE,EAAEA,IAAI,EAAE,QAAQA,EAAE,EAAEA,IAAI,EAAE,KAAK,GAAG,IAAIe,EAAE3E,KAAKA,IAAI,EAAE,MAAMA,KAAKA,IAAI,EAAE,KAAK,EAAE,GAAG2E,EAAEzD,EAAE,OAAOlB,IAAI,EAAE,IAAI4D,EAAE,EAAEA,IAAI,EAAE,KAAK,GAAG,GAAG5D,KAAKA,IAAI,EAAE,KAAK,EAAE,EAAE2E,IAAI,EAAE,EAAEA,KAAKA,IAAI,EAAE,KAAK,EAAE,IAAIA,KAAKA,IAAI,EAAE,MAAMA,KAAKA,IAAI,EAAE,KAAK,EAAE,KAAK,IAAI,GAAG,EAAE3E,EAAE2E,EAAEjK,EAAEiK,EAAEA,GAAGzD,EAAEyD,EAAE,GAAG,IAAI,GAAGpC,EAAE,EAAE,MAAM,EAAE,CAACmC,EAAExD,EAAElB,EAAE,IAAI,GAAG,EAAE,IAAI0E,EAAE,CAACA,EAAExD,EAAElB,EAAE,IAAI,GAAG,EAAE,IAAI0E,EAAE,MAAM9F,GAAGsC,EAAEwD,EAAE,GAAG,IAAI,GAAGnC,EAAE,EAAEmB,EAAE9E,IAAI,EAAE+F,IAAI,EAAE3E,EAAE0E,EAAEhK,EAAEgJ,EAAEgB,EAAEhK,EAAEiK,EAAEjB,EAAE9E,EAAE+F,EAAE/F,EAAElE,EAAE6H,EAAE,EAAE,GAAG3D,IAAI,EAAElE,IAAI,EAAE,CAACgJ,EAAExC,EAAExG,EAAE,IAAI,GAAG,EAAEgK,EAAExD,EAAExG,EAAE,IAAI,GAAG,EAAE,GAAG,IAAIgK,EAAE,KAAKhK,EAAE,GAAG,CAACsF,EAAEtF,EAAE,GAAG,EAAEgK,EAAExD,EAAElB,GAAG,GAAG,EAAE,IAAI0E,EAAE,CAAC1E,EAAEtF,EAAE,GAAG,EAAEgK,EAAExD,EAAElB,GAAG,GAAG,EAAE,IAAI0E,EAAE,CAAC1E,EAAE,EAAE,OAAO,MAAM,EAAE,CAACP,EAAEiF,EAAE,GAAG,EAAE3E,EAAEmB,EAAEzB,GAAG,GAAG,EAAE,IAAIM,EAAE,CAACN,EAAEiF,EAAE,GAAG,EAAE3E,EAAEmB,EAAEzB,GAAG,GAAG,EAAE,IAAIM,EAAE,UAAU,CAAC2E,EAAE3E,EAAEC,EAAEP,OAAO,CAACiF,EAAE3E,EAAEC,EAAEP,GAAGyB,EAAElB,GAAG,GAAG,EAAEA,EAAE0E,MAAM,CAAC1E,EAAEkB,EAAExG,EAAE,GAAG,GAAG,EAAEwG,EAAElB,EAAE,IAAI,GAAG0E,EAAExD,EAAEwD,EAAE,GAAG,GAAG1E,EAAEA,EAAE0E,SAAQ,GAAG,GAAG,GAAGhB,EAAE,EAAE,CAACgB,EAAExD,EAAExG,EAAE,IAAI,GAAG,EAAE,IAAIA,EAAE,KAAKwG,EAAE,MAAMwD,GAAG,IAAI,GAAG,GAAG,CAACxD,EAAE,MAAMwD,GAAG,IAAI,GAAG1E,EAAE,IAAIA,EAAE,CAACkB,EAAE,KAAK0C,IAAI,GAAGc,GAAG,WAAW,CAACxD,IAAIA,EAAEwC,EAAE,IAAI,GAAG,KAAKhJ,EAAE,GAAGgJ,EAAE,GAAG,EAAEA,EAAE,GAAG,IAAI,GAAG1D,EAAE,IAAIA,EAAE,MAAMkB,EAAElB,EAAE,IAAI,GAAG0D,EAAEgB,EAAExD,EAAExG,EAAE,IAAI,GAAG,EAAE,GAAGgK,EAAE,EAAE,CAACxD,EAAElB,EAAE,IAAI,GAAG0E,EAAExD,EAAEwD,EAAE,IAAI,GAAG1E,EAAE0E,EAAExD,EAAExG,EAAE,IAAI,GAAG,EAAE,GAAGgK,EAAE,EAAE,CAACxD,EAAElB,EAAE,IAAI,GAAG0E,EAAExD,EAAEwD,EAAE,IAAI,GAAG1E,UAAS,GAAG,GAAG2E,IAAI,EAAE,GAAG,CAACghD,EAAEhhD,EAAEpC,EAAE,EAAErB,EAAExG,EAAE,GAAG,GAAGirD,EAAE,EAAEA,EAAEjrD,EAAEirD,EAAE,EAAE,EAAEzkD,EAAEykD,GAAG,GAAGzkD,EAAEykD,GAAG,GAAG,MAAM,CAACzkD,EAAExG,EAAE,GAAG,GAAG6H,EAAE,EAAErB,EAAEtC,EAAE,GAAG,GAAG+F,EAAE,EAAEzD,EAAEtC,EAAE+F,GAAG,GAAGA,EAAE,GAAG44C,EAAE,EAAE,CAACx9C,EAAEmB,EAAE,KAAK,EAAE,KAAK,IAAIq8C,IAAI,GAAG94C,GAAG,CAACvD,EAAE,KAAK,IAAIq8C,IAAI,GAAG94C,EAAEC,EAAE,MAAM64C,IAAI,GAAG,GAAG,GAAG,EAAEv9C,EAAE,MAAMu9C,IAAI,GAAG,GAAG,GAAG,EAAE,MAAM,CAAC74C,EAAExD,EAAE,MAAMq8C,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,EAAEv9C,EAAE,MAAMu9C,IAAI,GAAG,GAAG,GAAG,EAAE,EAAEr8C,EAAElB,GAAG,GAAGD,EAAEmB,EAAEwD,EAAE,IAAI,GAAG3E,EAAEmB,EAAEnB,EAAE,GAAG,GAAG2E,EAAExD,EAAEnB,EAAE,IAAI,GAAG,MAAMw9C,IAAI,GAAG,GAAG,GAAGr8C,EAAE,KAAKyD,EAAEzD,EAAE,KAAKtC,EAAE+mD,EAAEjrD,EAAE,EAAE,EAAEiyD,EAAE9pD,EAAE,OAAO8iD,EAAE,UAAU,GAAGjhD,IAAI,GAAG,WAAW,CAACnC,EAAEmC,EAAE,IAAI,EAAEjF,EAAEyB,EAAE,KAAK,EAAE,GAAGzB,EAAE,CAAC,IAAIiF,EAAE,GAAG,KAAK,EAAE,GAAGnC,IAAI,EAAE,SAAS7H,EAAE,OAAO,CAACA,GAAGgK,EAAE,GAAG,KAAK,OAAOA,EAAE,GAAG,KAAK,GAAG,QAAQ,KAAK,GAAG,GAAGhK,EAAE,KAAKA,EAAE,OAAO,KAAK,GAAG,KAAKgK,EAAE,GAAG,KAAK,GAAG,QAAQ,KAAK,GAAG,IAAIhK,KAAKA,EAAE,OAAO,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,IAAIA,KAAKA,EAAE,OAAO,KAAK,GAAG,OAAOA,KAAKA,EAAE,OAAO,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,KAAK,IAAI,EAAEA,EAAE6H,KAAK7H,EAAE,EAAE,GAAG,EAAEA,GAAG,OAAOA,EAAE,EAAEgK,EAAExD,EAAE,MAAMxG,GAAG,IAAI,GAAG,EAAEgK,EAAE,GAAG,IAAIA,EAAE,CAAC3E,EAAE,EAAE2E,EAAE,EAAE1E,EAAE,EAAEuC,EAAE,EAAEnC,EAAE,OAAO,CAACwD,EAAE,EAAE5D,EAAE,EAAEuC,EAAE,EAAE3D,EAAE2D,KAAK7H,EAAE,IAAI,GAAG,EAAE,IAAIA,IAAI,GAAG,GAAGqF,EAAE,EAAE,MAAM,EAAE,CAAC2D,GAAGxC,EAAEwD,EAAE,GAAG,IAAI,GAAGnC,EAAE,EAAE,GAAGmB,IAAI,EAAE1D,IAAI,EAAE,IAAI0D,EAAE,CAACA,EAAEgB,EAAE1E,EAAE,EAAED,EAAE2E,EAAEtE,EAAE,GAAG,MAAMsE,MAAM,CAACd,EAAEc,EAAE1E,EAAE0D,EAAEtD,EAAEc,EAAEwD,EAAE,IAAI,GAAG,EAAEA,EAAExD,EAAEwD,EAAE,IAAI9F,IAAI,IAAI,IAAI,GAAG,EAAEmB,GAAGK,EAAE,IAAI,GAAGA,EAAE,KAAKsE,EAAE,GAAG3E,EAAEK,EAAE,IAAIsE,EAAE,CAACA,EAAEd,EAAExD,EAAE,GAAG,WAAWxB,EAAEA,GAAG,UAAS,GAAG,IAAIwB,EAAE,IAAI,GAAG,CAAC,IAAIL,EAAE,IAAI,GAAG2E,EAAE,IAAI,EAAE,CAACA,EAAE,GAAGhK,EAAE,MAAMgK,EAAE,EAAEA,GAAGjF,GAAG,MAAMgF,IAAIC,EAAE,EAAEA,GAAGjF,EAAE,IAAIiF,EAAE,EAAEA,GAAGjF,KAAK,EAAE,EAAE89C,EAAE94C,KAAKA,IAAI,GAAG,OAAOA,KAAKA,IAAI,GAAG,MAAM,EAAE,GAAG1E,EAAEw9C,KAAKA,IAAI,EAAE,MAAMA,KAAKA,IAAI,EAAE,KAAK,EAAE,GAAG74C,EAAE,EAAE3E,EAAEmB,EAAE,OAAOuD,KAAKA,IAAI,GAAG,MAAM,EAAE,EAAEA,IAAI,GAAG,GAAG84C,IAAI,EAAE,EAAEA,KAAKA,IAAI,EAAE,KAAK,EAAE,EAAEx9C,IAAI,EAAE,IAAIA,KAAKA,IAAI,EAAE,KAAK,IAAI,GAAG,EAAE,IAAIA,EAAE,CAACrF,EAAEgK,EAAE9F,EAAEoB,MAAM,CAAC0D,EAAEgB,EAAEtE,EAAE,IAAI,IAAIA,EAAE,IAAI,GAAG,MAAM,EAAE,CAACm9C,GAAGr8C,EAAEnB,EAAE,GAAG,IAAI,GAAGwC,EAAE,EAAEmC,EAAE64C,IAAI,EAAEv9C,IAAI,EAAEA,EAAE0E,EAAE64C,EAAEv9C,EAAE0D,EAAEgB,EAAE3E,EAAE2D,EAAEgB,EAAExD,EAAEnB,EAAE,IAAI,GAAG,EAAE,IAAI2E,EAAEA,EAAExD,EAAEnB,EAAE,IAAI,GAAG,EAAE,IAAI2E,EAAE,CAAChK,EAAEgJ,EAAE9E,EAAEoB,EAAE,WAAWD,EAAE2E,EAAE,KAAKhK,EAAE,IAAI,EAAEkE,IAAI,IAAIsC,EAAE,KAAK,GAAGqB,EAAE,KAAK,EAAE,IAAIoC,EAAEjK,EAAE6H,EAAE,EAAEoC,IAAI,EAAEjK,IAAI,GAAG,EAAE,CAACkJ,EAAE1C,EAAExG,EAAE,IAAI,GAAG,EAAEgK,EAAExD,EAAExG,EAAE,IAAI,GAAG,EAAE,GAAG,IAAIgK,EAAE,KAAKhK,EAAE,GAAG,CAACsF,EAAEtF,EAAE,GAAG,EAAEgK,EAAExD,EAAElB,GAAG,GAAG,EAAE,IAAI0E,EAAE,CAAC1E,EAAEtF,EAAE,GAAG,EAAEgK,EAAExD,EAAElB,GAAG,GAAG,EAAE,IAAI0E,EAAE,CAACA,EAAE,EAAE,OAAO,MAAM,EAAE,CAAChB,EAAEgB,EAAE,GAAG,EAAE3E,EAAEmB,EAAEwC,GAAG,GAAG,EAAE,IAAI3D,EAAE,CAAC2D,EAAEgB,EAAE,GAAG,EAAE3E,EAAEmB,EAAEwC,GAAG,GAAG,EAAE,IAAI3D,EAAE,UAAU,CAAC2E,EAAE3E,EAAEC,EAAE0D,OAAO,CAACgB,EAAE3E,EAAEC,EAAE0D,GAAGxC,EAAElB,GAAG,GAAG,MAAM,CAAC2lD,EAAEzkD,EAAExG,EAAE,GAAG,GAAG,EAAEwG,EAAEykD,EAAE,IAAI,GAAGjhD,EAAExD,EAAEwD,EAAE,GAAG,GAAGihD,SAAQ,GAAG,GAAG,GAAG/hD,EAAE,CAAC5D,EAAEkB,EAAExG,EAAE,IAAI,GAAG,EAAE,IAAIA,EAAE,KAAKwG,EAAE,MAAMlB,GAAG,IAAI,GAAG,GAAG,CAACkB,EAAE,MAAMlB,GAAG,IAAI,GAAG0E,EAAE,IAAIA,EAAE,CAACxD,EAAE,KAAKzB,IAAI,GAAGO,GAAGP,EAAEA,IAAI,GAAGO,GAAG,WAAW,CAACkB,IAAIA,EAAE0C,EAAE,IAAI,GAAG,KAAKlJ,EAAE,GAAGkJ,EAAE,GAAG,EAAEA,EAAE,GAAG,IAAI,GAAGc,EAAE,IAAIA,EAAE,MAAMxD,EAAEwD,EAAE,IAAI,GAAGd,EAAE5D,EAAEkB,EAAExG,EAAE,IAAI,GAAG,EAAE,GAAGsF,EAAE,EAAE,CAACkB,EAAEwD,EAAE,IAAI,GAAG1E,EAAEkB,EAAElB,EAAE,IAAI,GAAG0E,EAAE1E,EAAEkB,EAAExG,EAAE,IAAI,GAAG,EAAE,GAAGsF,EAAE,CAACkB,EAAEwD,EAAE,IAAI,GAAG1E,EAAEkB,EAAElB,EAAE,IAAI,GAAG0E,UAAS,GAAG1E,EAAE,GAAG,GAAGpB,IAAI,EAAE,GAAG,CAAC+mD,EAAE/mD,EAAE2D,EAAE,EAAErB,EAAExG,EAAE,GAAG,GAAGirD,EAAE,EAAEA,EAAEjrD,EAAEirD,EAAE,EAAE,EAAEzkD,EAAEykD,GAAG,GAAGzkD,EAAEykD,GAAG,GAAG,MAAM,CAACzkD,EAAExG,EAAE,GAAG,GAAG6H,EAAE,EAAErB,EAAEyD,EAAE,GAAG,GAAG/F,EAAE,EAAEsC,EAAEyD,EAAE/F,GAAG,GAAGA,EAAEmB,EAAEnB,IAAI,EAAE,GAAGA,IAAI,EAAE,IAAI,CAAC8F,EAAExD,EAAE,KAAK,EAAE,KAAKwD,EAAE,GAAG3E,GAAG,CAACmB,EAAE,KAAKwD,EAAE,GAAG3E,EAAE2E,EAAE,MAAM3E,GAAG,GAAG,GAAG,EAAEC,EAAE,MAAMD,GAAG,GAAG,GAAG,EAAE,MAAM,CAAC2E,EAAExD,EAAE,MAAMnB,GAAG,GAAG,GAAG,GAAG,GAAG,EAAEC,EAAE,MAAMD,GAAG,GAAG,GAAG,EAAE,EAAEmB,EAAElB,GAAG,GAAG2E,EAAEzD,EAAEwD,EAAE,IAAI,GAAGC,EAAEzD,EAAEyD,EAAE,GAAG,GAAGD,EAAExD,EAAEyD,EAAE,IAAI,GAAG,MAAM5E,GAAG,GAAG,GAAG,MAAM2E,EAAE9F,IAAI,EAAE,GAAG8F,EAAE,GAAG9F,IAAI,EAAE,SAASmB,EAAE,OAAO,CAACA,EAAE2E,KAAKA,EAAE,QAAQ,KAAK,GAAG,OAAOA,KAAKA,EAAE,QAAQ,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,GAAG3E,EAAE,MAAM2E,KAAKA,EAAE,QAAQ,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,GAAGA,EAAE,QAAQ,KAAK,GAAG,GAAG3E,EAAE,OAAO,KAAK,GAAG,IAAIA,KAAKA,EAAE,OAAO,KAAK,GAAG,KAAK,IAAI,EAAEA,EAAEnB,KAAKmB,EAAE,EAAE,GAAG,EAAEA,GAAG,OAAOA,EAAE,EAAE2E,EAAE,MAAM3E,GAAG,GAAG,EAAEmB,EAAEyD,EAAE,IAAI,GAAG5E,EAAEmB,EAAEyD,EAAE,GAAG,GAAG,GAAG,EAAEzD,EAAEyD,EAAE,IAAI,GAAG,EAAE3E,EAAE,GAAGD,EAAE,KAAKN,EAAEO,GAAG,CAACkB,EAAE,KAAKzB,EAAEO,EAAEkB,EAAEwD,GAAG,GAAGC,EAAEzD,EAAEyD,EAAE,IAAI,GAAGD,EAAExD,EAAEyD,EAAE,IAAI,GAAGA,EAAEzD,EAAEyD,EAAE,GAAG,GAAGA,EAAE,MAAMD,EAAExD,EAAEwD,GAAG,GAAG,EAAExD,EAAE,GAAG,IAAIA,EAAEwD,EAAE,GAAG,IAAI,EAAE,KAAK9F,EAAE,GAAG,CAACa,EAAEb,KAAKmB,EAAE,IAAI,GAAG,EAAE,IAAIA,IAAI,GAAG,GAAG,MAAM,EAAE,CAACA,EAAE2E,EAAE,IAAIjF,IAAI,IAAI,GAAG,EAAEO,EAAEkB,EAAEnB,GAAG,GAAG,EAAE,IAAIC,EAAE,MAAM,IAAIkB,EAAElB,EAAE,GAAG,IAAI,EAAE,KAAKpB,EAAE,GAAG,CAAC8F,EAAE1E,EAAE,MAAMkB,MAAM,CAACzB,EAAEA,GAAG,EAAEiF,EAAE1E,GAAGkB,EAAEnB,GAAG,GAAG4E,EAAEzD,EAAEyD,EAAE,IAAI,GAAGD,EAAExD,EAAEyD,EAAE,IAAI,GAAGA,EAAEzD,EAAEyD,EAAE,GAAG,GAAGA,EAAE,MAAM3E,SAAQ,GAAGQ,EAAEkE,EAAE,EAAE,EAAEihD,EAAEzkD,EAAEV,GAAG,GAAG,EAAEU,EAAEykD,EAAE,IAAI,GAAGhhD,EAAEzD,EAAEV,GAAG,GAAGmE,EAAEzD,EAAEyD,EAAE,GAAG,GAAGghD,EAAEzkD,EAAEyD,EAAE,IAAI,GAAGD,EAAExD,EAAEyD,EAAE,IAAI,GAAG,SAAQ,GAAGghD,EAAEjrD,EAAE,EAAE,EAAEiyD,EAAE9pD,EAAE,OAAO8iD,EAAE,SAASpjD,GAAG,QAAQ,GAAGxC,EAAEmB,EAAE,KAAK,EAAE,GAAGnB,IAAI,GAAGwC,IAAI,EAAE,CAACmC,EAAE3E,EAAEwC,EAAE,EAAEvC,EAAEkB,EAAE,KAAK,EAAE,GAAGwD,IAAI,EAAE,GAAG,CAACihD,EAAE3lD,EAAEuC,EAAE,EAAErB,EAAE,KAAKykD,EAAEzkD,EAAE,KAAKwD,EAAExD,EAAEykD,EAAE,GAAG,GAAGjhD,EAAE,EAAExD,EAAElB,EAAED,GAAG,GAAG2E,EAAExD,EAAElB,EAAE,GAAG,GAAGuC,EAAE,MAAM,CAACrB,EAAE,KAAK,EAAEA,EAAE,KAAK,EAAEA,EAAElB,EAAE,GAAG,GAAGD,EAAE,EAAEmB,EAAElB,EAAED,EAAE,GAAG,GAAGmB,EAAElB,EAAED,EAAE,GAAG,GAAG,EAAE4lD,EAAE3lD,EAAE,EAAE,EAAE2sD,EAAE9pD,EAAE,OAAO8iD,EAAE,EAAEjiD,EAAExC,EAAE,KAAK,EAAE,GAAGwC,IAAI,EAAEnB,IAAI,EAAE,CAAC9B,EAAEiD,EAAEnB,EAAE,EAAErB,EAAE,KAAKT,EAAEklD,EAAEzkD,EAAE,KAAK,EAAEV,EAAEmlD,EAAEpjD,EAAE,EAAErB,EAAE,KAAKV,EAAEU,EAAEV,EAAE,GAAG,GAAGC,EAAE,EAAES,EAAEykD,EAAE,GAAG,GAAGpjD,EAAE,EAAEojD,EAAEA,EAAE,EAAE,EAAEgH,EAAE9pD,EAAE,OAAO8iD,EAAE,EAAE,KAAKzkD,EAAE,KAAK,GAAG,CAACA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,MAAM,EAAEA,EAAE,MAAM,EAAEA,EAAE,KAAK,EAAEA,EAAE,KAAK,EAAEA,EAAE,KAAK2B,GAAG,GAAG,WAAW6B,EAAE,UAAUA,EAAExD,EAAE,KAAK,EAAE0C,EAAErB,EAAE,GAAG,EAAE3D,EAAE2D,EAAE,GAAG,EAAEoC,EAAED,EAAE9F,EAAE,EAAElE,EAAE,EAAEgK,EAAE,EAAE,IAAIC,EAAEjK,KAAK,GAAG6H,IAAI,EAAE,CAACojD,EAAE,EAAEgH,EAAE9pD,EAAE,OAAO8iD,EAAE,EAAEjhD,EAAExD,EAAE,KAAK,EAAE,GAAGwD,EAAE,GAAG64C,EAAEr8C,EAAE,KAAK,GAAGq8C,GAAG54C,EAAEjK,GAAG,KAAK,GAAG6iD,IAAI,EAAE,GAAGA,GAAG54C,EAAEjK,GAAG,KAAK,EAAEgK,IAAI,GAAG,EAAE,CAACihD,EAAE,EAAEgH,EAAE9pD,EAAE,OAAO8iD,EAAE,EAAE5lD,EAAE,GAAG,KAAKmB,EAAE,KAAK,GAAG,CAACnB,EAAEmB,EAAE,KAAK,EAAEzB,EAAE,GAAG,GAAGM,EAAE,CAACC,EAAE,KAAK,MAAM,EAAE,CAACu9C,EAAEr8C,EAAElB,GAAG,GAAG,EAAE,GAAGu9C,IAAI,GAAGx9C,IAAI,GAAGw9C,GAAGr8C,EAAElB,EAAE,GAAG,GAAG,GAAG,KAAK,EAAED,IAAI,EAAE,EAAE,MAAM2E,EAAExD,EAAElB,EAAE,GAAG,GAAG,EAAE,IAAI0E,EAAE,CAACtE,EAAE,IAAI,MAAMX,OAAOO,EAAE0E,EAAE,IAAIC,EAAEjB,EAAEhJ,KAAK,EAAE,WAAW,CAACgK,EAAE4rD,GAAG3rD,EAAEjB,EAAEhJ,EAAE,GAAG,EAAE,IAAIgK,EAAE,MAAMxD,EAAElB,GAAG,GAAG,IAAIkB,EAAElB,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI0E,EAAE,MAAM,EAAE,GAAGA,EAAEC,EAAEjB,EAAEhJ,MAAM,CAACkE,EAAE+F,EAAEjB,EAAEhJ,EAAEgJ,EAAEgB,EAAEtE,EAAE,IAAI,MAAML,MAAM,CAACN,EAAEiF,EAAE3E,EAAE4E,EAAEjB,EAAEhJ,EAAE0F,EAAE,UAAUsE,EAAE,OAAOtE,EAAE,UAAU,GAAG,GAAG,IAAIA,EAAE,IAAI,IAAI,CAACJ,EAAEswD,GAAG,GAAG,EAAE,IAAItwD,EAAE,MAAM,EAAE,IAAIsC,EAAEpB,EAAE,KAAK,EAAEoB,IAAIA,GAAG,EAAEtC,EAAE,IAAI,EAAE,GAAGsC,GAAG,EAAEtC,EAAE,EAAEsC,GAAGtC,EAAE,IAAI2E,EAAEjK,GAAG,EAAEgG,EAAEQ,EAAE,KAAK,EAAEoB,IAAI,EAAEC,IAAI,EAAED,IAAI,EAAE,YAAY,EAAE,CAACi7C,EAAEr8C,EAAE,KAAK,EAAE,GAAGq8C,EAAE,GAAGj7C,EAAE5B,EAAE,KAAK,GAAGA,IAAI,GAAG4B,EAAE5B,EAAE,KAAK,EAAE68C,IAAI,EAAE,EAAE,CAAC74C,EAAE,EAAE,MAAMA,EAAE4rD,GAAGhuD,EAAE,GAAG,EAAE,IAAIoC,EAAE,KAAK1E,EAAE,GAAG,CAACpB,EAAE0D,EAAEoB,EAAE1D,EAAEI,EAAE,IAAI,MAAML,MAAM,CAACN,EAAEiF,EAAE3E,EAAEuC,EAAElC,EAAE,UAAUsE,EAAE,SAAQ,GAAG,GAAG,IAAItE,EAAE,IAAI,IAAI,CAACJ,EAAE,EAAED,EAAE,EAAE,KAAK6D,IAAI,EAAE7D,IAAI,GAAGA,IAAI,EAAE,YAAYN,EAAE,MAAM,EAAE,KAAK,IAAIA,EAAE,MAAM,EAAE,GAAG,CAACiF,EAAE,EAAE,UAAU,CAAC9F,EAAEmB,EAAE2D,EAAEjE,EAAEW,EAAE,IAAI,MAAML,EAAE2E,EAAExD,EAAE,KAAK,EAAEwD,EAAE9F,EAAEmB,EAAE2E,EAAE,EAAEA,EAAE,GAAGA,IAAI,GAAG,WAAW,CAAC9F,EAAEmB,EAAE2D,EAAEjE,EAAEW,EAAE,IAAI,MAAML,EAAE,IAAIuwD,GAAG5rD,EAAE,GAAG,MAAM,EAAE,GAAG,CAAC4rD,GAAGtwD,EAAE,GAAG,EAAE0E,EAAE,EAAE,UAAU,CAAC9F,EAAE8F,EAAE3E,EAAE,EAAE2D,EAAEjE,EAAEW,EAAE,IAAI,MAAML,UAAS,GAAGmB,EAAE,KAAKA,EAAE,KAAK,EAAEd,EAAE,QAAQ,CAACsE,EAAE,EAAEtE,EAAE,WAAU,GAAG,KAAKA,EAAE,IAAI,KAAKuE,EAAEjK,KAAK,EAAE,WAAW,IAAI+F,EAAE6vD,GAAG3rD,EAAEjK,EAAE,GAAG,EAAEoK,EAAEwrD,GAAG,GAAG,EAAEnvD,GAAG2D,EAAErE,EAAE,KAAK,GAAG8B,EAAE,GAAG,KAAK,KAAK9B,EAAE,MAAM,EAAE,GAAGU,EAAE,EAAEV,IAAI,EAAEqE,IAAI,IAAIrE,EAAE,MAAM,EAAE,IAAIqE,EAAE,MAAM,EAAE,IAAI,IAAI,EAAE,CAAClG,EAAEuC,EAAE2D,EAAErE,EAAE,EAAEiE,EAAEhB,EAAEjD,EAAEL,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAI,CAACsE,GAAGxD,EAAE,KAAK,GAAGtC,EAAE,EAAEsC,EAAE,KAAKwD,EAAE,GAAGA,IAAI,GAAGxD,EAAE,KAAK,KAAK,EAAEA,EAAE,KAAKwD,EAAEC,EAAEzD,EAAE,KAAK,EAAEwC,EAAE,GAAG,GAAGiB,EAAE,CAACD,EAAE,KAAK,MAAM,EAAE,CAAC1E,EAAEkB,EAAEwD,GAAG,GAAG,EAAE3E,EAAEmB,EAAEwD,EAAE,GAAG,GAAG,EAAE,IAAIhB,EAAE,KAAK1D,EAAED,EAAE,GAAG,CAACK,EAAE,IAAI,MAAMX,EAAEyB,EAAEwD,EAAE,GAAG,GAAG,EAAE,IAAIjF,EAAE,WAAWiF,EAAEjF,EAAE,KAAKW,EAAE,IAAI,KAAKI,EAAEkE,EAAE,EAAE,GAAGxD,EAAEwD,EAAE,IAAI,GAAG,EAAE,IAAI,GAAG,GAAGhB,IAAI,EAAEiB,IAAI,EAAE3E,IAAI,GAAG2E,IAAI,EAAE,EAAE,CAACzD,EAAEV,GAAG,GAAGT,EAAEnB,EAAE+mD,GAAGzkD,EAAE,KAAK,GAAGtC,EAAE,EAAE4B,GAAGmE,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,GAAGA,EAAE,GAAG,EAAEzD,EAAE,KAAKyD,EAAEnE,EAAEU,EAAE,KAAKykD,EAAEnlD,EAAEU,EAAEyD,EAAEnE,EAAE,GAAG,GAAGmlD,EAAEnlD,EAAE,EAAEU,EAAEyD,EAAEghD,EAAE,GAAG,GAAG,GAAGzkD,EAAE,KAAKA,EAAE,KAAK,MAAM,GAAGwC,IAAI,GAAGxC,EAAE,KAAK,KAAK,EAAEA,EAAE,KAAKwC,EAAE3D,EAAE2D,EAAE9E,EAAE,EAAE8F,EAAE,KAAK,MAAM,EAAE,CAAC,IAAIxD,EAAEwD,GAAG,GAAG,KAAK3E,EAAE,GAAG,CAACK,EAAE,IAAI,MAAMJ,EAAEkB,EAAEwD,EAAE,GAAG,GAAG,EAAE,IAAI1E,EAAE,WAAW0E,EAAE1E,EAAE,IAAII,EAAE,IAAI,KAAKc,EAAEwD,EAAE,IAAI,GAAG,EAAE,IAAI,EAAE,EAAE,CAACxD,EAAEwD,GAAG,GAAGhB,EAAE65C,EAAE74C,EAAE,EAAE,EAAExD,EAAEq8C,GAAG,IAAIr8C,EAAEq8C,GAAG,GAAG,GAAG3+C,EAAE2+C,EAAE75C,EAAE,EAAE,EAAE65C,EAAE75C,IAAI65C,EAAE,EAAE,IAAI,EAAE,EAAE,EAAEA,EAAE,GAAG,EAAE74C,EAAE3E,IAAIA,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,GAAGA,EAAE,GAAG,GAAG,EAAE0E,EAAE84C,EAAEh7C,EAAE,EAAE7H,EAAEgK,EAAE64C,EAAEh7C,EAAE,EAAErB,EAAEq8C,EAAE,GAAG,GAAGh7C,EAAE,EAAEqB,EAAE,GAAG,IAAIe,EAAE,KAAKD,EAAE,GAAG,CAACihD,GAAGzkD,EAAE,KAAK,GAAGxG,EAAE,EAAEwG,EAAE,KAAKykD,EAAEzkD,EAAE,KAAKuD,EAAEvD,EAAEuD,EAAE,GAAG,GAAGkhD,EAAE,MAAM,CAAC,IAAIzkD,EAAE,KAAK,KAAKwD,EAAE,GAAG,CAACihD,GAAGzkD,EAAE,KAAK,GAAGxG,EAAE,EAAEwG,EAAE,KAAKykD,EAAEzkD,EAAE,KAAKuD,EAAEvD,EAAEuD,EAAE,GAAG,GAAGkhD,EAAE,EAAEzkD,EAAEuD,EAAEkhD,GAAG,GAAGA,EAAE,MAAM/mD,EAAEsC,EAAEwD,EAAE,GAAG,GAAG,EAAE,IAAI9F,EAAE,EAAE,IAAI,EAAE,CAACA,EAAE,GAAG,GAAGA,IAAI,EAAE,IAAI,CAACoB,EAAEkB,EAAEwD,EAAE,GAAG,GAAG,EAAE3E,EAAEmB,EAAEwD,EAAE,IAAI,GAAG,EAAE,IAAI3E,EAAE,KAAKC,EAAE,GAAG,CAACkB,EAAE,KAAKA,EAAE,OAAO,IAAItC,IAAI,IAAI,UAAU,CAACsC,EAAElB,EAAE,IAAI,GAAGD,EAAEmB,EAAEnB,EAAE,GAAG,GAAGC,EAAE,WAAW,CAAC4D,EAAE1C,EAAEwD,EAAE,IAAI,GAAG,EAAE1E,EAAEkB,EAAEwD,EAAE,IAAI,GAAG,EAAE,GAAG,IAAI1E,EAAE,KAAK0E,EAAE,GAAG,CAAC1E,EAAEkB,EAAEwD,EAAE,GAAG,GAAG,GAAG,EAAE,IAAI1E,EAAE,CAACA,EAAEkB,EAAEwD,EAAE,IAAI,GAAG,EAAE,IAAI1E,EAAE,CAACA,EAAE,EAAE,WAAWD,EAAE2E,EAAE,GAAG,OAAO3E,EAAE2E,EAAE,GAAG,EAAE,EAAE,MAAM,EAAE,CAAChB,EAAE1D,EAAE,GAAG,EAAEP,EAAEyB,EAAEwC,GAAG,GAAG,EAAE,IAAIjE,EAAE,CAACiE,EAAE1D,EAAE,GAAG,EAAEP,EAAEyB,EAAEwC,GAAG,GAAG,EAAE,IAAIjE,EAAE,UAAU,CAACO,EAAEP,EAAEM,EAAE2D,OAAO,CAAC1D,EAAEP,EAAEM,EAAE2D,GAAGxC,EAAEnB,GAAG,GAAG,MAAM,CAAC4lD,EAAEzkD,EAAEwD,EAAE,GAAG,GAAG,EAAExD,EAAEykD,EAAE,IAAI,GAAG3lD,EAAEkB,EAAElB,EAAE,GAAG,GAAG2lD,SAAQ,GAAG,IAAI/hD,EAAE,MAAM7D,EAAEmB,EAAEwD,EAAE,IAAI,GAAG,EAAE,GAAG,IAAIxD,EAAE,MAAMnB,GAAG,IAAI,GAAG,KAAK2E,EAAE,GAAG,CAACxD,IAAIA,EAAE0C,EAAE,IAAI,GAAG,KAAKc,EAAE,GAAGd,EAAE,GAAG,EAAEA,EAAE,GAAG,IAAI,GAAG5D,EAAE,IAAIA,EAAE,MAAMpB,MAAM,CAACsC,EAAE,MAAMnB,GAAG,IAAI,GAAGC,EAAE,GAAGA,EAAE,EAAE,MAAMkB,EAAE,KAAKA,EAAE,OAAO,GAAGnB,GAAG,MAAMnB,SAAQ,GAAGsC,EAAElB,EAAE,IAAI,GAAG4D,EAAE7D,EAAEmB,EAAEwD,EAAE,IAAI,GAAG,EAAE,GAAG3E,EAAE,EAAE,CAACmB,EAAElB,EAAE,IAAI,GAAGD,EAAEmB,EAAEnB,EAAE,IAAI,GAAGC,EAAED,EAAEmB,EAAEwD,EAAE,GAAG,GAAG,GAAG,EAAE,IAAI3E,EAAE,MAAMmB,EAAElB,EAAE,IAAI,GAAGD,EAAEmB,EAAEnB,EAAE,IAAI,GAAGC,SAAQ,GAAG0E,EAAEA,GAAG9F,GAAG,GAAG,EAAE8E,GAAG9E,GAAG,GAAGlE,EAAE,OAAOgJ,EAAEhJ,EAAEqF,EAAE2E,EAAE,EAAE,EAAExD,EAAEnB,GAAG,GAAGmB,EAAEnB,GAAG,IAAI,EAAEmB,EAAEuD,EAAE,GAAG,GAAGf,EAAE,EAAExC,EAAEuD,EAAEf,GAAG,GAAGA,EAAE3D,EAAE2D,IAAI,EAAE,GAAGA,IAAI,EAAE,IAAI,CAACgB,EAAExD,EAAE,KAAK,EAAE,KAAKwD,EAAE,GAAG3E,GAAG,CAACmB,EAAE,KAAKwD,EAAE,GAAG3E,EAAE2E,EAAE,MAAM3E,GAAG,GAAG,GAAG,EAAEC,EAAE,MAAMD,GAAG,GAAG,GAAG,EAAE,MAAM,CAAC2E,EAAExD,EAAE,MAAMnB,GAAG,GAAG,GAAG,GAAG,GAAG,EAAEC,EAAE,MAAMD,GAAG,GAAG,GAAG,EAAE,EAAEmB,EAAElB,GAAG,GAAGyE,EAAEvD,EAAEwD,EAAE,IAAI,GAAGD,EAAEvD,EAAEuD,EAAE,GAAG,GAAGC,EAAExD,EAAEuD,EAAE,IAAI,GAAG,MAAM1E,GAAG,GAAG,GAAG,MAAM2E,EAAEhB,IAAI,EAAE,GAAG,IAAIgB,EAAEjF,EAAE,MAAM,CAAC,GAAGiE,IAAI,EAAE,SAAS,CAACjE,EAAE,GAAG,MAAMA,EAAEiF,KAAKA,EAAE,QAAQ,KAAK,GAAG,OAAOA,KAAKA,EAAE,QAAQ,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,GAAGjF,EAAE,MAAMiF,KAAKA,EAAE,QAAQ,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,GAAGA,EAAE,QAAQ,KAAK,GAAG,GAAGjF,EAAE,OAAO,KAAK,GAAG,IAAIA,KAAKA,EAAE,OAAO,KAAK,GAAG,KAAK,IAAI,EAAEA,EAAEiE,KAAKjE,EAAE,EAAE,GAAG,EAAEA,GAAG,SAAQ,GAAGiF,EAAE,MAAMjF,GAAG,GAAG,EAAEyB,EAAEuD,EAAE,IAAI,GAAGhF,EAAEyB,EAAEuD,EAAE,GAAG,GAAG,GAAG,EAAEvD,EAAEuD,EAAE,IAAI,GAAG,EAAEzE,EAAEkB,EAAE,KAAK,EAAEnB,EAAE,GAAGN,EAAE,KAAKO,EAAED,GAAG,CAACmB,EAAE,KAAKlB,EAAED,EAAEmB,EAAEwD,GAAG,GAAGD,EAAEvD,EAAEuD,EAAE,IAAI,GAAGC,EAAExD,EAAEuD,EAAE,IAAI,GAAGA,EAAEvD,EAAEuD,EAAE,GAAG,GAAGA,EAAE,MAAMC,EAAExD,EAAEwD,GAAG,GAAG,EAAEhK,EAAE,GAAG,IAAIwG,EAAEwD,EAAE,GAAG,IAAI,EAAE,KAAKhB,EAAE,GAAG,CAACjE,EAAEiE,KAAKjE,EAAE,IAAI,GAAG,EAAE,IAAIA,IAAI,GAAG,GAAG,MAAM,EAAE,CAACM,EAAE2E,EAAE,IAAIjF,IAAI,IAAI,GAAG,EAAEO,EAAEkB,EAAEnB,GAAG,GAAG,EAAE,IAAIC,EAAE,MAAM,IAAIkB,EAAElB,EAAE,GAAG,IAAI,EAAE,KAAK0D,EAAE,GAAG,CAACgB,EAAE1E,EAAE,MAAMtF,MAAM,CAAC+E,EAAEA,GAAG,EAAEiF,EAAE1E,GAAGkB,EAAEnB,GAAG,GAAG0E,EAAEvD,EAAEuD,EAAE,IAAI,GAAGC,EAAExD,EAAEuD,EAAE,IAAI,GAAGA,EAAEvD,EAAEuD,EAAE,GAAG,GAAGA,EAAE,MAAMb,SAAQ,GAAGpD,EAAEkE,EAAE,EAAE,EAAEihD,EAAEzkD,EAAEV,GAAG,GAAG,EAAEU,EAAEykD,EAAE,IAAI,GAAGlhD,EAAEvD,EAAEV,GAAG,GAAGiE,EAAEvD,EAAEuD,EAAE,GAAG,GAAGkhD,EAAEzkD,EAAEuD,EAAE,IAAI,GAAGC,EAAExD,EAAEuD,EAAE,IAAI,GAAG,SAAQ,GAAGkhD,EAAEpI,EAAE,EAAE,EAAEoP,EAAE9pD,EAAE,OAAO8iD,EAAE,EAAEjhD,EAAE,KAAK,MAAM,EAAE,CAAC1E,EAAEkB,EAAEwD,GAAG,GAAG,EAAE,GAAG1E,IAAI,GAAG2E,IAAI,GAAGghD,EAAE3lD,GAAGkB,EAAEwD,EAAE,GAAG,GAAG,GAAG,EAAEihD,IAAI,EAAEhhD,IAAI,GAAG,EAAE,MAAMD,EAAExD,EAAEwD,EAAE,GAAG,GAAG,EAAEd,EAAE+hD,GAAG,KAAKA,GAAG,GAAG,EAAE,EAAE,IAAI,EAAE,EAAE,GAAGA,GAAG,GAAG,GAAG,GAAG,EAAE/hD,EAAEA,IAAI,GAAGe,EAAE,GAAG,KAAK,EAAEA,EAAEf,EAAEc,EAAE9F,GAAG,GAAG,EAAE6B,EAAEiD,EAAE,EAAE,EAAEjD,GAAGA,EAAE,EAAE,IAAI,EAAE,EAAE,EAAEA,EAAE,EAAED,EAAEkD,EAAEjD,EAAE,EAAES,EAAE,KAAKV,EAAEU,EAAE,KAAKwD,EAAEjE,EAAES,EAAEV,EAAE,GAAG,GAAGkE,EAAEjE,EAAE,EAAES,EAAEwC,EAAEgB,EAAE,GAAG,GAAG,GAAGxD,EAAE,KAAKA,EAAE,KAAKA,EAAE0C,EAAE,GAAG,GAAG,GAAG1C,EAAE0C,EAAE,GAAG,GAAG1C,EAAE,KAAKA,EAAE0C,EAAE,EAAE,GAAG,GAAG1C,EAAE,KAAKA,EAAE0C,EAAE,EAAE,GAAG,GAAG1C,EAAE,KAAKA,EAAE0C,EAAE,EAAE,IAAI,GAAG1C,EAAE,KAAKA,EAAE,KAAKwC,EAAExC,EAAE,KAAKtC,EAAEsC,EAAE,KAAK,EAAEA,EAAE,KAAK0C,EAAE,EAAEc,EAAEd,EAAE,GAAG,EAAE,EAAE,CAACpD,EAAEkE,EAAEA,EAAEA,EAAE,EAAE,EAAExD,EAAEwD,GAAG,GAAG,SAASlE,EAAE,EAAE,KAAK,EAAEmlD,IAAI,GAAG,IAAI/hD,EAAE,KAAKe,EAAE,GAAG,CAACzD,EAAE0C,EAAE,GAAG,GAAG1C,EAAE0C,EAAE,GAAG,IAAI,EAAE1C,EAAEyD,EAAE,GAAG,GAAGf,EAAEe,EAAE,EAAEzD,EAAE0C,GAAG,GAAGA,EAAEe,EAAE,IAAIf,EAAEe,EAAE,KAAK,EAAE,IAAI,CAAC5E,EAAE,OAAO6D,EAAEe,EAAE,KAAK,GAAG,GAAG,GAAG,EAAED,EAAExD,EAAE,KAAK,EAAE,KAAKwD,EAAE,KAAKd,EAAEe,EAAE,KAAK,IAAI,CAACzD,EAAE,KAAKwD,EAAE,KAAKd,EAAEe,EAAE,KAAK,GAAGD,EAAE3E,EAAEC,EAAED,EAAE,EAAE,MAAM,CAAC2E,EAAExD,EAAEnB,EAAE,GAAG,GAAG,EAAEC,EAAED,EAAE,EAAE,EAAEmB,EAAElB,GAAG,GAAG2E,EAAEzD,EAAEwD,EAAE,IAAI,GAAGC,EAAEzD,EAAEyD,EAAE,GAAG,GAAGD,EAAExD,EAAEyD,EAAE,IAAI,GAAG5E,EAAE,MAAM,IAAI6D,EAAEe,EAAE,KAAK,EAAE,IAAIf,EAAEe,EAAE,KAAK,EAAE,SAASlF,EAAE,OAAO,CAACA,GAAGmE,EAAEe,EAAE,KAAK,OAAOf,EAAEe,EAAE,KAAK,GAAG,QAAQ,KAAK,GAAG,GAAGlF,EAAE,KAAKA,EAAE,OAAO,KAAK,GAAG,KAAKmE,EAAEe,EAAE,KAAK,GAAG,QAAQ,KAAK,GAAG,IAAIlF,KAAKA,EAAE,OAAO,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,IAAIA,KAAKA,EAAE,OAAO,KAAK,GAAG,OAAOA,KAAKA,EAAE,OAAO,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,KAAK,IAAI,EAAEA,GAAGmE,EAAEe,EAAE,MAAMlF,EAAE,EAAE,GAAG,EAAEA,GAAG,OAAOA,EAAE,EAAEiF,EAAE,MAAMjF,GAAG,GAAG,EAAEyB,EAAEyD,EAAE,IAAI,GAAGlF,EAAEyB,EAAEyD,EAAE,IAAI,GAAG,EAAEzD,EAAEyD,EAAE,IAAI,GAAG,EAAE3E,EAAEkB,EAAE,KAAK,EAAEnB,EAAE,GAAGN,EAAE,KAAKO,EAAED,GAAG,CAACmB,EAAE,KAAKlB,EAAED,EAAEmB,EAAEwD,GAAG,GAAGC,EAAEzD,EAAEyD,EAAE,IAAI,GAAGD,EAAExD,EAAEyD,EAAE,IAAI,GAAGA,EAAEzD,EAAEyD,EAAE,GAAG,GAAGA,EAAE,MAAMD,EAAExD,EAAEwD,GAAG,GAAG,EAAEC,EAAE,GAAG,IAAIzD,EAAEwD,EAAE,GAAG,IAAI,EAAE,KAAKd,EAAEe,EAAE,GAAG,CAAClF,EAAEmE,EAAEe,KAAKlF,EAAE,IAAI,GAAG,EAAE,IAAIA,IAAI,GAAG,GAAG,MAAM,EAAE,CAACM,EAAE2E,EAAE,IAAIjF,IAAI,IAAI,GAAG,EAAEO,EAAEkB,EAAEnB,GAAG,GAAG,EAAE,IAAIC,EAAE,MAAM,IAAIkB,EAAElB,EAAE,GAAG,IAAI,EAAE,KAAK4D,EAAEe,EAAE,GAAG,CAACD,EAAE1E,EAAE,MAAM2E,MAAM,CAAClF,EAAEA,GAAG,EAAEiF,EAAE1E,GAAGkB,EAAEnB,GAAG,GAAG4E,EAAEzD,EAAEyD,EAAE,IAAI,GAAGD,EAAExD,EAAEyD,EAAE,IAAI,GAAGA,EAAEzD,EAAEyD,EAAE,GAAG,GAAGA,EAAE,MAAMjB,SAAQ,GAAGlD,EAAEkE,EAAE,EAAE,EAAEihD,EAAEzkD,EAAEV,GAAG,GAAG,EAAEU,EAAEykD,EAAE,IAAI,GAAGhhD,EAAEzD,EAAEV,GAAG,GAAGmE,EAAEzD,EAAEyD,EAAE,GAAG,GAAGghD,EAAEzkD,EAAEyD,EAAE,IAAI,GAAGD,EAAExD,EAAEyD,EAAE,IAAI,GAAG,OAAO,CAACghD,EAAEzkD,EAAE,KAAK,EAAE,IAAIykD,EAAE,IAAI,EAAEjiD,IAAI,EAAEiiD,IAAI,EAAEzkD,EAAE,KAAKwC,EAAExC,EAAE,KAAKwC,EAAExC,EAAE,KAAKtC,EAAEsC,EAAE,KAAK,EAAEA,EAAE,KAAKA,EAAE,KAAKA,EAAE,MAAM,EAAEA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,IAAIA,EAAE,KAAK,IAAIA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,KAAKykD,EAAE/mD,GAAG,GAAG,EAAE6B,EAAEiD,EAAE,EAAE,EAAEjD,GAAGA,EAAE,EAAE,IAAI,EAAE,EAAE,EAAEA,EAAE,EAAED,EAAEkD,EAAEjD,EAAE,EAAES,EAAE,KAAKV,EAAEU,EAAE,KAAKykD,EAAEllD,EAAES,EAAEV,EAAE,GAAG,GAAGmlD,EAAEllD,EAAE,EAAES,EAAEwC,EAAEiiD,EAAE,GAAG,GAAG,GAAGzkD,EAAE,KAAKA,EAAE,YAAW,GAAGwD,EAAExD,EAAE,KAAK,EAAE,GAAGwD,IAAI,EAAEnC,IAAI,EAAE,CAAC9B,EAAEiE,EAAEnC,EAAE,EAAErB,EAAE,KAAKT,EAAEklD,EAAEzkD,EAAE,KAAK,EAAEV,EAAEmlD,EAAEpjD,EAAE,EAAErB,EAAE,KAAKV,EAAEU,EAAEV,EAAE,GAAG,GAAGC,EAAE,EAAES,EAAEykD,EAAE,GAAG,GAAGpjD,EAAE,EAAEojD,EAAEA,EAAE,EAAE,EAAEgH,EAAE9pD,EAAE,OAAO8iD,EAAE,GAAGzkD,GAAG+sD,KAAK,IAAI,GAAG,GAAGtI,EAAE,EAAEgH,EAAE9pD,EAAE,OAAO8iD,EAAE,EAAE,SAAS4K,GAAG7rD,GAAGA,EAAEA,EAAE,EAAE,IAAI1E,EAAE,EAAED,EAAE,EAAEN,EAAE,EAAEiE,EAAE,EAAEE,EAAE,EAAEhF,EAAE,EAAElE,EAAE,EAAEiK,EAAE,EAAE,IAAID,EAAE,OAAO1E,EAAEkB,EAAE,KAAK,EAAEnB,EAAEmB,EAAEwD,GAAG,GAAG,GAAG,EAAEC,EAAED,GAAG,GAAG3E,GAAG,GAAG,EAAE,GAAG,KAAKA,EAAE,GAAG,CAACN,EAAEyB,EAAEwD,GAAG,GAAG,GAAG,EAAE,KAAK3E,EAAE,GAAG,OAAOnB,EAAE8F,GAAG,GAAG,EAAEjF,GAAG,EAAEmE,EAAEnE,GAAGM,GAAG,GAAG,EAAE,GAAGnB,IAAI,EAAEoB,IAAI,EAAE,OAAO,IAAIkB,EAAE,KAAK,KAAKtC,EAAE,GAAG,CAACoB,EAAEkB,EAAEyD,EAAE,GAAG,GAAG,EAAE,IAAI3E,EAAE,EAAE,IAAI,EAAE,CAACtF,EAAEkE,EAAEoB,EAAE4D,EAAE,MAAM1C,EAAE,KAAK0C,EAAE1C,EAAEyD,EAAE,GAAG,GAAG3E,GAAG,EAAEkB,EAAEtC,EAAE,GAAG,GAAGgF,EAAE,EAAE1C,EAAEtC,EAAEgF,GAAG,GAAGA,EAAE,OAAO,GAAGnE,IAAI,EAAE,IAAI,CAACO,EAAEkB,EAAEtC,EAAE,GAAG,GAAG,EAAE8F,EAAExD,EAAEtC,EAAE,IAAI,GAAG,EAAE,IAAI8F,EAAE,KAAK1E,EAAE,GAAG,CAACkB,EAAE,KAAKA,EAAE,OAAO,IAAIzB,IAAI,IAAI/E,EAAEkE,EAAEoB,EAAE4D,EAAE,UAAU,CAAC1C,EAAElB,EAAE,IAAI,GAAG0E,EAAExD,EAAEwD,EAAE,GAAG,GAAG1E,EAAEtF,EAAEkE,EAAEoB,EAAE4D,EAAE,OAAOF,EAAExC,EAAEtC,EAAE,IAAI,GAAG,EAAEoB,EAAEkB,EAAEtC,EAAE,IAAI,GAAG,EAAE,GAAG,IAAIoB,EAAE,KAAKpB,EAAE,GAAG,CAACoB,EAAEkB,EAAEtC,EAAE,GAAG,GAAG,GAAG,EAAE,IAAIoB,EAAE,CAACA,EAAEkB,EAAEtC,EAAE,IAAI,GAAG,EAAE,IAAIoB,EAAE,CAACA,EAAE,EAAE,WAAW0E,EAAE9F,EAAE,GAAG,OAAO8F,EAAE9F,EAAE,GAAG,EAAE,EAAE,MAAM,EAAE,CAACa,EAAEO,EAAE,GAAG,EAAED,EAAEmB,EAAEzB,GAAG,GAAG,EAAE,IAAIM,EAAE,CAACN,EAAEO,EAAE,GAAG,EAAED,EAAEmB,EAAEzB,GAAG,GAAG,EAAE,IAAIM,EAAE,UAAU,CAACC,EAAED,EAAE2E,EAAEjF,OAAO,CAACO,EAAED,EAAE2E,EAAEjF,GAAGyB,EAAEwD,GAAG,GAAG,MAAM,CAAChK,EAAEwG,EAAEtC,EAAE,GAAG,GAAG,EAAEsC,EAAExG,EAAE,IAAI,GAAGsF,EAAEkB,EAAElB,EAAE,GAAG,GAAGtF,SAAQ,GAAG,GAAGgJ,EAAE,CAACgB,EAAExD,EAAEtC,EAAE,IAAI,GAAG,EAAE,IAAIsC,EAAE,MAAMwD,GAAG,IAAI,GAAG,KAAK9F,EAAE,GAAG,CAACsC,EAAE,MAAMwD,GAAG,IAAI,GAAG1E,EAAE,IAAIA,EAAE,CAACkB,EAAE,KAAKA,EAAE,OAAO,GAAGwD,GAAGhK,EAAEkE,EAAEoB,EAAE4D,EAAE,WAAW,CAAC1C,IAAIA,EAAEwC,EAAE,IAAI,GAAG,KAAK9E,EAAE,GAAG8E,EAAE,GAAG,EAAEA,EAAE,GAAG,IAAI,GAAG1D,EAAE,IAAIA,EAAE,CAACtF,EAAEkE,EAAEoB,EAAE4D,EAAE,OAAO1C,EAAElB,EAAE,IAAI,GAAG0D,EAAEgB,EAAExD,EAAEtC,EAAE,IAAI,GAAG,EAAE,GAAG8F,EAAE,EAAE,CAACxD,EAAElB,EAAE,IAAI,GAAG0E,EAAExD,EAAEwD,EAAE,IAAI,GAAG1E,EAAE0E,EAAExD,EAAEtC,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG8F,EAAE,CAACxD,EAAElB,EAAE,IAAI,GAAG0E,EAAExD,EAAEwD,EAAE,IAAI,GAAG1E,EAAEtF,EAAEkE,EAAEoB,EAAE4D,MAAM,CAAClJ,EAAEkE,EAAEoB,EAAE4D,OAAO,CAAClJ,EAAEkE,EAAEoB,EAAE4D,OAAO,CAAClJ,EAAEgK,GAAG,EAAE,EAAE1E,EAAED,GAAG,EAAEnB,EAAE8F,GAAG,EAAE,SAAQ,GAAG,GAAG9F,IAAI,GAAG+F,IAAI,EAAE,OAAO5E,EAAEmB,EAAEyD,EAAE,GAAG,GAAG,EAAE,KAAK5E,EAAE,GAAG,OAAO,KAAKA,EAAE,GAAG,CAAC,IAAImB,EAAE,KAAK,KAAKyD,EAAE,GAAG,CAACA,GAAGzD,EAAE,KAAK,GAAGlB,EAAE,EAAEkB,EAAE,KAAKyD,EAAEzD,EAAE,KAAKxG,EAAEwG,EAAExG,EAAE,GAAG,GAAGiK,EAAE,EAAE,IAAIjK,EAAE,KAAKwG,EAAE,KAAK,GAAG,OAAOA,EAAE,KAAK,EAAEA,EAAE,KAAK,EAAE,OAAO,IAAIA,EAAE,KAAK,KAAKyD,EAAE,GAAG,CAACA,GAAGzD,EAAE,KAAK,GAAGlB,EAAE,EAAEkB,EAAE,KAAKyD,EAAEzD,EAAE,KAAKtC,EAAEsC,EAAExG,EAAE,GAAG,GAAGiK,EAAE,EAAEzD,EAAEtC,EAAE+F,GAAG,GAAGA,EAAE,OAAOjB,GAAG3D,GAAG,GAAGC,EAAE,EAAE,GAAG,GAAGD,IAAI,EAAE,IAAI,CAAC2E,EAAExD,EAAEyD,EAAE,GAAG,GAAG,EAAE3E,EAAEkB,EAAEyD,EAAE,IAAI,GAAG,EAAE,IAAI3E,EAAE,KAAK0E,EAAE,GAAG,CAACxD,EAAE,KAAKA,EAAE,OAAO,IAAInB,IAAI,IAAI,UAAU,CAACmB,EAAEwD,EAAE,IAAI,GAAG1E,EAAEkB,EAAElB,EAAE,GAAG,GAAG0E,EAAE,WAAW,CAACd,EAAE1C,EAAEyD,EAAE,IAAI,GAAG,EAAE3E,EAAEkB,EAAEyD,EAAE,IAAI,GAAG,EAAE,GAAG,IAAI3E,EAAE,KAAK2E,EAAE,GAAG,CAAC3E,EAAEkB,EAAEyD,EAAE,GAAG,GAAG,GAAG,EAAE,IAAI3E,EAAE,CAACA,EAAEkB,EAAEyD,EAAE,IAAI,GAAG,EAAE,IAAI3E,EAAE,CAAC0E,EAAE,EAAE,WAAWA,EAAEC,EAAE,GAAG,OAAOD,EAAEC,EAAE,GAAG,EAAE,EAAE,MAAM,EAAE,CAAClF,EAAEO,EAAE,GAAG,EAAED,EAAEmB,EAAEzB,GAAG,GAAG,EAAE,IAAIM,EAAE,CAACN,EAAEO,EAAE,GAAG,EAAED,EAAEmB,EAAEzB,GAAG,GAAG,EAAE,IAAIM,EAAE,UAAU,CAACC,EAAED,EAAE2E,EAAEjF,OAAO,CAACO,EAAED,EAAE2E,EAAEjF,GAAGyB,EAAEwD,GAAG,GAAG,EAAEA,EAAE1E,MAAM,CAAC0E,EAAExD,EAAEyD,EAAE,GAAG,GAAG,EAAEzD,EAAEwD,EAAE,IAAI,GAAG1E,EAAEkB,EAAElB,EAAE,GAAG,GAAG0E,EAAEA,EAAE1E,SAAQ,GAAG,GAAG4D,EAAE,EAAE,CAAC5D,EAAEkB,EAAEyD,EAAE,IAAI,GAAG,EAAE,IAAIzD,EAAE,MAAMlB,GAAG,IAAI,GAAG,KAAK2E,EAAE,GAAG,CAACzD,EAAE,MAAMlB,GAAG,IAAI,GAAG0E,EAAE,IAAIA,EAAE,CAACxD,EAAE,KAAKA,EAAE,OAAO,GAAGlB,GAAG,WAAW,CAACkB,IAAIA,EAAE0C,EAAE,IAAI,GAAG,KAAKe,EAAE,GAAGf,EAAE,GAAG,EAAEA,EAAE,GAAG,IAAI,GAAGc,EAAE,IAAIA,EAAE,MAAMxD,EAAEwD,EAAE,IAAI,GAAGd,EAAE5D,EAAEkB,EAAEyD,EAAE,IAAI,GAAG,EAAE,GAAG3E,EAAE,EAAE,CAACkB,EAAEwD,EAAE,IAAI,GAAG1E,EAAEkB,EAAElB,EAAE,IAAI,GAAG0E,EAAE1E,EAAEkB,EAAEyD,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG3E,EAAE,EAAE,CAACkB,EAAEwD,EAAE,IAAI,GAAG1E,EAAEkB,EAAElB,EAAE,IAAI,GAAG0E,WAAU,GAAGxD,EAAExG,EAAE,GAAG,GAAGgJ,EAAE,EAAExC,EAAEtC,EAAE8E,GAAG,GAAGA,EAAE,IAAIhJ,EAAE,KAAKwG,EAAE,KAAK,GAAG,CAACA,EAAE,KAAKwC,EAAE,YAAY,CAACxC,EAAEyD,EAAE,GAAG,GAAG5E,GAAG,EAAEmB,EAAExG,EAAE,GAAG,GAAGsF,EAAE,EAAEkB,EAAEtC,EAAEoB,GAAG,GAAGA,EAAE0D,EAAE1D,EAAED,EAAE2D,IAAI,EAAE,GAAGA,IAAI,EAAE,IAAI,CAAC1D,EAAEkB,EAAE,KAAK,EAAE,KAAKlB,EAAE,GAAGD,GAAG,CAACmB,EAAE,KAAKlB,EAAE,GAAGD,EAAEC,EAAE,MAAMD,GAAG,GAAG,GAAG,EAAE2E,EAAE,MAAM3E,GAAG,GAAG,GAAG,EAAE,MAAM,CAACC,EAAEkB,EAAE,MAAMnB,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE2E,EAAE,MAAM3E,GAAG,GAAG,GAAG,EAAE,EAAEmB,EAAEwD,GAAG,GAAGhK,EAAEwG,EAAElB,EAAE,IAAI,GAAGtF,EAAEwG,EAAExG,EAAE,GAAG,GAAGsF,EAAEkB,EAAExG,EAAE,IAAI,GAAG,MAAMqF,GAAG,GAAG,GAAG,OAAOC,EAAE0D,IAAI,EAAE,GAAG1D,EAAE,GAAG0D,IAAI,EAAE,SAASjE,EAAE,OAAO,CAACA,EAAEO,KAAKA,EAAE,QAAQ,KAAK,GAAG,OAAOA,KAAKA,EAAE,QAAQ,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,GAAGP,EAAE,MAAMO,KAAKA,EAAE,QAAQ,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,GAAGA,EAAE,QAAQ,KAAK,GAAG,GAAGP,EAAE,OAAO,KAAK,GAAG,IAAIA,KAAKA,EAAE,OAAO,KAAK,GAAG,KAAK,IAAI,EAAEA,EAAEiE,KAAKjE,EAAE,EAAE,GAAG,EAAEA,GAAG,OAAOA,EAAE,EAAEO,EAAE,MAAMP,GAAG,GAAG,EAAEyB,EAAExG,EAAE,IAAI,GAAG+E,EAAEyB,EAAExG,EAAE,IAAI,GAAG,EAAEwG,EAAExG,EAAE,IAAI,GAAG,EAAEgK,EAAExD,EAAE,KAAK,EAAEnB,EAAE,GAAGN,EAAEiF,EAAE,GAAG,KAAKA,EAAE3E,GAAG,CAACmB,EAAE,KAAKwD,EAAE3E,EAAEmB,EAAElB,GAAG,GAAGtF,EAAEwG,EAAExG,EAAE,IAAI,GAAGsF,EAAEkB,EAAExG,EAAE,IAAI,GAAGA,EAAEwG,EAAExG,EAAE,GAAG,GAAGA,MAAM,CAACsF,EAAEkB,EAAElB,GAAG,GAAG,EAAEA,EAAE,GAAG,IAAIkB,EAAElB,EAAE,GAAG,IAAI,EAAE,KAAK0D,EAAE,GAAG,CAACjE,EAAEiE,KAAKjE,EAAE,IAAI,GAAG,EAAE,IAAIA,IAAI,GAAG,GAAG,MAAM,EAAE,CAACM,EAAEC,EAAE,IAAIP,IAAI,IAAI,GAAG,EAAEiF,EAAExD,EAAEnB,GAAG,GAAG,EAAE,IAAI2E,EAAE,MAAM,IAAIxD,EAAEwD,EAAE,GAAG,IAAI,EAAE,KAAKhB,EAAE,GAAG,CAAC1D,EAAE0E,EAAE,MAAM1E,MAAM,CAACP,EAAEA,GAAG,EAAEO,EAAE0E,GAAGxD,EAAEnB,GAAG,GAAGrF,EAAEwG,EAAExG,EAAE,IAAI,GAAGsF,EAAEkB,EAAExG,EAAE,IAAI,GAAGA,EAAEwG,EAAExG,EAAE,GAAG,GAAGA,EAAE,MAAMgK,SAAQ,GAAG9F,EAAEoB,EAAE,EAAE,EAAE2E,EAAEzD,EAAEtC,GAAG,GAAG,EAAEsC,EAAEyD,EAAE,IAAI,GAAGjK,EAAEwG,EAAEtC,GAAG,GAAGlE,EAAEwG,EAAExG,EAAE,GAAG,GAAGiK,EAAEzD,EAAExG,EAAE,IAAI,GAAGsF,EAAEkB,EAAExG,EAAE,IAAI,GAAG,SAAQ,GAAGiK,GAAGzD,EAAE,KAAK,IAAI,EAAE,EAAEA,EAAE,KAAKyD,EAAE,GAAGA,EAAE,EAAE,OAAO3E,EAAE,KAAK,MAAM,EAAE,CAACA,EAAEkB,EAAElB,GAAG,GAAG,EAAE,IAAIA,EAAE,WAAWA,EAAEA,EAAE,EAAE,EAAEkB,EAAE,MAAM,EAAE,OAAO,SAASsvD,GAAG9rD,EAAE1E,GAAG0E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAE,IAAIkB,EAAE,EAAEnB,EAAE,EAAEN,EAAE,EAAEyB,EAAEC,EAAEnB,EAAE,MAAM0E,EAAE,OAAO,EAAEjF,GAAGyB,IAAI,KAAKC,EAAEnB,EAAE,MAAM0E,IAAI,IAAI,GAAG,EAAE3E,EAAEoB,EAAEnB,IAAI,GAAG0E,EAAE,OAAO,EAAE,OAAQihD,GAAGlmD,IAAI,KAAK0B,EAAEnB,IAAI,GAAG0E,IAAI,IAAI,MAAMjF,EAAE,OAAOM,EAAE,KAAK,IAAI,GAAGN,EAAEM,GAAG,GAAGmB,EAAE,MAAM,GAAG,EAAE,SAASouD,GAAG5qD,EAAE1E,EAAEkB,EAAEnB,GAAG2E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAE,IAAIN,EAAE,EAAEiE,EAAE,EAAEjE,EAAE+wD,GAAG9rD,EAAExD,GAAG,EAAEwC,EAAEb,IAAI,EAAE,OAAQ8iD,GAAGxkD,EAAEnB,EAAEkB,GAAG,IAAIC,EAAEpB,EAAE2E,GAAG,GAAGhB,EAAEA,EAAE,EAAE,GAAGjE,EAAE,EAAE,GAAG,EAAE,SAAS2vD,GAAG1qD,EAAE1E,EAAEkB,EAAEnB,GAAG2E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAE,OAAQ4lD,EAAE3lD,EAAED,GAAG2E,EAAExD,IAAI,IAAI,EAAEwD,IAAI,EAAE,KAAK,EAAE,GAAGA,EAAExD,IAAI,EAAE,GAAG,EAAE,SAASquD,GAAG7qD,EAAE1E,EAAEkB,EAAEnB,GAAG2E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAEA,EAAEC,EAAED,GAAGmB,IAAI,EAAEwD,IAAI,EAAE,KAAK,EAAE,OAAQihD,EAAE5lD,EAAE,GAAG2E,EAAExD,IAAI,EAAE,GAAG,EAAE,SAASuvD,GAAG/rD,GAAGA,EAAEA,EAAE,EAAE,OAAQA,EAAE,IAAIjE,EAAEiE,EAAEA,EAAE,GAAG,GAAG,EAAE,IAAI,EAAE,SAASgsD,GAAGhsD,EAAE1E,EAAED,EAAEN,EAAEiE,GAAGgB,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAEiE,EAAEA,EAAE,EAAE,IAAIE,EAAE,EAAEhF,EAAE,EAAElE,EAAE,EAAEiK,EAAE,EAAEF,EAAE,EAAE84C,EAAE,EAAEh7C,EAAE,EAAE7B,EAAE,EAAE4B,EAAE,EAAElC,EAAE,EAAE,IAAIJ,EAAE,IAAIP,EAAE,CAAC,GAAGiE,EAAE,EAAE,CAACxC,EAAEwC,GAAG,IAAIgB,IAAI,IAAI3E,IAAI,GAAGmB,EAAEwC,EAAE,GAAG,GAAG,EAAEjE,EAAE,EAAEiE,GAAGgB,IAAI,IAAI3E,IAAI,KAAK,EAAE,OAAQ4lD,EAAElmD,EAAE,GAAGiE,GAAG,MAAM,CAAC,IAAIA,EAAE,CAACjE,EAAE,EAAEiE,EAAE,EAAE,OAAQiiD,EAAElmD,EAAE,GAAGiE,GAAG,EAAExC,EAAEwC,GAAG,GAAGgB,EAAE,EAAExD,EAAEwC,EAAE,GAAG,GAAG1D,EAAE,EAAEP,EAAE,EAAEiE,EAAE,EAAE,OAAQiiD,EAAElmD,EAAE,GAAGiE,GAAG,EAAE,GAAG,GAAG3D,EAAE,CAAC,GAAGN,EAAE,EAAE,CAACb,GAAG6B,EAAEhB,EAAE,GAAG,IAAIgB,EAAET,EAAE,GAAG,GAAG,EAAE,GAAGpB,IAAI,GAAG,GAAG,CAAC8B,EAAE9B,EAAE,EAAE,EAAElE,EAAEgK,MAAM9F,EAAE,EAAE,KAAK,GAAGA,EAAE,IAAI,GAAGoB,GAAG,GAAGpB,EAAE2D,EAAEvC,MAAMpB,EAAE,EAAE,KAAK,GAAGA,EAAE,IAAI,GAAGgF,EAAE,EAAEhF,EAAE8F,GAAG,GAAG9F,EAAE,MAAM,IAAI8E,EAAE,CAACjE,EAAE,EAAEiE,EAAE,EAAE,OAAQiiD,EAAElmD,EAAE,GAAGiE,GAAG,EAAExC,EAAEwC,GAAG,GAAGgB,EAAE,EAAExD,EAAEwC,EAAE,GAAG,GAAG1D,EAAEA,EAAE,EAAEP,EAAE,EAAEiE,EAAE,EAAE,OAAQiiD,EAAElmD,EAAE,GAAGiE,GAAG,EAAE,GAAG3D,EAAE,EAAEA,EAAE,EAAE,CAACnB,GAAG6B,EAAEV,EAAE,GAAG,GAAG,IAAIU,EAAET,EAAE,GAAG,GAAG,EAAEU,EAAE9B,EAAElE,EAAE,GAAGkE,EAAE,GAAG,GAAGoB,MAAMpB,EAAE,GAAG,KAAK,IAAIoB,GAAG,GAAGpB,EAAE8F,KAAK9F,IAAI,IAAIA,EAAE,IAAI,GAAG2D,EAAE3D,EAAE,IAAI,GAAGoB,KAAKpB,IAAI,GAAGgF,EAAEc,GAAG,GAAG9F,EAAE,GAAGA,GAAG,GAAGA,GAAGoB,GAAG,GAAGpB,EAAE8F,MAAM9F,EAAE,GAAG,KAAK,IAAI,GAAGA,GAAG,GAAG8F,GAAG,GAAG9F,EAAEA,EAAE,IAAI,GAAG,MAAM,GAAG8E,EAAE,EAAE,CAACxC,EAAEwC,GAAG,GAAG3D,EAAE,EAAE2E,EAAExD,EAAEwC,EAAE,GAAG,GAAG,EAAE,IAAI3D,EAAE,IAAI,EAAE,CAACN,EAAEO,EAAEA,EAAE,EAAE0D,EAAEgB,EAAE,EAAE,EAAE,OAAQihD,EAAElmD,EAAE,GAAGiE,GAAG,MAAM,CAACA,EAAE+sD,GAAG1wD,EAAE,GAAG,EAAEN,EAAEO,KAAK0D,IAAI,GAAG,EAAEA,EAAE1D,GAAG,GAAG0D,EAAEgB,KAAKhB,IAAI,GAAG,EAAE,OAAQiiD,EAAElmD,EAAE,GAAGiE,GAAG,OAAO,CAAC,IAAIjE,EAAE,CAAC,GAAGiE,EAAE,EAAE,CAACxC,EAAEwC,GAAG,IAAI1D,IAAI,IAAID,IAAI,GAAGmB,EAAEwC,EAAE,GAAG,GAAG,EAAEjE,EAAE,EAAEiE,GAAG1D,IAAI,IAAID,IAAI,KAAK,EAAE,OAAQ4lD,EAAElmD,EAAE,GAAGiE,GAAG,EAAE,IAAIgB,EAAE,CAAC,GAAGhB,EAAE,EAAE,CAACxC,EAAEwC,GAAG,GAAG,EAAExC,EAAEwC,EAAE,GAAG,IAAI1D,IAAI,IAAIP,IAAI,GAAGM,EAAE,EAAE2D,GAAG1D,IAAI,IAAIP,IAAI,KAAK,EAAE,OAAQkmD,EAAE5lD,EAAE,GAAG2D,GAAG,EAAE,KAAKjE,EAAE,EAAEA,GAAG,CAAC,GAAGiE,EAAE,EAAE,CAACxC,EAAEwC,GAAG,GAAGgB,EAAE,EAAExD,EAAEwC,EAAE,GAAG,GAAGjE,EAAE,EAAEO,EAAEA,EAAE,EAAED,EAAE,EAAE2D,EAAE1D,MAAMywD,GAAGhxD,EAAE,GAAG,KAAK,GAAG,OAAQkmD,EAAE5lD,EAAE,GAAG2D,GAAG,EAAE9E,GAAG6B,EAAEhB,EAAE,GAAG,IAAIgB,EAAET,EAAE,GAAG,GAAG,EAAE,GAAGpB,IAAI,GAAG,GAAG,CAAC8B,EAAE9B,EAAE,EAAE,EAAElE,EAAEsF,GAAG,GAAGpB,EAAE8F,MAAM9F,EAAE,EAAE,KAAK,GAAG2D,EAAEvC,MAAMpB,EAAE,EAAE,KAAK,GAAGgF,EAAE,EAAEhF,EAAE8F,GAAG,GAAG9F,EAAE,MAAM,IAAI8E,EAAE,CAACjE,EAAE,EAAEiE,EAAE,EAAE,OAAQiiD,EAAElmD,EAAE,GAAGiE,GAAG,EAAExC,EAAEwC,GAAG,GAAGgB,EAAE,EAAExD,EAAEwC,EAAE,GAAG,GAAG1D,EAAEA,EAAE,EAAEP,EAAE,EAAEiE,EAAE,EAAE,OAAQiiD,EAAElmD,EAAE,GAAGiE,GAAG,SAAQ,GAAG,IAAIhD,EAAE,CAACiE,EAAE/F,EAAEoB,EAAEuC,EAAEmC,EAAE,EAAE9F,EAAE,MAAM,CAAC6F,EAAE2qD,GAAGrvD,EAAE,EAAE,EAAEN,EAAEA,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE89C,EAAE16C,IAAI,EAAE8B,EAAE/F,EAAEoB,EAAEuC,EAAEmC,EAAEhE,EAAE9B,EAAE,EAAE,EAAE,CAACwB,EAAEuE,EAAEA,EAAEf,IAAI,GAAGe,GAAG,EAAEf,EAAEhF,EAAEgF,GAAG,EAAExD,EAAE1F,GAAG,EAAE0F,IAAI,GAAG,EAAEkC,EAAE5H,IAAI,GAAGsF,GAAG,EAAE,EAAEuvD,GAAG9qD,EAAE,EAAE84C,EAAE,EAAEn9C,EAAE,EAAEkC,EAAE,GAAG,EAAE5B,EAAEmC,IAAI,EAAEN,EAAE7B,GAAG,KAAKA,EAAE,GAAG,GAAG,EAAE,IAAI,EAAE9B,EAAE2D,EAAE,EAAE7H,EAAE60D,GAAGnvD,EAAE,EAAEkC,EAAE,EAAEC,GAAGxC,EAAE,GAAG,KAAKW,EAAE,GAAG,GAAG,EAAE,IAAI,KAAKA,EAAE,GAAG,GAAG,EAAE,IAAI,IAAIjB,EAAEA,EAAE,GAAG,GAAG,EAAEO,EAAE6C,IAAI,EAAE6B,EAAEA,EAAE,EAAE,SAASA,EAAE,IAAI,GAAGA,EAAE,EAAE,GAAGhB,EAAE,EAAE,CAACxC,EAAEwC,GAAG,GAAGhJ,EAAEwG,EAAEwC,EAAE,GAAG,GAAG1D,EAAEsC,GAAGsB,EAAE,KAAK,GAAGe,GAAG,GAAG,GAAG,EAAEf,IAAI,IAAI,EAAEc,EAAEtE,GAAGwD,GAAG,EAAE,IAAI,KAAK,EAAEhF,EAAE,OAAQ+mD,EAAErjD,EAAE,GAAGlC,GAAG,EAAE,SAASivD,GAAG3qD,EAAE1E,EAAEkB,EAAEnB,GAAG2E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAE,OAAO2wD,GAAGhsD,EAAE1E,EAAEkB,EAAEnB,EAAE,GAAG,EAAE,SAASmwD,GAAGxrD,EAAE1E,EAAEkB,GAAGwD,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAE,IAAIA,EAAE,GAAG,GAAG,CAACykD,EAAE3lD,IAAIkB,EAAE,GAAG,OAAOwD,IAAIxD,GAAGlB,GAAG,GAAGkB,GAAG,IAAI,GAAGA,EAAEykD,EAAE,GAAG,OAAO3lD,IAAIkB,EAAE,GAAG,EAAE,SAASiuD,GAAGzqD,EAAE1E,EAAEkB,GAAGwD,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAE,IAAIA,EAAE,GAAG,GAAG,CAACykD,EAAE3lD,GAAGkB,GAAGwD,GAAG,GAAGxD,GAAG,GAAG,GAAGA,KAAK,GAAGA,EAAE,GAAG,OAAOwD,GAAGxD,EAAEykD,EAAEjhD,GAAGxD,EAAE,GAAG,GAAG,OAAO,EAAE,SAASysD,GAAGjpD,GAAGA,EAAEA,EAAE,EAAE,OAAQA,EAAE,MAAM,IAAIA,GAAG,EAAE,MAAM,IAAIA,GAAG,GAAG,MAAM,EAAEA,IAAI,GAAG,EAAE,SAAS+pD,GAAGzuD,EAAED,EAAEN,GAAGO,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAE,IAAIiE,EAAE,EAAEE,EAAE,EAAEhF,EAAE,EAAE,IAAIa,EAAE,IAAI,KAAK,CAACysD,EAAElsD,EAAE,EAAED,EAAE,EAAEN,EAAE,GAAG,EAAE,OAAOO,EAAE,EAAEpB,EAAEoB,EAAE,EAAE4D,EAAE5D,EAAEP,EAAE,EAAE,IAAIO,EAAE,KAAKD,EAAE,GAAG,CAAC,MAAMC,EAAE,EAAE,CAAC,IAAIP,EAAE,OAAOb,EAAE,EAAE8F,EAAE1E,GAAG,GAAG0E,EAAE3E,GAAG,GAAG,EAAEC,EAAEA,EAAE,EAAE,EAAED,EAAEA,EAAE,EAAE,EAAEN,EAAEA,EAAE,EAAE,EAAEA,EAAEmE,GAAG,EAAE,EAAEF,EAAEjE,EAAE,GAAG,EAAE,OAAOO,EAAE,KAAK0D,EAAE,GAAG,CAACxC,EAAElB,GAAG,GAAGkB,EAAEnB,GAAG,GAAGmB,EAAElB,EAAE,GAAG,GAAGkB,EAAEnB,EAAE,GAAG,GAAGmB,EAAElB,EAAE,GAAG,GAAGkB,EAAEnB,EAAE,GAAG,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGmB,EAAElB,EAAE,IAAI,GAAGkB,EAAEnB,EAAE,IAAI,GAAGC,EAAEA,EAAE,GAAG,EAAED,EAAEA,EAAE,GAAG,EAAE,OAAOC,EAAE,IAAIP,EAAE,GAAG,CAACyB,EAAElB,GAAG,GAAGkB,EAAEnB,GAAG,GAAGC,EAAEA,EAAE,EAAE,EAAED,EAAEA,EAAE,EAAE,OAAO,CAACN,EAAEmE,EAAE,EAAE,EAAE,OAAO5D,EAAE,IAAIP,EAAE,GAAG,CAACiF,EAAE1E,GAAG,GAAG0E,EAAE3E,GAAG,GAAG,EAAE2E,EAAE1E,EAAE,GAAG,GAAG0E,EAAE3E,EAAE,GAAG,GAAG,EAAE2E,EAAE1E,EAAE,GAAG,GAAG0E,EAAE3E,EAAE,GAAG,GAAG,EAAE2E,EAAE1E,EAAE,GAAG,GAAG0E,EAAE3E,EAAE,GAAG,GAAG,EAAEC,EAAEA,EAAE,EAAE,EAAED,EAAEA,EAAE,EAAE,GAAG,OAAOC,EAAE,IAAI4D,EAAE,GAAG,CAACc,EAAE1E,GAAG,GAAG0E,EAAE3E,GAAG,GAAG,EAAEC,EAAEA,EAAE,EAAE,EAAED,EAAEA,EAAE,EAAE,EAAE,OAAOnB,EAAE,EAAE,SAAS4wD,GAAGxvD,EAAED,EAAEN,GAAGO,EAAEA,EAAE,EAAED,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAE,IAAIiE,EAAE,EAAEE,EAAE,EAAEF,EAAE1D,EAAEP,EAAE,EAAEM,EAAEA,EAAE,IAAI,IAAIN,EAAE,IAAI,GAAG,CAAC,MAAMO,EAAE,EAAE,CAAC0E,EAAE1E,GAAG,GAAGD,EAAEC,EAAEA,EAAE,EAAE,EAAE4D,EAAE7D,EAAEA,GAAG,EAAEA,GAAG,GAAGA,GAAG,GAAG,OAAOC,EAAE,MAAM0D,GAAG,GAAG,GAAG,GAAG,CAACxC,EAAElB,GAAG,GAAG4D,EAAE1C,EAAElB,EAAE,GAAG,GAAG4D,EAAE1C,EAAElB,EAAE,GAAG,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE1C,EAAElB,EAAE,IAAI,GAAG4D,EAAE5D,EAAEA,EAAE,GAAG,EAAE,OAAOA,EAAE,IAAI0D,GAAG,EAAE,GAAG,CAACxC,EAAElB,GAAG,GAAG4D,EAAE5D,EAAEA,EAAE,EAAE,GAAG,OAAOA,EAAE,IAAI0D,EAAE,GAAG,CAACgB,EAAE1E,GAAG,GAAGD,EAAEC,EAAEA,EAAE,EAAE,EAAE,OAAO0D,EAAEjE,EAAE,EAAE,SAAS6wD,GAAG5rD,GAAGA,EAAEA,EAAE,EAAE,IAAI1E,EAAE,EAAED,EAAE,EAAEA,EAAEksD,IAAI,EAAEjsD,EAAEkB,EAAExG,GAAG,GAAG,EAAE,IAAIgK,EAAE,GAAG,GAAG1E,EAAE0E,EAAE,IAAI1E,EAAE,IAAIA,EAAE0E,EAAE,GAAG,EAAE,CAAC4nD,EAAEtsD,EAAE0E,EAAE,GAAG,EAAEs4B,EAAE,IAAI,OAAQ,EAAE,IAAIh9B,EAAE0E,EAAE,IAAI3E,EAAE,GAAG,KAAKosD,EAAEnsD,EAAE0E,EAAE,GAAG,GAAG,CAACs4B,EAAE,IAAI,OAAQ,EAAE97B,EAAExG,GAAG,GAAGsF,EAAE0E,EAAE,OAAO1E,EAAE,EAAE,SAAS2wD,GAAGjsD,EAAE1E,GAAG0E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAE,OAAO4wD,GAAElsD,EAAE,GAAG1E,EAAE,GAAG,EAAE,SAASinD,GAAGviD,EAAE1E,EAAEkB,EAAEnB,EAAEN,EAAEiE,EAAEE,GAAGc,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,GAAGA,EAAEnB,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAEiE,EAAEA,EAAE,EAAEE,EAAEA,EAAE,EAAE,OAAOksD,GAAEprD,EAAE,GAAG1E,EAAE,GAAGkB,EAAEnB,EAAE,EAAEN,EAAE,EAAEiE,EAAE,EAAEE,EAAE,GAAG,EAAE,SAASitD,GAAGnsD,EAAE1E,EAAEkB,EAAEnB,GAAG2E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAE,OAAO0/B,GAAE/6B,EAAE,GAAG1E,EAAE,EAAEkB,EAAE,EAAEnB,EAAE,GAAG,EAAE,SAAS+wD,GAAGpsD,EAAE1E,EAAEkB,EAAEnB,EAAEN,GAAGiF,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAE,OAAOsxD,GAAErsD,EAAE,GAAG1E,EAAE,EAAEkB,EAAE,EAAEnB,EAAE,EAAEN,EAAE,GAAG,EAAE,SAASuxD,GAAGtsD,EAAE1E,EAAEkB,GAAGwD,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAE+uD,GAAEvrD,EAAE,GAAG1E,EAAE,EAAEkB,EAAE,GAAG,SAAS+vD,GAAGvsD,GAAGA,EAAEA,EAAE,EAAElE,EAAE,GAAG,OAAO,EAAE,SAAS0wD,GAAGxsD,EAAE1E,EAAEkB,EAAEnB,EAAEN,EAAEiE,GAAGgB,EAAEA,EAAE,EAAE1E,GAAGA,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAEN,EAAEA,EAAE,EAAEiE,EAAEA,EAAE,EAAElD,EAAE,GAAG,OAAO,EAAE,SAAS2wD,GAAGzsD,EAAE1E,EAAEkB,GAAGwD,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEV,EAAE,GAAG,OAAO,EAAE,SAAS4wD,GAAG1sD,EAAE1E,EAAEkB,EAAEnB,GAAG2E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEkB,EAAEA,EAAE,EAAEnB,EAAEA,EAAE,EAAES,EAAE,GAAG,OAAO,EAAE,SAAS6wD,GAAG3sD,EAAE1E,GAAG0E,EAAEA,EAAE,EAAE1E,EAAEA,EAAE,EAAEQ,EAAE,GAGlo1E,IAAIowD,GAAE,CAACK,GAAGrD,IAAI,IAAIkC,GAAE,CAACoB,GAAGrC,IAAI,IAAIpvB,GAAE,CAAC0xB,GAAGpD,IAAI,IAAIgD,GAAE,CAACK,GAAGpD,IAAI,IAAIiC,GAAE,CAACoB,GAAG5B,IAAI,MAAM,CAAC6B,kBAAkBrD,GAAGsD,UAAUjC,GAAGkC,WAAWnC,GAAGoC,WAAWtE,EAAGuE,gBAAgBxB,GAAGyB,eAAexC,GAAGyC,cAAcxE,EAAGyE,MAAMtB,GAAGuB,QAAQ1C,GAAG2C,aAAaxC,GAAGyC,gBAAgBrE,GAAGsE,QAAQ5B,GAAG6B,QAAQzD,GAAG0D,QAAQ3C,GAAG4C,MAAMvuD,EAAEwuD,eAAehF,GAAGiF,OAAO9E,GAAG+E,KAAKtF,EAAEuF,MAAMlC,GAAGmC,kBAAkBzF,EAAE0F,gBAAgBnF,GAAGoF,WAAWhC,GAAGiC,gBAAgB3L,GAAG4L,aAAahC,GAAGiC,cAAchC,GAAGiC,YAAY/B,GAAGgC,oBAAoBjG,EAAElJ,WAAWgJ,EAAEvI,aAAannB,EAAE+mB,UAAU4I,GANzf,CAUPpB,GAAaC,GAAc1kD,GAAutC48C,IAAzrC9D,EAA0B,kBAAE6L,GAAuB,kBAAgB7L,EAAkB,UAAE6L,GAAe,UAAiB7L,EAAmB,WAAE6L,GAAgB,WAAiB7L,EAAmB,WAAE6L,GAAgB,WAAsB7L,EAAwB,gBAAE6L,GAAqB,gBAAqB7L,EAAuB,eAAE6L,GAAoB,eAAoB7L,EAAsB,cAAE6L,GAAmB,cAAY7L,EAAc,MAAE6L,GAAW,MAAc7L,EAAgB,QAAE6L,GAAa,QAAmB7L,EAAqB,aAAE6L,GAAkB,aAAsB7L,EAAwB,gBAAE6L,GAAqB,gBAAc7L,EAAgB,QAAE6L,GAAa,QAAc7L,EAAgB,QAAE6L,GAAa,QAAc7L,EAAgB,QAAE6L,GAAa,QAAY7L,EAAc,MAAE6L,GAAW,MAAqB7L,EAAuB,eAAE6L,GAAoB,eAAa7L,EAAe,OAAE6L,GAAY,OAAW7L,EAAa,KAAE6L,GAAU,KAAY7L,EAAc,MAAE6L,GAAW,MAAwB7L,EAA0B,kBAAE6L,GAAuB,kBAAsB7L,EAAwB,gBAAE6L,GAAqB,gBAA0B7L,EAA4B,oBAAE6L,GAAyB,oBAAiB7L,EAAmB,WAAE6L,GAAgB,YAAMtH,GAAavE,EAAqB,aAAE6L,GAAkB,aAAM1H,GAAUnE,EAAkB,UAAE6L,GAAe,UAAyV,GAAxU7L,EAAmB,WAAE6L,GAAgB,WAAsB7L,EAAwB,gBAAE6L,GAAqB,gBAAmB7L,EAAqB,aAAE6L,GAAkB,aAAoB7L,EAAsB,cAAE6L,GAAmB,cAAkB7L,EAAoB,YAAE6L,GAAiB,YAAE7L,EAAY,IAAE6L,GAAI7L,EAAc,MAAEyD,EAAS8D,GAAqG,GAA9EE,GAAUF,MAAoBA,GAAkBlG,EAAWkG,KAAsB9G,GAAqBE,EAAqB,CAAC,IAAIhhD,GAAKshD,EAAWsG,IAAmB9C,EAAOv8C,IAAIvI,GAAKujD,OAAiB,CAACmE,KAAuC,IAAI6L,GAAuB,SAASvzD,GAASA,EAAKyH,aAAWzH,EAAK,IAAIuO,WAAWvO,IAAM8kD,EAAOv8C,IAAIvI,EAAKujD,GAAgBlD,EAAiC,iCAASA,EAAiC,yBAAE2C,SAAS2E,MAA+C6L,GAAc,WAAWnS,EAAUuG,GAAkB2L,IAAuB,WAAW,KAAK,qCAAqC3L,OAAyB6L,GAAuB5R,GAAkB+F,IAAmB,GAAG6L,GAAwBF,GAAuBE,GAAuBlsD,aAAa,GAAG84C,EAAiC,yBAAE,CAAC,IAAIqT,GAAW,WAAW,IAAIC,EAAQtT,EAAiC,yBAAM2C,EAAS2Q,EAAQ3Q,SAAS,GAAoB,MAAjB2Q,EAAQjT,QAA+B,IAAjBiT,EAAQjT,OAAW,CAAC,IAAI1gD,EAAK6hD,GAAkBxB,EAAoC,6BAAG,IAAGrgD,EAA+L,OAA/JC,QAAQ+lC,KAAK,kFAAkF2tB,EAAQjT,OAAO,cAAckH,SAAmB4L,KAAzKxQ,EAAShjD,EAAKuH,OAAmLgsD,GAAuBvQ,IAAc3C,EAAiC,yBAAE2C,SAAUtkD,WAAWg1D,GAAW,GAAQrT,EAAiC,yBAAEuT,iBAAiB,OAAOF,SAAkBF,KAAyN,SAASK,GAAWnT,GAAQ/kD,KAAKq1C,KAAK,aAAar1C,KAAK4B,QAAQ,gCAAgCmjD,EAAO,IAAI/kD,KAAK+kD,OAAOA,EAAqH,SAASvR,GAAIsB,GAA8F,SAASqjB,IAAW/H,KAAiBA,IAAU,EAAQvI,IAAa2D,IAAcC,IAAa/G,EAA6B,sBAAEA,EAA6B,uBAAIgH,MAA9NG,EAAgB,IAAUP,IAAYO,EAAgB,IAAqLnH,EAAkB,WAAGA,EAAkB,UAAE,cAAc3hD,YAAW,WAAWA,YAAW,WAAW2hD,EAAkB,UAAE,MAAK,GAAGyT,MAAS,IAAQA,MAA2B,SAASjJ,GAAKnK,EAAOqT,GAAaA,GAAU5Q,GAAwB,IAATzC,IAAsByC,IAAqBK,GAAM,EAAwCnD,EAAe,QAAEA,EAAe,OAAEK,IAAQD,EAAMC,EAAO,IAAImT,GAAWnT,KAAS,SAASsB,GAAMgS,GAA4F,MAAnF3T,EAAgB,SAAGA,EAAgB,QAAE2T,GAAe70B,EAAT60B,GAAM,IAAalR,EAAIkR,GAAMxQ,GAAM,EAAuB,SAASwQ,EAAK,+CAAqE,GAA1xC3T,EAAa,KAAE,SAASwD,GAAM,GAAGkI,GAAWlI,EAAKxD,OAAY,CAAC,IAAIzoC,EAAIyoC,EAA6B,qBAAEA,EAA6B,qBAAE,WAAczoC,GAAIA,IAAMisC,EAAKxD,IAAS,OAAOA,GAAsIoH,GAAsB,SAASwM,IAAgBlI,IAAU5c,KAAU4c,KAAUtE,GAAsBwM,IAA2b5T,EAAY,IAAElR,GAAiakR,EAAc,MAAE2B,GAAS3B,EAAgB,QAAiF,IAAjD,mBAAnBA,EAAgB,UAAcA,EAAgB,QAAE,CAACA,EAAgB,UAASA,EAAgB,QAAE5jD,OAAO,GAAG4jD,EAAgB,QAAEx7C,KAAlBw7C,GAI3lJ,OAJsnJ8C,GAAc,EAAKhU,KAIloJkR,IAKHtkB,UAAiBskB,EAKnBtkB,UAAiBskB,2BC/BrB/lD,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IAGtD,IAAIy5D,EAAe,WACf,SAASA,EAAYjmD,EAAKywB,QACN,IAAZA,IAAsBA,EAAU,IACpC/iC,KAAKw4D,QAAU,KACfx4D,KAAKy4D,SAAW,KAChBz4D,KAAKy4D,SAAWC,EAAQzzD,SAAS,CAAE0zD,YAAa,GAAK51B,GACrD/iC,KAAKw4D,QAAUI,GAAkB54D,KAAK64D,QAAQvmD,EAAKtS,KAAKy4D,WACxDz4D,KAAK84D,aAAY,GAmDrB,OAjDAP,EAAYl4D,UAAU+N,KAAO,WACzB,OAAOsqD,EAAQpyD,UAAUtG,UAAM,OAAQ,GAAQ,WAC3C,OAAO04D,EAAQK,YAAY/4D,MAAM,SAAUozD,GAEvC,OADApzD,KAAKw4D,QAAQpB,kBAAkBp3D,KAAKy4D,SAASE,aACtC,CAAC,UAIpBJ,EAAYl4D,UAAU24D,KAAO,WACzB,OAAOh5D,KAAKw4D,QAAQrQ,MAAM,OAAQ,SAAU,GAAI,KAEpDoQ,EAAYl4D,UAAUmzC,IAAM,SAAUxM,GAClC,OAAOhnC,KAAKw4D,QAAQtB,KAAKlwB,IAE7BuxB,EAAYl4D,UAAUgmD,MAAQ,WAC1BrmD,KAAKw4D,QAAQpC,cAEjBmC,EAAYl4D,UAAUy4D,YAAc,SAAUG,GAC1Cj5D,KAAKw4D,QAAQjC,cAAc0C,EAAS,EAAI,IAE5CV,EAAYl4D,UAAUwS,MAAQ,WAC1B7S,KAAKw4D,QAAQvB,UAEjBsB,EAAYl4D,UAAU64D,aAAe,SAAUC,GAC3C,GAAIA,EAAW,GAAKA,EAAW,GAC3B,MAAM,IAAIj2D,MAAM,0BAA4Bi2D,GAEhD,OAAOn5D,KAAKw4D,QAAQxB,eAAemC,IAEvCZ,EAAYl4D,UAAU+4D,cAAgB,SAAUD,EAAUr6D,GACtD,GAAIq6D,EAAW,GAAKA,EAAW,GAC3B,MAAM,IAAIj2D,MAAM,0BAA4Bi2D,GAEhDn5D,KAAKw4D,QAAQnB,gBAAgB8B,EAAUr6D,IAE3Cy5D,EAAYl4D,UAAUw4D,QAAU,SAAUvmD,EAAKywB,GAC3C,IAAIs2B,EAAUt2B,EAAQs2B,kBAAsBh1D,GAAQ,OAAOC,QAAQC,IAAI,gBAAkBF,IACzF,MAAO,CACHqiD,MAAO2S,EACP1S,SAAU0S,EACV9M,uBAAwBxpB,EAAQwpB,mCAAyC,OAAO,GAChFK,WAAY7pB,EAAQ6pB,uBAA6B,OAAO,GACxDD,UAAWr6C,EAAIgnD,OACf9M,UAAWl6C,EAAIinD,iBAAqBtnD,GAAW,OAA8B,MAAtBK,EAAIgnD,OAAOrnD,GAAsBK,EAAIgnD,OAAOrnD,EAAU,IAAM,IACnH46C,WAAYv6C,EAAIknD,QAChB9M,WAAYp6C,EAAImnD,kBACDxnD,EAASnT,GAAS,OAAQwT,EAAIknD,QAAQvnD,EAAiB,MAARnT,GAAiBwT,EAAIknD,QAAQvnD,EAAU,EAAGnT,IAAU,OAGnHy5D,KAEX15D,UAAkB05D,eClBFmB,GAAO56D,EAAe4M,EAAgBiuD,GAAS,GAC3D,OAtBJ,SAASC,EAAiB96D,EAAe4M,EAAgBiuD,GAAS,EAAME,EAAS,IAC7E,IAAKF,GAAU76D,EAAQ,EACnB,OACI86D,EAAiB96D,IAAU,GAAI4M,GAASA,EAAQ,EAAIA,EAAQ,EAAI,GAAG,EAAOmuD,GAC1ED,EAAyB,MAAR96D,EAAgB,GAIzC,IAAI4E,EAASuyB,KAAKyhB,IAAI54C,GACjB+4C,SAAS,IACTiiB,cAEL,QAAqB,IAAVpuD,EACP,KAAOhI,EAAO5C,OAAS4K,GACnBhI,EAAS,IAAMA,EAIvB,OAAQ5E,EAAQ,EAAI,IAAM,IAAM+6D,EAASn2D,EAIlCk2D,CAAiB96D,EAAO4M,EAAOiuD,EAAQ,KCNlD,MAAMI,GACF3vD,YAAY4vD,EAAiC,SAyG7Ch6D,UAAO,IAAID,EAEHC,qBAAmC,CACvCs5D,OAASrnD,IACL,GAAc,EAAVA,EAEA,OADAjS,KAAKi6D,aAAa,kCAAkCC,GAAIjoD,EAAS,GAAG,MAC7D,EAGX,MACIkoD,EAAiB,UAAVloD,EAEX,OAHeA,IAAY,IAIvB,KAAK,EACD,GAAIkoD,EAAO,MACP,OAAOn6D,KAAKo6D,SAASD,GAEzB,MAEJ,KAAK,EACD,GAAIA,EAAO,KACP,OAAOn6D,KAAKq6D,SAASF,GAEzB,MAEJ,KAAK,GACD,OAAQA,GACJ,KAAK,QACD,OAAOn6D,KAAKs6D,WAQ5Bt6D,KAAKi6D,aAAa,gCAAgCC,GAAIjoD,EAAS,GAAG,OAGtEsnD,OAAStnD,IACL,GAAc,EAAVA,EAEA,OADAjS,KAAKi6D,aAAa,kCAAkCC,GAAIjoD,EAAS,GAAG,MAC7D,EAGX,MACIkoD,EAAiB,UAAVloD,EAEX,OAHeA,IAAY,IAIvB,KAAK,EACD,GAAIkoD,EAAO,MACP,OAAOn6D,KAAKu6D,SAASJ,GAEzB,MAEJ,KAAK,EACD,GAAIA,EAAO,KACP,OAAOn6D,KAAKw6D,SAASL,GAEzB,MAEJ,KAAK,GACD,OAAQA,GACJ,KAAK,MACL,KAAK,MACD,OAAO,GAQvBn6D,KAAKi6D,aAAa,gCAAgCC,GAAIjoD,EAAS,GAAG,OAGtEunD,QAAS,CAACvnD,EAAiBnT,KACvB,GAAc,EAAVmT,EAEA,YADAjS,KAAKi6D,aAAa,+BAA+BC,GAAIp7D,EAAO,SAASo7D,GAAIjoD,EAAS,GAAG,MAIzF,MACIkoD,EAAiB,UAAVloD,EAEX,OAHeA,IAAY,IAIvB,KAAK,EACD,GAAIkoD,EAAO,KAEP,YADAn6D,KAAKy6D,SAASN,EAAc,MAARr7D,GAGxB,MAEJ,KAAK,GACD,OAAQq7D,GACJ,KAAK,QAED,YADAn6D,KAAKs6D,UAAYx7D,IAOjCkB,KAAKi6D,aAAa,6BAA6BC,GAAIp7D,EAAO,SAASo7D,GAAIjoD,EAAS,GAAG,OAGvFwnD,QAAS,CAACxnD,EAAiBnT,KACvB,GAAc,EAAVmT,EAEA,YADAjS,KAAKi6D,aAAa,+BAA+BC,GAAIp7D,EAAO,GAAG,SAAao7D,GAAIjoD,EAAS,GAAG,MAIhG,MACIkoD,EAAiB,UAAVloD,EAEX,OAHeA,IAAY,IAIvB,KAAK,EACD,GAAIkoD,EAAO,KAEP,YADAn6D,KAAK06D,SAASP,EAAMr7D,GAI5B,KAAK,GACD,OAAQq7D,GACJ,KAAK,MACL,KAAK,MACD,QAMhBn6D,KAAKi6D,aAAa,6BAA6BC,GAAIp7D,EAAO,GAAG,SAAao7D,GAAIjoD,EAAS,GAAG,QAI1FjS,gBAAa,IAAI04C,YAAY,OAM7B14C,gBAAa,IAAI04C,YAAY,MAM7B14C,eAAY,EAEZA,kBAA4B,MAvQxC,WACI,MAAM26D,EAAU,IAAI/nD,WAAW,CAAC,EAAG,EAAG,EAAG,IAGzC,OAAuB,WAFR,IAAIzG,YAAYwuD,EAAQ/uD,QAEvB,GAKRgvD,IAWA56D,KAAKo6D,SAAWnoD,GAAWjS,KAAK66D,MAAM5oD,GAAYjS,KAAK66D,MAAM5oD,EAAU,IAAM,EAC7EjS,KAAKu6D,SAAWtoD,GACZjS,KAAK66D,MAAM5oD,GACVjS,KAAK66D,MAAM5oD,EAAU,IAAM,EAC3BjS,KAAK66D,MAAM5oD,EAAU,IAAM,GAC3BjS,KAAK66D,MAAM5oD,EAAU,IAAM,GAChCjS,KAAKq6D,SAAWpoD,GAAWjS,KAAK86D,MAAM7oD,GAAYjS,KAAK86D,MAAM7oD,EAAU,IAAM,EAC7EjS,KAAKw6D,SAAWvoD,GACZjS,KAAK86D,MAAM7oD,GACVjS,KAAK86D,MAAM7oD,EAAU,IAAM,EAC3BjS,KAAK86D,MAAM7oD,EAAU,IAAM,GAC3BjS,KAAK86D,MAAM7oD,EAAU,IAAM,GAChCjS,KAAKy6D,SAAW,CAACxoD,EAASnT,KACtBkB,KAAK86D,MAAM7oD,GAAmB,IAARnT,EACtBkB,KAAK86D,MAAM7oD,EAAU,GAAMnT,IAAU,EAAK,KAE9CkB,KAAK06D,SAAW,CAACzoD,EAASnT,KACtBkB,KAAK86D,MAAM7oD,GAAmB,IAARnT,EACtBkB,KAAK86D,MAAM7oD,EAAU,GAAMnT,IAAU,EAAK,IAC1CkB,KAAK86D,MAAM7oD,EAAU,GAAMnT,IAAU,GAAM,IAC3CkB,KAAK86D,MAAM7oD,EAAU,GAAMnT,IAAU,GAAM,OA5B/CkB,KAAKo6D,SAAWnoD,GAAWjS,KAAK+6D,OAAO9oD,IAAY,GACnDjS,KAAKu6D,SAAWtoD,GAAWjS,KAAKg7D,OAAO/oD,IAAY,GACnDjS,KAAKq6D,SAAWpoD,GAAWjS,KAAKi7D,OAAOhpD,IAAY,GACnDjS,KAAKw6D,SAAWvoD,GAAWjS,KAAKk7D,OAAOjpD,IAAY,GACnDjS,KAAKy6D,SAAW,CAACxoD,EAASnT,IAAWkB,KAAKi7D,OAAOhpD,IAAY,GAAKnT,EAClEkB,KAAK06D,SAAW,CAACzoD,EAASnT,IAAWkB,KAAKk7D,OAAOjpD,IAAY,GAAKnT,GA4BtEkB,KAAK66D,MAAQ,IAAIjoD,WAAW5S,KAAKm7D,YACjCn7D,KAAK+6D,OAAS,IAAIpQ,YAAY3qD,KAAKm7D,YACnCn7D,KAAKg7D,OAAS,IAAI7uD,YAAYnM,KAAKm7D,YAGnCn7D,KAAK86D,MAAQ,IAAIloD,WAAW5S,KAAKo7D,YACjCp7D,KAAKi7D,OAAS,IAAItQ,YAAY3qD,KAAKo7D,YACnCp7D,KAAKk7D,OAAS,IAAI/uD,YAAYnM,KAAKo7D,YAEnCp7D,KAAKq7D,aAAe,IAAI9C,GAAYv4D,KAAKs7D,gBAAiB,CACtD3C,kBACA/L,WAAYoN,IAGhBh6D,KAAK6S,QAGTzI,OACI,OAAOpK,KAAKq7D,aAAajtD,OAG7BhE,SAEAA,SACI,OAAOpK,KAAK66D,MAGhBzwD,SACI,OAAOpK,KAAK86D,MAGhB1wD,IAAIuuB,GACA34B,KAAKq7D,aAAaxoD,QAClB7S,KAAKq7D,aAAavC,aAAY,GAE9B,IAAK,IAAIz5D,EAAI,EAAGA,GAAK,GAAIA,IACrBW,KAAKq7D,aAAajC,cAAc/5D,EAAG,GAGvCW,KAAKq7D,aAAajC,cAAc,GAAI,YACpCp5D,KAAKq7D,aAAajC,cAAc,GAAI,OACpCp5D,KAAKq7D,aAAajC,cAAc,GAAIzgC,GAEpC34B,KAAKs6D,UAAY,EAEjB,MAAM/oD,EAAOvR,KAAKq7D,aAAa7nB,IAAI,UAE/BjiC,QAAwCA,GACxCvR,KAAKi6D,aAAa,0BAA0B1oD,KAIpDnH,iBACI,OAAOpK,KAAKq7D,aAGRjxD,aAAaxI,GACjB5B,KAAKq7D,aAAahV,QAClBrmD,KAAKuR,KAAKvQ,SAASY,ICzG3B,MAAM25D,WAAyB3xB,GAC3Bx/B,YAAYwB,GAGR,GAFAk+B,QAoYI9pC,YAAS,IAAI8E,MAAkB,GAM/B9E,eAAY,IAAI8E,MAAe,GAC/B9E,yBAAsB,IAAI8E,MAAyB,GACnD9E,oBAAiB,IAAI8E,MAAoB,GAEzC9E,iBAAc,IAAI4S,WAAW,GAC7B5S,qBAAkB,EAElBA,UAAO,EAEPA,uBAAoB,EACpBA,kBAAe,EAEfA,iBAAa,EACbA,kBAAc,EAGdA,sBAAiC,KAEjCA,UAAO,IAAIw7D,GA1ZX5vD,EAAO9K,OAAS,OAAe8K,EAAO9K,OAAS,MAC/C,MAAM,IAAIoC,MAAM,oCAAoC0I,EAAO9K,UAW/Dd,KAAKmqC,KAAOnqC,KAAKy7D,KAAKC,SAEtB,IAAK,IAAIr8D,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW5S,KAAKmqC,KAAKv+B,OAAQ,KAAa,KAAJvM,EAAY,MAI3EW,KAAKkrC,KAAOlrC,KAAKy7D,KAAKE,SAEtB37D,KAAK47D,UAAY,IAAIhpD,WAAW5S,KAAKkrC,KAAKt/B,OAAQ,KAAQ,MAS1D,MAAM6hB,EAAS,MAAS7hB,EAAO9K,OAE/B,IAAK,IAAIzB,EAAI,EAAGA,EAAIuM,EAAO9K,OAAQzB,IAC/BW,KAAKmqC,KAAK1c,EAASpuB,GAAKuM,EAAOvM,GAGnC,IAAK,IAAIA,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgxC,UAAU3xC,GAAK,IAAI4xC,GACxBjxC,KAAK67D,oBAAoBx8D,GAAK,IAAIy8D,GAGtC,IAAK,IAAIz8D,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAK+7D,eAAe18D,GAAK,IAAI28D,GAGjCh8D,KAAKy7D,KAAKlqD,KAAKjR,WAAWsB,GAAW5B,KAAK2R,cAAiD/P,IAE3F5B,KAAK6S,QAGTzI,qBAAqBwB,GAGjB,OAA8B,IAFN2/B,GAAkC3/B,EAAQ,CAAC,OAAOmiC,MAAM,IAAI//B,IAAI2K,GAAKA,EAAEiT,WAAW,MAEnF,GAG3BxhB,OACI,OAAOpK,KAAKy7D,KAAKrtD,OAGrBhE,QACIpK,KAAKy7D,KAAK5oD,QAEV7S,KAAK0tC,aAAe1tC,KAAKgsC,OAAO,GAEhC,IAAK,IAAI3sC,EAAI,EAAGA,EAAI,IAAQA,IACxBW,KAAKy7D,KAAKf,SAASr7D,GAAK,EAAGW,KAAKy7D,KAAKlB,SAASl7D,GAAK,IAGvD,IAAK,IAAIA,EAAI,KAAQA,EAAI,KAAQA,IAC7BW,KAAKy7D,KAAKf,SAAU,IAASr7D,EAAI,MAAW,EAAGW,KAAKy7D,KAAKlB,SAASl7D,GAAK,IAG3EW,KAAK0tC,aAAe1tC,KAAKgsC,OAAO,GAEhC,IAAK,IAAI3sC,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKi8D,YAAY58D,GAAK,EAG1B,IAAK,IAAIA,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgxC,UAAU3xC,GAAGwT,QAClB7S,KAAK67D,oBAAoBx8D,GAAGwT,QAGhC,IAAK,IAAIxT,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAK+7D,eAAe18D,GAAGwT,QAG3B7S,KAAKk8D,gBAAkB,EAEvBl8D,KAAKm8D,WAAan8D,KAAKo8D,aAAc,EAErCp8D,KAAK2S,KAAO,UAEZ3S,KAAKoxC,aAAe,EACpBpxC,KAAKqxC,kBAAoB,EAG7BjnC,UACI,OAAO26B,GAAcoD,cAAcqB,oBAGvCp/B,OAAOkI,GAGH,OAFAtS,KAAK4T,KAAOtB,EAELtS,KAGXoK,mBAAmBisB,GAGf,OAFAr2B,KAAKs2B,iBAAmBD,EAEjBr2B,KAGXoK,KAAK6H,GACD,OAAOjS,KAAK0rC,QAAQz5B,EAASjS,KAAK4T,KAAKY,uBAG3CpK,KAAK6H,GACD,OAAOjS,KAAK0tC,aAAuB,KAAVz7B,GAG7B7H,MAAM6H,EAAiBnT,GACnBkB,KAAK0rC,QAAQz5B,EAASnT,GAGhBsL,YAAYzG,EAAuC/B,GACzDkoC,MAAMn4B,YAAYhO,EAAQ/B,GAGtBwI,QAAQ6H,EAAiBnT,GAC7BmT,GAAW,KAEX,MAAMoqD,EAAar8D,KAAK0tC,aAAaz7B,GAQrC,GANIjS,KAAKm8D,YAAcn8D,KAAKo8D,aAAenqD,EAAU,KAAQA,EAAU,MAAUoqD,EAAa,KAC1FpqD,EAAUoqD,GAGdr8D,KAAKo8D,aAAc,EAEfnqD,EAAU,GAAM,CAChB,MAAMtR,EAAgB,EAAVsR,EACRk/B,EAAUnxC,KAAKgxC,UAAUrwC,GACzB27D,EAAoBt8D,KAAK67D,oBAAoBl7D,GACjD,IAAI+C,EAAS,EAEb,OAASuO,IAAY,EAAK,GACtB,KAAK,EACD,OAAQtR,GACJ,KAAK,EAED,OADAX,KAAKu8D,cACc,IAAZv8D,KAAK2S,KAEhB,KAAK,EAED,OADA3S,KAAKw8D,aACc,IAAZx8D,KAAK2S,KAEhB,KAAK,EACD,OAAQ3S,KAAK2S,OAAS,EAAK,IAE/B,KAAK,EACD,OAAQ3S,KAAK2S,OAAS,GAAM,IAEhC,KAAK,EACD,OAAQ3S,KAAK2S,OAAS,GAAM,IAEhC,KAAK,EAAM,CACP3S,KAAKsxC,sBAEL,IAAImrB,EAAM,EACV,IAAK,IAAIp9D,EAAI,EAAGA,EAAI,EAAGA,IACnBo9D,GAAOz8D,KAAK47D,WACP57D,KAAK+7D,eAAe18D,GAAGq9D,UAAY,GAAK18D,KAAK+7D,eAAe18D,GAAGs9D,kBAIxE,OAAa,IAANF,GAIf,OAAO,EAEX,KAAK,EAGD,OAFA/4D,EAAS1D,KAAK47D,UAAUzqB,EAAQO,SAChCP,EAAQyrB,YACDl5D,EAEX,KAAK,EAGD,OAFAA,EAAS1D,KAAK47D,UAAUzqB,EAAQO,SAAWP,EAAQI,OACnDJ,EAAQyrB,YACDl5D,EAEX,KAAK,EAGD,OAFAA,EAAS1D,KAAK47D,UAAUU,EAAkB5qB,UAAY,GACtD4qB,EAAkBM,YACXl5D,EAEX,KAAK,EACD,OAAO/C,EAAM,EAAIwwC,EAAQI,OAAS,EAEtC,QACI,OAAO,QAEZ,GAAIt/B,EAAU,IAAM,CACvB,MAAMtR,EAAgB,EAAVsR,EACRk/B,EAAUnxC,KAAKgxC,UAAUrwC,GACzB27D,EAAoBt8D,KAAK67D,oBAAoBl7D,GAEjD,OAAUsR,EAAU,KAAU,EAAK,IAC/B,KAAK,EACDqqD,EAAkBO,aAAa/9D,GAC/B,MAEJ,KAAK,EACDw9D,EAAkBQ,aAAah+D,GAC/B,MAEJ,KAAK,EACDw9D,EAAkBS,YAAYj+D,GAC9B,MAEJ,KAAK,EACDqyC,EAAQ6rB,IAAMl+D,EACd,MAEJ,KAAK,EACDqyC,EAAQ8rB,OAASn+D,EACjB,MAEJ,KAAK,EACDqyC,EAAQ0rB,aAAa/9D,GACrB,MAEJ,KAAK,EACD,OAAQ6B,GACJ,KAAK,EACDX,KAAKm8D,WAAuB,IAAVr9D,EAClB,MAEJ,KAAK,EACGkB,KAAKk8D,gBAAkB,IACvBl8D,KAAKi8D,YAAYj8D,KAAKk8D,mBAAqBp9D,GAG/C,MAEJ,KAAK,EACDkB,KAAKk9D,kBAAkBp+D,GACvB,MAEJ,KAAK,EACL,KAAK,EACL,KAAK,EACDkB,KAAK+7D,eAAep7D,EAAM,GAAM+7D,SAAmB,IAAR59D,EAInD,MAEJ,KAAK,EACDqyC,EAAQgsB,YACRn9D,KAAK47D,UAAUzqB,EAAQO,SAAW5yC,EAClC,MAEJ,KAAK,EACDqyC,EAAQ2rB,aAAah+D,GACrB,MAEJ,KAAK,EACD,OAAQ6B,GACJ,KAAK,EACDX,KAAK2S,KAAO,UACZ,MAEJ,KAAK,EACD3S,KAAK2S,KAAoB,WAAZ3S,KAAK2S,KAAqB7T,EACvC,MAEJ,KAAK,EACDkB,KAAK2S,KAAoB,WAAZ3S,KAAK2S,KAAsB7T,GAAS,EACjD,MAEJ,KAAK,EACDkB,KAAK2S,KAAoB,WAAZ3S,KAAK2S,KAAsB7T,GAAS,GACjD,MAEJ,KAAK,EACDkB,KAAK2S,KAAoB,SAAZ3S,KAAK2S,KAAsB7T,GAAS,GACjD,MAEJ,KAAK,EACL,KAAK,EACL,KAAK,EACDkB,KAAK+7D,eAAep7D,EAAM,GAAMwsB,UAAYntB,KAAKy7D,KAAKjB,SAClD,MAAkB17D,GAAS,IAKvC,MAEJ,KAAK,GACDkB,KAAK47D,UAAUzqB,EAAQO,SAAW5yC,EAClCqyC,EAAQyrB,kBAMT3qD,EAAU,MAAUA,EAAU,OACrCjS,KAAK0tC,aAAe1tC,KAAKgsC,OAAO/5B,EAAU,OAO9C,OAJIjS,KAAKm8D,YAAclqD,EAAU,KAAQA,EAAU,OAC/CjS,KAAKo8D,YAA6B,MAAfC,GAGhBA,EAGHjyD,sBACJ,MAAM6nC,EAAUjyC,KAAKs2B,mBAErBt2B,KAAKqxC,mBAAqD,KAA/BY,EAAUjyC,KAAKoxC,cAC1CpxC,KAAKoxC,aAAea,EAEpB,MAAM7M,EAASnP,KAAKoM,MAAMriC,KAAKqxC,mBAG/B,GAFArxC,KAAKqxC,mBAAqBjM,EAEX,IAAXA,EAIJ,IAAK,IAAI/lC,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAK+7D,eAAe18D,GAAGu9D,UAAUx3B,GAIjCh7B,kBAAkBkO,GACtB,MAAM8kD,EAAUp9D,KAAKi8D,YAAY,IAAMj8D,KAAKi8D,YAAY,IAAM,GAE9D,OAAQ3jD,GACJ,KAAK,EACDtY,KAAKk8D,gBAAkB,EACvB,MAEJ,KAAK,EACD,IAAK,IAAI78D,EAAI,EAAGA,EAAIW,KAAKi8D,YAAY,GAAI58D,IACrCW,KAAKkrC,KAAK,MAAWlrC,KAAKgxC,UAAgC,EAAtBhxC,KAAKi8D,YAAY,IAAWvqB,QAAUryC,EAAK,OAAWW,KAAKmqC,KAC3F,MAAUizB,EAAU/9D,GAAK,OAIjCW,KAAKk8D,gBAAkB,EACvB,MAEJ,KAAK,EACD,IAAK,IAAI78D,EAAI,EAAGA,EAAIW,KAAKi8D,YAAY,GAAI58D,IACrCW,KAAKkrC,KACD,MAAWlrC,KAAKgxC,UAAgC,EAAtBhxC,KAAKi8D,YAAY,IAAWvqB,QAAUryC,EAAK,OACrEW,KAAKi8D,YAAY,GAGzBj8D,KAAKk8D,gBAAkB,EACvB,MAEJ,KAAK,IACL,KAAK,IACDl8D,KAAKy7D,KAAKjoB,IAAI,OAKlBppC,cACJpK,KAAK2S,WAAQ3S,KAAK2S,KAAmB,UAAa,IAAU3S,KAAK2S,OAAS,GAAO3S,KAAK2S,MAAQ,IAG1FvI,aACJpK,KAAK2S,KACD3S,KAAK2S,KAAQ,GAAK,IACV,UAAa3S,KAAK2S,OAAS,IAAQ,UAAa3S,KAAK2S,QAAU,GAChE3S,KAAK2S,MAAQ,GAAO3S,KAAK2S,OAAS,IA+BrD,MAAMs+B,GAAN7mC,cA6BIpK,aAAU,EACVA,SAAM,EACNA,YAAS,EA9BToK,aACIpK,KAAK6S,QAGTzI,QACIpK,KAAK0xC,QAAU1xC,KAAKg9D,IAAMh9D,KAAKi9D,OAAS,EAG5C7yD,aAAatL,GACTkB,KAAK0xC,QAA0B,IAAf1xC,KAAK0xC,SAA4B,GAAR5yC,IAAiB,EAG9DsL,aAAatL,GACTkB,KAAK0xC,QAA0B,KAAf1xC,KAAK0xC,QAA6B,IAAR5yC,EAG9CsL,YACIpK,KAAK0xC,QAAW1xC,KAAK0xC,QAAU,EAAK,KAGxCtnC,YACIpK,KAAK0xC,QAAW1xC,KAAK0xC,QAAU,KAAS,KAG5CtnC,OACI,OAASpK,KAAKg9D,KAAsB,IAAfh9D,KAAK0xC,SAAmB,MAAU1xC,KAAKg9D,IAAMh9D,KAAKi9D,OAAU,KAAQ,IAAO,GAQxG,MAAMnB,GAAN1xD,cA0BIpK,aAAU,EACVA,cAAW,EA1BXoK,aACIpK,KAAK6S,QAGTzI,QACIpK,KAAK0xC,QAAU1xC,KAAKq9D,SAAW,EAGnCjzD,aAAatL,GACTkB,KAAK0xC,QAA0B,MAAf1xC,KAAK0xC,SAAgC,GAAR5yC,IAAiB,GAGlEsL,aAAatL,GACTkB,KAAK0xC,QAA0B,OAAf1xC,KAAK0xC,SAAgC,IAAR5yC,IAAiB,EAGlEsL,YAAYtL,GACRkB,KAAKq9D,SAAWv+D,EAChBkB,KAAK0xC,SAAW,QAGpBtnC,YACIpK,KAAK0xC,QAAW1xC,KAAK0xC,QAAU1xC,KAAKq9D,SAAY,SAOxD,MAAMrB,GACF5xD,cAkBApK,gBAAY,EACZA,cAAU,EACVA,cAAW,EAnBPA,KAAK6S,QAGTzI,QACIpK,KAAKmtB,UAAY,EACjBntB,KAAK08D,SAAW,EAChB18D,KAAKiyB,QAAU,EAGnB7nB,UAAUg7B,GACNplC,KAAKiyB,QAAWjyB,KAAKiyB,QAAUmT,EAASplC,KAAKmtB,UAAa,EAG9D/iB,iBACI,OAAOpK,KAAKiyB,UAAY,ICjehC,MAAMqrC,WAAqB1zB,GACvBx/B,YAAYwB,GACRk+B,QAkVI9pC,mBAAiBiS,IACrB,MAAMsrD,EAAcv9D,KAAKy7D,KAAK+B,iBAC1BC,EAAKF,EAAYrE,aAAa,GAC9BwE,EAAKH,EAAYrE,aAAa,GAElC,OAAQjnD,GACJ,KAAK,KAED,OADAjS,KAAK29D,cAAcF,EAAK,GAAGtwC,UAAYuwC,EAChC,EAEX,KAAK,KAED,OADA19D,KAAK29D,cAAcF,EAAK,GAAGxrC,QAAU,EAC9B,EAEX,KAAK,KAED,OADAsrC,EAAYnE,cAAc,EAAGp5D,KAAK29D,cAAcF,EAAK,GAAGxrC,SACjD,EAEX,KAAK,KAED,OADAjyB,KAAK29D,cAAcF,EAAK,GAAGG,aAAeF,EACnC,EAGf,UAGI19D,mBAAiBiS,IACrB,MAAMsrD,EAAcv9D,KAAKy7D,KAAK+B,iBAC1BC,EAAKF,EAAYrE,aAAa,GAC9BwE,EAAKH,EAAYrE,aAAa,GAElC,OAAQjnD,GACJ,KAAK,KAED,OADAjS,KAAK29D,cAAcF,EAAK,GAAGtwC,UAAYuwC,EAChC,EAEX,KAAK,KAED,OADA19D,KAAK29D,cAAcF,EAAK,GAAGxrC,QAAU,EAC9B,EAEX,KAAK,KAED,OADAsrC,EAAYnE,cAAc,EAAGp5D,KAAK29D,cAAcF,EAAK,GAAGxrC,SACjD,EAEX,KAAK,KAED,OADAjyB,KAAK29D,cAAcF,EAAK,GAAGG,aAAeF,EACnC,EAGf,UAGI19D,YAAS,IAAI8E,MAAkB,GAC/B9E,kBAA2B,KAE3BA,UAAmB,KACnBA,UAAmB,KACnBA,iBAA0B,KAE1BA,mBAAgB,IAAI8E,MAAmB,GACvC9E,uBAAoB,EACpBA,kBAAe,EAEfA,UAAmB,KAEnBA,iBAAa,EACbA,oBAAgB,EAEhBA,wBAAqB,EACrBA,wBAAoB,EAEpBA,wBAAqB,EACrBA,wBAAqB,EAErBA,qBAAkB,EAClBA,8BAA2B,EAC3BA,mBAAgB,EAEhBA,iBAAc,EACdA,qBAAkB,EAClBA,sBAAmB,EAEnBA,UAAY,KACZA,sBAAiC,KAnarC,MAAMk1C,EAAUooB,GAAaO,WAAWjyD,GAExC,OAAQspC,GACJ,OACIl1C,KAAK89D,gBAAkB,IACvB99D,KAAK+9D,oBACL/9D,KAAKg+D,gBAAkB,KACvBh+D,KAAKi+D,yBAA2B,KAChCj+D,KAAKk+D,cAAgB,KACrB,MAEJ,OACIl+D,KAAK89D,gBAAkB,IACvB99D,KAAK+9D,oBACL/9D,KAAKg+D,gBAAkB,IACvBh+D,KAAKi+D,yBAA2B,IAChCj+D,KAAKk+D,cAAgB,IACrB,MAEJ,OACIl+D,KAAK89D,gBAAkB,IACvB99D,KAAK+9D,oBACL/9D,KAAKg+D,gBAAkB,IACvBh+D,KAAKi+D,yBAA2B,IAChCj+D,KAAKk+D,cAAgB,IACrB,MAEJ,QACI,MAAM,IAAIh7D,MAAM,sCAGxB,GAAsB,QAAlB0I,EAAO9K,OACP,MAAM,IAAIoC,MAAM,mCAAmC0I,EAAO9K,UAG9Dd,KAAKy7D,KAAO,IAAID,OAAWtmB,EAA8Bl1C,KAAKm+D,cAAgBn+D,KAAKo+D,eACnFp+D,KAAKy7D,KAAKlqD,KAAKjR,WAAWsB,GAAW5B,KAAK2R,cAAiD/P,IAS3F5B,KAAKmqC,KAAOnqC,KAAKy7D,KAAKC,SAEtB,IAAK,IAAIr8D,EAAI,EAAGA,EAAI,MAAQA,IACxBW,KAAKmqC,KAAK9qC,GAAKuM,EAAOvM,GAG1B,IAAK,IAAIA,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW5S,KAAKmqC,KAAKv+B,OAAQ,MAAUvM,EAAI,GAAI,MAUxEW,KAAKkrC,KAAOlrC,KAAKy7D,KAAKE,SACtB37D,KAAKq+D,YAAc,IAAIzrD,WAAW5S,KAAKy7D,KAAKE,SAAS/vD,OAAQ,KAAQ,MAErE,IAAK,IAAIvM,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAK29D,cAAct+D,GAAK,IAAIi/D,GAGhCt+D,KAAK6S,QAGTzI,kBAAkBwB,GACd,MAAM2yD,EAAM,MAAMxwB,MAAM,IAAI//B,IAAI2K,GAAKA,EAAEiT,WAAW,IAC9C4yC,WhCnDuB5yD,EAAyBg/B,GACxD,IAAK,IAAIvrC,EAAI,EAAGA,EAAIuM,EAAO9K,OAAQzB,IAAK,CACpC,IAAIiK,EAEJ,IAAKA,EAAI,EAAGA,EAAIshC,EAAU9pC,SAAW8K,EAAOvM,EAAIiK,KAAOshC,EAAUthC,IAAMshC,EAAUthC,GAAK,GAAIA,KAE1F,GAAIA,IAAMshC,EAAU9pC,OAChB,OAAOzB,EAIf,OAAQ,EgCwCeo/D,CAAiC7yD,EAAQ,IAAI2yD,GAAM,KAAMA,GAAM,KAAMA,IAExF,GAAIC,EAAe,EACf,SAGJ,OAAQ5yD,EAAO4yD,EAAe,IAC1B,KAAK,EACD,SAEJ,KAAK,EACD,SAEJ,IAAK,IAAI5yC,WAAW,GAChB,SAEJ,QACI,UAIZxhB,qBAAqBwB,GACjB,WAAO0xD,GAAaO,WAAWjyD,GAGnCxB,OACI,OAAOpK,KAAKy7D,KAAKrtD,OAGrBhE,QACI,IAAK,IAAI/K,EAAI,EAAGA,EAAI,IAAQA,IACxBW,KAAKy7D,KAAKf,SAASr7D,GAAK,EAAGW,KAAKy7D,KAAKlB,SAASl7D,GAAK,IAGvDW,KAAKm8D,YAAa,EAClBn8D,KAAK0+D,eAAgB,EAErB1+D,KAAK2+D,mBAAqB,EAC1B3+D,KAAK4+D,mBAAoB,EAEzB5+D,KAAK6+D,mBAAqB,EAC1B7+D,KAAK8+D,mBAAqB,EAE1B9+D,KAAK0tC,aAAe1tC,KAAKgsC,OAAO,GAEhC,IAAK,IAAI3sC,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAK29D,cAAct+D,GAAGwT,QAG1B7S,KAAKoxC,aAAe,EACpBpxC,KAAKqxC,kBAAoB,EAG7BjnC,UACI,OAAO26B,GAAcoD,cAAcsB,eAGvCr/B,OAAOkI,GAGH,OAFAtS,KAAK4T,KAAOtB,EAELtS,KAGXoK,mBAAmBisB,GAGf,OAFAr2B,KAAKs2B,iBAAmBD,EAEjBr2B,KAGXoK,KAAK6H,GACD,OAAOjS,KAAK0rC,QAAQz5B,EAASjS,KAAK4T,KAAKY,uBAG3CpK,KAAK6H,GACD,OAAOjS,KAAK0tC,aAAuB,KAAVz7B,GAG7B7H,MAAM6H,EAAiBnT,GACnBkB,KAAK0rC,QAAQz5B,EAASnT,GAGlBsL,QAAQ6H,EAAiBnT,GAC7BmT,GAAW,KAEX,MAAM8sD,EAAW/+D,KAAK0tC,aAAaz7B,GAEnC,GAAIjS,KAAK2+D,sBAAuB,GAAK1sD,IAAYjS,KAAK6+D,mBAGlD,OAFA7+D,KAAK6+D,qBAEE7+D,KAAKg/D,6BAA6Bh/D,KAAKi/D,YAAa,KAG/D,GACIj/D,KAAKm8D,YACQ,KAAb4C,GACuE,IAAtE/+D,KAAK0tC,aAAcz7B,EAAU,EAAK,MAAUjS,KAAK89D,kBACJ,IAA9C99D,KAAK0tC,aAAcz7B,EAAU,EAAK,MAMlC,OAJAjS,KAAK2+D,mBAAqB,EAC1B3+D,KAAK6+D,mBAAsB5sD,EAAU,EAAK,KAC1CjS,KAAKi/D,YAAc,GAAsBj/D,KAAK0tC,aAAcz7B,EAAU,EAAK,MAEpE8sD,EAKX,GAFA/+D,KAAK2+D,mBAAqB,EAGtB3+D,KAAKm8D,YACLn8D,KAAK4+D,mBACL5+D,KAAK8+D,qBAAuB7sD,GAC5B8sD,GAAY/+D,KAAK+9D,iBACnB,CAGE,GAFA/9D,KAAK4+D,mBAAoB,EAErBG,IAAa/+D,KAAK+9D,iBAAkB,CAGpC,GAFA/9D,KAAKk/D,qBAEDl/D,KAAK0+D,cAAe,CACpB,MAAMzsC,EAAUjyB,KAAK29D,cAAc,GAAG1rC,QAClCktC,EAAgBn/D,KAAKy7D,KAAKjB,SAASx6D,KAAKk+D,gBAAkBjsC,IAAY,IAE1E,IAAImtC,EAAS,EAcb,OAZID,EAAgB,QAChBC,EAASp/D,KAAKmqC,KAAKg1B,IAGnBA,EAAgB,YAAcA,EAAgB,aAC9CC,EAASp/D,KAAKkrC,KAAKi0B,EAAgB,aAGV,IAAd,QAAVltC,KACDmtC,KAAY,GAGA,GAATA,EACJ,CACH,IAAI3C,EAAM,EACV,IAAK,IAAIp9D,EAAI,EAAGA,EAAI,EAAGA,IACnBo9D,GAAOz8D,KAAKq+D,YACPr+D,KAAKq/D,aAAahgE,IACdW,KAAK29D,cAAct+D,GAAG4yB,UAAYjyB,KAAK29D,cAAct+D,GAAGu+D,cACzD,MAIZ,OAAOnB,GAIf,OAAOz8D,KAAKs/D,gBAAgBP,GAKhC,GAFA/+D,KAAK4+D,mBAAoB,EAErB3sD,GAAW,KAAQ,CACnB,OAAQA,GACJ,KAAK,KACDjS,KAAKu/D,iCAAmDzgE,EAAO,KAC/D,MAEJ,KAAK,KAAQ,CACT,IAAI4yC,EAAU1xC,KAAKw/D,0BACnB9tB,IAAY,EACZA,GAAW,WACXA,GAAW5yC,GAAS,GACpBkB,KAAKy/D,yBAA2C/tB,GAEhD,MAGJ,KAAK,KACD1xC,KAAKm8D,WAAgC,IAAV,GAARr9D,GACnBkB,KAAK0+D,cAAmC,IAAV,IAAR5/D,GACtB,MAEJ,KAAK,KACD,OAAQA,GACJ,KAAK,IACL,KAAK,IACDkB,KAAKy7D,KAAKjoB,IAAI,OAM1BvhC,EAAU,MAAUA,EAAU,OAC9BjS,KAAK0tC,aAAe1tC,KAAKgsC,OAAO/5B,EAAU,OASlD,OALIjS,KAAKm8D,YAA2B,MAAb4C,IACnB/+D,KAAK4+D,mBAAoB,EACzB5+D,KAAK8+D,mBAAsB7sD,EAAU,EAAK,MAGvC8sD,EAGH30D,qBACJ,MAAM6nC,EAAUjyC,KAAKs2B,mBAErBt2B,KAAKqxC,mBAAqD,KAA/BY,EAAUjyC,KAAKoxC,cAC1CpxC,KAAKoxC,aAAea,EAEpB,MAAM7M,EAASnP,KAAKoM,MAAMriC,KAAKqxC,mBAG/B,GAFArxC,KAAKqxC,mBAAqBjM,EAEX,IAAXA,EAIJ,IAAK,IAAI/lC,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAK29D,cAAct+D,GAAGu9D,UAAUx3B,GAIhCh7B,sBAAsBujD,GAC1B,OAAO3tD,KAAKy7D,KAAKjB,SAASx6D,KAAKg+D,gBAAkB,EAAIrQ,GAGjDvjD,sBAAsBujD,EAAgB7uD,GAC1CkB,KAAKy7D,KAAKf,SAAS16D,KAAKg+D,gBAAkB,EAAIrQ,EAAQ7uD,GAGlDsL,wBAAwBujD,GAC5B,OAAO3tD,KAAKy7D,KAAKjB,SAASx6D,KAAKi+D,yBAA2B,EAAItQ,GAG1DvjD,gBAAgBujD,GACpB,MAAMjc,EAAU1xC,KAAKw/D,sBAAsB7R,GACvC7uD,EAAQkB,KAAKq+D,YAAY3sB,IAAY,IAIzC,OAFA1xC,KAAKy/D,sBAAsB9R,EAASjc,GAAW1xC,KAAK0/D,wBAAwB/R,IAAW,IAAO,GAEvF7uD,EAGHsL,6BAA6BujD,EAAgBiP,GACjD,MAAMlrB,EAAU1xC,KAAKw/D,sBAAsB7R,GACvC7uD,EAAQkB,KAAKq+D,YAAY3sB,IAAY,IAIzC,OAFA1xC,KAAKy/D,sBAAsB9R,EAASjc,GAAWkrB,GAAa,IAAO,GAE5D99D,EAGHsL,8BAA8BujD,EAAgB7uD,EAAe89D,GACjE,MAAMlrB,EAAU1xC,KAAKw/D,sBAAsB7R,GAE3C3tD,KAAKq+D,YAAY3sB,IAAY,IAAM5yC,EAEnCkB,KAAKy/D,sBAAsB9R,EAASjc,GAAWkrB,GAAa,IAAO,GAG/DxyD,aAAakO,GAGjB,OAFctY,KAAKy7D,KAAKjB,SAASx6D,KAAKk+D,cAAgB,EAAI5lD,GAE1C,WAAa,KAAU,MAyF/C,MAAMgmD,GAANl0D,cAUIpK,aAAU,EACVA,eAAY,EACZA,kBAAe,GAXfoK,QACIpK,KAAKiyB,QAAUjyB,KAAKmtB,UAAY,EAChCntB,KAAK49D,aAAe,GAGxBxzD,UAAUg7B,GACNplC,KAAKiyB,QAAWjyB,KAAKiyB,QAAUmT,EAASplC,KAAKmtB,UAAa,GCnclE,MAAMwyC,WAAsB/1B,GACxBx/B,YAAYwB,GAGR,GAFAk+B,QA0EI9pC,WAAoB,KACpBA,YAAS,IAAI4S,WAAW,MACxB5S,YAAS,IAAI4S,WAAW,MAExB5S,UAAY,KA5EM,OAAlB4L,EAAO9K,OACP,MAAM,IAAIoC,MAAM,qDAAqD0I,EAAO9K,UAGhF,IAAK,IAAIzB,EAAI,EAAGA,EAAI,KAAQA,IACxBW,KAAKqrC,OAAOhsC,GAAKuM,EAAOvM,GACxBW,KAAKsrC,OAAOjsC,GAAKuM,EAAO,KAASvM,GAGrCW,KAAK6S,QAGTzI,qBAAqBwB,GAEjB,MAAMq/B,EAAkBM,GAAkC3/B,EAAQ,CAC9D,CAAC,IAAM,EAAM,GACb,CAAC,IAAM,GAAM,GACb,CAAC,GAAM,EAAM,GACb,CAAC,GAAM,EAAM,EAAM,IACnB,CAAC,GAAM,IAAM,GAAM,MAGvB,IAAK,MAAM4hB,KAASyd,EAChB,GAAIzd,GAAS,EACT,OAAO,EAIf,OAAO,EAGXpjB,QACIpK,KAAKwrC,MAAQxrC,KAAKqrC,OAGtBjhC,KAAK6H,GACD,OAAOjS,KAAKoS,KAAKH,GAGrB7H,KAAK6H,GAGD,OAFAA,GAAW,KAEJjS,KAAKwrC,MAAMv5B,GAGtB7H,UACI,OAAO26B,GAAcoD,cAAcS,2BAGvCx+B,OAAOkI,GAMH,OALAtS,KAAK4T,KAAOtB,EAEZtS,KAAK4T,KAAKrI,MAAMiG,KAAKlR,WAAWN,KAAKssC,aAActsC,MACnDA,KAAK4T,KAAKrI,MAAMkG,MAAMnR,WAAWN,KAAKssC,aAActsC,MAE7CA,KAGHoK,aAAamiC,EAA4BrP,GAG7C,OAFoD,KAApCA,EAAKtpB,KAAK64B,yBAGtB,KAAK,KACDvP,EAAKsO,MAAQtO,EAAKmO,OAClB,MAEJ,KAAK,KACDnO,EAAKsO,MAAQtO,EAAKoO,SCtElC,MAAMs0B,WAAoBh2B,GACtBx/B,YAAYwB,GAGR,GAFAk+B,QAoJI9pC,YAA4B,IAAI8E,MAAM,GACtC9E,eAA+B,IAAI8E,MAAM,GACzC9E,UAAO,IAAI4S,WAAW,IAItB5S,yBAAqB,EACrBA,kBAAe,EACfA,oBAAiB,EACjBA,8BAA2B,EA3JT,OAAlB4L,EAAO9K,QAAuC,OAAlB8K,EAAO9K,OACnC,MAAM,IAAIoC,MAAM,oDAAoD0I,EAAO9K,gBAG/E,IAAK,IAAIzB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxBW,KAAKgsC,OAAO3sC,GAAK,IAAIuT,WAAW,MAEhC,IAAK,IAAItJ,EAAI,EAAGA,EAAI,KAAQA,IACxBtJ,KAAKgsC,OAAO3sC,GAAGiK,GAAKsC,EAAW,KAAJvM,EAAaiK,GAIhDtJ,KAAK6S,QAGTzI,UACI,OAAO26B,GAAcoD,cAAcU,iBAGvCz+B,QACIpK,KAAK6/D,cAAc,GAEnB7/D,KAAK8/D,oBAAqB,EAG9B11D,UAAUygB,GACN,IAAK,IAAIxrB,EAAI,EAAGA,EAAI,GAAMA,IACtBW,KAAKkrC,KAAK7rC,GAAKwrB,EAAI9X,IAAI,KAI/B3I,OAAOkI,GAMH,OALAtS,KAAK4T,KAAOtB,EAEZA,EAAI/G,MAAMiG,KAAKlR,WAAWs/D,GAAYtzB,aAActsC,MACpDsS,EAAI/G,MAAMkG,MAAMnR,WAAWs/D,GAAYtzB,aAActsC,MAE9CA,KAGXoK,KAAK6H,GAID,OAHAA,GAAW,KACXjS,KAAK0rC,QAAQz5B,EAASjS,KAAK4T,KAAKY,uBAE5BvC,EAAU,GACHjS,KAAKkrC,KAAKj5B,GAGjBA,EAAU,IACHjS,KAAK4T,KAAKY,sBAGdxU,KAAK+/D,UAAU9tD,IAAY,IAAc,KAAVA,GAG1C7H,MAAM6H,EAAiBnT,GACnBkB,KAAK0rC,QAAkB,KAAVz5B,EAAkBnT,GAGnCsL,KAAK6H,GAGD,OAFAA,GAAW,MAEG,GACHjS,KAAKkrC,KAAKj5B,GAGjBA,EAAU,IACHjS,KAAK4T,KAAKY,sBAGdxU,KAAK+/D,UAAU9tD,IAAY,IAAc,KAAVA,GAGlC7H,oBAAoBmiC,EAA4BrP,GACpD,IAAIjrB,EAAUirB,EAAKtpB,KAAK64B,wBAEpBvP,EAAK4iC,oBAAsB7tD,IAAYirB,EAAK8iC,0BAAsD,KAAxB9iC,EAAKgR,iBAC/EhR,EAAK2iC,cAAc3iC,EAAK+iC,cACxB/iC,EAAK4iC,oBAAqB,GAGhB,KAAV7tD,IAIJA,GAAW,IAEPA,GAAW,IAAQA,GAAW,KAC9BirB,EAAK+iC,aAAyB,GAAVhuD,EACpBirB,EAAKgR,eAAiB,EACtBhR,EAAK4iC,oBAAqB,IAI1B11D,QAAQ6H,EAAiBnT,GACzBmT,GAAW,IAAQA,EAAU,MAC7BjS,KAAKkrC,KAAKj5B,EAAU,IAAQnT,GAI5BsL,cAAckO,GAClB,OAAQA,GACJ,KAAK,EACL,KAAK,EACD,OAAOtY,KAAKkgE,mBAAmB,EAAG,EAAG,EAAG,GAE5C,KAAK,EACL,KAAK,EACD,OAAOlgE,KAAKkgE,mBAAmB,EAAG,EAAG,EAAG,GAE5C,KAAK,EACL,KAAK,GACD,OAAOlgE,KAAKkgE,mBAAmB,EAAG,EAAG,EAAG,GAE5C,KAAK,EACL,KAAK,GACD,OAAOlgE,KAAKkgE,mBAAmB,EAAG,EAAG,EAAG,GAE5C,KAAK,EACL,KAAK,GACD,OAAOlgE,KAAKkgE,mBAAmB,EAAG,EAAG,EAAG,GAE5C,KAAK,EACL,KAAK,GACD,OAAOlgE,KAAKkgE,mBAAmB,EAAG,EAAG,EAAG,GAE5C,KAAK,EACL,KAAK,GACD,OAAOlgE,KAAKkgE,mBAAmB,EAAG,EAAG,EAAG,GAE5C,KAAK,EACL,KAAK,GACD,OAAOlgE,KAAKkgE,mBAAmB,EAAG,EAAG,EAAG,GAE5C,QACI,MAAM,IAAIh9D,MAAM,yBAIpBkH,mBAAmB+1D,EAAcC,EAAaC,EAAaC,GAC/DtgE,KAAK+/D,UAAU,GAAK//D,KAAKgsC,OAAOm0B,GAChCngE,KAAK+/D,UAAU,GAAK//D,KAAKgsC,OAAOo0B,GAChCpgE,KAAK+/D,UAAU,GAAK//D,KAAKgsC,OAAOq0B,GAChCrgE,KAAK+/D,UAAU,GAAK//D,KAAKgsC,OAAOs0B,ICzIxC,MAAMC,GACFn2D,oBAAoBwB,GAChB,GAAIA,EAAO9K,OAAS,MAAS,EACzB,OAAOikC,GAAcoD,cAAcoB,wBAGvC,GAAI39B,EAAO9K,OAAS,KAChB,OAAOikC,GAAcoD,cAAcC,WAGvC,GAAIx8B,EAAO9K,QAAU,OAAS8K,EAAO9K,QAAU,MAC3C,OAAOikC,GAAcoD,cAAcY,kBAGvC,OAAQn9B,EAAO9K,QACX,KAAK,KACD,OAAOd,KAAKwgE,UAAU50D,GAE1B,KAAK,KACD,OAAOm5B,GAAcoD,cAAcE,WAEvC,KAAK,KACD,OAAOroC,KAAKygE,UAAU70D,GAE1B,KAAK,KACD,OAAOm5B,GAAcoD,cAAcU,iBAEvC,KAAK,MACD,OAAO9D,GAAcoD,cAAcW,kBAEvC,KAAK,MACD,OAAO9oC,KAAK0gE,WAAW90D,GAE3B,KAAK,MACD,OAAOm5B,GAAcoD,cAAce,eAEvC,KAAK,MACD,OAAOlpC,KAAK2gE,WAAW/0D,GAE3B,KAAK,MACD,OAAO5L,KAAK4gE,WAAWh1D,GAE3B,KAAK,MACD,OAAO5L,KAAK6gE,WAAWj1D,GAE3B,QACI,OAAOm5B,GAAcoD,cAAcuB,SAIvCt/B,UAAUwB,GACd,OAAIo/B,GAAY81B,cAAcl1D,GACnBm5B,GAAcoD,cAAcG,iBAGhCvD,GAAcoD,cAAcC,WAG/Bh+B,UAAUwB,GACd,MAAMm1D,EAAY51B,GAAY21B,cAAcl1D,GAE5C,OAAImgC,GAAY+0B,cAAcl1D,GACnBm5B,GAAcoD,cAAcK,iBAGnCmE,GAAYm0B,cAAcl1D,GACnBm5B,GAAcoD,cAAcM,iBAGnCwE,GAAY6zB,cAAcl1D,GACnBm5B,GAAcoD,cAAcQ,kBAGlCo4B,GAAa30B,GAAY00B,cAAcl1D,GACjCm5B,GAAcoD,cAAcO,iBAGnCi3B,GAAcmB,cAAcl1D,GACrBm5B,GAAcoD,cAAcS,2BAGhC7D,GAAcoD,cAAcI,iBAG/Bn+B,WAAWwB,GACf,OAAIo1D,GAAYF,cAAcl1D,GACnBm5B,GAAcoD,cAAcc,kBAGhClE,GAAcoD,cAAca,kBAG/B5+B,WAAWwB,GACf,OAAIqiC,GAAa6yB,cAAcl1D,GACpBm5B,GAAcoD,cAAce,eAGhCnE,GAAcoD,cAAcqB,oBAG/Bp/B,WAAWwB,GACf,OAAIghC,GAAYk0B,cAAcl1D,GACnBm5B,GAAcoD,cAAciB,cAGnCmyB,GAAiBuF,cAAcl1D,GACxBm5B,GAAcoD,cAAcqB,oBAGnC8zB,GAAawD,cAAcl1D,GACpBm5B,GAAcoD,cAAcsB,eAGhC1E,GAAcoD,cAAcgB,kBAG/B/+B,WAAWwB,GACf,OAAI+hC,GAAYmzB,cAAcl1D,GACnBm5B,GAAcoD,cAAcmB,kBAGhCvE,GAAcoD,cAAckB,yBC9GtB43B,GACX72D,gBACFwB,EACA+9B,4CAEA,MAAM53B,EAAY/R,KAAKkhE,iBAAiBt1D,EAAQ+9B,GAIhD,aAFM53B,EAAU3D,OAET2D,KAGH3H,iBACJwB,EACA+9B,GAEA,QAA6B,IAAlBA,EAA+B,CAGtCA,GAFiB,IAAI42B,IAEIY,oBAAoBv1D,GAGjD,OAAQ+9B,GACJ,KAAK5E,GAAcoD,cAAcC,WAC7B,OAAO,IAAIyB,GAAYj+B,GAE3B,KAAKm5B,GAAcoD,cAAcE,WAC7B,OAAO,IAAI+B,GAAYx+B,GAE3B,KAAKm5B,GAAcoD,cAAcG,iBAC7B,OAAO,IAAI0C,GAAYp/B,GAE3B,KAAKm5B,GAAcoD,cAAcI,iBAC7B,OAAO,IAAI4C,GAAYv/B,GAE3B,KAAKm5B,GAAcoD,cAAcK,iBAC7B,OAAO,IAAIuD,GAAYngC,GAE3B,KAAKm5B,GAAcoD,cAAcM,iBAC7B,OAAO,IAAIkE,GAAY/gC,GAE3B,KAAKm5B,GAAcoD,cAAcO,iBAC7B,OAAO,IAAI0D,GAAYxgC,GAE3B,KAAKm5B,GAAcoD,cAAcQ,iBAC7B,OAAO,IAAIsE,GAAYrhC,GAE3B,KAAKm5B,GAAcoD,cAAcY,kBAC7B,OAAO,IAAIgI,GAAanlC,GAE5B,KAAKm5B,GAAcoD,cAAcS,2BAC7B,OAAO,IAAIw4B,GAAax1D,GAE5B,KAAKm5B,GAAcoD,cAAcU,iBAC7B,OAAO,IAAI+2B,GAAYh0D,GAE3B,KAAKm5B,GAAcoD,cAAcW,kBAC7B,OAAO,IAAIoE,GAAYthC,GAE3B,KAAKm5B,GAAcoD,cAAca,kBAC7B,OAAO,IAAI4C,GAAYhgC,GAE3B,KAAKm5B,GAAcoD,cAAcc,kBAC7B,OAAO,IAAI+3B,GAAYp1D,GAE3B,KAAKm5B,GAAcoD,cAAce,eAC7B,OAAO,IAAI+E,GAAariC,GAE5B,KAAKm5B,GAAcoD,cAAcgB,kBAC7B,OAAO,IAAI6E,GAAYpiC,GAE3B,KAAKm5B,GAAcoD,cAAckB,kBAC7B,OAAO,IAAImE,GAAY5hC,GAE3B,KAAKm5B,GAAcoD,cAAcmB,kBAC7B,OAAO,IAAIqE,GAAY/hC,GAE3B,KAAKm5B,GAAcoD,cAAciB,cAC7B,OAAO,IAAIwD,GAAYhhC,GAE3B,KAAKm5B,GAAcoD,cAAcoB,wBAC7B,OAAO,IAAI2F,GAAsBtjC,GAErC,KAAKm5B,GAAcoD,cAAcqB,oBAC7B,OAAO,IAAI+xB,GAAiB3vD,GAEhC,KAAKm5B,GAAcoD,cAAcsB,eAC7B,OAAO,IAAI43B,GAAcz1D,GAE7B,QACI,MAAM,IAAI1I,MAAM,4CC/GhC,MAAMo+D,GACFl3D,YAAoBoG,GAAAxQ,YAAAwQ,EAqDpBxQ,aAAU,IAAID,EAEGC,aAAU,IAAI4S,WAAW,KAClC5S,kBAAe,EACfA,UAAY,KAxDhBA,KAAK4T,KAAO5T,KAAKwQ,OAAO+wD,SAExBvhE,KAAKwQ,OAAOu2B,YAAYzmC,WAAWghE,GAAQE,SAAUxhE,MACrDA,KAAK4T,KAAKrI,MAAMkG,MAAMnR,WAAWghE,GAAQG,SAAUzhE,MAEnDA,KAAK6S,QAGTzI,QACI,IAAK,IAAI/K,EAAI,EAAGA,EAAIW,KAAKkM,QAAQpL,OAAQzB,IACrCW,KAAKkM,QAAQ7M,GAAK,EAKtB,OAFAW,KAAK8vB,aAAe,EAEb9vB,KAGHoK,gBAAgBmiC,EAA4BrP,GAChD,OAAIqP,EAIJ,OAAQrP,EAAKtpB,KAAK64B,yBACd,KAAK,GACDvP,EAAKhxB,QAAQgxB,EAAKpN,cAAgBoN,EAAKtpB,KAAKY,sBAC5C0oB,EAAKpN,cAAgBoN,EAAKpN,aAAe,GAAKoN,EAAKhxB,QAAQpL,OAE3D,MAEJ,KAAK,GAAM,CACP,MAAM0sB,EAAQ0P,EAAKtpB,KAAKY,sBAClBnQ,EAAO,IAAIuO,WAAW4a,GAE5B,IAAK,IAAInuB,EAAI,EAAGA,EAAImuB,EAAOnuB,IAAK,CAC5B,MAAMiK,GAAK4zB,EAAKpN,aAAe,EAAIoN,EAAKhxB,QAAQpL,QAAUo8B,EAAKhxB,QAAQpL,OAEvEuD,EAAKmpB,EAAQnuB,EAAI,GAAK69B,EAAKhxB,QAAQ5C,GACnC4zB,EAAKpN,aAAexmB,EAGxB4zB,EAAKt7B,QAAQZ,SAASqD,GAEtB,QAKJ+F,gBAAgBtK,EAAeo9B,GACnCA,EAAKrqB,SCtDb,MAAM6uD,GACFt3D,YAAoBu3D,GAAA3hE,aAAA2hE,EAEpBv3D,UAAUkoC,GAGN,OAFAtyC,KAAK2hE,QAAUrvB,EAERtyC,KAGXoK,YACI,OAAOpK,KAAK2hE,QAGhBv3D,MAASw3D,EAA+C/hE,GACpD,IAAIgiE,GAAY,EAEhB,MAAMthE,EAAU,KACRshE,IAIJD,EAAO/hE,GAEPkD,WAAWxC,EAASP,KAAK2hE,WAK7B,OAFA5+D,WAAWxC,EAASP,KAAK2hE,SAElB,CACHxzC,KAAM,IAAO0zC,GAAY,4BCxD2BzhC,qBAKhE,IAAIvgC,EAAU,WAEZ,OAAOG,OAAQ,EAAI8hE,MAAM,QAFb,GAMVC,IACOliE,EAAQikC,WAAa,eAAek+B,KAAKniE,EAAQikC,UAAUm+B,YAGlEC,EAAS,EACTC,GAAO,EACPC,EAAQ,GAEZ,SAASC,EAAK9hE,GACZ,IAAIu0C,EAAOhwC,MAAMzE,UAAU0hC,MAAMx8B,KAAKD,UAAW,GAC7CglC,EAAMwK,EAAKh0C,OAEf,OAAQwpC,EAEI,IAARA,EAAY,WACd,OAAO/pC,EAAQgF,UAAKxE,EAAW+zC,EAAK,KAC1B,IAARxK,EAAY,WACd,OAAO/pC,EAAQgF,UAAKxE,EAAW+zC,EAAK,GAAIA,EAAK,KACnC,IAARxK,EAAY,WACd,OAAO/pC,EAAQgF,UAAKxE,EAAW+zC,EAAK,GAAIA,EAAK,GAAIA,EAAK,KACpD,WACF,OAAOv0C,EAAQd,WAAMsB,EAAW+zC,IATpB,WACZ,OAAOv0C,EAAQgF,UAAKxE,IAYxB,SAAS+G,EAAOgtC,GAEd,OADAstB,EAAMF,GAAUG,EAAK5iE,WAAMsB,EAAW+zC,GAC/BotB,IAGT,SAASI,EAAMC,UACNH,EAAMG,GAGf,SAAS/uB,EAAI+uB,GACX,GAAIJ,EACFtiE,EAAQkD,WAAWs/D,EAAK7uB,EAAK+uB,GAAW,OACnC,CACL,IAAIC,EAAOJ,EAAMG,GAEjB,GAAIC,EAAM,CACRL,GAAO,EAEP,IACEK,YAEAF,EAAMC,GACNJ,GAAO,KAMf,SAAS/zD,IACP,IAAIq0D,EAAW,WACb,IAAIF,EAAWz6D,EAAOxC,WAEtB,OADAzF,EAAQkD,WAAWs/D,EAAK7uB,EAAK+uB,GAAW,GACjCA,GAKT,OAFAE,EAASC,YAAc,aAEhBD,EAOT,IAAIE,EAAqBhkE,OAAOikE,OAAO,CACtCx0D,KAAMA,EACNy0D,OAND,WACE,MAAO,eAAgBhjE,KA0BrBijE,EAAmBnkE,OAAOikE,OAAO,CACpCx0D,KAnBD,WACE,IAAIq0D,EAAW,WACb,IAAIF,EAAWz6D,EAAOxC,WAEtB,OADAzF,EAAQ0lD,QAAQ1Q,SAASwtB,EAAK7uB,EAAK+uB,IAC5BA,GAKT,OAFAE,EAASC,YAAc,WAEhBD,GAWRI,OAND,WACE,MAA2D,qBAApDlkE,OAAO0B,UAAUw3C,SAAStyC,KAAK1F,EAAQ0lD,YAyD5Cwd,EAAsBpkE,OAAOikE,OAAO,CACvCx0D,KAlDD,WACE,IAAI40D,EAAgB,gBAAkB/sC,KAAK0O,SAAW,IAElDs+B,EAAkB,SAAyB13D,GACzCA,EAAM23D,SAAWrjE,GAAiC,iBAAf0L,EAAMlH,MAA2D,IAAtCkH,EAAMlH,KAAK0D,QAAQi7D,IAEnFxvB,EAAIyH,OAAO1vC,EAAMlH,KAAK09B,MAAMihC,EAAcliE,WAI1CjB,EAAQo4D,iBACVp4D,EAAQo4D,iBAAiB,UAAWgL,GAAiB,GAErDpjE,EAAQsjE,YAAY,YAAaF,GAGnC,IAAIR,EAAW,WACb,IAAIF,EAAWz6D,EAAOxC,WAEtB,OADAzF,EAAQqE,YAAY8+D,EAAgBT,EAAU,KACvCA,GAKT,OAFAE,EAASC,YAAc,cAEhBD,GA2BRI,OAvBD,WACE,GAAIhjE,EAAQylD,gBAAkBzlD,EAAQqE,YACpC,OAAO,EAGT,GAAIrE,EAAQikC,WAAa,SAASk+B,KAAKniE,EAAQikC,UAAUm+B,WAEvD,OAAO,EAGT,IAAImB,GAAS,EACTC,EAAexjE,EAAQsE,UAO3B,OANAtE,EAAQsE,UAAY,WAClBi/D,GAAS,GAGXvjE,EAAQqE,YAAY,GAAI,KACxBrE,EAAQsE,UAAYk/D,EACbD,KA+BLE,EAAyB3kE,OAAOikE,OAAO,CAC1Cx0D,KAxBD,WACE,IAAIm1D,EAAU,IAAI1jE,EAAQ2jE,eAE1BD,EAAQE,MAAMt/D,UAAY,SAAUoH,GAClCioC,EAAIyH,OAAO1vC,EAAMlH,QAGnB,IAAIo+D,EAAW,WACb,IAAIF,EAAWz6D,EAAOxC,WAEtB,OADAi+D,EAAQG,MAAMx/D,YAAYq+D,GACnBA,GAKT,OAFAE,EAASC,YAAc,iBAEhBD,GAURI,OAND,WACE,OAAO9Z,QAAQlpD,EAAQ2jE,mBAoCrBG,EAA2BhlE,OAAOikE,OAAO,CAC5Cx0D,KA7BD,WACE,IAAIw1D,EAAO/jE,EAAQ8kD,SAASkf,gBAExBpB,EAAW,WACb,IAAIF,EAAWz6D,EAAOxC,WAClBw+D,EAASjkE,EAAQ8kD,SAASof,cAAc,UAU5C,OARAD,EAAOE,mBAAqB,WAC1BxwB,EAAI+uB,GACJuB,EAAOE,mBAAqB,KAC5BJ,EAAKK,YAAYH,GACjBA,EAAS,MAGXF,EAAKM,YAAYJ,GACVvB,GAKT,OAFAE,EAASC,YAAc,mBAEhBD,GAURI,OAND,WACE,OAAOhjE,EAAQ8kD,UAAY,uBAAwB9kD,EAAQ8kD,SAASof,cAAc,aAQhFI,EAAY,CAACrB,EAAkBC,EAAqBO,EAAwBK,GAE5ES,EAAerC,EAAYliE,EAAQukE,cAAgBvkE,EAAQwkE,gBAa/D,SAAqB7mB,EAAM8mB,GACzB,IAAK,IAAIjlE,EAAI,EAAGA,EAAIm+C,EAAK18C,OAAQzB,IAAK,CACpC,IAAIklE,EAAY/mB,EAAKn+C,GACrB,GAAIklE,EAAU1B,SACZ,OAAO0B,EAAUn2D,OAIrB,OAAOk2D,EAAIl2D,OArBoEs0D,CAAYyB,EAAWxB,GAAsBv0D,IAE1Ho2D,EAAiBzC,IAAYliE,EAAQ2kE,gBAAkB3kE,EAAQ4kE,mBAA4BnC,EA4B/F,MANY,CACV8B,aAAcA,EACdI,eAAgBA,EAChB/B,SAvBF,WACM5iE,EAAQukE,eAAiBA,IAC3BvkE,EAAQukE,aAAeA,EACvBvkE,EAAQwkE,eAAiBD,EACzBvkE,EAAQ2kE,eAAiBA,EACzB3kE,EAAQ4kE,iBAAmBD,KA1OkD12D,mBCiCjF,IAAIwK,GAAQ,WAEI8rD,GAAaxkE,GACX,IAAV0Y,GACAvV,WAAWnD,EAAU,GAErB8kE,GAAsB9kE,GAG1B0Y,IAASA,GAAQ,MCbrB,MAAMqsD,GACFv6D,MAASw3D,EAA+C/hE,GACpD,IAAIgiE,GAAY,EAahB,OAFAuC,IATA,SAAS7jE,IACDshE,IAIJD,EAAO/hE,GACPukE,GAAa7jE,OAKV,CACH4tB,KAAM,IAAO0zC,GAAY,ICrBrC,MAAM+C,GACD1nC,KAAakX,aAAgBlX,KAAakX,YAAYE,IACjD,IAAOpX,KAAakX,YAAYE,MAChC,IAAMtS,KAAKsS,MCIrB,MAAMuwB,GACFz6D,MAASw3D,EAA+C/hE,EAAa8nC,GACjE,MAAMm9B,EAAYn9B,GAAc,GAEhC,IAAIo9B,GAAU,EA+Bd,OAFAX,IA3BA,SAAS7jE,IACL,IAAKwkE,EACD,OAGJ,MAAMC,EAAiBJ,KACvB,IAAIK,EAAgB,EAChBpwC,EAAQ,EAEZ,KAAO+vC,KAAiBI,EAAiBF,GAAW,CAChD,GACIjwC,EAAQ+vC,KAAiBI,EAAiBC,QACrCpwC,EApBP,GAsBFowC,GAAiBrD,EAAO/hE,EAASg1B,GAGrCA,EAAQ+vC,KAAiBI,EAAiBC,EACtCpwC,EAAQ,IACRowC,GAAiBrD,EAAO/hE,EAASg1B,IAGjCkwC,GACAX,GAAa7jE,MAMd,CAAE4tB,KAAM,IAAO42C,GAAU,IClCxC,MAAMG,GACF96D,MAASw3D,EAA+C/hE,GACpD,IAAIgiE,GAAY,EACZsD,GAAuB,EACvBC,EAAqB,EACrBC,EAAmB,EA6CvB,OAFAjB,IAzCA,SAAS7jE,IACL,GAAIshE,EACA,OAGJ,MAAMyD,EAAaV,KAInB,IAAIvsC,GAHiBupC,EAAO/hE,IAAY,GACvB+kE,KAEyBU,EAEtCH,GAAuB,IACvBE,GAAoBF,EAAsBG,EAAaF,GAGvDC,EAxBY,IAyBZA,EAzBY,IA0BLA,GA1BK,MA2BZA,GA3BY,KA8BZpvC,KAAKyhB,IAAI2tB,GA/BG,IAgCZhtC,GAASgtC,EACTA,EAAmB,GAGnBhtC,EAAQ,IACRA,EAAQ,EACRgtC,EAAmBhtC,GAGnBA,EAAQ,EACRt1B,WAAWxC,EAAS01B,KAAK2R,MAAMvP,IAE/B+rC,GAAa7jE,GAGjB4kE,EAAsB9sC,EACtB+sC,EAAqBR,QAKlB,CACHz2C,KAAM,IAAO0zC,GAAY,ICpDrC,MAAMgD,GACFz6D,MAASw3D,EAA+C/hE,EAAa8nC,GACjE,MAAMm9B,EAAYn9B,GAAc,IAEhC,IAAI29B,EAAaV,KACbK,EAAgB,EAChBF,GAAU,EA6Bd,OAFAX,IAzBA,SAAS7jE,IACL,IAAKwkE,EACD,OAGJ,MAAMnuC,EAAYguC,KAClB,IAAI/vC,EAAQ+B,EAAY0uC,EAAaL,EAEjCpwC,EAlBM,EAkBkBiwC,IACxBjwC,EAnBM,EAmBkBiwC,EACxBQ,EAAa1uC,EAAY/B,EACzBowC,EAAgB,GAGpBA,GAAiBrD,EAAO/hE,EAASg1B,GAEjC,MAAM0wC,EAAcT,EAAYF,KAAiBhuC,EAE7C2uC,EAAc,EACdxiE,WAAWxC,EAASglE,GAEpBnB,GAAa7jE,MAMd,CAAE4tB,KAAM,IAAO42C,GAAU,IClCxC,MAAMp6C,GACFvgB,wBAAwBkoC,GACpB,OAAO,IAAIovB,GAAkBpvB,GAGjCloC,2BACI,OAAO,IAAIu6D,GAGfv6D,wBAAwBo7D,KACpB,OAAQA,GACJ,OACI,OAAO,IAAIC,GAEf,OACI,OAAO,IAAIP,GAEf,OACI,OAAO,IAAIL,GAEf,QACI,MAAM,IAAI3hE,MAAM,yCAI5BkH,kCACI,MAAO,QAOXA,mCAAmCo7D,GAC/B,OAAQA,GACJ,OACI,MAAO,uCAEX,OACI,MAAO,uBAEX,OACI,MAAO,4BAEX,QACI,MAAM,IAAItiE,MAAM,0CChDhC,MAAMwiE,GACFt7D,YAAoBu7D,GAAA3lE,gBAAA2lE,EAkEpB3lE,qBAAkB,IAAID,EAEdC,cAAW,EAEXA,gBAAa,EApErBoK,OAAOmoB,GAQH,OAPIvyB,KAAK4lE,QACL5lE,KAAK6lE,SAGT7lE,KAAK4lE,OAASrzC,EACdA,EAAMjyB,WAAWN,KAAK8lE,cAAe9lE,MAE9BA,KAGXoK,QACI,OAAIpK,KAAK+lE,iBACE/lE,MAGXA,KAAKu2B,WAAayL,KAAKsS,MACvBt0C,KAAK+vB,SAAW,EAChB/vB,KAAK+lE,iBAAmB/lE,KAAK2lE,WAAWrgC,MAAMtlC,KAAKgmE,mBAAoBhmE,MAEhEA,MAGXoK,SACI,OAAKpK,KAAK4lE,QAIV5lE,KAAK4lE,OAAOllE,cAAcV,KAAK8lE,cAAe9lE,MAC9CA,KAAK4lE,YAAS7kE,EAEPf,MANIA,KASfoK,OACI,OAAKpK,KAAK+lE,kBAIV/lE,KAAK+lE,iBAAiB53C,OACtBnuB,KAAK+lE,sBAAmBhlE,EAEjBf,MANIA,KASfoK,eACI,OAAOpK,KAAK8tB,WAGR1jB,mBAAmB67D,GACvB,MAAMrvC,EAAYoL,KAAKsS,MAEvB2xB,EAAMn4C,WAAam4C,EAAMl2C,UAAY6G,EAAYqvC,EAAM1vC,YAAc,IAErE0vC,EAAMl2C,SAAW,EACjBk2C,EAAM1vC,WAAaK,EAEnBqvC,EAAMC,gBAAgBllE,SAASilE,EAAMn4C,YAGjC1jB,cAAcg7B,EAAgB+gC,GAClCA,EAAIp2C,UAAYqV,2BC7FxBzmC,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtD,IAAIsnE,EAAuB,WACvB,SAASA,IACLpmE,KAAKk4B,OAAS,GACdl4B,KAAKqmE,UAAW,EA0CpB,OAxCAD,EAAM/lE,UAAUimE,SAAW,WACvB,OAAOtmE,KAAKqmE,UAEhBD,EAAM/lE,UAAUkmE,QAAU,WACtB,IAAI/jE,EAAQxC,KACRwmE,EAAS,IAAI9jE,SAAQ,SAAUC,GAAW,OAAOH,EAAM01B,OAAO54B,KAAKqD,MAIvE,OAHK3C,KAAKqmE,UACNrmE,KAAKymE,gBAEFD,GAEXJ,EAAM/lE,UAAUqmE,aAAe,SAAU9mE,GACrC,OAAOI,KACFumE,UACA9iE,MAAK,SAAUiH,GAChB,IAAIhH,EACJ,IACIA,EAAS9D,IAEb,MAAOwE,GAEH,MADAsG,MAGJ,OAAOhI,QACFC,QAAQe,GACRD,MAAK,SAAUkV,GAAK,OAAQjO,IAAWiO,KAAO,SAAUvU,GAEzD,MADAsG,IACMtG,SAIlBgiE,EAAM/lE,UAAUomE,cAAgB,WACxBzmE,KAAKk4B,OAAOp3B,OAAS,GACrBd,KAAKqmE,UAAW,EAChBrmE,KAAKk4B,OAAOruB,OAAZ7J,CAAoBA,KAAKymE,cAAcjnE,KAAKQ,QAG5CA,KAAKqmE,UAAW,GAGjBD,KAEXvnE,UAAkBunE,mCChDlBznE,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IAEtDD,QAAgB8nE,GAAQzlE,uCCwCH0lE,GACjBx8D,cA0NApK,kBAAe,IAAID,EACnBC,oBAAiB,IAAID,EAGbC,wBAAoB,EACpBA,YAASyH,EAA0ByC,MAAM28D,QACzC7mE,gBAAoB,KAIpBA,gBAAiC,KACjCA,iBAAc,IAAI0lE,GAAW,IAAIhE,GAxOf,MAyOlB1hE,YAAS,IAAIomE,GACbpmE,uBAAoB,IAAI8mE,GACxB9mE,yBAvOJA,KAAKkmE,gBAAkBlmE,KAAK+mE,YAAYb,gBACxClmE,KAAKgnE,mBAGT58D,OACI,OAAO1H,QAAQC,UAGnByH,MACIwB,EACAgC,EACA+7B,EACAp7B,GAEA,MAAMT,EAAU,IAAImzD,GAEpB,OAAOjhE,KAAKinE,OAAOP,aAAa,sCAC5B,IAQI,GAPA1mE,KAAKylC,QAELzlC,KAAKknE,kBAAoBt5D,EAAO2d,aAGhCvrB,KAAKgnE,mBAEDhnE,KAAK6V,SAAWpO,EAA0ByC,MAAM5I,MAChD,OAAOtB,KAAK6V,OAGhB,MAAM9D,QAAkBjE,EAAQq5D,gBAAgBv7D,EAAQ+9B,GACpDt4B,EAAQ,IAAI6zB,GAAMt3B,EAAQmE,GAE9B/R,KAAKwQ,OAASa,EACdrR,KAAKwQ,OAAOe,KAAKjR,WAAWsmE,GAAiBQ,aAAcpnE,MAEvD4N,EAAOy5D,UACPrnE,KAAKyQ,SAAW,IAAI6wD,GAAQjwD,IAGhCrR,KAAKsnE,SAAW,IAAI/2D,EAAiBc,EAAOrR,KAAKyQ,SAAUlC,GAE3DvO,KAAK+mE,YAAYQ,OAAOvnE,KAAKwQ,OAAO+hB,OAEpCvyB,KAAKy3B,UAAUhwB,EAA0ByC,MAAMgG,QACjD,MAAO9L,GACLpE,KAAKwnE,UAAUpjE,GAGnB,OAAOpE,KAAK6V,WAIpBzL,OACI,OAAOpK,KAAKinE,OAAOP,aAAa,IAAM1mE,KAAKylC,SAG/Cr7B,QACI,OAAOpK,KAAKinE,OAAOP,aAAa,KAC5B,IACQ1mE,KAAK6V,SAAWpO,EAA0ByC,MAAM66D,UAChD/kE,KAAKwQ,OAAOi3D,WAAWt5C,OACvBnuB,KAAKwQ,OAAOk3D,UACZ1nE,KAAKy3B,UAAUhwB,EAA0ByC,MAAMgG,QAE/ClQ,KAAK+mE,YAAY54C,QAEvB,MAAO/pB,GACLpE,KAAKwnE,UAAUpjE,GAGnB,OAAOpE,KAAK6V,SAIpBzL,SACI,OAAOpK,KAAKinE,OAAOP,aAAa,KAC5B,GAAI1mE,KAAK6V,SAAWpO,EAA0ByC,MAAMgG,OAChD,IACIlQ,KAAK2nE,eACP,MAAOvjE,GACLpE,KAAKwnE,UAAUpjE,GAIvB,OAAOpE,KAAK6V,SAIpBzL,QACI,OAAOpK,KAAKinE,OAAOP,aAAa,KAC5B,IACI,OAAQ1mE,KAAK6V,QACT,KAAKpO,EAA0ByC,MAAM66D,QACrC,KAAKt9D,EAA0ByC,MAAMgG,OACjClQ,KAAKwQ,OAAOqC,QAEZ,MAEJ,KAAKpL,EAA0ByC,MAAM5I,MACjCtB,KAAKwQ,OAAOqC,QACZ7S,KAAK2nE,gBAIf,MAAOvjE,GACLpE,KAAKwnE,UAAUpjE,GAGnB,OAAOpE,KAAK6V,SAIpBzL,WACI,OAAOpK,KAAK6V,OAGhBzL,sBACI,OAAQpK,KAAK6V,QACT,KAAKpO,EAA0ByC,MAAM66D,QACrC,KAAKt9D,EAA0ByC,MAAMgG,OACjC,OAAOlQ,KAAKsnE,SAEhB,QACI,OAAO,MAInBl9D,eACI,OAAOpK,KAAK4nE,WAGhBx9D,eACI,OAAOpK,KAAK+mE,YAAYc,eAG5Bz9D,eACI,OAAOpK,KAAK8nE,kBAGhB19D,aAAa29D,GACT,OAAI/nE,KAAK8nE,oBAAsBC,EACpBrlE,QAAQC,aAAQ5B,GAGpBf,KAAKinE,OAAOP,aAAa,KACxB1mE,KAAK6V,SAAWpO,EAA0ByC,MAAM66D,SAChD/kE,KAAKwQ,OAAOi3D,WAAWt5C,OAG3BnuB,KAAK8nE,kBAAoBC,EACzB/nE,KAAKgnE,mBAEDhnE,KAAK6V,SAAWpO,EAA0ByC,MAAM66D,SAChD/kE,KAAKwQ,OAAOi3D,WAAWniC,MAAMtlC,KAAK2lE,cAKtCv7D,oBAAoBmH,EAAkC2rB,GAC1DA,EAAKsqC,UAAU,IAAItkE,MAAM,SAASqO,EAAK3P,YACvCs7B,EAAK8qC,eAAehnE,SAASk8B,EAAK0qC,YAG9Bx9D,QACJ,IACQpK,KAAK6V,SAAWpO,EAA0ByC,MAAM66D,UAChD/kE,KAAKwQ,OAAOi3D,WAAWt5C,OACvBnuB,KAAKwQ,OAAOk3D,UACZ1nE,KAAKwQ,OAAOe,KAAK7Q,cAAckmE,GAAiBQ,aAAcpnE,MAE9DA,KAAK+mE,YAAY54C,OAAO03C,UAG5B7lE,KAAKwQ,OAAS,KACdxQ,KAAKsnE,SAAW,KAChBtnE,KAAKyQ,cAAW1P,EAEhBf,KAAKy3B,UAAUhwB,EAA0ByC,MAAM28D,SACjD,MAAOziE,GACLpE,KAAKwnE,UAAUpjE,GAGnB,OAAOpE,KAAK6V,OAGRzL,eACApK,KAAK6V,SAAWpO,EAA0ByC,MAAM66D,UAIpD/kE,KAAKwQ,OAAOi3D,WAAWniC,MAAMtlC,KAAK2lE,YAClC3lE,KAAKwQ,OAAO9G,SACZ1J,KAAKy3B,UAAUhwB,EAA0ByC,MAAM66D,SAE/C/kE,KAAK+mE,YAAYzhC,SAGbl7B,UAAUhG,GACdpE,KAAK4nE,WAAaxjE,EAClBpE,KAAKy3B,UAAUhwB,EAA0ByC,MAAM5I,OAG3C8I,UAAUmL,GAMd,OALIA,IAAUvV,KAAK6V,SACf7V,KAAK6V,OAASN,EACdvV,KAAKo/B,aAAap+B,SAASuU,IAGxBvV,KAAK6V,OAGRzL,mBACJpK,KAAK2lE,WAAa3lE,KAAK8nE,kBACjB9nE,KAAKioE,kBAAkBC,wBAAwBloE,KAAKknE,mBACpDlnE,KAAKioE,kBAAkBE,4BCvOrC,MAAMC,GAANh+D,cA6FYpK,cAAW,IAAIqoE,IACfroE,oBAAgB,EA7FxBoK,KAAKk+D,GACD,OAAItoE,KAAKuoE,cACEvoE,MAGXA,KAAKwoE,kBAAoBF,EAErBtoE,KAAKyoE,sBACLzoE,KAAK0oE,eAGT1oE,KAAKwoE,kBAAkBppC,aAAa9+B,WAAW8nE,GAAcO,kBAAmB3oE,MAEzEA,MAGXoK,SACI,OAAKpK,KAAKwoE,mBAIVxoE,KAAK4oE,iBAEL5oE,KAAKwoE,kBAAkBppC,aAAa1+B,cAAc0nE,GAAcO,kBAAmB3oE,MAEnFA,KAAKwoE,kBAAoB,KAElBxoE,MATIA,KAYfoK,UAAUy+D,EAA8BC,GAOpC,OANA9oE,KAAK+oE,SAASn8D,IAAIi8D,EAAQ,IAAIT,GAAcY,cAAcH,EAAQC,IAE9D9oE,KAAKuoE,eACLO,EAAO9oE,KAAKwoE,kBAAkBS,sBAAuBJ,GAGlD7oE,KAGXoK,aAAay+D,GACT,OAAK7oE,KAAK+oE,SAASv9D,IAAIq9D,IAIvBA,EAAOK,SAEPlpE,KAAK+oE,SAASI,OAAON,GAEd7oE,MAPIA,KAUPoK,yBAAyB0tB,EAA2CoF,GACpEA,EAAKurC,mBAAmB3wC,GACxBoF,EAAKwrC,eAELxrC,EAAK0rC,iBAILx+D,mBACJmL,GAAQvV,KAAKwoE,kBAAoBxoE,KAAKwoE,kBAAkBY,gBAAaroE,IAErE,OACIf,KAAKwoE,oBACJjzD,IAAU9N,EAA0ByC,MAAM66D,SAAWxvD,IAAU9N,EAA0ByC,MAAMgG,QAIhG9F,eACApK,KAAKuoE,gBAITvoE,KAAK+oE,SAASvlE,QAAQ6lE,GAClBA,EAAcP,OAAO9oE,KAAKwoE,kBAAkBS,sBAAuBI,EAAcR,SAGrF7oE,KAAKuoE,eAAgB,GAGjBn+D,iBACCpK,KAAKuoE,gBAIVvoE,KAAK+oE,SAASvlE,QAAQ6lE,GAAiBA,EAAcR,OAAOK,UAE5DlpE,KAAKuoE,eAAgB,KAQ7B,SAAUH,GASOA,gBAAb,MACIh+D,YAAmBy+D,EAAuBC,GAAvB9oE,YAAA6oE,EAAuB7oE,YAAA8oE,IAVlD,CAAUV,KAAAA,QClGH,MAAMkB,GAAa,CACtBC,UAAW,qBACXt8D,MAAO,iBACPs4C,QAAS,mBACTx4C,KAAM,gBACNrC,QAAS,oBAEb/L,OAAOikE,OAAO0G,ICDd,MAAME,GACFp/D,YAAoBq/D,GAAAzpE,UAAAypE,EA0EpBzpE,UAAO,IAAID,EAEHC,aAAU,EACVA,eAAY,IAAIqoE,IA5EpBroE,KAAKypE,KACAtmE,sBAAsBumE,GAAoB38D,KAAM/M,KAAK2pE,eAAenqE,KAAKQ,OACzEmD,sBAAsBumE,GAAoBh/D,QAAS1K,KAAK4pE,kBAAkBpqE,KAAKQ,OAGxFoK,aAAay/D,EAAY,qBACrB,MAAMjI,EAAS,IAAIkI,OAAOD,GACtB5nE,EAAM,IAAId,EAAY,CAACS,EAAcW,IAAyBq/D,EAAO19D,YAAYtC,EAASW,IAI9F,OAFAq/D,EAAOz9D,UAAY4lE,GAAgB9nE,EAAIjB,SAAS+oE,EAAa1lE,MAEtD,IAAImlE,GAAevnE,GAG9BmI,UAAUsB,EAAeC,EAAgBq+D,GACrC,OAAOhqE,KAAKypE,KAAKxnE,IAAIynE,GAAoBH,UAAW,CAChD79D,MAAAA,EACAC,OAAAA,EACAiC,OAAQo8D,IAIhB5/D,QACI,OAAOpK,KAAKypE,KAAKxnE,IAAIynE,GAAoBz8D,OAG7C7C,eAAe6/D,GACX,MAAM3nE,EAAKtC,KAAKkqE,UACZp9D,EAAUm9D,EAAez+D,MACzBI,EAASkB,EAAQq9D,sBAErBnqE,KAAKyO,UAAU7B,IAAItK,EAAI2nE,GAEvBjqE,KAAKypE,KAAK1nE,OACN2nE,GAAoBnkB,QACpB,CACIjjD,GAAAA,EACAoJ,MAAOoB,EAAQQ,WACf3B,OAAQmB,EAAQO,YAChBzB,OAAAA,GAEJ,CAACA,IAIDxB,eAAeggE,GACnB,IAAKpqE,KAAKyO,UAAU9B,IAAIy9D,EAAI9nE,IACxB,MAAM,IAAIY,MAAM,sBAAsBknE,EAAI9nE,MAG9C,MAAM2nE,EAAiBjqE,KAAKyO,UAAUjD,IAAI4+D,EAAI9nE,IAC1CwK,EAAUm9D,EAAez+D,MAE7BxL,KAAKyO,UAAU06D,OAAOiB,EAAI9nE,IAC1BwK,EAAQjB,wBAAwBiB,EAAQQ,WAAYR,EAAQO,YAAa+8D,EAAIx+D,QAE7E5L,KAAK+M,KAAK/L,SAASipE,GAGf7/D,kBAAkBggE,GACtB,IAAKpqE,KAAKyO,UAAU9B,IAAIy9D,EAAI9nE,IACxB,MAAM,IAAIY,MAAM,sBAAsBknE,EAAI9nE,MAG9C,MAAM2nE,EAAiBjqE,KAAKyO,UAAUjD,IAAI4+D,EAAI9nE,IAC1CwK,EAAUm9D,EAAez+D,MAE7BxL,KAAKyO,UAAU06D,OAAOiB,EAAI9nE,IAC1BwK,EAAQjB,wBAAwBiB,EAAQQ,WAAYR,EAAQO,YAAa+8D,EAAIx+D,QAE7Eq+D,EAAev/D,WC5EhB,MAAM2/D,GAAW,CACpBC,eAAgB,kBAChBC,eAAgB,kBAChBC,gBAAiB,mBACjBC,sBAAuB,yBACvBC,eAAgB,kBAChBC,cAAe,iBACfC,wBAAyB,2BACzBC,mBAAoB,sBACpBC,2BAA6BxyD,GAAkB,gCAAgCA,IAC/EyyD,sBAAwBzyD,GAAkB,2BAA2BA,IACrE0yD,MAAO,UAEXrsE,OAAOikE,OAAOyH,IAEP,MAAMY,GAAc,CACvBjD,eAAgB,kBAChBkD,yBAA0B,4BAC1BC,cAAe,iBACfC,mBAAoB,sBACpBC,mBAAoB,sBACpBC,0BAA2B,8BAC3BC,0BAA2B,8BAC3BC,iBAAmBlzD,GAAkB,sBAAsBA,IAC3DmzD,oBAAsBnzD,GAAkB,yBAAyBA,IACjEozD,oBAAsBpzD,GAAkB,yBAAyBA,IACjEqzD,UAAW,aACXC,mBAAoB,oBAExBjtE,OAAOikE,OAAOqI,ICfd,MAAMY,GACFzhE,YAAoBq/D,GAAAzpE,UAAAypE,EAuKZzpE,cAAU,EAEVA,YAA+B,KAE/BA,0BAA4C,KAC5CA,YAAS,IAAIomE,GACbpmE,4BAAsD,KACtDA,gCAA4B,EAE5BA,kBAA+C,KAC/CA,0BAA0E,KAE1EA,UAA8D,KAC9DA,YAAS,EACTA,aAAU,EAEVA,aAAU,EArLlBoK,KAAK0hE,GAKD,GAJA9rE,KAAKypE,KACAtmE,sBAAsB8nE,GAAYG,mBAAoBprE,KAAK+rE,yBAAyBvsE,KAAKQ,OACzFiD,mBAAmBonE,GAASQ,mBAAoB7qE,KAAKgsE,sBAAsBxsE,KAAKQ,OAEjF8rE,EAAmB,CACnB,MAAMG,EAAmB,IAAI9qE,EAAY,CAACkD,EAAW9B,IACjDupE,EAAkB5nE,YAAYG,EAAM9B,IAExCupE,EAAkB3nE,UAAaC,GAAoB6nE,EAAiBjrE,SAASoD,EAAEC,MAE/ErE,KAAKksE,qBAAuB,IAAIC,GAAoBF,GAEpDjsE,KAAKksE,qBAAqBn/D,KAAKzM,WAAWurE,GAAYO,oBAAqBpsE,OAInFoK,yBAAyBwD,GACrB5N,KAAKqsE,uBAAyBz+D,EAGlCxD,KAAKkiE,GACDtsE,KAAKinE,OAAOP,aAAa,IAAM1mE,KAAKusE,MAAMD,IAG9CliE,SACIpK,KAAKinE,OAAOP,aAAa,IAAM1mE,KAAKwsE,WAGhCpiE,2BAA2B0C,EAA+CowB,GAC9E,IAAKA,EAAKhP,QAEN,YADA5pB,QAAQ+lC,KAAK,oDAIjB,IAAKnN,EAAKuvC,KAAK9/D,IAAIG,GAEf,YADAxI,QAAQ+lC,KAAK,0BAIjB,MAAMz+B,EAASkB,EAAQtB,MAAM2+D,sBACzB7nE,EAAK46B,EAAKuvC,KAAKjhE,IAAIsB,GAEvBowB,EAAKusC,KAAK1nE,OACNkpE,GAAYE,cACZ,CACI7oE,GAAAA,EACAoJ,MAAOwxB,EAAKnxB,OACZJ,OAAQuxB,EAAKlxB,QACbJ,OAAAA,GAEJ,CAACA,IAIDxB,mBAAmB0C,EAA6BowB,GAC/CA,EAAKhP,QAKLgP,EAAKwvC,iBAAiB//D,IAAIG,GAK3BowB,EAAKyvC,4BAA8BzvC,EAAKgvC,qBACxCL,GAAYO,oBAAoBlvC,EAAKwvC,iBAAiBlhE,IAAIsB,GAAUowB,GAEpEA,EAAKgvC,qBAAqBh+D,eAAegvB,EAAKwvC,iBAAiBlhE,IAAIsB,IAPnExI,QAAQ+lC,KAAK,0BALb/lC,QAAQ+lC,KAAK,uCAgBPjgC,MAAMkiE,4CACZtsE,KAAKkuB,UAITluB,KAAK+L,OAASugE,EAAMh/D,WACpBtN,KAAKgM,QAAUsgE,EAAMj/D,YACrBrN,KAAKsO,OAASg+D,EAEdtsE,KAAKqP,aAAe,IAAIT,EAA+B,IACnDnD,EAAmBwD,sBACfjP,KAAK+L,OACL/L,KAAKgM,QACL,IAAI0sC,YAAY,EAAI14C,KAAK+L,OAAS/L,KAAKgM,WAG/ChM,KAAK4sE,qBAAuB,IAAIvE,IAChCroE,KAAK0sE,iBAAmB,IAAIlgE,QAC5BxM,KAAKysE,KAAO,IAAIjgE,QAEZxM,KAAKksE,6BACClsE,KAAKksE,qBAAqB3C,UAAUvpE,KAAK+L,OAAQ/L,KAAKgM,QAAShM,KAAKqsE,yBAG9ErsE,KAAKsO,OAAOQ,kBAAkB,KAC1B,MAAMm7D,EAAiBjqE,KAAKqP,aAAa7D,MACrCsB,EAAUm9D,EAAez+D,MAI7B,IAFsBxL,KAAKysE,KAAK9/D,IAAIs9D,GAElB,CACd,MAAM3nE,EAAKtC,KAAKkqE,UAEhBlqE,KAAKysE,KAAK7/D,IAAIq9D,EAAgB3nE,GAC9BtC,KAAK4sE,qBAAqBhgE,IAAItK,EAAI2nE,GAClCjqE,KAAK0sE,iBAAiB9/D,IAAIE,EAASm9D,GAEnCn9D,EAAQoC,KAAK,YAGjB,OAAO+6D,EAAez+D,QAG1BxL,KAAKsO,OAAOc,SAAS9O,WAAWurE,GAAYvyC,YAAat5B,MAEzDA,KAAK2sE,2BAA6B3sE,KAAKqsE,wBAAiE,IAAvCrsE,KAAKqsE,uBAAuBvrE,OAC7Fd,KAAKkuB,SAAU,MAGL9jB,mDACLpK,KAAKkuB,UAGVluB,KAAKkuB,SAAU,EAEfluB,KAAKsO,OAAOQ,kBAAkB,MAC9B9O,KAAKsO,OAAOc,SAAS1O,cAAcmrE,GAAYvyC,YAAat5B,MAExDA,KAAKksE,6BACClsE,KAAKksE,qBAAqBj/D,SAGpCjN,KAAKsO,OAAS,KACdtO,KAAKqP,aAAe,KACpBrP,KAAK4sE,qBAAuB,KAC5B5sE,KAAKysE,KAAO,SAGRriE,yBAAyBxI,GAC7B,IAAK5B,KAAKkuB,QAEN,YADA5pB,QAAQ+lC,KAAK,iDAIjB,MAAMv9B,EAAU9M,KAAK4sE,qBAAqBphE,IAAI5J,EAAQU,IAEjDwK,GAKLA,EAAQtB,MAAMK,wBAAwB7L,KAAK+L,OAAQ/L,KAAKgM,QAASpK,EAAQgK,QACzEkB,EAAQpC,WALJpG,QAAQ+lC,KAAK,qBAAqBzoC,EAAQU,MAQ1C8H,wBACJ,MAAO,CACHsB,MAAO1L,KAAK+L,OACZJ,OAAQ3L,KAAKgM,UC7KzB,MAAM6gE,GACFziE,YAAoBq/D,GAAAzpE,UAAAypE,EA6DZzpE,cAAU,EACVA,uBAA+C,KA5DvDoK,OACIpK,KAAKypE,KAAKtmE,sBAAsB8nE,GAAYI,mBAAoBrrE,KAAK8sE,sBAAsBttE,KAAKQ,OAGpGoK,KAAK2iE,GACG/sE,KAAKkuB,UAITluB,KAAKkuB,SAAU,EACfluB,KAAKgtE,kBAAoBD,GAG7B3iE,SACSpK,KAAKkuB,UAIVluB,KAAKkuB,SAAU,EACfluB,KAAKgtE,kBAAoB,MAGrB5iE,sBAAsB6iE,GAC1B,GAAKjtE,KAAKkuB,QAAV,CAIA,IAAK,IAAI7uB,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKktE,oBAAoBD,EAAaE,cAAc9tE,GAAIW,KAAKgtE,kBAAkBI,YAAY/tE,IAG/F,IAAK,IAAIA,EAAI,EAAGA,EAAI,EAAGA,IACnBW,KAAKqtE,kBAAkBJ,EAAaK,YAAYjuE,GAAIW,KAAKgtE,kBAAkB/7D,UAAU5R,IAGzFW,KAAKutE,wBAAwBN,EAAaO,kBAAmBxtE,KAAKgtE,kBAAkBh8D,oBAGhF5G,oBAAoBmL,EAAmCk4D,GAC3DA,EAAS15D,QAAQ6yB,OAAOrxB,EAAMstC,IAC9B4qB,EAASz5D,UAAU4yB,OAAOrxB,EAAMm4D,MAChCD,EAASx5D,UAAU2yB,OAAOrxB,EAAMo4D,MAChCF,EAASv5D,WAAW0yB,OAAOrxB,EAAMq4D,OACjCH,EAAS/zC,UAAUkN,OAAOrxB,EAAMs4D,MAG5BzjE,kBAAkBmL,EAAiCu4D,GACvDA,EAAOC,SAASx4D,EAAMzW,OACtBgvE,EAAOp0C,UAAUkN,OAAOrxB,EAAMs4D,MAG1BzjE,wBAAwBmL,EAAuCy4D,GACnEA,EAAM15D,wBAAwBsyB,OAAOrxB,EAAM04D,aAC3CD,EAAMz5D,wBAAwBqyB,OAAOrxB,EAAM24D,aAC3CF,EAAM75D,iBAAiByyB,OAAOrxB,EAAM1C,OACpCm7D,EAAM35D,iBAAiBuyB,OAAOrxB,EAAM6b,OACpC48C,EAAM55D,kBAAkBwyB,OAAOrxB,EAAM44D,SCzD7C,MAAMC,GACFhkE,YAAoBikE,EAAwB5E,GAAxBzpE,YAAAquE,EAAwBruE,UAAAypE,EAqDpCzpE,YAAuC,KApD3CA,KAAKypE,KAAKxmE,mBACNonE,GAASS,2BAA2B9qE,KAAKquE,QACzCruE,KAAKsuE,8BAA8B9uE,KAAKQ,OAIhDoK,KAAKmkE,GACGvuE,KAAKg6B,SAITh6B,KAAKg6B,OAASu0C,EAEdvuE,KAAKg6B,OAAO3L,cAAc/tB,WAAW8tE,GAAoBI,iBAAkBxuE,MAC3EA,KAAKg6B,OAAOhM,cAAc1tB,WAAW8tE,GAAoBK,iBAAkBzuE,MAC3EA,KAAKg6B,OAAO7L,KAAK7tB,WAAW8tE,GAAoBM,QAAS1uE,OAG7DoK,SACSpK,KAAKg6B,SAIVh6B,KAAKg6B,OAAO3L,cAAc3tB,cAAc0tE,GAAoBI,iBAAkBxuE,MAC9EA,KAAKg6B,OAAOhM,cAActtB,cAAc0tE,GAAoBK,iBAAkBzuE,MAC9EA,KAAKg6B,OAAO7L,KAAKztB,cAAc0tE,GAAoBM,QAAS1uE,MAE5DA,KAAKg6B,OAAS,MAGV5vB,wBAAwBzE,EAAau3B,GACzCA,EAAKusC,KAAK1nE,OAAyCkpE,GAAYM,0BAA2B,CACtFjzD,MAAO4kB,EAAKmxC,OACZ1oE,IAAAA,IAIAyE,wBAAwBtL,EAAeo+B,GAC3CA,EAAKusC,KAAK1nE,OAAyCkpE,GAAYK,0BAA2B,CACtFhzD,MAAO4kB,EAAKmxC,OACZvvE,MAAAA,IAIAsL,eAAetL,EAAao+B,GAChCA,EAAKusC,KAAK1nE,OAAekpE,GAAYU,UAAWzuC,EAAKmxC,QAGjDjkE,gCACJ,MAAO,CAAEukE,OAAQ3uE,KAAKg6B,OAAO40C,cCjDrC,MAAMC,GACFzkE,YAAYkO,EAAuBmxD,GAAAzpE,UAAAypE,EAyF3BzpE,eAAW,EAGXA,iBAAc,EACdA,gBAAa,EAEbA,oBAAiB,IAAIqoE,IACrBroE,aAAU,EAEVA,cAAU,EAEVA,qBAAkB,GAClBA,wBAAqB,GApGzBA,KAAKypE,KACAxmE,mBAAmBonE,GAASU,sBAAsBzyD,GAAQtY,KAAK8uE,yBAAyBtvE,KAAKQ,OAC7FmD,sBAAsB8nE,GAAYS,oBAAoBpzD,GAAQtY,KAAK+uE,eAAevvE,KAAKQ,OAE5FA,KAAKgvE,gBAAkB/D,GAAYO,iBAAiBlzD,GACpDtY,KAAKivE,mBAAqBhE,GAAYQ,oBAAoBnzD,GAG9DlO,KAAK8kE,GACGlvE,KAAKqxB,UACLrxB,KAAKkpE,SAGTlpE,KAAKmvE,UAAYD,EAEjBlvE,KAAKmvE,UAAU//D,SAAS9O,WAAWuuE,GAAev1C,YAAat5B,MAC/DA,KAAKmvE,UAAUl/D,YAAY3P,WAAWuuE,GAAeO,eAAgBpvE,MAErEA,KAAKwP,YAAcxP,KAAKmvE,UAAUt/D,gBAClC7P,KAAKuvB,WAAavvB,KAAKmvE,UAAUv/D,eAEjC5P,KAAKqxB,UAAW,EAGpBjnB,SACSpK,KAAKqxB,WAIVrxB,KAAKmvE,UAAU//D,SAAS1O,cAAcmuE,GAAev1C,YAAat5B,MAClEA,KAAKmvE,UAAUl/D,YAAYvP,cAAcmuE,GAAeO,eAAgBpvE,MACxEA,KAAKmvE,UAAY,KAEjBnvE,KAAKqvE,eAAe/M,QAEpBtiE,KAAKwP,YAAcxP,KAAKuvB,WAAa,EAErCvvB,KAAKqxB,UAAW,GAGZjnB,mBAAmBklE,EAA0CpyC,GACjE,IAAKA,EAAK7L,SAEN,YADAi+C,EAAM3kE,UAIV,MAAMrI,EAAK46B,EAAKgtC,UACZ7lE,EAAOirE,EAAM9jE,MACjB0xB,EAAKmyC,eAAeziE,IAAItK,EAAIgtE,GAE5BpyC,EAAKusC,KAAK1nE,OACNm7B,EAAK8xC,gBACL,CACI1sE,GAAAA,EACAsJ,OAAQvH,EAAKuH,QAEjB,CAACvH,EAAKuH,SAINxB,sBAAsB8F,EAAiBgtB,GAC3CA,EAAKqyC,QAAUr/D,EAEfgtB,EAAKusC,KAAK1nE,OAAmCm7B,EAAK+xC,mBAAoB,CAClE/+D,OAAAA,IAIA9F,2BACJ,MAAO,CACHkjB,WAAYttB,KAAKwP,YACjBggE,UAAWxvE,KAAKuvB,WAChBrf,OAAQlQ,KAAKuvE,SAIbnlE,eAAeggE,GACnB,IAAKpqE,KAAKqxB,WAAarxB,KAAKqvE,eAAe1iE,IAAIy9D,EAAI9nE,IAC/C,OAGJ,MAAMgtE,EAAQtvE,KAAKqvE,eAAe7jE,IAAI4+D,EAAI9nE,IAC1CtC,KAAKqvE,eAAelG,OAAOiB,EAAI9nE,IAE/BgtE,EAAMG,MAAM,IAAI9/D,aAAay6D,EAAIx+D,SACjC0jE,EAAM5kE,WCjGd,MAAM42D,GAANl3D,cAiCIpK,aAAU,IAAID,EAENC,cAAsC,KAlC9CoK,KAAKvK,GACD,GAAIG,KAAKsnE,SACL,OAGJ,MAAMD,EAAUxnE,EAAQ6vE,aAEpBrI,GACAA,EAAQzlE,QAAQtB,WAAWghE,GAAQqO,kBAAmB3vE,MAG1DA,KAAKsnE,SAAWznE,EAGpBuK,SACI,IAAKpK,KAAKsnE,SACN,OAGJ,MAAMD,EAAUrnE,KAAKsnE,SAASoI,aAE1BrI,GACAA,EAAQzlE,QAAQlB,cAAc4gE,GAAQqO,kBAAmB3vE,MAG7DA,KAAKsnE,SAAW,KAGZl9D,yBAAyBxI,EAA4Bs7B,GACzDA,EAAKt7B,QAAQZ,SAASY,ICpB9B,MAAMguE,GACFxlE,YAAoBq/D,GAAAzpE,UAAAypE,EA6FZzpE,kBAA4B,KA5FhCA,KAAK6vE,SAAW,IAAIjJ,GAGxBx8D,UACIpK,KAAKypE,KACAxmE,mBAAmBonE,GAASW,MAAOhrE,KAAK8vE,SAAStwE,KAAKQ,OACtDiD,mBAAmBonE,GAASO,wBAAyB5qE,KAAK+vE,kBAAkBvwE,KAAKQ,OACjFiD,mBAAmBonE,GAASC,eAAgBtqE,KAAKgwE,kBAAkBxwE,KAAKQ,OACxEiD,mBAAmBonE,GAASE,eAAgBvqE,KAAKiwE,kBAAkBzwE,KAAKQ,OACxEiD,mBAAmBonE,GAASG,gBAAiBxqE,KAAKkwE,mBAAmB1wE,KAAKQ,OAC1EiD,mBAAmBonE,GAASI,sBAAuBzqE,KAAKmwE,yBAAyB3wE,KAAKQ,OACtFiD,mBAAmBonE,GAASK,eAAgB1qE,KAAKowE,kBAAkB5wE,KAAKQ,OACxEiD,mBAAmBonE,GAASM,cAAe3qE,KAAKqwE,iBAAiB7wE,KAAKQ,OAE3EA,KAAK6vE,SAAS3J,gBAAgB5lE,WAAWsvE,GAAiBU,mBAAoBtwE,MAC9EA,KAAK6vE,SAAS7H,eAAe1nE,WAAWsvE,GAAiBW,kBAAmBvwE,MAE5E,MAAMwwE,EAAgB,IAAIpI,GACtBqI,EAAc,IAAI5E,GAAY7rE,KAAKypE,MACnCiH,EAAgB,IAAI7D,GAAc7sE,KAAKypE,MACvCkH,EAAuB,CAAC,EAAG,GAAG3iE,IAAI3O,GAAK,IAAI+uE,GAAoB/uE,EAAGW,KAAKypE,OACvEmH,EAAiB,IAAI/B,GAAe,EAAG7uE,KAAKypE,MAC5CoH,EAAgB,IAAIC,GAExBD,EAAcjvE,QAAQtB,WAAWsB,GAAW5B,KAAKypE,KAAK1nE,OAAOkpE,GAAYW,mBAAoBhqE,IAE7F5B,KAAK+wE,aAAeN,EACpBC,EAActiE,OAEdoiE,EACKQ,UAAUP,EAAa,CAAC5wE,EAA2BgpE,IAChDA,EAAOrpE,KAAKK,EAAQoxE,gBAEvBD,UAAUN,EAAe,CAAC7wE,EAA2BgpE,IAA0BA,EAAOrpE,KAAKK,IAC3FmxE,UAAUJ,EAAgB,CAAC/wE,EAA2BgpE,IACnDA,EAAOrpE,KAAKK,EAAQuR,kBAEvB4/D,UAAUH,EAAe,CAAChxE,EAA2BgpE,IAA0BA,EAAOrpE,KAAKK,IAC3FL,KAAKQ,KAAK6vE,UAEf,IAAK,IAAIxwE,EAAI,EAAGA,EAAI,EAAGA,IACnBmxE,EAAcQ,UAAUL,EAAqBtxE,GAAI,CAACQ,EAA2BgpE,IACzEA,EAAOrpE,KAAKK,EAAQqR,sBAAsB7R,KAK9C+K,0BAA0B+iB,EAAmB+P,GACjDA,EAAKusC,KAAK1nE,OAAekpE,GAAYC,yBAA0B/9C,GAG3D/iB,yBAAyB9I,EAAc47B,GAC3CA,EAAKusC,KAAK1nE,OAAekpE,GAAYjD,eAAgB1mE,EAAQA,EAAMM,QAAU,MAGzEwI,SAASggE,GACbpqE,KAAK+wE,aAAa3iE,KAAKg8D,EAAI8G,oBAGvB9mE,oBACJ,MAAM+mE,EAAYnxE,KAAK6vE,SAASuB,eAEhC,OAAOD,EAAYA,EAAUvvE,QAAU,KAGnCwI,oBACJ,OAAOpK,KAAK6vE,SAASwB,QAGjBjnE,oBACJ,OAAOpK,KAAK6vE,SAASh9D,QAGjBzI,qBACJ,OAAOpK,KAAK6vE,SAASnmE,SAGjBU,kBAAkBxI,GAGtB,OAFA5B,KAAK+wE,aAAaO,yBAAyB1vE,EAAQ2M,iBAE5CvO,KAAK6vE,SAASvqC,MAAM1jC,EAAQgK,OAAQhK,EAAQgM,OAAQhM,EAAQ+nC,eAG/Dv/B,mBACJ,OAAOpK,KAAK6vE,SAAS1hD,OAGjB/jB,yBAAyBxI,GAC7B,OAAO5B,KAAK6vE,SAAS0B,aAAa3vE,ICpGjB,IAAIguE,GpJoClB7rE,GoJnCMytE"}