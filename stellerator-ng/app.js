!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function __decorate(e,t,r,n){var i,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,r,s):i(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}function __param(e,t){return function(r,n){t(r,n,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,o)}u((n=n.apply(e,t||[])).next())}))}function __generator(e,t){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}function __exportStar(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function __values(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),a=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||o(e,t)}))})}function o(e,t){try{(r=i[e](t)).value instanceof __await?Promise.resolve(r.value.v).then(u,c):l(a[0][2],r)}catch(e){l(a[0][3],e)}var r}function u(e){o("next",e)}function c(e){o("throw",e)}function l(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}}function __asyncDelegator(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}var tslib_es6=Object.freeze({__proto__:null,__extends:__extends,get __assign(){return __assign},__rest:__rest,__decorate:__decorate,__param:__param,__metadata:__metadata,__awaiter:__awaiter,__generator:__generator,__exportStar:__exportStar,__values:__values,__read:__read,__spread:__spread,__spreadArrays:__spreadArrays,__await:__await,__asyncGenerator:__asyncGenerator,__asyncDelegator:__asyncDelegator,__asyncValues:__asyncValues,__makeTemplateObject:__makeTemplateObject,__importStar:__importStar,__importDefault:__importDefault}),global$1="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}"function"==typeof global$1.setTimeout&&(cachedSetTimeout=setTimeout),"function"==typeof global$1.clearTimeout&&(cachedClearTimeout=clearTimeout);var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global$1.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function hrtime(e){var t=.001*performanceNow.call(performance),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var process={nextTick:nextTick,title:title,browser:browser,env:env,argv:argv,version:version,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime},commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Reflect$1;function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}function getCjsExportFromNamespace(e){return e&&e.default||e}
/*! *****************************************************************************
    Copyright (C) Microsoft. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */!function(e){!function(t){var r="object"==typeof commonjsGlobal?commonjsGlobal:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=i(e);function i(e,t){return function(r,n){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0===r.Reflect?r.Reflect=e:n=i(r.Reflect,n),function(e){var t=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,o=!a&&!s,u={create:a?function(){return M(Object.create(null))}:s?function(){return M({__proto__:null})}:function(){return M({})},has:o?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:o?function(e,r){return t.call(e,r)?e[r]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,a)},t.prototype.entries=function(){return new r(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function a(e,t){return t}function s(e,t){return[e,t]}}():Map,d=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}():Set,f=new(l||"function"!=typeof WeakMap?function(){var e=16,r=u.create(),n=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=a(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=a(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return a(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=a(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+o()}while(u.has(r,e));return r[e]=!0,e}function a(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:u.create()})}return e[n]}function s(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function o(){var t,r=(t=e,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t));r[6]=79&r[6]|64,r[8]=191&r[8]|128;for(var n="",i=0;i<e;++i){var a=r[i];4!==i&&6!==i&&8!==i||(n+="-"),a<16&&(n+="0"),n+=a.toString(16).toLowerCase()}return n}}():WeakMap);function _(e,t,r){var n=f.get(e);if(v(n)){if(!r)return;n=new h,f.set(e,n)}var i=n.get(t);if(v(i)){if(!r)return;i=new h,n.set(t,i)}return i}function p(e,t,r){var n=_(t,r,!1);return!v(n)&&!!n.has(e)}function m(e,t,r){var n=_(t,r,!1);if(!v(n))return n.get(e)}function g(e,t,r,n){_(r,n,!0).set(e,t)}function b(e,t){var r=[],n=_(e,t,!1);if(v(n))return r;for(var a=function(e){var t=I(e,i);if(!T(t))throw new TypeError;var r=t.call(e);if(!k(r))throw new TypeError;return r}(n.keys()),s=0;;){var o=x(a);if(!o)return r.length=s,r;var u=o.value;try{r[s]=u}catch(e){try{R(a)}finally{throw e}}s++}}function y(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function v(e){return void 0===e}function w(e){return null===e}function k(e){return"object"==typeof e?null!==e:"function"==typeof e}function E(e,t){switch(y(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",i=I(e,n);if(void 0!==i){var a=i.call(e,r);if(k(a))throw new TypeError;return a}return function(e,t){if("string"===t){var r=e.toString;if(T(r))if(!k(i=r.call(e)))return i;if(T(n=e.valueOf))if(!k(i=n.call(e)))return i}else{var n;if(T(n=e.valueOf))if(!k(i=n.call(e)))return i;var i,a=e.toString;if(T(a))if(!k(i=a.call(e)))return i}throw new TypeError}(e,"default"===r?"number":r)}function S(e){var t=E(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function A(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function T(e){return"function"==typeof e}function C(e){return"function"==typeof e}function I(e,t){var r=e[t];if(null!=r){if(!T(r))throw new TypeError;return r}}function x(e){var t=e.next();return!t.done&&t}function R(e){var t=e.return;t&&t.call(e)}function O(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i?t:i===e?t:i}function M(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,r,n){if(v(r)){if(!A(e))throw new TypeError;if(!C(t))throw new TypeError;return function(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!v(n)&&!w(n)){if(!C(n))throw new TypeError;t=n}}return t}(e,t)}if(!A(e))throw new TypeError;if(!k(t))throw new TypeError;if(!k(n)&&!v(n)&&!w(n))throw new TypeError;return w(n)&&(n=void 0),function(e,t,r,n){for(var i=e.length-1;i>=0;--i){var a=(0,e[i])(t,r,n);if(!v(a)&&!w(a)){if(!k(a))throw new TypeError;n=a}}return n}(e,t,r=S(r),n)})),e("metadata",(function(e,t){return function(r,n){if(!k(r))throw new TypeError;if(!v(n)&&!function(e){switch(y(e)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;g(e,t,r,n)}})),e("defineMetadata",(function(e,t,r,n){if(!k(r))throw new TypeError;return v(n)||(n=S(n)),g(e,t,r,n)})),e("hasMetadata",(function(e,t,r){if(!k(t))throw new TypeError;return v(r)||(r=S(r)),function e(t,r,n){if(p(t,r,n))return!0;var i=O(r);return!w(i)&&e(t,i,n)}(e,t,r)})),e("hasOwnMetadata",(function(e,t,r){if(!k(t))throw new TypeError;return v(r)||(r=S(r)),p(e,t,r)})),e("getMetadata",(function(e,t,r){if(!k(t))throw new TypeError;return v(r)||(r=S(r)),function e(t,r,n){if(p(t,r,n))return m(t,r,n);var i=O(r);return w(i)?void 0:e(t,i,n)}(e,t,r)})),e("getOwnMetadata",(function(e,t,r){if(!k(t))throw new TypeError;return v(r)||(r=S(r)),m(e,t,r)})),e("getMetadataKeys",(function(e,t){if(!k(e))throw new TypeError;return v(t)||(t=S(t)),function e(t,r){var n=b(t,r),i=O(t);if(null===i)return n;var a=e(i,r);if(a.length<=0)return n;if(n.length<=0)return a;for(var s=new d,o=[],u=0,c=n;u<c.length;u++){var l=c[u];s.has(l)||(s.add(l),o.push(l))}for(var h=0,f=a;h<f.length;h++){l=f[h];s.has(l)||(s.add(l),o.push(l))}return o}(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!k(e))throw new TypeError;return v(t)||(t=S(t)),b(e,t)})),e("deleteMetadata",(function(e,t,r){if(!k(t))throw new TypeError;v(r)||(r=S(r));var n=_(t,r,!1);if(v(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var i=f.get(t);return i.delete(r),i.size>0||(f.delete(t),!0)}))}(n)}()}(Reflect$1||(Reflect$1={}));let output={};(function(){!function(e){function t(e,t,r){return r.a=e,r.f=t,r}function r(e){return t(2,e,(function(t){return function(r){return e(t,r)}}))}function n(e){return t(3,e,(function(t){return function(r){return function(n){return e(t,r,n)}}}))}function i(e){return t(4,e,(function(t){return function(r){return function(n){return function(i){return e(t,r,n,i)}}}}))}function a(e){return t(5,e,(function(t){return function(r){return function(n){return function(i){return function(a){return e(t,r,n,i,a)}}}}}))}function s(e){return t(6,e,(function(t){return function(r){return function(n){return function(i){return function(a){return function(s){return e(t,r,n,i,a,s)}}}}}}))}function o(e){return t(7,e,(function(t){return function(r){return function(n){return function(i){return function(a){return function(s){return function(o){return e(t,r,n,i,a,s,o)}}}}}}}))}function u(e){return t(8,e,(function(t){return function(r){return function(n){return function(i){return function(a){return function(s){return function(o){return function(u){return e(t,r,n,i,a,s,o,u)}}}}}}}}))}function c(e){return t(9,e,(function(t){return function(r){return function(n){return function(i){return function(a){return function(s){return function(o){return function(u){return function(c){return e(t,r,n,i,a,s,o,u,c)}}}}}}}}}))}function l(e,t,r){return 2===e.a?e.f(t,r):e(t)(r)}function h(e,t,r,n){return 3===e.a?e.f(t,r,n):e(t)(r)(n)}function d(e,t,r,n,i){return 4===e.a?e.f(t,r,n,i):e(t)(r)(n)(i)}function f(e,t,r,n,i,a){return 5===e.a?e.f(t,r,n,i,a):e(t)(r)(n)(i)(a)}function _(e,t,r,n,i,a,s){return 6===e.a?e.f(t,r,n,i,a,s):e(t)(r)(n)(i)(a)(s)}function p(e,t,r,n,i,a,s,o){return 7===e.a?e.f(t,r,n,i,a,s,o):e(t)(r)(n)(i)(a)(s)(o)}function m(e,t,r,n,i,a,s,o,u){return 8===e.a?e.f(t,r,n,i,a,s,o,u):e(t)(r)(n)(i)(a)(s)(o)(u)}function g(e,t){for(var r,n=[],i=b(e,t,0,n);i&&(r=n.pop());i=b(r.a,r.b,0,n));return i}function b(e,t,r,n){if(e===t)return!0;if("object"!=typeof e||null===e||null===t)return"function"==typeof e&&L(5),!1;if(r>100)return n.push(E(e,t)),!0;for(var i in e.$<0&&(e=vr(e),t=vr(t)),e)if(!b(e[i],t[i],r+1,n))return!1;return!0}var y=r(g);r((function(e,t){return!g(e,t)}));function v(e,t,r){if("object"!=typeof e)return e===t?0:e<t?-1:1;if(void 0===e.$)return(r=v(e.a,t.a))?r:(r=v(e.b,t.b))?r:v(e.c,t.c);for(;e.b&&t.b&&!(r=v(e.a,t.a));e=e.b,t=t.b);return r||(e.b?1:t.b?-1:0)}r((function(e,t){return v(e,t)<0})),r((function(e,t){return v(e,t)<1})),r((function(e,t){return v(e,t)>0})),r((function(e,t){return v(e,t)>=0}));var w=r((function(e,t){var r=v(e,t);return r<0?gr:r?mr:pr})),k=0;function E(e,t){return{a:e,b:t}}function S(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}var A=r(T);function T(e,t){if("string"==typeof e)return e+t;if(!e.b)return t;var r=I(e.a,t);e=e.b;for(var n=r;e.b;e=e.b)n=n.b=I(e.a,t);return r}var C={$:0};function I(e,t){return{$:1,a:e,b:t}}var x=r(I);function R(e){for(var t=C,r=e.length;r--;)t=I(e[r],t);return t}function O(e){for(var t=[];e.b;e=e.b)t.push(e.a);return t}var M=n((function(e,t,r){for(var n=[];t.b&&r.b;t=t.b,r=r.b)n.push(l(e,t.a,r.a));return R(n)})),P=(i((function(e,t,r,n){for(var i=[];t.b&&r.b&&n.b;t=t.b,r=r.b,n=n.b)i.push(h(e,t.a,r.a,n.a));return R(i)})),a((function(e,t,r,n,i){for(var a=[];t.b&&r.b&&n.b&&i.b;t=t.b,r=r.b,n=n.b,i=i.b)a.push(d(e,t.a,r.a,n.a,i.a));return R(a)})),s((function(e,t,r,n,i,a){for(var s=[];t.b&&r.b&&n.b&&i.b&&a.b;t=t.b,r=r.b,n=n.b,i=i.b,a=a.b)s.push(f(e,t.a,r.a,n.a,i.a,a.a));return R(s)})),r((function(e,t){return R(O(t).sort((function(t,r){return v(e(t),e(r))})))})));r((function(e,t){return R(O(t).sort((function(t,r){var n=l(e,t,r);return n===pr?0:n===gr?-1:1})))}));var D=n((function(e,t,r){for(var n=new Array(e),i=0;i<e;i++)n[i]=r(t+i);return n})),N=r((function(e,t){for(var r=new Array(e),n=0;n<e&&t.b;n++)r[n]=t.a,t=t.b;return r.length=n,E(r,t)})),B=(r((function(e,t){return t[e]})),n((function(e,t,r){for(var n=r.length,i=new Array(n),a=0;a<n;a++)i[a]=r[a];return i[e]=t,i})),r((function(e,t){for(var r=t.length,n=new Array(r+1),i=0;i<r;i++)n[i]=t[i];return n[r]=e,n})),n((function(e,t,r){for(var n=r.length,i=0;i<n;i++)t=l(e,r[i],t);return t})),n((function(e,t,r){for(var n=r.length-1;n>=0;n--)t=l(e,r[n],t);return t})));r((function(e,t){for(var r=t.length,n=new Array(r),i=0;i<r;i++)n[i]=e(t[i]);return n})),n((function(e,t,r){for(var n=r.length,i=new Array(n),a=0;a<n;a++)i[a]=l(e,t+a,r[a]);return i})),n((function(e,t,r){return r.slice(e,t)})),n((function(e,t,r){var n=t.length,i=e-n;i>r.length&&(i=r.length);for(var a=new Array(n+i),s=0;s<n;s++)a[s]=t[s];for(s=0;s<i;s++)a[s+n]=r[s];return a})),r((function(e,t){return t})),r((function(e,t){return console.log(e+": <internals>"),t}));function L(e){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+e+".md")}r((function(e,t){return e+t})),r((function(e,t){return e-t})),r((function(e,t){return e*t})),r((function(e,t){return e/t})),r((function(e,t){return e/t|0})),r(Math.pow),r((function(e,t){return t%e}));var $=r((function(e,t){var r=t%e;return 0===e?L(11):r>0&&e<0||r<0&&e>0?r+e:r}));r(Math.atan2);var F=Math.ceil,j=Math.floor,U=Math.round,H=Math.log,z=isNaN;r((function(e,t){return e&&t})),r((function(e,t){return e||t})),r((function(e,t){return e!==t}));var W=r((function(e,t){return e+t}));var Z=r((function(e,t){return e+t}));r((function(e,t){for(var r=t.length,n=new Array(r),i=0;i<r;){var a=t.charCodeAt(i);55296<=a&&a<=56319?(n[i]=e(t[i]+t[i+1]),i+=2):(n[i]=e(t[i]),i++)}return n.join("")}));var Y=r((function(e,t){for(var r=[],n=t.length,i=0;i<n;){var a=t[i],s=t.charCodeAt(i);i++,55296<=s&&s<=56319&&(a+=t[i],i++),e(a)&&r.push(a)}return r.join("")}));var G=n((function(e,t,r){for(var n=r.length,i=0;i<n;){var a=r[i],s=r.charCodeAt(i);i++,55296<=s&&s<=56319&&(a+=r[i],i++),t=l(e,a,t)}return t})),K=n((function(e,t,r){for(var n=r.length;n--;){var i=r[n],a=r.charCodeAt(n);56320<=a&&a<=57343&&(i=r[--n]+i),t=l(e,i,t)}return t})),V=r((function(e,t){return t.split(e)})),q=r((function(e,t){return t.join(e)})),Q=n((function(e,t,r){return r.slice(e,t)}));r((function(e,t){for(var r=t.length;r--;){var n=t[r],i=t.charCodeAt(r);if(56320<=i&&i<=57343&&(n=t[--r]+n),e(n))return!0}return!1}));var X=r((function(e,t){for(var r=t.length;r--;){var n=t[r],i=t.charCodeAt(r);if(56320<=i&&i<=57343&&(n=t[--r]+n),!e(n))return!1}return!0})),J=r((function(e,t){return t.indexOf(e)>-1})),ee=r((function(e,t){return 0===t.indexOf(e)})),te=r((function(e,t){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length})),re=r((function(e,t){var r=e.length;if(r<1)return C;for(var n=0,i=[];(n=t.indexOf(e,n))>-1;)i.push(n),n+=r;return R(i)}));function ne(e){return e+""}function ie(e){return{$:2,b:e}}var ae=ie((function(e){return"number"!=typeof e?we("an INT",e):-2147483647<e&&e<2147483647&&(0|e)===e?Tr(e):!isFinite(e)||e%1?we("an INT",e):Tr(e)})),se=ie((function(e){return"boolean"==typeof e?Tr(e):we("a BOOL",e)})),oe=ie((function(e){return"number"==typeof e?Tr(e):we("a FLOAT",e)})),ue=ie((function(e){return Tr(e)})),ce=ie((function(e){return"string"==typeof e?Tr(e):e instanceof String?Tr(e+""):we("a STRING",e)}));var le=r((function(e,t){return{$:6,d:e,b:t}}));r((function(e,t){return{$:7,e:e,b:t}}));function he(e,t){return{$:9,f:e,g:t}}var de=r((function(e,t){return{$:10,b:t,h:e}}));var fe=r((function(e,t){return he(e,[t])})),_e=n((function(e,t,r){return he(e,[t,r])})),pe=(i((function(e,t,r,n){return he(e,[t,r,n])})),a((function(e,t,r,n,i){return he(e,[t,r,n,i])})),s((function(e,t,r,n,i,a){return he(e,[t,r,n,i,a])})),o((function(e,t,r,n,i,a,s){return he(e,[t,r,n,i,a,s])})),u((function(e,t,r,n,i,a,s,o){return he(e,[t,r,n,i,a,s,o])}))),me=(c((function(e,t,r,n,i,a,s,o,u){return he(e,[t,r,n,i,a,s,o,u])})),r((function(e,t){try{return ge(e,JSON.parse(t))}catch(e){return kr(l(Er,"This is not valid JSON! "+e.message,t))}})),r((function(e,t){return ge(e,t)})));function ge(e,t){switch(e.$){case 2:return e.b(t);case 5:return null===t?Tr(e.c):we("null",t);case 3:return ye(t)?be(e.b,t,R):we("a LIST",t);case 4:return ye(t)?be(e.b,t,ve):we("an ARRAY",t);case 6:var r=e.d;if("object"!=typeof t||null===t||!(r in t))return we("an OBJECT with a field named `"+r+"`",t);var n=ge(e.b,t[r]);return wn(n)?n:kr(l(Sr,r,n.a));case 7:var i=e.e;if(!ye(t))return we("an ARRAY",t);if(i>=t.length)return we("a LONGER array. Need index "+i+" but only see "+t.length+" entries",t);n=ge(e.b,t[i]);return wn(n)?n:kr(l(Ar,i,n.a));case 8:if("object"!=typeof t||null===t||ye(t))return we("an OBJECT",t);var a=C;for(var s in t)if(t.hasOwnProperty(s)){n=ge(e.b,t[s]);if(!wn(n))return kr(l(Sr,s,n.a));a=I(E(s,n.a),a)}return Tr(Vr(a));case 9:for(var o=e.f,u=e.g,c=0;c<u.length;c++){n=ge(u[c],t);if(!wn(n))return n;o=o(n.a)}return Tr(o);case 10:n=ge(e.b,t);return wn(n)?ge(e.h(n.a),t):n;case 11:for(var h=C,d=e.g;d.b;d=d.b){n=ge(d.a,t);if(wn(n))return n;h=I(n.a,h)}return kr(Cr(Vr(h)));case 1:return kr(l(Er,e.a,t));case 0:return Tr(e.a)}}function be(e,t,r){for(var n=t.length,i=new Array(n),a=0;a<n;a++){var s=ge(e,t[a]);if(!wn(s))return kr(l(Ar,a,s.a));i[a]=s.a}return Tr(r(i))}function ye(e){return Array.isArray(e)||"undefined"!=typeof FileList&&e instanceof FileList}function ve(e){return l(vn,e.length,(function(t){return e[t]}))}function we(e,t){return kr(l(Er,"Expecting "+e,t))}function ke(e,t){if(e===t)return!0;if(e.$!==t.$)return!1;switch(e.$){case 0:case 1:return e.a===t.a;case 2:return e.b===t.b;case 5:return e.c===t.c;case 3:case 4:case 8:return ke(e.b,t.b);case 6:return e.d===t.d&&ke(e.b,t.b);case 7:return e.e===t.e&&ke(e.b,t.b);case 9:return e.f===t.f&&Ee(e.g,t.g);case 10:return e.h===t.h&&ke(e.b,t.b);case 11:return Ee(e.g,t.g)}}function Ee(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(!ke(e[n],t[n]))return!1;return!0}var Se=r((function(e,t){return JSON.stringify(t,null,e)+""}));function Ae(e){return e}var Te=n((function(e,t,r){return r[e]=t,r}));function Ce(e){return{$:0,a:e}}function Ie(e){return{$:2,b:e,c:null}}var xe=r((function(e,t){return{$:3,b:e,d:t}}));r((function(e,t){return{$:4,b:e,d:t}}));var Re=0;function Oe(e){var t={$:0,e:Re++,f:e,g:null,h:[]};return Le(t),t}function Me(e){return Ie((function(t){t(Ce(Oe(e)))}))}function Pe(e,t){e.h.push(t),Le(e)}var De=r((function(e,t){return Ie((function(r){Pe(e,t),r(Ce(k))}))}));var Ne=!1,Be=[];function Le(e){if(Be.push(e),!Ne){for(Ne=!0;e=Be.shift();)$e(e);Ne=!1}}function $e(e){for(;e.f;){var t=e.f.$;if(0===t||1===t){for(;e.g&&e.g.$!==t;)e.g=e.g.i;if(!e.g)return;e.f=e.g.b(e.f.a),e.g=e.g.i}else{if(2===t)return void(e.f.c=e.f.b((function(t){e.f=t,Le(e)})));if(5===t){if(0===e.h.length)return;e.f=e.f.b(e.h.shift())}else e.g={$:3===t?0:1,b:e.f.b,i:e.g},e.f=e.f.d}}}i((function(e,t,r,n){return Fe(t,n,e.c9,e.d3,e.dX,(function(){return function(){}}))}));function Fe(e,t,r,n,i,a){var s=l(me,e,t?t.flags:void 0);wn(s)||L(2);var o={},u=(s=r(s.a)).a,c=a(d,u),h=function(e,t){var r;for(var n in je){var i=je[n];i.a&&((r=r||{})[n]=i.a(n,t)),e[n]=He(i,t)}return r}(o,d);function d(e,t){s=l(n,e,u),c(u=s.a,t),Ve(o,s.b,i(u))}return Ve(o,s.b,i(u)),h?{ports:h}:{}}var je={};function Ue(e,t,r,n,i){return{b:e,c:t,d:r,e:n,f:i}}function He(e,t){var r={g:t,h:void 0},n=e.c,i=e.d,a=e.e,s=e.f;return r.h=Oe(l(xe,(function e(t){return l(xe,e,{$:5,b:function(e){var o=e.a;return 0===e.$?h(i,r,o,t):a&&s?d(n,r,o.i,o.j,t):h(n,r,a?o.i:o.j,t)}})}),e.b))}var ze=r((function(e,t){return Ie((function(r){e.g(t),r(Ce(k))}))})),We=r((function(e,t){return l(De,e.h,{$:0,a:t})}));function Ze(e){return function(t){return{$:1,k:e,l:t}}}function Ye(e){return{$:2,m:e}}r((function(e,t){return{$:3,n:e,o:t}}));var Ge=[],Ke=!1;function Ve(e,t,r){if(Ge.push({p:e,q:t,r:r}),!Ke){Ke=!0;for(var n;n=Ge.shift();)qe(n.p,n.q,n.r);Ke=!1}}function qe(e,t,r){var n={};for(var i in Qe(!0,t,n,null),Qe(!1,r,n,null),e)Pe(e[i],{$:"fx",a:n[i]||{i:C,j:C}})}function Qe(e,t,r,n){switch(t.$){case 1:var i=t.k,a=function(e,t,r,n){return l(e?je[t].e:je[t].f,(function(e){for(var t=r;t;t=t.t)e=t.s(e);return e}),n)}(e,i,n,t.l);return void(r[i]=function(e,t,r){return r=r||{i:C,j:C},e?r.i=I(t,r.i):r.j=I(t,r.j),r}(e,a,r[i]));case 2:for(var s=t.m;s.b;s=s.b)Qe(e,s.a,r,n);return;case 3:return void Qe(e,t.o,r,{s:t.n,t:n})}}function Xe(e){je[e]&&L(3)}function Je(e,t){return Xe(e),je[e]={e:et,u:t,a:tt},Ze(e)}var et=r((function(e,t){return t}));function tt(e){var t,r=[],i=je[e].u,a=(t=0,Ie((function(e){var r=setTimeout((function(){e(Ce(k))}),t);return function(){clearTimeout(r)}})));return je[e].b=a,je[e].c=n((function(e,t,n){for(;t.b;t=t.b)for(var s=r,o=i(t.a),u=0;u<s.length;u++)s[u](o);return a})),{subscribe:function(e){r.push(e)},unsubscribe:function(e){var t=(r=r.slice()).indexOf(e);t>=0&&r.splice(t,1)}}}function rt(e,t){return Xe(e),je[e]={f:it,u:t,a:at},Ze(e)}var nt,it=r((function(e,t){return function(r){return e(t(r))}}));function at(e,t){var r=C,i=je[e].u,a=Ce(null);return je[e].b=a,je[e].c=n((function(e,t,n){return r=t,a})),{send:function(e){var n=l(me,i,e);wn(n)||L(4,n.a);for(var a=n.a,s=r;s.b;s=s.b)t(s.a(a))}}}var st="undefined"!=typeof document?document:{};function ot(e,t){e.appendChild(t)}i((function(e,t,r,n){var i=n.node;return i.parentNode.replaceChild(At(e,(function(){})),i),{}}));function ut(e){return{$:0,a:e}}var ct=r((function(e,t){return r((function(r,n){for(var i=[],a=0;n.b;n=n.b){var s=n.a;a+=s.b||0,i.push(s)}return a+=i.length,{$:1,c:t,d:Et(r),e:i,f:e,b:a}}))})),lt=ct(void 0),ht=r((function(e,t){return r((function(r,n){for(var i=[],a=0;n.b;n=n.b){var s=n.a;a+=s.b.b||0,i.push(s)}return a+=i.length,{$:2,c:t,d:Et(r),e:i,f:e,b:a}}))})),dt=ht(void 0);r((function(e,t){return{$:4,j:e,k:t,b:1+(t.b||0)}}));function ft(e,t){return{$:5,l:e,m:t,k:void 0}}r((function(e,t){return ft([e,t],(function(){return e(t)}))}));var _t=n((function(e,t,r){return ft([e,t,r],(function(){return l(e,t,r)}))})),pt=(i((function(e,t,r,n){return ft([e,t,r,n],(function(){return h(e,t,r,n)}))})),a((function(e,t,r,n,i){return ft([e,t,r,n,i],(function(){return d(e,t,r,n,i)}))})),s((function(e,t,r,n,i,a){return ft([e,t,r,n,i,a],(function(){return f(e,t,r,n,i,a)}))})),o((function(e,t,r,n,i,a,s){return ft([e,t,r,n,i,a,s],(function(){return _(e,t,r,n,i,a,s)}))})),u((function(e,t,r,n,i,a,s,o){return ft([e,t,r,n,i,a,s,o],(function(){return p(e,t,r,n,i,a,s,o)}))})),c((function(e,t,r,n,i,a,s,o,u){return ft([e,t,r,n,i,a,s,o,u],(function(){return m(e,t,r,n,i,a,s,o,u)}))})),r((function(e,t){return{$:"a0",n:e,o:t}}))),mt=(r((function(e,t){return{$:"a1",n:e,o:t}})),r((function(e,t){return{$:"a2",n:e,o:t}}))),gt=r((function(e,t){return{$:"a3",n:e,o:t}}));n((function(e,t,r){return{$:"a4",n:t,o:{f:e,o:r}}}));function bt(e){return"script"==e?"p":e}function yt(e){return/^\s*(javascript:|data:text\/html)/i.test(e)?"":e}r((function(e,t){return"a0"===t.$?l(pt,t.n,function(e,t){var r=An(t);return{$:t.$,a:r?h(En,r<3?wt:kt,Sn(e),t.a):l(kn,e,t.a)}}(e,t.o)):t}));var vt,wt=r((function(e,t){return E(e(t.a),t.b)})),kt=r((function(e,t){return{dg:e(t.dg),dV:t.dV,dG:t.dG}}));function Et(e){for(var t={};e.b;e=e.b){var r=e.a,n=r.$,i=r.n,a=r.o;if("a2"!==n){var s=t[n]||(t[n]={});"a3"===n&&"class"===i?St(s,i,a):s[i]=a}else"className"===i?St(t,i,a):t[i]=a}return t}function St(e,t,r){var n=e[t];e[t]=n?n+" "+r:r}function At(e,t){var r=e.$;if(5===r)return At(e.k||(e.k=e.m()),t);if(0===r)return st.createTextNode(e.a);if(4===r){for(var n=e.k,i=e.j;4===n.$;)"object"!=typeof i?i=[i,n.j]:i.push(n.j),n=n.k;var a={j:i,p:t};return(s=At(n,a)).elm_event_node_ref=a,s}if(3===r)return Tt(s=e.h(e.g),t,e.d),s;var s=e.f?st.createElementNS(e.f,e.c):st.createElement(e.c);nt&&"a"==e.c&&s.addEventListener("click",nt(s)),Tt(s,t,e.d);for(var o=e.e,u=0;u<o.length;u++)ot(s,At(1===r?o[u]:o[u].b,t));return s}function Tt(e,t,r){for(var n in r){var i=r[n];"a1"===n?Ct(e,i):"a0"===n?Rt(e,t,i):"a3"===n?It(e,i):"a4"===n?xt(e,i):("value"!==n&&"checked"!==n||e[n]!==i)&&(e[n]=i)}}function Ct(e,t){var r=e.style;for(var n in t)r[n]=t[n]}function It(e,t){for(var r in t){var n=t[r];void 0!==n?e.setAttribute(r,n):e.removeAttribute(r)}}function xt(e,t){for(var r in t){var n=t[r],i=n.f,a=n.o;void 0!==a?e.setAttributeNS(i,r,a):e.removeAttributeNS(i,r)}}function Rt(e,t,r){var n=e.elmFs||(e.elmFs={});for(var i in r){var a=r[i],s=n[i];if(a){if(s){if(s.q.$===a.$){s.q=a;continue}e.removeEventListener(i,s)}s=Ot(t,a),e.addEventListener(i,s,vt&&{passive:An(a)<2}),n[i]=s}else e.removeEventListener(i,s),n[i]=void 0}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){vt=!0}}))}catch(e){}function Ot(e,t){function r(t){var n=r.q,i=ge(n.a,t);if(wn(i)){for(var a,s=An(n),o=i.a,u=s?s<3?o.a:o.dg:o,c=1==s?o.b:3==s&&o.dV,l=(c&&t.stopPropagation(),(2==s?o.b:3==s&&o.dG)&&t.preventDefault(),e);a=l.j;){if("function"==typeof a)u=a(u);else for(var h=a.length;h--;)u=a[h](u);l=l.p}l(u,c)}}return r.q=t,r}function Mt(e,t){return e.$==t.$&&ke(e.a,t.a)}function Pt(e,t){var r=[];return Nt(e,t,r,0),r}function Dt(e,t,r,n){var i={$:t,r:r,s:n,t:void 0,u:void 0};return e.push(i),i}function Nt(e,t,r,n){if(e!==t){var i=e.$,a=t.$;if(i!==a){if(1!==i||2!==a)return void Dt(r,0,n,t);t=function(e){for(var t=e.e,r=t.length,n=new Array(r),i=0;i<r;i++)n[i]=t[i].b;return{$:1,c:e.c,d:e.d,e:n,f:e.f,b:e.b}}(t),a=1}switch(a){case 5:for(var s=e.l,o=t.l,u=s.length,c=u===o.length;c&&u--;)c=s[u]===o[u];if(c)return void(t.k=e.k);t.k=t.m();var l=[];return Nt(e.k,t.k,l,0),void(l.length>0&&Dt(r,1,n,l));case 4:for(var h=e.j,d=t.j,f=!1,_=e.k;4===_.$;)f=!0,"object"!=typeof h?h=[h,_.j]:h.push(_.j),_=_.k;for(var p=t.k;4===p.$;)f=!0,"object"!=typeof d?d=[d,p.j]:d.push(p.j),p=p.k;return f&&h.length!==d.length?void Dt(r,0,n,t):((f?function(e,t){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(h,d):h===d)||Dt(r,2,n,d),void Nt(_,p,r,n+1));case 0:return void(e.a!==t.a&&Dt(r,3,n,t.a));case 1:return void Bt(e,t,r,n,$t);case 2:return void Bt(e,t,r,n,Ft);case 3:if(e.h!==t.h)return void Dt(r,0,n,t);var m=Lt(e.d,t.d);m&&Dt(r,4,n,m);var g=t.i(e.g,t.g);return void(g&&Dt(r,5,n,g))}}}function Bt(e,t,r,n,i){if(e.c===t.c&&e.f===t.f){var a=Lt(e.d,t.d);a&&Dt(r,4,n,a),i(e,t,r,n)}else Dt(r,0,n,t)}function Lt(e,t,r){var n;for(var i in e)if("a1"!==i&&"a0"!==i&&"a3"!==i&&"a4"!==i)if(i in t){var a=e[i],s=t[i];a===s&&"value"!==i&&"checked"!==i||"a0"===r&&Mt(a,s)||((n=n||{})[i]=s)}else(n=n||{})[i]=r?"a1"===r?"":"a0"===r||"a3"===r?void 0:{f:e[i].f,o:void 0}:"string"==typeof e[i]?"":null;else{var o=Lt(e[i],t[i]||{},i);o&&((n=n||{})[i]=o)}for(var u in t)u in e||((n=n||{})[u]=t[u]);return n}function $t(e,t,r,n){var i=e.e,a=t.e,s=i.length,o=a.length;s>o?Dt(r,6,n,{v:o,i:s-o}):s<o&&Dt(r,7,n,{v:s,e:a});for(var u=s<o?s:o,c=0;c<u;c++){var l=i[c];Nt(l,a[c],r,++n),n+=l.b||0}}function Ft(e,t,r,n){for(var i=[],a={},s=[],o=e.e,u=t.e,c=o.length,l=u.length,h=0,d=0,f=n;h<c&&d<l;){var _=o[h],p=u[d],m=_.a,g=p.a,b=_.b,y=p.b,v=void 0,w=void 0;if(m!==g){var k=o[h+1],E=u[d+1];if(k){var S=k.a,A=k.b;w=g===S}if(E){var T=E.a,C=E.b;v=m===T}if(v&&w)Nt(b,C,i,++f),Ut(a,i,m,y,d,s),f+=b.b||0,Ht(a,i,m,A,++f),f+=A.b||0,h+=2,d+=2;else if(v)f++,Ut(a,i,g,y,d,s),Nt(b,C,i,f),f+=b.b||0,h+=1,d+=2;else if(w)Ht(a,i,m,b,++f),f+=b.b||0,Nt(A,y,i,++f),f+=A.b||0,h+=2,d+=1;else{if(!k||S!==T)break;Ht(a,i,m,b,++f),Ut(a,i,g,y,d,s),f+=b.b||0,Nt(A,C,i,++f),f+=A.b||0,h+=2,d+=2}}else Nt(b,y,i,++f),f+=b.b||0,h++,d++}for(;h<c;){f++;b=(_=o[h]).b;Ht(a,i,_.a,b,f),f+=b.b||0,h++}for(;d<l;){var I=I||[];Ut(a,i,(p=u[d]).a,p.b,void 0,I),d++}(i.length>0||s.length>0||I)&&Dt(r,8,n,{w:i,x:s,y:I})}var jt="_elmW6BL";function Ut(e,t,r,n,i,a){var s=e[r];if(!s)return s={c:0,z:n,r:i,s:void 0},a.push({r:i,A:s}),void(e[r]=s);if(1===s.c){a.push({r:i,A:s}),s.c=2;var o=[];return Nt(s.z,n,o,s.r),s.r=i,void(s.s.s={w:o,A:s})}Ut(e,t,r+jt,n,i,a)}function Ht(e,t,r,n,i){var a=e[r];if(a){if(0===a.c){a.c=2;var s=[];return Nt(n,a.z,s,i),void Dt(t,9,i,{w:s,A:a})}Ht(e,t,r+jt,n,i)}else{var o=Dt(t,9,i,void 0);e[r]={c:1,z:n,r:i,s:o}}}function zt(e,t,r,n){!function e(t,r,n,i,a,s,o){var u=n[i],c=u.r;for(;c===a;){var l=u.$;if(1===l)zt(t,r.k,u.s,o);else if(8===l){u.t=t,u.u=o,(h=u.s.w).length>0&&e(t,r,h,0,a,s,o)}else if(9===l){u.t=t,u.u=o;var h,d=u.s;if(d)d.A.s=t,(h=d.w).length>0&&e(t,r,h,0,a,s,o)}else u.t=t,u.u=o;if(i++,!(u=n[i])||(c=u.r)>s)return i}var f=r.$;if(4===f){for(var _=r.k;4===_.$;)_=_.k;return e(t,_,n,i,a+1,s,t.elm_event_node_ref)}for(var p=r.e,m=t.childNodes,g=0;g<p.length;g++){a++;var b=1===f?p[g]:p[g].b,y=a+(b.b||0);if(a<=c&&c<=y&&(i=e(m[g],b,n,i,a,y,o),!(u=n[i])||(c=u.r)>s))return i;a=y}return i}(e,t,r,0,0,t.b,n)}function Wt(e,t,r,n){return 0===r.length?e:(zt(e,t,r,n),Zt(e,r))}function Zt(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.t,a=Yt(i,n);i===e&&(e=a)}return e}function Yt(e,t){switch(t.$){case 0:return function(e,t,r){var n=e.parentNode,i=At(t,r);i.elm_event_node_ref||(i.elm_event_node_ref=e.elm_event_node_ref);n&&i!==e&&n.replaceChild(i,e);return i}(e,t.s,t.u);case 4:return Tt(e,t.u,t.s),e;case 3:return e.replaceData(0,e.length,t.s),e;case 1:return Zt(e,t.s);case 2:return e.elm_event_node_ref?e.elm_event_node_ref.j=t.s:e.elm_event_node_ref={j:t.s,p:t.u},e;case 6:for(var r=t.s,n=0;n<r.i;n++)e.removeChild(e.childNodes[r.v]);return e;case 7:for(var i=(r=t.s).e,a=(n=r.v,e.childNodes[n]);n<i.length;n++)e.insertBefore(At(i[n],t.u),a);return e;case 9:if(!(r=t.s))return e.parentNode.removeChild(e),e;var s=r.A;return void 0!==s.r&&e.parentNode.removeChild(e),s.s=Zt(e,r.w),e;case 8:return function(e,t){var r=t.s,n=function(e,t){if(!e)return;for(var r=st.createDocumentFragment(),n=0;n<e.length;n++){var i=e[n].A;ot(r,2===i.c?i.s:At(i.z,t.u))}return r}(r.y,t);e=Zt(e,r.w);for(var i=r.x,a=0;a<i.length;a++){var s=i[a],o=s.A,u=2===o.c?o.s:At(o.z,t.u);e.insertBefore(u,e.childNodes[s.r])}n&&ot(e,n);return e}(e,t);case 5:return t.s(e);default:L(10)}}function Gt(e){if(3===e.nodeType)return ut(e.textContent);if(1!==e.nodeType)return ut("");for(var t=C,r=e.attributes,n=r.length;n--;){var i=r[n],a=i.name,s=i.value;t=I(l(gt,a,s),t)}var o=e.tagName.toLowerCase(),u=C,c=e.childNodes;for(n=c.length;n--;)u=I(Gt(c[n]),u);return h(lt,o,t,u)}i((function(e,t,r,n){return Fe(t,n,e.c9,e.d3,e.dX,(function(t,r){var i=e.d7,a=n.node,s=Gt(a);return qt(r,(function(e){var r=i(e),n=Pt(s,r);a=Wt(a,s,n,t),s=r}))}))}));var Kt=i((function(e,t,r,n){return Fe(t,n,e.c9,e.d3,e.dX,(function(t,r){var n=e.bh&&e.bh(t),i=e.d7,a=st.title,s=st.body,o=Gt(s);return qt(r,(function(e){nt=n;var r=i(e),u=lt("body")(C)(r.cz),c=Pt(o,u);s=Wt(s,o,c,t),o=u,nt=0,a!==r.d0&&(st.title=a=r.d0)}))}))})),Vt="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(e,1e3/60)};function qt(e,t){t(e);var r=0;function n(){r=1===r?0:(Vt(n),t(e),1)}return function(i,a){e=i,a?(t(e),2===r&&(r=1)):(0===r&&Vt(n),r=2)}}function Qt(){return Wn(st.location.href).a||L(1)}r((function(e,t){return l(oi,Zn,Ie((function(){t&&history.go(t),e()})))}));var Xt=r((function(e,t){return l(oi,Zn,Ie((function(){history.pushState({},"",t),e()})))})),Jt=r((function(e,t){return l(oi,Zn,Ie((function(){history.replaceState({},"",t),e()})))})),er="undefined"!=typeof window?window:{addEventListener:function(){},removeEventListener:function(){}};n((function(e,t,r){return Me(Ie((function(n){function i(e){Oe(r(e))}return e.addEventListener(t,i,vt&&{passive:!0}),function(){e.removeEventListener(t,i)}})))})),r((function(e,t){var r=ge(e,t);return wn(r)?Ir(r.a):xr}));function tr(e,t){return Ie((function(r){Vt((function(){var n=document.getElementById(e);r(n?Ce(t(n)):function(e){return{$:1,a:e}}(xn(e)))}))}))}r((function(e,t){return tr(t,(function(t){return t[e](),k}))})),r((function(e,t){return r=function(){return er.scroll(e,t),k},Ie((function(e){Vt((function(){e(Ce(r()))}))}));var r})),n((function(e,t,r){return tr(e,(function(e){return e.scrollLeft=t,e.scrollTop=r,k}))}));var rr=n((function(e,t,r){return Ie((function(n){function i(e){n(t(r.cY.a(e)))}var a=new XMLHttpRequest;a.addEventListener("error",(function(){i(Wi)})),a.addEventListener("timeout",(function(){i(Gi)})),a.addEventListener("load",(function(){i(function(e,t){return l(200<=t.status&&t.status<300?zi:Ui,function(e){return{d5:e.responseURL,dT:e.status,dU:e.statusText,bK:nr(e.getAllResponseHeaders())}}(t),e(t.response))}(r.cY.b,a))})),qi(r.cj)&&function(e,t,r){t.upload.addEventListener("progress",(function(n){t.c||Oe(l(Qi,e,E(r,Yi({dO:n.loaded,cc:n.total}))))})),t.addEventListener("progress",(function(n){t.c||Oe(l(Qi,e,E(r,Zi({dH:n.loaded,cc:n.lengthComputable?Ir(n.total):xr}))))}))}(e,a,r.cj.a);try{a.open(r.di,r.d5,!0)}catch(e){return i(Hi(r.d5))}return function(e,t){for(var r=t.bK;r.b;r=r.b)e.setRequestHeader(r.a.a,r.a.b);e.timeout=t.d$.a||0,e.responseType=t.cY.d,e.withCredentials=t.cv}(a,r),r.cz.a&&a.setRequestHeader("Content-Type",r.cz.a),a.send(r.cz.b),function(){a.c=!0,a.abort()}}))}));function nr(e){if(!e)return Vi;for(var t=Vi,r=e.split("\r\n"),n=r.length;n--;){var i=r[n],a=i.indexOf(": ");if(a>0){var s=i.substring(0,a),o=i.substring(a+2);t=h(ha,s,(function(e){return Ir(qi(e)?o+", "+e.a:o)}),t)}}return t}var ir=n((function(e,t,r){return{$:0,d:e,b:t,a:r}})),ar=r((function(e,t){return{$:0,d:t.d,b:t.b,a:function(r){return e(t.a(r))}}}));r((function(e,t){return{$:0,a:e,b:t}})),r((function(e,t){return new Blob([t],{type:e})}));r((function(e,t){return e&t})),r((function(e,t){return e|t})),r((function(e,t){return e^t})),r((function(e,t){return t<<e})),r((function(e,t){return t>>e})),r((function(e,t){return t>>>e}));var sr=r((function(e,t){var r="g";e.dl&&(r+="m"),e.cD&&(r+="i");try{return Ir(new RegExp(t,r))}catch(e){return xr}})),or=(r((function(e,t){return null!==t.match(e)})),n((function(e,t,r){for(var n,i=[],a=0,s=r,o=t.lastIndex,u=-1;a++<e&&(n=t.exec(s))&&u!=t.lastIndex;){for(var c=n.length-1,l=new Array(c);c>0;){var h=n[c];l[--c]=h?Ir(h):xr}i.push(d(K_,n[0],n.index,a,R(l))),u=t.lastIndex}return t.lastIndex=o,R(i)})),i((function(e,t,r,n){var i=0;return n.replace(t,(function(t){if(i++>=e)return t;for(var n=arguments.length-3,a=new Array(n);n>0;){var s=arguments[n];a[--n]=s?Ir(s):xr}return r(d(K_,t,arguments[arguments.length-2],i,R(a)))}))}))),ur=(n((function(e,t,r){for(var n=r,i=[],a=t.lastIndex,s=t.lastIndex;e--;){var o=t.exec(n);if(!o)break;i.push(n.slice(a,o.index)),a=t.lastIndex}return i.push(n.slice(a)),t.lastIndex=s,R(i)})),n((function(e,t,r){return function(e,t,r,n){return{$:3,d:Et(e),g:t,h:r,i:n}}(t,{a:e,b:r},cr,lr)})));function cr(e){return l(fr,e,st.createElement("div"))}function lr(e,t){return(e.b!==t.b||e.a!==t.a)&&fr(t)}var hr,dr,fr=r((function(e,t){var r,n;return t.innerHTML=_r(e.b,(r=e.a,{highlight:function(e,t){return!t&&qi(r.bC)&&(t=r.bC.a),"undefined"!=typeof hljs&&t&&hljs.listLanguages().indexOf(t)>=0?hljs.highlight(t,e,!0).value:e},gfm:n=r.c3.a,tables:n&&n.dY,breaks:n&&n.cA,sanitize:r.dL,smartypants:r.dR})),t})),_r=(dr=(hr={}).exports={},function(){var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function t(t){this.tokens=[],this.tokens.links={},this.options=t||l.defaults,this.rules=e.normal,this.options.gfm&&(this.options.tables?this.rules=e.tables:this.rules=e.gfm)}e.bullet=/(?:[*+-]|\d+\.)/,e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,e.item=o(e.item,"gm")(/bull/g,e.bullet)(),e.list=o(e.list)(/bull/g,e.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+e.def.source+")")(),e.blockquote=o(e.blockquote)("def",e.def)(),e._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",e.html=o(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)(),e.paragraph=o(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)(),e.normal=c({},e),e.gfm=c({},e.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),e.gfm.paragraph=o(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|"+e.list.source.replace("\\1","\\3")+"|")(),e.tables=c({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=e,t.lex=function(e,r){return new t(r).lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(t,r,n){var i,a,s,o,u,c,l,h,d;for(t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t))t=t.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(r&&(s=this.rules.nptable.exec(t))){for(t=t.substring(s[0].length),c={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")},h=0;h<c.align.length;h++)/^ *-+: *$/.test(c.align[h])?c.align[h]="right":/^ *:-+: *$/.test(c.align[h])?c.align[h]="center":/^ *:-+ *$/.test(c.align[h])?c.align[h]="left":c.align[h]=null;for(h=0;h<c.cells.length;h++)c.cells[h]=c.cells[h].split(/ *\| */);this.tokens.push(c)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,r,!0),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),o=s[2],this.tokens.push({type:"list_start",ordered:o.length>1}),i=!1,d=(s=s[0].match(this.rules.item)).length,h=0;h<d;h++)l=(c=s[h]).length,~(c=c.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&h!==d-1&&(o===(u=e.bullet.exec(s[h+1])[0])||o.length>1&&u.length>1||(t=s.slice(h+1).join("\n")+t,h=d-1)),a=i||/\n\n(?!\s*$)/.test(c),h!==d-1&&(i="\n"===c.charAt(c.length-1),a||(a=i)),this.tokens.push({type:a?"loose_item_start":"list_item_start"}),this.token(c,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(!n&&r&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};else if(r&&(s=this.rules.table.exec(t))){for(t=t.substring(s[0].length),c={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;h<c.align.length;h++)/^ *-+: *$/.test(c.align[h])?c.align[h]="right":/^ *:-+: *$/.test(c.align[h])?c.align[h]="center":/^ *:-+ *$/.test(c.align[h])?c.align[h]="left":c.align[h]=null;for(h=0;h<c.cells.length;h++)c.cells[h]=c.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(c)}else if(r&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var r={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^_\_([\s\S]+?)_\_(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|_\_)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function n(e,t){if(this.options=t||l.defaults,this.links=e,this.rules=r.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=r.breaks:this.rules=r.gfm:this.options.pedantic&&(this.rules=r.pedantic)}function i(e){this.options=e||{}}function a(e){this.tokens=[],this.token=null,this.options=e||l.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function s(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e,t){return e=e.source,t=t||"",function r(n,i){return n?(i=(i=i.source||i).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(n,i),r):new RegExp(e,t)}}function u(){}function c(e){for(var t,r,n=1;n<arguments.length;n++)for(r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function l(e,r,n){if(n||"function"==typeof r){n||(n=r,r=null);var i,o,u=(r=c({},l.defaults,r||{})).highlight,h=0;try{i=t.lex(e,r)}catch(e){return n(e)}o=i.length;var d=function(e){if(e)return r.highlight=u,n(e);var t;try{t=a.parse(i,r)}catch(t){e=t}return r.highlight=u,e?n(e):n(null,t)};if(!u||u.length<3)return d();if(delete r.highlight,!o)return d();for(;h<i.length;h++)!function(e){"code"!==e.type?--o||d():u(e.text,e.lang,(function(t,r){return t?d(t):null==r||r===e.text?--o||d():(e.text=r,e.escaped=!0,void(--o||d()))}))}(i[h])}else try{return r&&(r=c({},l.defaults,r)),a.parse(t.lex(e,r),r)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(r||l.defaults).silent)return"<p>An error occured:</p><pre>"+s(e.message+"",!0)+"</pre>";throw e}}r._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,r._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,r.link=o(r.link)("inside",r._inside)("href",r._href)(),r.reflink=o(r.reflink)("inside",r._inside)(),r.normal=c({},r),r.pedantic=c({},r.normal,{strong:/^_\_(?=\S)([\s\S]*?\S)_\_(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),r.gfm=c({},r.normal,{escape:o(r.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(r.text)("]|","~]|")("|","|https?://|")()}),r.breaks=c({},r.gfm,{br:o(r.br)("{2,}","*")(),text:o(r.gfm.text)("{2,}","*")()}),n.rules=r,n.output=function(e,t,r){return new n(t,r).output(e)},n.prototype.output=function(e){for(var t,r,n,i,a="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),a+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(r=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),n=this.mangle("mailto:")+r):n=r=s(i[1]),a+=this.renderer.link(n,null,r);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):s(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,a+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),a+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),a+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),a+=this.renderer.codespan(s(i[2],!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),a+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),a+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),a+=this.renderer.text(s(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(i[0].length),n=r=s(i[1]),a+=this.renderer.link(n,null,r);return a},n.prototype.outputLink=function(e,t){var r=s(t.href),n=t.title?s(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(r,n,this.output(e[1])):this.renderer.image(r,n,s(e[1]))},n.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},n.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,r="",n=e.length,i=0;i<n;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),r+="&#"+t+";";return r},i.prototype.code=function(e,t,r){if(this.options.highlight){var n=this.options.highlight(e,t);null!=n&&n!==e&&(r=!0,e=n)}return t?'<pre><code class="'+this.options.langPrefix+s(t,!0)+'">'+(r?e:s(e,!0))+"\n</code></pre>\n":"<pre><code>"+(r?e:s(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,r){return"<h"+t+' id="'+this.options.headerPrefix+r.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t){var r=t?"ol":"ul";return"<"+r+">\n"+e+"</"+r+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var r=t.header?"th":"td";return(t.align?"<"+r+' style="text-align:'+t.align+'">':"<"+r+">")+e+"</"+r+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,r){if(this.options.sanitize){try{var n=decodeURIComponent((i=e,i.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})))).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return""}var i,a='<a href="'+e+'"';return t&&(a+=' title="'+t+'"'),a+=">"+r+"</a>"},i.prototype.image=function(e,t,r){var n='<img src="'+e+'" alt="'+r+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},a.parse=function(e,t,r){return new a(t,r).parse(e)},a.prototype.parse=function(e){this.inline=new n(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},a.prototype.next=function(){return this.token=this.tokens.pop()},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,r,n,i="",a="";for(r="",e=0;e<this.token.header.length;e++)this.token.align[e],r+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(r),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],r="",n=0;n<t.length;n++)r+=this.renderer.tablecell(this.inline.output(t[n]),{header:!1,align:this.token.align[n]});a+=this.renderer.tablerow(r)}return this.renderer.table(i,a);case"blockquote_start":for(a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":a="";for(var s=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,s);case"list_item_start":for(a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var o=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(o);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},u.exec=u,l.options=l.setOptions=function(e){return c(l.defaults,e),l},l.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},l.Parser=a,l.parser=a.parse,l.Renderer=i,l.Lexer=t,l.lexer=t.lex,l.InlineLexer=n,l.inlineLexer=n.output,l.parse=l,void 0!==hr&&"object"==typeof dr?hr.exports=l:"function"==typeof define&&define.amd?define((function(){return l})):this.marked=l}.call(function(){return this||("undefined"!=typeof window?window:global)}()),hr.exports);var pr=1,mr=2,gr=0,br=x,yr=n((function(e,t,r){for(;;){if(-2===r.$)return t;var n=r.b,i=r.c,a=r.d,s=r.e,o=e,u=h(e,n,i,h(yr,e,t,s));e=o,t=u,r=a}})),vr=function(e){return h(yr,n((function(e,t,r){return l(br,E(e,t),r)})),C,e)},wr=B,kr=(n((function(e,t,n){var i=n.c,a=n.d,s=r((function(t,r){if(t.$){var n=t.a;return h(wr,e,r,n)}var i=t.a;return h(wr,s,r,i)}));return h(wr,s,h(wr,e,t,a),i)})),function(e){return{$:1,a:e}}),Er=r((function(e,t){return{$:3,a:e,b:t}})),Sr=r((function(e,t){return{$:0,a:e,b:t}})),Ar=r((function(e,t){return{$:1,a:e,b:t}})),Tr=function(e){return{$:0,a:e}},Cr=function(e){return{$:2,a:e}},Ir=function(e){return{$:0,a:e}},xr={$:1},Rr=X,Or=A,Mr=Se,Pr=ne,Dr=r((function(e,t){return l(q,e,O(t))})),Nr=r((function(e,t){return R(l(V,e,t))})),Br=function(e){return l(Dr,"\n    ",l(Nr,"\n",e))},Lr=n((function(e,t,r){for(;;){if(!r.b)return t;var n=r.a,i=r.b,a=e,s=l(e,n,t);e=a,t=s,r=i}})),$r=function(e){return h(Lr,r((function(e,t){return t+1})),0,e)},Fr=M,jr=n((function(e,t,r){for(;;){if(!(v(e,t)<1))return r;var n=e,i=t-1,a=l(br,t,r);e=n,t=i,r=a}})),Ur=r((function(e,t){return h(jr,e,t,C)})),Hr=r((function(e,t){return h(Fr,e,l(Ur,0,$r(t)-1),t)})),zr=function(e){var t=e.charCodeAt(0);return 55296<=t&&t<=56319?1024*(t-55296)+e.charCodeAt(1)-56320+65536:t},Wr=function(e){var t=zr(e);return 97<=t&&t<=122},Zr=function(e){var t=zr(e);return t<=90&&65<=t},Yr=function(e){return Wr(e)||Zr(e)},Gr=function(e){var t=zr(e);return t<=57&&48<=t},Kr=function(e){return Wr(e)||Zr(e)||Gr(e)},Vr=function(e){return h(Lr,br,C,e)},qr=function(e){var t=e.charCodeAt(0);return isNaN(t)?xr:Ir(55296<=t&&t<=56319?E(e[0]+e[1],e.slice(2)):E(e[0],e.slice(1)))},Qr=r((function(e,t){return"\n\n("+Pr(e+1)+") "+Br(Xr(t))})),Xr=function(e){return l(Jr,e,C)},Jr=r((function(e,t){e:for(;;)switch(e.$){case 0:var r=e.a,n=e.b,i=function(){var e=qr(r);if(1===e.$)return!1;var t=e.a,n=t.a,i=t.b;return Yr(n)&&l(Rr,Kr,i)}(),a=n,s=l(br,i?"."+r:"['"+r+"']",t);e=a,t=s;continue e;case 1:var o=e.a,u=(n=e.b,"["+Pr(o)+"]");a=n,s=l(br,u,t);e=a,t=s;continue e;case 2:var c=e.a;if(c.b){if(c.b.b){var h=(t.b?"The Json.Decode.oneOf at json"+l(Dr,"",Vr(t)):"Json.Decode.oneOf")+" failed in the following "+Pr($r(c))+" ways:";return l(Dr,"\n\n",l(br,h,l(Hr,Qr,c)))}e=a=n=c.a,t=s=t;continue e}return"Ran into a Json.Decode.oneOf with no possibilities"+(t.b?" at json"+l(Dr,"",Vr(t)):"!");default:var d=e.a,f=e.b;return(h=t.b?"Problem with the value at json"+l(Dr,"",Vr(t))+":\n\n    ":"Problem with the given value:\n\n")+(Br(l(Mr,4,f))+"\n\n")+d}})),en=i((function(e,t,r,n){return{$:0,a:e,b:t,c:r,d:n}})),tn=[],rn=F,nn=r((function(e,t){return H(t)/H(e)})),an=function(e){return e},sn=rn(l(nn,2,32)),on=d(en,0,sn,tn,tn),un=D,cn=(r((function(e,t){return e(t)})),r((function(e,t){return t(e)}))),ln=y,hn=j,dn=function(e){return e.length},fn=r((function(e,t){return v(e,t)>0?e:t})),_n=N,pn=r((function(e,t){for(;;){var r=l(_n,32,e),n=r.a,i=r.b,a=l(br,{$:0,a:n},t);if(!i.b)return Vr(a);e=i,t=a}})),mn=function(e){return e.a},gn=r((function(e,t){for(;;){var r=rn(t/32);if(1===r)return l(_n,32,e).a;e=l(pn,e,C),t=r}})),bn=r((function(e,t){if(t.h){var r=32*t.h,n=hn(l(nn,32,r-1)),i=e?Vr(t.k):t.k,a=l(gn,i,t.h);return d(en,dn(t.j)+r,l(fn,5,n*sn),a,t.j)}return d(en,dn(t.j),sn,tn,t.j)})),yn=a((function(e,t,r,n,i){for(;;){if(t<0)return l(bn,!1,{k:n,h:r/32|0,j:i});var a={$:1,a:h(un,32,t,e)};e=e,t=t-32,r=r,n=l(br,a,n),i=i}})),vn=r((function(e,t){if(e<=0)return on;var r=e%32,n=h(un,r,e-r,t);return f(yn,t,e-r-32,e,C,n)})),wn=function(e){return!e.$},kn=fe,En=_e,Sn=function(e){return{$:0,a:e}},An=function(e){switch(e.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},Tn=function(e){return{$:1,a:e}},Cn=function(e){return{$:0,a:e}},In=function(e){return e},xn=In,Rn=s((function(e,t,r,n,i,a){return{c1:a,bM:t,bZ:n,b$:r,b2:e,b3:i}})),On=J,Mn=function(e){return e.length},Pn=Q,Dn=r((function(e,t){return e<1?t:h(Pn,e,Mn(t),t)})),Nn=re,Bn=function(e){return""===e},Ln=r((function(e,t){return e<1?"":h(Pn,0,e,t)})),$n=function(e){for(var t=0,r=e.charCodeAt(0),n=43==r||45==r?1:0,i=n;i<e.length;++i){var a=e.charCodeAt(i);if(a<48||57<a)return xr;t=10*t+a-48}return i==n?xr:Ir(45==r?-t:t)},Fn=a((function(e,t,r,n,i){if(Bn(i)||l(On,"@",i))return xr;var a=l(Nn,":",i);if(a.b){if(a.b.b)return xr;var s=a.a,o=$n(l(Dn,s+1,i));if(1===o.$)return xr;var u=o;return Ir(_(Rn,e,l(Ln,s,i),u,t,r,n))}return Ir(_(Rn,e,i,xr,t,r,n))})),jn=i((function(e,t,r,n){if(Bn(n))return xr;var i=l(Nn,"/",n);if(i.b){var a=i.a;return f(Fn,e,l(Dn,a,n),t,r,l(Ln,a,n))}return f(Fn,e,"/",t,r,n)})),Un=n((function(e,t,r){if(Bn(r))return xr;var n=l(Nn,"?",r);if(n.b){var i=n.a;return d(jn,e,Ir(l(Dn,i+1,r)),t,l(Ln,i,r))}return d(jn,e,xr,t,r)})),Hn=r((function(e,t){if(Bn(t))return xr;var r=l(Nn,"#",t);if(r.b){var n=r.a;return h(Un,e,Ir(l(Dn,n+1,t)),l(Ln,n,t))}return h(Un,e,xr,t)})),zn=ee,Wn=function(e){return l(zn,"http://",e)?l(Hn,0,l(Dn,7,e)):l(zn,"https://",e)?l(Hn,1,l(Dn,8,e)):xr},Zn=function(e){},Yn=Ce,Gn=Yn(0),Kn=i((function(e,t,r,n){if(n.b){var i=n.a,a=n.b;if(a.b){var s=a.a,o=a.b;if(o.b){var u=o.a,c=o.b;if(c.b){var f=c.a,_=c.b;return l(e,i,l(e,s,l(e,u,l(e,f,r>500?h(Lr,e,t,Vr(_)):d(Kn,e,t,r+1,_)))))}return l(e,i,l(e,s,l(e,u,t)))}return l(e,i,l(e,s,t))}return l(e,i,t)}return t})),Vn=n((function(e,t,r){return d(Kn,e,t,0,r)})),qn=r((function(e,t){return h(Vn,r((function(t,r){return l(br,e(t),r)})),C,t)})),Qn=xe,Xn=r((function(e,t){return l(Qn,(function(t){return Yn(e(t))}),t)})),Jn=n((function(e,t,r){return l(Qn,(function(t){return l(Qn,(function(r){return Yn(l(e,t,r))}),r)}),t)})),ei=function(e){return h(Vn,Jn(br),Yn(C),e)},ti=ze,ri=r((function(e,t){var r=t;return Me(l(Qn,ti(e),r))})),ni=n((function(e,t,r){return l(Xn,(function(e){return 0}),ei(l(qn,ri(e),t)))})),ii=n((function(e,t,r){return Yn(0)})),ai=r((function(e,t){return l(Xn,e,t)}));je.Task=Ue(Gn,ni,ii,ai);var si=Ze("Task"),oi=r((function(e,t){return si(l(Xn,e,t))})),ui=function(e){var t=e.dy,n=e.dz,i=function(){i.a(t(Qt()))};return Kt({bh:function(e){return i.a=e,er.addEventListener("popstate",i),er.navigator.userAgent.indexOf("Trident")<0||er.addEventListener("hashchange",i),r((function(t,r){if(!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&r.button<1&&!t.target&&!t.hasAttribute("download")){r.preventDefault();var i=t.href,a=Qt(),s=Wn(i).a;e(n(s&&a.b2===s.b2&&a.bM===s.bM&&a.b$.a===s.b$.a?Cn(s):Tn(i)))}}))},c9:function(t){return h(e.c9,t,Qt(),i)},d7:e.d7,d3:e.d3,dX:e.dX})},ci={$:0},li=r((function(e,t){return{$:1,a:e,b:t}})),hi={$:36},di=Ye,fi=n((function(e,t,r){return t(e(r))})),_i=o((function(e,t,r,n,i,a,s){return{aN:t,aO:e,aP:n,aD:r,a5:i,aJ:a,bm:s}})),pi=se,mi=de,gi=function(e){return{$:1,a:e}},bi=ce,yi=l(mi,(function(e){switch(e){case"pcm":return Sn(1);case"waveform":return Sn(0);default:return gi("invalid AudioEmulation value")}}),bi),vi=l(mi,(function(e){switch(e){case"cycle":return Sn(0);case"instruction":return Sn(1);default:return gi("invalid CpuEmulation value")}}),bi),wi=l(mi,(function(e){switch(e){case"pal":return Sn(0);case"ntsc":return Sn(1);case"secam":return Sn(2);default:return gi("invalid TvMode value")}}),bi),ki=ae,Ei=function(e){return{$:11,g:e}},Si=function(e){return Ei(R([l(kn,Ir,e),Sn(xr)]))},Ai=En(cn),Ti=le,Ci=me,Ii=function(e){return{$:5,c:e}},xi=ue,Ri=n((function(e,t,r){return l(mi,(function(n){var i=l(Ci,e,n);if(i.$)return Sn(r);var a=i.a,s=l(Ci,Ei(R([t,Ii(r)])),a);if(s.$){var o=s.a;return gi(Xr(o))}var u=s.a;return Sn(u)}),xi)})),Oi=i((function(e,t,r,n){return l(Ai,h(Ri,l(Ti,e,xi),t,r),n)})),Mi=n((function(e,t,r){return l(Ai,l(Ti,e,t),r)})),Pi=d(Oi,"phosphorEmulation",Si(pi),xr,d(Oi,"audioEmulation",Si(yi),xr,d(Oi,"cpuEmulation",Si(vi),xr,d(Oi,"firstVisibleLine",Si(ki),xr,d(Oi,"rngSeed",Si(ki),xr,h(Mi,"volume",ki,h(Mi,"emulatePaddles",pi,h(Mi,"tvMode",wi,h(Mi,"cartridgeType",bi,h(Mi,"name",bi,h(Mi,"hash",bi,Sn((function(e){return function(t){return function(r){return function(n){return function(i){return function(a){return function(s){return function(o){return function(u){return function(c){return function(l){return{cy:c,by:r,cI:u,bE:i,bI:o,Q:e,dm:t,dC:l,b9:s,cm:n,d9:a}}}}}}}}}}}}))))))))))))),Di=r((function(e,t){return{cQ:t,db:e}})),Ni=h(En,Di,l(Ti,"key",bi),l(Ti,"description",bi)),Bi=l(mi,(function(e){switch(e){case"wide":return Sn(1);case"narrow":return Sn(0);default:return gi("invalid media value")}}),bi),Li=oe,$i=h(Mi,"uiSize",ki,d(Oi,"uiMode",Si(Bi),xr,h(Mi,"virtualJoystickSensitivity",ki,h(Mi,"leftHanded",pi,d(Oi,"touchControls",Si(pi),xr,h(Mi,"videoSync",pi,h(Mi,"gammaCorrection",Li,h(Mi,"phosphorEmulation",pi,h(Mi,"smoothScaling",pi,h(Mi,"audioEmulation",yi,h(Mi,"volume",ki,h(Mi,"cpuEmulation",vi,Sn((function(e){return function(t){return function(r){return function(n){return function(i){return function(a){return function(s){return function(o){return function(u){return function(c){return function(l){return function(h){return{cy:r,cI:e,c2:a,dc:u,dC:i,dS:n,d1:o,d2:l,cn:h,d6:s,d8:c,d9:t}}}}}}}}}}}}})))))))))))))),Fi=function(e){return{$:3,b:e}},ji=m(pe,_i,l(Ti,"cartridges",Fi(Pi)),l(Ti,"cartridgeTypes",Fi(Ni)),l(Ti,"settings",$i),l(Ti,"defaultSettings",$i),l(Ti,"touchSupport",pi),l(Ti,"version",bi),l(Ti,"wasUpdated",pi)),Ui=r((function(e,t){return{$:3,a:e,b:t}})),Hi=function(e){return{$:0,a:e}},zi=r((function(e,t){return{$:4,a:e,b:t}})),Wi={$:2},Zi=function(e){return{$:1,a:e}},Yi=function(e){return{$:0,a:e}},Gi={$:1},Ki={$:-2},Vi=Ki,qi=function(e){return!e.$},Qi=We,Xi=w,Ji=r((function(e,t){e:for(;;){if(-2===t.$)return xr;var r=t.b,n=t.c,i=t.d,a=t.e;switch(l(Xi,e,r)){case 0:e=e,t=i;continue e;case 1:return Ir(n);default:e=e,t=a;continue e}}})),ea=a((function(e,t,r,n,i){return{$:-1,a:e,b:t,c:r,d:n,e:i}})),ta=a((function(e,t,r,n,i){if(-1!==i.$||i.a){if(-1!==n.$||n.a||-1!==n.d.$||n.d.a)return f(ea,e,t,r,n,i);n.a,p=n.b,m=n.c;var a=n.d,s=(a.a,a.b),o=a.c,u=a.d,c=a.e;b=n.e;return f(ea,0,p,m,f(ea,1,s,o,u,c),f(ea,1,t,r,b,i))}i.a;var l=i.b,h=i.c,d=i.d,_=i.e;if(-1!==n.$||n.a)return f(ea,e,l,h,f(ea,0,t,r,n,d),_);n.a;var p=n.b,m=n.c,g=n.d,b=n.e;return f(ea,0,t,r,f(ea,1,p,m,g,b),f(ea,1,l,h,d,_))})),ra=n((function(e,t,r){if(-2===r.$)return f(ea,0,e,t,Ki,Ki);var n=r.a,i=r.b,a=r.c,s=r.d,o=r.e;switch(l(Xi,e,i)){case 0:return f(ta,n,i,a,h(ra,e,t,s),o);case 1:return f(ea,n,i,t,s,o);default:return f(ta,n,i,a,s,h(ra,e,t,o))}})),na=n((function(e,t,r){var n=h(ra,e,t,r);if(-1!==n.$||n.a)return n;n.a;var i=n.b,a=n.c,s=n.d,o=n.e;return f(ea,1,i,a,s,o)})),ia=function(e){if(-1===e.$&&-1===e.d.$&&-1===e.e.$){if(-1!==e.e.d.$||e.e.d.a){e.a,i=e.b,a=e.c;var t=e.d,r=(t.a,o=t.b,u=t.c,c=t.d,l=t.e,e.e);r.a,d=r.b,_=r.c,n=r.d,y=r.e;return f(ea,1,i,a,f(ea,0,o,u,c,l),f(ea,0,d,_,n,y))}e.a;var n,i=e.b,a=e.c,s=e.d,o=(s.a,s.b),u=s.c,c=s.d,l=s.e,h=e.e,d=(h.a,h.b),_=h.c,p=((n=h.d).a,n.b),m=n.c,g=n.d,b=n.e,y=h.e;return f(ea,0,p,m,f(ea,1,i,a,f(ea,0,o,u,c,l),g),f(ea,1,d,_,b,y))}return e},aa=function(e){if(-1===e.$&&-1===e.d.$&&-1===e.e.$){if(-1!==e.d.d.$||e.d.d.a){e.a,i=e.b,a=e.c;var t=e.d,r=(t.a,o=t.b,u=t.c,t.d),n=(p=t.e,e.e);n.a,g=n.b,b=n.c,y=n.d,v=n.e;return f(ea,1,i,a,f(ea,0,o,u,r,p),f(ea,0,g,b,y,v))}e.a;var i=e.b,a=e.c,s=e.d,o=(s.a,s.b),u=s.c,c=s.d,l=(c.a,c.b),h=c.c,d=c.d,_=c.e,p=s.e,m=e.e,g=(m.a,m.b),b=m.c,y=m.d,v=m.e;return f(ea,0,o,u,f(ea,1,l,h,d,_),f(ea,1,i,a,p,f(ea,0,g,b,y,v)))}return e},sa=o((function(e,t,r,n,i,a,s){if(-1!==a.$||a.a){e:for(;;){if(-1===s.$&&1===s.a){if(-1===s.d.$){if(1===s.d.a){s.a,s.d.a;return aa(t)}break e}s.a,s.d;return aa(t)}break e}return t}a.a;var o=a.b,u=a.c,c=a.d,l=a.e;return f(ea,r,o,u,c,f(ea,0,n,i,l,s))})),oa=function(e){if(-1===e.$&&-1===e.d.$){var t=e.a,r=e.b,n=e.c,i=e.d,a=i.a,s=i.d,o=e.e;if(1===a){if(-1!==s.$||s.a){var u=ia(e);if(-1===u.$){var c=u.a,l=u.b,h=u.c,d=u.d,_=u.e;return f(ta,c,l,h,oa(d),_)}return Ki}s.a;return f(ea,t,r,n,oa(i),o)}return f(ea,t,r,n,oa(i),o)}return Ki},ua=r((function(e,t){if(-2===t.$)return Ki;var r=t.a,n=t.b,i=t.c,a=t.d,s=t.e;if(v(e,n)<0){if(-1===a.$&&1===a.a){a.a;var o=a.d;if(-1!==o.$||o.a){var u=ia(t);if(-1===u.$){var c=u.a,h=u.b,d=u.c,_=u.d,m=u.e;return f(ta,c,h,d,l(ua,e,_),m)}return Ki}o.a;return f(ea,r,n,i,l(ua,e,a),s)}return f(ea,r,n,i,l(ua,e,a),s)}return l(ca,e,p(sa,e,t,r,n,i,a,s))})),ca=r((function(e,t){if(-1===t.$){var r=t.a,n=t.b,i=t.c,a=t.d,s=t.e;if(g(e,n)){var o=function(e){for(;;){if(-1!==e.$||-1!==e.d.$)return e;e=e.d}}(s);if(-1===o.$){var u=o.b,c=o.c;return f(ta,r,u,c,a,oa(s))}return Ki}return f(ta,r,n,i,a,l(ua,e,s))}return Ki})),la=r((function(e,t){var r=l(ua,e,t);if(-1!==r.$||r.a)return r;r.a;var n=r.b,i=r.c,a=r.d,s=r.e;return f(ea,1,n,i,a,s)})),ha=n((function(e,t,r){var n=t(l(Ji,e,r));if(n.$)return l(la,e,r);var i=n.a;return h(na,e,i,r)})),da=r((function(e,t){return h(ir,"",In,l(fi,t,e))})),fa=function(e){return{$:4,a:e}},_a={$:2},pa={$:1},ma=r((function(e,t){if(t.$){var r=t.a;return kr(e(r))}var n=t.a;return Tr(n)})),ga=r((function(e,t){switch(t.$){case 0:var r=t.a;return kr({$:0,a:r});case 1:return kr(pa);case 2:return kr(_a);case 3:var n=t.a;return kr(function(e){return{$:3,a:e}}(n.dT));default:var i=t.b;return l(ma,fa,e(i))}})),ba={cy:1,cI:0,c2:1,dc:!1,dC:!0,dS:!1,d1:xr,d2:xr,cn:100,d6:!0,d8:20,d9:80},ya={$:0},va=function(e){return{$:1,a:e}},wa=r((function(e,t){return{b6:e,cg:t}})),ka=Yn(l(wa,Vi,C)),Ea=function(e){return Ie((function(t){var r=e.f;2===r.$&&r.c&&r.c(),e.f=null,t(Ce(k))}))},Sa=Me,Aa=n((function(e,t,r){e:for(;;){if(t.b){var n=t.a,i=t.b;if(n.$){var a=n.a;return l(Qn,(function(t){var n=a.cj;if(1===n.$)return h(Aa,e,i,r);var s=n.a;return h(Aa,e,i,h(na,s,t,r))}),Sa(h(rr,e,ti(e),a)))}var s=n.a,o=l(Ji,s,r);if(1===o.$){e=e,t=i,r=r;continue e}var u=o.a;return l(Qn,(function(t){return h(Aa,e,i,l(la,s,r))}),Ea(u))}return Yn(r)}})),Ta=i((function(e,t,r,n){return l(Qn,(function(e){return Yn(l(wa,e,r))}),h(Aa,e,t,n.b6))})),Ca=n((function(e,t,r){var n=e(t);if(n.$)return r;var i=n.a;return l(br,i,r)})),Ia=r((function(e,t){return h(Vn,Ca(e),C,t)})),xa=i((function(e,t,r,n){var i=n.a,a=n.b;return g(t,i)?Ir(l(ti,e,a(r))):xr})),Ra=n((function(e,t,r){var n=t.a,i=t.b;return l(Qn,(function(e){return Yn(r)}),ei(l(Ia,h(xa,e,n,i),r.cg)))})),Oa=r((function(e,t){if(t.$){var r=t.a;return va({cv:r.cv,cz:r.cz,cY:l(ar,e,r.cY),bK:r.bK,di:r.di,d$:r.d$,cj:r.cj,d5:r.d5})}var n=t.a;return{$:0,a:n}})),Ma=r((function(e,t){return{$:0,a:e,b:t}})),Pa=r((function(e,t){var r=t.a,n=t.b;return l(Ma,r,l(fi,n,e))}));je.Http=Ue(ka,Ta,Ra,Oa,Pa);var Da=Ze("Http"),Na=function(e){return function(e){return Da(va({cv:!1,cz:e.cz,cY:e.cY,bK:e.bK,di:e.di,d$:e.d$,cj:e.cj,d5:e.d5}))}({cz:ya,cY:e.cY,bK:C,di:"GET",d$:xr,cj:xr,d5:e.d5})},Ba=r((function(e,t){return t.$?xr:e(t.a)})),La=r((function(e,t){return h(Vn,r((function(t,r){return e(t)?l(br,t,r):r})),C,t)})),$a=function(e){if(e.b){var t=e.a;e.b;return Ir(t)}return xr},Fa=r((function(e,t){if(t.$)return xr;var r=t.a;return Ir(e(r))})),ja=R([E(2,"emulation"),E(1,"settings"),E(0,"cartridges"),E(3,"help")]),Ua=function(e){var t=e.c1;return l(Ba,(function(e){return h(fi,La((function(t){return g(t.b,e)})),l(fi,$a,Fa(mn)),ja)}),t)},Ha=Jt,za=function(e){return e.b},Wa=r((function(e,t){return t.$?e:t.a})),Za=function(e){return"#"+h(fi,La((function(t){return g(t.a,e)})),l(fi,$a,l(fi,Fa(za),Wa(""))),ja)},Ya=P,Ga=function(e){return e.toUpperCase()},Ka=r((function(e,t){return h(Lr,function(e){return r((function(t,r){return r.push(e(t)),r}))}(e),[],t)})),Va=Ae,qa=Je("watchMedia_",Ka(Va)),Qa=qa,Xa=function(e){return Qa(R(["(max-width: "+Pr(750*e/100|0)+"px)"]))},Ja=n((function(e,t,r){var n,i,a=(n=l(Ci,ji,e)).$?{aN:C,aO:C,aP:ba,aD:ba,a5:!1,aJ:"[unknown]",bm:!1}:n.a,s=l(Wa,0,Ua(t)),o={cB:"",aN:a.aN,cC:0,aO:l(Ya,l(fi,(function(e){return e.dm}),Ga),a.aO),cH:{cG:0,cR:0,cS:0},cJ:xr,cK:s,aP:a.aP,cV:!1,cW:ci,c4:xr,db:r,dd:!0,df:xr,dh:a.bm?E(Ir(hi),l(li,"Stellerator has been updated to version "+a.aJ+".","Close")):E(xr,l(li,"","")),dK:xr,aD:a.aD,dP:!1,dQ:!1,a5:a.a5,aJ:a.aJ};return E(o,di(R([l(Ha,r,Za(s)),Xa(o.aD.cn),Na({cY:(i=function(e){if(e.$)return hi;var t=e.a;return{$:3,a:t}},l(da,i,ga(Tr))),d5:"doc/stellerator.md"})])))})),es=function(e){return{$:0,a:e}},ts=l(fi,Ua,l(fi,Fa((function(e){return{$:1,a:e}})),Wa(es(Za(0))))),rs=r((function(e,t){if(1===e.$)return t;var r=e.a;return t+":"+Pr(r)})),ns=n((function(e,t,r){return 1===t.$?r:T(r,T(e,t.a))})),is=function(e){return{$:18,a:e}},as=function(e){return{$:31,a:e}},ss=function(e){return{$:30,a:e}},os=Ye,us=function(e){return{$:3,a:e}},cs={$:1},ls=function(e){return{$:2,a:e}},hs=l(mi,(function(e){switch(e){case"stopped":return Sn(ci);case"paused":return Sn(cs);case"running":return l(kn,ls,Si(l(Ti,"frequency",Li)));case"error":return l(kn,us,l(Ti,"error",bi));default:return gi("invalid emulation state")}}),l(Ti,"state",bi)),ds=r((function(e,t){if(t.$){var r=t.a;return kr(r)}var n=t.a;return Tr(e(n))})),fs=rt("onEmulationStateChange_",xi),_s=r((function(e,t){return t.$?e:t.a})),ps=function(e){return fs(l(fi,Ci(hs),l(fi,ds(e),_s(hi))))},ms=l(mi,(function(e){switch(e){case"pause":return Sn(0);case"reset":return Sn(1);case"fullscreen":return Sn(2);default:return gi("invalid input driver event")}}),bi),gs=rt("onInputDriverEvent_",xi),bs=function(e){return gs(l(fi,Ci(ms),l(fi,ds(e),_s(hi))))},ys=n((function(e,t,r){return e(t(r))})),vs=rt("onNewCartridges_",xi),ws=rt("onMediaUpdate_",Fi(pi)),ks=ws,Es=ks(l(fi,$a,l(fi,Fa((function(e){return{$:2,a:e?0:1}})),Wa(hi)))),Ss=r((function(e,t){return{$:0,a:e,b:t}})),As=function(e){return{$:7,a:e}},Ts={$:28},Cs=Je("addCartridge_",(function(e){return null})),Is=Cs(0),xs=Je("blurCurrentElement_",(function(e){return null})),Rs=xs(0),Os=r((function(e,t){for(;;){if(!t.b)return!1;var r=t.a,n=t.b;if(e(r))return!0;e=e,t=n}})),Ms=function(e){return!e},Ps=r((function(e,t){return!l(Os,l(ys,Ms,e),t)})),Ds=function(e){return R(e.trim().split(/\s+/g))},Ns=function(e){var t=Ds(Ga(e.cB));return l(La,(function(e){return l(Ps,(function(t){return l(On,t,Ga(e.dm))}),t)}),e.aO)},Bs=Je("deleteAllCartridges_",(function(e){return null})),Ls=Bs(0),$s=Je("deleteCartridge_",Va),Fs=$s,js=r((function(e,t){for(;;){if(!t.b)return xr;var r=t.a,n=t.b;if(e(r))return Ir(r);e=e,t=n}})),Us=r((function(e,t){var r=function(n){if(n.b&&n.b.b){var i=n.a,a=n.b,s=a.a,o=a.b;return g(i.Q,t)?Ir(s):r(l(br,s,o))}return $a(e)};return r(T(e,T(e,e)))})),Hs=di(C),zs=Je("pauseEmulation_",(function(e){return null})),Ws=zs(0),Zs=r((function(e,t){var r=function(n){if(n.b&&n.b.b){var i=n.a,a=n.b,s=a.a,o=a.b;return g(s.Q,t)?Ir(i):r(l(br,s,o))}return $a(Vr(e))};return r(T(e,T(e,e)))})),Ys=Xt,Gs=Je("resetEmulation_",(function(e){return null})),Ks=Gs(0),Vs=Je("resumeEmulation_",(function(e){return null})),qs=Vs(0),Qs=Je("scrollIntoView_",(function(e){var t=e.a,r=e.b;return l(Ka,In,R([Va(t),Va(r)]))})),Xs=r((function(e,t){var r=function(){switch(e){case 0:return"start";case 1:return"center";case 2:return"end";default:return"nearest"}}();return Qs(E(r,t))})),Js=Je("scrollToTop_",(function(e){return null})),eo=Js(0),to=function(e){return h(fi,Ba((function(t){return l(js,(function(e){return g(e.Q,t)}),Ns(e))})),Fa((function(e){return e.Q})),e.cJ)},ro=Ae,no=Je("setLimitFramerate_",ro),io=no,ao=function(e){return Va(e?"amateur":"pro")},so=function(e){return h(Lr,r((function(e,t){var r=e.a,n=e.b;return h(Te,r,n,t)})),{},e)},oo=function(e){return so(R([E("difficultyP0",ao(e.cR)),E("difficultyP1",ao(e.cS)),E("color",(t=e.cG,Va(t?"bw":"color")))]));var t},uo=Je("startEmulation_",In),co=r((function(e,t){return uo(so(R([E("hash",Va(e)),E("switches",oo(t))])))})),lo=Je("stopEmulation_",(function(e){return null})),ho=lo(0),fo=Je("toggleFullscreen_",(function(e){return null})),_o=fo(0),po=function(e){return Va(1===e?"pcm":"waveform")},mo=function(e){return Va(e?"instruction":"cycle")},go=i((function(e,t,r,n){return l(Wa,n,l(Fa,(function(r){return l(br,E(e,t(r)),n)}),r))})),bo=function(e){switch(e){case 0:return Va("pal");case 1:return Va("ntsc");default:return Va("secam")}},yo=Ae,vo=Je("updateCartridge_",In),wo=function(e){return vo(so(d(go,"phosphorEmulation",ro,(t=e).dC,d(go,"audioEmulation",po,t.cy,d(go,"cpuEmulation",mo,t.cI,d(go,"firstVisibleLine",yo,t.bI,d(go,"rngSeed",yo,t.b9,R([E("hash",Va(t.Q)),E("name",Va(t.dm)),E("cartridgeType",Va(t.by)),E("tvMode",bo(t.cm)),E("emulatePaddles",ro(t.bE)),E("volume",yo(t.d9))]))))))));var t},ko=n((function(e,t,r){switch(t.$){case 0:var n=t.a;return S(r,{dm:n});case 1:var i=t.a,a=l(Wa,r.by,l(Fa,(function(e){return e.db}),l(js,(function(e){return g(e.db,i)}),e)));return S(r,{by:a});case 2:var s=t.a;return S(r,{cm:s});case 3:var o=t.a;return S(r,{bE:o});case 4:var u=t.a,c=l(Ba,(function(e){return e>=0?Ir(e):r.b9}),u);return S(r,{b9:c});case 5:var h=t.a,d=l(Ba,(function(e){return e>=0&&e<100?Ir(e):r.bI}),h);return S(r,{bI:d});case 6:var f=t.a;return S(r,{cI:f});case 7:f=t.a;return S(r,{cy:f});case 8:f=t.a;return S(r,{dC:f});default:var _=t.a;return S(r,{d9:_})}})),Eo=Je("updateConsoleSwitches_",In),So=l(fi,oo,Eo),Ao=function(e){return Va(1===e?"wide":"narrow")},To=Ae,Co=Je("updateSettings_",In),Io=l(fi,(function(e){return so(d(go,"uiMode",Ao,e.d2,d(go,"touchControls",ro,e.d1,R([E("cpuEmulation",mo(e.cI)),E("volume",yo(e.d9)),E("audioEmulation",po(e.cy)),E("smoothScaling",ro(e.dS)),E("phosphorEmulation",ro(e.dC)),E("gammaCorrection",To(e.c2)),E("videoSync",ro(e.d6)),E("leftHanded",ro(e.dc)),E("virtualJoystickSensitivity",yo(e.d8)),E("uiSize",yo(e.cn))]))))}),Co),xo=R([50,75,100,125,150]),Ro=n((function(e,t,r){switch(e.$){case 0:var n=e.a;return S(r,{cI:n});case 1:var i=e.a;return S(r,{d9:i});case 2:var a=e.a;return S(r,{cy:a});case 3:var s=e.a;return S(r,{dS:s});case 4:var o=e.a;return S(r,{dC:o});case 5:var u=e.a;return S(r,{c2:u});case 6:var c=e.a;return S(r,{d6:c});case 7:var h=e.a;return S(r,{d1:h});case 8:var d=e.a;return S(r,{dc:d});case 9:var f=e.a;return S(r,{d8:f});case 10:var _=e.a;return S(r,{d2:_});case 11:var p=e.a;return l(Wa,r,l(Fa,(function(e){return S(r,{cn:e})}),l(js,ln(p),xo)));default:return t}})),Oo=r((function(e,t){e:for(;;){var i=function(e){return E(e,Hs)},a=function(e){return E(S(t,{cJ:e}),l(Wa,Hs,l(Fa,Xs(3),e)))};switch(e.$){case 0:var s=e.a;return E(t,l(Ys,t.db,s));case 1:var o=e.a,u=function(){var e=E(o,to(t));if(e.a||e.b.$)return R([eo]);var r=e.b.a;return t.cK?R([l(Xs,1,r)]):C}(),c=(G=void 0,2!==(G=E(o,t.cV)).a||G.b?R([Ws]):R([qs]));return E($=S(t,{cK:o,dP:2===o,dQ:!1}),di(T(u,c)));case 2:var d=e.a,f=function(){var e=E(t.cK,to(t));if(e.a||e.b.$)return Hs;var r=e.b.a;return l(Xs,1,r)}();return E(S(t,{cC:0,df:Ir(d)}),f);case 5:var _=e.a;return E($=S(t,{cB:_}),eo);case 6:f=function(){var e=t.df;if(e.$||e.a)return l(Wa,Hs,l(Fa,Xs(3),t.cJ));e.a;return eo}();return E(S(t,{cB:""}),f);case 7:var p=e.a;return a(Ir(p));case 8:p=e.a;return a(l(Fa,(function(e){return e.Q}),l(Us,Ns(t),p)));case 9:p=e.a;return a(l(Fa,(function(e){return e.Q}),l(Zs,Ns(t),p)));case 10:return a(l(Fa,(function(e){return e.Q}),$a(Ns(t))));case 11:return a(l(Fa,(function(e){return e.Q}),$a(Vr(Ns(t)))));case 12:return i(S(t,{cJ:xr}));case 13:p=e.a;var m=g(t.cJ,Ir(p))?l(Fa,(function(e){return e.Q}),l(Us,Ns(t),p)):t.cJ;f=g(m,t.cJ)?Hs:l(Wa,Hs,l(Fa,Xs(3),m));return E(S(t,{cC:0,aO:l(La,(function(e){return!g(e.Q,p)}),t.aO),cJ:m}),di(R([f,Fs(p)])));case 14:return E(S(t,{aO:C,cJ:xr}),Ls);case 15:p=e.a;var b=e.b,y=l(qn,(function(e){return g(e.Q,p)?h(ko,t.aN,b,e):e}),t.aO);f=l(Wa,Hs,l(Fa,wo,l(js,l(ys,ln(p),(function(e){return e.Q})),y)));return E(S(t,{aO:y}),f);case 3:var v=e.a;return i(S(t,{c4:Ir(v)}));case 4:return i(S(t,{dQ:!t.dQ}));case 16:var w=e.a,k=(Y=void 0,1!==(Y=E(w,t.cJ)).a||Y.b.$?0:1);f=function(){var e,r,n,i=(e=k,r=t.cC,n=to(t),{a:e,b:r,c:n});t:for(;;){if(i.a){if(i.b)break t;return eo}if(1!==i.b||i.c.$)break t;var a=i.c.a;return l(Xs,1,a)}return Hs}();return E(S(t,{cC:k}),f);case 17:return E(t,Is);case 18:var A=e.a,I=S(t,{cB:"",aO:l(Ya,l(ys,Ga,(function(e){return e.dm})),(Z=h(Lr,r((function(e,t){return h(na,e.Q,e,t)})),Vi,T(t.aO,A)),h(yr,n((function(e,t,r){return l(br,t,r)})),C,Z)))});if(A.b){var x=A.a;e=As(x.Q),t=I;continue e}return i(I);case 19:var O=e.a,M=h(Ro,O,t.aP,t.aD),P=g(t.aD.cn,M.cn)?Hs:Xa(M.cn);return E(S(t,{aD:M}),di(R([Io(M),P])));case 20:var D=e.a,N=e.b,B=e.c;return i(S(t,{dh:E(Ir(B),l(Ss,D,N))}));case 21:D=e.a;var L=e.b;B=e.c;return i(S(t,{dh:E(Ir(B),l(li,D,L))}));case 22:return i(S(t,{dh:E(xr,t.dh.b)}));case 23:var $=S(t,{dh:E(xr,t.dh.b)});return l(Wa,i($),l(Fa,(function(e){return l(Oo,e,$)}),t.dh.a));case 24:p=e.a;return E(S(t,{cV:!1,dK:Ir(p)}),di(R([l(co,p,t.cH),l(Ys,t.db,Za(2))])));case 26:return E(t,ho);case 25:return E(t,Ws);case 27:return E(t,Ks);case 28:var F=!t.cV;$=S(t,{cV:F,dP:!1}),f=F?Ws:qs;switch(t.cW.$){case 1:case 2:return E($,f);default:return E(t,Hs)}case 30:var j=e.a;return i(S(t,{cW:j}));case 31:switch(e.a){case 0:e=Ts,t=t;continue e;case 1:return E(t,Ks);default:return E(t,_o)}case 29:var U=e.a;return E(S(t,{dd:U}),io(U));case 32:var H=e.a,z=S(t.cH,{cR:H});return E(S(t,{cH:z}),So(z));case 33:H=e.a,z=S(t.cH,{cS:H});return E(S(t,{cH:z}),So(z));case 34:var W=e.a;z=S(t.cH,{cG:W});return E(S(t,{cH:z}),So(z));case 35:return E(t,Rs);default:return i(t)}}var Z,Y,G})),Mo=n((function(e,t,r){return{$:0,a:e,b:t,c:r}})),Po=n((function(e,t,r){return{$:0,a:e,b:t,c:r}})),Do=function(e){return{$:0,a:e}},No=r((function(e,t){return{$:0,a:e,b:t}})),Bo=r((function(e,t){var r=l(No,e,C),n=h(Mo,r,C,xr);return R([Do(h(Po,n,C,t))])})),Lo=Bo("body"),$o=function(e){return{$:0,a:e}},Fo=r((function(e,t){return $o(e+":"+t)})),jo=r((function(e,t){return l(Fo,e,t.D)})),Uo=jo("font-size"),Ho=function(e){return!e.b},zo=r((function(e,t){var r=t.a,n=t.b;switch(e.$){case 0:var i=e.a.c;return Ho(i)?E(r,n):E(r,l(br,e,n));case 1:var a=e.b;return l(Ps,(function(e){var t=e.c;return Ho(t)}),a)?E(r,n):E(r,l(br,e,n));case 2:var s=e.b;return Ho(s)?E(r,n):E(r,l(br,e,n));case 3:return E(r,l(br,e,n));case 4:i=e.b;return Ho(i)?E(r,n):E(r,l(br,e,n));case 5:i=e.a;return Ho(i)?E(r,n):E(r,l(br,e,n));case 6:var o=e.a;return Bn(o.cN)?E(r,n):E(h(na,o.dm,o.cN,r),n);case 7:case 8:i=e.a;return Ho(i)?E(r,n):E(r,l(br,e,n));default:var u=e.a;return l(Ps,(function(e){var t=e.b;return Ho(t)}),u)?E(r,n):E(r,l(br,e,n))}})),Wo=function(e){return{$:6,a:e}},Zo=r((function(e,t){return t.b?h(Vn,br,t,e):e})),Yo=r((function(e,t){return l(Zo,l(qn,(function(e){var t=e.a,r=e.b;return Wo({cN:r,dm:t})}),vr(e)),t)})),Go=function(e){return l(Wa,"",l(Fa,(function(e){return'@charset "'+e+'"'}),e))},Ko=function(e){return"("+e.bH+l(Wa,"",l(Fa,Or(": "),e.D))+")"},Vo=function(e){var t=n((function(e,t,r){return e+" "+l(Dr," and ",l(br,function(e){switch(e){case 0:return"print";case 1:return"screen";default:return"speech"}}(t),l(qn,Ko,r)))}));switch(e.$){case 0:var r=e.a;return l(Dr," and ",l(qn,Ko,r));case 1:return h(t,"only",e.a,r=e.b);case 2:return h(t,"not",e.a,r=e.b);default:return e.a}},qo=r((function(e,t){return'@import "'+e+Vo(t)+'"'})),Qo=function(e){var t=e.a,r=e.b;return l(Dr,"\n",l(qn,qo(t),r))},Xo=function(e){return"@namespace "+e.a+'"'+e.b+'"'},Jo=function(e){return T("    ",e)},eu=function(e){return e+";"},tu=function(e){return l(Dr,"\n",l(qn,l(ys,Jo,eu),e))},ru=Z,nu=function(e){return"::"+e},iu=function(e){switch(e){case 0:return"+";case 1:return"~";case 2:return">";default:return""}},au=function(e){switch(e.$){case 0:return"."+e.a;case 1:return"#"+e.a;case 2:return":"+e.a;default:return"["+e.a+"]"}},su=function(e){switch(e.$){case 0:var t=e.a,r=e.b;return l(Dr,"",l(br,t,l(qn,au,r)));case 1:r=e.a;return Ho(r)?"*":l(Dr,"",l(qn,au,r));default:t=e.a,r=e.b;return l(Dr,"",l(br,t,l(qn,au,r)))}},ou=function(e){var t=e.a,r=e.b;return l(Dr," ",R([iu(t),su(r)]))},uu=function(e){var t=e.a,r=e.b,n=e.c,i=l(br,su(t),l(qn,ou,r)),a=l(Dr,"",R([l(Wa,"",l(Fa,nu,n))]));return l(ru,l(Dr," ",l(La,l(ys,Ms,Bn),i)),a)},cu=r((function(e,t){var r=t.a,n=t.b,i=t.c,a=l(Dr,", ",l(qn,uu,l(br,r,n)));return l(Dr,"",R([a," {\n",e,tu(i),"\n",e,"}"]))})),lu=function(e){switch(e.$){case 0:var t=e.a;return l(cu,"",t);case 1:var r=e.a,n=e.b;return"@media "+l(Dr,",\n",l(qn,Vo,r))+" {\n"+l(Dr,"\n\n",l(qn,l(ys,Jo,cu("    ")),n))+"\n}";case 2:case 3:case 4:case 5:return"TODO";case 6:return"@keyframes "+e.a.dm+" {\n"+e.a.cN+"\n}";case 7:case 8:default:return"TODO"}},hu=function(e){return h(Vn,Zo,C,e)},du=r((function(e,t){return hu(l(qn,e,t))})),fu=function(e){return{$:8,a:e}},_u=function(e){return{$:5,a:e}},pu=r((function(e,t){return{$:4,a:e,b:t}})),mu=n((function(e,t,r){return{$:0,a:e,b:t,c:r}})),gu=function(e){return{$:0,a:e}},bu=r((function(e,t){return{$:2,a:e,b:t}})),yu=function(e){return{$:7,a:e}},vu=r((function(e,t){return{$:1,a:e,b:t}})),wu=r((function(e,t){if(t.b){if(t.b.b){var r=t.a,n=t.b;return l(br,r,l(wu,e,n))}return R([e(t.a)])}return t})),ku=r((function(e,t){var r=t.a,n=t.b,i=t.c;return h(mu,r,n,T(i,R([e])))})),Eu=r((function(e,t){if(!t.b)return t;if(t.b.b){var r=t.a,n=t.b;return l(br,r,l(Eu,e,n))}switch(t.a.$){case 0:var i=t.a.a;return R([gu(l(ku,e,i))]);case 1:var a=t.a,s=a.a,o=a.b;return R([l(vu,s,l(wu,ku(e),o))]);default:return t}})),Su=r((function(e,t){if(t.b.b){var r=t.a,n=t.b,i=(o=t.c,l(qn,e,n)),a=e(r);return R([h(mu,r,n,o),h(mu,a,i,C)])}var s=t.a,o=t.c;return R([h(mu,s,C,o),h(mu,e(s),C,C)])})),Au=r((function(e,t){var r=t.a,n=t.b;return h(Mo,r,n,Ir(e))})),Tu=r((function(e,t){return l(Su,Au(e),t)})),Cu=r((function(e,t){return{$:2,a:e,b:t}})),Iu=function(e){return{$:1,a:e}},xu=r((function(e,t){switch(t.$){case 0:var r=t.a,n=t.b;return l(No,r,T(n,R([e])));case 1:n=t.a;return Iu(T(n,R([e])));default:var i=t.a;n=t.b;return l(Cu,i,T(n,R([e])))}})),Ru=r((function(e,t){if(t.b){if(t.b.b){var r=t.a,n=t.b;return l(br,r,l(Ru,e,n))}var i=t.a,a=i.a,s=i.b;return R([E(a,l(xu,e,s))])}return C})),Ou=r((function(e,t){if(t.b.b){var r=t.a,n=t.b;a=t.c;return h(Mo,r,l(Ru,e,n),a)}var i=t.a,a=t.c;return h(Mo,l(xu,e,i),C,a)})),Mu=r((function(e,t){return l(Su,Ou(e),t)})),Pu=function(e){e:for(;;){if(e.b){if(e.a.$){e=i=e.b;continue e}var t=e.a.a,r=t.a,n=t.b,i=e.b;return T(l(br,r,n),Pu(i))}return C}},Du=a((function(e,t,r,n,i){return{$:3,a:e,b:t,c:r,d:n,e:i}})),Nu=r((function(e,t){e:for(;;){if(!t.b)return t;if(t.b.b)break e;switch(t.a.$){case 0:var r=t.a.a;return l(qn,gu,e(r));case 1:if(t.a.b.b){if(t.a.b.b.b){var n=t.a,i=(_=n.a,n.b),a=i.a,s=i.b,o=l(Nu,e,R([l(vu,_,s)]));if(o.b&&1===o.a.$&&!o.b.b){var u=o.a,c=u.a,h=u.b;return R([l(vu,c,l(br,a,h))])}return o}var f=t.a,_=f.a;r=f.b.a;return R([l(vu,_,e(r))])}break e;case 2:var p=t.a,m=p.a,g=p.b;return R([l(bu,m,l(Nu,e,g))]);case 3:var b=t.a,y=b.a,v=b.b,w=b.c,k=b.d;r=b.e;return l(qn,d(Du,y,v,w,k),e(r));case 4:t.a;return t;case 5:case 6:case 7:case 8:default:return t}}a=t.a,s=t.b;return l(br,a,l(Nu,e,s))})),Bu=W,Lu=i((function(e,t,r,n){return{aa:n,Q:r,V:t,ak:e}})),$u=r((function(e,t){return(65535&t)*e+(((t>>>16)*e&65535)<<16)})),Fu=r((function(e,t){return t<<e|t>>>32-e})),ju=G,Uu=r((function(e,t){return l($u,5,l(Fu,13,e^l($u,461845907,l(Fu,15,l($u,3432918353,t)))))+3864292196})),Hu=r((function(e,t){var r=t.Q|(255&zr(e))<<t.ak;return 24===t.ak?{aa:t.aa+1,Q:0,V:l(Uu,t.V,r),ak:0}:{aa:t.aa+1,Q:r,V:t.V,ak:t.ak+8}})),zu=r((function(e,t){return r=h(ju,Hu,d(Lu,0,e,0,0),t),n=(r.Q?r.V^l($u,461845907,l(Fu,15,l($u,3432918353,r.Q))):r.V)^r.aa,i=l($u,2246822507,n^n>>>16),((a=l($u,3266489909,i^i>>>13))^a>>>16)>>>0;var r,n,i,a})),Wu=function(e){return O(e).join("")},Zu=$,Yu=function(e){e:for(;;)switch(e){case 0:return"0";case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"8";case 9:return"9";case 10:return"a";case 11:return"b";case 12:return"c";case 13:return"d";case 14:return"e";case 15:return"f";default:e=e;continue e}},Gu=r((function(e,t){for(;;){if(t<16)return l(br,Yu(t),e);e=l(br,Yu(l(Zu,16,t)),e),t=t/16|0}})),Ku=function(e){return Wu(e<0?l(br,"-",l(Gu,C,-e)):l(Gu,C,e))},Vu=function(e){e:for(;;){if(e.b){if(e.b.b){e=e.b;continue e}var t=e.a;return Ir(R([t]))}return xr}},qu=function(e){var t,r=function(e){if(e.b){var t=e.a,n=e.b;return l(br,t,r(n))}return C},n=r(e);return R([(t=n,{$:9,a:t})])},Qu=function(e){return R([e])},Xu=r((function(e,t){if(t.$)return t;var r=t.a;return l(vu,e,R([r]))})),Ju=n((function(e,t,r){for(;;){if(e<=0)return r;if(!t.b)return r;var n=t.a;e=e-1,t=t.b,r=l(br,n,r)}})),ec=r((function(e,t){return Vr(h(Ju,e,t,C))})),tc=n((function(e,t,r){if(t<=0)return C;var n=E(t,r);e:for(;;){t:for(;;){if(!n.b.b)return r;if(!n.b.b.b){if(1===n.a)break e;break t}switch(n.a){case 1:break e;case 2:var i=n.b;return R([s=i.a,d=i.b.a]);case 3:if(n.b.b.b.b){var a=n.b,s=a.a,o=a.b;return R([s,d=o.a,_=o.b.a])}break t;default:if(n.b.b.b.b&&n.b.b.b.b.b){var u=n.b,s=u.a,c=u.b,d=c.a,f=c.b,_=f.a,p=f.b,m=p.a,g=p.b;return l(br,s,l(br,d,l(br,_,l(br,m,e>1e3?l(ec,t-4,g):h(tc,e+1,t-4,g)))))}break t}}return r}return R([s=n.b.a])})),rc=r((function(e,t){return h(tc,0,e,t)})),nc=a((function(e,t,r,n,i){if(i.$)return i;var a=i.a;return f(Du,e,t,r,n,a)})),ic=r((function(e,t){switch(t.$){case 0:var r=t.a;return l(vu,e,R([r]));case 1:var n=t.a,i=t.b;return l(vu,T(e,n),i);case 2:var a=t.a,s=t.b;return l(bu,a,l(qn,ic(e),s));case 3:var o=t.a,u=t.b,c=t.c,h=t.d;r=t.e;return f(Du,o,u,c,h,r);case 4:case 5:case 6:case 7:case 8:default:return t}})),ac=function(e){return e},sc=i((function(e,t,r,n){var i=function(e){return l(Wa,C,function(e){if(e.b){e.a;var t=e.b;return Ir(t)}return xr}(e))},a=l(oc,t,l(Wa,C,Vu(n))),s=function(){var e=E($a(a),function(e){e:for(;;){if(e.b){if(e.b.b){e=e.b;continue e}var t=e.a;return Ir(t)}return xr}}(n));if(e.a.$||e.b.$)return n;var t=e.a.a,r=e.b.a;return T(l(rc,$r(n)-1,n),R([g(r,t)?r:t]))}();return T(s,T(i(l(Wa,C,l(Fa,(function(t){return hu(l(wu,oc(e),l(qn,Qu,l(Nu,r,t))))}),Vu(n)))),i(a)))})),oc=r((function(e,t){if(!e.b)return t;switch(e.a.$){case 0:var n=e.a.a,i=e.b;return l(oc,i,l(Eu,n,t));case 1:var a=e.a,s=a.a,o=a.b;i=e.b;return d(sc,o,i,Mu(s),t);case 2:var u=e.a,c=u.a,f=u.b,_=(i=e.b,r((function(e,t){var r=e.a,n=e.b,i=e.c,a=t.a,s=t.b,o=t.c;return h(Mo,r,T(n,l(br,E(c,a),s)),function(e){e:for(;;){if(e.b){var t=e.a,r=e.b;if(1===t.$){e=r;continue e}return t}return xr}}(R([o,i])))})));return hu(T(R([l(oc,i,t)]),l(qn,(function(e){switch(e.$){case 0:var r=e.a,n=r.a,i=r.b,a=r.c,s=l(du,(function(e){return l(qn,_(e),l(br,n,i))}),Pu(t)),o=function(){if(s.b){var e=s.a,t=s.b;return R([gu(h(mu,e,t,C))])}return C}();return l(oc,a,o);case 1:var u=e.a,c=e.b;return l(lc,u,c);case 2:var f=e.a,p=e.b;return l(hc,f,p);case 3:var m=e.a,g=e.b,b=e.c,y=e.d,v=e.e;return l(qn,d(nc,m,g,b,y),uc(v));case 4:f=e.a;var w=e.b;return R([l(pu,f,w)]);case 5:w=e.a;return R([_u(w)]);case 6:w=e.a;return R([yu(w)]);case 7:w=e.a;return R([fu(w)]);default:var k=e.a;return qu(k)}}),l(du,ac,f))));case 3:var p=e.a,m=p.a;o=p.b,i=e.b;return d(sc,o,i,Tu(m),t);case 5:var g=e.a.a,b=(i=e.b,function(e){return l(Bu,"_",Ku(l(zu,15739,e)))}(g)),y=l(oc,i,l(Eu,"animation-name:"+b,t));return l(Zo,y,R([Wo({cN:g,dm:b})]));case 4:var v=e.a,w=v.a,k=(o=v.b,i=e.b,function(){var e=Pu(t);if(e.b){var r=e.a,n=e.b;return l(qn,Xu(w),l(oc,o,Qu(gu(h(mu,r,n,C)))))}return C}());return T(l(oc,i,t),k);default:var S=e.a.a;i=e.b;return l(oc,T(S,i),t)}})),uc=function(e){var t=e.a,r=e.b,n=e.c;return l(oc,n,R([gu(h(mu,t,r,C))]))},cc=function(e){if(e.b){var t=e.a,r=e.b;return T(dc(t),cc(r))}return C},lc=r((function(e,t){return l(du,(function(t){return l(qn,ic(e),uc(t))}),t)})),hc=r((function(e,t){var r=cc(l(du,ac,t));return R([l(bu,e,r)])})),dc=function(e){switch(e.$){case 0:var t=e.a;return uc(t);case 1:var r=e.a,n=e.b;return l(lc,r,n);case 2:var i=e.a,a=e.b;return l(hc,i,a);case 3:var s=e.a,o=e.b,u=e.c,c=e.d;t=e.e;return l(qn,d(nc,s,o,u,c),uc(t));case 4:i=e.a;var h=e.b;return R([l(pu,i,h)]);case 5:h=e.a;return R([_u(h)]);case 6:h=e.a;return R([yu(h)]);case 7:h=e.a;return R([fu(h)]);default:var f=e.a;return qu(f)}},fc=function(e){return function(e){var t=e.bA,r=e.bN,n=e.bV,i=e.cO;return l(Dr,"\n\n",l(La,l(ys,Ms,Bn),R([Go(t),l(Dr,"\n",l(qn,Qo,r)),l(Dr,"\n",l(qn,Xo,n)),l(Dr,"\n\n",l(qn,lu,i))])))}(function(e){var t=e.bA,r=e.bN,n=e.bV,i=e.cO,a=h(Vn,zo,E(Vi,C),i),s=a.a,o=a.b;return{bA:t,cO:l(Yo,s,o),bN:r,bV:n}}((r=(t=e).bA,n=t.bN,i=t.bV,a=t.cd,{bA:r,cO:cc(l(du,ac,a)),bN:n,bV:i})));var t,r,n,i,a},_c=function(e){return l(Dr,"\n\n",l(qn,fc,e))},pc=function(e){return lt(bt(e))},mc=function(e){return{bA:xr,bN:C,bV:C,cd:e}},gc=ut,bc=function(e){return{$:4,a:e}},yc=bc,vc=function(e){return yc(h(pc,"style",C,Qu(gc(_c(Qu(mc(e)))))))},wc=jo("line-height"),kc=function(e){return l(Fo,"background-color",e.D)},Ec=n((function(e,t,r){return{$:0,a:e,b:t,c:r}})),Sc=r((function(e,t){var r=h(Mo,t,C,xr);return R([Do(h(Po,r,C,e))])})),Ac=r((function(e,t){return l(mt,function(e){return"innerHTML"==e||"formAction"==e?"data-"+e:e}(e),yt(t))})),Tc=function(e){var t=function(e){return Ho(e)?"unstyled":l(Bu,"_",Ku(l(zu,15739,_c(Qu(mc(Qu(l(Sc,e,Iu(C)))))))))}(e),r=l(Ac,"className",Va(t));return h(Ec,r,e,t)},Cc=jo("display"),Ic=n((function(e,t,r){return{$:0,a:e,b:t,c:r}})),xc=Ic,Rc=xc,Oc=Rc("div"),Mc={at:0,aB:0,a3:0,D:"fixed"},Pc=jo("height"),Dc=function(e){return{I:0,aS:0,S:0,B:0,dx:0,aV:0,K:e,ap:"",aI:0,D:Pr(e)}},Nc=jo("left"),Bc={Z:0,bu:0,r:0,a:0,g:0,c6:0,bP:0,bb:0,ai:0,R:0,B:0,c:0,b:0,be:0,aX:0,dD:0,z:0,a_:0,dM:0,am:0,X:0,v:0,e:0,d4:0,D:"none"},Lc=jo("position"),$c=ne,Fc=n((function(e,t,r){return{bn:0,bx:0,ad:0,o:0,ax:0,ag:0,J:0,ah:0,ai:0,R:0,S:0,B:0,K:r,an:0,ap:t,aI:e,D:T($c(r),t)}})),jc=l(Fc,0,"px"),Uc=r((function(e,t){return e+"("+l(Dr,", ",t)+")"})),Hc=i((function(e,t,r,n){return{as:n,au:r,cG:0,aw:t,aC:e,D:l(Uc,"rgba",T(l(qn,Pr,R([e,t,r])),R([$c(n)])))}})),zc=jo("top"),Wc=l(Fc,0,"vh"),Zc=l(Fc,0,"vw"),Yc=jo("width"),Gc=jo("z-index"),Kc=function(e){var t=e?C:R([Cc(Bc)]);return l(Oc,R([Tc(T(t,R([Lc(Mc),zc(jc(0)),Nc(jc(0)),Yc(Zc(100)),Pc(Wc(100)),Gc(Dc(100)),kc(d(Hc,0,0,0,.5))])))]),C)},Vc=jo("center"),qc={$:23},Qc={$:22},Xc=l(Fo,"display","flex"),Jc=l(Fc,0,"em"),el=jo("flex-end"),tl=function(e){return{$:6,a:e}},rl=r((function(e,t){return $o(e+":"+t)})),nl=n((function(e,t,r){e:for(;;)switch(r.$){case 0:var n=r.a,i=l(Wa,"",$a(l(Nr,":",n)));return l(rl,t,i);case 1:r.a;return l(rl,t,"elm-css-error-cannot-apply-"+e+"-with-inapplicable-Style-for-selector");case 2:r.a;return l(rl,t,"elm-css-error-cannot-apply-"+e+"-with-inapplicable-Style-for-combinator");case 3:r.a;return l(rl,t,"elm-css-error-cannot-apply-"+e+"-with-inapplicable-Style-for-pseudo-element setter");case 4:return l(rl,t,"elm-css-error-cannot-apply-"+e+"-with-inapplicable-Style-for-media-query");case 5:return l(rl,t,"elm-css-error-cannot-apply-"+e+"-with-inapplicable-Style-for-keyframes");default:if(r.a.b){if(r.a.b.b){var a=r.a,s=(a.a,a.b);e=e,t=t,r=tl(s);continue e}e=e,t=t,r=r.a.a;continue e}return l(rl,t,"elm-css-error-cannot-apply-"+e+"-with-empty-Style")}})),il=h(Fc,0,"",0),al=function(e){return h(nl,"justifyContent","justify-content",e(il))},sl=jo("padding-top"),ol=r((function(e,t){return h(Ec,l(Ac,e,t),C,"")})),ul=r((function(e,t){return l(ol,e,Va(t))})),cl=ul("className"),ll=cl("panel"),hl=Rc("button"),dl=pt,fl=r((function(e,t){return h(Ec,l(dl,e,t),C,"")})),_l=r((function(e,t){return l(fl,e,{$:3,a:t})})),pl=te,ml=function(e){return e.toLowerCase()},gl=r((function(e,t){return{$:1,a:e,b:t}})),bl=r((function(e,t){if(t.b){if(t.b.b){var r=t.a,n=t.b;return l(br,r,l(bl,e,n))}var i=t.a;return R([l(yl,e,i)])}return t})),yl=r((function(e,t){switch(t.$){case 0:var r=t.a;return $o(e(r));case 1:var n=t.a,i=t.b;return l(gl,n,l(bl,e,i));case 2:case 3:case 4:case 5:return t;default:var a=t.a;return tl(l(wu,yl(e),a))}})),vl=yl((function(e){return l(pl," !important",ml(e))?e:e+" !important"})),wl={g:0,D:"inline-block"},kl=function(e){return gl({$:2,a:e})},El=Rc("span"),Sl=function(e){return bc(gc(e))},Al=n((function(e,t,r){return l(El,R([Tc(R([Cc(wl),l(kl,"not(:last-child)",R([l(Fo,"margin-right","var(--cw)")]))])),l(_l,"click",Sn({dg:t,dG:!0,dV:!0}))]),R([l(hl,l(br,Tc(R([vl(l(Fo,"margin-right","var(--cw)"))])),e),R([Sl(r)]))]))})),Tl=r((function(e,t){return l(fl,e,{$:0,a:t})})),Cl=function(e){return l(Tl,"click",Sn(e))},Il=i((function(e,t,r,n){return e?l(hl,l(br,Cl(r),t),R([Sl(n)])):h(Al,t,r,n)})),xl=jo("space-between"),Rl=r((function(e,t){var r=(e.b.$,e.b.a);return l(Oc,R([ll,Tc(R([Yc(Zc(100)),l(Fo,"max-width","calc(80*var(--cw))")]))]),R([l(Oc,C,R([Sl(r)])),function(r){if(1===e.b.$){var n=e.b.b;return l(Oc,R([Tc(T(R([Xc,al(el)]),r))]),R([d(Il,t,R([Tc(R([l(Fo,"width","calc(8*var(--cw))")]))]),qc,n)]))}var i=e.b.b,a=i.a,s=i.b;return l(Oc,R([Tc(T(R([Xc,al(xl)]),r))]),R([d(Il,t,R([Tc(R([l(Fo,"width","calc(8*var(--cw))")]))]),Qc,s),d(Il,t,R([Tc(R([l(Fo,"width","calc(8*var(--cw))")]))]),qc,a)]))}(R([sl(Jc(2))]))]))})),Ol=l(Fc,0,"%"),Ml=l(ys,jo("transform"),(function(e){return Ho(e)?{D:"none"}:{D:l(Dr," ",l(qn,(function(e){return e.D}),e))}})),Pl=function(e){return Ml(R([e]))},Dl=r((function(e,t){return{aL:e,aQ:xr,bD:t,a4:xr}})),Nl=Dl(89),Bl=function(e){switch(e){case 0:return"background";case 1:return"background-color";case 2:return"background-position";case 3:return"background-size";case 4:return"border";case 5:return"border-bottom";case 6:return"border-bottom-color";case 7:return"border-bottom-left-radius";case 8:return"border-bottom-right-radius";case 9:return"border-bottom-width";case 10:return"border-color";case 11:return"border-left";case 12:return"border-left-color";case 13:return"border-left-width";case 14:return"border-radius";case 15:return"border-right";case 16:return"border-right-color";case 17:return"border-right-width";case 18:return"border-top";case 19:return"border-top-color";case 20:return"border-top-left-radius";case 21:return"border-top-right-radius";case 22:return"border-top-width";case 23:return"border-width";case 24:return"bottom";case 25:return"box-shadow";case 26:return"caret-color";case 27:return"clip";case 28:return"clip-path";case 29:return"color";case 30:return"column-count";case 31:return"column-gap";case 32:return"column-rule";case 33:return"column-rule-color";case 34:return"column-rule-width";case 35:return"column-width";case 36:return"columns";case 37:return"filter";case 38:return"flex";case 39:return"flex-basis";case 40:return"flex-grow";case 41:return"flex-shrink";case 42:return"font";case 43:return"font-size";case 44:return"font-size-adjust";case 45:return"font-stretch";case 46:return"font-variation-settings";case 47:return"font-weight";case 48:return"grid-column-gap";case 49:return"grid-gap";case 50:return"grid-row-gap";case 51:return"height";case 52:return"left";case 53:return"letter-spacing";case 54:return"line-height";case 55:return"margin";case 56:return"margin-bottom";case 57:return"margin-left";case 58:return"margin-right";case 59:return"margin-top";case 60:return"mask";case 61:return"mask-position";case 62:return"mask-size";case 63:return"max-height";case 64:return"max-width";case 65:return"min-height";case 66:return"min-width";case 67:return"object-position";case 68:return"offset";case 69:return"offset-anchor";case 70:return"offset-distance";case 71:return"offset-path";case 72:return"offset-rotate";case 73:return"opacity";case 74:return"order";case 75:return"outline";case 76:return"outline-color";case 77:return"outline-offset";case 78:return"outline-width";case 79:return"padding";case 80:return"padding-bottom";case 81:return"padding-left";case 82:return"padding-right";case 83:return"padding-top";case 84:return"right";case 85:return"tab-size";case 86:return"text-indent";case 87:return"text-shadow";case 88:return"top";case 89:return"transform";case 90:return"transform-origin";case 91:return"vertical-align";case 92:return"visibility";case 93:return"width";case 94:return"word-spacing";default:return"z-index"}},Ll=function(e){return $c(e)+"ms"},$l=function(e){switch(e.$){case 0:return"ease";case 1:return"linear";case 2:return"ease-in";case 3:return"ease-out";case 4:return"ease-in-out";case 5:return"step-start";case 6:return"step-end";default:var t=e.a,r=e.b,n=e.c,i=e.d;return"cubic-bezier("+$c(t)+" , "+$c(r)+" , "+$c(n)+" , "+$c(i)+")"}},Fl=function(e){var t=h(Pn,0,-1,h(Lr,r((function(e,t){var r=e.aL,n=e.bD,i=e.aQ,a=e.a4;return t+(l(Dr," ",R([Bl(r),Ll(n),l(Wa,"",l(Fa,Ll,i)),l(Wa,"",l(Fa,$l,a))]))+",")})),"",e));return l(Fo,"transition",t)},jl=function(e){var t=e.D;return{e:0,D:l(Uc,"translateY",R([t]))}},Ul=r((function(e,t){var r=!e.a.$;return R([Kc(r),l(Oc,R([Tc(R([Lc(Mc),zc(jc(0)),Nc(jc(0)),Yc(Zc(100)),Gc(Dc(150)),Xc,al(Vc),Fl(R([Nl(300)])),Pl(jl(Ol(r?0:-100)))]))]),R([l(Rl,e,t)]))])})),Hl=function(e){return"var(--"+function(){switch(e){case 0:return"black";case 1:return"blue";case 2:return"light-blue";case 3:return"green";case 4:return"light-green";case 5:return"cyan";case 6:return"light-cyan";case 9:return"magenta";case 10:return"light-magenta";case 7:return"red";case 8:return"light-red";case 11:return"dark-gray";case 12:return"light-gray";case 13:return"brown";case 14:return"yellow";default:return"white"}}()+")"},zl=function(e){return l(Fo,"background-color",Hl(e))},Wl=function(e){return l(Fo,"color",Hl(e))},Zl=a((function(e,t,r,n,i){return{cM:r,bQ:t,bY:e,aZ:n,a2:i}})),Yl=function(e){return l(Dr,"",e)},Gl=r((function(e,t){for(;;){if(e<=0)return t;if(!t.b)return t;t.a;e=e-1,t=t.b}})),Kl=Y,Vl=function(e){return e<0?-e:e},ql=K,Ql=r((function(e,t){var r=l(Os,(function(e){return"0"!==e&&"."!==e}),h(ql,br,C,t));return T(e&&r?"-":"",t)})),Xl=function(e){return e<0||1114111<e?"�":e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(Math.floor(e/1024)+55296,e%1024+56320))},Jl=function(e){var t=e.a,r=e.b;if("9"===t){var n=qr(r);if(1===n.$)return"01";var i=n.a;return l(Bu,"0",Jl(i))}var a=zr(t);return a>=48&&a<57?l(Bu,Xl(a+1),r):"0"},eh=function(e){return e===1/0||e===-1/0},th=z,rh=function(e){return l(Bu,e,"")},nh=n((function(e,t,r){return e<=0?r:h(nh,e>>1,T(t,t),1&e?T(r,t):r)})),ih=r((function(e,t){return h(nh,e,t,"")})),ah=n((function(e,t,r){return T(r,l(ih,e-Mn(r),rh(t)))})),sh=function(e){for(var t=e.length,r=new Array(t),n=0;n<t;){var i=e.charCodeAt(n);55296<=i&&i<=56319?(r[t-n]=e[n+1],r[t-++n]=e[n-1],n++):(r[t-n]=e[n],n++)}return r.join("")},oh=function(e){var t=l(Nr,".",e);return t.b?t.b.b?E(t.a,t.b.a):E(t.a,"0"):E("0","0")},uh=r((function(e,t){var r=t.a,n=t.b;return E(e(r),n)})),ch=n((function(e,t,r){if(eh(r)||th(r))return $c(r);var n=r<0,i=oh(function(e){var t=l(Nr,"e",$c(Vl(e)));if(t.b){if(t.b.b){var r=t.a,n=t.b.a,i=l(Wa,0,$n(l(zn,"+",n)?l(Dn,1,n):n)),a=oh(r),s=T(a.a,a.b),o=i<0?l(Wa,"0",l(Fa,(function(e){return e.a+"."+e.b}),l(Fa,uh(rh),qr(T(l(ih,Vl(i),"0"),s))))):h(ah,i+1,"0",s);return T(e<0?"-":"",o)}return T(e<0?"-":"",r=t.a)}return""}(Vl(r))),a=i.a,s=i.b,o=Mn(a)+t,u=T(l(ih,1-o,"0"),h(ah,o,"0",T(a,s))),c=Mn(u),d=l(fn,1,o),f=l(e,n,h(Pn,d,c,u)),_=h(Pn,0,d,u),p=f?sh(l(Wa,"1",l(Fa,Jl,qr(sh(_))))):_,m=Mn(p),g="0"===p?p:t<=0?T(p,l(ih,Vl(t),"0")):v(t,Mn(s))<0?h(Pn,0,m-t,p)+"."+h(Pn,m-t,m,p):T(a+".",h(ah,t,"0",s));return l(Ql,n,g)})),lh=ch(r((function(e,t){var r=qr(t);if(1===r.$)return!1;if("5"===r.a.a)return""!==r.a.b||!e;var n=r.a.a;return function(t){return t>53&&e||t>=53&&!e}(zr(n))}))),hh=r((function(e,t){return e<1?t:h(Pn,0,-e,t)})),dh=r((function(e,t){return e<1?"":h(Pn,-e,Mn(t),t)})),fh=r((function(e,t){var r,n=l(Nr,".",l(lh,e.cM,t)),i=function(e){var t=function(e){return Mn(e)>3?l(br,l(dh,3,e),t(l(hh,3,e))):R([e])};return Vr(t(e))}(l(Kl,Gr,l(Wa,"0",$a(n)))),a=l(Wa,"",$a(l(Gl,1,n))),s=f(Zl,t,i,a,"","");switch(l(Rr,(function(e){return"0"===e}),Yl(l(Zo,(r=s).bQ,Qu(r.cM))))?1:r.bY<0?2:0){case 2:return S(s,{aZ:e.$7,a2:e.dp});case 0:return S(s,{aZ:e.dE,a2:e.dF});default:return S(s,{aZ:e.eb,a2:e.ec})}})),_h=r((function(e,t){return""===t?"":T(e.cL,t)})),ph=function(e){return"0"!==l(dh,1,e)?e:ph(l(hh,1,e))},mh=n((function(e,t,r){return""===r||g(l(ih,e.cM,"0"),r)?"":t?l(_h,e,ph(r)):T(e.cL,r)})),gh=n((function(e,t,r){var n=function(){if(t.$)return _h(e);var r=t.a;return l(mh,e,r)}(),i=l(Dr,e.d_,r.bQ),a=n(r.cM);return Yl(R([r.aZ,i,a,r.a2]))})),bh=r((function(e,t){return h(gh,e,xr,l(fh,e,t))})),yh=c((function(e,t,r,n,i,a,s,o,u){return{cL:r,cM:e,$7:n,dp:i,dE:a,dF:s,d_:t,eb:o,ec:u}})),vh=function(e,t,r,n,i,a,s,o,u,c){return 9===e.a?e.f(t,r,n,i,a,s,o,u,c):e(t)(r)(n)(i)(a)(s)(o)(u)(c)}(yh,2,",",".","−","","","","",""),wh=function(e){var t=e.cW;switch(t.$){case 0:return"stopped";case 1:return"paused";case 2:if(1===t.a.$){t.a;return"running"}var r=t.a.a;return"running: "+l(bh,S(vh,{cM:2}),r/1e6)+" MHz";default:return"error"}},kh={$:4},Eh={aB:0,D:"absolute"},Sh=Rc("br"),Ah=r((function(e,t){return{cw:0,A:0,D:T($c(t),e)}})),Th=Ah("deg"),Ch={r:0,aj:0,D:"hidden",aK:0},Ih=jo("overflow"),xh=function(e){return"calc("+$c(e)+" * var(--cw))"},Rh=function(e){var t,r,n,i=e.dQ?R([Pl((t=Th(-90),r=t.D,{e:0,D:l(Uc,"rotate",R([r]))}))]):C;return l(Oc,R([Tc(R([Lc(Eh),zc(jc(0)),Nc(jc(0)),zl(11),Pc(Jc(2)),(n=4,l(Fo,"width",xh(n))),Ih(Ch)])),Cl(kh)]),R([l(Oc,R([Tc(T(R([Wl(15),Fl(R([Nl(300)]))]),i))]),R([Sl("░░░░"),l(Sh,C,C),Sl("░░░░")]))]))},Oh=jo("right"),Mh=function(e){return l(Ba,(function(t){return l(js,l(fi,(function(e){return e.Q}),ln(t)),e.aO)}),e.dK)},Ph=r((function(e,t){return l(Sc,t,l(Cu,e,C))})),Dh={a9:0,av:0,D:"row"},Nh=S(Dh,{D:"column"}),Bh=jo("flex-direction"),Lh=Rc("a"),$h=S({bp:0,l:0,at:0,br:0,Z:0,bs:0,_:0,F:0,r:0,aM:0,cG:0,a:0,g:0,ad:0,a9:0,av:0,aR:0,O:0,o:0,ae:0,d:0,I:0,aS:0,bR:0,bb:0,ax:0,ag:0,J:0,ah:0,ai:0,R:0,S:0,B:0,aT:0,c:0,b:0,be:0,dx:0,K:0,aX:0,aj:0,z:0,a3:0,am:0,W:0,an:0,ao:0,X:0,v:0,ap:"",aI:0,D:"initial",aK:0,N:0},{D:"inherit"}),Fh=jo("text-decoration"),jh=i((function(e,t,r,n){var i,a=g(t.cK,r)?Wl(15):Wl(0),s=g(t.cK,r)?zl(11):kc($h);return l(Lh,R([(i=Za(r),l(ul,"href",i)),Tc(T(R([l(Fo,"padding","0 var(--cw)"),vl(a),vl(s),vl(Fh(Bc)),Cc(wl)]),e))]),R([Sl(n)]))})),Uh=jo("padding-bottom"),Hh=function(e){return h(nl,"textAlign","text-align",e(il))},zh=function(e){var t,r,n=R([sl(Jc(1)),Uh(Jc(1)),Hh(Vc)]),i=e.dQ?C:R([Pl((t=Ol(-100),r=t.D,{e:0,D:l(Uc,"translateX",R([r]))}))]);return l(Oc,R([ll,Tc(T(R([Lc(Mc),Nc(jc(0)),zc(Jc(2)),Yc(Zc(70)),zl(12),Wl(0),Fl(R([Nl(300)])),Xc,Bh(Nh)]),i))]),R([d(jh,n,e,0,"Cartridges"),d(jh,n,e,1,"Settings"),d(jh,n,e,2,"Emulation"),d(jh,n,e,3,"Help")]))},Wh={ci:0,D:"ellipsis"},Zh=jo("flex-shrink"),Yh={av:0,aR:0,D:"nowrap",N:0},Gh=n((function(e,t,r){return l(Fo,e,l(Dr," ",R([t.D,r.D])))})),Kh=Gh("padding"),Vh=jo("text-overflow"),qh=jo("white-space"),Qh=i((function(e,t,r,n){var i=function(e){return l(Oc,R([Tc(R([Cc(wl),qh(Yh),l(Kh,Jc(0),Jc(1)),Zh(Dc(0))]))]),R([Sl(e)]))};return l(Oc,R([Tc(T(R([Xc,al(Vc),Ih(Ch)]),n))]),R([i(e),l(Oc,R([Tc(R([Cc(wl),qh(Yh),Ih(Ch),Vh(Wh)]))]),R([Sl(r)])),i(t)]))})),Xh=Rc("nav"),Jh=r((function(e,t){return 1===t?function(e){var t,r=l(Wa,"6502.ts / Stellerator",l(Fa,(function(e){return"Stellerator: "+e.dm}),Mh(e)));return R([l(Oc,R([Tc(R([Yc(Zc(100)),Pc(Jc(2)),Lc(Mc),zc(jc(0)),Nc(jc(0)),Gc(Dc(20)),Wl(12),zl(0)]))]),R([d(Qh,"----====≡≡≡≡","≡≡≡≡====----",r,C),l(Xh,R([Tc(R([zl(12),Wl(0)]))]),R([d(jh,C,e,0,"Cartridges"),d(jh,C,e,1,"Settings"),d(jh,C,e,2,"Emulation"),d(jh,C,e,3,"Help"),l(El,R([Tc(R([(t=Oh,h(nl,"float","float",t(il))),l(Fo,"margin-right","var(--cw)")]))]),R([Sl(wh(e))]))]))])),vc(R([l(Ph,"body",R([sl(Jc(2))]))]))])}(e):function(e){var t=l(Wa,"Stellerator",l(Fa,(function(e){return e.dm}),Mh(e)));return R([l(Oc,R([Tc(R([Yc(Zc(100)),Pc(Jc(2)),Lc(Mc),zc(jc(0)),Nc(jc(0)),Gc(Dc(20)),Wl(12),zl(0)]))]),R([d(Qh,"--==≡≡","≡≡==--",t,R([l(Fo,"padding-left","calc(4 * var(--cw))")])),l(Oc,R([Tc(R([zl(12),Wl(0),Hh(Oh)]))]),R([Sl(wh(e))])),Rh(e),zh(e)])),vc(R([l(Ph,"body",R([sl(Jc(2))]))]))])}(e)})),ed={$:17},td=kl("active"),rd=jo("bottom"),nd=l(hl,R([Tc(R([Hh(Vc),Lc(Mc),Oh(Jc(0)),rd(Jc(0)),l(Kh,Jc(1),Jc(.75)),vl(zl(2)),Wl(12),Gc(Dc(10)),td(R([vl(zl(1))]))])),Cl(ed)]),R([Sl("─┼─")])),id={a6:0,aM:0,D:"border-box"},ad=jo("box-sizing"),sd=function(e){return{$:16,a:e}},od=function(e){return{$:24,a:e}},ud=n((function(e,t,r){var n=l(qn,$r,R([e.aO,Ns(e)]));e:for(;;){if(n.b&&n.b.b&&!n.b.b.b){if(n.a){if(n.b.a)break e;n.b;return t("no cartridges match the search")}n.b;return t('start by clicking "Add new" to add a ROM image')}break e}return r})),cd=jo("cursor"),ld=ul("id"),hd=r((function(e,t){return l(Wa,!1,l(Fa,ln(e.Q),t))})),dd=i((function(e,t,r,n){return l(hd,e,t)?r:n})),fd=jo("margin-bottom"),_d=jo("margin-top"),pd=jo("min-height"),md=n((function(e,t,r){return{$:2,a:e,b:t,c:r}})),gd=function(e){return kl("nth-child("+e+")")},bd={a:0,D:"pointer"},yd=ul("type"),vd=function(e){var t=function(e){return l(Oc,R([ld(e.Q),Tc(R([ad(id),l(Fo,"padding","2.25em calc(2 * var(--cw))"),pd(Jc(5)),Hh(Vc),l(gd,"odd",R([zl(12)])),l(gd,"even",R([zl(5)])),Wl(0),cd(bd),l(Fo,"word-break","break-word")])),Cl(As(e.Q))]),R([Sl(e.dm)]))},n=function(t){var n=r((function(e,t){return h(Al,R([yd("button"),Tc(R([l(Fo,"width","calc(8 * var(--cw))")]))]),e,t)}));return l(Oc,R([ld(t.Q),ll,Tc(R([ad(id),pd(Jc(4)),Hh(Vc),zl(11),Wl(15),cd(bd),l(Fo,"word-break","break-word")]))]),R([Sl(t.dm),l(Oc,R([Tc(R([Xc,Hh(Nc),_d(Jc(1)),fd(Jc(-.5)),al(xl)]))]),R([l(n,sd(1),"Edit"),l(n,l(Wa,hi,l(Fa,od,to(e))),"Run")]))]))},i=R([h(md,"div",R([Tc(R([ad(id),Yc(Zc(100)),_d(Jc(3.5))]))]),l(qn,(function(r){return E(r.Q,f(dd,i=r,e.cJ,n,t,i));var i}),Ns(e)))]);return h(ud,e,(function(e){return R([l(Oc,R([Tc(R([Yc(Zc(100)),_d(Jc(3.5)),l(Fo,"padding","3em calc(2 * var(--cw)) 0 calc(2 * var(--cw))"),Hh(Vc),ad(id)]))]),R([Sl(e)]))])}),i)},wd={$:35},kd=function(e){return{$:5,a:e}},Ed={$:6},Sd=r((function(e,t){return l(ol,e,ro(t))})),Ad=Sd("disabled"),Td=jo("flex-grow"),Cd=Rc("label"),Id=function(e){return l(Fo,"margin-right",xh(e))},xd=r((function(e,t){return l(fl,e,{$:2,a:t})})),Rd=r((function(e,t){return h(Vn,Ti,t,e)})),Od=l(Rd,R(["target","value"]),bi),Md=function(e){return l(xd,"change",l(kn,l(fi,e,(function(e){return E(e,!0)})),Od))},Pd=function(e){return l(xd,"input",l(kn,l(fi,e,(function(e){return E(e,!0)})),Od))},Dd=ul("placeholder"),Nd=Rc("input"),Bd=_t,Ld=r((function(e,t){var r=e.b,n=e.c;return Ho(r)?t:h(na,n,r,t)})),$d=function(e){return e.a},Fd=function(e){return dt(bt(e))},jd=r((function(e,t){return l(ht,e,bt(t))})),Ud=function(e){return ct(bt(e))},Hd=r((function(e,t){var r=e.a,n=e.b,i=t.a,a=t.b;switch(n.$){case 4:var s=n.a;return E(l(br,E(r,s),i),a);case 0:var o=n.a,u=n.b,c=n.c,f=h(Lr,Ld,a,u),_=h(Lr,zd,E(C,f),c),p=_.a,m=_.b;s=h(pc,o,l(qn,$d,u),Vr(p));return E(l(br,E(r,s),i),m);case 1:var g=n.a,b=(o=n.b,u=n.c,c=n.d,f=h(Lr,Ld,a,u),h(Lr,zd,E(C,f),c));p=b.a,m=b.b,s=d(Ud,g,o,l(qn,$d,u),Vr(p));return E(l(br,E(r,s),i),m);case 2:o=n.a,u=n.b,c=n.c,f=h(Lr,Ld,a,u);var y=h(Lr,Hd,E(C,f),c);p=y.a,m=y.b,s=h(Fd,o,l(qn,$d,u),Vr(p));return E(l(br,E(r,s),i),m);default:g=n.a,o=n.b,u=n.c,c=n.d,f=h(Lr,Ld,a,u);var v=h(Lr,Hd,E(C,f),c);p=v.a,m=v.b,s=d(jd,g,o,l(qn,$d,u),Vr(p));return E(l(br,E(r,s),i),m)}})),zd=r((function(e,t){var r=t.a,n=t.b;switch(e.$){case 4:var i=e.a;return E(l(br,i,r),n);case 0:var a=e.a,s=e.b,o=e.c,u=h(Lr,Ld,n,s),c=h(Lr,zd,E(C,u),o),f=c.a,_=c.b;i=h(pc,a,l(qn,$d,s),Vr(f));return E(l(br,i,r),_);case 1:var p=e.a,m=(a=e.b,s=e.c,o=e.d,u=h(Lr,Ld,n,s),h(Lr,zd,E(C,u),o));f=m.a,_=m.b,i=d(Ud,p,a,l(qn,$d,s),Vr(f));return E(l(br,i,r),_);case 2:a=e.a,s=e.b,o=e.c,u=h(Lr,Ld,n,s);var g=h(Lr,Hd,E(C,u),o);f=g.a,_=g.b,i=h(Fd,a,l(qn,$d,s),Vr(f));return E(l(br,i,r),_);default:p=e.a,a=e.b,s=e.c,o=e.d,u=h(Lr,Ld,n,s);var b=h(Lr,Hd,E(C,u),o);f=b.a,_=b.b,i=d(jd,p,a,l(qn,$d,s),Vr(f));return E(l(br,i,r),_)}})),Wd=r((function(e,t){return f(ea,1,e,t,Ki,Ki)})),Zd=r((function(e,t){for(;;){if(!t.b)return e;var r=t.a,n=r.b,i=r.c,a=t.b;if(Bn(i))e=e,t=a;else e=Ir(E(i,n)),t=a}})),Yd=function(e){var t=l(Zd,xr,e);if(1===t.$)return Vi;var r=t.a,n=r.a,i=r.b;return l(Wd,n,i)},Gd=function(e){var t,r=e.a,n=e.b;return l(Sc,n,Iu(R([(t=r,{$:0,a:t})])))},Kd=function(e){return h(pc,"style",C,Qu(gc(_c(Qu(mc(l(qn,Gd,vr(e))))))))},Vd=n((function(e,t,r){var n=l(qn,$d,t),i=Yd(t),a=h(Lr,zd,E(C,i),r),s=a.a,o=a.b,u=Kd(o);return h(pc,e,n,l(br,u,Vr(s)))})),qd=r((function(e,t){for(;;){if(!t.b)return!1;var r=t.a.a,n=t.b;if(g(e,r))return!0;e=e,t=n}})),Qd=r((function(e,t){e:for(;;){if(t.b){var r=t.a.a,n=t.b,i="_"+r;if(l(qd,i,n)){e=i,t=n;continue e}return i}return e}})),Xd=r((function(e,t){return E(l(Qd,"_",t),Kd(e))})),Jd=n((function(e,t,r){var n=l(qn,$d,t),i=Yd(t),a=h(Lr,Hd,E(C,i),r),s=a.a,o=a.b,u=l(Xd,o,s);return h(Fd,e,n,l(br,u,Vr(s)))})),ef=i((function(e,t,r,n){var i=l(qn,$d,r),a=Yd(r),s=h(Lr,Hd,E(C,a),n),o=s.a,u=s.b,c=l(Xd,u,o);return d(jd,e,t,i,l(br,c,Vr(o)))})),tf=i((function(e,t,r,n){var i=l(qn,$d,r),a=Yd(r),s=h(Lr,zd,E(C,a),n),o=s.a,u=s.b,c=Kd(u);return d(Ud,e,t,i,l(br,c,Vr(o)))})),rf=function(e){switch(e.$){case 4:return e.a;case 0:var t=e.a,r=e.b,n=e.c;return h(Vd,t,r,n);case 1:var i=e.a;t=e.b,r=e.c,n=e.d;return d(tf,i,t,r,n);case 2:t=e.a,r=e.b,n=e.c;return h(Jd,t,r,n);default:i=e.a,t=e.b,r=e.c,n=e.d;return d(ef,i,t,r,n)}},nf=r((function(e,t){return rf(e(t))})),af=r((function(e,t){return bc(h(Bd,nf,e,t))})),sf=ul("value"),of=function(e){return af((function(t){return l(Nd,l(br,yd("text"),l(br,sf(t),e)),C)}))},uf=r((function(e,t){return l(Cd,R([Tc(T(R([Xc]),e)),ll]),R([l(of,R([yd("text"),Tc(R([Td(Dc(1)),Id(1)])),Dd("Search cartridges..."),Pd(kd),Md((function(e){return wd}))]),t.cB),h(Al,R([yd("button"),Ad(""===t.cB),Tc(R([fd(Jc(.5))]))]),Ed,"Clear")]))})),cf=function(e){return{$:13,a:e}},lf=function(e){return h(nl,"alignItems","align-items",e(il))},hf=r((function(e,t){return{$:2,a:e,b:t}})),df=hf(2),ff=jo("flex-start"),_f=Rc("form"),pf=Bo("label"),mf=function(e){return E(e,!0)},gf=function(e){return l(xd,"submit",l(kn,mf,Sn(e)))},bf=r((function(e,t){return l(gt,function(e){return/^(on|formAction$)/i.test(e)?"data-"+e:e}(e),yt(t))})),yf=r((function(e,t){return h(Ec,l(bf,e,t),C,"")})),vf=yf,wf=function(e){return l(vf,"data-label",e)},kf=r((function(e,t){return{$:15,a:e,b:t}})),Ef=function(e){return{$:7,a:e}},Sf=function(e){return{$:6,a:e}},Af=function(e){return{$:3,a:e}},Tf=function(e){return{$:5,a:e}},Cf=function(e){return{$:0,a:e}},If=function(e){return{$:8,a:e}},xf=function(e){return{$:4,a:e}},Rf=function(e){return{$:2,a:e}},Of=function(e){return{$:1,a:e}},Mf=function(e){return{$:9,a:e}},Pf={g:0,D:"block"},Df=Sd("checked"),Nf=l(Rd,R(["target","checked"]),pi),Bf=function(e){return l(xd,"change",l(kn,l(fi,e,(function(e){return E(e,!0)})),Nf))},Lf=r((function(e,t){return l(Nd,R([yd("checkbox"),Bf(e),Df(t)]),C)})),$f=ul("htmlFor"),Ff=jo("max-width"),jf=Rc("option"),Uf=Rc("select"),Hf=Sd("selected"),zf=i((function(e,t,r,n){var i;return l(El,R([cl("select-wrapper"),Tc(e)]),R([l(Uf,T(R([sf(n),(i=!1,l(ul,"autocomplete",i?"on":"off"))]),t),l(qn,(function(e){var t=e.a,r=e.b;return l(jf,R([sf(t),Hf(g(t,n))]),R([Sl(r)]))}),r))]))})),Wf=n((function(e,t,r){return d(zf,R([Ff(Ol(100))]),R([Tc(R([Ff(Ol(100))])),Md(t)]),e,r)})),Zf=i((function(e,t,r,n){return l(El,e,l(qn,(function(e){return l(Cd,R([Tc(R([cd(bd),qh(Yh),l(kl,"not(:first-of-type)",R([l(Fo,"margin-left","calc(2 * var(--cw))")]))]))]),R([Sl(e.b),l(Nd,R([yd("radio"),Tc(R([l(Fo,"margin-left","var(--cw)")])),Df(g(n,e.a)),h(ys,l(ys,xd("change"),kn((function(e){return E(e,!0)}))),mi((function(t){return t?Sn(r(e.a)):gi("")})),Nf)]),C)]))}),t))})),Yf={g:0,D:"inline-flex"},Gf=ul("max"),Kf=ul("min"),Vf=function(e){return l(yf,"tabIndex",Pr(e))},qf=a((function(e,t,r,n,i){var a=t.a,s=t.b,o=function(e){return v(e,a)>-1&&v(e,s)<1?Ir(e):xr},u=l(Tl,"keydown",l(mi,(function(e){switch(e){case"ArrowLeft":return Sn(r(o(i-1)));case"ArrowRight":return Sn(r(o(i+1)));default:return gi("")}}),l(Ti,"key",bi)));return l(El,R([Tc(T(e,R([Cc(Yf)]))),Vf(0),u]),R([l(Nd,R([Tc(R([Td(Dc(1))])),yd("range"),Kf(Pr(a)),Gf(Pr(s)),sf(Pr(i)),Pd(l(fi,$n,l(fi,Ba(o),r)))]),C),l(El,R([Tc(R([Cc(Pf),l(Fo,"padding-left","calc(2 * var(--cw))"),l(Fo,"min-width","calc(4 * var(--cw))"),Td(Dc(0)),Zh(Dc(0))]))]),R([Sl(n(i))]))]))})),Qf=r((function(e,t){var n,i,a=r((function(e,t){return l(Cd,R([$f("nothing")]),R([l(El,R([Tc(R([Cc(wl),l(Fo,"width","calc(20 * var(--cw))")]))]),R([Sl(e)])),t]))})),s=r((function(e,t){return l(Cd,R([Tc(R([cd(bd)]))]),R([l(El,R([Tc(R([Cc(wl),l(Fo,"width","calc(20 * var(--cw))")]))]),R([Sl(e)])),t]))})),o=r((function(e,t){return l(Cd,R([Tc(R([Cc(Pf),Yc(Ol(100))]))]),R([Sl(e),l(Sh,C,C),t]))})),u=function(e){return l(fi,e,kf(t.Q))},c=r((function(e,t){return l(of,R([yd("text"),Dd("Auto"),Tc(R([l(Fo,"width","calc(10 * var(--cw))")])),Pd((function(t){return""===t?l(u,e,xr):l(Wa,hi,l(Fa,l(ys,u(e),Ir),$n(t)))}))]),h(ys,Wa(""),Fa(Pr),t))}));return R([l(o,"Cartridge name:",l(of,R([yd("text"),Tc(R([Yc(Ol(100))])),Pd(u(Cf))]),t.dm)),l(o,"Cartridge type:",h(Wf,l(qn,(function(e){return E(e.db,e.cQ)}),e.aN),u(Of),t.by)),l(a,"TV mode:",d(Zf,C,R([E(0,"PAL"),E(1,"NTSC"),E(2,"SECAM")]),u(Rf),t.cm)),l(s,"Emulate paddles:",l(Lf,u(Af),t.bE)),l(a,"RNG seed:",l(c,xf,t.b9)),l(a,"First visible line:",l(c,Tf,t.bI)),l(a,"CPU emulation:",d(Zf,C,R([E(xr,"Default"),E(Ir(1),"Instruction"),E(Ir(0),"Cycle")]),u(Sf),t.cI)),l(a,"Audio emulation:",d(Zf,C,R([E(xr,"Default"),E(Ir(1),"PCM"),E(Ir(0),"Waveform")]),u(Ef),t.cy)),l(a,"Phosphor emulation:",d(Zf,C,R([E(xr,"Default"),E(Ir(!0),"On"),E(Ir(!1),"Off")]),u(If),t.dC)),l(a,"Volume:",(n=e.df,i=n.$||n.a?"calc(40 * var(--cw))":(n.a,"calc(100vw - 10 * var(--cw))"),f(qf,R([l(Fo,"width",i)]),E(0,100),l(fi,Fa(u(Mf)),Wa(hi)),(function(e){return Pr(e)+"%"}),t.d9)))])})),Xf=r((function(e,t){var n,i=r((function(e,t){return h(Al,R([yd("button"),Tc(R([l(Fo,"width","calc(10 * var(--cw))")]))]),e,t)}));return R([l(_f,R([Tc(R([Uh(Jc(.5)),Xc,al(xl),Lc(Mc),zc(Jc(2)),Nc(jc(0)),Gc(Dc(10)),Yc(Zc(100)),ad(id)])),gf(hi),ll]),R([l(i,sd(0),"Back"),l(i,cf(t.Q),"Delete")])),(n=l(Qf,e,t),l(_f,R([ll,wf("Settings:"),gf(hi),Tc(R([Xc,Bh(Nh),lf(ff),df(R([pf(R([l(kl,"not(:first-of-type)",R([sl(Jc(1))]))]))])),_d(Jc(4)),sl(Jc(2))]))]),n))])})),Jf=function(e){var t=E(e.cC,l(Ba,(function(t){return l(js,l(ys,ln(t),(function(e){return e.Q})),e.aO)}),e.cJ));if(1!==t.a||t.b.$)return function(e){return l(br,l(uf,R([Yc(Zc(100)),Lc(Mc),zc(Jc(2)),Nc(jc(0)),ad(id),Gc(Dc(10))]),e),l(br,nd,l(br,vc(R([l(Ph,"body",R([Uh(Jc(5))]))])),vd(e))))}(e);var r=t.b.a;return l(Xf,e,r)},e_=jo("border-style"),t_=function(e){return e?"-":"+"},r_=n((function(e,t,r){var n=function(e){return l(zn,"calc(",e.D)?l(Dn,4,e.D):e.D},i=l(Dr," ",R([n(e),t_(t),n(r)]));return{bx:0,ad:0,o:0,ax:0,ag:0,J:0,ah:0,ai:0,R:0,S:0,B:0,an:0,D:l(Uc,"calc",R([i]))}})),n_=jo("overflow-y"),i_={at:0,bu:0,bP:0,aj:0,dN:0,D:"scroll"},a_=jo("stretch"),s_=function(e){var t=l(Oc,R([ll,Tc(R([Xc,Td(Dc(1)),lf(a_),n_(Ch)]))]),R([h(md,"div",R([Tc(R([Td(Dc(1)),n_(i_),l(Fo,"-webkit-overflow-scrolling","touch")]))]),l(qn,(function(t){return E(t.Q,(n=l(dd,r=t,e.cJ),l(Oc,R([ld(r.Q),Tc(R([l(gd,"odd",R([zl(l(n,11,5))])),l(gd,"even",R([zl(l(n,11,12))])),l(n,Wl(15),Wl(0)),l(Fo,"padding-left","var(--cw)"),cd(bd),l(Fo,"word-break","break-word")])),Cl(As(r.Q))]),R([Sl(" * "+r.dm)]))));var r,n}),Ns(e)))]));return h(ud,e,(function(e){return l(Oc,R([ll,Tc(R([Td(Dc(1)),Xc,Bh(Nh),Hh(Vc),al(Vc)]))]),R([Sl(e)]))}),t)},o_=n((function(e,t,r){return to(e).$?r:t})),u_=function(e){var t=l(Oc,R([Tc(R([Xc]))]),R([l(of,R([yd("text"),Tc(R([Td(Dc(1)),Id(1)])),Dd("Search cartridges..."),Pd(kd)]),e.cB),l(hl,R([yd("button"),Ad(""===e.cB),Cl(Ed)]),R([Sl("Clear")]))])),n=r((function(e,t){return l(hl,T(R([yd("button"),Tc(R([l(Fo,"width","calc(10 * var(--cw))")]))]),e),t)}));return l(_f,R([ll,gf(hi)]),R([t,l(Oc,C,R([l(n,R([Cl(ed)]),R([Sl("Add new")])),l(n,R([Ad(h(o_,e,!1,!0)),Cl(l(Wa,hi,l(Fa,cf,e.cJ)))]),R([Sl("Delete")])),l(n,R([Ad(h(o_,e,!1,!0)),Cl(l(Wa,hi,l(Fa,od,to(e))))]),R([Sl("Run")]))]))]))},c_=jo("flex-basis"),l_={$:10},h_={$:11},d_=function(e){return{$:8,a:e}},f_=function(e){return{$:9,a:e}},__=r((function(e,t){e:for(;;){if(t.a){if("d"===t.b)return l(Wa,hi,l(Fa,cf,to(e)));break e}switch(t.b){case"ArrowUp":return l(Wa,h_,l(Fa,f_,e.cJ));case"ArrowDown":return l(Wa,l_,l(Fa,d_,e.cJ));case"Enter":return l(Wa,hi,l(Fa,od,to(e)));default:break e}}return hi})),p_=r((function(e,t){return E(e,t)})),m_=jo("outline-style"),g_=jo("overflow-x"),b_=r((function(e,t){return l(Oc,R([ll,wf("Settings:"),Tc(T(R([Xc,g_(Ch)]),T(h(o_,e,R([lf(a_)]),R([lf(Vc),al(Vc)])),t)))]),R([l(Wa,Sl("no cartridge selected"),l(Fa,l(ys,(function(e){return l(_f,R([Tc(R([Xc,Bh(Nh),lf(ff),sl(Jc(1)),n_(i_),l(Fo,"-webkit-overflow-scrolling","touch"),Td(Dc(1)),df(R([pf(R([l(kl,"not(:first-of-type)",R([sl(Jc(1))]))]))]))])),gf(hi)]),e)}),Qf(e)),l(Ba,(function(t){return l(js,(function(e){return g(t,e.Q)}),Ns(e))}),e.cJ)))]))})),y_=r((function(e,t){return 1===t?function(e){return R([l(Oc,R([Tc(R([Pc(h(r_,Wc(100),1,Jc(2))),Xc,lf(a_),sl(Jc(1)),ad(id),vl(e_(Bc)),vl(m_(Bc))])),Vf(0),(t=__(e),l(xd,"keydown",l(kn,(function(e){return 36===e.$?E(e,!1):E(e,!0)}),l(kn,t,h(En,p_,l(Ti,"ctrlKey",pi),l(Ti,"key",bi))))))]),R([l(Oc,R([Tc(R([ad(id),Td(Dc(1)),c_(jc(0)),Xc,Bh(Nh)]))]),R([u_(e),s_(e)])),l(b_,e,R([ad(id),Td(Dc(1)),c_(jc(0))]))]))]);var t}(e):Jf(e)})),v_=function(e){return{$:0,a:e}},w_=function(e){return{$:34,a:e}},k_=function(e){return{$:32,a:e}},E_=function(e){return{$:33,a:e}},S_=function(e){return{$:29,a:e}},A_={$:27},T_=function(e){var t=function(){switch(e.cW.$){case 1:case 2:return!0;default:return!1}}(),n=r((function(e,t){return l(Cd,R([$f("nothing"),Tc(R([Cc(Pf)]))]),R([l(El,R([Tc(R([Cc(wl),l(Fo,"width","calc(20 * var(--cw))")]))]),R([Sl(e)])),t]))})),i=r((function(e,t){return l(Cd,R([Tc(R([cd(bd)]))]),R([l(El,R([Tc(R([Cc(wl),l(Fo,"width","calc(20 * var(--cw))")]))]),R([Sl(e)])),t]))}));return R([l(n,"Difficulty left:",d(Zf,C,R([E(0,"A/Pro:"),E(1,"B/Amateur:")]),k_,e.cH.cR)),l(n,"Difficulty right:",d(Zf,C,R([E(0,"A/Pro:"),E(1,"B/Amateur:")]),E_,e.cH.cS)),l(n,"TV mode:",d(Zf,C,R([E(0,"Color:"),E(1,"BW:")]),w_,e.cH.cG)),l(i,"Limit framerate:",l(Lf,S_,e.dd)),l(Sh,C,C),l(Sh,C,C),l(hl,R([Cl(Ts),Ad(!t),Tc(R([l(Fo,"min-width","calc(15 * var(--cw))")]))]),R([Sl(e.cV?"Resume":"Pause")])),l(hl,R([Cl(A_),Ad(!t),Tc(R([l(Fo,"min-width","calc(15 * var(--cw))")]))]),R([Sl("Hard Reset")]))])},C_=ul("alt"),I_=Rc("h1"),x_=Rc("img"),R_=Rc("li"),O_=Rc("p"),M_=function(e){return l(ul,"src",e)},P_=function(e){return l(Wa,e.a5,e.aD.d1)},D_=Rc("ul"),N_=function(e){var t=function(e){return l(R_,C,R([Sl(e)]))},r=R([l(I_,C,R([Sl("Keyboard controls")])),l(O_,C,R([l(D_,C,R([t("LEFT JOYSTICK: wasd / arrows + v / space"),t("RIGHT JOYSTICK: ijkl + b"),t("RESET: shift-enter"),t("SELECT: shifht-space"),t("TOGGLE FULLSCREEN: enter"),t("HARD RESET: shift-r"),t("PAUSE: p")]))]))]),n=e.aD.dc?"doc/images/2600_touch_lh.jpg":"doc/images/2600_touch.jpg",i=e.aD.dc?"doc/images/2600_touch_alt_lh.jpg":"doc/images/2600_touch_alt.jpg",a=R([l(I_,C,R([Sl("Touch controls")])),l(O_,C,R([l(x_,R([M_(n),C_("touch controls"),Tc(R([Cc(Pf),Yc(Ol(100)),Ff(Jc(20))]))]),C),l(x_,R([M_(i),C_("touch controls, alt mode"),Tc(R([Cc(Pf),_d(Jc(1)),Yc(Ol(100)),Ff(Jc(20))]))]),C)]))]);return P_(e)?T(a,r):r},B_=Rc("canvas"),L_=jo("touch-action"),$_=jo("visibility"),F_={aj:0,z:0,D:"visible",aK:0},j_=function(e){var t=function(){var t=E(e.cW,e.dP);e:for(;;)switch(t.a.$){case 2:return $_(F_);case 1:if(t.b)break e;return $_(F_);default:break e}return $_(Ch)}();return l(B_,R([ld("stellerator-canvas"),Tc(R([Yc(Ol(100)),Pc(Ol(100)),Lc(Eh),Nc(jc(0)),zc(jc(0)),Gc(Dc(10)),t,L_(Bc)]))]),C)},U_=jo("max-height"),H_=r((function(e,t){var r=t.D;return{bH:e,D:Ir(r)}})),z_=function(e){var t=function(){var t=E(e.cW,e.dP);e:for(;;)switch(t.a.$){case 2:return $_(Ch);case 1:if(t.b)break e;return $_(Ch);default:break e}return $_(F_)}(),r=3===e.cW.$?zl(7):zl(3),n=P_(e)?R([Sl("emulation paused"),l(Sh,C,C),Sl("tap to resume")]):R([Sl("emulation paused")]),i=function(){var t=e.cW;switch(t.$){case 0:return R([Sl("emulation stopped")]);case 1:return n;case 3:var r=t.a;return R([Sl("ERROR: "+r)]);default:return C}}();return l(Oc,R([Tc(R([Pc(Ol(100)),Yc(Ol(100)),Xc,al(Vc),lf(Vc),Hh(Vc),Lc(Eh),Nc(jc(0)),zc(jc(0)),Gc(Dc(10)),Wl(15),t,r])),Cl(g(e.cW,cs)&&P_(e)?Ts:hi)]),i)},W_={aB:0,D:"relative"},Z_=r((function(e,t){return{$:4,a:e,b:t}})),Y_=hf(3),G_=yc,K_=i((function(e,t,r,n){return{c8:t,de:e,dx:r,dW:n}})),V_=l(sr,{cD:!1,dl:!1},"(\\[.*?\\])\\((?!/|https?://)(.*?)\\)"),q_=or(1/0),Q_=r((function(e,t){var r=function(t){var r=t.dW;if(!r.b||r.a.$||!r.b.b||r.b.a.$||r.b.b.b)return"";var n=r.a.a,i=r.b.a.a;return n+"("+e+i+")"},n=l(Fa,(function(e){return h(q_,e,r,t)}),V_);return l(Wa,t,n)})),X_=ur({bC:xr,c3:Ir({cA:!1,dY:!1}),dL:!0,dR:!1}),J_=function(e){var t=e.c4;if(t.$)return Sl("loading...");var r=t.a;return l(Oc,R([cl("helppage"),Tc(R([l(Fo,"padding","0 var(--cw)"),sl(Jc(1)),Y_(R([l(Ph,"img",R([l(Fo,"max-width","calc(100vw - 2 * var(--cw))")]))]))]))]),R([G_(l(X_,C,l(Q_,"doc/",r))),l(Oc,C,R([Sl("=== version "+e.aJ+" ===")]))]))},ep=function(e){return{$:19,a:e}},tp=function(e){return{$:2,a:e}},rp=function(e){return{$:0,a:e}},np=function(e){return{$:5,a:e}},ip=function(e){return{$:8,a:e}},ap=function(e){return{$:4,a:e}},sp={$:12},op=function(e){return{$:3,a:e}},up=function(e){return{$:7,a:e}},cp=function(e){return{$:10,a:e}},lp=function(e){return{$:11,a:e}},hp=function(e){return{$:6,a:e}},dp=function(e){return{$:9,a:e}},fp=function(e){return{$:1,a:e}},_p={$:14},pp=n((function(e,t,r){return{$:20,a:e,b:t,c:r}})),mp=U,gp=n((function(e,t,i){var a,s=r((function(e,t){return l(Cd,R([$f("nothing"),Tc(R([Cc(Pf)]))]),R([l(El,R([Tc(R([Cc(wl),l(Fo,"width","calc(20 * var(--cw))")]))]),R([Sl(e)])),t]))})),o=n((function(e,t,r){return l(Cd,R([Tc(R([cd(bd),Cc(Pf)]))]),R([l(El,R([Tc(R([Cc(wl),l(Fo,"width","calc(20 * var(--cw))")]))]),R([Sl(e)])),l(Lf,t,r)]))})),u=function(e){return l(I_,R([Tc(R([Wl(5)]))]),R([Sl(e)]))};return R([u("General"),l(O_,C,R([l(s,"CPU emulation:",d(Zf,C,R([E(1,"Instruction"),E(0,"Cycle")]),l(ys,ep,rp),e.cI))])),u("Audio"),l(O_,C,R([l(s,"Audio emulation:",d(Zf,C,R([E(1,"PCM"),E(0,"Waveform")]),l(ys,ep,tp),e.cy)),l(s,"Volume:",f(qf,R([l(Fo,"width","calc(40*var(--cw))"),l(Fo,"max-width","calc(100vw - 4*var(--cw))")]),E(0,100),l(fi,Fa(l(ys,ep,fp)),Wa(hi)),(function(e){return Pr(e)+"%"}),e.d9))])),u("Display"),l(O_,C,R([h(o,"Smooth scaling:",l(ys,ep,op),e.dS),h(o,"Phosphor emulation:",l(ys,ep,ap),e.dC),h(o,"Sync video:",l(ys,ep,hp),e.d6),l(s,"Gamma correction:",f(qf,R([l(Fo,"width","calc(40*var(--cw))"),l(Fo,"max-width","calc(100vw - 4*var(--cw))")]),E(0,50),l(fi,Fa(l(ys,l(ys,l(ys,ep,np),(function(e){return e/10})),an)),Wa(hi)),(function(e){return $c(e/10)}),mp(10*e.c2)))])),u("Controls"),l(O_,C,R([l(s,"Touch controls:",d(Zf,C,R([E(xr,"Auto"),E(Ir(!0),"On"),E(Ir(!1),"Off")]),l(ys,ep,up),e.d1)),h(o,"Left handed mode:",l(ys,ep,ip),e.dc),l(s,"Touch joystick sensitivity:",f(qf,R([l(Fo,"width","calc(40*var(--cw))"),l(Fo,"max-width","calc(100vw - 4*var(--cw))")]),E(0,100),l(fi,Fa(l(ys,ep,dp)),Wa(hi)),Pr,e.d8))])),u("Ui"),l(O_,C,R([l(s,"Display mode:",d(Zf,C,R([E(xr,"Auto"),E(Ir(1),"Wide"),E(Ir(0),"Narrow")]),l(ys,ep,cp),e.d2)),l(s,"Size:",h(Wf,l(qn,l(ys,(function(e){return E(e,e+"%")}),Pr),xo),l(fi,$n,l(fi,Fa(l(ys,ep,lp)),Wa(hi))),Pr(e.cn)))])),u("Reset"),l(O_,C,(a=l(Fo,"width","calc(25*var(--cw))"),R([d(Il,t,R([Tc(R([a]))]),ep(sp),"Reset to defaults"),d(Il,t,R([Tc(R([a])),Ad(!i)]),h(pp,"Do you really want to delete all cartridges?",E("OK","Cancel"),_p),"Delete all cartridges")])))])})),bp=r((function(e,t){return R([l(Oc,R([Tc(R([l(Fo,"padding","1rem var(--cw) 1rem var(--cw)"),Yc(Zc(100)),ad(id),Y_(R([pf(R([l(kl,"not(:first-of-type)",R([sl(Jc(1))]))]))]))]))]),h(gp,e.aD,t,$r(e.aO)>0))])})),yp=function(e){var t,r=function(e){var t=e.aD.d2;if(t.$)return e.df;var r=t.a;return Ir(r)}(e),n=l(Wa,C,l(Fa,Jh(e),r)),i=(t=jc(e.aD.cn/100*18),vc(R([Lo(R([Uo(t),wc(t)]))]))),a=function(){var t=E(e.cK,r);if(t.b.$)return C;switch(t.a){case 0:var n=t.b.a;return l(y_,e,n);case 1:n=t.b.a;return l(bp,e,n);case 2:return function(e){var t,r,n=Z_(R([v_(R([(t=jc(900*e.aD.cn/100|0),l(H_,"max-width",t))]))]));return R([l(Oc,R([Tc(R([Yc(Zc(100)),l(Fo,"height","calc(100vh - 3em)"),_d(Jc(1)),Xc,ad(id),lf(a_),Bh(Dh),n(R([Cc(Pf)]))]))]),R([l(Oc,R([ll,Tc(R([Xc,lf(a_),Td(Dc(1)),n(R([l(Fo,"height","calc(70vh - 4em)"),U_(jc(600))]))]))]),R([l(Oc,R([Tc(R([Td(Dc(1)),l(Fo,"padding","1em calc(2 * var(--cw))"),zl(0),Lc(W_)]))]),R([j_(e),z_(e)]))])),l(Oc,R([Tc(R([Td((r=0,{S:0,B:0,dx:0,aV:0,K:r,ap:"",aI:0,D:$c(r)})),Zh(Dc(0)),l(Fo,"flex-basis","calc(50 * var(--cw))"),Xc,Bh(Nh),lf(a_)]))]),R([l(Oc,R([ll,wf("Console:")]),T_(e)),l(Oc,R([ll,wf("Help:"),Tc(R([Td(Dc(1)),Ih(Ch),Xc,lf(a_),Bh(Nh)]))]),R([l(Oc,R([Tc(R([n_(i_),l(Fo,"-webkit-overflow-scrolling","touch"),Td(Dc(1))]))]),N_(e))]))]))]))])}(e);default:return function(e){return R([J_(e)])}(e)}}();return l(br,i,T(n,T(l(Wa,C,l(Fa,Ul(e.dh),r)),a)))},vp=rf;!function(t){e.Elm?function e(t,r){for(var n in r)n in t?"init"==n?L(6):e(t[n],r[n]):t[n]=r[n]}(e.Elm,t):e.Elm=t}({Stellerator:{Main:{init:ui({c9:Ja,dy:ts,dz:function(e){if(e.$)return hi;var t=e.a;return es(function(e){var t=e.b2?"https://":"http://";return h(ns,"#",e.c1,h(ns,"?",e.b3,T(l(rs,e.b$,T(t,e.bM)),e.bZ)))}(t))},dX:function(e){return os(R([Es,(t=is,vs(l(ys,t,(function(e){var t=l(Ci,Fi(Pi),e);return t.$?C:t.a})))),ps(ss),bs(as)]));var t},d3:Oo,d7:function(e){return{cz:l(qn,vp,yp(e)),d0:l(Wa,"Stellerator",l(Fa,(function(e){return"Stellerator: "+e.dm}),Mh(e)))}}})(xi)(0)}}})}(this)}).call(output);var Elm=output.Elm,version$1="1.0.0-beta.1+rebirth.bbda6d4";const defaults={addCSS:!0,thumbWidth:15,watch:!0};function matches(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function trigger(e,t){if(!e||!t)return;const r=new Event(t);e.dispatchEvent(r)}const getConstructor=e=>null!=e?e.constructor:null,instanceOf=(e,t)=>Boolean(e&&t&&e instanceof t),isNullOrUndefined=e=>null==e,isObject=e=>getConstructor(e)===Object,isNumber=e=>getConstructor(e)===Number&&!Number.isNaN(e),isString=e=>getConstructor(e)===String,isBoolean=e=>getConstructor(e)===Boolean,isFunction=e=>getConstructor(e)===Function,isArray=e=>Array.isArray(e),isNodeList=e=>instanceOf(e,NodeList),isElement=e=>instanceOf(e,Element),isEvent=e=>instanceOf(e,Event),isEmpty=e=>isNullOrUndefined(e)||(isString(e)||isArray(e)||isNodeList(e))&&!e.length||isObject(e)&&!Object.keys(e).length;var is={nullOrUndefined:isNullOrUndefined,object:isObject,number:isNumber,string:isString,boolean:isBoolean,function:isFunction,array:isArray,nodeList:isNodeList,element:isElement,event:isEvent,empty:isEmpty};function getDecimalPlaces(e){const t=`${e}`.match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function round(e,t){if(t<1){const r=getDecimalPlaces(t);return parseFloat(e.toFixed(r))}return Math.round(e/t)*t}class RangeTouch{constructor(e,t){is.element(e)?this.element=e:is.string(e)&&(this.element=document.querySelector(e)),is.element(this.element)&&is.empty(this.element.rangeTouch)&&(this.config=Object.assign({},defaults,t),this.init())}static get enabled(){return"ontouchstart"in document.documentElement}static setup(e,t={}){let r=null;if(is.empty(e)||is.string(e)?r=Array.from(document.querySelectorAll(is.string(e)?e:'input[type="range"]')):is.element(e)?r=[e]:is.nodeList(e)?r=Array.from(e):is.array(e)&&(r=e.filter(is.element)),is.empty(r))return null;const n=Object.assign({},defaults,t);if(is.string(e)&&n.watch){new MutationObserver(t=>{Array.from(t).forEach(t=>{Array.from(t.addedNodes).forEach(t=>{if(!is.element(t)||!matches(t,e))return;new RangeTouch(t,n)})})}).observe(document.body,{childList:!0,subtree:!0})}return r.map(e=>new RangeTouch(e,t))}init(){RangeTouch.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}destroy(){RangeTouch.enabled&&(this.listeners(!1),this.element.rangeTouch=null)}listeners(e){const t=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(e=>{this.element[t](e,e=>this.set(e),!1)})}get(e){if(!RangeTouch.enabled||!is.event(e))return null;const t=e.target,r=e.changedTouches[0],n=parseFloat(t.getAttribute("min"))||0,i=parseFloat(t.getAttribute("max"))||100,a=parseFloat(t.getAttribute("step"))||1,s=i-n;let o;const u=t.getBoundingClientRect(),c=100/u.width*(this.config.thumbWidth/2)/100;return o=100/u.width*(r.clientX-u.left),o<0?o=0:o>100&&(o=100),o<50?o-=(100-2*o)*c:o>50&&(o+=2*(o-50)*c),n+round(s*(o/100),a)}set(e){RangeTouch.enabled&&is.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),trigger(e.target,"touchend"===e.type?"change":"input"))}}const instances=new WeakMap;function registerOne(e){instances.has(e)||instances.set(e,new RangeTouch(e,{watch:!1,addCSS:!1,thumbWidth:8}))}function registerRecursive(e){e.matches&&e.matches("input[type=range]")&&registerOne(e),e.querySelectorAll&&e.querySelectorAll("input[type=range]").forEach(registerOne)}let observer=null;function initialize(){observer||(registerRecursive(document.body),observer=new MutationObserver(e=>e.forEach(e=>e.addedNodes.forEach(registerRecursive))),observer.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0}))}var CartridgeInfo;!function(e){let t;!function(e){e.vanilla_2k="vanilla_2k",e.vanilla_4k="vanilla_4k",e.bankswitch_2k_cv="bankswitch_2k_cv",e.bankswitch_8k_F8="bankswitch_8k_F8",e.bankswitch_8k_E0="bankswitch_8k_E0",e.bankswitch_8k_3F="bankswitch_8k_3F",e.bankswitch_8k_FE="bankswitch_8k_FE",e.bankswitch_8k_UA="bankswitch_8k_UA",e.bankswitch_8k_DPC="bankswitch_8k_DPC",e.bankswitch_8k_econobanking="bankswitch_8k_econobanking",e.bankswitch_8k_pp="bankswitch_8k_pp",e.bankswitch_12k_FA="bankswitch_12k_FA",e.bankswitch_16k_F6="bankswitch_16k_F6",e.bankswitch_16k_E7="bankswitch_16k_E7",e.bankswitch_FA2="bankswitch_FA2",e.bankswitch_32k_F4="bankswitch_32k_F4",e.bankswitch_64k_F0="bankswitch_64k_F0",e.bankswitch_64k_EF="bankswitch_64k_EF",e.bankswitch_3E="bankswitch_3E",e.bankswitch_supercharger="bankswitch_supercharger",e.bankswitch_dpc_plus="bankswitch_dpc_plus",e.bankswitch_cdf="bankswitch_cdf",e.unknown="unknown"}(t=e.CartridgeType||(e.CartridgeType={})),e.getAllTypes=function(){return[t.vanilla_2k,t.vanilla_4k,t.bankswitch_2k_cv,t.bankswitch_8k_F8,t.bankswitch_8k_E0,t.bankswitch_8k_3F,t.bankswitch_8k_FE,t.bankswitch_8k_UA,t.bankswitch_8k_econobanking,t.bankswitch_8k_pp,t.bankswitch_12k_FA,t.bankswitch_8k_DPC,t.bankswitch_16k_F6,t.bankswitch_16k_E7,t.bankswitch_FA2,t.bankswitch_32k_F4,t.bankswitch_3E,t.bankswitch_64k_F0,t.bankswitch_64k_EF,t.bankswitch_supercharger,t.bankswitch_dpc_plus,t.bankswitch_cdf,t.unknown]},e.describeCartridgeType=function(e){switch(e){case t.vanilla_2k:return"plain 2k";case t.vanilla_4k:return"plain 4k";case t.bankswitch_2k_cv:return"2k CommaVideo scheme";case t.bankswitch_8k_F8:return"bankswitched 8k, F8 (Atari) scheme";case t.bankswitch_8k_E0:return"bankswitched 8k, E0 (Parker Bros.) scheme";case t.bankswitch_8k_3F:return"bankswitched 8k, 3F (Tigervision) scheme";case t.bankswitch_8k_FE:return"bankswitched 8k, FE (Activision) scheme";case t.bankswitch_8k_UA:return"bankswitched 8k, UA (Pleiades) scheme";case t.bankswitch_8k_pp:return"bankswitched 8k, Pink Panther scheme";case t.bankswitch_12k_FA:return"bankswitched 12k, FA (CBS) scheme";case t.bankswitch_8k_DPC:return"bankswitched 8k + DPC";case t.bankswitch_8k_econobanking:return"bankswitched 8k, econobanking scheme";case t.bankswitch_16k_F6:return"bankswitched 16k, F6 (Atari) scheme";case t.bankswitch_16k_E7:return"bankswitched 16k, E7 (M-Network) scheme";case t.bankswitch_FA2:return"bankswitched 28k/29k, FA2 (modified CBS) scheme";case t.bankswitch_32k_F4:return"bankswitched 32k, F4 (Atari) scheme";case t.bankswitch_3E:return"bankswitched 3E (Tigervision + RAM) scheme";case t.bankswitch_64k_F0:return"bankswitched 64k, F0 (Megaboy) scheme";case t.bankswitch_64k_EF:return"bankswitched 64k, EFSC (Homestar Runner) scheme";case t.bankswitch_supercharger:return"bankswitched supercharger";case t.bankswitch_dpc_plus:return"bankswitched DPC+";case t.bankswitch_cdf:return"bankswitched CDF";case t.unknown:return"unknown"}}}(CartridgeInfo||(CartridgeInfo={}));var metadata_keys=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct"}));unwrapExports(metadata_keys);var metadata_keys_1=metadata_keys.NAMED_TAG,metadata_keys_2=metadata_keys.NAME_TAG,metadata_keys_3=metadata_keys.UNMANAGED_TAG,metadata_keys_4=metadata_keys.OPTIONAL_TAG,metadata_keys_5=metadata_keys.INJECT_TAG,metadata_keys_6=metadata_keys.MULTI_INJECT_TAG,metadata_keys_7=metadata_keys.TAGGED,metadata_keys_8=metadata_keys.TAGGED_PROP,metadata_keys_9=metadata_keys.PARAM_TYPES,metadata_keys_10=metadata_keys.DESIGN_PARAM_TYPES,metadata_keys_11=metadata_keys.POST_CONSTRUCT,literal_types=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}}));unwrapExports(literal_types);var literal_types_1=literal_types.BindingScopeEnum,literal_types_2=literal_types.BindingTypeEnum,literal_types_3=literal_types.TargetTypeEnum,id_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=0;t.id=function(){return r++}}));unwrapExports(id_1);var id_2=id_1.id,binding$1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.id=id_1.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=literal_types.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=r}));unwrapExports(binding$1);var binding_1=binding$1.Binding,error_msgs=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"}));unwrapExports(error_msgs);var error_msgs_1=error_msgs.DUPLICATED_INJECTABLE_DECORATOR,error_msgs_2=error_msgs.DUPLICATED_METADATA,error_msgs_3=error_msgs.NULL_ARGUMENT,error_msgs_4=error_msgs.KEY_NOT_FOUND,error_msgs_5=error_msgs.AMBIGUOUS_MATCH,error_msgs_6=error_msgs.CANNOT_UNBIND,error_msgs_7=error_msgs.NOT_REGISTERED,error_msgs_8=error_msgs.MISSING_INJECTABLE_ANNOTATION,error_msgs_9=error_msgs.MISSING_INJECT_ANNOTATION,error_msgs_10=error_msgs.UNDEFINED_INJECT_ANNOTATION,error_msgs_11=error_msgs.CIRCULAR_DEPENDENCY,error_msgs_12=error_msgs.NOT_IMPLEMENTED,error_msgs_13=error_msgs.INVALID_BINDING_TYPE,error_msgs_14=error_msgs.NO_MORE_SNAPSHOTS_AVAILABLE,error_msgs_15=error_msgs.INVALID_MIDDLEWARE_RETURN,error_msgs_16=error_msgs.INVALID_FUNCTION_BINDING,error_msgs_17=error_msgs.INVALID_TO_SELF_VALUE,error_msgs_18=error_msgs.INVALID_DECORATOR_OPERATION,error_msgs_19=error_msgs.ARGUMENTS_LENGTH_MISMATCH,error_msgs_20=error_msgs.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT,error_msgs_21=error_msgs.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE,error_msgs_22=error_msgs.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE,error_msgs_23=error_msgs.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK,error_msgs_24=error_msgs.MULTIPLE_POST_CONSTRUCT_METHODS,error_msgs_25=error_msgs.POST_CONSTRUCT_ERROR,error_msgs_26=error_msgs.CIRCULAR_DEPENDENCY_IN_FACTORY,error_msgs_27=error_msgs.STACK_OVERFLOW,metadata_reader=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(metadata_keys.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(metadata_keys.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(metadata_keys.TAGGED_PROP,e)||[]},e}();t.MetadataReader=r}));unwrapExports(metadata_reader);var metadata_reader_1=metadata_reader.MetadataReader,binding_count=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}}));unwrapExports(binding_count);var binding_count_1=binding_count.BindingCount,exceptions=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===error_msgs.STACK_OVERFLOW}}));unwrapExports(exceptions);var exceptions_1=exceptions.isStackOverflowExeption,serialization=createCommonjsModule((function(e,t){function r(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function n(e){if(e.name)return e.name;var t=e.toString(),r=t.match(/^function\s*([^\s(]+)/);return r?r[1]:"Anonymous function: "+t}Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceIdentifierAsString=r,t.listRegisteredBindingsForServiceIdentifier=function(e,t,r){var i="",a=r(e,t);return 0!==a.length&&(i="\nRegistered bindings:",a.forEach((function(e){var t="Object";null!==e.implementationType&&(t=n(e.implementationType)),i=i+"\n "+t,e.constraint.metaData&&(i=i+" - "+e.constraint.metaData)}))),i},t.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(function e(t,r){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===r||e(t.parentRequest,r))}(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var i=r(t.serviceIdentifier);return n.push(i),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(error_msgs.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var r="",n=t.getNamedTag(),i=t.getCustomTags();return null!==n&&(r+=n.toString()+"\n"),null!==i&&i.forEach((function(e){r+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+r}return" "+e},t.getFunctionName=n}));unwrapExports(serialization);var serialization_1=serialization.getServiceIdentifierAsString,serialization_2=serialization.listRegisteredBindingsForServiceIdentifier,serialization_3=serialization.circularDependencyToException,serialization_4=serialization.listMetadataForTarget,serialization_5=serialization.getFunctionName,context=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=id_1.id(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=r}));unwrapExports(context);var context_1=context.Context,metadata=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===metadata_keys.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=r}));unwrapExports(metadata);var metadata_1=metadata.Metadata,plan=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.parentContext=e,this.rootRequest=t};t.Plan=r}));unwrapExports(plan);var plan_1=plan.Plan,decorator_utils=createCommonjsModule((function(e,t){function r(e,t,r,n,i){var a={},s="number"==typeof i,o=void 0!==i&&s?i.toString():r;if(s&&void 0!==r)throw new Error(error_msgs.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(a=Reflect.getMetadata(e,t));var u=a[o];if(Array.isArray(u))for(var c=0,l=u;c<l.length;c++){var h=l[c];if(h.key===n.key)throw new Error(error_msgs.DUPLICATED_METADATA+" "+h.key.toString())}else u=[];u.push(n),a[o]=u,Reflect.defineMetadata(e,a,t)}function n(e,t){Reflect.decorate(e,t)}function i(e,t){return function(r,n){t(r,n,e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.tagParameter=function(e,t,n,i){r(metadata_keys.TAGGED,e,t,i,n)},t.tagProperty=function(e,t,n){r(metadata_keys.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,r){"number"==typeof r?n([i(r,e)],t):"string"==typeof r?Reflect.decorate([e],t,r):n([e],t)}}));unwrapExports(decorator_utils);var decorator_utils_1=decorator_utils.tagParameter,decorator_utils_2=decorator_utils.tagProperty,decorator_utils_3=decorator_utils.decorate,inject_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=r,t.inject=function(e){return function(t,r,n){if(void 0===e)throw new Error(error_msgs.UNDEFINED_INJECT_ANNOTATION(t.name));var i=new metadata.Metadata(metadata_keys.INJECT_TAG,e);"number"==typeof n?decorator_utils.tagParameter(t,r,n,i):decorator_utils.tagProperty(t,r,i)}}}));unwrapExports(inject_1);var inject_2=inject_1.LazyServiceIdentifer,inject_3=inject_1.inject,queryable_string=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,r=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},r)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=r}));unwrapExports(queryable_string);var queryable_string_1=queryable_string.QueryableString,target=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,n){this.id=id_1.id(),this.type=e,this.serviceIdentifier=r,this.name=new queryable_string.QueryableString(t||""),this.metadata=new Array;var i=null;"string"==typeof n?i=new metadata.Metadata(metadata_keys.NAMED_TAG,n):n instanceof metadata.Metadata&&(i=n),null!==i&&this.metadata.push(i)}return e.prototype.hasTag=function(e){for(var t=0,r=this.metadata;t<r.length;t++){if(r[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(metadata_keys.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(metadata_keys.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(metadata_keys.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return e.key!==metadata_keys.INJECT_TAG&&e.key!==metadata_keys.MULTI_INJECT_TAG&&e.key!==metadata_keys.NAME_TAG&&e.key!==metadata_keys.UNMANAGED_TAG&&e.key!==metadata_keys.NAMED_TAG}))},e.prototype.isOptional=function(){return this.matchesTag(metadata_keys.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===metadata_keys.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return e.key!==metadata_keys.INJECT_TAG&&e.key!==metadata_keys.MULTI_INJECT_TAG&&e.key!==metadata_keys.NAME_TAG&&e.key!==metadata_keys.UNMANAGED_TAG&&e.key!==metadata_keys.NAMED_TAG})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(metadata_keys.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(r){for(var n=0,i=t.metadata;n<i.length;n++){var a=i[n];if(a.key===e&&a.value===r)return!0}return!1}},e}();t.Target=r}));unwrapExports(target);var target_1=target.Target,reflection_utils=createCommonjsModule((function(e,t){function r(e,t,r,a){var s=e.getConstructorMetadata(r),o=s.compilerGeneratedMetadata;if(void 0===o){var u=error_msgs.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(u)}var c=s.userGeneratedMetadata,l=Object.keys(c),h=function(e,t,r,i,a){for(var s=[],o=0;o<a;o++){var u=n(o,e,t,r,i);null!==u&&s.push(u)}return s}(a,t,o,c,0===r.length&&l.length>0?l.length:r.length),d=function e(t,r){for(var n=t.getPropertiesMetadata(r),a=[],s=Object.keys(n),o=0,u=s;o<u.length;o++){var c=u[o],l=n[c],h=i(n[c]),d=h.targetName||c,f=h.inject||h.multiInject,_=new target.Target(literal_types.TargetTypeEnum.ClassProperty,d,f);_.metadata=l,a.push(_)}var p=Object.getPrototypeOf(r.prototype).constructor;if(p!==Object){var m=e(t,p);a=a.concat(m)}return a}(e,r);return h.concat(d)}function n(e,t,r,n,a){var s=a[e.toString()]||[],o=i(s),u=!0!==o.unmanaged,c=n[e],l=o.inject||o.multiInject;if((c=l||c)instanceof inject_1.LazyServiceIdentifer&&(c=c.unwrap()),u){if(!t&&(c===Object||c===Function||void 0===c)){var h=error_msgs.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+r+".";throw new Error(h)}var d=new target.Target(literal_types.TargetTypeEnum.ConstructorArgument,o.targetName,c);return d.metadata=s,d}return null}function i(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[metadata_keys.INJECT_TAG],multiInject:t[metadata_keys.MULTI_INJECT_TAG],targetName:t[metadata_keys.NAME_TAG],unmanaged:t[metadata_keys.UNMANAGED_TAG]}}Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=serialization.getFunctionName,t.getDependencies=function(e,t){return r(e,serialization.getFunctionName(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var i=Object.getPrototypeOf(n.prototype).constructor;if(i!==Object){var a=r(t,serialization.getFunctionName(i),i,!0),s=a.map((function(e){return e.metadata.filter((function(e){return e.key===metadata_keys.UNMANAGED_TAG}))})),o=[].concat.apply([],s).length,u=a.length-o;return u>0?u:e(t,i)}return 0}}));unwrapExports(reflection_utils);var reflection_utils_1=reflection_utils.getFunctionName,reflection_utils_2=reflection_utils.getDependencies,reflection_utils_3=reflection_utils.getBaseClassDependencyCount,request=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,n,i){this.id=id_1.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=r,this.target=i,this.childRequests=[],this.bindings=Array.isArray(n)?n:[n],this.requestScope=null===r?new Map:null}return e.prototype.addChildRequest=function(t,r,n){var i=new e(t,this.parentContext,this,r,n);return this.childRequests.push(i),i},e}();t.Request=r}));unwrapExports(request);var request_1=request.Request,planner=createCommonjsModule((function(e,t){function r(e){return e._bindingDictionary}function n(e,t,r,n,i,a){var s=e?metadata_keys.MULTI_INJECT_TAG:metadata_keys.INJECT_TAG,o=new metadata.Metadata(s,r),u=new target.Target(t,n,r,o);if(void 0!==i){var c=new metadata.Metadata(i,a);u.metadata.push(c)}return u}function i(e,t,r,n,i){var s=a(r.container,i.serviceIdentifier),o=[];return s.length===binding_count.BindingCount.NoBindingsAvailable&&r.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(r.container.bind(i.serviceIdentifier).toSelf(),s=a(r.container,i.serviceIdentifier)),o=t?s:s.filter((function(e){var t=new request.Request(e.serviceIdentifier,r,n,e,i);return e.constraint(t)})),function(e,t,r,n){switch(t.length){case binding_count.BindingCount.NoBindingsAvailable:if(r.isOptional())return t;var i=serialization.getServiceIdentifierAsString(e),s=error_msgs.NOT_REGISTERED;throw s+=serialization.listMetadataForTarget(i,r),s+=serialization.listRegisteredBindingsForServiceIdentifier(n,i,a),new Error(s);case binding_count.BindingCount.OnlyOneBindingAvailable:if(!r.isArray())return t;case binding_count.BindingCount.MultipleBindingsAvailable:default:if(r.isArray())return t;i=serialization.getServiceIdentifierAsString(e),s=error_msgs.AMBIGUOUS_MATCH+" "+i;throw s+=serialization.listRegisteredBindingsForServiceIdentifier(n,i,a),new Error(s)}}(i.serviceIdentifier,o,i,r.container),o}function a(e,t){var n=[],i=r(e);return i.hasKey(t)?n=i.get(t):null!==e.parent&&(n=a(e.parent,t)),n}Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=r,t.plan=function(e,t,r,a,s,o,u,c){void 0===c&&(c=!1);var l=new context.Context(t),h=n(r,a,s,"",o,u);try{return function e(t,r,n,a,s,o){var u,c;if(null===s){u=i(t,r,a,null,o),c=new request.Request(n,a,null,u,o);var l=new plan.Plan(a,c);a.addPlan(l)}else u=i(t,r,a,s,o),c=s.addChildRequest(o.serviceIdentifier,u,o);u.forEach((function(r){var n=null;if(o.isArray())n=c.addChildRequest(r.serviceIdentifier,r,o);else{if(r.cache)return;n=c}if(r.type===literal_types.BindingTypeEnum.Instance&&null!==r.implementationType){var i=reflection_utils.getDependencies(t,r.implementationType);if(!a.container.options.skipBaseClassChecks){var s=reflection_utils.getBaseClassDependencyCount(t,r.implementationType);if(i.length<s){var u=error_msgs.ARGUMENTS_LENGTH_MISMATCH(reflection_utils.getFunctionName(r.implementationType));throw new Error(u)}}i.forEach((function(r){e(t,!1,r.serviceIdentifier,a,n,r)}))}}))}(e,c,s,l,null,h),l}catch(e){throw exceptions.isStackOverflowExeption(e)&&l.plan&&serialization.circularDependencyToException(l.plan.rootRequest),e}},t.createMockRequest=function(e,t,r,n){var i=new target.Target(literal_types.TargetTypeEnum.Variable,"",t,new metadata.Metadata(r,n)),a=new context.Context(e);return new request.Request(t,a,null,[],i)}}));unwrapExports(planner);var planner_1=planner.getBindingDictionary,planner_2=planner.plan,planner_3=planner.createMockRequest,instantiation=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=function(e,t,r){var n,i,a=null;if(t.length>0){var s=t.filter((function(e){return null!==e.target&&e.target.type===literal_types.TargetTypeEnum.ConstructorArgument})).map(r);i=s,a=function(e,t,r){var n=t.filter((function(e){return null!==e.target&&e.target.type===literal_types.TargetTypeEnum.ClassProperty})),i=n.map(r);return n.forEach((function(t,r){var n;n=t.target.name.value();var a=i[r];e[n]=a})),e}(a=new((n=e).bind.apply(n,[void 0].concat(i))),t,r)}else a=new e;return function(e,t){if(Reflect.hasMetadata(metadata_keys.POST_CONSTRUCT,e)){var r=Reflect.getMetadata(metadata_keys.POST_CONSTRUCT,e);try{t[r.value]()}catch(t){throw new Error(error_msgs.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,a),a}}));unwrapExports(instantiation);var instantiation_1=instantiation.resolveInstance,resolver=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){try{return r()}catch(r){throw exceptions.isStackOverflowExeption(r)?new Error(error_msgs.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):r}},n=function(e){return function(t){t.parentContext.setCurrentRequest(t);var i=t.bindings,a=t.childRequests,s=t.target&&t.target.isArray(),o=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(s&&o)return a.map((function(t){return n(e)(t)}));var u=null;if(!t.target.isOptional()||0!==i.length){var c=i[0],l=c.scope===literal_types.BindingScopeEnum.Singleton,h=c.scope===literal_types.BindingScopeEnum.Request;if(l&&c.activated)return c.cache;if(h&&null!==e&&e.has(c.id))return e.get(c.id);if(c.type===literal_types.BindingTypeEnum.ConstantValue)u=c.cache;else if(c.type===literal_types.BindingTypeEnum.Function)u=c.cache;else if(c.type===literal_types.BindingTypeEnum.Constructor)u=c.implementationType;else if(c.type===literal_types.BindingTypeEnum.DynamicValue&&null!==c.dynamicValue)u=r("toDynamicValue",c.serviceIdentifier,(function(){return c.dynamicValue(t.parentContext)}));else if(c.type===literal_types.BindingTypeEnum.Factory&&null!==c.factory)u=r("toFactory",c.serviceIdentifier,(function(){return c.factory(t.parentContext)}));else if(c.type===literal_types.BindingTypeEnum.Provider&&null!==c.provider)u=r("toProvider",c.serviceIdentifier,(function(){return c.provider(t.parentContext)}));else{if(c.type!==literal_types.BindingTypeEnum.Instance||null===c.implementationType){var d=serialization.getServiceIdentifierAsString(t.serviceIdentifier);throw new Error(error_msgs.INVALID_BINDING_TYPE+" "+d)}u=instantiation.resolveInstance(c.implementationType,a,n(e))}return"function"==typeof c.onActivation&&(u=c.onActivation(t.parentContext,u)),l&&(c.cache=u,c.activated=!0),h&&null!==e&&!e.has(c.id)&&e.set(c.id,u),u}}};t.resolve=function(e){return n(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}}));unwrapExports(resolver);var resolver_1=resolver.resolve,constraint_helpers=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||r(n,t))};t.traverseAncerstors=r;var n=function(e){return function(t){var r=function(r){return null!==r&&null!==r.target&&r.target.matchesTag(e)(t)};return r.metaData=new metadata.Metadata(e,t),r}};t.taggedConstraint=n;var i=n(metadata_keys.NAMED_TAG);t.namedConstraint=i;t.typeConstraint=function(e){return function(t){var r=null;if(null!==t){if(r=t.bindings[0],"string"==typeof e)return r.serviceIdentifier===e;var n=t.bindings[0].implementationType;return e===n}return!1}}}));unwrapExports(constraint_helpers);var constraint_helpers_1=constraint_helpers.traverseAncerstors,constraint_helpers_2=constraint_helpers.taggedConstraint,constraint_helpers_3=constraint_helpers.namedConstraint,constraint_helpers_4=constraint_helpers.typeConstraint,binding_when_syntax=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=constraint_helpers.namedConstraint(e),new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=constraint_helpers.taggedConstraint(e)(t),new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return constraint_helpers.typeConstraint(e)(t.parentRequest)},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return constraint_helpers.namedConstraint(e)(t.parentRequest)},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(r){return constraint_helpers.taggedConstraint(e)(t)(r.parentRequest)},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return constraint_helpers.traverseAncerstors(t,constraint_helpers.typeConstraint(e))},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!constraint_helpers.traverseAncerstors(t,constraint_helpers.typeConstraint(e))},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return constraint_helpers.traverseAncerstors(t,constraint_helpers.namedConstraint(e))},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!constraint_helpers.traverseAncerstors(t,constraint_helpers.namedConstraint(e))},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(r){return constraint_helpers.traverseAncerstors(r,constraint_helpers.taggedConstraint(e)(t))},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(r){return!constraint_helpers.traverseAncerstors(r,constraint_helpers.taggedConstraint(e)(t))},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return constraint_helpers.traverseAncerstors(t,e)},new binding_on_syntax.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!constraint_helpers.traverseAncerstors(t,e)},new binding_on_syntax.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=r}));unwrapExports(binding_when_syntax);var binding_when_syntax_1=binding_when_syntax.BindingWhenSyntax,binding_on_syntax=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new binding_when_syntax.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=r}));unwrapExports(binding_on_syntax);var binding_on_syntax_1=binding_on_syntax.BindingOnSyntax,binding_when_on_syntax=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new binding_when_syntax.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new binding_on_syntax.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=r}));unwrapExports(binding_when_on_syntax);var binding_when_on_syntax_1=binding_when_on_syntax.BindingWhenOnSyntax,binding_in_syntax=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=literal_types.BindingScopeEnum.Request,new binding_when_on_syntax.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=literal_types.BindingScopeEnum.Singleton,new binding_when_on_syntax.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=literal_types.BindingScopeEnum.Transient,new binding_when_on_syntax.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=r}));unwrapExports(binding_in_syntax);var binding_in_syntax_1=binding_in_syntax.BindingInSyntax,binding_in_when_on_syntax=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new binding_when_syntax.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new binding_on_syntax.BindingOnSyntax(this._binding),this._bindingInSyntax=new binding_in_syntax.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=r}));unwrapExports(binding_in_when_on_syntax);var binding_in_when_on_syntax_1=binding_in_when_on_syntax.BindingInWhenOnSyntax,binding_to_syntax=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=literal_types.BindingTypeEnum.Instance,this._binding.implementationType=e,new binding_in_when_on_syntax.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+error_msgs.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=literal_types.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,new binding_when_on_syntax.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=literal_types.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new binding_in_when_on_syntax.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=literal_types.BindingTypeEnum.Constructor,this._binding.implementationType=e,new binding_when_on_syntax.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=literal_types.BindingTypeEnum.Factory,this._binding.factory=e,new binding_when_on_syntax.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(error_msgs.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=literal_types.BindingTypeEnum.Function,t},e.prototype.toAutoFactory=function(e){return this._binding.type=literal_types.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},new binding_when_on_syntax.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=literal_types.BindingTypeEnum.Provider,this._binding.provider=e,new binding_when_on_syntax.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=r}));unwrapExports(binding_to_syntax);var binding_to_syntax_1=binding_to_syntax.BindingToSyntax,container_snapshot=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.of=function(t,r){var n=new e;return n.bindings=t,n.middleware=r,n},e}();t.ContainerSnapshot=r}));unwrapExports(container_snapshot);var container_snapshot_1=container_snapshot.ContainerSnapshot,lookup=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(error_msgs.NULL_ARGUMENT);if(null==t)throw new Error(error_msgs.NULL_ARGUMENT);var r=this._map.get(e);void 0!==r?(r.push(t),this._map.set(e,r)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(error_msgs.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(error_msgs.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(error_msgs.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(error_msgs.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(r,n){var i=r.filter((function(t){return!e(t)}));i.length>0?t._map.set(n,i):t._map.delete(n)}))},e.prototype.hasKey=function(e){if(null==e)throw new Error(error_msgs.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,r){e.forEach((function(e){return t.add(r,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,r){e(r,t)}))},e}();t.Lookup=r}));unwrapExports(lookup);var lookup_1=lookup.Lookup,container=createCommonjsModule((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,o)}u((n=n.apply(e,t||[])).next())}))},n=commonjsGlobal&&commonjsGlobal.__generator||function(e,t){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[0,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error(""+error_msgs.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=literal_types.BindingScopeEnum.Transient;else if(t.defaultScope!==literal_types.BindingScopeEnum.Singleton&&t.defaultScope!==literal_types.BindingScopeEnum.Transient&&t.defaultScope!==literal_types.BindingScopeEnum.Request)throw new Error(""+error_msgs.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+error_msgs.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+error_msgs.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=id_1.id(),this._bindingDictionary=new lookup.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new metadata_reader.MetadataReader}return e.merge=function(t,r){var n=new e,i=planner.getBindingDictionary(n),a=planner.getBindingDictionary(t),s=planner.getBindingDictionary(r);function o(e,t){e.traverse((function(e,r){r.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return o(a,i),o(s,i),n},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=this._getContainerModuleHelpersFactory(),n=0,i=e;n<i.length;n++){var a=i[n],s=r(a.id);a.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,(function(){var t,r,i,a,s;return n(this,(function(n){switch(n.label){case 0:t=this._getContainerModuleHelpersFactory(),r=0,i=e,n.label=1;case 1:return r<i.length?(a=i[r],s=t(a.id),[4,a.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:n.sent(),n.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=function(e){return function(t){return t.moduleId===e}};t.forEach((function(t){var r=n(t.id);e._bindingDictionary.removeByCondition(r)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||literal_types.BindingScopeEnum.Transient,r=new binding$1.Binding(e,t);return this._bindingDictionary.add(e,r),new binding_to_syntax.BindingToSyntax(r)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(error_msgs.CANNOT_UNBIND+" "+serialization.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new lookup.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,metadata_keys.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,r){var n=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),a=planner.createMockRequest(this,e,t,r);n=i.some((function(e){return e.constraint(a)}))}return!n&&this.parent&&(n=this.parent.isBoundTagged(e,t,r)),n},e.prototype.snapshot=function(){this._snapshots.push(container_snapshot.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(error_msgs.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var r=new e(t||this.options);return r.parent=this,r},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),r)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,literal_types.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,r){return this._get(!1,!1,literal_types.TargetTypeEnum.Variable,e,t,r)},e.prototype.getNamed=function(e,t){return this.getTagged(e,metadata_keys.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,literal_types.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,r){return this._get(!1,!0,literal_types.TargetTypeEnum.Variable,e,t,r)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,metadata_keys.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},r=function(r){return function(n){var i=e.rebind.bind(e)(n);return t(i,r),i}};return function(n){return{bindFunction:(i=n,function(r){var n=e.bind.bind(e)(r);return t(n,i),n}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:r(n),unbindFunction:function(t){e.unbind.bind(e)(t)}};var i}},e.prototype._get=function(e,t,r,n,i,a){var s=null,o={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:n,targetType:r,value:a};if(this._middleware){if(null==(s=this._middleware(o)))throw new Error(error_msgs.INVALID_MIDDLEWARE_RETURN)}else s=this._planAndResolve()(o);return s},e.prototype._planAndResolve=function(){var e=this;return function(t){var r=planner.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return r=t.contextInterceptor(r),resolver.resolve(r)}},e}();t.Container=i}));unwrapExports(container);var container_1=container.Container,container_module=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.id=id_1.id(),this.registry=e};t.ContainerModule=r;var n=function(e){this.id=id_1.id(),this.registry=e};t.AsyncContainerModule=n}));unwrapExports(container_module);var container_module_1=container_module.ContainerModule,container_module_2=container_module.AsyncContainerModule,injectable_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(metadata_keys.PARAM_TYPES,e))throw new Error(error_msgs.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(metadata_keys.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(metadata_keys.PARAM_TYPES,t,e),e}}}));unwrapExports(injectable_1);var injectable_2=injectable_1.injectable,tagged_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=function(e,t){return function(r,n,i){var a=new metadata.Metadata(e,t);"number"==typeof i?decorator_utils.tagParameter(r,n,i,a):decorator_utils.tagProperty(r,n,a)}}}));unwrapExports(tagged_1);var tagged_2=tagged_1.tagged,named_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.named=function(e){return function(t,r,n){var i=new metadata.Metadata(metadata_keys.NAMED_TAG,e);"number"==typeof n?decorator_utils.tagParameter(t,r,n,i):decorator_utils.tagProperty(t,r,i)}}}));unwrapExports(named_1);var named_2=named_1.named,optional_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.optional=function(){return function(e,t,r){var n=new metadata.Metadata(metadata_keys.OPTIONAL_TAG,!0);"number"==typeof r?decorator_utils.tagParameter(e,t,r,n):decorator_utils.tagProperty(e,t,n)}}}));unwrapExports(optional_1);var optional_2=optional_1.optional,unmanaged_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=function(){return function(e,t,r){var n=new metadata.Metadata(metadata_keys.UNMANAGED_TAG,!0);decorator_utils.tagParameter(e,t,r,n)}}}));unwrapExports(unmanaged_1);var unmanaged_2=unmanaged_1.unmanaged,multi_inject=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=function(e){return function(t,r,n){var i=new metadata.Metadata(metadata_keys.MULTI_INJECT_TAG,e);"number"==typeof n?decorator_utils.tagParameter(t,r,n,i):decorator_utils.tagProperty(t,r,i)}}}));unwrapExports(multi_inject);var multi_inject_1=multi_inject.multiInject,target_name=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=function(e){return function(t,r,n){var i=new metadata.Metadata(metadata_keys.NAME_TAG,e);decorator_utils.tagParameter(t,r,n,i)}}}));unwrapExports(target_name);var target_name_1=target_name.targetName,post_construct=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=function(){return function(e,t,r){var n=new metadata.Metadata(metadata_keys.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(metadata_keys.POST_CONSTRUCT,e.constructor))throw new Error(error_msgs.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(metadata_keys.POST_CONSTRUCT,n,e.constructor)}}}));unwrapExports(post_construct);var post_construct_1=post_construct.postConstruct,binding_utils=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=function(e){return function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.forEach((function(r){return e.bind(r).toService(t)}))}}}}));unwrapExports(binding_utils);var binding_utils_1=binding_utils.multiBindToService,inversify=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.METADATA_KEY=metadata_keys,t.Container=container.Container,t.BindingScopeEnum=literal_types.BindingScopeEnum,t.BindingTypeEnum=literal_types.BindingTypeEnum,t.TargetTypeEnum=literal_types.TargetTypeEnum,t.AsyncContainerModule=container_module.AsyncContainerModule,t.ContainerModule=container_module.ContainerModule,t.injectable=injectable_1.injectable,t.tagged=tagged_1.tagged,t.named=named_1.named,t.inject=inject_1.inject,t.LazyServiceIdentifer=inject_1.LazyServiceIdentifer,t.optional=optional_1.optional,t.unmanaged=unmanaged_1.unmanaged,t.multiInject=multi_inject.multiInject,t.targetName=target_name.targetName,t.postConstruct=post_construct.postConstruct,t.MetadataReader=metadata_reader.MetadataReader,t.id=id_1.id,t.decorate=decorator_utils.decorate,t.traverseAncerstors=constraint_helpers.traverseAncerstors,t.taggedConstraint=constraint_helpers.taggedConstraint,t.namedConstraint=constraint_helpers.namedConstraint,t.typeConstraint=constraint_helpers.typeConstraint,t.getServiceIdentifierAsString=serialization.getServiceIdentifierAsString,t.multiBindToService=binding_utils.multiBindToService}));unwrapExports(inversify);var inversify_1=inversify.METADATA_KEY,inversify_2=inversify.Container,inversify_3=inversify.BindingScopeEnum,inversify_4=inversify.BindingTypeEnum,inversify_5=inversify.TargetTypeEnum,inversify_6=inversify.AsyncContainerModule,inversify_7=inversify.ContainerModule,inversify_8=inversify.injectable,inversify_9=inversify.tagged,inversify_10=inversify.named,inversify_11=inversify.inject,inversify_12=inversify.LazyServiceIdentifer,inversify_13=inversify.optional,inversify_14=inversify.unmanaged,inversify_15=inversify.multiInject,inversify_16=inversify.targetName,inversify_17=inversify.postConstruct,inversify_18=inversify.MetadataReader,inversify_19=inversify.id,inversify_20=inversify.decorate,inversify_21=inversify.traverseAncerstors,inversify_22=inversify.taggedConstraint,inversify_23=inversify.namedConstraint,inversify_24=inversify.typeConstraint,inversify_25=inversify.getServiceIdentifierAsString,inversify_26=inversify.multiBindToService;let MediaApi=class{constructor(){this._watchMedia=e=>{this._queries.forEach(e=>{e.removeEventListener?e.removeEventListener("change",this._updateQueries):e.removeListener(this._updateQueries)}),this._queries=e.map(e=>matchMedia(e)),this._queries.forEach(e=>{e.removeEventListener?e.addEventListener("change",this._updateQueries):e.addListener(this._updateQueries)}),this._updateQueries()},this._updateQueries=()=>this._ports.onMediaUpdate_.send(this._queries.map(e=>e.matches)),this._queries=[]}init(e){this._ports=e,e.watchMedia_.subscribe(this._watchMedia)}};MediaApi=__decorate([inversify_8()],MediaApi);var MediaApi$1=MediaApi;let ScrollIntoView=class{constructor(){this._scrollIntoView=([e,t])=>{const r=document.getElementById(t);r?r.scrollIntoView({block:e}):new Task(e,t).start()}}init(e){e.scrollIntoView_.subscribe(this._scrollIntoView)}};ScrollIntoView=__decorate([inversify_8()],ScrollIntoView);class Task{constructor(e,t,r=500){this._position=e,this._id=t,this._timeout=r,this._onMutation=e=>{if(!e.some(e=>e.addedNodes))return;const t=document.getElementById(this._id);t&&(this._observer.disconnect(),clearTimeout(this._timeoutHandle),t.scrollIntoView({block:this._position}))},this._observer=new MutationObserver(this._onMutation),this._timeoutHandle=null}start(){setTimeout(()=>this._observer.disconnect(),this._timeout),this._observer.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0})}}var ScrollIntoView$1=ScrollIntoView,lookup$1=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)lookup$1[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){var t,r,n,i,a,s;inited||init();var o=e.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a="="===e[o-2]?2:"="===e[o-1]?1:0,s=new Arr(3*o/4-a),n=a>0?o-4:o;var u=0;for(t=0,r=0;t<n;t+=4,r+=3)i=revLookup[e.charCodeAt(t)]<<18|revLookup[e.charCodeAt(t+1)]<<12|revLookup[e.charCodeAt(t+2)]<<6|revLookup[e.charCodeAt(t+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===a?(i=revLookup[e.charCodeAt(t)]<<2|revLookup[e.charCodeAt(t+1)]>>4,s[u++]=255&i):1===a&&(i=revLookup[e.charCodeAt(t)]<<10|revLookup[e.charCodeAt(t+1)]<<4|revLookup[e.charCodeAt(t+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s}function tripletToBase64(e){return lookup$1[e>>18&63]+lookup$1[e>>12&63]+lookup$1[e>>6&63]+lookup$1[63&e]}function encodeChunk(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(tripletToBase64(n));return i.join("")}function fromByteArray(e){var t;inited||init();for(var r=e.length,n=r%3,i="",a=[],s=0,o=r-n;s<o;s+=16383)a.push(encodeChunk(e,s,s+16383>o?o:s+16383));return 1===n?(t=e[r-1],i+=lookup$1[t>>2],i+=lookup$1[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=lookup$1[t>>10],i+=lookup$1[t>>4&63],i+=lookup$1[t<<2&63],i+="="),a.push(i),a.join("")}function read$1(e,t,r,n,i){var a,s,o=8*i-n-1,u=(1<<o)-1,c=u>>1,l=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,a=f&(1<<-l)-1,f>>=-l,l+=o;l>0;a=256*a+e[t+h],h+=d,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=d,l-=8);if(0===a)a=1-c;else{if(a===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),a-=c}return(f?-1:1)*s*Math.pow(2,a-n)}function write(e,t,r,n,i,a){var s,o,u,c=8*a-i-1,l=(1<<c)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,_=n?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(o=0,s=l):s+h>=1?(o=(t*u-1)*Math.pow(2,i),s+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+f]=255&o,f+=_,o/=256,i-=8);for(s=s<<i|o,c+=i;c>0;e[r+f]=255&s,f+=_,s/=256,c-=8);e[r+f-_]|=128*p}var toString={}.toString,isArray$1=Array.isArray||function(e){return"[object Array]"==toString.call(e)},INSPECT_MAX_BYTES=50;function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,r)}function from(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,r,n):"string"==typeof t?fromString(e,t,r):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,r,n){return assertSize(t),t<=0?createBuffer(e,t):void 0!==r?"string"==typeof n?createBuffer(e,t).fill(r,n):createBuffer(e,t).fill(r):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function fromString(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(t,r),i=(e=createBuffer(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}function fromArrayLike(e,t){var r=t.length<0?0:0|checked(t.length);e=createBuffer(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function fromArrayBuffer(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var r=0|checked(t.length);return 0===(e=createBuffer(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&isArray$1(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function internalIsBuffer(e){return!(null==e||!e._isBuffer)}function byteLength(e,t){if(internalIsBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(n)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),n=!0}}function slowToString(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,n)),internalIsBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,n,i);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,i){var a,s=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(a=r;a<o;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*s}else-1!==l&&(a-=a-l),l=-1}else for(r+u>o&&(r=o-u),a=r;a>=0;a--){for(var h=!0,d=0;d<u;d++)if(c(e,a+d)!==c(t,d)){h=!1;break}if(h)return a}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var s=0;s<n;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[r+s]=o}return s}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(asciiToBytes(t),e,r,n)}function latin1Write(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,n)}function base64Slice(e,t,r){return 0===t&&r===e.length?fromByteArray(e):fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,s,o,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=r)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[i+1],s=e[i+2],128==(192&a)&&128==(192&s)&&(u=(15&c)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(u=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return decodeCodePointsArray(n)}Buffer.TYPED_ARRAY_SUPPORT=void 0===global$1.TYPED_ARRAY_SUPPORT||global$1.TYPED_ARRAY_SUPPORT,Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,r){return from(null,e,t,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array),Buffer.alloc=function(e,t,r){return alloc(null,e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=isBuffer,Buffer.compare=function(e,t){if(!internalIsBuffer(e)||!internalIsBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!isArray$1(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Buffer.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!internalIsBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",t=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,t,r,n,i){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),o=Math.min(a,s),u=this.slice(n,i),c=e.slice(t,r),l=0;l<o;++l)if(u[l]!==c[l]){a=u[l],s=c[l];break}return a<s?-1:s<a?1:0},Buffer.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function latin1Slice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function hexSlice(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=toHex(e[a]);return i}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,i,a){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function objectWriteUInt32(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function checkIEEE754(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,i){return i||checkIEEE754(e,t,r,4),write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,i){return i||checkIEEE754(e,t,r,8),write(e,t,r,n,52,8),r+8}Buffer.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Buffer.prototype;else{var i=t-e;r=new Buffer(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},Buffer.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},Buffer.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},Buffer.prototype.readUInt8=function(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},Buffer.prototype.readInt8=function(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,t){return t||checkOffset(e,4,this.length),read$1(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return t||checkOffset(e,4,this.length),read$1(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return t||checkOffset(e,8,this.length),read$1(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return t||checkOffset(e,8,this.length),read$1(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},Buffer.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},Buffer.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);checkInt(this,e,t,r,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<r&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},Buffer.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);checkInt(this,e,t,r,i-1,-i)}var a=r-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},Buffer.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},Buffer.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=internalIsBuffer(e)?e:utf8ToBytes(new Buffer(e,n).toString()),o=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%o]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g,domain,inherits;function base64clean(e){if((e=stringtrim(e).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e,t){for(var r,n,i,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,a.push(i),a.push(n);return a}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function isnan(e){return e!=e}function isBuffer(e){return null!=e&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isFastBuffer(e.slice(0,0))}function EventHandlers(){}function EventEmitter(){EventEmitter.init.call(this)}function $getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function emitNone(e,t,r){if(t)e.call(r);else for(var n=e.length,i=arrayClone(e,n),a=0;a<n;++a)i[a].call(r)}function emitOne(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,a=arrayClone(e,i),s=0;s<i;++s)a[s].call(r,n)}function emitTwo(e,t,r,n,i){if(t)e.call(r,n,i);else for(var a=e.length,s=arrayClone(e,a),o=0;o<a;++o)s[o].call(r,n,i)}function emitThree(e,t,r,n,i,a){if(t)e.call(r,n,i,a);else for(var s=e.length,o=arrayClone(e,s),u=0;u<s;++u)o[u].call(r,n,i,a)}function emitMany(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,a=arrayClone(e,i),s=0;s<i;++s)a[s].apply(r,n)}function _addListener(e,t,r,n){var i,a,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]):(a=e._events=new EventHandlers,e._eventsCount=0),s){if("function"==typeof s?s=a[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=$getMaxListeners(e))&&i>0&&s.length>i){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=s.length,emitWarning(o)}}else s=a[t]=r,++e._eventsCount;return e}function emitWarning(e){"function"==typeof console.warn?console.warn(e):console.log(e)}function _onceWrap(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function listenerCount(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function spliceOne(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function arrayClone(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function unwrapListeners(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}EventHandlers.prototype=Object.create(null),EventEmitter.EventEmitter=EventEmitter,EventEmitter.usingDomains=!1,EventEmitter.prototype.domain=void 0,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.init=function(){this.domain=null,EventEmitter.usingDomains&&domain.active&&domain.Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new EventHandlers,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(e){var t,r,n,i,a,s,o,u="error"===e;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(o=this.domain,u){if(t=arguments[1],!o){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=o,t.domainThrown=!1,o.emit("error",t),!1}if(!(r=s[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:emitNone(r,l,this);break;case 2:emitOne(r,l,this,arguments[1]);break;case 3:emitTwo(r,l,this,arguments[1],arguments[2]);break;case 4:emitThree(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),a=1;a<n;a++)i[a-1]=arguments[a];emitMany(r,l,this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var r,n,i,a,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new EventHandlers:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){s=r[a].listener,i=a;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new EventHandlers,this;delete n[e]}else spliceOne(r,i);n.removeListener&&this.emit("removeListener",e,s||t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new EventHandlers,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new EventHandlers:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),a=0;a<i.length;++a)"removeListener"!==(n=i[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new EventHandlers,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},EventEmitter.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:unwrapListeners(t):[]},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},inherits="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};var inherits$1=inherits,formatRegExp=/%[sdj%]/g;function format(e){if(!isString$1(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(inspect(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(formatRegExp,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])isNull(s)||!isObject$1(s)?a+=" "+s:a+=" "+inspect(s);return a}function deprecate(e,t){if(isUndefined(global$1.process))return function(){return deprecate(e,t).apply(this,arguments)};if(!0===process.noDeprecation)return e;var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){debugs[e]=function(){var t=format.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var r={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),isBoolean$1(t)?r.showHidden=t:t&&_extend(r,t),isUndefined(r.showHidden)&&(r.showHidden=!1),isUndefined(r.depth)&&(r.depth=2),isUndefined(r.colors)&&(r.colors=!1),isUndefined(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=stylizeWithColor),formatValue(r,e,r.depth)}function stylizeWithColor(e,t){var r=inspect.styles[t];return r?"["+inspect.colors[r][0]+"m"+e+"["+inspect.colors[r][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}function formatValue(e,t,r){if(e.customInspect&&t&&isFunction$1(t.inspect)&&t.inspect!==inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return isString$1(n)||(n=formatValue(e,n,r)),n}var i=formatPrimitive(e,t);if(i)return i;var a=Object.keys(t),s=arrayToHash(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),isError(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return formatError(t);if(0===a.length){if(isFunction$1(t)){var o=t.name?": "+t.name:"";return e.stylize("[Function"+o+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var u,c="",l=!1,h=["{","}"];(isArray$2(t)&&(l=!0,h=["[","]"]),isFunction$1(t))&&(c=" [Function"+(t.name?": "+t.name:"")+"]");return isRegExp(t)&&(c=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(c=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(c=" "+formatError(t)),0!==a.length||l&&0!=t.length?r<0?isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=l?formatArray(e,t,r,s,a):a.map((function(n){return formatProperty(e,t,r,s,n,l)})),e.seen.pop(),reduceToSingleString(u,c,h)):h[0]+c+h[1]}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString$1(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return isNumber$1(t)?e.stylize(""+t,"number"):isBoolean$1(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,r,n,i){for(var a=[],s=0,o=t.length;s<o;++s)hasOwnProperty(t,String(s))?a.push(formatProperty(e,t,r,n,String(s),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(formatProperty(e,t,r,n,i,!0))})),a}function formatProperty(e,t,r,n,i,a){var s,o,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?o=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(o=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),o||(e.seen.indexOf(u.value)<0?(o=isNull(r)?formatValue(e,u.value,null):formatValue(e,u.value,r-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),isUndefined(s)){if(a&&i.match(/^\d+$/))return o;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}function reduceToSingleString(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function isArray$2(e){return Array.isArray(e)}function isBoolean$1(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNumber$1(e){return"number"==typeof e}function isString$1(e){return"string"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject$1(e)&&"[object RegExp]"===objectToString(e)}function isObject$1(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject$1(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject$1(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction$1(e){return"function"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function _extend(e,t){if(!t||!isObject$1(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function BufferList(){this.head=null,this.tail=null,this.length=0}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},BufferList.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},BufferList.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},BufferList.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},BufferList.prototype.concat=function(e){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var t=Buffer.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function StringDecoder(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if((i=t.charCodeAt(n))>=55296&&i<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,n)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t},Readable.ReadableState=ReadableState;var debug=debuglog("stream");function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function listenerCount$1(e,t){return e.listeners(t).length}function ReadableState(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),EventEmitter.call(this)}function readableAddChunk(e,t,r,n,i){var a=chunkInvalid(t,r);if(a)e.emit("error",a);else if(null===r)t.reading=!1,onEofChunk(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var o=new Error("stream.unshift() after end event");e.emit("error",o)}else{var u;!t.decoder||i||n||(r=t.decoder.write(r),u=!t.objectMode&&0===r.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e))),maybeReadMore(e,t)}else i||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}inherits$1(Readable,EventEmitter),Readable.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=Buffer.from(e,t),t=""),readableAddChunk(this,r,e,t,!1)},Readable.prototype.unshift=function(e){return readableAddChunk(this,this._readableState,e,"",!0)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){return this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function chunkInvalid(e,t){var r=null;return isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,flow(e))}}function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,nextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=fromListPartial(e,t.buffer,t.decoder),r);var r}function fromListPartial(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?copyFromBufferString(e,t):copyFromBuffer(e,t),n}function copyFromBufferString(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var a=r.data,s=e>a.length?a.length:e;if(s===a.length?i+=a:i+=a.slice(0,e),0===(e-=s)){s===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(s));break}++n}return t.length-=n,i}function copyFromBuffer(e,t){var r=Buffer.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,s),0===(e-=s)){s===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(s));break}++i}return t.length-=i,r}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,nextTick(endReadableNT,t,e))}function endReadableNT(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function forEach(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function indexOf(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function nop(){}function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function WritableState(e,t){Object.defineProperty(this,"buffer",{get:deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){if(!(this instanceof Writable||this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),EventEmitter.call(this)}function writeAfterEnd(e,t){var r=new Error("write after end");e.emit("error",r),nextTick(t,r)}function validChunk(e,t,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):Buffer.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),nextTick(n,a),i=!1),i}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer.from(t,r)),t}function writeOrBuffer(e,t,r,n,i){r=decodeChunk(t,r,n),Buffer.isBuffer(r)&&(n="buffer");var a=t.objectMode?1:r.length;t.length+=a;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var o=t.lastBufferedRequest;t.lastBufferedRequest=new WriteReq(r,n,i),o?o.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,a,r,n,i);return s}function doWrite(e,t,r,n,i,a,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function onwriteError(e,t,r,n,i){--t.pendingcb,r?nextTick(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,n,t,i);else{var a=needFinish(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),n?nextTick(afterWrite,e,r,a,i):afterWrite(e,r,a,i)}}function afterWrite(e,t,r,n){r||onwriteDrain(e,t),t.pendingcb--,n(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0;r;)i[s]=r,r=r.next,s+=1;doWrite(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new CorkedRequest(t)}else{for(;r;){var o=r.chunk,u=r.encoding,c=r.callback;if(doWrite(e,t,!1,t.objectMode?1:o.length,o,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function prefinish(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,t){var r=needFinish(t);return r&&(0===t.pendingcb?(prefinish(e,t),t.finished=!0,e.emit("finish")):prefinish(e,t)),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var n,i=t.needReadable;return debug("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&debug("length less than watermark",i=!0),t.ended||t.reading?debug("reading or ended",i=!1):i&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t))),null===(n=e>0?fromList(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==n&&this.emit("data",n),n},Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,debug("pipe count=%d opts=%j",n.pipesCount,t);var i=!t||!1!==t.end?s:c;function a(e){debug("onunpipe"),e===r&&c()}function s(){debug("onend"),e.end()}n.endEmitted?nextTick(i):r.once("end",i),e.on("unpipe",a);var o=pipeOnDrain(r);e.on("drain",o);var u=!1;function c(){debug("cleanup"),e.removeListener("close",f),e.removeListener("finish",_),e.removeListener("drain",o),e.removeListener("error",d),e.removeListener("unpipe",a),r.removeListener("end",s),r.removeListener("end",c),r.removeListener("data",h),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||o()}var l=!1;function h(t){debug("ondata"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf(n.pipes,e))&&!u&&(debug("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function d(t){debug("onerror",t),p(),e.removeListener("error",d),0===listenerCount$1(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",_),p()}function _(){debug("onfinish"),e.removeListener("close",f),p()}function p(){debug("unpipe"),r.unpipe(e)}return r.on("data",h),prependListener(e,"error",d),e.once("close",f),e.once("finish",_),e.emit("pipe",r),n.flowing||(debug("pipe resume"),r.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var a=indexOf(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var r=EventEmitter.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&emitReadable(this):nextTick(nReadingNextTick,this))}return r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,resume(this,e)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",(function(){if(debug("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(i){(debug("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i)||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return forEach(["error","close","destroy","pause","resume"],(function(t){e.on(t,n.emit.bind(n,t))})),n._read=function(t){debug("wrapped _read",t),r&&(r=!1,e.resume())},n},Readable._fromList=fromList,Writable.WritableState=WritableState,inherits$1(Writable,EventEmitter),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=nop),n.ended?writeAfterEnd(this,r):validChunk(this,n,e,r)&&(n.pendingcb++,i=writeOrBuffer(this,n,e,t,r)),i},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Writable.prototype._write=function(e,t,r){r(new Error("not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||endWritable(this,n,r)},inherits$1(Duplex,Readable);for(var keys=Object.keys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||nextTick(onEndNT,this)}function onEndNT(e){e.end()}function TransformState(e){this.afterTransform=function(t,r){return afterTransform(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r),i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);Duplex.call(this,e),this._transformState=new TransformState(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){done(t,e)})):done(t)}))}function done(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);Transform.call(this,e)}function Stream(){EventEmitter.call(this)}inherits$1(Transform,Duplex),Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,e,t)},Transform.prototype._transform=function(e,t,r){throw new Error("Not implemented")},Transform.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},inherits$1(PassThrough,Transform),PassThrough.prototype._transform=function(e,t,r){r(null,e)},inherits$1(Stream,EventEmitter),Stream.Readable=Readable,Stream.Writable=Writable,Stream.Duplex=Duplex,Stream.Transform=Transform,Stream.PassThrough=PassThrough,Stream.Stream=Stream,Stream.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",o));var a=!1;function s(){a||(a=!0,e.end())}function o(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===EventEmitter.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",o),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e};var support=createCommonjsModule((function(e,t){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==Buffer,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(r),t.blob=0===n.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!Stream.Readable}catch(e){t.nodestream=!1}})),support_1=support.base64,support_2=support.array,support_3=support.string,support_4=support.arraybuffer,support_5=support.nodebuffer,support_6=support.uint8array,support_7=support.blob,support_8=support.nodestream,_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode=function(e){for(var t,r,n,i,a,s,o,u=[],c=0,l=e.length,h=l,d="string"!==utils.getTypeOf(e);c<e.length;)h=l-c,d?(t=e[c++],r=c<l?e[c++]:0,n=c<l?e[c++]:0):(t=e.charCodeAt(c++),r=c<l?e.charCodeAt(c++):0,n=c<l?e.charCodeAt(c++):0),i=t>>2,a=(3&t)<<4|r>>4,s=h>1?(15&r)<<2|n>>6:64,o=h>2?63&n:64,u.push(_keyStr.charAt(i)+_keyStr.charAt(a)+_keyStr.charAt(s)+_keyStr.charAt(o));return u.join("")},decode=function(e){var t,r,n,i,a,s,o=0,u=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var c,l=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===_keyStr.charAt(64)&&l--,e.charAt(e.length-2)===_keyStr.charAt(64)&&l--,l%1!=0)throw new Error("Invalid base64 input, bad content length.");for(c=support.uint8array?new Uint8Array(0|l):new Array(0|l);o<e.length;)t=_keyStr.indexOf(e.charAt(o++))<<2|(i=_keyStr.indexOf(e.charAt(o++)))>>4,r=(15&i)<<4|(a=_keyStr.indexOf(e.charAt(o++)))>>2,n=(3&a)<<6|(s=_keyStr.indexOf(e.charAt(o++))),c[u++]=t,64!==a&&(c[u++]=r),64!==s&&(c[u++]=n);return c},base64={encode:encode,decode:decode},nodejsUtils={isNode:void 0!==Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}},setImmediateShim="function"==typeof setImmediate?setImmediate:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)},Mutation=commonjsGlobal.MutationObserver||commonjsGlobal.WebKitMutationObserver,scheduleDrain,draining$1;if(Mutation){var called=0,observer$1=new Mutation(nextTick$1),element=commonjsGlobal.document.createTextNode("");observer$1.observe(element,{characterData:!0}),scheduleDrain=function(){element.data=called=++called%2}}else if(commonjsGlobal.setImmediate||void 0===commonjsGlobal.MessageChannel)scheduleDrain="document"in commonjsGlobal&&"onreadystatechange"in commonjsGlobal.document.createElement("script")?function(){var e=commonjsGlobal.document.createElement("script");e.onreadystatechange=function(){nextTick$1(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},commonjsGlobal.document.documentElement.appendChild(e)}:function(){setTimeout(nextTick$1,0)};else{var channel=new commonjsGlobal.MessageChannel;channel.port1.onmessage=nextTick$1,scheduleDrain=function(){channel.port2.postMessage(0)}}var queue$1=[];function nextTick$1(){var e,t;draining$1=!0;for(var r=queue$1.length;r;){for(t=queue$1,queue$1=[],e=-1;++e<r;)t[e]();r=queue$1.length}draining$1=!1}var lib=immediate;function immediate(e){1!==queue$1.push(e)||draining$1||scheduleDrain()}function INTERNAL(){}var handlers={},REJECTED=["REJECTED"],FULFILLED=["FULFILLED"],PENDING=["PENDING"],lib$1=Promise$1;function Promise$1(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=PENDING,this.queue=[],this.outcome=void 0,e!==INTERNAL&&safelyResolveThenable(this,e)}function QueueItem(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function unwrap(e,t,r){lib((function(){var n;try{n=t(r)}catch(t){return handlers.reject(e,t)}n===e?handlers.reject(e,new TypeError("Cannot resolve promise with itself")):handlers.resolve(e,n)}))}function getThen(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function safelyResolveThenable(e,t){var r=!1;function n(t){r||(r=!0,handlers.reject(e,t))}function i(t){r||(r=!0,handlers.resolve(e,t))}var a=tryCatch((function(){t(i,n)}));"error"===a.status&&n(a.value)}function tryCatch(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function resolve(e){return e instanceof this?e:handlers.resolve(new this(INTERNAL),e)}function reject(e){var t=new this(INTERNAL);return handlers.reject(t,e)}function all(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i=new Array(r),a=0,s=-1,o=new this(INTERNAL);++s<r;)u(e[s],s);return o;function u(e,s){t.resolve(e).then((function(e){i[s]=e,++a!==r||n||(n=!0,handlers.resolve(o,i))}),(function(e){n||(n=!0,handlers.reject(o,e))}))}}function race(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i,a=-1,s=new this(INTERNAL);++a<r;)i=e[a],t.resolve(i).then((function(e){n||(n=!0,handlers.resolve(s,e))}),(function(e){n||(n=!0,handlers.reject(s,e))}));return s}Promise$1.prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},Promise$1.prototype.catch=function(e){return this.then(null,e)},Promise$1.prototype.then=function(e,t){if("function"!=typeof e&&this.state===FULFILLED||"function"!=typeof t&&this.state===REJECTED)return this;var r=new this.constructor(INTERNAL);this.state!==PENDING?unwrap(r,this.state===FULFILLED?e:t,this.outcome):this.queue.push(new QueueItem(r,e,t));return r},QueueItem.prototype.callFulfilled=function(e){handlers.resolve(this.promise,e)},QueueItem.prototype.otherCallFulfilled=function(e){unwrap(this.promise,this.onFulfilled,e)},QueueItem.prototype.callRejected=function(e){handlers.reject(this.promise,e)},QueueItem.prototype.otherCallRejected=function(e){unwrap(this.promise,this.onRejected,e)},handlers.resolve=function(e,t){var r=tryCatch(getThen,t);if("error"===r.status)return handlers.reject(e,r.value);var n=r.value;if(n)safelyResolveThenable(e,n);else{e.state=FULFILLED,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},handlers.reject=function(e,t){e.state=REJECTED,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},Promise$1.resolve=resolve,Promise$1.reject=reject,Promise$1.all=all,Promise$1.race=race;var ES6Promise=null;ES6Promise="undefined"!=typeof Promise?Promise:lib$1;var external={Promise:ES6Promise},utils=createCommonjsModule((function(e,t){function r(e){return e}function n(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}t.newBlob=function(e,r){t.checkSupport("blob");try{return new Blob([e],{type:r})}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var i={stringifyByChunk:function(e,t,r){var n=[],i=0,a=e.length;if(a<=r)return String.fromCharCode.apply(null,e);for(;i<a;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,a)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,a)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return support.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return support.nodebuffer&&1===String.fromCharCode.apply(null,nodejsUtils.allocBuffer(1)).length}catch(e){return!1}}()}};function a(e){var r=65536,n=t.getTypeOf(e),a=!0;if("uint8array"===n?a=i.applyCanBeUsed.uint8array:"nodebuffer"===n&&(a=i.applyCanBeUsed.nodebuffer),a)for(;r>1;)try{return i.stringifyByChunk(e,n,r)}catch(e){r=Math.floor(r/2)}return i.stringifyByChar(e)}function s(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}t.applyFromCharCode=a;var o={};o.string={string:r,array:function(e){return n(e,new Array(e.length))},arraybuffer:function(e){return o.string.uint8array(e).buffer},uint8array:function(e){return n(e,new Uint8Array(e.length))},nodebuffer:function(e){return n(e,nodejsUtils.allocBuffer(e.length))}},o.array={string:a,array:r,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return nodejsUtils.newBufferFrom(e)}},o.arraybuffer={string:function(e){return a(new Uint8Array(e))},array:function(e){return s(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:r,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return nodejsUtils.newBufferFrom(new Uint8Array(e))}},o.uint8array={string:a,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:r,nodebuffer:function(e){return nodejsUtils.newBufferFrom(e)}},o.nodebuffer={string:a,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return o.nodebuffer.uint8array(e).buffer},uint8array:function(e){return s(e,new Uint8Array(e.length))},nodebuffer:r},t.transformTo=function(e,r){if(r||(r=""),!e)return r;t.checkSupport(e);var n=t.getTypeOf(r);return o[n][e](r)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":support.nodebuffer&&nodejsUtils.isBuffer(e)?"nodebuffer":support.uint8array&&e instanceof Uint8Array?"uint8array":support.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!support[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},t.delay=function(e,t,r){setImmediateShim((function(){e.apply(r||null,t||[])}))},t.inherits=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r},t.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},t.prepareContent=function(e,r,i,a,s){return external.Promise.resolve(r).then((function(e){return support.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new external.Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)})):e})).then((function(r){var o,u=t.getTypeOf(r);return u?("arraybuffer"===u?r=t.transformTo("uint8array",r):"string"===u&&(s?r=base64.decode(r):i&&!0!==a&&(r=n(o=r,support.uint8array?new Uint8Array(o.length):new Array(o.length)))),r):external.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}})),utils_1=utils.newBlob,utils_2=utils.applyFromCharCode,utils_3=utils.transformTo,utils_4=utils.getTypeOf,utils_5=utils.checkSupport,utils_6=utils.MAX_VALUE_16BITS,utils_7=utils.MAX_VALUE_32BITS,utils_8=utils.pretty,utils_9=utils.delay,utils_10=utils.inherits,utils_11=utils.extend,utils_12=utils.prepareContent;function GenericWorker(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}GenericWorker.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}};var GenericWorker_1=GenericWorker,utf8=createCommonjsModule((function(e,t){for(var r=new Array(256),n=0;n<256;n++)r[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;r[254]=r[254]=1;function i(){GenericWorker_1.call(this,"utf-8 decode"),this.leftOver=null}function a(){GenericWorker_1.call(this,"utf-8 encode")}t.utf8encode=function(e){return support.nodebuffer?nodejsUtils.newBufferFrom(e,"utf-8"):function(e){var t,r,n,i,a,s=e.length,o=0;for(i=0;i<s;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=support.uint8array?new Uint8Array(o):new Array(o),a=0,i=0;a<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t}(e)},t.utf8decode=function(e){return support.nodebuffer?utils.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,a,s=e.length,o=new Array(2*s);for(n=0,t=0;t<s;)if((i=e[t++])<128)o[n++]=i;else if((a=r[i])>4)o[n++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&t<s;)i=i<<6|63&e[t++],a--;a>1?o[n++]=65533:i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|1023&i)}return o.length!==n&&(o.subarray?o=o.subarray(0,n):o.length=n),utils.applyFromCharCode(o)}(e=utils.transformTo(support.uint8array?"uint8array":"array",e))},utils.inherits(i,GenericWorker_1),i.prototype.processChunk=function(e){var n=utils.transformTo(support.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(support.uint8array){var i=n;(n=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),n.set(i,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+r[e[n]]>t?n:t}(n),s=n;a!==n.length&&(support.uint8array?(s=n.subarray(0,a),this.leftOver=n.subarray(a,n.length)):(s=n.slice(0,a),this.leftOver=n.slice(a,n.length))),this.push({data:t.utf8decode(s),meta:e.meta})},i.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=i,utils.inherits(a,GenericWorker_1),a.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=a})),utf8_1=utf8.utf8encode,utf8_2=utf8.utf8decode,utf8_3=utf8.Utf8DecodeWorker,utf8_4=utf8.Utf8EncodeWorker;function ConvertWorker(e){GenericWorker_1.call(this,"ConvertWorker to "+e),this.destType=e}utils.inherits(ConvertWorker,GenericWorker_1),ConvertWorker.prototype.processChunk=function(e){this.push({data:utils.transformTo(this.destType,e.data),meta:e.meta})};var ConvertWorker_1=ConvertWorker,Readable$1=Stream.Readable;function NodejsStreamOutputAdapter(e,t,r){Readable$1.call(this,t),this._helper=e;var n=this;e.on("data",(function(e,t){n.push(e)||n._helper.pause(),r&&r(t)})).on("error",(function(e){n.emit("error",e)})).on("end",(function(){n.push(null)}))}utils.inherits(NodejsStreamOutputAdapter,Readable$1),NodejsStreamOutputAdapter.prototype._read=function(){this._helper.resume()};var NodejsStreamOutputAdapter_1=NodejsStreamOutputAdapter,NodejsStreamOutputAdapter$1=null;if(support.nodestream)try{NodejsStreamOutputAdapter$1=NodejsStreamOutputAdapter_1}catch(e){}function transformZipOutput(e,t,r){switch(e){case"blob":return utils.newBlob(utils.transformTo("arraybuffer",t),r);case"base64":return base64.encode(t);default:return utils.transformTo(e,t)}}function concat(e,t){var r,n=0,i=null,a=0;for(r=0;r<t.length;r++)a+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(a),r=0;r<t.length;r++)i.set(t[r],n),n+=t[r].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}function accumulate(e,t){return new external.Promise((function(r,n){var i=[],a=e._internalType,s=e._outputType,o=e._mimeType;e.on("data",(function(e,r){i.push(e),t&&t(r)})).on("error",(function(e){i=[],n(e)})).on("end",(function(){try{var e=transformZipOutput(s,concat(a,i),o);r(e)}catch(e){n(e)}i=[]})).resume()}))}function StreamHelper(e,t,r){var n=t;switch(t){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=t,this._mimeType=r,utils.checkSupport(n),this._worker=e.pipe(new ConvertWorker_1(n)),e.lock()}catch(e){this._worker=new GenericWorker_1("error"),this._worker.error(e)}}StreamHelper.prototype={accumulate:function(e){return accumulate(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){utils.delay(t,arguments,r)})),this},resume:function(){return utils.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(utils.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new NodejsStreamOutputAdapter$1(this,{objectMode:"nodebuffer"!==this._outputType},e)}};var StreamHelper_1=StreamHelper,base64$1=!1,binary=!1,dir=!1,createFolders=!0,date=null,compression=null,compressionOptions=null,comment=null,unixPermissions=null,dosPermissions=null,defaults$1={base64:base64$1,binary:binary,dir:dir,createFolders:createFolders,date:date,compression:compression,compressionOptions:compressionOptions,comment:comment,unixPermissions:unixPermissions,dosPermissions:dosPermissions},DEFAULT_BLOCK_SIZE=16384;function DataWorker(e){GenericWorker_1.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=utils.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}utils.inherits(DataWorker,GenericWorker_1),DataWorker.prototype.cleanUp=function(){GenericWorker_1.prototype.cleanUp.call(this),this.data=null},DataWorker.prototype.resume=function(){return!!GenericWorker_1.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,utils.delay(this._tickAndRepeat,[],this)),!0)},DataWorker.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(utils.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},DataWorker.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=DEFAULT_BLOCK_SIZE,t=null,r=Math.min(this.max,this.index+e);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,r);break;case"uint8array":t=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":t=this.data.slice(this.index,r)}return this.index=r,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})};var DataWorker_1=DataWorker;function DataLengthProbe(e){GenericWorker_1.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}utils.inherits(DataLengthProbe,GenericWorker_1),DataLengthProbe.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}GenericWorker_1.prototype.processChunk.call(this,e)};var DataLengthProbe_1=DataLengthProbe;function makeTable(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}var crcTable=makeTable();function crc32(e,t,r,n){var i=crcTable,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}function crc32str(e,t,r,n){var i=crcTable,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^i[255&(e^t.charCodeAt(s))];return-1^e}var crc32_1=function(e,t){return void 0!==e&&e.length?"string"!==utils.getTypeOf(e)?crc32(0|t,e,e.length,0):crc32str(0|t,e,e.length,0):0};function Crc32Probe(){GenericWorker_1.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}utils.inherits(Crc32Probe,GenericWorker_1),Crc32Probe.prototype.processChunk=function(e){this.streamInfo.crc32=crc32_1(e.data,this.streamInfo.crc32||0),this.push(e)};var Crc32Probe_1=Crc32Probe;function CompressedObject(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}CompressedObject.prototype={getContentWorker:function(){var e=new DataWorker_1(external.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new DataLengthProbe_1("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new DataWorker_1(external.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},CompressedObject.createWorkerFrom=function(e,t,r){return e.pipe(new Crc32Probe_1).pipe(new DataLengthProbe_1("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new DataLengthProbe_1("compressedSize")).withStreamInfo("compression",t)};var compressedObject=CompressedObject,ZipObject=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};ZipObject.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(t=t.pipe(new utf8.Utf8EncodeWorker)),!i&&n&&(t=t.pipe(new utf8.Utf8DecodeWorker))}catch(e){(t=new GenericWorker_1("error")).error(e)}return new StreamHelper_1(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof compressedObject&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new utf8.Utf8EncodeWorker)),compressedObject.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof compressedObject?this._data.getContentWorker():this._data instanceof GenericWorker_1?this._data:new DataWorker_1(this._data)}};for(var removedMethods=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],removedFn=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},i=0;i<removedMethods.length;i++)ZipObject.prototype[removedMethods[i]]=removedFn;var zipObject=ZipObject,common=createCommonjsModule((function(e,t){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,s;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)a=e[t],s.set(a,i),i+=a.length;return s}},a={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(r)})),common_1=common.assign,common_2=common.shrinkBuf,common_3=common.setTyped,common_4=common.Buf8,common_5=common.Buf16,common_6=common.Buf32,Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2;function zero(e){for(var t=e.length;--t>=0;)e[t]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES+2));zero(static_ltree);var static_dtree=new Array(2*D_CODES);zero(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=new Array(LENGTH_CODES);zero(base_length);var base_dist=new Array(D_CODES),static_l_desc,static_d_desc,static_bl_desc;function StaticTreeDesc(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function d_code(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function send_bits(e,t,r){e.bi_valid>Buf_size-r?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=r-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function send_code(e,t,r){send_bits(e,r[2*t],r[2*t+1])}function bi_reverse(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function bi_flush(e){16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,t){var r,n,i,a,s,o,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,_=t.stat_desc.max_length,p=0;for(a=0;a<=MAX_BITS;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<HEAP_SIZE;r++)(a=u[2*u[2*(n=e.heap[r])+1]+1]+1)>_&&(a=_,p++),u[2*n+1]=a,n>c||(e.bl_count[a]++,s=0,n>=f&&(s=d[n-f]),o=u[2*n],e.opt_len+=o*(a+s),h&&(e.static_len+=o*(l[2*n+1]+s)));if(0!==p){do{for(a=_-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[_]--,p-=2}while(p>0);for(a=_;0!==a;a--)for(n=e.bl_count[a];0!==n;)(i=e.heap[--r])>c||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}function gen_codes(e,t,r){var n,i,a=new Array(MAX_BITS+1),s=0;for(n=1;n<=MAX_BITS;n++)a[n]=s=s+r[n-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=bi_reverse(a[o]++,o))}}function tr_static_init(){var e,t,r,n,i,a=new Array(MAX_BITS+1);for(r=0,n=0;n<LENGTH_CODES-1;n++)for(base_length[n]=r,e=0;e<1<<extra_lbits[n];e++)_length_code[r++]=n;for(_length_code[r-1]=n,i=0,n=0;n<16;n++)for(base_dist[n]=i,e=0;e<1<<extra_dbits[n];e++)_dist_code[i++]=n;for(i>>=7;n<D_CODES;n++)for(base_dist[n]=i<<7,e=0;e<1<<extra_dbits[n]-7;e++)_dist_code[256+i++]=n;for(t=0;t<=MAX_BITS;t++)a[t]=0;for(e=0;e<=143;)static_ltree[2*e+1]=8,e++,a[8]++;for(;e<=255;)static_ltree[2*e+1]=9,e++,a[9]++;for(;e<=279;)static_ltree[2*e+1]=7,e++,a[7]++;for(;e<=287;)static_ltree[2*e+1]=8,e++,a[8]++;for(gen_codes(static_ltree,L_CODES+1,a),e=0;e<D_CODES;e++)static_dtree[2*e+1]=5,static_dtree[2*e]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(e){var t;for(t=0;t<L_CODES;t++)e.dyn_ltree[2*t]=0;for(t=0;t<D_CODES;t++)e.dyn_dtree[2*t]=0;for(t=0;t<BL_CODES;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*END_BLOCK]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,t,r,n){bi_windup(e),n&&(put_short(e,r),put_short(e,~r)),common.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function smaller(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function pqdownheap(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&smaller(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!smaller(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function compress_block(e,t,r){var n,i,a,s,o=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0===n?send_code(e,i,t):(send_code(e,(a=_length_code[i])+LITERALS+1,t),0!==(s=extra_lbits[a])&&send_bits(e,i-=base_length[a],s),send_code(e,a=d_code(--n),r),0!==(s=extra_dbits[a])&&send_bits(e,n-=base_dist[a],s))}while(o<e.last_lit);send_code(e,END_BLOCK,t)}function build_tree(e,t){var r,n,i,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE,r=0;r<u;r++)0!==a[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=s[2*i+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)pqdownheap(e,a,r);i=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,pqdownheap(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(a,c,e.bl_count)}function scan_tree(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++o<u&&i===s||(o<c?e.bl_tree[2*i]+=o:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*REP_3_6]++):o<=10?e.bl_tree[2*REPZ_3_10]++:e.bl_tree[2*REPZ_11_138]++,o=0,a=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4))}function send_tree(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++o<u&&i===s)){if(o<c)do{send_code(e,i,e.bl_tree)}while(0!=--o);else 0!==i?(i!==a&&(send_code(e,i,e.bl_tree),o--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,o-3,2)):o<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,o-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,o-11,7));o=0,a=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4)}}function build_bl_tree(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES-1;t>=3&&0===e.bl_tree[2*bl_order[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function send_all_trees(e,t,r,n){var i;for(send_bits(e,t-257,5),send_bits(e,r-1,5),send_bits(e,n-4,4),i=0;i<n;i++)send_bits(e,e.bl_tree[2*bl_order[i]+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,r-1)}function detect_data_type(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return Z_BINARY;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Z_TEXT;for(t=32;t<LITERALS;t++)if(0!==e.dyn_ltree[2*t])return Z_TEXT;return Z_BINARY}zero(base_dist);var static_init_done=!1;function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,t,r,n){send_bits(e,(STORED_BLOCK<<1)+(n?1:0),3),copy_block(e,t,r,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,t,r,n){var i,a,s=0;e.level>0?(e.strm.data_type===Z_UNKNOWN&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),s=build_bl_tree(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==t?_tr_stored_block(e,t,r,n):e.strategy===Z_FIXED||a===i?(send_bits(e,(STATIC_TREES<<1)+(n?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(n?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),n&&bi_windup(e)}function _tr_tally(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(_length_code[r]+LITERALS+1)]++,e.dyn_dtree[2*d_code(t)]++),e.last_lit===e.lit_bufsize-1}var _tr_init_1=_tr_init,_tr_stored_block_1=_tr_stored_block,_tr_flush_block_1=_tr_flush_block,_tr_tally_1=_tr_tally,_tr_align_1=_tr_align,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};function adler32(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0}while(--s);i%=65521,a%=65521}return i|a<<16|0}var adler32_1=adler32;function makeTable$1(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}var crcTable$1=makeTable$1();function crc32$1(e,t,r,n){var i=crcTable$1,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}var crc32_1$1=crc32$1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_OK=0,Z_STREAM_END=1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED$1=4,Z_DEFAULT_STRATEGY=0,Z_UNKNOWN$1=2,Z_DEFLATED=8,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,MIN_MATCH$1=3,MAX_MATCH$1=258,MIN_LOOKAHEAD=MAX_MATCH$1+MIN_MATCH$1+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,configuration_table;function err(e,t){return e.msg=messages[t],t}function rank(e){return(e<<1)-(e>4?9:0)}function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}function flush_pending(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(common.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function flush_block_only(e,t){trees._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)}function put_byte(e,t){e.pending_buf[e.pending++]=t}function putShortMSB(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function read_buf(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,common.arraySet(t,e.input,e.next_in,i,r),1===e.state.wrap?e.adler=adler32_1(e.adler,t,i,r):2===e.state.wrap&&(e.adler=crc32_1$1(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function longest_match(e,t){var r,n,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,c=e.window,l=e.w_mask,h=e.prev,d=e.strstart+MAX_MATCH$1,f=c[a+s-1],_=c[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(r=t)+s]===_&&c[r+s-1]===f&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<d);if(n=MAX_MATCH$1-(d-a),a=d-MAX_MATCH$1,n>s){if(e.match_start=t,s=n,n>=o)break;f=c[a+s-1],_=c[a+s]}}}while((t=h[t&l])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function fill_window(e){var t,r,n,i,a,s=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-MIN_LOOKAHEAD)){common.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=s?n-s:0}while(--r);t=r=s;do{n=e.prev[--t],e.prev[t]=n>=s?n-s:0}while(--r);i+=s}if(0===e.strm.avail_in)break;if(r=read_buf(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=MIN_MATCH$1)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+MIN_MATCH$1-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH$1)););}while(e.lookahead<MIN_LOOKAHEAD&&0!==e.strm.avail_in)}function deflate_stored(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fill_window(e),0===e.lookahead&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE;if(e.strstart-e.block_start>=e.w_size-MIN_LOOKAHEAD&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):(e.strstart>e.block_start&&(flush_block_only(e,!1),e.strm.avail_out),BS_NEED_MORE)}function deflate_fast(e,t){for(var r,n;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(r=0,e.lookahead>=MIN_MATCH$1&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r)),e.match_length>=MIN_MATCH$1)if(n=trees._tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH$1),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH$1){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=trees._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH$1-1?e.strstart:MIN_MATCH$1-1,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(e,t){for(var r,n,i;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(r=0,e.lookahead>=MIN_MATCH$1&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH$1-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r),e.match_length<=5&&(e.strategy===Z_FILTERED||e.match_length===MIN_MATCH$1&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH$1-1)),e.prev_length>=MIN_MATCH$1&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-MIN_MATCH$1,n=trees._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH$1),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=MIN_MATCH$1-1,e.strstart++,n&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}else if(e.match_available){if((n=trees._tr_tally(e,0,e.window[e.strstart-1]))&&flush_block_only(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=trees._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH$1-1?e.strstart:MIN_MATCH$1-1,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(e,t){for(var r,n,i,a,s=e.window;;){if(e.lookahead<=MAX_MATCH$1){if(fill_window(e),e.lookahead<=MAX_MATCH$1&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=MIN_MATCH$1&&e.strstart>0&&(n=s[i=e.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=e.strstart+MAX_MATCH$1;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);e.match_length=MAX_MATCH$1-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH$1?(r=trees._tr_tally(e,1,e.match_length-MIN_MATCH$1),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=trees._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(e,t){for(var r;;){if(0===e.lookahead&&(fill_window(e),0===e.lookahead)){if(t===Z_NO_FLUSH)return BS_NEED_MORE;break}if(e.match_length=0,r=trees._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function lm_init(e){e.window_size=2*e.w_size,zero$1(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH$1-1,e.match_available=0,e.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new common.Buf16(2*HEAP_SIZE$1),this.dyn_dtree=new common.Buf16(2*(2*D_CODES$1+1)),this.bl_tree=new common.Buf16(2*(2*BL_CODES$1+1)),zero$1(this.dyn_ltree),zero$1(this.dyn_dtree),zero$1(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new common.Buf16(MAX_BITS$1+1),this.heap=new common.Buf16(2*L_CODES$1+1),zero$1(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new common.Buf16(2*L_CODES$1+1),zero$1(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN$1,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?INIT_STATE:BUSY_STATE,e.adler=2===t.wrap?0:1,t.last_flush=Z_NO_FLUSH,trees._tr_init(t),Z_OK):err(e,Z_STREAM_ERROR)}function deflateReset(e){var t=deflateResetKeep(e);return t===Z_OK&&lm_init(e.state),t}function deflateSetHeader(e,t){return e&&e.state?2!==e.state.wrap?Z_STREAM_ERROR:(e.state.gzhead=t,Z_OK):Z_STREAM_ERROR}function deflateInit2(e,t,r,n,i,a){if(!e)return Z_STREAM_ERROR;var s=1;if(t===Z_DEFAULT_COMPRESSION&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>MAX_MEM_LEVEL||r!==Z_DEFLATED||n<8||n>15||t<0||t>9||a<0||a>Z_FIXED$1)return err(e,Z_STREAM_ERROR);8===n&&(n=9);var o=new DeflateState;return e.state=o,o.strm=e,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+MIN_MATCH$1-1)/MIN_MATCH$1),o.window=new common.Buf8(2*o.w_size),o.head=new common.Buf16(o.hash_size),o.prev=new common.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new common.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=a,o.method=r,deflateReset(e)}function deflateInit(e,t){return deflateInit2(e,t,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(e,t){var r,n,i,a;if(!e||!e.state||t>Z_BLOCK||t<0)return e?err(e,Z_STREAM_ERROR):Z_STREAM_ERROR;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===FINISH_STATE&&t!==Z_FINISH)return err(e,0===e.avail_out?Z_BUF_ERROR:Z_STREAM_ERROR);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===INIT_STATE)if(2===n.wrap)e.adler=0,put_byte(n,31),put_byte(n,139),put_byte(n,8),n.gzhead?(put_byte(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),put_byte(n,255&n.gzhead.time),put_byte(n,n.gzhead.time>>8&255),put_byte(n,n.gzhead.time>>16&255),put_byte(n,n.gzhead.time>>24&255),put_byte(n,9===n.level?2:n.strategy>=Z_HUFFMAN_ONLY||n.level<2?4:0),put_byte(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(put_byte(n,255&n.gzhead.extra.length),put_byte(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=crc32_1$1(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=EXTRA_STATE):(put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,9===n.level?2:n.strategy>=Z_HUFFMAN_ONLY||n.level<2?4:0),put_byte(n,OS_CODE),n.status=BUSY_STATE);else{var s=Z_DEFLATED+(n.w_bits-8<<4)<<8;s|=(n.strategy>=Z_HUFFMAN_ONLY||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(s|=PRESET_DICT),s+=31-s%31,n.status=BUSY_STATE,putShortMSB(n,s),0!==n.strstart&&(putShortMSB(n,e.adler>>>16),putShortMSB(n,65535&e.adler)),e.adler=1}if(n.status===EXTRA_STATE)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1$1(e.adler,n.pending_buf,n.pending-i,i)),flush_pending(e),i=n.pending,n.pending!==n.pending_buf_size));)put_byte(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1$1(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=NAME_STATE)}else n.status=NAME_STATE;if(n.status===NAME_STATE)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1$1(e.adler,n.pending_buf,n.pending-i,i)),flush_pending(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}a=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,put_byte(n,a)}while(0!==a);n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1$1(e.adler,n.pending_buf,n.pending-i,i)),0===a&&(n.gzindex=0,n.status=COMMENT_STATE)}else n.status=COMMENT_STATE;if(n.status===COMMENT_STATE)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1$1(e.adler,n.pending_buf,n.pending-i,i)),flush_pending(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}a=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,put_byte(n,a)}while(0!==a);n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1$1(e.adler,n.pending_buf,n.pending-i,i)),0===a&&(n.status=HCRC_STATE)}else n.status=HCRC_STATE;if(n.status===HCRC_STATE&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&flush_pending(e),n.pending+2<=n.pending_buf_size&&(put_byte(n,255&e.adler),put_byte(n,e.adler>>8&255),e.adler=0,n.status=BUSY_STATE)):n.status=BUSY_STATE),0!==n.pending){if(flush_pending(e),0===e.avail_out)return n.last_flush=-1,Z_OK}else if(0===e.avail_in&&rank(t)<=rank(r)&&t!==Z_FINISH)return err(e,Z_BUF_ERROR);if(n.status===FINISH_STATE&&0!==e.avail_in)return err(e,Z_BUF_ERROR);if(0!==e.avail_in||0!==n.lookahead||t!==Z_NO_FLUSH&&n.status!==FINISH_STATE){var o=n.strategy===Z_HUFFMAN_ONLY?deflate_huff(n,t):n.strategy===Z_RLE?deflate_rle(n,t):configuration_table[n.level].func(n,t);if(o!==BS_FINISH_STARTED&&o!==BS_FINISH_DONE||(n.status=FINISH_STATE),o===BS_NEED_MORE||o===BS_FINISH_STARTED)return 0===e.avail_out&&(n.last_flush=-1),Z_OK;if(o===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH?trees._tr_align(n):t!==Z_BLOCK&&(trees._tr_stored_block(n,0,0,!1),t===Z_FULL_FLUSH&&(zero$1(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),flush_pending(e),0===e.avail_out))return n.last_flush=-1,Z_OK}return t!==Z_FINISH?Z_OK:n.wrap<=0?Z_STREAM_END:(2===n.wrap?(put_byte(n,255&e.adler),put_byte(n,e.adler>>8&255),put_byte(n,e.adler>>16&255),put_byte(n,e.adler>>24&255),put_byte(n,255&e.total_in),put_byte(n,e.total_in>>8&255),put_byte(n,e.total_in>>16&255),put_byte(n,e.total_in>>24&255)):(putShortMSB(n,e.adler>>>16),putShortMSB(n,65535&e.adler)),flush_pending(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Z_OK:Z_STREAM_END)}function deflateEnd(e){var t;return e&&e.state?(t=e.state.status)!==INIT_STATE&&t!==EXTRA_STATE&&t!==NAME_STATE&&t!==COMMENT_STATE&&t!==HCRC_STATE&&t!==BUSY_STATE&&t!==FINISH_STATE?err(e,Z_STREAM_ERROR):(e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR):Z_OK):Z_STREAM_ERROR}function deflateSetDictionary(e,t){var r,n,i,a,s,o,u,c,l=t.length;if(!e||!e.state)return Z_STREAM_ERROR;if(2===(a=(r=e.state).wrap)||1===a&&r.status!==INIT_STATE||r.lookahead)return Z_STREAM_ERROR;for(1===a&&(e.adler=adler32_1(e.adler,t,l,0)),r.wrap=0,l>=r.w_size&&(0===a&&(zero$1(r.head),r.strstart=0,r.block_start=0,r.insert=0),c=new common.Buf8(r.w_size),common.arraySet(c,t,l-r.w_size,r.w_size,0),t=c,l=r.w_size),s=e.avail_in,o=e.next_in,u=e.input,e.avail_in=l,e.next_in=0,e.input=t,fill_window(r);r.lookahead>=MIN_MATCH$1;){n=r.strstart,i=r.lookahead-(MIN_MATCH$1-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+MIN_MATCH$1-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--i);r.strstart=n,r.lookahead=MIN_MATCH$1-1,fill_window(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=MIN_MATCH$1-1,r.match_available=0,e.next_in=o,e.input=u,e.avail_in=s,r.wrap=a,Z_OK}configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2=deflate,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo:deflateInfo},STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(e){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=!1}for(var _utf8len=new common.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=function(e){var t,r,n,i,a,s=e.length,o=0;for(i=0;i<s;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new common.Buf8(o),a=0,i=0;a<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t};function buf2binstring(e,t){if(t<65534&&(e.subarray&&STR_APPLY_UIA_OK||!e.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,common.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}var buf2binstring_1=function(e){return buf2binstring(e,e.length)},binstring2buf=function(e){for(var t=new common.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},buf2string=function(e,t){var r,n,i,a,s=t||e.length,o=new Array(2*s);for(n=0,r=0;r<s;)if((i=e[r++])<128)o[n++]=i;else if((a=_utf8len[i])>4)o[n++]=65533,r+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&r<s;)i=i<<6|63&e[r++],a--;a>1?o[n++]=65533:i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|1023&i)}return buf2binstring(o,n)},utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+_utf8len[e[r]]>t?r:t},strings={string2buf:string2buf,buf2binstring:buf2binstring_1,binstring2buf:binstring2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream,toString$1=Object.prototype.toString,Z_NO_FLUSH$1=0,Z_FINISH$1=4,Z_OK$1=0,Z_STREAM_END$1=1,Z_SYNC_FLUSH=2,Z_DEFAULT_COMPRESSION$1=-1,Z_DEFAULT_STRATEGY$1=0,Z_DEFLATED$1=8;function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);this.options=common.assign({level:Z_DEFAULT_COMPRESSION$1,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY$1,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var r=deflate_1.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Z_OK$1)throw new Error(messages[r]);if(t.header&&deflate_1.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"==typeof t.dictionary?strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$1.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=deflate_1.deflateSetDictionary(this.strm,n))!==Z_OK$1)throw new Error(messages[r]);this._dict_set=!0}}function deflate$1(e,t){var r=new Deflate(t);if(r.push(e,!0),r.err)throw r.msg||messages[r.err];return r.result}function deflateRaw(e,t){return(t=t||{}).raw=!0,deflate$1(e,t)}function gzip(e,t){return(t=t||{}).gzip=!0,deflate$1(e,t)}Deflate.prototype.push=function(e,t){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?Z_FINISH$1:Z_NO_FLUSH$1,"string"==typeof e?i.input=strings.string2buf(e):"[object ArrayBuffer]"===toString$1.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new common.Buf8(a),i.next_out=0,i.avail_out=a),(r=deflate_1.deflate(i,n))!==Z_STREAM_END$1&&r!==Z_OK$1)return this.onEnd(r),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||n!==Z_FINISH$1&&n!==Z_SYNC_FLUSH)||("string"===this.options.to?this.onData(strings.buf2binstring(common.shrinkBuf(i.output,i.next_out))):this.onData(common.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&r!==Z_STREAM_END$1);return n===Z_FINISH$1?(r=deflate_1.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Z_OK$1):n!==Z_SYNC_FLUSH||(this.onEnd(Z_OK$1),i.avail_out=0,!0)},Deflate.prototype.onData=function(e){this.chunks.push(e)},Deflate.prototype.onEnd=function(e){e===Z_OK$1&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Deflate_1=Deflate,deflate_2$1=deflate$1,deflateRaw_1=deflateRaw,gzip_1=gzip,deflate_1$1={Deflate:Deflate_1,deflate:deflate_2$1,deflateRaw:deflateRaw_1,gzip:gzip_1},BAD=30,TYPE=12,inffast=function(e,t){var r,n,i,a,s,o,u,c,l,h,d,f,_,p,m,g,b,y,v,w,k,E,S,A,T;r=e.state,n=e.next_in,A=e.input,i=n+(e.avail_in-5),a=e.next_out,T=e.output,s=a-(t-e.avail_out),o=a+(e.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,h=r.wnext,d=r.window,f=r.hold,_=r.bits,p=r.lencode,m=r.distcode,g=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{_<15&&(f+=A[n++]<<_,_+=8,f+=A[n++]<<_,_+=8),y=p[f&g];t:for(;;){if(f>>>=v=y>>>24,_-=v,0===(v=y>>>16&255))T[a++]=65535&y;else{if(!(16&v)){if(0==(64&v)){y=p[(65535&y)+(f&(1<<v)-1)];continue t}if(32&v){r.mode=TYPE;break e}e.msg="invalid literal/length code",r.mode=BAD;break e}w=65535&y,(v&=15)&&(_<v&&(f+=A[n++]<<_,_+=8),w+=f&(1<<v)-1,f>>>=v,_-=v),_<15&&(f+=A[n++]<<_,_+=8,f+=A[n++]<<_,_+=8),y=m[f&b];r:for(;;){if(f>>>=v=y>>>24,_-=v,!(16&(v=y>>>16&255))){if(0==(64&v)){y=m[(65535&y)+(f&(1<<v)-1)];continue r}e.msg="invalid distance code",r.mode=BAD;break e}if(k=65535&y,_<(v&=15)&&(f+=A[n++]<<_,(_+=8)<v&&(f+=A[n++]<<_,_+=8)),(k+=f&(1<<v)-1)>u){e.msg="invalid distance too far back",r.mode=BAD;break e}if(f>>>=v,_-=v,k>(v=a-s)){if((v=k-v)>l&&r.sane){e.msg="invalid distance too far back",r.mode=BAD;break e}if(E=0,S=d,0===h){if(E+=c-v,v<w){w-=v;do{T[a++]=d[E++]}while(--v);E=a-k,S=T}}else if(h<v){if(E+=c+h-v,(v-=h)<w){w-=v;do{T[a++]=d[E++]}while(--v);if(E=0,h<w){w-=v=h;do{T[a++]=d[E++]}while(--v);E=a-k,S=T}}}else if(E+=h-v,v<w){w-=v;do{T[a++]=d[E++]}while(--v);E=a-k,S=T}for(;w>2;)T[a++]=S[E++],T[a++]=S[E++],T[a++]=S[E++],w-=3;w&&(T[a++]=S[E++],w>1&&(T[a++]=S[E++]))}else{E=a-k;do{T[a++]=T[E++],T[a++]=T[E++],T[a++]=T[E++],w-=3}while(w>2);w&&(T[a++]=T[E++],w>1&&(T[a++]=T[E++]))}break}}break}}while(n<i&&a<o);n-=w=_>>3,f&=(1<<(_-=w<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=a<o?o-a+257:257-(a-o),r.hold=f,r.bits=_},MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],inftrees=function(e,t,r,n,i,a,s,o){var u,c,l,h,d,f,_,p,m,g=o.bits,b=0,y=0,v=0,w=0,k=0,E=0,S=0,A=0,T=0,C=0,I=null,x=0,R=new common.Buf16(MAXBITS+1),O=new common.Buf16(MAXBITS+1),M=null,P=0;for(b=0;b<=MAXBITS;b++)R[b]=0;for(y=0;y<n;y++)R[t[r+y]]++;for(k=g,w=MAXBITS;w>=1&&0===R[w];w--);if(k>w&&(k=w),0===w)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(v=1;v<w&&0===R[v];v++);for(k<v&&(k=v),A=1,b=1;b<=MAXBITS;b++)if(A<<=1,(A-=R[b])<0)return-1;if(A>0&&(e===CODES||1!==w))return-1;for(O[1]=0,b=1;b<MAXBITS;b++)O[b+1]=O[b]+R[b];for(y=0;y<n;y++)0!==t[r+y]&&(s[O[t[r+y]]++]=y);if(e===CODES?(I=M=s,f=19):e===LENS?(I=lbase,x-=257,M=lext,P-=257,f=256):(I=dbase,M=dext,f=-1),C=0,y=0,b=v,d=a,E=k,S=0,l=-1,h=(T=1<<k)-1,e===LENS&&T>ENOUGH_LENS||e===DISTS&&T>ENOUGH_DISTS)return 1;for(;;){_=b-S,s[y]<f?(p=0,m=s[y]):s[y]>f?(p=M[P+s[y]],m=I[x+s[y]]):(p=96,m=0),u=1<<b-S,v=c=1<<E;do{i[d+(C>>S)+(c-=u)]=_<<24|p<<16|m|0}while(0!==c);for(u=1<<b-1;C&u;)u>>=1;if(0!==u?(C&=u-1,C+=u):C=0,y++,0==--R[b]){if(b===w)break;b=t[r+s[y]]}if(b>k&&(C&h)!==l){for(0===S&&(S=k),d+=v,A=1<<(E=b-S);E+S<w&&!((A-=R[E+S])<=0);)E++,A<<=1;if(T+=1<<E,e===LENS&&T>ENOUGH_LENS||e===DISTS&&T>ENOUGH_DISTS)return 1;i[l=C&h]=k<<24|E<<16|d-a|0}}return 0!==C&&(i[d+C]=b-S<<24|64<<16|0),o.bits=k,0},CODES$1=0,LENS$1=1,DISTS$1=2,Z_FINISH$2=4,Z_BLOCK$1=5,Z_TREES=6,Z_OK$2=0,Z_STREAM_END$2=1,Z_NEED_DICT=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR$1=-5,Z_DEFLATED$2=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE$1=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD$1=30,MEM=31,SYNC=32,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,MAX_WBITS$1=15,DEF_WBITS=MAX_WBITS$1;function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new common.Buf16(320),this.work=new common.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new common.Buf32(ENOUGH_LENS$1),t.distcode=t.distdyn=new common.Buf32(ENOUGH_DISTS$1),t.sane=1,t.back=-1,Z_OK$2):Z_STREAM_ERROR$1}function inflateReset(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR$1}function inflateReset2(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,inflateReset(e))):Z_STREAM_ERROR$1}function inflateInit2(e,t){var r,n;return e?(n=new InflateState,e.state=n,n.window=null,(r=inflateReset2(e,t))!==Z_OK$2&&(e.state=null),r):Z_STREAM_ERROR$1}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}var virgin=!0,lenfix,distfix;function fixedtables(e){if(virgin){var t;for(lenfix=new common.Buf32(512),distfix=new common.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS$1,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS$1,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,r,n){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new common.Buf8(a.wsize)),n>=a.wsize?(common.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),common.arraySet(a.window,t,r-n,i,a.wnext),(n-=i)?(common.arraySet(a.window,t,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function inflate(e,t){var r,n,i,a,s,o,u,c,l,h,d,f,_,p,m,g,b,y,v,w,k,E,S,A,T=0,C=new common.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR$1;(r=e.state).mode===TYPE$1&&(r.mode=TYPEDO),s=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,c=r.hold,l=r.bits,h=o,d=u,E=Z_OK$2;e:for(;;)switch(r.mode){case HEAD:if(0===r.wrap){r.mode=TYPEDO;break}for(;l<16;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(2&r.wrap&&35615===c){r.check=0,C[0]=255&c,C[1]=c>>>8&255,r.check=crc32_1$1(r.check,C,2,0),c=0,l=0,r.mode=FLAGS;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=BAD$1;break}if((15&c)!==Z_DEFLATED$2){e.msg="unknown compression method",r.mode=BAD$1;break}if(l-=4,k=8+(15&(c>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){e.msg="invalid window size",r.mode=BAD$1;break}r.dmax=1<<k,e.adler=r.check=1,r.mode=512&c?DICTID:TYPE$1,c=0,l=0;break;case FLAGS:for(;l<16;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(r.flags=c,(255&r.flags)!==Z_DEFLATED$2){e.msg="unknown compression method",r.mode=BAD$1;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=BAD$1;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,r.check=crc32_1$1(r.check,C,2,0)),c=0,l=0,r.mode=TIME;case TIME:for(;l<32;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,r.check=crc32_1$1(r.check,C,4,0)),c=0,l=0,r.mode=OS;case OS:for(;l<16;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,r.check=crc32_1$1(r.check,C,2,0)),c=0,l=0,r.mode=EXLEN;case EXLEN:if(1024&r.flags){for(;l<16;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,r.check=crc32_1$1(r.check,C,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=EXTRA;case EXTRA:if(1024&r.flags&&((f=r.length)>o&&(f=o),f&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),common.arraySet(r.head.extra,n,a,f,k)),512&r.flags&&(r.check=crc32_1$1(r.check,n,f,a)),o-=f,a+=f,r.length-=f),r.length))break e;r.length=0,r.mode=NAME;case NAME:if(2048&r.flags){if(0===o)break e;f=0;do{k=n[a+f++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k))}while(k&&f<o);if(512&r.flags&&(r.check=crc32_1$1(r.check,n,f,a)),o-=f,a+=f,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=COMMENT;case COMMENT:if(4096&r.flags){if(0===o)break e;f=0;do{k=n[a+f++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k))}while(k&&f<o);if(512&r.flags&&(r.check=crc32_1$1(r.check,n,f,a)),o-=f,a+=f,k)break e}else r.head&&(r.head.comment=null);r.mode=HCRC;case HCRC:if(512&r.flags){for(;l<16;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=BAD$1;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TYPE$1;break;case DICTID:for(;l<32;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}e.adler=r.check=zswap32(c),c=0,l=0,r.mode=DICT;case DICT:if(0===r.havedict)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=o,r.hold=c,r.bits=l,Z_NEED_DICT;e.adler=r.check=1,r.mode=TYPE$1;case TYPE$1:if(t===Z_BLOCK$1||t===Z_TREES)break e;case TYPEDO:if(r.last){c>>>=7&l,l-=7&l,r.mode=CHECK;break}for(;l<3;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}switch(r.last=1&c,l-=1,3&(c>>>=1)){case 0:r.mode=STORED;break;case 1:if(fixedtables(r),r.mode=LEN_,t===Z_TREES){c>>>=2,l-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg="invalid block type",r.mode=BAD$1}c>>>=2,l-=2;break;case STORED:for(c>>>=7&l,l-=7&l;l<32;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=BAD$1;break}if(r.length=65535&c,c=0,l=0,r.mode=COPY_,t===Z_TREES)break e;case COPY_:r.mode=COPY;case COPY:if(f=r.length){if(f>o&&(f=o),f>u&&(f=u),0===f)break e;common.arraySet(i,n,a,f,s),o-=f,a+=f,u-=f,s+=f,r.length-=f;break}r.mode=TYPE$1;break;case TABLE:for(;l<14;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=BAD$1;break}r.have=0,r.mode=LENLENS;case LENLENS:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.lens[I[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},E=inftrees(CODES$1,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,E){e.msg="invalid code lengths set",r.mode=BAD$1;break}r.have=0,r.mode=CODELENS;case CODELENS:for(;r.have<r.nlen+r.ndist;){for(;g=(T=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,b=65535&T,!((m=T>>>24)<=l);){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(b<16)c>>>=m,l-=m,r.lens[r.have++]=b;else{if(16===b){for(A=m+2;l<A;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(c>>>=m,l-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=BAD$1;break}k=r.lens[r.have-1],f=3+(3&c),c>>>=2,l-=2}else if(17===b){for(A=m+3;l<A;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}l-=m,k=0,f=3+(7&(c>>>=m)),c>>>=3,l-=3}else{for(A=m+7;l<A;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}l-=m,k=0,f=11+(127&(c>>>=m)),c>>>=7,l-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=BAD$1;break}for(;f--;)r.lens[r.have++]=k}}if(r.mode===BAD$1)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=BAD$1;break}if(r.lenbits=9,S={bits:r.lenbits},E=inftrees(LENS$1,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,E){e.msg="invalid literal/lengths set",r.mode=BAD$1;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},E=inftrees(DISTS$1,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,E){e.msg="invalid distances set",r.mode=BAD$1;break}if(r.mode=LEN_,t===Z_TREES)break e;case LEN_:r.mode=LEN;case LEN:if(o>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=o,r.hold=c,r.bits=l,inffast(e,d),s=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,c=r.hold,l=r.bits,r.mode===TYPE$1&&(r.back=-1);break}for(r.back=0;g=(T=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,b=65535&T,!((m=T>>>24)<=l);){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(g&&0==(240&g)){for(y=m,v=g,w=b;g=(T=r.lencode[w+((c&(1<<y+v)-1)>>y)])>>>16&255,b=65535&T,!(y+(m=T>>>24)<=l);){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}c>>>=y,l-=y,r.back+=y}if(c>>>=m,l-=m,r.back+=m,r.length=b,0===g){r.mode=LIT;break}if(32&g){r.back=-1,r.mode=TYPE$1;break}if(64&g){e.msg="invalid literal/length code",r.mode=BAD$1;break}r.extra=15&g,r.mode=LENEXT;case LENEXT:if(r.extra){for(A=r.extra;l<A;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DIST;case DIST:for(;g=(T=r.distcode[c&(1<<r.distbits)-1])>>>16&255,b=65535&T,!((m=T>>>24)<=l);){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(0==(240&g)){for(y=m,v=g,w=b;g=(T=r.distcode[w+((c&(1<<y+v)-1)>>y)])>>>16&255,b=65535&T,!(y+(m=T>>>24)<=l);){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}c>>>=y,l-=y,r.back+=y}if(c>>>=m,l-=m,r.back+=m,64&g){e.msg="invalid distance code",r.mode=BAD$1;break}r.offset=b,r.extra=15&g,r.mode=DISTEXT;case DISTEXT:if(r.extra){for(A=r.extra;l<A;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=BAD$1;break}r.mode=MATCH;case MATCH:if(0===u)break e;if(f=d-u,r.offset>f){if((f=r.offset-f)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=BAD$1;break}f>r.wnext?(f-=r.wnext,_=r.wsize-f):_=r.wnext-f,f>r.length&&(f=r.length),p=r.window}else p=i,_=s-r.offset,f=r.length;f>u&&(f=u),u-=f,r.length-=f;do{i[s++]=p[_++]}while(--f);0===r.length&&(r.mode=LEN);break;case LIT:if(0===u)break e;i[s++]=r.length,u--,r.mode=LEN;break;case CHECK:if(r.wrap){for(;l<32;){if(0===o)break e;o--,c|=n[a++]<<l,l+=8}if(d-=u,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?crc32_1$1(r.check,i,d,s-d):adler32_1(r.check,i,d,s-d)),d=u,(r.flags?c:zswap32(c))!==r.check){e.msg="incorrect data check",r.mode=BAD$1;break}c=0,l=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break e;o--,c+=n[a++]<<l,l+=8}if(c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=BAD$1;break}c=0,l=0}r.mode=DONE;case DONE:E=Z_STREAM_END$2;break e;case BAD$1:E=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=o,r.hold=c,r.bits=l,(r.wsize||d!==e.avail_out&&r.mode<BAD$1&&(r.mode<CHECK||t!==Z_FINISH$2))&&updatewindow(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?crc32_1$1(r.check,i,d,e.next_out-d):adler32_1(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE$1?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0),(0===h&&0===d||t===Z_FINISH$2)&&E===Z_OK$2&&(E=Z_BUF_ERROR$1),E}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$2}function inflateGetHeader(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?Z_STREAM_ERROR$1:(r.head=t,t.done=!1,Z_OK$2):Z_STREAM_ERROR$1}function inflateSetDictionary(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==DICT?Z_STREAM_ERROR$1:r.mode===DICT&&adler32_1(1,t,n,0)!==r.check?Z_DATA_ERROR$1:updatewindow(e,t,n,n)?(r.mode=MEM,Z_MEM_ERROR):(r.havedict=1,Z_OK$2):Z_STREAM_ERROR$1}var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2=inflate,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo},constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader,toString$2=Object.prototype.toString;function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);this.options=common.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var r=inflate_1.inflateInit2(this.strm,t.windowBits);if(r!==constants.Z_OK)throw new Error(messages[r]);if(this.header=new gzheader,inflate_1.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$2.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=inflate_1.inflateSetDictionary(this.strm,t.dictionary))!==constants.Z_OK))throw new Error(messages[r])}function inflate$1(e,t){var r=new Inflate(t);if(r.push(e,!0),r.err)throw r.msg||messages[r.err];return r.result}function inflateRaw(e,t){return(t=t||{}).raw=!0,inflate$1(e,t)}Inflate.prototype.push=function(e,t){var r,n,i,a,s,o=this.strm,u=this.options.chunkSize,c=this.options.dictionary,l=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?constants.Z_FINISH:constants.Z_NO_FLUSH,"string"==typeof e?o.input=strings.binstring2buf(e):"[object ArrayBuffer]"===toString$2.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new common.Buf8(u),o.next_out=0,o.avail_out=u),(r=inflate_1.inflate(o,constants.Z_NO_FLUSH))===constants.Z_NEED_DICT&&c&&(r=inflate_1.inflateSetDictionary(this.strm,c)),r===constants.Z_BUF_ERROR&&!0===l&&(r=constants.Z_OK,l=!1),r!==constants.Z_STREAM_END&&r!==constants.Z_OK)return this.onEnd(r),this.ended=!0,!1;o.next_out&&(0!==o.avail_out&&r!==constants.Z_STREAM_END&&(0!==o.avail_in||n!==constants.Z_FINISH&&n!==constants.Z_SYNC_FLUSH)||("string"===this.options.to?(i=strings.utf8border(o.output,o.next_out),a=o.next_out-i,s=strings.buf2string(o.output,i),o.next_out=a,o.avail_out=u-a,a&&common.arraySet(o.output,o.output,i,a,0),this.onData(s)):this.onData(common.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(l=!0)}while((o.avail_in>0||0===o.avail_out)&&r!==constants.Z_STREAM_END);return r===constants.Z_STREAM_END&&(n=constants.Z_FINISH),n===constants.Z_FINISH?(r=inflate_1.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===constants.Z_OK):n!==constants.Z_SYNC_FLUSH||(this.onEnd(constants.Z_OK),o.avail_out=0,!0)},Inflate.prototype.onData=function(e){this.chunks.push(e)},Inflate.prototype.onEnd=function(e){e===constants.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Inflate_1=Inflate,inflate_2$1=inflate$1,inflateRaw_1=inflateRaw,ungzip=inflate$1,inflate_1$1={Inflate:Inflate_1,inflate:inflate_2$1,inflateRaw:inflateRaw_1,ungzip:ungzip},assign=common.assign,pako={};assign(pako,deflate_1$1,inflate_1$1,constants);var pako_1=pako,USE_TYPEDARRAY="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,ARRAY_TYPE=USE_TYPEDARRAY?"uint8array":"array",magic="\b\0";function FlateWorker(e,t){GenericWorker_1.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}utils.inherits(FlateWorker,GenericWorker_1),FlateWorker.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(utils.transformTo(ARRAY_TYPE,e.data),!1)},FlateWorker.prototype.flush=function(){GenericWorker_1.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},FlateWorker.prototype.cleanUp=function(){GenericWorker_1.prototype.cleanUp.call(this),this._pako=null},FlateWorker.prototype._createPako=function(){this._pako=new pako_1[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}};var compressWorker=function(e){return new FlateWorker("Deflate",e)},uncompressWorker=function(){return new FlateWorker("Inflate",{})},flate={magic:magic,compressWorker:compressWorker,uncompressWorker:uncompressWorker},STORE={magic:"\0\0",compressWorker:function(e){return new GenericWorker_1("STORE compression")},uncompressWorker:function(){return new GenericWorker_1("STORE decompression")}},DEFLATE=flate,compressions={STORE:STORE,DEFLATE:DEFLATE},LOCAL_FILE_HEADER="PK",CENTRAL_FILE_HEADER="PK",CENTRAL_DIRECTORY_END="PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",ZIP64_CENTRAL_DIRECTORY_END="PK",DATA_DESCRIPTOR="PK\b",signature={LOCAL_FILE_HEADER:LOCAL_FILE_HEADER,CENTRAL_FILE_HEADER:CENTRAL_FILE_HEADER,CENTRAL_DIRECTORY_END:CENTRAL_DIRECTORY_END,ZIP64_CENTRAL_DIRECTORY_LOCATOR:ZIP64_CENTRAL_DIRECTORY_LOCATOR,ZIP64_CENTRAL_DIRECTORY_END:ZIP64_CENTRAL_DIRECTORY_END,DATA_DESCRIPTOR:DATA_DESCRIPTOR},decToHex=function(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n},generateUnixExternalFileAttr=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16},generateDosExternalFileAttr=function(e,t){return 63&(e||0)},generateZipParts=function(e,t,r,n,i,a){var s,o,u=e.file,c=e.compression,l=a!==utf8.utf8encode,h=utils.transformTo("string",a(u.name)),d=utils.transformTo("string",utf8.utf8encode(u.name)),f=u.comment,_=utils.transformTo("string",a(f)),p=utils.transformTo("string",utf8.utf8encode(f)),m=d.length!==u.name.length,g=p.length!==f.length,b="",y="",v="",w=u.dir,k=u.date,E={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(E.crc32=e.crc32,E.compressedSize=e.compressedSize,E.uncompressedSize=e.uncompressedSize);var S=0;t&&(S|=8),l||!m&&!g||(S|=2048);var A=0,T=0;w&&(A|=16),"UNIX"===i?(T=798,A|=generateUnixExternalFileAttr(u.unixPermissions,w)):(T=20,A|=generateDosExternalFileAttr(u.dosPermissions)),s=k.getUTCHours(),s<<=6,s|=k.getUTCMinutes(),s<<=5,s|=k.getUTCSeconds()/2,o=k.getUTCFullYear()-1980,o<<=4,o|=k.getUTCMonth()+1,o<<=5,o|=k.getUTCDate(),m&&(y=decToHex(1,1)+decToHex(crc32_1(h),4)+d,b+="up"+decToHex(y.length,2)+y),g&&(v=decToHex(1,1)+decToHex(crc32_1(_),4)+p,b+="uc"+decToHex(v.length,2)+v);var C="";return C+="\n\0",C+=decToHex(S,2),C+=c.magic,C+=decToHex(s,2),C+=decToHex(o,2),C+=decToHex(E.crc32,4),C+=decToHex(E.compressedSize,4),C+=decToHex(E.uncompressedSize,4),C+=decToHex(h.length,2),C+=decToHex(b.length,2),{fileRecord:signature.LOCAL_FILE_HEADER+C+h+b,dirRecord:signature.CENTRAL_FILE_HEADER+decToHex(T,2)+C+decToHex(_.length,2)+"\0\0\0\0"+decToHex(A,4)+decToHex(n,4)+h+b+_}},generateCentralDirectoryEnd=function(e,t,r,n,i){var a=utils.transformTo("string",i(n));return signature.CENTRAL_DIRECTORY_END+"\0\0\0\0"+decToHex(e,2)+decToHex(e,2)+decToHex(t,4)+decToHex(r,4)+decToHex(a.length,2)+a},generateDataDescriptors=function(e){return signature.DATA_DESCRIPTOR+decToHex(e.crc32,4)+decToHex(e.compressedSize,4)+decToHex(e.uncompressedSize,4)};function ZipFileWorker(e,t,r,n){GenericWorker_1.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}utils.inherits(ZipFileWorker,GenericWorker_1),ZipFileWorker.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,GenericWorker_1.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},ZipFileWorker.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=generateZipParts(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},ZipFileWorker.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=generateZipParts(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:generateDataDescriptors(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},ZipFileWorker.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,n=generateCentralDirectoryEnd(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},ZipFileWorker.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},ZipFileWorker.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},ZipFileWorker.prototype.resume=function(){return!!GenericWorker_1.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},ZipFileWorker.prototype.error=function(e){var t=this._sources;if(!GenericWorker_1.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},ZipFileWorker.prototype.lock=function(){GenericWorker_1.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()};var ZipFileWorker_1=ZipFileWorker,getCompression=function(e,t){var r=e||t,n=compressions[r];if(!n)throw new Error(r+" is not a valid compression method !");return n},generateWorker=function(e,t,r){var n=new ZipFileWorker_1(t.streamFiles,r,t.platform,t.encodeFileName),i=0;try{e.forEach((function(e,r){i++;var a=getCompression(r.options.compression,t.compression),s=r.options.compressionOptions||t.compressionOptions||{},o=r.dir,u=r.date;r._compressWorker(a,s).withStreamInfo("file",{name:e,dir:o,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(n)})),n.entriesCount=i}catch(e){n.error(e)}return n},generate={generateWorker:generateWorker};function NodejsStreamInputAdapter(e,t){GenericWorker_1.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}utils.inherits(NodejsStreamInputAdapter,GenericWorker_1),NodejsStreamInputAdapter.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},NodejsStreamInputAdapter.prototype.pause=function(){return!!GenericWorker_1.prototype.pause.call(this)&&(this._stream.pause(),!0)},NodejsStreamInputAdapter.prototype.resume=function(){return!!GenericWorker_1.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)};var NodejsStreamInputAdapter_1=NodejsStreamInputAdapter,fileAdd=function(e,t,r){var n,i=utils.getTypeOf(t),a=utils.extend(r||{},defaults$1);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=forceTrailingSlash(e)),a.createFolders&&(n=parentFolder(e))&&folderAdd.call(this,n,!0);var s="string"===i&&!1===a.binary&&!1===a.base64;r&&void 0!==r.binary||(a.binary=!s),(t instanceof compressedObject&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var o=null;o=t instanceof compressedObject||t instanceof GenericWorker_1?t:nodejsUtils.isNode&&nodejsUtils.isStream(t)?new NodejsStreamInputAdapter_1(e,t):utils.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var u=new zipObject(e,o,a);this.files[e]=u},parentFolder=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},forceTrailingSlash=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},folderAdd=function(e,t){return t=void 0!==t?t:defaults$1.createFolders,e=forceTrailingSlash(e),this.files[e]||fileAdd.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function isRegExp$1(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var out={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n))},filter:function(e){var t=[];return this.forEach((function(r,n){e(r,n)&&t.push(n)})),t},file:function(e,t,r){if(1===arguments.length){if(isRegExp$1(e)){var n=e;return this.filter((function(e,t){return!t.dir&&n.test(e)}))}var i=this.files[this.root+e];return i&&!i.dir?i:null}return(e=this.root+e,fileAdd.call(this,e,t,r),this)},folder:function(e){if(!e)return this;if(isRegExp$1(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=folderAdd.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=utils.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:utf8.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");utils.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=generate.generateWorker(this,r,n)}catch(e){(t=new GenericWorker_1("error")).error(e)}return new StreamHelper_1(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}},object=out;function DataReader(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}DataReader.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return utils.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}};var DataReader_1=DataReader;function ArrayReader(e){DataReader_1.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}utils.inherits(ArrayReader,DataReader_1),ArrayReader.prototype.byteAt=function(e){return this.data[this.zero+e]},ArrayReader.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===t&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a-this.zero;return-1},ArrayReader.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&r===a[1]&&n===a[2]&&i===a[3]},ArrayReader.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var ArrayReader_1=ArrayReader;function StringReader(e){DataReader_1.call(this,e)}utils.inherits(StringReader,DataReader_1),StringReader.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},StringReader.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},StringReader.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},StringReader.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var StringReader_1=StringReader;function Uint8ArrayReader(e){ArrayReader_1.call(this,e)}utils.inherits(Uint8ArrayReader,ArrayReader_1),Uint8ArrayReader.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var Uint8ArrayReader_1=Uint8ArrayReader;function NodeBufferReader(e){Uint8ArrayReader_1.call(this,e)}utils.inherits(NodeBufferReader,Uint8ArrayReader_1),NodeBufferReader.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var NodeBufferReader_1=NodeBufferReader,readerFor=function(e){var t=utils.getTypeOf(e);return utils.checkSupport(t),"string"!==t||support.uint8array?"nodebuffer"===t?new NodeBufferReader_1(e):support.uint8array?new Uint8ArrayReader_1(utils.transformTo("uint8array",e)):new ArrayReader_1(utils.transformTo("array",e)):new StringReader_1(e)},MADE_BY_DOS=0,MADE_BY_UNIX=3,findCompression=function(e){for(var t in compressions)if(compressions.hasOwnProperty(t)&&compressions[t].magic===e)return compressions[t];return null};function ZipEntry(e,t){this.options=e,this.loadOptions=t}ZipEntry.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+utils.pretty(this.compressionMethod)+" unknown (inner file : "+utils.transformTo("string",this.fileName)+")");this.decompressed=new compressedObject(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),e===MADE_BY_DOS&&(this.dosPermissions=63&this.externalFileAttributes),e===MADE_BY_UNIX&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=readerFor(this.extraFields[1].value);this.uncompressedSize===utils.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===utils.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===utils.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===utils.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n}},handleUTF8:function(){var e=support.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=utf8.utf8decode(this.fileName),this.fileCommentStr=utf8.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=utils.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var i=utils.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=readerFor(e.value);return 1!==t.readInt(1)?null:crc32_1(this.fileName)!==t.readInt(4)?null:utf8.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=readerFor(e.value);return 1!==t.readInt(1)?null:crc32_1(this.fileComment)!==t.readInt(4)?null:utf8.utf8decode(t.readData(e.length-5))}return null}};var zipEntry=ZipEntry;function ZipEntries(e){this.files=[],this.loadOptions=e}ZipEntries.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+utils.pretty(t)+", expected "+utils.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=support.uint8array?"uint8array":"array",r=utils.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(signature.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(signature.CENTRAL_FILE_HEADER);)(e=new zipEntry({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(signature.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,signature.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(signature.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===utils.MAX_VALUE_16BITS||this.diskWithCentralDirStart===utils.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===utils.MAX_VALUE_16BITS||this.centralDirRecords===utils.MAX_VALUE_16BITS||this.centralDirSize===utils.MAX_VALUE_32BITS||this.centralDirOffset===utils.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,signature.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(signature.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(signature.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(n>0)this.isSignature(t,signature.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=readerFor(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};var zipEntries=ZipEntries;function checkEntryCRC32(e){return new external.Promise((function(t,r){var n=e.decompressed.getContentWorker().pipe(new Crc32Probe_1);n.on("error",(function(e){r(e)})).on("end",(function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}var load=function(e,t){var r=this;return t=utils.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:utf8.utf8decode}),nodejsUtils.isNode&&nodejsUtils.isStream(e)?external.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):utils.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new zipEntries(t);return r.load(e),r})).then((function(e){var r=[external.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var i=0;i<n.length;i++)r.push(checkEntryCRC32(n[i]));return external.Promise.all(r)})).then((function(e){for(var n=e.shift(),i=n.files,a=0;a<i.length;a++){var s=i[a];r.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r}))};function JSZip(){if(!(this instanceof JSZip))return new JSZip;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new JSZip;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}JSZip.prototype=object,JSZip.prototype.loadAsync=load,JSZip.support=support,JSZip.defaults=defaults$1,JSZip.version="3.2.0",JSZip.loadAsync=function(e,t){return(new JSZip).loadAsync(e,t)},JSZip.external=external;var lib$2=JSZip,crypt=createCommonjsModule((function(e){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],a=0;a<4;a++)8*n+6*a<=8*e.length?r.push(t.charAt(i>>>6*(3-a)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(n))>>>6-2*i);return r}};e.exports=r}()})),charenc={utf8:{stringToBytes:function(e){return charenc.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(charenc.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}},charenc_1=charenc,isBuffer_1=function(e){return null!=e&&(isBuffer$1(e)||isSlowBuffer$1(e)||!!e._isBuffer)};function isBuffer$1(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer$1(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isBuffer$1(e.slice(0,0))}var md5=createCommonjsModule((function(e){!function(){var t=crypt,r=charenc_1.utf8,n=isBuffer_1,i=charenc_1.bin,a=function(e,s){e.constructor==String?e=s&&"binary"===s.encoding?i.stringToBytes(e):r.stringToBytes(e):n(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var o=t.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,h=-1732584194,d=271733878,f=0;f<o.length;f++)o[f]=16711935&(o[f]<<8|o[f]>>>24)|4278255360&(o[f]<<24|o[f]>>>8);o[u>>>5]|=128<<u%32,o[14+(u+64>>>9<<4)]=u;var _=a._ff,p=a._gg,m=a._hh,g=a._ii;for(f=0;f<o.length;f+=16){var b=c,y=l,v=h,w=d;c=_(c,l,h,d,o[f+0],7,-680876936),d=_(d,c,l,h,o[f+1],12,-389564586),h=_(h,d,c,l,o[f+2],17,606105819),l=_(l,h,d,c,o[f+3],22,-1044525330),c=_(c,l,h,d,o[f+4],7,-176418897),d=_(d,c,l,h,o[f+5],12,1200080426),h=_(h,d,c,l,o[f+6],17,-1473231341),l=_(l,h,d,c,o[f+7],22,-45705983),c=_(c,l,h,d,o[f+8],7,1770035416),d=_(d,c,l,h,o[f+9],12,-1958414417),h=_(h,d,c,l,o[f+10],17,-42063),l=_(l,h,d,c,o[f+11],22,-1990404162),c=_(c,l,h,d,o[f+12],7,1804603682),d=_(d,c,l,h,o[f+13],12,-40341101),h=_(h,d,c,l,o[f+14],17,-1502002290),c=p(c,l=_(l,h,d,c,o[f+15],22,1236535329),h,d,o[f+1],5,-165796510),d=p(d,c,l,h,o[f+6],9,-1069501632),h=p(h,d,c,l,o[f+11],14,643717713),l=p(l,h,d,c,o[f+0],20,-373897302),c=p(c,l,h,d,o[f+5],5,-701558691),d=p(d,c,l,h,o[f+10],9,38016083),h=p(h,d,c,l,o[f+15],14,-660478335),l=p(l,h,d,c,o[f+4],20,-405537848),c=p(c,l,h,d,o[f+9],5,568446438),d=p(d,c,l,h,o[f+14],9,-1019803690),h=p(h,d,c,l,o[f+3],14,-187363961),l=p(l,h,d,c,o[f+8],20,1163531501),c=p(c,l,h,d,o[f+13],5,-1444681467),d=p(d,c,l,h,o[f+2],9,-51403784),h=p(h,d,c,l,o[f+7],14,1735328473),c=m(c,l=p(l,h,d,c,o[f+12],20,-1926607734),h,d,o[f+5],4,-378558),d=m(d,c,l,h,o[f+8],11,-2022574463),h=m(h,d,c,l,o[f+11],16,1839030562),l=m(l,h,d,c,o[f+14],23,-35309556),c=m(c,l,h,d,o[f+1],4,-1530992060),d=m(d,c,l,h,o[f+4],11,1272893353),h=m(h,d,c,l,o[f+7],16,-155497632),l=m(l,h,d,c,o[f+10],23,-1094730640),c=m(c,l,h,d,o[f+13],4,681279174),d=m(d,c,l,h,o[f+0],11,-358537222),h=m(h,d,c,l,o[f+3],16,-722521979),l=m(l,h,d,c,o[f+6],23,76029189),c=m(c,l,h,d,o[f+9],4,-640364487),d=m(d,c,l,h,o[f+12],11,-421815835),h=m(h,d,c,l,o[f+15],16,530742520),c=g(c,l=m(l,h,d,c,o[f+2],23,-995338651),h,d,o[f+0],6,-198630844),d=g(d,c,l,h,o[f+7],10,1126891415),h=g(h,d,c,l,o[f+14],15,-1416354905),l=g(l,h,d,c,o[f+5],21,-57434055),c=g(c,l,h,d,o[f+12],6,1700485571),d=g(d,c,l,h,o[f+3],10,-1894986606),h=g(h,d,c,l,o[f+10],15,-1051523),l=g(l,h,d,c,o[f+1],21,-2054922799),c=g(c,l,h,d,o[f+8],6,1873313359),d=g(d,c,l,h,o[f+15],10,-30611744),h=g(h,d,c,l,o[f+6],15,-1560198380),l=g(l,h,d,c,o[f+13],21,1309151649),c=g(c,l,h,d,o[f+4],6,-145523070),d=g(d,c,l,h,o[f+11],10,-1120210379),h=g(h,d,c,l,o[f+2],15,718787259),l=g(l,h,d,c,o[f+9],21,-343485551),c=c+b>>>0,l=l+y>>>0,h=h+v>>>0,d=d+w>>>0}return t.endian([c,l,h,d])};a._ff=function(e,t,r,n,i,a,s){var o=e+(t&r|~t&n)+(i>>>0)+s;return(o<<a|o>>>32-a)+t},a._gg=function(e,t,r,n,i,a,s){var o=e+(t&n|r&~n)+(i>>>0)+s;return(o<<a|o>>>32-a)+t},a._hh=function(e,t,r,n,i,a,s){var o=e+(t^r^n)+(i>>>0)+s;return(o<<a|o>>>32-a)+t},a._ii=function(e,t,r,n,i,a,s){var o=e+(r^(t|~n))+(i>>>0)+s;return(o<<a|o>>>32-a)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,r){if(null==e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(a(e,r));return r&&r.asBytes?n:r&&r.asString?i.bytesToString(n):t.bytesToHex(n)}}()}));function calculateFromUint8Array(e){return md5(Buffer.from(e))}var Event_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=[];function n(e){return r[e]||(r[e]=function(e){for(var t="return function dispatcher"+e+"(payload) {\n",r=[],n=[],i=0;i<e;i++)r.push("cb"+i),n.push("ctx"+i),t+="    cb"+i+"(payload, ctx"+i+");\n";return t+="};",new(Function.bind.apply(Function,[void 0].concat(r.concat(n),[t])))}(e)),r[e]}r[0]=function(){return function(){}},r[1]=function(e,t){return void 0===t?e:function(r){e(r,t)}};var i=function(){function e(){this.hasHandlers=!1,this._handlers=[],this._contexts=[],this._createDispatcher()}return e.prototype.addHandler=function(e,t){return this.isHandlerAttached(e,t)||(this._handlers.push(e),this._contexts.push(t),this._createDispatcher(),this._updateHasHandlers()),this},e.prototype.removeHandler=function(e,t){var r=this._getHandlerIndex(e,t);return void 0!==r&&(this._handlers.splice(r,1),this._contexts.splice(r,1),this._createDispatcher(),this._updateHasHandlers()),this},e.prototype.isHandlerAttached=function(e,t){return void 0!==this._getHandlerIndex(e,t)},e.prototype._updateHasHandlers=function(){this.hasHandlers=!!this._handlers.length},e.prototype._getHandlerIndex=function(e,t){var r,n=this._handlers.length;for(r=0;r<n&&(this._handlers[r]!==e||this._contexts[r]!==t);r++);return r<n?r:void 0},e.prototype._createDispatcher=function(){this.dispatch=n(this._handlers.length).apply(this,this._handlers.concat(this._contexts))},e}();t.default=i}));unwrapExports(Event_1);var lib$3=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Event=Event_1.default}));unwrapExports(lib$3);var lib_1=lib$3.Event,CartridgeInterface;!function(e){e.TrapPayload=class{constructor(e,t,r){this.reason=e,this.cartridge=t,this.message=r}}}(CartridgeInterface||(CartridgeInterface={}));class AbstractCartridge{constructor(){this.trap=new lib_1}init(){return __awaiter(this,void 0,void 0,(function*(){}))}reset(){}read(e){return 0}peek(e){return this.read(e)}write(e,t){}getType(){return CartridgeInfo.CartridgeType.unknown}setCpu(e){return this}setBus(e){return this}setRng(e){return this}setCpuTimeProvider(e){return this}notifyCpuCycleComplete(){}randomize(e){}triggerTrap(e,t){if(!this.trap.hasHandlers)throw new Error(t);this.trap.dispatch(new CartridgeInterface.TrapPayload(e,this,t))}}function searchForSignatures(e,t){const r=[],n=t.map(e=>0);for(let i=0;i<e.length;i++){for(let a=0;a<r.length;a++){const s=r[a],o=t[s.signature];e[i]===o[s.nextIndex]?++s.nextIndex===o.length&&(n[s.signature]++,r.splice(a,1),a--):(r.splice(a,1),a--)}for(let a=0;a<t.length;a++){const s=t[a];s.length>0&&e[i]===s[0]&&(1===s.length?n[a]++:r.push({signature:a,nextIndex:1}))}}return n}function searchForSignature(e,t){for(let r=0;r<e.length;r++){let n;for(n=0;n<t.length&&(e[r+n]===t[n]||t[n]<0);n++);if(n===t.length)return r}return-1}class CartridgeF8 extends AbstractCartridge{constructor(e,t=!0){if(super(),this._supportSC=t,this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._hasSC=!1,this._saraRAM=new Uint8Array(128),this._bus=null,8192!==e.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${e.length}`);for(let t=0;t<4096;t++)this._bank0[t]=e[t],this._bank1[t]=e[4096+t];this.reset()}static matchesBuffer(e){return searchForSignatures(e,[[141,249,31]])[0]>=2}reset(){this._bank=this._bank1,this._hasSC=!1}read(e){return this._access(4095&e,this._bus.getLastDataBusValue()),this.peek(e)}peek(e){return e&=4095,this._hasSC&&e>=128&&e<256?this._saraRAM[e-128]:this._bank[e]}write(e,t){(e&=4095)<128&&this._supportSC&&(this._hasSC=!0),this._access(e,t)}getType(){return CartridgeInfo.CartridgeType.bankswitch_8k_F8}randomize(e){for(let t=0;t<this._saraRAM.length;t++)this._saraRAM[t]=e.int(255)}setBus(e){return this._bus=e,this}_access(e,t){if(e<128&&this._hasSC)this._saraRAM[e]=255&t;else switch(e){case 4088:this._bank=this._bank0;break;case 4089:this._bank=this._bank1}}}class CartridgeE0 extends AbstractCartridge{constructor(e){if(super(),this._banks=new Array(8),this._activeBanks=new Array(4),8192!==e.length)throw new Error(`buffer is not an 8k cartridge image: invalid length ${e.length}`);for(let e=0;e<8;e++)this._banks[e]=new Uint8Array(1024);for(let t=0;t<1024;t++)for(let r=0;r<8;r++)this._banks[r][t]=e[1024*r+t];this.reset()}static matchesBuffer(e){const t=searchForSignatures(e,[[141,224,31],[141,224,95],[141,233,255],[12,224,31],[173,224,31],[173,233,255],[173,237,255],[173,243,191]]);for(let e=0;e<t.length;e++)if(t[e]>0)return!0;return!1}reset(){for(let e=0;e<4;e++)this._activeBanks[e]=this._banks[7]}read(e){return(e&=4095)>=4064&&e<4088&&this._handleBankswitch(e),this._activeBanks[e>>10][1023&e]}peek(e){return e&=4095,this._activeBanks[e>>10][1023&e]}write(e,t){const r=4095&e;return r>=4064&&r<4088&&this._handleBankswitch(r),super.write(e,t)}getType(){return CartridgeInfo.CartridgeType.bankswitch_8k_E0}_handleBankswitch(e){e<4072?this._activeBanks[0]=this._banks[e-4064]:e<4080?this._activeBanks[1]=this._banks[e-4072]:this._activeBanks[2]=this._banks[e-4080]}}class Cartridge3F extends AbstractCartridge{constructor(e){if(super(),this._banks=new Array(4),this._bus=null,8192!==e.length)throw new Error(`buffer is not an 8k cartridge image: invalid length ${e.length}`);for(let e=0;e<4;e++)this._banks[e]=new Uint8Array(2048);this._bank1=this._banks[3],this._bank0=this._banks[0];for(let t=0;t<2048;t++)for(let r=0;r<4;r++)this._banks[r][t]=e[2048*r+t]}static matchesBuffer(e){return searchForSignatures(e,[[133,63]])[0]>=2}reset(){this._bank0=this._banks[0]}setBus(e){return this._bus=e,this._bus.event.read.addHandler(Cartridge3F._onBusAccess,this),this._bus.event.write.addHandler(Cartridge3F._onBusAccess,this),this}read(e){return(e&=4095)<2048?this._bank0[e]:this._bank1[2047&e]}getType(){return CartridgeInfo.CartridgeType.bankswitch_8k_3F}static _onBusAccess(e,t){63===t._bus.getLastAddresBusValue()&&(t._bank0=t._banks[3&t._bus.getLastDataBusValue()])}}class Cartridge3E extends AbstractCartridge{constructor(e){if(super(),this._banks=null,this._ramSelect=!1,this._ramBanks=new Array(256),this._bus=null,0!=(2047&e.length))throw new Error(`buffer length ${e.length} is not a multiple of 2k`);const t=e.length>>>11;if(t<2)throw new Error("image must have at least 2k");this._banks=new Array(t);for(let e=0;e<t;e++)this._banks[e]=new Uint8Array(2048);for(let e=0;e<=255;e++)this._ramBanks[e]=new Uint8Array(1024);this._ramBank=this._ramBanks[0],this._bank1=this._banks[t-1],this._bank0=this._banks[0];for(let r=0;r<2048;r++)for(let n=0;n<t;n++)this._banks[n][r]=e[2048*n+r]}static matchesBuffer(e){return searchForSignatures(e,[[133,62,169,0]])[0]>=1}reset(){this._bank0=this._banks[0]}randomize(e){for(let t=0;t<this._ramBanks.length;t++)for(let r=0;r<1024;r++)this._ramBanks[t][r]=e.int(255)}setBus(e){return this._bus=e,this._bus.event.read.addHandler(Cartridge3E._onBusAccess,this),this._bus.event.write.addHandler(Cartridge3E._onBusAccess,this),this}read(e){return e&=4095,this._ramSelect?e<1024?this._ramBank[e]:e<2048?this._ramBank[1023&e]=this._bus.getLastDataBusValue():this._bank1[2047&e]:e<2048?this._bank0[e]:this._bank1[2047&e]}peek(e){return e&=4095,this._ramSelect?e<1024?this._ramBank[e]:e<2048?this._bus.getLastDataBusValue():this._bank1[2047&e]:e<2048?this._bank0[e]:this._bank1[2047&e]}write(e,t){this._ramSelect&&(e&=4095)>=1024&&e<2048&&(this._ramBank[1023&e]=t)}getType(){return CartridgeInfo.CartridgeType.bankswitch_3E}static _onBusAccess(e,t){switch(t._bus.getLastAddresBusValue()){case 63:t._ramSelect=!1,t._bank0=t._banks[t._bus.getLastDataBusValue()%t._banks.length];break;case 62:t._ramSelect=!0,t._ramBank=t._ramBanks[t._bus.getLastDataBusValue()%32]}}}class CartridgeFE extends AbstractCartridge{constructor(e){if(super(),this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._lastAccessWasFE=!1,this._lastAddressBusValue=-1,8192!==e.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${e.length}`);for(let t=0;t<4096;t++)this._bank0[t]=e[t],this._bank1[t]=e[4096+t];this.reset()}static matchesBuffer(e){const t=searchForSignatures(e,[[32,0,208,198,197],[32,195,248,165,130],[208,251,32,115,254],[32,0,240,132,214]]);for(let e=0;e<t.length;e++)if(t[e]>0)return!0;return!1}reset(){this._bank=this._bank0,this._lastAccessWasFE=!1,this._lastAddressBusValue=-1}read(e){return this._bank[4095&e]}write(e,t){super.write(e,t)}setBus(e){return this._bus=e,this._bus.event.read.addHandler(CartridgeFE._onBusAccess,this),this._bus.event.write.addHandler(CartridgeFE._onBusAccess,this),this}getType(){return CartridgeInfo.CartridgeType.bankswitch_8k_FE}static _onBusAccess(e,t){const r=t._lastAddressBusValue;if(t._lastAddressBusValue=8191&t._bus.getLastAddresBusValue(),t._lastAddressBusValue!==r){if(t._lastAccessWasFE){const e=224&t._bus.getLastDataBusValue();t._bank=0===e?t._bank0:(32&t._bus.getLastDataBusValue())>0?t._bank0:t._bank1}t._lastAccessWasFE=510===t._lastAddressBusValue}}}class CartridgeUA extends AbstractCartridge{constructor(e){if(super(),this._bus=null,this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),8192!==e.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${e.length}`);for(let t=0;t<4096;t++)this._bank0[t]=e[t],this._bank1[t]=e[4096+t];this.reset()}static matchesBuffer(e){const t=searchForSignatures(e,[[141,64,2],[173,64,2],[189,31,2]]);for(let e=0;e<t.length;e++)if(t[e]>0)return!0;return!1}reset(){this._bank=this._bank0}read(e){return this._bank[4095&e]}setBus(e){return this._bus=e,e.event.read.addHandler(CartridgeUA._onBusAccess,this),e.event.write.addHandler(CartridgeUA._onBusAccess,this),this}getType(){return CartridgeInfo.CartridgeType.bankswitch_8k_UA}static _onBusAccess(e,t){switch(t._bus.getLastAddresBusValue()){case 544:t._bank=t._bank0;break;case 576:t._bank=t._bank1}}}class CartrdigeE7 extends AbstractCartridge{constructor(e){if(super(),this._banks=new Array(8),this._ram0=new Uint8Array(1024),this._ram1Banks=new Array(4),this._ram0Enabled=!1,16384!==e.length)throw new Error(`buffer is not a 16k cartridge image: wrong length ${e.length}`);for(let e=0;e<8;e++)this._banks[e]=new Uint8Array(2048);for(let e=0;e<4;e++)this._ram1Banks[e]=new Uint8Array(256);for(let t=0;t<2048;t++)for(let r=0;r<8;r++)this._banks[r][t]=e[2048*r+t];this.reset()}static matchesBuffer(e){const t=searchForSignatures(e,[[173,226,255],[173,229,255],[173,229,31],[173,231,31],[12,231,31],[141,231,255],[141,231,31]]);for(let e=0;e<t.length;e++)if(t[e]>0)return!0;return!1}reset(){this._bank0=this._banks[0],this._ram1=this._ram1Banks[0],this._ram0Enabled=!1}read(e){return this._handleBankswitch(4095&e),this.peek(e)}peek(e){return(e&=4095)<2048?this._ram0Enabled?e>=1024?this._ram0[e-1024]:0:this._bank0[e]:e<=2559?e>=2304?this._ram1[e-2304]:0:this._banks[7][2047-(4095-e)]}write(e,t){e&=4095,this._handleBankswitch(e),e<1024?this._ram0Enabled?this._ram0[e]=t:super.write(e,t):e<2048?super.write(e,t):e<2303?this._ram1[e-2048]=t:super.write(e,t)}getType(){return CartridgeInfo.CartridgeType.bankswitch_16k_E7}randomize(e){for(let t=0;t<4;t++)for(let r=0;r<this._ram1Banks[t].length;r++)this._ram1Banks[t][r]=e.int(255);for(let t=0;t<this._ram0.length;t++)this._ram0[t]=e.int(255)}_handleBankswitch(e){e<4064||(e<=4070?(this._bank0=this._banks[15&e],this._ram0Enabled=!1):4071===e?this._ram0Enabled=!0:e<=4075&&(this._ram1=this._ram1Banks[e-4072]))}}class CartridgeFA2 extends AbstractCartridge{constructor(e){if(super(),this._banks=new Array(7),this._ram=new Uint8Array(256),this._savedRam=new Uint8Array(256),this._accessCounter=0,this._accessCounterLimit=0,28672!==e.length&&29696!==e.length)throw new Error(`buffer is not a 28k/29k cartridge image: wrong length ${e.length}`);for(let e=0;e<7;e++)this._banks[e]=new Uint8Array(4096);const t=28672===e.length?0:1024;for(let r=0;r<4096;r++)for(let n=0;n<7;n++)this._banks[n][r]=e[4096*n+r+t];this.reset()}static matchesBuffer(e){const t=searchForSignatures(e,[[160,193,31,224],[0,128,2,224]]);return t[0]>0||t[1]>0}reset(){this._accessCounter=0,this._accessCounterLimit=0,this._bank=this._banks[0]}getType(){return CartridgeInfo.CartridgeType.bankswitch_FA2}randomize(e){for(let t=0;t<this._ram.length;t++)this._ram[t]=e.int(255)}setBus(e){return this._bus=e,this}read(e){return this.write(4095&e,this._bus.getLastDataBusValue()),this.peek(e)}peek(e){return(e&=4095)>=256&&e<512?this._ram[e-256]:4084===e?this._accessCounter>=this._accessCounterLimit?-65&this._bank[e]:64|this._bank[e]:this._bank[e]}write(e,t){if(e&=4095,this._accessCounter++,!(e<256))return 4084===e?this._handleIo():void(e>=4085&&e<=4091&&(this._bank=this._banks[e-4085]));this._ram[e]=t}_handleIo(){if(!(this._accessCounter<this._accessCounterLimit)){if(1===this._ram[255]){for(let e=0;e<256;e++)this._ram[e]=this._savedRam[e];this._accessCounterLimit=10}else{if(2!==this._ram[255])return;for(let e=0;e<256;e++)this._savedRam[e]=this._ram[e];this._accessCounterLimit=100}this._accessCounter=0,this._ram[255]=0}}}class CartridgeEF extends AbstractCartridge{constructor(e,t=!0){if(super(),this._supportSC=t,this._bus=null,this._banks=new Array(16),this._ram=new Uint8Array(128),this._hasSC=!1,65536!==e.length)throw new Error(`buffer is not a 64k cartridge image: wrong length ${e.length}`);for(let e=0;e<16;e++)this._banks[e]=new Uint8Array(4096);for(let t=0;t<4096;t++)for(let r=0;r<16;r++)this._banks[r][t]=e[4096*r+t];this.reset()}static matchesBuffer(e){const t=t=>{const r=t.split("").map(e=>e.charCodeAt(0));for(let t=0;t<r.length;t++)if(r[t]!==e[65528+t])return!1;return!0};if(65536!==e.length)return!1;if(t("efef")||t("efsc"))return!0;const r=searchForSignatures(e,[[12,224,255],[173,224,255],[12,224,31],[173,224,31]]);for(let e=0;e<4;e++)if(r[e]>0)return!0;return!1}reset(){this._bank=this._banks[15],this._hasSC=!1}getType(){return CartridgeInfo.CartridgeType.bankswitch_64k_EF}randomize(e){for(let t=0;t<this._ram.length;t++)this._ram[t]=e.int(255)}setBus(e){return this._bus=e,this}read(e){return this._access(4095&e,this._bus.getLastDataBusValue()),this.peek(e)}peek(e){return e&=4095,this._hasSC&&e>=128&&e<256?this._ram[e-128]:this._bank[e]}write(e,t){(e&=4095)<128&&this._supportSC&&(this._hasSC=!0),this._access(e,t)}_access(e,t){e<128&&this._hasSC?this._ram[e]=t:e>=4064&&e<=4079&&(this._bank=this._banks[e-4064])}}var empty={},empty$1=Object.freeze({__proto__:null,default:empty});function normalizeArray(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(e){return splitPathRe.exec(e).slice(1)};function resolve$1(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=normalizeArray(filter(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function normalize(e){var t=isAbsolute(e),r="/"===substr(e,-1);return(e=normalizeArray(filter(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function isAbsolute(e){return"/"===e.charAt(0)}function join(){return normalize(filter(Array.prototype.slice.call(arguments,0),(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))}function relative(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=resolve$1(e).substr(1),t=resolve$1(t).substr(1);for(var n=r(e.split("/")),i=r(t.split("/")),a=Math.min(n.length,i.length),s=a,o=0;o<a;o++)if(n[o]!==i[o]){s=o;break}var u=[];for(o=s;o<n.length;o++)u.push("..");return(u=u.concat(i.slice(s))).join("/")}var sep="/",delimiter=":";function dirname(e){var t=splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."}function basename(e,t){var r=splitPath(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r}function extname(e){return splitPath(e)[3]}var path={extname:extname,basename:basename,dirname:dirname,sep:sep,delimiter:delimiter,relative:relative,join:join,isAbsolute:isAbsolute,normalize:normalize,resolve:resolve$1};function filter(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var substr="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)},path$1=Object.freeze({__proto__:null,resolve:resolve$1,normalize:normalize,isAbsolute:isAbsolute,join:join,relative:relative,sep:sep,delimiter:delimiter,dirname:dirname,basename:basename,extname:extname,default:path}),require$$0=getCjsExportFromNamespace(empty$1),require$$1=getCjsExportFromNamespace(path$1),thumbulator=createCommonjsModule((function(module){var Module=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(void 0!==Module?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1,nodeFS,nodePath;if(Module.ENVIRONMENT)if("WEB"===Module.ENVIRONMENT)ENVIRONMENT_IS_WEB=!0;else if("WORKER"===Module.ENVIRONMENT)ENVIRONMENT_IS_WORKER=!0;else if("NODE"===Module.ENVIRONMENT)ENVIRONMENT_IS_NODE=!0;else{if("SHELL"!==Module.ENVIRONMENT)throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");ENVIRONMENT_IS_SHELL=!0}else ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_IS_NODE="object"==typeof process&&"function"==typeof commonjsRequire&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE)Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn),Module.read=function(e,t){nodeFS||(nodeFS=require$$0),nodePath||(nodePath=require$$1),e=nodePath.normalize(e);var r=nodeFS.readFileSync(e);return t?r:r.toString()},Module.readBinary=function(e){var t=Module.read(e,!0);return t.buffer||(t=new Uint8Array(t)),assert(t.buffer),t},Module.load=function(e){globalEval(read(e))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),Module.inspect=function(){return"[Emscripten Module object]"};else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),"undefined"!=typeof printErr&&(Module.printErr=printErr),"undefined"!=typeof read?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(e){if("function"==typeof readbuffer)return new Uint8Array(readbuffer(e));var t=read(e,"binary");return assert("object"==typeof t),t},"undefined"!=typeof scriptArgs?Module.arguments=scriptArgs:void 0!==arguments&&(Module.arguments=arguments),"function"==typeof quit&&(Module.quit=function(e,t){quit(e)});else{if(!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER)throw"Unknown runtime environment. Where are we?";if(Module.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Module.readAsync=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)},void 0!==arguments&&(Module.arguments=arguments),"undefined"!=typeof console)Module.print||(Module.print=function(e){console.log(e)}),Module.printErr||(Module.printErr=function(e){console.warn(e)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&"undefined"!=typeof dump?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),void 0===Module.setWindowTitle&&(Module.setWindowTitle=function(e){document.title=e})}function globalEval(e){eval.call(null,e)}for(var key in!Module.load&&Module.read&&(Module.load=function(e){globalEval(Module.read(e))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[],moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if("*"===e[e.length-1])return Runtime.QUANTUM_SIZE;if("i"===e[0]){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}return 0}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return"double"===t||"i64"===t?7&e&&(assert(4==(7&e)),e+=4):assert(0==(3&e)),e},getAlignSize:function(e,t,r){return r||"i64"!=e&&"double"!=e?e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8):8},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){if(e){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(1===t.length?r[e]=function(){return Runtime.dynCall(t,e)}:2===t.length?r[e]=function(r){return Runtime.dynCall(t,e,[r])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]}},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=(STACKTOP=STACKTOP+e|0)+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=(STATICTOP=STATICTOP+e|0)+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=-16&(t+e+15|0);if((HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY)&&!enlargeMemory())return HEAP32[DYNAMICTOP_PTR>>2]=t,0;return t},alignMemory:function(e,t){return e=Math.ceil(e/(t||16))*(t||16)},makeBigInt:function(e,t,r){return r?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t)},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0,cwrap,ccall;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}function setValue(e,t,r,n){switch("*"===(r=r||"i8").charAt(r.length-1)&&(r="i32"),r){case"i1":case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}function getValue(e,t,r){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}!function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);stringToUTF8(e,t=Runtime.stackAlloc(r),r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(e,t,r,n,i){var a=getCFunc(e),s=[],o=0;if(n)for(var u=0;u<n.length;u++){var c=toC[r[u]];c?(0===o&&(o=Runtime.stackSave()),s[u]=c(n[u])):s[u]=n[u]}var l=a.apply(null,s);if("string"===t&&(l=Pointer_stringify(l)),0!==o){if(i&&i.async)return void EmterpreterAsync.asyncFinalizers.push((function(){Runtime.stackRestore(o)}));Runtime.stackRestore(o)}return l};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource)for(var e in JSsource={},JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every((function(e){return"number"===e})),numericRet="string"!==returnType;if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map((function(e,t){return"$"+t})),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if("number"!==type){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc((function(){return cfunc})).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc((function(){return Pointer_stringify})).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}}(),Module.ccall=ccall,Module.cwrap=cwrap,Module.setValue=setValue,Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;function allocate(e,t,r,n){var i,a;"number"==typeof e?(i=!0,a=e):(i=!1,a=e.length);var s,o="string"==typeof t?t:null;if(s=r==ALLOC_NONE?n:["function"==typeof _malloc?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][void 0===r?ALLOC_STATIC:r](Math.max(a,o?1:t.length)),i){var u;n=s;for(assert(0==(3&s)),u=s+(-4&a);n<u;n+=4)HEAP32[n>>2]=0;for(u=s+a;n<u;)HEAP8[n++>>0]=0;return s}if("i8"===o)return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var c,l,h,d=0;d<a;){var f=e[d];"function"==typeof f&&(f=Runtime.getFunctionIndex(f)),0!==(c=o||t[d])?("i64"==c&&(c="i32"),setValue(s+d,f,c),h!==c&&(l=Runtime.getNativeTypeSize(c),h=c),d+=l):d++}return s}function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}function Pointer_stringify(e,t){if(0===t||!e)return"";for(var r,n=0,i=0;n|=r=HEAPU8[e+i>>0],(0!=r||t)&&(i++,!t||i!=t););t||(t=i);var a="";if(n<128){for(var s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,1024))),a=a?a+s:s,e+=1024,t-=1024;return a}return Module.UTF8ToString(e)}function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE,Module.allocate=allocate,Module.getMemory=getMemory,Module.Pointer_stringify=Pointer_stringify,Module.AsciiToString=AsciiToString,Module.stringToAscii=stringToAscii;var UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,i,a,s,o,u="";;){if(!(n=e[t++]))return u;if(128&n)if(i=63&e[t++],192!=(224&n))if(a=63&e[t++],224==(240&n)?n=(15&n)<<12|i<<6|a:(s=63&e[t++],240==(248&n)?n=(7&n)<<18|i<<12|a<<6|s:(o=63&e[t++],n=248==(252&n)?(3&n)<<24|i<<18|a<<12|s<<6|o:(1&n)<<30|i<<24|a<<18|s<<12|o<<6|63&e[t++])),n<65536)u+=String.fromCharCode(n);else{var c=n-65536;u+=String.fromCharCode(55296|c>>10,56320|1023&c)}else u+=String.fromCharCode((31&n)<<6|i);else u+=String.fromCharCode(n)}}function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var i=r,a=r+n-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),o<=127){if(r>=a)break;t[r++]=o}else if(o<=2047){if(r+1>=a)break;t[r++]=192|o>>6,t[r++]=128|63&o}else if(o<=65535){if(r+2>=a)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|63&o}else if(o<=2097151){if(r+3>=a)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|63&o}else if(o<=67108863){if(r+4>=a)break;t[r++]=248|o>>24,t[r++]=128|o>>18&63,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|63&o}else{if(r+5>=a)break;t[r++]=252|o>>30,t[r++]=128|o>>24&63,t[r++]=128|o>>18&63,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|63&o}}return t[r]=0,r-i}function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:n<=2097151?4:n<=67108863?5:6}return t}Module.UTF8ArrayToString=UTF8ArrayToString,Module.UTF8ToString=UTF8ToString,Module.stringToUTF8Array=stringToUTF8Array,Module.stringToUTF8=stringToUTF8,Module.lengthBytesUTF8=lengthBytesUTF8;var UTF16Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,i=_malloc(n);stringToUTF8(r,i,n);var a=_malloc(4),s=t(i,0,0,a);if(0===getValue(a,"i32")&&s)return Pointer_stringify(s)}catch(e){}finally{i&&_free(i),a&&_free(a),s&&_free(s)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){return e.replace(/__Z[\w\d_]+/g,(function(e){var t=demangle(e);return e===t?e:e+" ["+t+"]"}))}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+="\n"+Module.extraStackTrace()),demangleAll(e)}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or (4) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}Module.stackTrace=stackTrace,STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;var TOTAL_STACK=Module.TOTAL_STACK||10240,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;function getTotalMemory(){return TOTAL_MEMORY}if(TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),buffer=Module.buffer?Module.buffer:new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews(),HEAP32[0]=1668509029,HEAP16[1]=25459,115!==HEAPU8[2]||99!==HEAPU8[3])throw"Runtime error: expected the system to be little-endian!";function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPreMain(e){__ATMAIN__.unshift(e)}function addOnExit(e){__ATEXIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,i=new Array(n),a=stringToUTF8Array(e,i,0,i.length);return t&&(i.length=a),i}function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}function writeStringToMemory(e,t,r){var n,i;Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!"),r&&(i=t+lengthBytesUTF8(e),n=HEAP8[i]),stringToUTF8(e,t,1/0),r&&(HEAP8[i]=n)}function writeArrayToMemory(e,t){HEAP8.set(e,t)}function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}Module.addOnPreRun=addOnPreRun,Module.addOnInit=addOnInit,Module.addOnPreMain=addOnPreMain,Module.addOnExit=addOnExit,Module.addOnPostRun=addOnPostRun,Module.intArrayFromString=intArrayFromString,Module.intArrayToString=intArrayToString,Module.writeStringToMemory=writeStringToMemory,Module.writeArrayToMemory=writeArrayToMemory,Module.writeAsciiToMemory=writeAsciiToMemory,Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16)*n+r*(t>>>16)<<16)|0}),Math.imul=Math.imul,Math.clz32||(Math.clz32=function(e){e>>>=0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.addRunDependency=addRunDependency,Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var ASM_CONSTS=[function(e){return Module.trapOnInstructionFetch(e)},function(e){return Module.busRead32(e)},function(e,t){Module.busWrite32(e,t)},function(e){return Module.busRead16(e)},function(e,t){return Module.trapOnBx32(e,t)},function(e,t){Module.busWrite16(e,t)}];function _emscripten_asm_const_ii(e,t){return ASM_CONSTS[e](t)}function _emscripten_asm_const_iii(e,t,r){return ASM_CONSTS[e](t,r)}STATIC_BASE=Runtime.GLOBAL_BASE,STATICTOP=STATIC_BASE+5312,__ATINIT__.push(),allocate([12,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,189,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,156,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,116,104,117,109,98,117,108,97,116,111,114,0,123,32,114,101,116,117,114,110,32,77,111,100,117,108,101,46,98,117,115,82,101,97,100,49,54,40,36,48,41,59,32,125,0,123,32,114,101,116,117,114,110,32,77,111,100,117,108,101,46,98,117,115,82,101,97,100,51,50,40,36,48,41,59,32,125,0,123,32,77,111,100,117,108,101,46,98,117,115,87,114,105,116,101,49,54,40,36,48,44,32,36,49,41,59,32,125,0,123,32,77,111,100,117,108,101,46,98,117,115,87,114,105,116,101,51,50,40,36,48,44,32,36,49,41,59,32,125,0,112,99,32,104,97,115,32,108,115,98,105,116,32,115,101,116,32,48,120,37,48,56,88,10,0,123,32,114,101,116,117,114,110,32,77,111,100,117,108,101,46,116,114,97,112,79,110,73,110,115,116,114,117,99,116,105,111,110,70,101,116,99,104,40,36,48,41,59,32,125,0,45,45,45,32,48,120,37,48,56,88,58,32,48,120,37,48,52,88,32,0,97,100,99,32,114,37,117,44,114,37,117,10,0,97,100,100,115,32,114,37,117,44,114,37,117,44,35,48,120,37,88,10,0,97,100,100,115,32,114,37,117,44,35,48,120,37,48,50,88,10,0,97,100,100,115,32,114,37,117,44,114,37,117,44,114,37,117,10,0,97,100,100,32,114,37,117,44,114,37,117,10,0,97,100,100,32,112,99,44,46,46,46,32,112,114,111,100,117,99,101,100,32,97,110,32,97,114,109,32,97,100,100,114,101,115,115,32,48,120,37,48,56,88,32,48,120,37,48,56,88,10,0,97,100,100,32,114,37,117,44,80,67,44,35,48,120,37,48,50,88,10,0,97,100,100,32,114,37,117,44,83,80,44,35,48,120,37,48,50,88,10,0,97,100,100,32,83,80,44,35,48,120,37,48,50,88,10,0,97,110,100,115,32,114,37,117,44,114,37,117,10,0,97,115,114,115,32,114,37,117,44,114,37,117,44,35,48,120,37,88,10,0,97,115,114,115,32,114,37,117,44,114,37,117,10,0,98,101,113,32,48,120,37,48,56,88,10,0,98,110,101,32,48,120,37,48,56,88,10,0,98,99,115,32,48,120,37,48,56,88,10,0,98,99,99,32,48,120,37,48,56,88,10,0,98,109,105,32,48,120,37,48,56,88,10,0,98,112,108,32,48,120,37,48,56,88,10,0,98,118,115,32,48,120,37,48,56,88,10,0,98,118,99,32,48,120,37,48,56,88,10,0,98,104,105,32,48,120,37,48,56,88,10,0,98,108,115,32,48,120,37,48,56,88,10,0,98,103,101,32,48,120,37,48,56,88,10,0,98,108,116,32,48,120,37,48,56,88,10,0,98,103,116,32,48,120,37,48,56,88,10,0,98,108,101,32,48,120,37,48,56,88,10,0,66,32,48,120,37,48,56,88,10,0,98,105,99,115,32,114,37,117,44,114,37,117,10,0,98,107,112,116,32,48,120,37,48,50,88,10,0,98,108,32,48,120,37,48,56,88,10,0,98,108,120,32,114,37,117,10,0,99,97,110,110,111,116,32,98,114,97,110,99,104,32,116,111,32,97,114,109,32,48,120,37,48,56,88,32,48,120,37,48,52,88,10,0,98,120,32,114,37,117,10,0,123,32,114,101,116,117,114,110,32,77,111,100,117,108,101,46,116,114,97,112,79,110,66,120,51,50,40,36,48,44,32,36,49,41,59,32,125,0,99,109,110,115,32,114,37,117,44,114,37,117,10,0,99,109,112,32,114,37,117,44,35,48,120,37,48,50,88,10,0,99,109,112,115,32,114,37,117,44,114,37,117,10,0,99,112,115,32,84,79,68,79,10,0,99,112,121,32,114,37,117,44,114,37,117,10,0,101,111,114,115,32,114,37,117,44,114,37,117,10,0,108,100,109,105,97,32,114,37,117,33,44,123,0,114,37,117,0,125,10,0,108,100,114,32,114,37,117,44,91,114,37,117,44,35,48,120,37,88,93,10,0,108,100,114,32,114,37,117,44,91,114,37,117,44,114,37,117,93,10,0,108,100,114,32,114,37,117,44,91,80,67,43,35,48,120,37,88,93,32,0,59,64,32,48,120,37,88,10,0,108,100,114,32,114,37,117,44,91,83,80,43,35,48,120,37,88,93,10,0,108,100,114,98,32,114,37,117,44,91,114,37,117,44,35,48,120,37,88,93,10,0,108,100,114,98,32,114,37,117,44,91,114,37,117,44,114,37,117,93,10,0,108,100,114,104,32,114,37,117,44,91,114,37,117,44,35,48,120,37,88,93,10,0,108,100,114,104,32,114,37,117,44,91,114,37,117,44,114,37,117,93,10,0,108,100,114,115,98,32,114,37,117,44,91,114,37,117,44,114,37,117,93,10,0,108,100,114,115,104,32,114,37,117,44,91,114,37,117,44,114,37,117,93,10,0,108,115,108,115,32,114,37,117,44,114,37,117,44,35,48,120,37,88,10,0,108,115,108,115,32,114,37,117,44,114,37,117,10,0,108,115,114,115,32,114,37,117,44,114,37,117,44,35,48,120,37,88,10,0,108,115,114,115,32,114,37,117,44,114,37,117,10,0,109,111,118,115,32,114,37,117,44,35,48,120,37,48,50,88,10,0,109,111,118,115,32,114,37,117,44,114,37,117,10,0,109,111,118,32,114,37,117,44,114,37,117,10,0,109,117,108,115,32,114,37,117,44,114,37,117,10,0,109,118,110,115,32,114,37,117,44,114,37,117,10,0,110,101,103,115,32,114,37,117,44,114,37,117,10,0,111,114,114,115,32,114,37,117,44,114,37,117,10,0,112,111,112,32,123,0,112,99,0,112,111,112,32,123,114,99,125,32,119,105,116,104,32,97,110,32,65,82,77,32,97,100,100,114,101,115,115,32,112,99,32,48,120,37,48,56,88,32,112,111,112,112,101,100,32,48,120,37,48,56,88,10,0,112,117,115,104,32,123,0,108,114,0,112,117,115,104,32,123,108,114,125,32,119,105,116,104,32,97,110,32,65,82,77,32,97,100,100,114,101,115,115,32,112,99,32,48,120,37,48,56,88,32,112,111,112,112,101,100,32,48,120,37,48,56,88,10,0,114,101,118,32,114,37,117,44,114,37,117,10,0,114,101,118,49,54,32,114,37,117,44,114,37,117,10,0,114,101,118,115,104,32,114,37,117,44,114,37,117,10,0,114,111,114,115,32,114,37,117,44,114,37,117,10,0,115,98,99,32,114,37,117,44,114,37,117,10,0,115,101,116,101,110,100,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,10,0,115,116,109,105,97,32,114,37,117,33,44,123,0,115,116,114,32,114,37,117,44,91,114,37,117,44,35,48,120,37,88,93,10,0,115,116,114,32,114,37,117,44,91,114,37,117,44,114,37,117,93,10,0,115,116,114,32,114,37,117,44,91,83,80,44,35,48,120,37,88,93,10,0,115,116,114,98,32,114,37,117,44,91,114,37,117,44,35,48,120,37,88,93,10,0,115,116,114,98,32,114,37,117,44,91,114,37,117,44,114,37,117,93,10,0,115,116,114,104,32,114,37,117,44,91,114,37,117,44,35,48,120,37,88,93,10,0,115,116,114,104,32,114,37,117,44,91,114,37,117,44,114,37,117,93,10,0,115,117,98,115,32,114,37,117,44,114,37,117,44,35,48,120,37,88,10,0,115,117,98,115,32,114,37,117,44,35,48,120,37,48,50,88,10,0,115,117,98,115,32,114,37,117,44,114,37,117,44,114,37,117,10,0,115,117,98,32,83,80,44,35,48,120,37,48,50,88,10,0,115,119,105,32,48,120,37,48,50,88,10,0,10,10,115,119,105,32,48,120,37,48,50,88,10,0,115,120,116,98,32,114,37,117,44,114,37,117,10,0,115,120,116,104,32,114,37,117,44,114,37,117,10,0,116,115,116,32,114,37,117,44,114,37,117,10,0,117,120,116,98,32,114,37,117,44,114,37,117,10,0,117,120,116,104,32,114,37,117,44,114,37,117,10,0,105,110,118,97,108,105,100,32,105,110,115,116,114,117,99,116,105,111,110,32,48,120,37,48,56,88,32,48,120,37,48,52,88,10,0,17,0,10,0,17,17,17,0,0,0,0,5,0,0,0,0,0,0,9,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,15,10,17,17,17,3,10,7,0,1,19,9,11,11,0,0,9,6,11,0,0,11,0,6,17,0,0,0,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,10,10,17,17,17,0,10,0,0,2,0,9,11,0,0,0,9,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,13,0,0,0,0,9,14,0,0,0,0,0,14,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,15,0,0,0,0,9,16,0,0,0,0,0,16,0,0,16,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,10,0,0,0,0,9,11,0,0,0,0,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,45,43,32,32,32,48,88,48,120,0,40,110,117,108,108,41,0,45,48,88,43,48,88,32,48,88,45,48,120,43,48,120,32,48,120,0,105,110,102,0,73,78,70,0,110,97,110,0,78,65,78,0,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,46,0,84,33,34,25,13,1,2,3,17,75,28,12,16,4,11,29,18,30,39,104,110,111,112,113,98,32,5,6,15,19,20,21,26,8,22,7,40,36,23,24,9,10,14,27,31,37,35,131,130,125,38,42,43,60,61,62,63,67,71,74,77,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,105,106,107,108,114,115,116,121,122,123,124,0,73,108,108,101,103,97,108,32,98,121,116,101,32,115,101,113,117,101,110,99,101,0,68,111,109,97,105,110,32,101,114,114,111,114,0,82,101,115,117,108,116,32,110,111,116,32,114,101,112,114,101,115,101,110,116,97,98,108,101,0,78,111,116,32,97,32,116,116,121,0,80,101,114,109,105,115,115,105,111,110,32,100,101,110,105,101,100,0,79,112,101,114,97,116,105,111,110,32,110,111,116,32,112,101,114,109,105,116,116,101,100,0,78,111,32,115,117,99,104,32,102,105,108,101,32,111,114,32,100,105,114,101,99,116,111,114,121,0,78,111,32,115,117,99,104,32,112,114,111,99,101,115,115,0,70,105,108,101,32,101,120,105,115,116,115,0,86,97,108,117,101,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,100,97,116,97,32,116,121,112,101,0,78,111,32,115,112,97,99,101,32,108,101,102,116,32,111,110,32,100,101,118,105,99,101,0,79,117,116,32,111,102,32,109,101,109,111,114,121,0,82,101,115,111,117,114,99,101,32,98,117,115,121,0,73,110,116,101,114,114,117,112,116,101,100,32,115,121,115,116,101,109,32,99,97,108,108,0,82,101,115,111,117,114,99,101,32,116,101,109,112,111,114,97,114,105,108,121,32,117,110,97,118,97,105,108,97,98,108,101,0,73,110,118,97,108,105,100,32,115,101,101,107,0,67,114,111,115,115,45,100,101,118,105,99,101,32,108,105,110,107,0,82,101,97,100,45,111,110,108,121,32,102,105,108,101,32,115,121,115,116,101,109,0,68,105,114,101,99,116,111,114,121,32,110,111,116,32,101,109,112,116,121,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,112,101,101,114,0,79,112,101,114,97,116,105,111,110,32,116,105,109,101,100,32,111,117,116,0,67,111,110,110,101,99,116,105,111,110,32,114,101,102,117,115,101,100,0,72,111,115,116,32,105,115,32,100,111,119,110,0,72,111,115,116,32,105,115,32,117,110,114,101,97,99,104,97,98,108,101,0,65,100,100,114,101,115,115,32,105,110,32,117,115,101,0,66,114,111,107,101,110,32,112,105,112,101,0,73,47,79,32,101,114,114,111,114,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,32,111,114,32,97,100,100,114,101,115,115,0,66,108,111,99,107,32,100,101,118,105,99,101,32,114,101,113,117,105,114,101,100,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,0,78,111,116,32,97,32,100,105,114,101,99,116,111,114,121,0,73,115,32,97,32,100,105,114,101,99,116,111,114,121,0,84,101,120,116,32,102,105,108,101,32,98,117,115,121,0,69,120,101,99,32,102,111,114,109,97,116,32,101,114,114,111,114,0,73,110,118,97,108,105,100,32,97,114,103,117,109,101,110,116,0,65,114,103,117,109,101,110,116,32,108,105,115,116,32,116,111,111,32,108,111,110,103,0,83,121,109,98,111,108,105,99,32,108,105,110,107,32,108,111,111,112,0,70,105,108,101,110,97,109,101,32,116,111,111,32,108,111,110,103,0,84,111,111,32,109,97,110,121,32,111,112,101,110,32,102,105,108,101,115,32,105,110,32,115,121,115,116,101,109,0,78,111,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,115,32,97,118,97,105,108,97,98,108,101,0,66,97,100,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,0,78,111,32,99,104,105,108,100,32,112,114,111,99,101,115,115,0,66,97,100,32,97,100,100,114,101,115,115,0,70,105,108,101,32,116,111,111,32,108,97,114,103,101,0,84,111,111,32,109,97,110,121,32,108,105,110,107,115,0,78,111,32,108,111,99,107,115,32,97,118,97,105,108,97,98,108,101,0,82,101,115,111,117,114,99,101,32,100,101,97,100,108,111,99,107,32,119,111,117,108,100,32,111,99,99,117,114,0,83,116,97,116,101,32,110,111,116,32,114,101,99,111,118,101,114,97,98,108,101,0,80,114,101,118,105,111,117,115,32,111,119,110,101,114,32,100,105,101,100,0,79,112,101,114,97,116,105,111,110,32,99,97,110,99,101,108,101,100,0,70,117,110,99,116,105,111,110,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,0,78,111,32,109,101,115,115,97,103,101,32,111,102,32,100,101,115,105,114,101,100,32,116,121,112,101,0,73,100,101,110,116,105,102,105,101,114,32,114,101,109,111,118,101,100,0,68,101,118,105,99,101,32,110,111,116,32,97,32,115,116,114,101,97,109,0,78,111,32,100,97,116,97,32,97,118,97,105,108,97,98,108,101,0,68,101,118,105,99,101,32,116,105,109,101,111,117,116,0,79,117,116,32,111,102,32,115,116,114,101,97,109,115,32,114,101,115,111,117,114,99,101,115,0,76,105,110,107,32,104,97,115,32,98,101,101,110,32,115,101,118,101,114,101,100,0,80,114,111,116,111,99,111,108,32,101,114,114,111,114,0,66,97,100,32,109,101,115,115,97,103,101,0,70,105,108,101,32,100,101,115,99,114,105,112,116,111,114,32,105,110,32,98,97,100,32,115,116,97,116,101,0,78,111,116,32,97,32,115,111,99,107,101,116,0,68,101,115,116,105,110,97,116,105,111,110,32,97,100,100,114,101,115,115,32,114,101,113,117,105,114,101,100,0,77,101,115,115,97,103,101,32,116,111,111,32,108,97,114,103,101,0,80,114,111,116,111,99,111,108,32,119,114,111,110,103,32,116,121,112,101,32,102,111,114,32,115,111,99,107,101,116,0,80,114,111,116,111,99,111,108,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,80,114,111,116,111,99,111,108,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,83,111,99,107,101,116,32,116,121,112,101,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,78,111,116,32,115,117,112,112,111,114,116,101,100,0,80,114,111,116,111,99,111,108,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,65,100,100,114,101,115,115,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,32,98,121,32,112,114,111,116,111,99,111,108,0,65,100,100,114,101,115,115,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,78,101,116,119,111,114,107,32,105,115,32,100,111,119,110,0,78,101,116,119,111,114,107,32,117,110,114,101,97,99,104,97,98,108,101,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,110,101,116,119,111,114,107,0,67,111,110,110,101,99,116,105,111,110,32,97,98,111,114,116,101,100,0,78,111,32,98,117,102,102,101,114,32,115,112,97,99,101,32,97,118,97,105,108,97,98,108,101,0,83,111,99,107,101,116,32,105,115,32,99,111,110,110,101,99,116,101,100,0,83,111,99,107,101,116,32,110,111,116,32,99,111,110,110,101,99,116,101,100,0,67,97,110,110,111,116,32,115,101,110,100,32,97,102,116,101,114,32,115,111,99,107,101,116,32,115,104,117,116,100,111,119,110,0,79,112,101,114,97,116,105,111,110,32,97,108,114,101,97,100,121,32,105,110,32,112,114,111,103,114,101,115,115,0,79,112,101,114,97,116,105,111,110,32,105,110,32,112,114,111,103,114,101,115,115,0,83,116,97,108,101,32,102,105,108,101,32,104,97,110,100,108,101,0,82,101,109,111,116,101,32,73,47,79,32,101,114,114,111,114,0,81,117,111,116,97,32,101,120,99,101,101,100,101,100,0,78,111,32,109,101,100,105,117,109,32,102,111,117,110,100,0,87,114,111,110,103,32,109,101,100,105,117,109,32,116,121,112,101,0,78,111,32,101,114,114,111,114,32,105,110,102,111,114,109,97,116,105,111,110,0,0],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE);var tempDoublePtr=STATICTOP;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}STATICTOP+=16;var SYSCALLS={varargs:0,get:function(e){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(){return Pointer_stringify(SYSCALLS.get())},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return assert(e>=0?0===t:-1===t),e},getZero:function(){assert(0===SYSCALLS.get())}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}var cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",ALLOC_STATIC);function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}function __exit(e){Module.exit(e)}function _exit(e){__exit(e)}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=(SYSCALLS.get(),SYSCALLS.get()),i=SYSCALLS.get(),a=SYSCALLS.get(),s=n;return FS.llseek(r,s,a),HEAP32[i>>2]=r.position,r.getdents&&0===s&&0===a&&(r.getdents=null),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),i=SYSCALLS.get(),a=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(e,t){var r=___syscall146.buffers[e];assert(r),0===t||10===t?((1===e?Module.print:Module.printErr)(UTF8ArrayToString(r,0)),r.length=0):r.push(t)});for(var s=0;s<i;s++){for(var o=HEAP32[n+8*s>>2],u=HEAP32[n+(8*s+4)>>2],c=0;c<u;c++)___syscall146.printChar(r,HEAPU8[o+c]);a+=u}return a}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}__ATEXIT__.push((function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}})),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.asmGlobalArg={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort:abort,assert:assert,enlargeMemory:enlargeMemory,getTotalMemory:getTotalMemory,abortOnCannotGrowMemory:abortOnCannotGrowMemory,invoke_ii:invoke_ii,invoke_iiii:invoke_iiii,_emscripten_asm_const_ii:_emscripten_asm_const_ii,___syscall6:___syscall6,___setErrNo:___setErrNo,___syscall146:___syscall146,_emscripten_memcpy_big:_emscripten_memcpy_big,___syscall140:___syscall140,_exit:_exit,__exit:__exit,_emscripten_asm_const_iii:_emscripten_asm_const_iii,DYNAMICTOP_PTR:DYNAMICTOP_PTR,tempDoublePtr:tempDoublePtr,ABORT:ABORT,STACKTOP:STACKTOP,STACK_MAX:STACK_MAX,cttz_i8:cttz_i8};var asm=function(e,t,r){"use asm";var n=new e.Int8Array(r);var i=new e.Int16Array(r);var a=new e.Int32Array(r);var s=new e.Uint8Array(r);var o=new e.Uint16Array(r);var u=new e.Uint32Array(r);var c=new e.Float32Array(r);var l=new e.Float64Array(r);var h=t.DYNAMICTOP_PTR|0;var d=t.tempDoublePtr|0;var f=t.ABORT|0;var _=t.STACKTOP|0;var p=t.STACK_MAX|0;var m=t.cttz_i8|0;var g=e.NaN,b=e.Infinity;var y=0,v=0;var w=0;var k=e.Math.floor;var E=e.Math.abs;var S=e.Math.sqrt;var A=e.Math.pow;var T=e.Math.cos;var C=e.Math.sin;var I=e.Math.tan;var x=e.Math.acos;var R=e.Math.asin;var O=e.Math.atan;var M=e.Math.atan2;var P=e.Math.exp;var D=e.Math.log;var N=e.Math.ceil;var B=e.Math.imul;var L=e.Math.min;var $=e.Math.max;var F=e.Math.clz32;var j=t.abort;var U=t.assert;var H=t.enlargeMemory;var z=t.getTotalMemory;var W=t.abortOnCannotGrowMemory;var Z=t.invoke_ii;var Y=t.invoke_iiii;var G=t._emscripten_asm_const_ii;var K=t.___syscall6;var V=t.___setErrNo;var q=t.___syscall146;var Q=t._emscripten_memcpy_big;var X=t.___syscall140;var J=t._exit;var ee=t.__exit;var te=t._emscripten_asm_const_iii;function re(e){e=e|0;var t=0;t=_;_=_+e|0;_=_+15&-16;return t|0}function ne(){return _|0}function ie(e){e=e|0;_=e}function ae(e,t){e=e|0;t=t|0;_=e;p=t}function se(e,t){}function oe(e){e=e|0;w=e}function ue(){return w|0}function ce(e){e=e|0;a[1162]=e;return}function le(){return 380}function he(e){e=e|0;var t=0,r=0,n=0,i=0,s=0;a[1163]=0;if(!e){i=0;return i|0}else{t=0;r=0}while(1){s=ge()|0;r=(s|0)==0?r:s;n=(a[1163]|0)!=0;t=t+1|0;if(n|(s|0)==0^1)break;if(t>>>0>=e>>>0){t=0;i=5;break}}if((i|0)==5)return t|0;s=n?10:r;return s|0}function de(){a[1163]=1;return}function fe(e){e=e|0;n[5300]=e;return}function _e(e){e=e|0;var t=0,r=0;r=_;_=_+16|0;t=a[4668+((e&15)<<2)>>2]|0;if((e&15|0)!=15){_=r;return t|0}if(t&1|0){e=a[2]|0;a[r>>2]=t;$e(e,520,r)|0}t=t&-2;_=r;return t|0}function pe(e,t){e=e|0;t=t|0;a[4668+((e&15)<<2)>>2]=(e&15|0)==15?t&-2:t;return}function me(){a[1164]=4;a[1165]=0;a[1166]=0;a[1183]=0;a[1184]=0;return 0}function ge(){var e=0,t=0,r=0,i=0,s=0,o=0,u=0,c=0,l=0,h=0;h=_;_=_+4848|0;t=a[1182]|0;if(t&1|0){l=a[2]|0;a[h>>2]=t;$e(l,520,h)|0}e=a[1162]|0;if(!e){e=G(0,(t&-2)+-2|0)|0;if(e|0){l=e;_=h;return l|0}}else if(((t&-2)+-2|0)==(e|0)){l=20;_=h;return l|0}if((t&-2)>>>0>4026531839&(a[1183]|0)!=0){a[1183]=0;l=a[1180]|0;a[1167]=G(1,l|0)|0;a[1168]=G(1,l+4|0)|0;a[1169]=G(1,l+8|0)|0;a[1170]=G(1,l+12|0)|0;a[1179]=G(1,l+16|0)|0;a[1181]=G(1,l+20|0)|0;r=G(1,l+24|0)|0;a[1184]=G(1,l+28|0)|0;a[1180]=l+32}else r=t&-2;e=a[1164]|0;do{if(e&1){t=a[1166]|0;if(!t){a[1166]=a[1165];a[1164]=e|65536;e=e|65536;break}else{a[1166]=t+-1;break}}}while(0);if((e&3|0)==3)if((e&65536|0)!=0&(a[1183]|0)==0){i=a[1180]|0;t=a[1184]|0;e:do{if((i+-4&-268435456|0)==-536870912)switch((i+536813548|0)>>>2|i+536813548<<30|0){case 0:{a[1164]=t&65543;if((e&1|0)!=0|(t&1|0)==0)break e;a[1166]=a[1165];break e}case 1:{a[1165]=t&16777215;break e}case 2:{a[1166]=t&16777215;break e}case 3:break e;default:break e}else te(2,i+-4|0,t|0)|0}while(0);e:do{if((i+-8&-268435456|0)==-536870912)switch((i+536813544|0)>>>2|i+536813544<<30|0){case 0:{l=a[1164]|0;a[1164]=r&65543;if((r&1|0)==0|(l&1|0)!=0)break e;a[1166]=a[1165];break e}case 1:{a[1165]=r&16777215;break e}case 2:{a[1166]=r&16777215;break e}case 3:break e;default:break e}else te(2,i+-8|0,r|0)|0}while(0);e=a[1181]|0;e:do{if((i+-12&-268435456|0)==-536870912)switch((i+536813540|0)>>>2|i+536813540<<30|0){case 0:{l=a[1164]|0;a[1164]=e&65543;if((e&1|0)==0|(l&1|0)!=0)break e;a[1166]=a[1165];break e}case 1:{a[1165]=e&16777215;break e}case 2:{a[1166]=e&16777215;break e}case 3:break e;default:break e}else te(2,i+-12|0,e|0)|0}while(0);e=a[1179]|0;e:do{if((i+-16&-268435456|0)==-536870912)switch((i+536813536|0)>>>2|i+536813536<<30|0){case 0:{l=a[1164]|0;a[1164]=e&65543;if((e&1|0)==0|(l&1|0)!=0)break e;a[1166]=a[1165];break e}case 1:{a[1165]=e&16777215;break e}case 2:{a[1166]=e&16777215;break e}case 3:break e;default:break e}else te(2,i+-16|0,e|0)|0}while(0);e=a[1170]|0;e:do{if((i+-20&-268435456|0)==-536870912)switch((i+536813532|0)>>>2|i+536813532<<30|0){case 0:{l=a[1164]|0;a[1164]=e&65543;if((e&1|0)==0|(l&1|0)!=0)break e;a[1166]=a[1165];break e}case 1:{a[1165]=e&16777215;break e}case 2:{a[1166]=e&16777215;break e}case 3:break e;default:break e}else te(2,i+-20|0,e|0)|0}while(0);e=a[1169]|0;e:do{if((i+-24&-268435456|0)==-536870912)switch((i+536813528|0)>>>2|i+536813528<<30|0){case 0:{l=a[1164]|0;a[1164]=e&65543;if((e&1|0)==0|(l&1|0)!=0)break e;a[1166]=a[1165];break e}case 1:{a[1165]=e&16777215;break e}case 2:{a[1166]=e&16777215;break e}case 3:break e;default:break e}else te(2,i+-24|0,e|0)|0}while(0);e=a[1168]|0;e:do{if((i+-28&-268435456|0)==-536870912)switch((i+536813524|0)>>>2|i+536813524<<30|0){case 0:{l=a[1164]|0;a[1164]=e&65543;if((e&1|0)==0|(l&1|0)!=0)break e;a[1166]=a[1165];break e}case 1:{a[1165]=e&16777215;break e}case 2:{a[1166]=e&16777215;break e}case 3:break e;default:break e}else te(2,i+-28|0,e|0)|0}while(0);e=a[1167]|0;e:do{if((i+-32&-268435456|0)==-536870912)switch((i+536813520|0)>>>2|i+536813520<<30|0){case 0:{l=a[1164]|0;a[1164]=e&65543;if((e&1|0)==0|(l&1|0)!=0)break e;a[1166]=a[1165];break e}case 1:{a[1165]=e&16777215;break e}case 2:{a[1166]=e&16777215;break e}case 3:break e;default:break e}else te(2,i+-32|0,e|0)|0}while(0);a[1180]=i+-32;r=(G(1,60)|0)+2|0;a[1181]=-7;a[1183]=1}s=r+-2|0;l=G(3,s|0)|0;o=r+2|0;a[1182]=o&-2;if(n[5300]|0){i=a[2]|0;a[h+8>>2]=s;a[h+8+4>>2]=l;$e(i,591,h+8|0)|0}if((l&65472|0)==16704){if(n[5300]|0){c=a[2]|0;a[h+16>>2]=l&7;a[h+16+4>>2]=l>>>3&7;$e(c,611,h+16|0)|0}t=a[4668+((l&7)<<2)>>2]|0;r=a[4668+((l>>>3&7)<<2)>>2]|0;c=a[1184]|0;a[4668+((l&7)<<2)>>2]=r+t+(c>>>29&1);e=(r+t+(c>>>29&1)|0)<0?c|-2147483648:c&2147483647;e=(r+t+(c>>>29&1)|0)==0?e|1073741824:e&-1073741825;a[1184]=e;if(!(e&536870912)){l=((r>>>31)+(t>>>31)+(((r&2147483647)+(t&2147483647)|0)>>>31)&2|0)==0?e&-536870913:e|536870912;a[1184]=(((r&2147483647)+(t&2147483647)|0)>>>31|0)==(((r>>>31)+(t>>>31)+(((r&2147483647)+(t&2147483647)|0)>>>31)|0)>>>1&1|0)?l&-268435457:l|268435456;l=0;_=h;return l|0}else{l=(((r>>>31)+(t>>>31)+(((r&2147483647)+(t&2147483647)+1|0)>>>31)|0)&2|0)==0?e&-536870913:e|536870912;a[1184]=(((r&2147483647)+(t&2147483647)+1|0)>>>31|0)==(((r>>>31)+(t>>>31)+(((r&2147483647)+(t&2147483647)+1|0)>>>31)|0)>>>1&1|0)?l&-268435457:l|268435456;l=0;_=h;return l|0}}if((l&65024|0)==7168)if(l>>>6&7|0){if(n[5300]|0){c=a[2]|0;a[h+24>>2]=l&7;a[h+24+4>>2]=l>>>3&7;a[h+24+8>>2]=l>>>6&7;$e(c,624,h+24|0)|0}u=a[4668+((l>>>3&7)<<2)>>2]|0;a[4668+((l&7)<<2)>>2]=u+(l>>>6&7);c=a[1184]|0;c=(u+(l>>>6&7)|0)<0?c|-2147483648:c&2147483647;c=(u+(l>>>6&7)|0)==0?c|1073741824:c&-1073741825;c=((((u&2147483647)+(l>>>6&7)|0)>>>31)+(u>>>31)&2|0)==0?c&-536870913:c|536870912;a[1184]=(((u&2147483647)+(l>>>6&7)|0)>>>31|0)==(((((u&2147483647)+(l>>>6&7)|0)>>>31)+(u>>>31)|0)>>>1|0)?c&-268435457:c|268435456;l=0;_=h;return l|0}if((l&63488|0)==12288){if(n[5300]|0){c=a[2]|0;a[h+40>>2]=l>>>8&7;a[h+40+4>>2]=l&255;$e(c,644,h+40|0)|0}u=a[4668+((l>>>8&7)<<2)>>2]|0;a[4668+((l>>>8&7)<<2)>>2]=u+(l&255);c=a[1184]|0;c=(u+(l&255)|0)<0?c|-2147483648:c&2147483647;c=(u+(l&255)|0)==0?c|1073741824:c&-1073741825;c=((((u&2147483647)+(l&255)|0)>>>31)+(u>>>31)&2|0)==0?c&-536870913:c|536870912;a[1184]=(((u&2147483647)+(l&255)|0)>>>31|0)==(((((u&2147483647)+(l&255)|0)>>>31)+(u>>>31)|0)>>>1|0)?c&-268435457:c|268435456;l=0;_=h;return l|0}if((l&65024|0)==6144){if(n[5300]|0){c=a[2]|0;a[h+48>>2]=l&7;a[h+48+4>>2]=l>>>3&7;a[h+48+8>>2]=l>>>6&7;$e(c,662,h+48|0)|0}c=a[4668+((l>>>3&7)<<2)>>2]|0;u=a[4668+((l>>>6&7)<<2)>>2]|0;a[4668+((l&7)<<2)>>2]=u+c;l=a[1184]|0;l=(u+c|0)<0?l|-2147483648:l&2147483647;l=(u+c|0)==0?l|1073741824:l&-1073741825;l=((u>>>31)+(c>>>31)+(((u&2147483647)+(c&2147483647)|0)>>>31)&2|0)==0?l&-536870913:l|536870912;a[1184]=(((u&2147483647)+(c&2147483647)|0)>>>31|0)==(((u>>>31)+(c>>>31)+(((u&2147483647)+(c&2147483647)|0)>>>31)|0)>>>1&1|0)?l&-268435457:l|268435456;l=0;_=h;return l|0}if((l&65280|0)==17408){if(n[5300]|0){c=a[2]|0;a[h+64>>2]=l>>>4&8|l&7;a[h+64+4>>2]=l>>>3&15;$e(c,680,h+64|0)|0}e=a[4668+((l>>>4&8|l&7)<<2)>>2]|0;if((l>>>4&8|l&7|0)==15){if(e&1|0){c=a[2]|0;a[h+72>>2]=e;$e(c,520,h+72|0)|0}e=e&-2}t=a[4668+((l>>>3&15)<<2)>>2]|0;if((l>>>3&15|0)==15){if(t&1|0){c=a[2]|0;a[h+80>>2]=t;$e(c,520,h+80|0)|0}t=t&-2}e=t+e|0;do{if((l>>>4&8|l&7|0)==15)if(!(e&1)){c=a[2]|0;a[h+88>>2]=o;a[h+88+4>>2]=e;$e(c,693,h+88|0)|0;J(1)}else{u=e+2&-2;break}else u=e}while(0);a[4668+((l>>>4&8|l&7)<<2)>>2]=(l>>>4&8|l&7|0)==15?u&-2:u;l=0;_=h;return l|0}e=1;t=(l&63488)<<16>>16;if(e)switch(t|0){case-24576:{if(n[5300]|0){c=a[2]|0;a[h+96>>2]=l>>>8&7;a[h+96+4>>2]=l<<2&1020;$e(c,743,h+96|0)|0}e=a[1182]|0;if(e&1|0){c=a[2]|0;a[h+104>>2]=e;$e(c,520,h+104|0)|0}a[4668+((l>>>8&7)<<2)>>2]=(e&-4)+(l<<2&1020);l=0;_=h;return l|0}case-22528:{if(n[5300]|0){c=a[2]|0;a[h+112>>2]=l>>>8&7;a[h+112+4>>2]=l<<2&1020;$e(c,763,h+112|0)|0}a[4668+((l>>>8&7)<<2)>>2]=(a[1180]|0)+(l<<2&1020);l=0;_=h;return l|0}default:e=1}if(e)switch(t|0){default:{if((l&65408|0)==45056){if(n[5300]|0){c=a[2]|0;a[h+120>>2]=l<<2&508;$e(c,783,h+120|0)|0}a[1180]=(a[1180]|0)+(l<<2&508);l=0;_=h;return l|0}if((l&65472|0)==16384){if(n[5300]|0){c=a[2]|0;a[h+128>>2]=l&7;a[h+128+4>>2]=l>>>3&7;$e(c,799,h+128|0)|0}c=a[4668+((l>>>3&7)<<2)>>2]&a[4668+((l&7)<<2)>>2];a[4668+((l&7)<<2)>>2]=c;l=a[1184]|0;l=(c|0)<0?l|-2147483648:l&2147483647;a[1184]=(c|0)==0?l|1073741824:l&-1073741825;l=0;_=h;return l|0}if((l&63488|0)==4096){if(n[5300]|0){c=a[2]|0;a[h+136>>2]=l&7;a[h+136+4>>2]=l>>>3&7;a[h+136+8>>2]=l>>>6&31;$e(c,813,h+136|0)|0}e=a[4668+((l>>>3&7)<<2)>>2]|0;do{if(!(l>>>6&31)){r=a[1184]|0;if((e|0)<0){a[1184]=r|536870912;t=-1;e=r|536870912;break}else{a[1184]=r&-536870913;t=0;e=r&-536870913;break}}else{c=a[1184]|0;c=e&1<<(l>>>6&31)+-1|0?c|536870912:c&-536870913;a[1184]=c;t=((e|0)<0?-1<<32-(l>>>6&31):0)|e>>>(l>>>6&31);e=c}}while(0);a[4668+((l&7)<<2)>>2]=t;l=(t|0)<0?e|-2147483648:e&2147483647;a[1184]=(t|0)==0?l|1073741824:l&-1073741825;l=0;_=h;return l|0}if((l&65472|0)==16640){if(n[5300]|0){c=a[2]|0;a[h+152>>2]=l&7;a[h+152+4>>2]=l>>>3&7;$e(c,833,h+152|0)|0}t=a[4668+((l&7)<<2)>>2]|0;e=a[4668+((l>>>3&7)<<2)>>2]&255;do{if(!e)e=a[1184]|0;else{if(e>>>0<32){c=a[1184]|0;c=1<<e+-1&t|0?c|536870912:c&-536870913;a[1184]=c;t=((t|0)<0?-1<<32-e:0)|t>>>e;e=c;break}e=a[1184]|0;if((t|0)<0){a[1184]=e|536870912;t=-1;e=e|536870912;break}else{a[1184]=e&-536870913;t=0;e=e&-536870913;break}}}while(0);a[4668+((l&7)<<2)>>2]=t;l=(t|0)<0?e|-2147483648:e&2147483647;a[1184]=(t|0)==0?l|1073741824:l&-1073741825;l=0;_=h;return l|0}e:do{if((l&61440|0)==53248){t=(((l&128|0)==0?l&255:l|-256)<<1)+o|0;do{switch(l>>>8&15){case 0:{if(n[5300]|0){l=a[2]|0;a[h+160>>2]=t+-1;$e(l,847,h+160|0)|0}if(!(a[1184]&1073741824)){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 1:{if(n[5300]|0){l=a[2]|0;a[h+168>>2]=t+-1;$e(l,859,h+168|0)|0}if(a[1184]&1073741824|0){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 2:{if(n[5300]|0){l=a[2]|0;a[h+176>>2]=t+-1;$e(l,871,h+176|0)|0}if(!(a[1184]&536870912)){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 3:{if(n[5300]|0){l=a[2]|0;a[h+184>>2]=t+-1;$e(l,883,h+184|0)|0}if(a[1184]&536870912|0){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 4:{if(n[5300]|0){l=a[2]|0;a[h+192>>2]=t+-1;$e(l,895,h+192|0)|0}if((a[1184]|0)>=0){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 5:{if(n[5300]|0){l=a[2]|0;a[h+200>>2]=t+-1;$e(l,907,h+200|0)|0}if((a[1184]|0)<0){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 6:{if(n[5300]|0){l=a[2]|0;a[h+208>>2]=t+-1;$e(l,919,h+208|0)|0}if(!(a[1184]&268435456)){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 7:{if(n[5300]|0){l=a[2]|0;a[h+216>>2]=t+-1;$e(l,931,h+216|0)|0}if(a[1184]&268435456|0){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 8:{if(n[5300]|0){l=a[2]|0;a[h+224>>2]=t+-1;$e(l,943,h+224|0)|0}if((a[1184]&1610612736|0)!=536870912){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 9:{if(n[5300]|0){l=a[2]|0;a[h+232>>2]=t+-1;$e(l,955,h+232|0)|0}if((a[1184]&1610612736|0)==536870912){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 10:{if(n[5300]|0){l=a[2]|0;a[h+240>>2]=t+-1;$e(l,967,h+240|0)|0}e=a[1184]&-1879048192;t:do{if((e|0)<0){switch(e|0){case-1879048192:break t;default:c=0}_=h;return c|0}else{switch(e|0){case 0:break t;default:c=0}_=h;return c|0}}while(0);a[1182]=t+2&-2;l=0;_=h;return l|0}case 11:{if(n[5300]|0){l=a[2]|0;a[h+248>>2]=t+-1;$e(l,979,h+248|0)|0}l=a[1184]|0;if(!((l&268435456|0?(l|0)<0?0:(l&268435456)>>>28:(l|0)<0?1:(l&268435456)>>>28)|0)){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 12:{if(n[5300]|0){l=a[2]|0;a[h+256>>2]=t+-1;$e(l,991,h+256|0)|0}l=a[1184]|0;if(l&1073741824|0?1:(((l&-1879048192|0)==0?(l&-1879048192|0)==-1879048192?2:1:(l&-1879048192|0)==-1879048192&1)|0)==0){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}case 13:{if(n[5300]|0){l=a[2]|0;a[h+264>>2]=t+-1;$e(l,1003,h+264|0)|0}l=a[1184]|0;if(((l&268435456|0?(l|0)<0?0:(l&268435456)>>>28:(l|0)<0?1:(l&268435456)>>>28)|0)==(0-(l>>>30&1)|0)){l=0;_=h;return l|0}a[1182]=t+2&-2;l=0;_=h;return l|0}default:break e}}while(0)}}while(0);if((l&63488|0)==57344){e=(((l&1024|0)==0?l&2047:l|-2048)<<1)+o|0;if(n[5300]|0){l=a[2]|0;a[h+272>>2]=e+-1;$e(l,1015,h+272|0)|0}a[1182]=e+2&-2;l=0;_=h;return l|0}if((l&65472|0)==17280){if(n[5300]|0){c=a[2]|0;a[h+280>>2]=l&7;a[h+280+4>>2]=l>>>3&7;$e(c,1025,h+280|0)|0}c=a[4668+((l&7)<<2)>>2]&~a[4668+((l>>>3&7)<<2)>>2];a[4668+((l&7)<<2)>>2]=c;l=a[1184]|0;l=(c|0)<0?l|-2147483648:l&2147483647;a[1184]=(c|0)==0?l|1073741824:l&-1073741825;l=0;_=h;return l|0}if((l&65280|0)==48640){c=a[2]|0;a[h+288>>2]=l&255;$e(c,1039,h+288|0)|0;l=1;_=h;return l|0}e:do{if((l&57344|0)==57344){if((l&6144)<4096){switch(l&6144){case 2048:break;default:break e}e=(a[1181]|0)+(l<<1&4094)&-4|2;if(n[5300]|0){l=a[2]|0;a[h+304>>2]=e+-3;$e(l,1052,h+304|0)|0}a[1181]=r|1;a[1182]=e;l=0;_=h;return l|0}switch(l&6144){case 4096:{if(n[5300]|0)at(10,a[2]|0)|0;a[1181]=(((l&1024|0)==0?l&2047:l|1046528)<<12)+o;l=0;_=h;return l|0}case 6144:{e=(a[1181]|0)+(l<<1&4094)|0;if(n[5300]|0){l=a[2]|0;a[h+296>>2]=e+-1;$e(l,1052,h+296|0)|0}a[1181]=r|1;a[1182]=e+2&-2;l=0;_=h;return l|0}default:break e}}}while(0);e=(n[5300]|0)!=0;t=1;i=(l&65415)<<16>>16;if(t)switch(i|0){case 18304:{if(e){c=a[2]|0;a[h+312>>2]=l>>>3&15;$e(c,1063,h+312|0)|0}e=a[4668+((l>>>3&15)<<2)>>2]|0;if((l>>>3&15|0)==15){if(e&1|0){c=a[2]|0;a[h+320>>2]=e;$e(c,520,h+320|0)|0}e=e&-2}e=e+2|0;if(!(e&1)){c=a[2]|0;a[h+328>>2]=o;a[h+328+4>>2]=l;$e(c,1072,h+328|0)|0;l=2;_=h;return l|0}else{a[1181]=r|1;a[1182]=e&-2;l=0;_=h;return l|0}}case 18176:{if(e){c=a[2]|0;a[h+336>>2]=l>>>3&15;$e(c,1108,h+336|0)|0}e=a[4668+((l>>>3&15)<<2)>>2]|0;if((l>>>3&15|0)==15){if(e&1|0){l=a[2]|0;a[h+344>>2]=e;$e(l,520,h+344|0)|0}e=e&-2}e=e+2|0;if(e&1|0){a[1182]=e&-2;l=0;_=h;return l|0}e=te(4,s|0,e|0)|0;if(e|0){l=e;_=h;return l|0}a[1182]=(a[1181]|0)+2&-2;l=0;_=h;return l|0}default:t=1}if(t)switch(i|0){default:{if((l&65472|0)==17088){if(e){c=a[2]|0;a[h+352>>2]=l&7;a[h+352+4>>2]=l>>>3&7;$e(c,1154,h+352|0)|0}c=a[4668+((l&7)<<2)>>2]|0;u=a[4668+((l>>>3&7)<<2)>>2]|0;l=a[1184]|0;l=(u+c|0)<0?l|-2147483648:l&2147483647;l=(u+c|0)==0?l|1073741824:l&-1073741825;l=((u>>>31)+(c>>>31)+(((u&2147483647)+(c&2147483647)|0)>>>31)&2|0)==0?l&-536870913:l|536870912;a[1184]=(((u&2147483647)+(c&2147483647)|0)>>>31|0)==(((u>>>31)+(c>>>31)+(((u&2147483647)+(c&2147483647)|0)>>>31)|0)>>>1&1|0)?l&-268435457:l|268435456;l=0;_=h;return l|0}if((l&63488|0)==10240){if(e){c=a[2]|0;a[h+360>>2]=l>>>8&7;a[h+360+4>>2]=l&255;$e(c,1168,h+360|0)|0}u=a[4668+((l>>>8&7)<<2)>>2]|0;c=a[1184]|0;c=(u-(l&255)|0)<0?c|-2147483648:c&2147483647;c=(u-(l&255)|0)==0?c|1073741824:c&-1073741825;c=(((u>>>31)+1+((-2147483648-(l&255)+(u&2147483647)|0)>>>31)|0)&2|0)==0?c&-536870913:c|536870912;a[1184]=((-2147483648-(l&255)+(u&2147483647)|0)>>>31|0)==(((u>>>31)+1+((-2147483648-(l&255)+(u&2147483647)|0)>>>31)|0)>>>1&1|0)?c&-268435457:c|268435456;l=0;_=h;return l|0}if((l&65472|0)==17024){if(e){c=a[2]|0;a[h+368>>2]=l&7;a[h+368+4>>2]=l>>>3&7;$e(c,1185,h+368|0)|0}u=a[4668+((l&7)<<2)>>2]|0;c=a[4668+((l>>>3&7)<<2)>>2]|0;l=a[1184]|0;l=(u-c|0)<0?l|-2147483648:l&2147483647;l=(u-c|0)==0?l|1073741824:l&-1073741825;l=(((~c>>>31)+(u>>>31)+(((u&2147483647)+1+(~c&2147483647)|0)>>>31)|0)&2|0)==0?l&-536870913:l|536870912;a[1184]=(((u&2147483647)+1+(~c&2147483647)|0)>>>31|0)==(((~c>>>31)+(u>>>31)+(((u&2147483647)+1+(~c&2147483647)|0)>>>31)|0)>>>1&1|0)?l&-268435457:l|268435456;l=0;_=h;return l|0}if((l&65280|0)==17664){if(e){c=a[2]|0;a[h+376>>2]=l>>>4&8|l&7;a[h+376+4>>2]=l>>>3&15;$e(c,1185,h+376|0)|0}e=a[4668+((l>>>4&8|l&7)<<2)>>2]|0;if((l>>>4&8|l&7|0)==15){if(e&1|0){c=a[2]|0;a[h+384>>2]=e;$e(c,520,h+384|0)|0}t=e&-2}else t=e;e=a[4668+((l>>>3&15)<<2)>>2]|0;if((l>>>3&15|0)==15){if(e&1|0){l=a[2]|0;a[h+392>>2]=e;$e(l,520,h+392|0)|0}e=e&-2}c=t-e|0;l=a[1184]|0;l=(c|0)<0?l|-2147483648:l&2147483647;l=(c|0)==0?l|1073741824:l&-1073741825;c=~e;u=((t&2147483647)+1+(c&2147483647)|0)>>>31;c=(c>>>31)+(t>>>31)+u|0;l=(c&2|0)==0?l&-536870913:l|536870912;a[1184]=(u|0)==(c>>>1&1|0)?l&-268435457:l|268435456;l=0;_=h;return l|0}if((l&65512|0)==46688&e)Re(1199,9,1,a[2]|0)|0;e=1;t=(l&65472)<<16>>16;if(e)switch(t|0){case 17920:{if(n[5300]|0){c=a[2]|0;a[h+400>>2]=l&7;a[h+400+4>>2]=l>>>3&7;$e(c,1209,h+400|0)|0}a[4668+((l&7)<<2)>>2]=a[4668+((l>>>3&7)<<2)>>2];l=0;_=h;return l|0}case 16448:{if(n[5300]|0){c=a[2]|0;a[h+408>>2]=l&7;a[h+408+4>>2]=l>>>3&7;$e(c,1222,h+408|0)|0}c=a[4668+((l>>>3&7)<<2)>>2]^a[4668+((l&7)<<2)>>2];a[4668+((l&7)<<2)>>2]=c;l=a[1184]|0;l=(c|0)<0?l|-2147483648:l&2147483647;a[1184]=(c|0)==0?l|1073741824:l&-1073741825;l=0;_=h;return l|0}default:e=1}if(e)switch(t|0){default:{e:do{if((l&63488)<<16>>16<26624){switch((l&63488)<<16>>16){case-14336:break;default:break e}if(!(n[5300]|0))t=l&1;else{t=a[2]|0;a[h+416>>2]=l>>>8&7;$e(t,1236,h+416|0)|0;if(!(l&1))e=0;else{a[h+424>>2]=0;$e(t,1249,h+424|0)|0;e=1}if(l&2){if(e|0)at(44,t)|0;a[h+1176>>2]=1;$e(t,1249,h+1176|0)|0;e=e+1|0}if(l&4){if(e|0)at(44,t)|0;a[h+1184>>2]=2;$e(t,1249,h+1184|0)|0;e=e+1|0}if(l&8){if(e|0)at(44,t)|0;a[h+1192>>2]=3;$e(t,1249,h+1192|0)|0;e=e+1|0}if(l&16){if(e|0)at(44,t)|0;a[h+1200>>2]=4;$e(t,1249,h+1200|0)|0;e=e+1|0}if(l&32){if(e|0)at(44,t)|0;a[h+1208>>2]=5;$e(t,1249,h+1208|0)|0;e=e+1|0}if(l&64){if(e|0)at(44,t)|0;a[h+1216>>2]=6;$e(t,1249,h+1216|0)|0;e=e+1|0}if(l&128|0){if(e|0)at(44,t)|0;a[h+1224>>2]=7;$e(t,1249,h+1224|0)|0}Re(1253,2,1,t)|0;t=l&1}e=a[4668+((l>>>8&7)<<2)>>2]|0;if(t){a[1167]=G(1,e|0)|0;e=e+4|0}if(l&2){a[1168]=G(1,e|0)|0;e=e+4|0}if(l&4){a[1169]=G(1,e|0)|0;e=e+4|0}if(l&8){a[1170]=G(1,e|0)|0;e=e+4|0}if(l&16){a[1171]=G(1,e|0)|0;e=e+4|0}if(l&32){a[1172]=G(1,e|0)|0;e=e+4|0}if(l&64){a[1173]=G(1,e|0)|0;e=e+4|0}if(l&128){a[1174]=G(1,e|0)|0;e=e+4|0}if(1<<(l>>>8&7)&l|0){l=0;_=h;return l|0}a[4668+((l>>>8&7)<<2)>>2]=e;l=0;_=h;return l|0}else{switch((l&63488)<<16>>16){case 26624:break;default:break e}if(n[5300]|0){c=a[2]|0;a[h+432>>2]=l&7;a[h+432+4>>2]=l>>>3&7;a[h+432+8>>2]=l>>>4&124;$e(c,1256,h+432|0)|0}a[4668+((l&7)<<2)>>2]=G(1,(a[4668+((l>>>3&7)<<2)>>2]|0)+(l>>>4&124)|0)|0;l=0;_=h;return l|0}}while(0);if((l&65024|0)==22528){if(n[5300]|0){c=a[2]|0;a[h+448>>2]=l&7;a[h+448+4>>2]=l>>>3&7;a[h+448+8>>2]=l>>>6&7;$e(c,1277,h+448|0)|0}a[4668+((l&7)<<2)>>2]=G(1,(a[4668+((l>>>6&7)<<2)>>2]|0)+(a[4668+((l>>>3&7)<<2)>>2]|0)|0)|0;l=0;_=h;return l|0}e:do{if((l&63488)<<16>>16<18432){switch((l&63488)<<16>>16){case-26624:break;default:break e}if(n[5300]|0){c=a[2]|0;a[h+488>>2]=l>>>8&7;a[h+488+4>>2]=l<<2&1020;$e(c,1325,h+488|0)|0}a[4668+((l>>>8&7)<<2)>>2]=G(1,(a[1180]|0)+(l<<2&1020)|0)|0;l=0;_=h;return l|0}else{if((l&63488)<<16>>16>=30720){switch((l&63488)<<16>>16){case 30720:break;default:break e}if(n[5300]|0){c=a[2]|0;a[h+496>>2]=l&7;a[h+496+4>>2]=l>>>3&7;a[h+496+8>>2]=l>>>6&31;$e(c,1345,h+496|0)|0}u=a[4668+((l>>>3&7)<<2)>>2]|0;c=G(3,u+(l>>>6&31)&-2|0)|0;a[4668+((l&7)<<2)>>2]=((u+(l>>>6)&1|0)==0?c:c>>>8)&255;l=0;_=h;return l|0}switch((l&63488)<<16>>16){case 18432:break;default:break e}if(n[5300]|0){c=a[2]|0;a[h+464>>2]=l>>>8&7;a[h+464+4>>2]=l<<2&1020;$e(c,1296,h+464|0)|0}e=a[1182]|0;if(e&1|0){c=a[2]|0;a[h+472>>2]=e;$e(c,520,h+472|0)|0}if(n[5300]|0){c=a[2]|0;a[h+480>>2]=(e&-4)+(l<<2&1020);$e(c,1316,h+480|0)|0}a[4668+((l>>>8&7)<<2)>>2]=G(1,(e&-4)+(l<<2&1020)|0)|0;l=0;_=h;return l|0}}while(0);a[h+1368>>2]=c;a[h+3472>>2]=s;a[h+3496>>2]=l;a[h+3504>>2]=o;a[h+4792>>2]=0;a[h+4796>>2]=0;Et(h);v=a[h+4792>>2]|0;y=a[h+4796>>2]|0;a[h+4792>>2]=0;a[h+4796>>2]=0;if((v|0)==6)return y|0}}}}}}return 0}function be(e){e=e|0;var t=0,r=0,n=0,i=0,s=0,o=0,u=0,c=0,l=0,h=0,d=0,f=0,p=0;p=_;_=_+16|0;do{if(e>>>0<245){d=e>>>0<11?16:e+11&-8;l=a[1185]|0;if(l>>>(d>>>3)&3|0){e=4780+((l>>>(d>>>3)&1^1)+(d>>>3)<<1<<2)|0;t=a[e+8>>2]|0;r=a[t+8>>2]|0;if((e|0)==(r|0))a[1185]=l&~(1<<(l>>>(d>>>3)&1^1)+(d>>>3));else{a[r+12>>2]=e;a[e+8>>2]=r}f=(l>>>(d>>>3)&1^1)+(d>>>3)<<3;a[t+4>>2]=f|3;a[t+f+4>>2]=a[t+f+4>>2]|1;f=t+8|0;_=p;return f|0}h=a[1187]|0;if(d>>>0>h>>>0){if(l>>>(d>>>3)|0){e=l>>>(d>>>3)<<(d>>>3)&(2<<(d>>>3)|0-(2<<(d>>>3)));i=((e&0-e)+-1|0)>>>(((e&0-e)+-1|0)>>>12&16);n=i>>>(i>>>5&8)>>>(i>>>(i>>>5&8)>>>2&4);n=(i>>>5&8|((e&0-e)+-1|0)>>>12&16|i>>>(i>>>5&8)>>>2&4|n>>>1&2|n>>>(n>>>1&2)>>>1&1)+(n>>>(n>>>1&2)>>>(n>>>(n>>>1&2)>>>1&1))|0;i=a[4780+(n<<1<<2)+8>>2]|0;e=a[i+8>>2]|0;if((4780+(n<<1<<2)|0)==(e|0)){a[1185]=l&~(1<<n);e=l&~(1<<n)}else{a[e+12>>2]=4780+(n<<1<<2);a[4780+(n<<1<<2)+8>>2]=e;e=l}a[i+4>>2]=d|3;a[i+d+4>>2]=(n<<3)-d|1;a[i+d+((n<<3)-d)>>2]=(n<<3)-d;if(h|0){r=a[1190]|0;if(!(e&1<<(h>>>3))){a[1185]=e|1<<(h>>>3);e=4780+(h>>>3<<1<<2)|0;t=4780+(h>>>3<<1<<2)+8|0}else{e=a[4780+(h>>>3<<1<<2)+8>>2]|0;t=4780+(h>>>3<<1<<2)+8|0}a[t>>2]=r;a[e+12>>2]=r;a[r+8>>2]=e;a[r+12>>2]=4780+(h>>>3<<1<<2)}a[1187]=(n<<3)-d;a[1190]=i+d;f=i+8|0;_=p;return f|0}c=a[1186]|0;if(c){t=((c&0-c)+-1|0)>>>(((c&0-c)+-1|0)>>>12&16);e=t>>>(t>>>5&8)>>>(t>>>(t>>>5&8)>>>2&4);e=a[5044+((t>>>5&8|((c&0-c)+-1|0)>>>12&16|t>>>(t>>>5&8)>>>2&4|e>>>1&2|e>>>(e>>>1&2)>>>1&1)+(e>>>(e>>>1&2)>>>(e>>>(e>>>1&2)>>>1&1))<<2)>>2]|0;t=(a[e+4>>2]&-8)-d|0;r=a[e+16+(((a[e+16>>2]|0)==0&1)<<2)>>2]|0;if(!r){u=e;s=t}else{do{o=(a[r+4>>2]&-8)-d|0;u=o>>>0<t>>>0;t=u?o:t;e=u?r:e;r=a[r+16+(((a[r+16>>2]|0)==0&1)<<2)>>2]|0}while((r|0)!=0);u=e;s=t}o=u+d|0;if(u>>>0<o>>>0){i=a[u+24>>2]|0;e=a[u+12>>2]|0;do{if((e|0)==(u|0)){t=u+20|0;e=a[t>>2]|0;if(!e){t=u+16|0;e=a[t>>2]|0;if(!e){t=0;break}}while(1){r=e+20|0;n=a[r>>2]|0;if(n|0){e=n;t=r;continue}r=e+16|0;n=a[r>>2]|0;if(!n)break;else{e=n;t=r}}a[t>>2]=0;t=e}else{t=a[u+8>>2]|0;a[t+12>>2]=e;a[e+8>>2]=t;t=e}}while(0);do{if(i|0){e=a[u+28>>2]|0;if((u|0)==(a[5044+(e<<2)>>2]|0)){a[5044+(e<<2)>>2]=t;if(!t){a[1186]=c&~(1<<e);break}}else{a[i+16+(((a[i+16>>2]|0)!=(u|0)&1)<<2)>>2]=t;if(!t)break}a[t+24>>2]=i;e=a[u+16>>2]|0;if(e|0){a[t+16>>2]=e;a[e+24>>2]=t}e=a[u+20>>2]|0;if(e|0){a[t+20>>2]=e;a[e+24>>2]=t}}}while(0);if(s>>>0<16){f=s+d|0;a[u+4>>2]=f|3;f=u+f+4|0;a[f>>2]=a[f>>2]|1}else{a[u+4>>2]=d|3;a[o+4>>2]=s|1;a[o+s>>2]=s;if(h|0){r=a[1190]|0;if(!(l&1<<(h>>>3))){a[1185]=l|1<<(h>>>3);e=4780+(h>>>3<<1<<2)|0;t=4780+(h>>>3<<1<<2)+8|0}else{e=a[4780+(h>>>3<<1<<2)+8>>2]|0;t=4780+(h>>>3<<1<<2)+8|0}a[t>>2]=r;a[e+12>>2]=r;a[r+8>>2]=e;a[r+12>>2]=4780+(h>>>3<<1<<2)}a[1187]=s;a[1190]=o}f=u+8|0;_=p;return f|0}}}}else if(e>>>0>4294967231)d=-1;else{d=e+11&-8;c=a[1186]|0;if(c){if(!((e+11|0)>>>8))o=0;else if(d>>>0>16777215)o=31;else{o=(e+11|0)>>>8<<((((e+11|0)>>>8)+1048320|0)>>>16&8);o=14-((o+520192|0)>>>16&4|(((e+11|0)>>>8)+1048320|0)>>>16&8|((o<<((o+520192|0)>>>16&4))+245760|0)>>>16&2)+(o<<((o+520192|0)>>>16&4)<<(((o<<((o+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;o=d>>>(o+7|0)&1|o<<1}t=a[5044+(o<<2)>>2]|0;e:do{if(!t){t=0;e=0;r=0-d|0;f=57}else{e=0;r=0-d|0;s=d<<((o|0)==31?0:25-(o>>>1)|0);i=0;while(1){n=(a[t+4>>2]&-8)-d|0;if(n>>>0<r>>>0)if(!n){e=t;r=0;n=t;f=61;break e}else{e=t;r=n}n=a[t+20>>2]|0;t=a[t+16+(s>>>31<<2)>>2]|0;i=(n|0)==0|(n|0)==(t|0)?i:n;n=(t|0)==0;if(n){t=i;f=57;break}else s=s<<((n^1)&1)}}}while(0);if((f|0)==57){if((t|0)==0&(e|0)==0){e=2<<o;if(!(c&(e|0-e)))break;l=(c&(e|0-e)&0-(c&(e|0-e)))+-1|0;h=l>>>(l>>>12&16)>>>(l>>>(l>>>12&16)>>>5&8);t=h>>>(h>>>2&4)>>>(h>>>(h>>>2&4)>>>1&2);e=0;t=a[5044+((l>>>(l>>>12&16)>>>5&8|l>>>12&16|h>>>2&4|h>>>(h>>>2&4)>>>1&2|t>>>1&1)+(t>>>(t>>>1&1))<<2)>>2]|0}if(!t){u=e;s=r}else{n=t;f=61}}if((f|0)==61)while(1){f=0;t=(a[n+4>>2]&-8)-d|0;h=t>>>0<r>>>0;t=h?t:r;e=h?n:e;n=a[n+16+(((a[n+16>>2]|0)==0&1)<<2)>>2]|0;if(!n){u=e;s=t;break}else{r=t;f=61}}if(u)if(s>>>0<((a[1187]|0)-d|0)>>>0){o=u+d|0;if(u>>>0>=o>>>0){f=0;_=p;return f|0}i=a[u+24>>2]|0;e=a[u+12>>2]|0;do{if((e|0)==(u|0)){t=u+20|0;e=a[t>>2]|0;if(!e){t=u+16|0;e=a[t>>2]|0;if(!e){e=0;break}}while(1){r=e+20|0;n=a[r>>2]|0;if(n|0){e=n;t=r;continue}r=e+16|0;n=a[r>>2]|0;if(!n)break;else{e=n;t=r}}a[t>>2]=0}else{f=a[u+8>>2]|0;a[f+12>>2]=e;a[e+8>>2]=f}}while(0);do{if(!i)n=c;else{t=a[u+28>>2]|0;if((u|0)==(a[5044+(t<<2)>>2]|0)){a[5044+(t<<2)>>2]=e;if(!e){a[1186]=c&~(1<<t);n=c&~(1<<t);break}}else{a[i+16+(((a[i+16>>2]|0)!=(u|0)&1)<<2)>>2]=e;if(!e){n=c;break}}a[e+24>>2]=i;t=a[u+16>>2]|0;if(t|0){a[e+16>>2]=t;a[t+24>>2]=e}t=a[u+20>>2]|0;if(!t)n=c;else{a[e+20>>2]=t;a[t+24>>2]=e;n=c}}}while(0);do{if(s>>>0<16){f=s+d|0;a[u+4>>2]=f|3;f=u+f+4|0;a[f>>2]=a[f>>2]|1}else{a[u+4>>2]=d|3;a[o+4>>2]=s|1;a[o+s>>2]=s;r=s>>>3;if(s>>>0<256){e=a[1185]|0;if(!(e&1<<r)){a[1185]=e|1<<r;e=4780+(r<<1<<2)|0;t=4780+(r<<1<<2)+8|0}else{e=a[4780+(r<<1<<2)+8>>2]|0;t=4780+(r<<1<<2)+8|0}a[t>>2]=o;a[e+12>>2]=o;a[o+8>>2]=e;a[o+12>>2]=4780+(r<<1<<2);break}e=s>>>8;if(!e)e=0;else if(s>>>0>16777215)e=31;else{f=e<<((e+1048320|0)>>>16&8)<<(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4);e=14-(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4|(e+1048320|0)>>>16&8|(f+245760|0)>>>16&2)+(f<<((f+245760|0)>>>16&2)>>>15)|0;e=s>>>(e+7|0)&1|e<<1}r=5044+(e<<2)|0;a[o+28>>2]=e;a[o+16+4>>2]=0;a[o+16>>2]=0;t=1<<e;if(!(n&t)){a[1186]=n|t;a[r>>2]=o;a[o+24>>2]=r;a[o+12>>2]=o;a[o+8>>2]=o;break}t=s<<((e|0)==31?0:25-(e>>>1)|0);r=a[r>>2]|0;while(1){if((a[r+4>>2]&-8|0)==(s|0)){f=97;break}n=r+16+(t>>>31<<2)|0;e=a[n>>2]|0;if(!e){f=96;break}else{t=t<<1;r=e}}if((f|0)==96){a[n>>2]=o;a[o+24>>2]=r;a[o+12>>2]=o;a[o+8>>2]=o;break}else if((f|0)==97){d=r+8|0;f=a[d>>2]|0;a[f+12>>2]=o;a[d>>2]=o;a[o+8>>2]=f;a[o+12>>2]=r;a[o+24>>2]=0;break}}}while(0);f=u+8|0;_=p;return f|0}}}}while(0);r=a[1187]|0;if(r>>>0>=d>>>0){e=r-d|0;t=a[1190]|0;if(e>>>0>15){f=t+d|0;a[1190]=f;a[1187]=e;a[f+4>>2]=e|1;a[f+e>>2]=e;a[t+4>>2]=d|3}else{a[1187]=0;a[1190]=0;a[t+4>>2]=r|3;a[t+r+4>>2]=a[t+r+4>>2]|1}f=t+8|0;_=p;return f|0}s=a[1188]|0;if(s>>>0>d>>>0){l=s-d|0;a[1188]=l;f=a[1191]|0;h=f+d|0;a[1191]=h;a[h+4>>2]=l|1;a[f+4>>2]=d|3;f=f+8|0;_=p;return f|0}if(!(a[1303]|0)){a[1305]=4096;a[1304]=4096;a[1306]=-1;a[1307]=-1;a[1308]=0;a[1296]=0;a[p>>2]=p&-16^1431655768;a[1303]=p&-16^1431655768;e=4096}else e=a[1305]|0;o=d+48|0;u=d+47|0;l=e+u|0;c=0-e|0;if((l&c)>>>0<=d>>>0){f=0;_=p;return f|0}e=a[1295]|0;if(e|0){h=a[1293]|0;if((h+(l&c)|0)>>>0<=h>>>0?1:(h+(l&c)|0)>>>0>e>>>0){f=0;_=p;return f|0}}e:do{if(!(a[1296]&4)){r=a[1191]|0;t:do{if(!r)f=118;else{e=5188;while(1){t=a[e>>2]|0;if(t>>>0<=r>>>0){i=e+4|0;if((t+(a[i>>2]|0)|0)>>>0>r>>>0)break}e=a[e+8>>2]|0;if(!e){f=118;break t}}if((l-s&c)>>>0<2147483647){n=mt(l-s&c|0)|0;if((n|0)==((a[e>>2]|0)+(a[i>>2]|0)|0))if((n|0)==(-1|0))e=l-s&c;else{s=l-s&c;f=135;break e}else{r=l-s&c;f=126}}else e=0}}while(0);do{if((f|0)==118){i=mt(0)|0;if((i|0)==(-1|0))e=0;else{r=a[1304]|0;r=((r+-1&i|0)==0?0:(r+-1+i&0-r)-i|0)+(l&c)|0;e=a[1293]|0;if(r>>>0>d>>>0&r>>>0<2147483647){t=a[1295]|0;if(t|0)if((r+e|0)>>>0<=e>>>0|(r+e|0)>>>0>t>>>0){e=0;break}n=mt(r|0)|0;if((n|0)==(i|0)){s=r;n=i;f=135;break e}else f=126}else e=0}}}while(0);do{if((f|0)==126){t=0-r|0;if(!(o>>>0>r>>>0&(r>>>0<2147483647&(n|0)!=(-1|0))))if((n|0)==(-1|0)){e=0;break}else{s=r;f=135;break e}e=a[1305]|0;e=u-r+e&0-e;if(e>>>0>=2147483647){s=r;f=135;break e}if((mt(e|0)|0)==(-1|0)){mt(t|0)|0;e=0;break}else{s=e+r|0;f=135;break e}}}while(0);a[1296]=a[1296]|4;f=133}else{e=0;f=133}}while(0);if((f|0)==133)if((l&c)>>>0<2147483647){n=mt(l&c|0)|0;t=mt(0)|0;r=(t-n|0)>>>0>(d+40|0)>>>0;if(!((n|0)==(-1|0)|r^1|n>>>0<t>>>0&((n|0)!=(-1|0)&(t|0)!=(-1|0))^1)){s=r?t-n|0:e;f=135}}if((f|0)==135){e=(a[1293]|0)+s|0;a[1293]=e;if(e>>>0>(a[1294]|0)>>>0)a[1294]=e;o=a[1191]|0;do{if(!o){f=a[1189]|0;if((f|0)==0|n>>>0<f>>>0)a[1189]=n;a[1297]=n;a[1298]=s;a[1300]=0;a[1194]=a[1303];a[1193]=-1;e=0;do{f=4780+(e<<1<<2)|0;a[f+12>>2]=f;a[f+8>>2]=f;e=e+1|0}while((e|0)!=32);f=n+8|0;f=(f&7|0)==0?0:0-f&7;h=n+f|0;f=s+-40-f|0;a[1191]=h;a[1188]=f;a[h+4>>2]=f|1;a[h+f+4>>2]=40;a[1192]=a[1307]}else{e=5188;do{t=a[e>>2]|0;r=e+4|0;i=a[r>>2]|0;if((n|0)==(t+i|0)){f=145;break}e=a[e+8>>2]|0}while((e|0)!=0);if((f|0)==145)if(!(a[e+12>>2]&8))if(o>>>0<n>>>0&o>>>0>=t>>>0){a[r>>2]=i+s;h=(o+8&7|0)==0?0:0-(o+8)&7;f=(a[1188]|0)+(s-h)|0;a[1191]=o+h;a[1188]=f;a[o+h+4>>2]=f|1;a[o+h+f+4>>2]=40;a[1192]=a[1307];break}if(n>>>0<(a[1189]|0)>>>0)a[1189]=n;t=n+s|0;e=5188;do{if((a[e>>2]|0)==(t|0)){f=153;break}e=a[e+8>>2]|0}while((e|0)!=0);if((f|0)==153)if(!(a[e+12>>2]&8)){a[e>>2]=n;l=e+4|0;a[l>>2]=(a[l>>2]|0)+s;l=n+8|0;l=n+((l&7|0)==0?0:0-l&7)|0;e=t+((t+8&7|0)==0?0:0-(t+8)&7)|0;c=l+d|0;u=e-l-d|0;a[l+4>>2]=d|3;do{if((e|0)==(o|0)){f=(a[1188]|0)+u|0;a[1188]=f;a[1191]=c;a[c+4>>2]=f|1}else{if((e|0)==(a[1190]|0)){f=(a[1187]|0)+u|0;a[1187]=f;a[1190]=c;a[c+4>>2]=f|1;a[c+f>>2]=f;break}o=a[e+4>>2]|0;if((o&3|0)==1){e:do{if(o>>>0<256){t=a[e+8>>2]|0;r=a[e+12>>2]|0;if((r|0)==(t|0)){a[1185]=a[1185]&~(1<<(o>>>3));break}else{a[t+12>>2]=r;a[r+8>>2]=t;break}}else{s=a[e+24>>2]|0;t=a[e+12>>2]|0;do{if((t|0)==(e|0)){t=a[e+16+4>>2]|0;if(!t){t=a[e+16>>2]|0;if(!t){t=0;break}else i=e+16|0}else i=e+16+4|0;while(1){r=t+20|0;n=a[r>>2]|0;if(n|0){t=n;i=r;continue}r=t+16|0;n=a[r>>2]|0;if(!n)break;else{t=n;i=r}}a[i>>2]=0}else{f=a[e+8>>2]|0;a[f+12>>2]=t;a[t+8>>2]=f}}while(0);if(!s)break;r=a[e+28>>2]|0;do{if((e|0)==(a[5044+(r<<2)>>2]|0)){a[5044+(r<<2)>>2]=t;if(t|0)break;a[1186]=a[1186]&~(1<<r);break e}else{a[s+16+(((a[s+16>>2]|0)!=(e|0)&1)<<2)>>2]=t;if(!t)break e}}while(0);a[t+24>>2]=s;r=a[e+16>>2]|0;if(r|0){a[t+16>>2]=r;a[r+24>>2]=t}r=a[e+16+4>>2]|0;if(!r)break;a[t+20>>2]=r;a[r+24>>2]=t}}while(0);e=e+(o&-8)|0;i=(o&-8)+u|0}else i=u;r=e+4|0;a[r>>2]=a[r>>2]&-2;a[c+4>>2]=i|1;a[c+i>>2]=i;r=i>>>3;if(i>>>0<256){e=a[1185]|0;if(!(e&1<<r)){a[1185]=e|1<<r;e=4780+(r<<1<<2)|0;t=4780+(r<<1<<2)+8|0}else{e=a[4780+(r<<1<<2)+8>>2]|0;t=4780+(r<<1<<2)+8|0}a[t>>2]=c;a[e+12>>2]=c;a[c+8>>2]=e;a[c+12>>2]=4780+(r<<1<<2);break}e=i>>>8;do{if(!e)e=0;else{if(i>>>0>16777215){e=31;break}f=e<<((e+1048320|0)>>>16&8)<<(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4);e=14-(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4|(e+1048320|0)>>>16&8|(f+245760|0)>>>16&2)+(f<<((f+245760|0)>>>16&2)>>>15)|0;e=i>>>(e+7|0)&1|e<<1}}while(0);n=5044+(e<<2)|0;a[c+28>>2]=e;a[c+16+4>>2]=0;a[c+16>>2]=0;t=a[1186]|0;r=1<<e;if(!(t&r)){a[1186]=t|r;a[n>>2]=c;a[c+24>>2]=n;a[c+12>>2]=c;a[c+8>>2]=c;break}t=i<<((e|0)==31?0:25-(e>>>1)|0);r=a[n>>2]|0;while(1){if((a[r+4>>2]&-8|0)==(i|0)){f=194;break}n=r+16+(t>>>31<<2)|0;e=a[n>>2]|0;if(!e){f=193;break}else{t=t<<1;r=e}}if((f|0)==193){a[n>>2]=c;a[c+24>>2]=r;a[c+12>>2]=c;a[c+8>>2]=c;break}else if((f|0)==194){d=r+8|0;f=a[d>>2]|0;a[f+12>>2]=c;a[d>>2]=c;a[c+8>>2]=f;a[c+12>>2]=r;a[c+24>>2]=0;break}}}while(0);f=l+8|0;_=p;return f|0}t=5188;while(1){e=a[t>>2]|0;if(e>>>0<=o>>>0){r=e+(a[t+4>>2]|0)|0;if(r>>>0>o>>>0)break}t=a[t+8>>2]|0}i=r+-47+((r+-47+8&7|0)==0?0:0-(r+-47+8)&7)|0;i=i>>>0<(o+16|0)>>>0?o:i;e=n+8|0;e=(e&7|0)==0?0:0-e&7;f=n+e|0;e=s+-40-e|0;a[1191]=f;a[1188]=e;a[f+4>>2]=e|1;a[f+e+4>>2]=40;a[1192]=a[1307];a[i+4>>2]=27;a[i+8>>2]=a[1297];a[i+8+4>>2]=a[1298];a[i+8+8>>2]=a[1299];a[i+8+12>>2]=a[1300];a[1297]=n;a[1298]=s;a[1300]=0;a[1299]=i+8;e=i+24|0;do{f=e;e=e+4|0;a[e>>2]=7}while((f+8|0)>>>0<r>>>0);if((i|0)!=(o|0)){a[i+4>>2]=a[i+4>>2]&-2;a[o+4>>2]=i-o|1;a[i>>2]=i-o;if((i-o|0)>>>0<256){r=4780+((i-o|0)>>>3<<1<<2)|0;e=a[1185]|0;if(!(e&1<<((i-o|0)>>>3))){a[1185]=e|1<<((i-o|0)>>>3);e=r;t=r+8|0}else{e=a[r+8>>2]|0;t=r+8|0}a[t>>2]=o;a[e+12>>2]=o;a[o+8>>2]=e;a[o+12>>2]=r;break}if(!((i-o|0)>>>8))e=0;else if((i-o|0)>>>0>16777215)e=31;else{e=(i-o|0)>>>8<<((((i-o|0)>>>8)+1048320|0)>>>16&8);e=14-((e+520192|0)>>>16&4|(((i-o|0)>>>8)+1048320|0)>>>16&8|((e<<((e+520192|0)>>>16&4))+245760|0)>>>16&2)+(e<<((e+520192|0)>>>16&4)<<(((e<<((e+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;e=(i-o|0)>>>(e+7|0)&1|e<<1}n=5044+(e<<2)|0;a[o+28>>2]=e;a[o+20>>2]=0;a[o+16>>2]=0;t=a[1186]|0;r=1<<e;if(!(t&r)){a[1186]=t|r;a[n>>2]=o;a[o+24>>2]=n;a[o+12>>2]=o;a[o+8>>2]=o;break}t=i-o<<((e|0)==31?0:25-(e>>>1)|0);r=a[n>>2]|0;while(1){if((a[r+4>>2]&-8|0)==(i-o|0)){f=216;break}n=r+16+(t>>>31<<2)|0;e=a[n>>2]|0;if(!e){f=215;break}else{t=t<<1;r=e}}if((f|0)==215){a[n>>2]=o;a[o+24>>2]=r;a[o+12>>2]=o;a[o+8>>2]=o;break}else if((f|0)==216){h=r+8|0;f=a[h>>2]|0;a[f+12>>2]=o;a[h>>2]=o;a[o+8>>2]=f;a[o+12>>2]=r;a[o+24>>2]=0;break}}}}while(0);e=a[1188]|0;if(e>>>0>d>>>0){l=e-d|0;a[1188]=l;f=a[1191]|0;h=f+d|0;a[1191]=h;a[h+4>>2]=l|1;a[f+4>>2]=d|3;f=f+8|0;_=p;return f|0}}a[(Ae()|0)>>2]=12;f=0;_=p;return f|0}function ye(e){e=e|0;var t=0,r=0,n=0,i=0,s=0,o=0,u=0,c=0;if(!e)return;t=a[1189]|0;r=a[e+-4>>2]|0;c=e+-8+(r&-8)|0;do{if(!(r&1)){n=a[e+-8>>2]|0;if(!(r&3))return;o=e+-8+(0-n)|0;s=n+(r&-8)|0;if(o>>>0<t>>>0)return;if((o|0)==(a[1190]|0)){e=a[c+4>>2]|0;if((e&3|0)!=3){u=o;t=s;break}a[1187]=s;a[c+4>>2]=e&-2;a[o+4>>2]=s|1;a[o+s>>2]=s;return}if(n>>>0<256){e=a[o+8>>2]|0;t=a[o+12>>2]|0;if((t|0)==(e|0)){a[1185]=a[1185]&~(1<<(n>>>3));u=o;t=s;break}else{a[e+12>>2]=t;a[t+8>>2]=e;u=o;t=s;break}}i=a[o+24>>2]|0;e=a[o+12>>2]|0;do{if((e|0)==(o|0)){e=a[o+16+4>>2]|0;if(!e){e=a[o+16>>2]|0;if(!e){e=0;break}else n=o+16|0}else n=o+16+4|0;while(1){t=e+20|0;r=a[t>>2]|0;if(r|0){e=r;n=t;continue}t=e+16|0;r=a[t>>2]|0;if(!r)break;else{e=r;n=t}}a[n>>2]=0}else{u=a[o+8>>2]|0;a[u+12>>2]=e;a[e+8>>2]=u}}while(0);if(!i){u=o;t=s}else{t=a[o+28>>2]|0;if((o|0)==(a[5044+(t<<2)>>2]|0)){a[5044+(t<<2)>>2]=e;if(!e){a[1186]=a[1186]&~(1<<t);u=o;t=s;break}}else{a[i+16+(((a[i+16>>2]|0)!=(o|0)&1)<<2)>>2]=e;if(!e){u=o;t=s;break}}a[e+24>>2]=i;t=a[o+16>>2]|0;if(t|0){a[e+16>>2]=t;a[t+24>>2]=e}t=a[o+16+4>>2]|0;if(!t){u=o;t=s}else{a[e+20>>2]=t;a[t+24>>2]=e;u=o;t=s}}}else{u=e+-8|0;t=r&-8;o=e+-8|0}}while(0);if(o>>>0>=c>>>0)return;r=a[c+4>>2]|0;if(!(r&1))return;if(!(r&2)){e=a[1190]|0;if((c|0)==(a[1191]|0)){c=(a[1188]|0)+t|0;a[1188]=c;a[1191]=u;a[u+4>>2]=c|1;if((u|0)!=(e|0))return;a[1190]=0;a[1187]=0;return}if((c|0)==(e|0)){c=(a[1187]|0)+t|0;a[1187]=c;a[1190]=o;a[u+4>>2]=c|1;a[o+c>>2]=c;return}i=(r&-8)+t|0;do{if(r>>>0<256){t=a[c+8>>2]|0;e=a[c+12>>2]|0;if((e|0)==(t|0)){a[1185]=a[1185]&~(1<<(r>>>3));break}else{a[t+12>>2]=e;a[e+8>>2]=t;break}}else{s=a[c+24>>2]|0;e=a[c+12>>2]|0;do{if((e|0)==(c|0)){e=a[c+16+4>>2]|0;if(!e){e=a[c+16>>2]|0;if(!e){t=0;break}else n=c+16|0}else n=c+16+4|0;while(1){t=e+20|0;r=a[t>>2]|0;if(r|0){e=r;n=t;continue}t=e+16|0;r=a[t>>2]|0;if(!r)break;else{e=r;n=t}}a[n>>2]=0;t=e}else{t=a[c+8>>2]|0;a[t+12>>2]=e;a[e+8>>2]=t;t=e}}while(0);if(s|0){e=a[c+28>>2]|0;if((c|0)==(a[5044+(e<<2)>>2]|0)){a[5044+(e<<2)>>2]=t;if(!t){a[1186]=a[1186]&~(1<<e);break}}else{a[s+16+(((a[s+16>>2]|0)!=(c|0)&1)<<2)>>2]=t;if(!t)break}a[t+24>>2]=s;e=a[c+16>>2]|0;if(e|0){a[t+16>>2]=e;a[e+24>>2]=t}e=a[c+16+4>>2]|0;if(e|0){a[t+20>>2]=e;a[e+24>>2]=t}}}}while(0);a[u+4>>2]=i|1;a[o+i>>2]=i;if((u|0)==(a[1190]|0)){a[1187]=i;return}}else{a[c+4>>2]=r&-2;a[u+4>>2]=t|1;a[o+t>>2]=t;i=t}r=i>>>3;if(i>>>0<256){e=a[1185]|0;if(!(e&1<<r)){a[1185]=e|1<<r;e=4780+(r<<1<<2)|0;t=4780+(r<<1<<2)+8|0}else{e=a[4780+(r<<1<<2)+8>>2]|0;t=4780+(r<<1<<2)+8|0}a[t>>2]=u;a[e+12>>2]=u;a[u+8>>2]=e;a[u+12>>2]=4780+(r<<1<<2);return}e=i>>>8;if(!e)e=0;else if(i>>>0>16777215)e=31;else{c=e<<((e+1048320|0)>>>16&8)<<(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4);e=14-(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4|(e+1048320|0)>>>16&8|(c+245760|0)>>>16&2)+(c<<((c+245760|0)>>>16&2)>>>15)|0;e=i>>>(e+7|0)&1|e<<1}n=5044+(e<<2)|0;a[u+28>>2]=e;a[u+20>>2]=0;a[u+16>>2]=0;t=a[1186]|0;r=1<<e;do{if(!(t&r)){a[1186]=t|r;a[n>>2]=u;a[u+24>>2]=n;a[u+12>>2]=u;a[u+8>>2]=u}else{t=i<<((e|0)==31?0:25-(e>>>1)|0);r=a[n>>2]|0;while(1){if((a[r+4>>2]&-8|0)==(i|0)){e=73;break}n=r+16+(t>>>31<<2)|0;e=a[n>>2]|0;if(!e){e=72;break}else{t=t<<1;r=e}}if((e|0)==72){a[n>>2]=u;a[u+24>>2]=r;a[u+12>>2]=u;a[u+8>>2]=u;break}else if((e|0)==73){o=r+8|0;c=a[o>>2]|0;a[c+12>>2]=u;a[o>>2]=u;a[u+8>>2]=c;a[u+12>>2]=r;a[u+24>>2]=0;break}}}while(0);c=(a[1193]|0)+-1|0;a[1193]=c;if(!c)e=5196;else return;while(1){e=a[e>>2]|0;if(!e)break;else e=e+8|0}a[1193]=-1;return}function ve(){return 5236}function we(e){e=e|0;var t=0;t=_;_=_+16|0;a[t>>2]=Ie(a[e+60>>2]|0)|0;e=Se(K(6,t|0)|0)|0;_=t;return e|0}function ke(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,i=0,s=0,o=0,u=0,c=0,l=0;u=_;_=_+48|0;n=a[e+28>>2]|0;a[u+32>>2]=n;n=(a[e+20>>2]|0)-n|0;a[u+32+4>>2]=n;a[u+32+8>>2]=t;a[u+32+12>>2]=r;a[u>>2]=a[e+60>>2];a[u+4>>2]=u+32;a[u+8>>2]=2;i=Se(q(146,u|0)|0)|0;e:do{if((n+r|0)==(i|0))o=3;else{t=2;s=n+r|0;n=u+32|0;while(1){if((i|0)<0)break;s=s-i|0;c=a[n+4>>2]|0;l=i>>>0>c>>>0;n=l?n+8|0:n;t=(l<<31>>31)+t|0;c=i-(l?c:0)|0;a[n>>2]=(a[n>>2]|0)+c;a[n+4>>2]=(a[n+4>>2]|0)-c;a[u+16>>2]=a[e+60>>2];a[u+16+4>>2]=n;a[u+16+8>>2]=t;i=Se(q(146,u+16|0)|0)|0;if((s|0)==(i|0)){o=3;break e}}a[e+16>>2]=0;a[e+28>>2]=0;a[e+20>>2]=0;a[e>>2]=a[e>>2]|32;if((t|0)==2)r=0;else r=r-(a[n+4>>2]|0)|0}}while(0);if((o|0)==3){l=a[e+44>>2]|0;a[e+16>>2]=l+(a[e+48>>2]|0);a[e+28>>2]=l;a[e+20>>2]=l}_=u;return r|0}function Ee(e,t,r){e=e|0;t=t|0;r=r|0;var n=0;n=_;_=_+32|0;a[n>>2]=a[e+60>>2];a[n+4>>2]=0;a[n+8>>2]=t;a[n+12>>2]=n+20;a[n+16>>2]=r;if((Se(X(140,n|0)|0)|0)<0){a[n+20>>2]=-1;e=-1}else e=a[n+20>>2]|0;_=n;return e|0}function Se(e){e=e|0;if(e>>>0>4294963200){a[(Ae()|0)>>2]=0-e;e=-1}return e|0}function Ae(){return(Te()|0)+64|0}function Te(){return Ce()|0}function Ce(){return 136}function Ie(e){e=e|0;return e|0}function xe(e,t){e=e|0;t=t|0;var r=0,i=0;r=n[e>>0]|0;i=n[t>>0]|0;if(r<<24>>24==0?1:r<<24>>24!=i<<24>>24)e=i;else{do{e=e+1|0;t=t+1|0;r=n[e>>0]|0;i=n[t>>0]|0}while(!(r<<24>>24==0?1:r<<24>>24!=i<<24>>24));e=i}return(r&255)-(e&255)|0}function Re(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var i=0;i=B(r,t)|0;r=(t|0)==0?0:r;if((a[n+76>>2]|0)>-1){e=Pe(e,i,n)|0}else e=Pe(e,i,n)|0;if((e|0)!=(i|0))r=(e>>>0)/(t>>>0)|0;return r|0}function Oe(e,t){e=e|0;t=t|0;var r=0,i=0,o=0,u=0;u=_;_=_+16|0;n[u>>0]=t;r=a[e+16>>2]|0;if(!r)if(!(Me(e)|0)){i=a[e+16>>2]|0;o=4}else r=-1;else{i=r;o=4}do{if((o|0)==4){r=a[e+20>>2]|0;if(r>>>0<i>>>0)if((t&255|0)!=(n[e+75>>0]|0)){a[e+20>>2]=r+1;n[r>>0]=t;r=t&255;break}if((At[a[e+36>>2]&3](e,u,1)|0)==1)r=s[u>>0]|0;else r=-1}}while(0);_=u;return r|0}function Me(e){e=e|0;var t=0;t=n[e+74>>0]|0;n[e+74>>0]=t+255|t;t=a[e>>2]|0;if(!(t&8)){a[e+8>>2]=0;a[e+4>>2]=0;t=a[e+44>>2]|0;a[e+28>>2]=t;a[e+20>>2]=t;a[e+16>>2]=t+(a[e+48>>2]|0);e=0}else{a[e>>2]=t|32;e=-1}return e|0}function Pe(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,s=0,o=0,u=0;i=a[r+16>>2]|0;if(!i)if(!(Me(r)|0)){s=a[r+16>>2]|0;o=5}else i=0;else{s=i;o=5}e:do{if((o|0)==5){i=a[r+20>>2]|0;if((s-i|0)>>>0<t>>>0){i=At[a[r+36>>2]&3](r,e,t)|0;break}t:do{if((n[r+75>>0]|0)>-1){o=t;while(1){if(!o){u=0;s=e;break t}s=o+-1|0;if((n[e+s>>0]|0)==10)break;else o=s}i=At[a[r+36>>2]&3](r,e,o)|0;if(i>>>0<o>>>0)break e;u=o;s=e+o|0;t=t-o|0;i=a[r+20>>2]|0}else{u=0;s=e}}while(0);dt(i|0,s|0,t|0)|0;a[r+20>>2]=(a[r+20>>2]|0)+t;i=u+t|0}}while(0);return i|0}function De(e,t){e=e|0;t=t|0;if(!t)t=0;else t=Ne(a[t>>2]|0,a[t+4>>2]|0,e)|0;return(t|0?t:e)|0}function Ne(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,s=0,o=0,u=0,c=0,l=0,h=0,d=0,f=0;f=(a[e>>2]|0)+1794895138|0;i=Be(a[e+8>>2]|0,f)|0;l=Be(a[e+12>>2]|0,f)|0;d=Be(a[e+16>>2]|0,f)|0;e:do{if(i>>>0<t>>>2>>>0)if(l>>>0<(t-(i<<2)|0)>>>0&d>>>0<(t-(i<<2)|0)>>>0)if(!((d|l)&3)){c=0;while(1){u=i>>>1;h=c+u|0;s=Be(a[e+((h<<1)+(l>>>2)<<2)>>2]|0,f)|0;o=Be(a[e+((h<<1)+(l>>>2)+1<<2)>>2]|0,f)|0;if(!(o>>>0<t>>>0&s>>>0<(t-o|0)>>>0)){i=0;break e}if(n[e+(o+s)>>0]|0){i=0;break e}s=xe(r,e+o|0)|0;if(!s)break;if((i|0)==1){i=0;break e}else{c=(s|0)<0?c:h;i=(s|0)<0?u:i-u|0}}s=Be(a[e+((h<<1)+(d>>>2)<<2)>>2]|0,f)|0;i=Be(a[e+((h<<1)+(d>>>2)+1<<2)>>2]|0,f)|0;if(i>>>0<t>>>0&s>>>0<(t-i|0)>>>0)i=(n[e+(i+s)>>0]|0)==0?e+i|0:0;else i=0}else i=0;else i=0;else i=0}while(0);return i|0}function Be(e,t){e=e|0;t=t|0;var r=0;r=bt(e|0)|0;return((t|0)==0?e:r)|0}function Le(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,s=0,o=0;e:do{if((r|0)!=0&(e&3|0)!=0){i=e;e=r;while(1){if((n[i>>0]|0)==(t&255)<<24>>24){s=6;break e}i=i+1|0;r=e+-1|0;if((r|0)!=0&(i&3|0)!=0)e=r;else{e=r;r=(r|0)!=0;s=5;break}}}else{i=e;e=r;r=(r|0)!=0;s=5}}while(0);if((s|0)==5)if(r)s=6;else e=0;e:do{if((s|0)==6)if((n[i>>0]|0)!=(t&255)<<24>>24){r=B(t&255,16843009)|0;t:do{if(e>>>0>3)while(1){o=a[i>>2]^r;if((o&-2139062144^-2139062144)&o+-16843009|0)break;i=i+4|0;e=e+-4|0;if(e>>>0<=3){s=11;break t}}else s=11}while(0);if((s|0)==11)if(!e){e=0;break}while(1){if((n[i>>0]|0)==(t&255)<<24>>24)break e;i=i+1|0;e=e+-1|0;if(!e){e=0;break}}}}while(0);return(e|0?i:0)|0}function $e(e,t,r){e=e|0;t=t|0;r=r|0;var n=0;n=_;_=_+16|0;a[n>>2]=r;r=Fe(e,t,n)|0;_=n;return r|0}function Fe(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,s=0,o=0;o=_;_=_+224|0;i=o+80|0;s=i+40|0;do{a[i>>2]=0;i=i+4|0}while((i|0)<(s|0));a[o+120>>2]=a[r>>2];if((je(0,t,o+120|0,o,o+80|0)|0)<0)r=-1;else{s=a[e>>2]|0;if((n[e+74>>0]|0)<1)a[e>>2]=s&-33;if(!(a[e+48>>2]|0)){i=a[e+44>>2]|0;a[e+44>>2]=o+136;a[e+28>>2]=o+136;a[e+20>>2]=o+136;a[e+48>>2]=80;a[e+16>>2]=o+136+80;r=je(e,t,o+120|0,o,o+80|0)|0;if(i){At[a[e+36>>2]&3](e,0,0)|0;r=(a[e+20>>2]|0)==0?-1:r;a[e+44>>2]=i;a[e+48>>2]=0;a[e+16>>2]=0;a[e+28>>2]=0;a[e+20>>2]=0}}else r=je(e,t,o+120|0,o,o+80|0)|0;i=a[e>>2]|0;a[e>>2]=i|s&32;r=(i&32|0)==0?r:-1}_=o;return r|0}function je(e,t,r,s,o){e=e|0;t=t|0;r=r|0;s=s|0;o=o|0;var u=0,c=0,h=0,d=0,f=0,p=0,m=0,g=0,b=0,y=0,v=0,k=0,E=0,S=0,A=0;S=_;_=_+64|0;a[S+16>>2]=t;E=S+24+40|0;c=0;u=0;p=0;e:while(1){do{if((u|0)>-1)if((c|0)>(2147483647-u|0)){a[(Ae()|0)>>2]=75;u=-1;break}else{u=c+u|0;break}}while(0);c=n[t>>0]|0;if(!(c<<24>>24)){k=87;break}else h=t;t:while(1){switch(c<<24>>24){case 37:{c=h;k=9;break t}case 0:{c=h;break t}}v=h+1|0;a[S+16>>2]=v;c=n[v>>0]|0;h=v}t:do{if((k|0)==9)while(1){k=0;if((n[h+1>>0]|0)!=37)break t;c=c+1|0;h=h+2|0;a[S+16>>2]=h;if((n[h>>0]|0)==37)k=9;else break}}while(0);c=c-t|0;if(e|0)Ue(e,t,c);if(c|0){t=h;continue}d=h+1|0;c=(n[d>>0]|0)+-48|0;if(c>>>0<10){v=(n[h+2>>0]|0)==36;b=v?c:-1;p=v?1:p;d=v?h+3|0:d}else b=-1;a[S+16>>2]=d;c=n[d>>0]|0;t:do{if(((c<<24>>24)+-32|0)>>>0<32){h=0;m=c;f=(c<<24>>24)+-32|0;while(1){c=1<<f;if(!(c&75913)){c=m;break t}h=c|h;d=d+1|0;a[S+16>>2]=d;c=n[d>>0]|0;f=(c<<24>>24)+-32|0;if(f>>>0>=32)break;else m=c}}else h=0}while(0);if(c<<24>>24==42){f=d+1|0;c=(n[f>>0]|0)+-48|0;if(c>>>0<10)if((n[d+2>>0]|0)==36){a[o+(c<<2)>>2]=10;c=a[s+((n[f>>0]|0)+-48<<3)>>2]|0;p=1;d=d+3|0}else k=23;else k=23;if((k|0)==23){k=0;if(p|0){u=-1;break}if(e|0){p=(a[r>>2]|0)+(4-1)&~(4-1);c=a[p>>2]|0;a[r>>2]=p+4;p=0;d=f}else{c=0;p=0;d=f}}a[S+16>>2]=d;y=(c|0)<0;c=y?0-c|0:c;y=y?h|8192:h}else{c=He(S+16|0)|0;if((c|0)<0){u=-1;break}y=h;d=a[S+16>>2]|0}do{if((n[d>>0]|0)==46){if((n[d+1>>0]|0)!=42){a[S+16>>2]=d+1;h=He(S+16|0)|0;d=a[S+16>>2]|0;break}f=d+2|0;h=(n[f>>0]|0)+-48|0;if(h>>>0<10)if((n[d+3>>0]|0)==36){a[o+(h<<2)>>2]=10;h=a[s+((n[f>>0]|0)+-48<<3)>>2]|0;d=d+4|0;a[S+16>>2]=d;break}if(p|0){u=-1;break e}if(e|0){v=(a[r>>2]|0)+(4-1)&~(4-1);h=a[v>>2]|0;a[r>>2]=v+4}else h=0;a[S+16>>2]=f;d=f}else h=-1}while(0);g=0;while(1){if(((n[d>>0]|0)+-65|0)>>>0>57){u=-1;break e}v=d+1|0;a[S+16>>2]=v;f=n[(n[d>>0]|0)+-65+(2221+(g*58|0))>>0]|0;if(((f&255)+-1|0)>>>0<8){g=f&255;d=v}else break}if(!(f<<24>>24)){u=-1;break}m=(b|0)>-1;do{if(f<<24>>24==19)if(m){u=-1;break e}else k=49;else{if(m){a[o+(b<<2)>>2]=f&255;b=s+(b<<3)|0;k=a[b+4>>2]|0;a[S>>2]=a[b>>2];a[S+4>>2]=k;k=49;break}if(!e){u=0;break e}ze(S,f&255,r)}}while(0);if((k|0)==49){k=0;if(!e){c=0;t=v;continue}}d=n[d>>0]|0;d=(g|0)!=0&(d&15|0)==3?d&-33:d;b=y&-65537;y=(y&8192|0)==0?y:b;t:do{switch(d|0){case 110:switch((g&255)<<24>>24){case 0:{a[a[S>>2]>>2]=u;c=0;t=v;continue e}case 1:{a[a[S>>2]>>2]=u;c=0;t=v;continue e}case 2:{c=a[S>>2]|0;a[c>>2]=u;a[c+4>>2]=((u|0)<0)<<31>>31;c=0;t=v;continue e}case 3:{i[a[S>>2]>>1]=u;c=0;t=v;continue e}case 4:{n[a[S>>2]>>0]=u;c=0;t=v;continue e}case 6:{a[a[S>>2]>>2]=u;c=0;t=v;continue e}case 7:{c=a[S>>2]|0;a[c>>2]=u;a[c+4>>2]=((u|0)<0)<<31>>31;c=0;t=v;continue e}default:{c=0;t=v;continue e}}case 112:{d=120;h=h>>>0>8?h:8;t=y|8;k=61;break}case 88:case 120:{t=y;k=61;break}case 111:{t=a[S>>2]|0;d=a[S+4>>2]|0;b=Ze(t,d,E)|0;g=b;f=0;m=2685;h=(y&8|0)==0|(h|0)>(E-b|0)?h:E-b+1|0;b=y;k=67;break}case 105:case 100:{t=a[S>>2]|0;d=a[S+4>>2]|0;if((d|0)<0){t=ot(0,0,t|0,d|0)|0;d=w;a[S>>2]=t;a[S+4>>2]=d;f=1;m=2685;k=66;break t}else{f=(y&2049|0)!=0&1;m=(y&2048|0)==0?(y&1|0)==0?2685:2687:2686;k=66;break t}}case 117:{f=0;m=2685;t=a[S>>2]|0;d=a[S+4>>2]|0;k=66;break}case 99:{n[S+24+39>>0]=a[S>>2];t=S+24+39|0;f=0;m=2685;g=E;d=1;h=b;break}case 109:{d=Ge(a[(Ae()|0)>>2]|0)|0;k=71;break}case 115:{d=a[S>>2]|0;d=d|0?d:2695;k=71;break}case 67:{a[S+8>>2]=a[S>>2];a[S+8+4>>2]=0;a[S>>2]=S+8;g=-1;d=S+8|0;k=75;break}case 83:{t=a[S>>2]|0;if(!h){Ke(e,32,c,0,y);t=0;k=84}else{g=h;d=t;k=75}break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{c=qe(e,+l[S>>3],c,h,y,d)|0;t=v;continue e}default:{f=0;m=2685;g=E;d=h;h=y}}}while(0);t:do{if((k|0)==61){A=a[S>>2]|0;y=a[S+4>>2]|0;g=We(A,y,E,d&32)|0;m=(t&8|0)==0|(A|0)==0&(y|0)==0;f=m?0:2;m=m?2685:2685+(d>>4)|0;b=t;t=A;d=y;k=67}else if((k|0)==66){g=Ye(t,d,E)|0;b=y;k=67}else if((k|0)==71){k=0;A=Le(d,0,h)|0;t=d;f=0;m=2685;g=(A|0)==0?d+h|0:A;d=(A|0)==0?h:A-d|0;h=b}else if((k|0)==75){k=0;m=d;t=0;h=0;while(1){f=a[m>>2]|0;if(!f)break;h=Ve(S+20|0,f)|0;if((h|0)<0|h>>>0>(g-t|0)>>>0)break;t=h+t|0;if(g>>>0>t>>>0)m=m+4|0;else break}if((h|0)<0){u=-1;break e}Ke(e,32,c,t,y);if(!t){t=0;k=84}else{f=0;while(1){h=a[d>>2]|0;if(!h){k=84;break t}h=Ve(S+20|0,h)|0;f=h+f|0;if((f|0)>(t|0)){k=84;break t}Ue(e,S+20|0,h);if(f>>>0>=t>>>0){k=84;break}else d=d+4|0}}}}while(0);if((k|0)==67){k=0;d=(t|0)!=0|(d|0)!=0;A=(h|0)!=0|d;d=((d^1)&1)+(E-g)|0;t=A?g:E;g=E;d=A?(h|0)>(d|0)?h:d:h;h=(h|0)>-1?b&-65537:b}else if((k|0)==84){k=0;Ke(e,32,c,t,y^8192);c=(c|0)>(t|0)?c:t;t=v;continue}y=g-t|0;b=(d|0)<(y|0)?y:d;A=b+f|0;c=(c|0)<(A|0)?A:c;Ke(e,32,c,A,h);Ue(e,m,f);Ke(e,48,c,A,h^65536);Ke(e,48,b,y,0);Ue(e,t,y);Ke(e,32,c,A,h^8192);t=v}e:do{if((k|0)==87)if(!e)if(!p)u=0;else{u=1;while(1){t=a[o+(u<<2)>>2]|0;if(!t)break;ze(s+(u<<3)|0,t,r);u=u+1|0;if((u|0)>=10){u=1;break e}}while(1){if(a[o+(u<<2)>>2]|0){u=-1;break e}u=u+1|0;if((u|0)>=10){u=1;break}}}}while(0);_=S;return u|0}function Ue(e,t,r){e=e|0;t=t|0;r=r|0;if(!(a[e>>2]&32))Pe(t,r,e)|0;return}function He(e){e=e|0;var t=0,r=0,i=0;r=a[e>>2]|0;i=(n[r>>0]|0)+-48|0;if(i>>>0<10){t=0;do{t=i+(t*10|0)|0;r=r+1|0;a[e>>2]=r;i=(n[r>>0]|0)+-48|0}while(i>>>0<10)}else t=0;return t|0}function ze(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,i=0,s=0.0;e:do{if(t>>>0<=20)do{switch(t|0){case 9:{n=(a[r>>2]|0)+(4-1)&~(4-1);t=a[n>>2]|0;a[r>>2]=n+4;a[e>>2]=t;break e}case 10:{t=(a[r>>2]|0)+(4-1)&~(4-1);n=a[t>>2]|0;a[r>>2]=t+4;a[e>>2]=n;a[e+4>>2]=((n|0)<0)<<31>>31;break e}case 11:{t=(a[r>>2]|0)+(4-1)&~(4-1);n=a[t>>2]|0;a[r>>2]=t+4;a[e>>2]=n;a[e+4>>2]=0;break e}case 12:{i=(a[r>>2]|0)+(8-1)&~(8-1);t=a[i>>2]|0;n=a[i+4>>2]|0;a[r>>2]=i+8;a[e>>2]=t;a[e+4>>2]=n;break e}case 13:{n=(a[r>>2]|0)+(4-1)&~(4-1);i=a[n>>2]|0;a[r>>2]=n+4;a[e>>2]=(i&65535)<<16>>16;a[e+4>>2]=(((i&65535)<<16>>16|0)<0)<<31>>31;break e}case 14:{n=(a[r>>2]|0)+(4-1)&~(4-1);i=a[n>>2]|0;a[r>>2]=n+4;a[e>>2]=i&65535;a[e+4>>2]=0;break e}case 15:{n=(a[r>>2]|0)+(4-1)&~(4-1);i=a[n>>2]|0;a[r>>2]=n+4;a[e>>2]=(i&255)<<24>>24;a[e+4>>2]=(((i&255)<<24>>24|0)<0)<<31>>31;break e}case 16:{n=(a[r>>2]|0)+(4-1)&~(4-1);i=a[n>>2]|0;a[r>>2]=n+4;a[e>>2]=i&255;a[e+4>>2]=0;break e}case 17:{i=(a[r>>2]|0)+(8-1)&~(8-1);s=+l[i>>3];a[r>>2]=i+8;l[e>>3]=s;break e}case 18:{i=(a[r>>2]|0)+(8-1)&~(8-1);s=+l[i>>3];a[r>>2]=i+8;l[e>>3]=s;break e}default:break e}}while(0)}while(0);return}function We(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;if(!((e|0)==0&(t|0)==0))do{r=r+-1|0;n[r>>0]=s[2737+(e&15)>>0]|0|i;e=lt(e|0,t|0,4)|0;t=w}while(!((e|0)==0&(t|0)==0));return r|0}function Ze(e,t,r){e=e|0;t=t|0;r=r|0;if(!((e|0)==0&(t|0)==0))do{r=r+-1|0;n[r>>0]=e&7|48;e=lt(e|0,t|0,3)|0;t=w}while(!((e|0)==0&(t|0)==0));return r|0}function Ye(e,t,r){e=e|0;t=t|0;r=r|0;var i=0;if(t>>>0>0|(t|0)==0&e>>>0>4294967295){while(1){i=gt(e|0,t|0,10,0)|0;r=r+-1|0;n[r>>0]=i&255|48;i=e;e=pt(e|0,t|0,10,0)|0;if(!(t>>>0>9|(t|0)==9&i>>>0>4294967295))break;else t=w}t=e}else t=e;if(t)while(1){r=r+-1|0;n[r>>0]=(t>>>0)%10|0|48;if(t>>>0<10)break;else t=(t>>>0)/10|0}return r|0}function Ge(e){e=e|0;return nt(e,a[(rt()|0)+188>>2]|0)|0}function Ke(e,t,r,n,i){e=e|0;t=t|0;r=r|0;n=n|0;i=i|0;var a=0;a=_;_=_+256|0;if((r|0)>(n|0)&(i&73728|0)==0){ct(a|0,t|0,((r-n|0)>>>0<256?r-n|0:256)|0)|0;if((r-n|0)>>>0>255){t=r-n|0;do{Ue(e,a,256);t=t+-256|0}while(t>>>0>255);t=r-n&255}else t=r-n|0;Ue(e,a,t)}_=a;return}function Ve(e,t){e=e|0;t=t|0;if(!e)e=0;else e=et(e,t)|0;return e|0}function qe(e,t,r,i,o,u){e=e|0;t=+t;r=r|0;i=i|0;o=o|0;u=u|0;var c=0,l=0,h=0,d=0,f=0,p=0.0,m=0,g=0,b=0,y=0,v=0,k=0,E=0,S=0,A=0,T=0,C=0,I=0;I=_;_=_+560|0;C=I+524|0;a[I>>2]=0;T=I+512+12|0;Qe(t)|0;if((w|0)<0){t=-t;S=1;E=2702}else{S=(o&2049|0)!=0&1;E=(o&2048|0)==0?(o&1|0)==0?2703:2708:2705}Qe(t)|0;A=w&2146435072;do{if(A>>>0<2146435072|(A|0)==2146435072&0<0){p=+Xe(t,I)*2.0;if(p!=0.0)a[I>>2]=(a[I>>2]|0)+-1;if((u|32|0)==97){f=(u&32|0)==0?E:E+9|0;d=S|2;do{if(i>>>0>11|(12-i|0)==0)t=p;else{t=8.0;c=12-i|0;do{c=c+-1|0;t=t*16.0}while((c|0)!=0);if((n[f>>0]|0)==45){t=-(t+(-p-t));break}else{t=p+t-t;break}}}while(0);l=a[I>>2]|0;c=(l|0)<0?0-l|0:l;c=Ye(c,((c|0)<0)<<31>>31,T)|0;if((c|0)==(T|0)){n[I+512+11>>0]=48;c=I+512+11|0}n[c+-1>>0]=(l>>31&2)+43;h=c+-2|0;n[h>>0]=u+15;c=I+524|0;do{A=~~t;l=c+1|0;n[c>>0]=s[2737+A>>0]|u&32;t=(t-+(A|0))*16.0;if((l-C|0)==1)if((o&8|0)==0&((i|0)<1&t==0.0))c=l;else{n[l>>0]=46;c=c+2|0}else c=l}while(t!=0.0);C=c-C|0;c=(i|0)!=0&(C+-2|0)<(i|0)?i+2|0:C;Ke(e,32,r,T-h+d+c|0,o);Ue(e,f,d);Ke(e,48,r,T-h+d+c|0,o^65536);Ue(e,I+524|0,C);Ke(e,48,c-C|0,0,0);Ue(e,h,T-h|0);Ke(e,32,r,T-h+d+c|0,o^8192);c=T-h+d+c|0;break}l=(i|0)<0?6:i;if(p!=0.0){d=(a[I>>2]|0)+-28|0;a[I>>2]=d;t=p*268435456.0}else{t=p;d=a[I>>2]|0}A=(d|0)<0?I+8|0:I+8+288|0;c=A;do{k=~~t>>>0;a[c>>2]=k;c=c+4|0;t=(t-+(k>>>0))*1.0e9}while(t!=0.0);if((d|0)>0){h=A;do{i=(d|0)<29?d:29;d=c+-4|0;if(d>>>0>=h>>>0){f=0;do{v=ht(a[d>>2]|0,0,i|0)|0;v=ut(v|0,w|0,f|0,0)|0;k=w;y=gt(v|0,k|0,1e9,0)|0;a[d>>2]=y;f=pt(v|0,k|0,1e9,0)|0;d=d+-4|0}while(d>>>0>=h>>>0);if(f){h=h+-4|0;a[h>>2]=f}}while(1){if(c>>>0<=h>>>0)break;d=c+-4|0;if(!(a[d>>2]|0))c=d;else break}d=(a[I>>2]|0)-i|0;a[I>>2]=d}while((d|0)>0)}else h=A;if((d|0)<0)do{i=0-d|0;i=(i|0)<9?i:9;if(h>>>0<c>>>0){f=0;d=h;do{k=a[d>>2]|0;a[d>>2]=(k>>>i)+f;f=B(k&(1<<i)+-1,1e9>>>i)|0;d=d+4|0}while(d>>>0<c>>>0);h=(a[h>>2]|0)==0?h+4|0:h;if(f){a[c>>2]=f;c=c+4|0}}else h=(a[h>>2]|0)==0?h+4|0:h;d=(u|32|0)==102?A:h;c=(c-d>>2|0)>(((l+25|0)/9|0)+1|0)?d+(((l+25|0)/9|0)+1<<2)|0:c;d=(a[I>>2]|0)+i|0;a[I>>2]=d}while((d|0)<0);if(h>>>0<c>>>0){d=(A-h>>2)*9|0;i=a[h>>2]|0;if(i>>>0<10)b=d;else{f=10;do{f=f*10|0;d=d+1|0}while(i>>>0>=f>>>0);b=d}}else b=0;f=l-((u|32|0)!=102?b:0)+(((l|0)!=0&(u|32|0)==103)<<31>>31)|0;if((f|0)<(((c-A>>2)*9|0)+-9|0)){d=A+4+(((f+9216|0)/9|0)+-1024<<2)|0;if((((f+9216|0)%9|0)+1|0)<9){i=((f+9216|0)%9|0)+1|0;f=10;do{f=f*10|0;i=i+1|0}while((i|0)!=9)}else f=10;m=a[d>>2]|0;g=(m>>>0)%(f>>>0)|0;i=(d+4|0)==(c|0);if(i&(g|0)==0)f=b;else{p=(((m>>>0)/(f>>>0)|0)&1|0)==0?9007199254740992.0:9007199254740994.0;k=(f|0)/2|0;t=g>>>0<k>>>0?.5:i&(g|0)==(k|0)?1.0:1.5;if(S){k=(n[E>>0]|0)==45;t=k?-t:t;p=k?-p:p}a[d>>2]=m-g;if(p+t!=p){k=m-g+f|0;a[d>>2]=k;if(k>>>0>999999999)while(1){f=d+-4|0;a[d>>2]=0;if(f>>>0<h>>>0){h=h+-4|0;a[h>>2]=0}k=(a[f>>2]|0)+1|0;a[f>>2]=k;if(k>>>0>999999999)d=f;else{d=f;break}}f=(A-h>>2)*9|0;m=a[h>>2]|0;if(m>>>0>=10){i=10;do{i=i*10|0;f=f+1|0}while(m>>>0>=i>>>0)}}else f=b}v=d+4|0;c=c>>>0>v>>>0?v:c;v=h}else{f=b;v=h}k=c;while(1){if(k>>>0<=v>>>0){y=0;break}c=k+-4|0;if(!(a[c>>2]|0))k=c;else{y=1;break}}m=0-f|0;do{if((u|32|0)==103){if((f|0)>-5?((((l|0)!=0^1)&1)+l|0)>(f|0):0){i=u+-1|0;l=(((l|0)!=0^1)&1)+l+-1-f|0}else{i=u+-2|0;l=(((l|0)!=0^1)&1)+l+-1|0}if(!(o&8)){if(y){d=a[k+-4>>2]|0;if(!d)c=9;else if(!((d>>>0)%10|0)){c=0;h=10;do{h=h*10|0;c=c+1|0}while(!((d>>>0)%(h>>>0)|0|0))}else c=0}else c=9;h=((k-A>>2)*9|0)+-9|0;if((i|32|0)==102){d=h-c|0;d=(d|0)>0?d:0;l=(l|0)<(d|0)?l:d;d=0;break}else{d=h+f-c|0;d=(d|0)>0?d:0;l=(l|0)<(d|0)?l:d;d=0;break}}else d=o&8}else{i=u;d=o&8}}while(0);b=l|d;h=(i|32|0)==102;if(h){g=0;c=(f|0)>0?f:0}else{c=(f|0)<0?m:f;c=Ye(c,((c|0)<0)<<31>>31,T)|0;if((T-c|0)<2)do{c=c+-1|0;n[c>>0]=48}while((T-c|0)<2);n[c+-1>>0]=(f>>31&2)+43;c=c+-2|0;n[c>>0]=i;g=c;c=T-c|0}c=S+1+l+((b|0)!=0&1)+c|0;Ke(e,32,r,c,o);Ue(e,E,S);Ke(e,48,r,c,o^65536);if(h){f=v>>>0>A>>>0?A:v;d=f;do{h=Ye(a[d>>2]|0,0,I+524+9|0)|0;if((d|0)==(f|0)){if((h|0)==(I+524+9|0)){n[I+524+8>>0]=48;h=I+524+8|0}}else if(h>>>0>(I+524|0)>>>0){ct(I+524|0,48,h-C|0)|0;do{h=h+-1|0}while(h>>>0>(I+524|0)>>>0)}Ue(e,h,I+524+9-h|0);d=d+4|0}while(d>>>0<=A>>>0);if(b|0)Ue(e,2753,1);if(d>>>0<k>>>0&(l|0)>0)while(1){h=Ye(a[d>>2]|0,0,I+524+9|0)|0;if(h>>>0>(I+524|0)>>>0){ct(I+524|0,48,h-C|0)|0;do{h=h+-1|0}while(h>>>0>(I+524|0)>>>0)}Ue(e,h,(l|0)<9?l:9);d=d+4|0;h=l+-9|0;if(!(d>>>0<k>>>0&(l|0)>9)){l=h;break}else l=h}Ke(e,48,l+9|0,9,0)}else{m=y?k:v+4|0;if((l|0)>-1){i=(d|0)==0;f=v;do{h=Ye(a[f>>2]|0,0,I+524+9|0)|0;if((h|0)==(I+524+9|0)){n[I+524+8>>0]=48;h=I+524+8|0}do{if((f|0)==(v|0)){d=h+1|0;Ue(e,h,1);if(i&(l|0)<1){h=d;break}Ue(e,2753,1);h=d}else{if(h>>>0<=(I+524|0)>>>0)break;ct(I+524|0,48,h+(0-C)|0)|0;do{h=h+-1|0}while(h>>>0>(I+524|0)>>>0)}}while(0);A=I+524+9-h|0;Ue(e,h,(l|0)>(A|0)?A:l);l=l-A|0;f=f+4|0}while(f>>>0<m>>>0&(l|0)>-1)}Ke(e,48,l+18|0,18,0);Ue(e,g,T-g|0)}Ke(e,32,r,c,o^8192)}else{c=S+3|0;Ke(e,32,r,c,o&-65537);Ue(e,E,S);Ue(e,t!=t|0.0!=0.0?u&32|0?2729:2733:u&32|0?2721:2725,3);Ke(e,32,r,c,o^8192)}}while(0);_=I;return((c|0)<(r|0)?r:c)|0}function Qe(e){e=+e;var t=0;l[d>>3]=e;t=a[d>>2]|0;w=a[d+4>>2]|0;return t|0}function Xe(e,t){e=+e;t=t|0;return+ +Je(e,t)}function Je(e,t){e=+e;t=t|0;var r=0,n=0,i=0;l[d>>3]=e;r=a[d>>2]|0;n=a[d+4>>2]|0;i=lt(r|0,n|0,52)|0;switch(i&2047){case 0:{if(e!=0.0){e=+Je(e*18446744073709551616.0,t);r=(a[t>>2]|0)+-64|0}else r=0;a[t>>2]=r;break}case 2047:break;default:{a[t>>2]=(i&2047)+-1022;a[d>>2]=r;a[d+4>>2]=n&-2146435073|1071644672;e=+l[d>>3]}}return+e}function et(e,t,r){e=e|0;t=t|0;do{if(!e)e=1;else{if(t>>>0<128){n[e>>0]=t;e=1;break}if(!(a[a[(tt()|0)+188>>2]>>2]|0))if((t&-128|0)==57216){n[e>>0]=t;e=1;break}else{a[(Ae()|0)>>2]=84;e=-1;break}if(t>>>0<2048){n[e>>0]=t>>>6|192;n[e+1>>0]=t&63|128;e=2;break}if(t>>>0<55296|(t&-8192|0)==57344){n[e>>0]=t>>>12|224;n[e+1>>0]=t>>>6&63|128;n[e+2>>0]=t&63|128;e=3;break}if((t+-65536|0)>>>0<1048576){n[e>>0]=t>>>18|240;n[e+1>>0]=t>>>12&63|128;n[e+2>>0]=t>>>6&63|128;n[e+3>>0]=t&63|128;e=4;break}else{a[(Ae()|0)>>2]=84;e=-1;break}}}while(0);return e|0}function tt(){return Ce()|0}function rt(){return Ce()|0}function nt(e,t){e=e|0;t=t|0;var r=0,i=0;i=0;while(1){if((s[2755+i>>0]|0)==(e|0)){e=2;break}r=i+1|0;if((r|0)==87){r=2843;i=87;e=5;break}else i=r}if((e|0)==2)if(!i)r=2843;else{r=2843;e=5}if((e|0)==5)while(1){do{e=r;r=r+1|0}while((n[e>>0]|0)!=0);i=i+-1|0;if(!i)break;else e=5}return it(r,a[t+20>>2]|0)|0}function it(e,t){e=e|0;t=t|0;return De(e,t)|0}function at(e,t){e=e|0;t=t|0;var r=0,i=0;if((a[t+76>>2]|0)<0)i=3;else i=3;do{if((i|0)==3){if((e&255|0)!=(n[t+75>>0]|0)){r=a[t+20>>2]|0;if(r>>>0<(a[t+16>>2]|0)>>>0){a[t+20>>2]=r+1;n[r>>0]=e;r=e&255;break}}r=Oe(t,e)|0}}while(0);return r|0}function st(){}function ot(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;n=t-n-(r>>>0>e>>>0|0)>>>0;return(w=n,e-r>>>0|0)|0}function ut(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;return(w=t+n+(e+r>>>0>>>0<e>>>0|0)>>>0,e+r>>>0|0)|0}function ct(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,s=0;i=e+r|0;t=t&255;if((r|0)>=67){while(e&3){n[e>>0]=t;e=e+1|0}s=t|t<<8|t<<16|t<<24;while((e|0)<=((i&-4)-64|0)){a[e>>2]=s;a[e+4>>2]=s;a[e+8>>2]=s;a[e+12>>2]=s;a[e+16>>2]=s;a[e+20>>2]=s;a[e+24>>2]=s;a[e+28>>2]=s;a[e+32>>2]=s;a[e+36>>2]=s;a[e+40>>2]=s;a[e+44>>2]=s;a[e+48>>2]=s;a[e+52>>2]=s;a[e+56>>2]=s;a[e+60>>2]=s;e=e+64|0}while((e|0)<(i&-4|0)){a[e>>2]=s;e=e+4|0}}while((e|0)<(i|0)){n[e>>0]=t;e=e+1|0}return i-r|0}function lt(e,t,r){e=e|0;t=t|0;r=r|0;if((r|0)<32){w=t>>>r;return e>>>r|(t&(1<<r)-1)<<32-r}w=0;return t>>>r-32|0}function ht(e,t,r){e=e|0;t=t|0;r=r|0;if((r|0)<32){w=t<<r|(e&(1<<r)-1<<32-r)>>>32-r;return e<<r}w=e<<r-32;return 0}function dt(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,s=0,o=0;if((r|0)>=8192)return Q(e|0,t|0,r|0)|0;o=e|0;s=e+r|0;if((e&3)==(t&3)){while(e&3){if(!r)return o|0;n[e>>0]=n[t>>0]|0;e=e+1|0;t=t+1|0;r=r-1|0}r=s&-4|0;i=r-64|0;while((e|0)<=(i|0)){a[e>>2]=a[t>>2];a[e+4>>2]=a[t+4>>2];a[e+8>>2]=a[t+8>>2];a[e+12>>2]=a[t+12>>2];a[e+16>>2]=a[t+16>>2];a[e+20>>2]=a[t+20>>2];a[e+24>>2]=a[t+24>>2];a[e+28>>2]=a[t+28>>2];a[e+32>>2]=a[t+32>>2];a[e+36>>2]=a[t+36>>2];a[e+40>>2]=a[t+40>>2];a[e+44>>2]=a[t+44>>2];a[e+48>>2]=a[t+48>>2];a[e+52>>2]=a[t+52>>2];a[e+56>>2]=a[t+56>>2];a[e+60>>2]=a[t+60>>2];e=e+64|0;t=t+64|0}while((e|0)<(r|0)){a[e>>2]=a[t>>2];e=e+4|0;t=t+4|0}}else{r=s-4|0;while((e|0)<(r|0)){n[e>>0]=n[t>>0]|0;n[e+1>>0]=n[t+1>>0]|0;n[e+2>>0]=n[t+2>>0]|0;n[e+3>>0]=n[t+3>>0]|0;e=e+4|0;t=t+4|0}}while((e|0)<(s|0)){n[e>>0]=n[t>>0]|0;e=e+1|0;t=t+1|0}return o|0}function ft(e){e=e|0;var t=0;t=n[m+(e&255)>>0]|0;if((t|0)<8)return t|0;t=n[m+(e>>8&255)>>0]|0;if((t|0)<8)return t+8|0;t=n[m+(e>>16&255)>>0]|0;if((t|0)<8)return t+16|0;return(n[m+(e>>>24)>>0]|0)+24|0}function _t(e,t,r,n,i){e=e|0;t=t|0;r=r|0;n=n|0;i=i|0;var s=0,o=0,u=0,c=0,l=0,h=0,d=0,f=0,_=0,p=0;if(!t)if(!n){if(i|0){a[i>>2]=(e>>>0)%(r>>>0);a[i+4>>2]=0}n=0;i=(e>>>0)/(r>>>0)>>>0;return(w=n,i)|0}else{if(!i){n=0;i=0;return(w=n,i)|0}a[i>>2]=e|0;a[i+4>>2]=t&0;n=0;i=0;return(w=n,i)|0}do{if(!r){if(!n){if(i|0){a[i>>2]=(t>>>0)%(r>>>0);a[i+4>>2]=0}n=0;i=(t>>>0)/(r>>>0)>>>0;return(w=n,i)|0}if(!e){if(i|0){a[i>>2]=0;a[i+4>>2]=(t>>>0)%(n>>>0)}r=0;i=(t>>>0)/(n>>>0)>>>0;return(w=r,i)|0}if(!(n-1&n)){if(i|0){a[i>>2]=e|0;a[i+4>>2]=n-1&t|t&0}r=0;i=t>>>((ft(n|0)|0)>>>0);return(w=r,i)|0}o=(F(n|0)|0)-(F(t|0)|0)|0;if(o>>>0<=30){f=o+1|0;u=t<<31-o|e>>>((o+1|0)>>>0);d=t>>>((o+1|0)>>>0);s=0;o=e<<31-o;break}if(!i){n=0;i=0;return(w=n,i)|0}a[i>>2]=e|0;a[i+4>>2]=t|t&0;n=0;i=0;return(w=n,i)|0}else{if(n|0){o=(F(n|0)|0)-(F(t|0)|0)|0;if(o>>>0<=31){f=o+1|0;u=e>>>((o+1|0)>>>0)&o-31>>31|t<<31-o;d=t>>>((o+1|0)>>>0)&o-31>>31;s=0;o=e<<31-o;break}if(!i){n=0;i=0;return(w=n,i)|0}a[i>>2]=e|0;a[i+4>>2]=t|t&0;n=0;i=0;return(w=n,i)|0}if(r-1&r|0){o=(F(r|0)|0)+33-(F(t|0)|0)|0;f=o;u=32-o-1>>31&t>>>((o-32|0)>>>0)|(t<<32-o|e>>>(o>>>0))&o-32>>31;d=o-32>>31&t>>>(o>>>0);s=e<<64-o&32-o>>31;o=(t<<64-o|e>>>((o-32|0)>>>0))&32-o>>31|e<<32-o&o-33>>31;break}if(i|0){a[i>>2]=r-1&e;a[i+4>>2]=0}if((r|0)==1){n=t|t&0;i=e|0|0;return(w=n,i)|0}else{i=ft(r|0)|0;n=t>>>(i>>>0)|0;i=t<<32-i|e>>>(i>>>0)|0;return(w=n,i)|0}}}while(0);if(!f){c=o;t=d;e=0;o=0}else{l=ut(r|0|0,n|n&0|0,-1,-1)|0;h=w;c=o;t=d;e=f;o=0;do{p=c;c=s>>>31|c<<1;s=o|s<<1;p=u<<1|p>>>31|0;_=u>>>31|t<<1|0;ot(l|0,h|0,p|0,_|0)|0;f=w;d=f>>31|((f|0)<0?-1:0)<<1;o=d&1;u=ot(p|0,_|0,d&(r|0)|0,(((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1)&(n|n&0)|0)|0;t=w;e=e-1|0}while((e|0)!=0);e=0}if(i|0){a[i>>2]=u;a[i+4>>2]=t}_=(s|0)>>>31|c<<1|(0<<1|s>>>31)&0|e;p=(s<<1|0>>>31)&-2|o;return(w=_,p)|0}function pt(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;return _t(e,t,r,n,0)|0}function mt(e){e=e|0;var t=0,r=0;r=e+15&-16|0;t=a[h>>2]|0;e=t+r|0;if((r|0)>0&(e|0)<(t|0)|(e|0)<0){W()|0;V(12);return-1}a[h>>2]=e;if((e|0)>(z()|0))if(!(H()|0)){a[h>>2]=t;V(12);return-1}return t|0}function gt(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var i=0;i=_;_=_+16|0;_t(e,t,r,n,i|0)|0;_=i;return(w=a[i+4>>2]|0,a[i>>2]|0)|0}function bt(e){e=e|0;return(e&255)<<24|(e>>8&255)<<16|(e>>16&255)<<8|e>>>24|0}function yt(e,t){e=e|0;t=t|0;return St[e&1](t|0)|0}function vt(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;return At[e&3](t|0,r|0,n|0)|0}function wt(e){j(0);return 0}function kt(e,t,r){j(1);return 0}function Et(e){e=e|0;var t=0,r=0,i=0,s=0,o=0,u=0,c=0,l=0,h=0,d=0,f=0,p=0;i=a[e+1368>>2]|0;s=a[e+3472>>2]|0;p=a[e+3496>>2]|0;f=a[e+3504>>2]|0;e:{if((p&65024|0)==23552){if(n[5300]|0){f=a[2]|0;a[e+512>>2]=p&7;a[e+512+4>>2]=p>>>3&7;a[e+512+8>>2]=p>>>6&7;$e(f,1367,e+512|0)|0}f=(a[4668+((p>>>6&7)<<2)>>2]|0)+(a[4668+((p>>>3&7)<<2)>>2]|0)|0;i=G(3,f&-2|0)|0;a[4668+((p&7)<<2)>>2]=((f&1|0)==0?i:i>>>8)&255;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&63488|0)==34816){if(n[5300]|0){f=a[2]|0;a[e+528>>2]=p&7;a[e+528+4>>2]=p>>>3&7;a[e+528+8>>2]=p>>>5&62;$e(f,1387,e+528|0)|0}a[4668+((p&7)<<2)>>2]=(G(3,(a[4668+((p>>>3&7)<<2)>>2]|0)+(p>>>5&62)|0)|0)&65535;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}t=1;r=(p&65024)<<16>>16;if(t)switch(r|0){case 23040:{if(n[5300]|0){f=a[2]|0;a[e+544>>2]=p&7;a[e+544+4>>2]=p>>>3&7;a[e+544+8>>2]=p>>>6&7;$e(f,1409,e+544|0)|0}a[4668+((p&7)<<2)>>2]=(G(3,(a[4668+((p>>>6&7)<<2)>>2]|0)+(a[4668+((p>>>3&7)<<2)>>2]|0)|0)|0)&65535;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 22016:{if(n[5300]|0){f=a[2]|0;a[e+560>>2]=p&7;a[e+560+4>>2]=p>>>3&7;a[e+560+8>>2]=p>>>6&7;$e(f,1429,e+560|0)|0}f=(a[4668+((p>>>6&7)<<2)>>2]|0)+(a[4668+((p>>>3&7)<<2)>>2]|0)|0;i=G(3,f&-2|0)|0;i=(f&1|0)==0?i:i>>>8;a[4668+((p&7)<<2)>>2]=(i&128|0)==0?i&255:i|-256;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 24064:{if(n[5300]|0){f=a[2]|0;a[e+576>>2]=p&7;a[e+576+4>>2]=p>>>3&7;a[e+576+8>>2]=p>>>6&7;$e(f,1450,e+576|0)|0}i=G(3,(a[4668+((p>>>6&7)<<2)>>2]|0)+(a[4668+((p>>>3&7)<<2)>>2]|0)|0)|0;a[4668+((p&7)<<2)>>2]=(i&32768|0)==0?i&65535:i|-65536;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}default:t=1}if(t)switch(r|0){default:{if(!(p&63488)){if(n[5300]|0){f=a[2]|0;a[e+592>>2]=p&7;a[e+592+4>>2]=p>>>3&7;a[e+592+8>>2]=p>>>6&31;$e(f,1471,e+592|0)|0}t=a[4668+((p>>>3&7)<<2)>>2]|0;if(!(p>>>6&31))r=a[1184]|0;else{r=a[1184]|0;r=t&1<<32-(p>>>6&31)|0?r|536870912:r&-536870913;a[1184]=r;t=t<<(p>>>6&31)}a[4668+((p&7)<<2)>>2]=t;i=(t|0)<0?r|-2147483648:r&2147483647;a[1184]=(t|0)==0?i|1073741824:i&-1073741825;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&65472|0)==16512){if(n[5300]|0){f=a[2]|0;a[e+608>>2]=p&7;a[e+608+4>>2]=p>>>3&7;$e(f,1491,e+608|0)|0}t=a[4668+((p&7)<<2)>>2]|0;r=a[4668+((p>>>3&7)<<2)>>2]&255;do{if(!r)r=a[1184]|0;else{if(r>>>0<32){f=a[1184]|0;f=1<<32-r&t|0?f|536870912:f&-536870913;a[1184]=f;t=t<<r;r=f;break}if((r|0)==32){r=a[1184]|0;r=t&1|0?r|536870912:r&-536870913;a[1184]=r;t=0;break}else{r=a[1184]&-536870913;a[1184]=r;t=0;break}}}while(0);a[4668+((p&7)<<2)>>2]=t;i=(t|0)<0?r|-2147483648:r&2147483647;a[1184]=(t|0)==0?i|1073741824:i&-1073741825;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&63488|0)==2048){if(n[5300]|0){f=a[2]|0;a[e+616>>2]=p&7;a[e+616+4>>2]=p>>>3&7;a[e+616+8>>2]=p>>>6&31;$e(f,1505,e+616|0)|0}t=a[4668+((p>>>3&7)<<2)>>2]|0;if(!(p>>>6&31)){r=a[1184]|0;r=(t|0)<0?r|536870912:r&-536870913;a[1184]=r;t=0}else{r=a[1184]|0;r=t&1<<(p>>>6&31)+-1|0?r|536870912:r&-536870913;a[1184]=r;t=t>>>(p>>>6&31)}a[4668+((p&7)<<2)>>2]=t;i=(t|0)<0?r|-2147483648:r&2147483647;a[1184]=(t|0)==0?i|1073741824:i&-1073741825;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&65472|0)==16576){if(n[5300]|0){f=a[2]|0;a[e+632>>2]=p&7;a[e+632+4>>2]=p>>>3&7;$e(f,1525,e+632|0)|0}t=a[4668+((p&7)<<2)>>2]|0;r=a[4668+((p>>>3&7)<<2)>>2]&255;do{if(!r)r=a[1184]|0;else{if(r>>>0<32){f=a[1184]|0;f=1<<r+-1&t|0?f|536870912:f&-536870913;a[1184]=f;t=t>>>r;r=f;break}if((r|0)==32){r=a[1184]|0;r=(t|0)<0?r|536870912:r&-536870913;a[1184]=r;t=0;break}else{r=a[1184]&-536870913;a[1184]=r;t=0;break}}}while(0);a[4668+((p&7)<<2)>>2]=t;i=(t|0)<0?r|-2147483648:r&2147483647;a[1184]=(t|0)==0?i|1073741824:i&-1073741825;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&63488|0)==8192){if(n[5300]|0){f=a[2]|0;a[e+640>>2]=p>>>8&7;a[e+640+4>>2]=p&255;$e(f,1539,e+640|0)|0}a[4668+((p>>>8&7)<<2)>>2]=p&255;i=a[1184]&1073741823;a[1184]=(p&255|0)==0?i|1073741824:i;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&65472|0)==7168){if(n[5300]|0){f=a[2]|0;a[e+648>>2]=p&7;a[e+648+4>>2]=p>>>3&7;$e(f,1557,e+648|0)|0}f=a[4668+((p>>>3&7)<<2)>>2]|0;a[4668+((p&7)<<2)>>2]=f;i=a[1184]|0;i=(f|0)<0?i|-2147483648:i&2147483647;a[1184]=((f|0)==0?i|1073741824:i&-1879048193)&-805306369;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&65280|0)==17920){if(n[5300]|0){f=a[2]|0;a[e+656>>2]=p>>>4&8|p&7;a[e+656+4>>2]=p>>>3&15;$e(f,1571,e+656|0)|0}t=a[4668+((p>>>3&15)<<2)>>2]|0;if((p>>>3&15|0)==15){if(t&1|0){f=a[2]|0;a[e+664>>2]=t;$e(f,520,e+664|0)|0}t=t&-2}a[4668+((p>>>4&8|p&7)<<2)>>2]=(p>>>4&8|p&7|0)==15?((p>>>4&8|p&7|0)==15?t+2|0:t)&-2:t;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}t=1;r=((p&65472)+-16960|0)>>>6&67108863|0;if(t)switch(r|0){case 4:{if(n[5300]|0){f=a[2]|0;a[e+672>>2]=p&7;a[e+672+4>>2]=p>>>3&7;$e(f,1584,e+672|0)|0}f=B(a[4668+((p>>>3&7)<<2)>>2]|0,a[4668+((p&7)<<2)>>2]|0)|0;a[4668+((p&7)<<2)>>2]=f;i=a[1184]|0;i=(f|0)<0?i|-2147483648:i&2147483647;a[1184]=(f|0)==0?i|1073741824:i&-1073741825;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 6:{if(n[5300]|0){f=a[2]|0;a[e+680>>2]=p&7;a[e+680+4>>2]=p>>>3&7;$e(f,1598,e+680|0)|0}f=a[4668+((p>>>3&7)<<2)>>2]|0;a[4668+((p&7)<<2)>>2]=~f;i=a[1184]|0;i=(f|0)>-1?i|-2147483648:i&2147483647;a[1184]=(f|0)==-1?i|1073741824:i&-1073741825;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 0:{if(n[5300]|0){f=a[2]|0;a[e+688>>2]=p&7;a[e+688+4>>2]=p>>>3&7;$e(f,1612,e+688|0)|0}f=a[4668+((p>>>3&7)<<2)>>2]|0;a[4668+((p&7)<<2)>>2]=0-f;i=a[1184]|0;i=(0-f|0)<0?i|-2147483648:i&2147483647;i=(f|0)==0?i|1073741824:i&-1073741825;i=(((((~f&2147483647)+1|0)>>>31)+(~f>>>31)|0)&2|0)==0?i&-536870913:i|536870912;a[1184]=(((~f&2147483647)+1|0)>>>31|0)==(((((~f&2147483647)+1|0)>>>31)+(~f>>>31)|0)>>>1|0)?i&-268435457:i|268435456;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 3:{if(n[5300]|0){f=a[2]|0;a[e+696>>2]=p&7;a[e+696+4>>2]=p>>>3&7;$e(f,1626,e+696|0)|0}f=a[4668+((p>>>3&7)<<2)>>2]|a[4668+((p&7)<<2)>>2];a[4668+((p&7)<<2)>>2]=f;i=a[1184]|0;i=(f|0)<0?i|-2147483648:i&2147483647;a[1184]=(f|0)==0?i|1073741824:i&-1073741825;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}default:t=1}if(t)switch(r|0){default:{t=1;r=(p&65024)<<16>>16;if(t)switch(r|0){case-17408:{if(!(n[5300]|0))r=p&1;else{r=a[2]|0;Re(1640,5,1,r)|0;if(!(p&1))t=0;else{a[e+704>>2]=0;$e(r,1249,e+704|0)|0;t=1}if(p&2){if(t|0)at(44,r)|0;a[e+1064>>2]=1;$e(r,1249,e+1064|0)|0;t=t+1|0}if(p&4){if(t|0)at(44,r)|0;a[e+1072>>2]=2;$e(r,1249,e+1072|0)|0;t=t+1|0}if(p&8){if(t|0)at(44,r)|0;a[e+1080>>2]=3;$e(r,1249,e+1080|0)|0;t=t+1|0}if(p&16){if(t|0)at(44,r)|0;a[e+1088>>2]=4;$e(r,1249,e+1088|0)|0;t=t+1|0}if(p&32){if(t|0)at(44,r)|0;a[e+1096>>2]=5;$e(r,1249,e+1096|0)|0;t=t+1|0}if(p&64){if(t|0)at(44,r)|0;a[e+1104>>2]=6;$e(r,1249,e+1104|0)|0;t=t+1|0}if(p&128){if(t|0)at(44,r)|0;a[e+1112>>2]=7;$e(r,1249,e+1112|0)|0;t=t+1|0}if(p&256|0){if(t|0)at(44,r)|0;Re(1646,2,1,r)|0}Re(1253,2,1,r)|0;r=p&1}t=a[1180]|0;if(r){a[1167]=G(1,t|0)|0;t=t+4|0}if(p&2){a[1168]=G(1,t|0)|0;t=t+4|0}if(p&4){a[1169]=G(1,t|0)|0;t=t+4|0}if(p&8){a[1170]=G(1,t|0)|0;t=t+4|0}if(p&16){a[1171]=G(1,t|0)|0;t=t+4|0}if(p&32){a[1172]=G(1,t|0)|0;t=t+4|0}if(p&64){a[1173]=G(1,t|0)|0;t=t+4|0}if(p&128){a[1174]=G(1,t|0)|0;t=t+4|0}if(p&256){r=G(1,t|0)|0;if(!(r&1)){p=a[2]|0;a[e+712>>2]=f;a[e+712+4>>2]=r;$e(p,1649,e+712|0)|0;r=r&-2}a[1182]=r+2&-2;t=t+4|0}a[1180]=t;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case-19456:{d=a[2]|0;if(!(n[5300]|0)){t=p&2;r=p&4;i=p&8;s=p&16;o=p&32;u=p&64;c=p&128;h=p&256;l=p&1}else{Re(1703,6,1,d)|0;if(!(p&1))t=0;else{a[e+720>>2]=0;$e(d,1249,e+720|0)|0;t=1}if(p&2){if(t|0)at(44,d)|0;a[e+1120>>2]=1;$e(d,1249,e+1120|0)|0;t=t+1|0}if(p&4){if(t|0)at(44,d)|0;a[e+1128>>2]=2;$e(d,1249,e+1128|0)|0;t=t+1|0}if(p&8){if(t|0)at(44,d)|0;a[e+1136>>2]=3;$e(d,1249,e+1136|0)|0;t=t+1|0}if(p&16){if(t|0)at(44,d)|0;a[e+1144>>2]=4;$e(d,1249,e+1144|0)|0;t=t+1|0}if(p&32){if(t|0)at(44,d)|0;a[e+1152>>2]=5;$e(d,1249,e+1152|0)|0;t=t+1|0}if(p&64){if(t|0)at(44,d)|0;a[e+1160>>2]=6;$e(d,1249,e+1160|0)|0;t=t+1|0}if(p&128){if(t|0)at(44,d)|0;a[e+1168>>2]=7;$e(d,1249,e+1168|0)|0;t=t+1|0}if(p&256|0){if(t|0)at(44,d)|0;Re(1710,2,1,d)|0}Re(1253,2,1,d)|0;t=p&2;r=p&4;i=p&8;s=p&16;o=p&32;u=p&64;c=p&128;h=p&256;l=p&1}o=(a[1180]|0)-((c>>>7)+((u>>>6)+((o>>>5)+((s>>>4)+((i>>>3)+((r>>>2)+((t>>>1)+l))))))+(h>>>8)<<2)|0;t=o;i=0;s=1;while(1){if(!(s&p))r=t;else{r=a[4668+(i<<2)>>2]|0;t:do{if((t&-268435456|0)==-536870912){l=t+536813552|0;switch(l>>>2|l<<30|0){case 0:{l=a[1164]|0;a[1164]=r&65543;if((r&1|0)==0|(l&1|0)!=0)break t;a[1166]=a[1165];break t}case 1:{a[1165]=r&16777215;break t}case 2:{a[1166]=r&16777215;break t}case 3:break t;default:break t}}else te(2,t|0,r|0)|0}while(0);r=t+4|0}i=i+1|0;if((i|0)==8)break;else{t=r;s=s<<1&254}}do{if(h|0){t=a[1181]|0;t:do{if((r&-268435456|0)==-536870912){p=r+536813552|0;switch(p>>>2|p<<30|0){case 0:{p=a[1164]|0;a[1164]=t&65543;if((t&1|0)==0|(p&1|0)!=0)break t;a[1166]=a[1165];break t}case 1:{a[1165]=t&16777215;break t}case 2:{a[1166]=t&16777215;break t}case 3:break t;default:break t}}else te(2,r|0,t|0)|0}while(0);if(t&1|0)break;a[e+728>>2]=f;a[e+728+4>>2]=t;$e(d,1713,e+728|0)|0}}while(0);a[1180]=o;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}default:t=1}if(t)switch(r|0){default:{t:do{if((p&65472)<<16>>16<-17728)switch((p&65472)<<16>>16){case-17920:{if(n[5300]|0){f=a[2]|0;a[e+736>>2]=p&7;a[e+736+4>>2]=p>>>3&7;$e(f,1768,e+736|0)|0}a[4668+((p&7)<<2)>>2]=bt(a[4668+((p>>>3&7)<<2)>>2]|0)|0;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case-17856:{if(n[5300]|0){f=a[2]|0;a[e+744>>2]=p&7;a[e+744+4>>2]=p>>>3&7;$e(f,1781,e+744|0)|0}i=a[4668+((p>>>3&7)<<2)>>2]|0;a[4668+((p&7)<<2)>>2]=i<<8&65280|i>>>8&255|i>>>16<<24|i>>>24<<16;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}default:break t}else{if((p&65472)<<16>>16<16768){switch((p&65472)<<16>>16){case-17728:break;default:break t}if(n[5300]|0){f=a[2]|0;a[e+752>>2]=p&7;a[e+752+4>>2]=p>>>3&7;$e(f,1796,e+752|0)|0}i=a[4668+((p>>>3&7)<<2)>>2]|0;a[4668+((p&7)<<2)>>2]=(i<<8&32768|0)==0?i<<8&65280|i>>>8&255:i<<8&65280|i>>>8&255|-65536;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}switch((p&65472)<<16>>16){case 16832:break;case 16768:{if(n[5300]|0){f=a[2]|0;a[e+768>>2]=p&7;a[e+768+4>>2]=p>>>3&7;$e(f,1825,e+768|0)|0}r=a[4668+((p&7)<<2)>>2]|0;i=a[4668+((p>>>3&7)<<2)>>2]|0;f=a[1184]|0;a[4668+((p&7)<<2)>>2]=r-i+-1+(f>>>29&1);t=(r-i+-1+(f>>>29&1)|0)<0?f|-2147483648:f&2147483647;t=(r-i+-1+(f>>>29&1)|0)==0?t|1073741824:t&-1073741825;a[1184]=t;if(!(t&536870912)){p=(((~i>>>31)+(r>>>31)+(((~i&2147483647)+(r&2147483647)|0)>>>31)|0)&2|0)==0?t&-536870913:t|536870912;a[1184]=(((~i&2147483647)+(r&2147483647)|0)>>>31|0)==(((~i>>>31)+(r>>>31)+(((~i&2147483647)+(r&2147483647)|0)>>>31)|0)>>>1&1|0)?p&-268435457:p|268435456;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}else{p=(((~i>>>31)+(r>>>31)+(((~i&2147483647)+(r&2147483647)+1|0)>>>31)|0)&2|0)==0?t&-536870913:t|536870912;a[1184]=(((~i&2147483647)+(r&2147483647)+1|0)>>>31|0)==(((~i>>>31)+(r>>>31)+(((~i&2147483647)+(r&2147483647)+1|0)>>>31)|0)>>>1&1|0)?p&-268435457:p|268435456;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}}default:break t}if(n[5300]|0){f=a[2]|0;a[e+760>>2]=p&7;a[e+760+4>>2]=p>>>3&7;$e(f,1811,e+760|0)|0}t=a[4668+((p&7)<<2)>>2]|0;r=a[4668+((p>>>3&7)<<2)>>2]|0;do{if(!(r&255))r=a[1184]|0;else if(!(r&31)){r=a[1184]|0;r=(t|0)<0?r|536870912:r&-536870913;a[1184]=r;break}else{f=a[1184]|0;f=1<<(r&31)+-1&t|0?f|536870912:f&-536870913;a[1184]=f;t=t<<32-(r&31)|t>>>(r&31);r=f;break}}while(0);a[4668+((p&7)<<2)>>2]=t;i=(t|0)<0?r|-2147483648:r&2147483647;a[1184]=(t|0)==0?i|1073741824:i&-1073741825;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}}while(0);if((p&65527|0)==46672){Re(1838,23,1,a[2]|0)|0;i=1;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}t:do{if((p&63488)<<16>>16<24576){switch((p&63488)<<16>>16){case-16384:break;default:break t}if(n[5300]|0){r=a[2]|0;a[e+776>>2]=p>>>8&7;$e(r,1862,e+776|0)|0;if(!(p&1))t=0;else{a[e+784>>2]=0;$e(r,1249,e+784|0)|0;t=1}if(p&2){if(t|0)at(44,r)|0;a[e+1008>>2]=1;$e(r,1249,e+1008|0)|0;t=t+1|0}if(p&4){if(t|0)at(44,r)|0;a[e+1016>>2]=2;$e(r,1249,e+1016|0)|0;t=t+1|0}if(p&8){if(t|0)at(44,r)|0;a[e+1024>>2]=3;$e(r,1249,e+1024|0)|0;t=t+1|0}if(p&16){if(t|0)at(44,r)|0;a[e+1032>>2]=4;$e(r,1249,e+1032|0)|0;t=t+1|0}if(p&32){if(t|0)at(44,r)|0;a[e+1040>>2]=5;$e(r,1249,e+1040|0)|0;t=t+1|0}if(p&64){if(t|0)at(44,r)|0;a[e+1048>>2]=6;$e(r,1249,e+1048|0)|0;t=t+1|0}if(p&128|0){if(t|0)at(44,r)|0;a[e+1056>>2]=7;$e(r,1249,e+1056|0)|0}Re(1253,2,1,r)|0}i=1;s=0;t=a[4668+((p>>>8&7)<<2)>>2]|0;while(1){if(i&p){r=a[4668+(s<<2)>>2]|0;r:do{if((t&-268435456|0)==-536870912){f=t+536813552|0;switch(f>>>2|f<<30|0){case 0:{f=a[1164]|0;a[1164]=r&65543;if((r&1|0)==0|(f&1|0)!=0)break r;a[1166]=a[1165];break r}case 1:{a[1165]=r&16777215;break r}case 2:{a[1166]=r&16777215;break r}case 3:break r;default:break r}}else te(2,t|0,r|0)|0}while(0);t=t+4|0}s=s+1|0;if((s|0)==8)break;else i=i<<1&254}a[4668+((p>>>8&7)<<2)>>2]=t;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}else{switch((p&63488)<<16>>16){case 24576:break;default:break t}if(n[5300]|0){f=a[2]|0;a[e+792>>2]=p&7;a[e+792+4>>2]=p>>>3&7;a[e+792+8>>2]=p>>>4&124;$e(f,1875,e+792|0)|0}r=(a[4668+((p>>>3&7)<<2)>>2]|0)+(p>>>4&124)|0;t=a[4668+((p&7)<<2)>>2]|0;if((r&-268435456|0)!=-536870912){te(2,r|0,t|0)|0;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}switch((r+536813552|0)>>>2|r+536813552<<30|0){case 0:{p=a[1164]|0;a[1164]=t&65543;if((t&1|0)==0|(p&1|0)!=0){i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}a[1166]=a[1165];i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 1:{a[1165]=t&16777215;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 2:{a[1166]=t&16777215;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 3:{i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}default:{i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}}}}while(0);if((p&65024|0)==20480){if(n[5300]|0){f=a[2]|0;a[e+808>>2]=p&7;a[e+808+4>>2]=p>>>3&7;a[e+808+8>>2]=p>>>6&7;$e(f,1896,e+808|0)|0}r=(a[4668+((p>>>6&7)<<2)>>2]|0)+(a[4668+((p>>>3&7)<<2)>>2]|0)|0;t=a[4668+((p&7)<<2)>>2]|0;if((r&-268435456|0)!=-536870912){te(2,r|0,t|0)|0;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}switch((r+536813552|0)>>>2|r+536813552<<30|0){case 0:{p=a[1164]|0;a[1164]=t&65543;if((t&1|0)==0|(p&1|0)!=0){i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}a[1166]=a[1165];i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 1:{a[1165]=t&16777215;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 2:{a[1166]=t&16777215;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 3:{i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}default:{i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}}}t:do{if((p&63488)<<16>>16<28672){switch((p&63488)<<16>>16){case-28672:break;default:break t}if(n[5300]|0){f=a[2]|0;a[e+824>>2]=p>>>8&7;a[e+824+4>>2]=p<<2&1020;$e(f,1915,e+824|0)|0}r=(a[1180]|0)+(p<<2&1020)|0;t=a[4668+((p>>>8&7)<<2)>>2]|0;if((r&-268435456|0)!=-536870912){te(2,r|0,t|0)|0;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}switch((r+536813552|0)>>>2|r+536813552<<30|0){case 0:{p=a[1164]|0;a[1164]=t&65543;if((t&1|0)==0|(p&1|0)!=0){i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}a[1166]=a[1165];i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 1:{a[1165]=t&16777215;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 2:{a[1166]=t&16777215;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case 3:{i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}default:{i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}}}else{switch((p&63488)<<16>>16){case 28672:break;default:break t}if(n[5300]|0){f=a[2]|0;a[e+832>>2]=p&7;a[e+832+4>>2]=p>>>3&7;a[e+832+8>>2]=p>>>6&31;$e(f,1935,e+832|0)|0}i=a[4668+((p>>>3&7)<<2)>>2]|0;t=a[4668+((p&7)<<2)>>2]|0;r=G(3,i+(p>>>6&31)&-2|0)|0;if(!(i+(p>>>6)&1))t=r&65280|t&255;else t=r&255|t<<8;te(5,i+(p>>>6&31)&-2|0,t&65535|0)|0;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}}while(0);if((p&65024|0)==21504){if(n[5300]|0){f=a[2]|0;a[e+848>>2]=p&7;a[e+848+4>>2]=p>>>3&7;a[e+848+8>>2]=p>>>6&7;$e(f,1957,e+848|0)|0}i=(a[4668+((p>>>6&7)<<2)>>2]|0)+(a[4668+((p>>>3&7)<<2)>>2]|0)|0;t=a[4668+((p&7)<<2)>>2]|0;r=G(3,i&-2|0)|0;if(!(i&1))t=r&65280|t&255;else t=r&255|t<<8;te(5,i&-2|0,t&65535|0)|0;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&63488|0)==32768){if(n[5300]|0){f=a[2]|0;a[e+864>>2]=p&7;a[e+864+4>>2]=p>>>3&7;a[e+864+8>>2]=p>>>5&62;$e(f,1977,e+864|0)|0}te(5,(a[4668+((p>>>3&7)<<2)>>2]|0)+(p>>>5&62)|0,a[4668+((p&7)<<2)>>2]&65535|0)|0;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}t:do{if((p&65024)<<16>>16<20992){switch((p&65024)<<16>>16){case 7680:break;default:break t}if(n[5300]|0){f=a[2]|0;a[e+896>>2]=p&7;a[e+896+4>>2]=p>>>3&7;a[e+896+8>>2]=p>>>6&7;$e(f,2019,e+896|0)|0}f=a[4668+((p>>>3&7)<<2)>>2]|0;a[4668+((p&7)<<2)>>2]=f-(p>>>6&7);i=a[1184]|0;i=(f-(p>>>6&7)|0)<0?i|-2147483648:i&2147483647;i=(f-(p>>>6&7)|0)==0?i|1073741824:i&-1073741825;i=(((f>>>31)+1+((((p>>>6|2147483640)^7)+1+(f&2147483647)|0)>>>31)|0)&2|0)==0?i&-536870913:i|536870912;a[1184]=((((p>>>6|2147483640)^7)+1+(f&2147483647)|0)>>>31|0)==(((f>>>31)+1+((((p>>>6|2147483640)^7)+1+(f&2147483647)|0)>>>31)|0)>>>1&1|0)?i&-268435457:i|268435456;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}else{switch((p&65024)<<16>>16){case 20992:break;default:break t}if(n[5300]|0){f=a[2]|0;a[e+880>>2]=p&7;a[e+880+4>>2]=p>>>3&7;a[e+880+8>>2]=p>>>6&7;$e(f,1999,e+880|0)|0}te(5,(a[4668+((p>>>6&7)<<2)>>2]|0)+(a[4668+((p>>>3&7)<<2)>>2]|0)|0,a[4668+((p&7)<<2)>>2]&65535|0)|0;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}}while(0);if((p&63488|0)==14336){if(n[5300]|0){f=a[2]|0;a[e+912>>2]=p>>>8&7;a[e+912+4>>2]=p&255;$e(f,2039,e+912|0)|0}f=a[4668+((p>>>8&7)<<2)>>2]|0;a[4668+((p>>>8&7)<<2)>>2]=f-(p&255);i=a[1184]|0;i=(f-(p&255)|0)<0?i|-2147483648:i&2147483647;i=(f-(p&255)|0)==0?i|1073741824:i&-1073741825;i=(((f>>>31)+1+((-2147483648-(p&255)+(f&2147483647)|0)>>>31)|0)&2|0)==0?i&-536870913:i|536870912;a[1184]=((-2147483648-(p&255)+(f&2147483647)|0)>>>31|0)==(((f>>>31)+1+((-2147483648-(p&255)+(f&2147483647)|0)>>>31)|0)>>>1&1|0)?i&-268435457:i|268435456;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&65024|0)==6656){if(n[5300]|0){f=a[2]|0;a[e+920>>2]=p&7;a[e+920+4>>2]=p>>>3&7;a[e+920+8>>2]=p>>>6&7;$e(f,2057,e+920|0)|0}d=a[4668+((p>>>3&7)<<2)>>2]|0;f=a[4668+((p>>>6&7)<<2)>>2]|0;a[4668+((p&7)<<2)>>2]=d-f;i=a[1184]|0;i=(d-f|0)<0?i|-2147483648:i&2147483647;i=(d-f|0)==0?i|1073741824:i&-1073741825;i=(((~f>>>31)+(d>>>31)+(((d&2147483647)+1+(~f&2147483647)|0)>>>31)|0)&2|0)==0?i&-536870913:i|536870912;a[1184]=(((d&2147483647)+1+(~f&2147483647)|0)>>>31|0)==(((~f>>>31)+(d>>>31)+(((d&2147483647)+1+(~f&2147483647)|0)>>>31)|0)>>>1&1|0)?i&-268435457:i|268435456;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&65408|0)==45184){if(n[5300]|0){f=a[2]|0;a[e+936>>2]=p<<2&508;$e(f,2075,e+936|0)|0}a[1180]=(a[1180]|0)-(p<<2&508);i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&65280|0)==57088){if(n[5300]|0){f=a[2]|0;a[e+944>>2]=p&255;$e(f,2091,e+944|0)|0}if((p&255|0)==204){a[1167]=a[1184];i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}else{i=a[2]|0;a[e+952>>2]=p&255;$e(i,2103,e+952|0)|0;i=1;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}}t:do{if((p&65472)<<16>>16<-19840)switch((p&65472)<<16>>16){case-19904:{if(n[5300]|0){f=a[2]|0;a[e+960>>2]=p&7;a[e+960+4>>2]=p>>>3&7;$e(f,2117,e+960|0)|0}i=a[4668+((p>>>3&7)<<2)>>2]|0;a[4668+((p&7)<<2)>>2]=(i&128|0)==0?i&255:i|-256;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}case-19968:{if(n[5300]|0){f=a[2]|0;a[e+968>>2]=p&7;a[e+968+4>>2]=p>>>3&7;$e(f,2131,e+968|0)|0}i=a[4668+((p>>>3&7)<<2)>>2]|0;a[4668+((p&7)<<2)>>2]=(i&32768|0)==0?i&65535:i|-65536;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}default:break t}else{if((p&65472)<<16>>16<-19776){switch((p&65472)<<16>>16){case-19840:break;default:break t}if(n[5300]|0){f=a[2]|0;a[e+992>>2]=p&7;a[e+992+4>>2]=p>>>3&7;$e(f,2172,e+992|0)|0}a[4668+((p&7)<<2)>>2]=a[4668+((p>>>3&7)<<2)>>2]&65535;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}if((p&65472)<<16>>16<16896){switch((p&65472)<<16>>16){case-19776:break;default:break t}if(n[5300]|0){f=a[2]|0;a[e+984>>2]=p&7;a[e+984+4>>2]=p>>>3&7;$e(f,2158,e+984|0)|0}a[4668+((p&7)<<2)>>2]=a[4668+((p>>>3&7)<<2)>>2]&255;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}else{switch((p&65472)<<16>>16){case 16896:break;default:break t}if(n[5300]|0){f=a[2]|0;a[e+976>>2]=p&7;a[e+976+4>>2]=p>>>3&7;$e(f,2145,e+976|0)|0}p=a[4668+((p>>>3&7)<<2)>>2]&a[4668+((p&7)<<2)>>2];i=a[1184]|0;i=(p|0)<0?i|-2147483648:i&2147483647;a[1184]=(p|0)==0?i|1073741824:i&-1073741825;i=0;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}}}while(0);i=a[2]|0;a[e+1e3>>2]=s;a[e+1e3+4>>2]=p;$e(i,2186,e+1e3|0)|0;i=1;_=e;a[e+4792>>2]=6;a[e+4796>>2]=i|0;break e}}}}}}}a[e+1368>>2]=i}var St=[wt,we];var At=[kt,ke,Ee,kt];return{_llvm_bswap_i32:bt,_enable_debug:fe,stackSave:ne,_i64Subtract:ot,___udivdi3:pt,setThrew:se,_bitshift64Lshr:lt,_read_register:_e,_bitshift64Shl:ht,_memset:ct,_sbrk:mt,_memcpy:dt,stackAlloc:re,___uremdi3:gt,_run:he,_abort_run:de,setTempRet0:oe,_i64Add:ut,dynCall_iiii:vt,dynCall_ii:yt,_ping:le,_emscripten_get_global_libc:ve,_free:ye,___errno_location:Ae,_set_stop_address:ce,runPostSets:st,getTempRet0:ue,_write_register:pe,stackRestore:ie,_malloc:be,establishStackSpace:ae,_reset:me}}(Module.asmGlobalArg,Module.asmLibraryArg,buffer),_enable_debug=Module._enable_debug=asm._enable_debug,stackSave=Module.stackSave=asm.stackSave,_i64Subtract=Module._i64Subtract=asm._i64Subtract,___udivdi3=Module.___udivdi3=asm.___udivdi3,getTempRet0=Module.getTempRet0=asm.getTempRet0,_bitshift64Lshr=Module._bitshift64Lshr=asm._bitshift64Lshr,_read_register=Module._read_register=asm._read_register,_bitshift64Shl=Module._bitshift64Shl=asm._bitshift64Shl,_memset=Module._memset=asm._memset,_sbrk=Module._sbrk=asm._sbrk,_memcpy=Module._memcpy=asm._memcpy,___errno_location=Module.___errno_location=asm.___errno_location,___uremdi3=Module.___uremdi3=asm.___uremdi3,stackAlloc=Module.stackAlloc=asm.stackAlloc,_run=Module._run=asm._run,_abort_run=Module._abort_run=asm._abort_run,setTempRet0=Module.setTempRet0=asm.setTempRet0,_i64Add=Module._i64Add=asm._i64Add,_ping=Module._ping=asm._ping,_emscripten_get_global_libc=Module._emscripten_get_global_libc=asm._emscripten_get_global_libc,_set_stop_address=Module._set_stop_address=asm._set_stop_address,_llvm_bswap_i32=Module._llvm_bswap_i32=asm._llvm_bswap_i32,_free=Module._free=asm._free,runPostSets=Module.runPostSets=asm.runPostSets,setThrew=Module.setThrew=asm.setThrew,establishStackSpace=Module.establishStackSpace=asm.establishStackSpace,_write_register=Module._write_register=asm._write_register,stackRestore=Module.stackRestore=asm.stackRestore,_malloc=Module._malloc=asm._malloc,_reset=Module._reset=asm._reset,dynCall_ii=Module.dynCall_ii=asm.dynCall_ii,dynCall_iiii=Module.dynCall_iiii=asm.dynCall_iiii,initialStackTop;function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function run(e){function t(){Module.calledRun||(Module.calledRun=!0,ABORT||(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0||Module.calledRun||(Module.setStatus?(Module.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Module.setStatus("")}),1),t()}),1)):t()))}function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,Module.then=function(e){if(Module.calledRun)e(Module);else{var t=Module.onRuntimeInitialized;Module.onRuntimeInitialized=function(){t&&t(),e(Module)}}return Module},ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus,dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function(e){e=e||[],ensureInitRuntime();var t=e.length+1;function r(){for(var e=0;e<3;e++)n.push(0)}var n=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];r();for(var i=0;i<t-1;i+=1)n.push(allocate(intArrayFromString(e[i]),"i8",ALLOC_NORMAL)),r();n.push(0),n=allocate(n,"i32",ALLOC_NORMAL);try{exit(Module._main(t,n,0),!0)}catch(e){if(e instanceof ExitStatus)return;if("SimulateInfiniteLoop"==e)return void(Module.noExitRuntime=!0);var a=e;e&&"object"==typeof e&&e.stack&&(a=[e,e.stack]),Module.printErr("exception thrown: "+a),Module.quit(1,e)}},Module.run=Module.run=run,Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){Module.onAbort&&Module.onAbort(e),void 0!==e?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t="abort("+e+") at "+stackTrace()+"\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.";throw abortDecorators&&abortDecorators.forEach((function(r){t=r(t,e)})),t}if(Module.abort=Module.abort=abort,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!1;return Module.noInitialRun&&(shouldRunNow=!1),Module.noExitRuntime=!0,run(),Module};module.exports&&(module.exports=Module),module.exports=Module})),Thumbulator_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t={}),this._module=null,this._options=null,this._options=tslib_es6.__assign({stopAddress:0},t),this._module=thumbulator(this._getApi(e,this._options)),this.enableDebug(!1)}return e.prototype.init=function(){return tslib_es6.__awaiter(this,void 0,void 0,(function(){return tslib_es6.__generator(this,(function(e){return this._module._set_stop_address(this._options.stopAddress),[2]}))}))},e.prototype.ping=function(){return this._module.ccall("ping","string",[],[])},e.prototype.run=function(e){return this._module._run(e)},e.prototype.abort=function(){this._module._abort_run()},e.prototype.enableDebug=function(e){this._module._enable_debug(e?1:0)},e.prototype.reset=function(){this._module._reset()},e.prototype.readRegister=function(e){if(e<0||e>15)throw new Error("illegal thumb register "+e);return this._module._read_register(e)},e.prototype.writeRegister=function(e,t){if(e<0||e>15)throw new Error("illegal thumb register "+e);this._module._write_register(e,t)},e.prototype._getApi=function(e,t){var r=t.printer||function(e){return console.log("thumbulator: "+e)};return{print:r,printErr:r,trapOnInstructionFetch:t.trapOnInstructionFetch||function(){return 0},trapOnBx32:t.trapOnBx32||function(){return 3},busRead16:e.read16,busRead32:e.read32||function(t){return 65535&e.read16(t)|e.read16(t+2)<<16},busWrite16:e.write16,busWrite32:e.write32||function(t,r){return e.write16(t,65535&r),e.write16(t+2,r>>>16)}}},e}();t.default=r})),Thumbulator=unwrapExports(Thumbulator_1);function encodeWithPrefix(e,t,r=!0,n=""){if(!r&&e<0)return encodeWithPrefix(e>>>16,t&&t>8?t-4:4,!1,n)+encodeWithPrefix(65535&e,4);let i=Math.abs(e).toString(16).toUpperCase();if(void 0!==t)for(;i.length<t;)i="0"+i;return(e<0?"-":"")+n+i}function encode$1(e,t,r=!0){return encodeWithPrefix(e,t,r,"$")}function hostIsLittleEndian(){const e=new Uint8Array([1,2,3,4]);return 67305985===new Uint32Array(e.buffer)[0]}class Soc{constructor(e=(()=>3)){this.trap=new lib_1,this._thumbulatorBus={read16:e=>{if(1&e)return this._triggerTrap(`unaligned 16 bit ARM read from ${encode$1(e,8,!1)}`),0;const t=268435455&e;switch(e>>>28){case 0:if(t<32768)return this.getRom16(t);break;case 4:if(t<8192)return this.getRam16(t);break;case 14:switch(t){case 2080768:return this._armMamcr}}this._triggerTrap(`invalid 16 bit ARM read from ${encode$1(e,8,!1)}`)},read32:e=>{if(3&e)return this._triggerTrap(`unaligned 32 bit ARM read from ${encode$1(e,8,!1)}`),0;const t=268435455&e;switch(e>>>28){case 0:if(t<32768)return this.getRom32(t);break;case 4:if(t<8192)return this.getRam32(t);break;case 14:switch(t){case 32772:case 32776:return 0}}this._triggerTrap(`invalid 32 bit ARM read from ${encode$1(e,8,!1)}`)},write16:(e,t)=>{if(1&e)return void this._triggerTrap(`unaligned 16 bit ARM write: ${encode$1(t,4)} -> ${encode$1(e,8,!1)}`);const r=268435455&e;switch(e>>>28){case 4:if(r<8192)return void this.setRam16(r,65535&t);break;case 14:switch(r){case 2080768:return void(this._armMamcr=t)}}this._triggerTrap(`invalid 16 bit ARM write: ${encode$1(t,4)} -> ${encode$1(e,8,!1)}`)},write32:(e,t)=>{if(3&e)return void this._triggerTrap(`unaligned 32 bit ARM write: ${encode$1(t,8,!1)} -> ${encode$1(e,8,!1)}`);const r=268435455&e;switch(e>>>28){case 4:if(r<8192)return void this.setRam32(r,t);case 14:switch(r){case 32772:case 32776:return}}this._triggerTrap(`invalid 32 bit ARM write: ${encode$1(t,8,!1)} -> ${encode$1(e,8,!1)}`)}},this._romBuffer=new ArrayBuffer(32768),this._ramBuffer=new ArrayBuffer(8192),this._armMamcr=0,this._thumbulator=null,hostIsLittleEndian()?(this.getRom16=e=>this._rom16[e>>>1],this.getRom32=e=>this._rom32[e>>>2],this.getRam16=e=>this._ram16[e>>>1],this.getRam32=e=>this._ram32[e>>>2],this.setRam16=(e,t)=>this._ram16[e>>>1]=t,this.setRam32=(e,t)=>this._ram32[e>>>2]=t):(this.getRom16=e=>this._rom8[e]|this._rom8[e+1]<<8,this.getRom32=e=>this._rom8[e]|this._rom8[e+1]<<8|this._rom8[e+2]<<16|this._rom8[e+3]<<24,this.getRam16=e=>this._ram8[e]|this._ram8[e+1]<<8,this.getRam32=e=>this._ram8[e]|this._ram8[e+1]<<8|this._ram8[e+2]<<16|this._ram8[e+3]<<24,this.setRam16=(e,t)=>{this._ram8[e]=255&t,this._ram8[e+1]=t>>>8&255},this.setRam32=(e,t)=>{this._ram8[e]=255&t,this._ram8[e+1]=t>>>8&255,this._ram8[e+2]=t>>>16&255,this._ram8[e+3]=t>>>24&255}),this._rom8=new Uint8Array(this._romBuffer),this._rom16=new Uint16Array(this._romBuffer),this._rom32=new Uint32Array(this._romBuffer),this._ram8=new Uint8Array(this._ramBuffer),this._ram16=new Uint16Array(this._ramBuffer),this._ram32=new Uint32Array(this._ramBuffer),this._thumbulator=new Thumbulator(this._thumbulatorBus,{stopAddress:32772,trapOnBx32:e}),this.reset()}init(){return this._thumbulator.init()}reset(){}getRom(){return this._rom8}getRam(){return this._ram8}run(e){this._thumbulator.reset(),this._thumbulator.enableDebug(!1);for(let e=0;e<=12;e++)this._thumbulator.writeRegister(e,0);this._thumbulator.writeRegister(13,1073749940),this._thumbulator.writeRegister(14,32773),this._thumbulator.writeRegister(15,e),this._armMamcr=0;const t=this._thumbulator.run(5e5);20!==t&&10!==t&&this._triggerTrap(`ARM execution trapped: ${t}`)}getThumbulator(){return this._thumbulator}_triggerTrap(e){this._thumbulator.abort(),this.trap.dispatch(e)}}class CartridgeDPCPlus extends AbstractCartridge{constructor(e){if(super(),this._banks=new Array(6),this._fetchers=new Array(8),this._fractionalFetchers=new Array(8),this._musicFetchers=new Array(3),this._parameters=new Uint8Array(8),this._parameterIndex=0,this._rng=0,this._clockAccumulator=0,this._lastCpuTime=0,this._fastFetch=!1,this._ldaPending=!1,this._cpuTimeProvider=null,this._soc=new Soc,e.length<28672||e.length>32768)throw new Error(`not a DPC+ image: invalid lenght ${e.length}`);this._rom=this._soc.getRom();for(let e=0;e<6;e++)this._banks[e]=new Uint8Array(this._rom.buffer,3072+4096*e,4096);this._ram=this._soc.getRam(),this._imageRam=new Uint8Array(this._ram.buffer,3072,4096);const t=32768-e.length;for(let r=0;r<e.length;r++)this._rom[t+r]=e[r];for(let e=0;e<8;e++)this._fetchers[e]=new Fetcher,this._fractionalFetchers[e]=new FractionalFetcher;for(let e=0;e<3;e++)this._musicFetchers[e]=new MusicFetcher;this._soc.trap.addHandler(e=>this.triggerTrap(2,e)),this.reset()}static matchesBuffer(e){return 2===searchForSignatures(e,["DPC+".split("").map(e=>e.charCodeAt(0))])[0]}init(){return this._soc.init()}reset(){this._soc.reset(),this._currentBank=this._banks[5];for(let e=0;e<768;e++)this._soc.setRam32(e<<2,this._soc.getRom32(e<<2));for(let e=6912;e<8192;e++)this._soc.setRam32(768+e-6912<<2,this._soc.getRom32(e<<2));this._currentBank=this._banks[5];for(let e=0;e<8;e++)this._parameters[e]=0;for(let e=0;e<8;e++)this._fetchers[e].reset(),this._fractionalFetchers[e].reset();for(let e=0;e<3;e++)this._musicFetchers[e].reset();this._parameterIndex=0,this._fastFetch=this._ldaPending=!1,this._rng=725831748,this._lastCpuTime=0,this._clockAccumulator=0}getType(){return CartridgeInfo.CartridgeType.bankswitch_dpc_plus}setBus(e){return this._bus=e,this}setCpuTimeProvider(e){return this._cpuTimeProvider=e,this}read(e){return this._access(e,this._bus.getLastDataBusValue())}peek(e){return this._currentBank[4095&e]}write(e,t){this._access(e,t)}triggerTrap(e,t){super.triggerTrap(e,t)}_access(e,t){e&=4095;const r=this._currentBank[e];if(this._fastFetch&&this._ldaPending&&e>127&&e<4086&&r<40&&(e=r),this._ldaPending=!1,e<40){const t=7&e,r=this._fetchers[t],n=this._fractionalFetchers[t];let i=0;switch(e>>>3&7){case 0:switch(t){case 0:return this._advanceRng(),255&this._rng;case 1:return this._rewindRng(),255&this._rng;case 2:return this._rng>>>8&255;case 3:return this._rng>>>16&255;case 4:return this._rng>>>24&255;case 5:{this._clockMusicFetchers();let e=0;for(let t=0;t<3;t++)e+=this._imageRam[(this._musicFetchers[t].waveform<<5)+this._musicFetchers[t].waveformSample()];return 255&e}}return 0;case 1:return i=this._imageRam[r.pointer],r.increment(),i;case 2:return i=this._imageRam[r.pointer]&r.mask(),r.increment(),i;case 3:return i=this._imageRam[n.pointer>>>8],n.increment(),i;case 4:return t<4?r.mask():0;default:return 0}}else if(e<128){const r=7&e,n=this._fetchers[r],i=this._fractionalFetchers[r];switch(e-40>>>3&15){case 0:i.setPointerLo(t);break;case 1:i.setPointerHi(t);break;case 2:i.setFraction(t);break;case 3:n.top=t;break;case 4:n.bottom=t;break;case 5:n.setPointerLo(t);break;case 6:switch(r){case 0:this._fastFetch=0===t;break;case 1:this._parameterIndex<8&&(this._parameters[this._parameterIndex++]=t);break;case 2:this._dispatchFunction(t);break;case 5:case 6:case 7:this._musicFetchers[r-5].waveform=127&t}break;case 7:n.decrement(),this._imageRam[n.pointer]=t;break;case 8:n.setPointerHi(t);break;case 9:switch(r){case 0:this._rng=725831748;break;case 1:this._rng=4294967040&this._rng|t;break;case 2:this._rng=4294902015&this._rng|t<<8;break;case 3:this._rng=4278255615&this._rng|t<<16;break;case 4:this._rng=16777215&this._rng|t<<24;break;case 5:case 6:case 7:this._musicFetchers[r-5].frequency=this._soc.getRam32(7168+(t<<2))}break;case 10:this._imageRam[n.pointer]=t,n.increment()}}else e>4085&&e<4092&&(this._currentBank=this._banks[e-4086]);return this._fastFetch&&e>127&&e<4086&&(this._ldaPending=169===r),r}_clockMusicFetchers(){const e=this._cpuTimeProvider();this._clockAccumulator+=2e4*(e-this._lastCpuTime),this._lastCpuTime=e;const t=Math.floor(this._clockAccumulator);if(this._clockAccumulator-=t,0!==t)for(let e=0;e<3;e++)this._musicFetchers[e].increment(t)}_dispatchFunction(e){const t=this._parameters[0]+(this._parameters[1]<<8);switch(e){case 0:this._parameterIndex=0;break;case 1:for(let e=0;e<this._parameters[3];e++)this._ram[3072+(this._fetchers[7&this._parameters[2]].pointer+e&4095)]=this._rom[3072+(t+e)%29696];this._parameterIndex=0;break;case 2:for(let e=0;e<this._parameters[3];e++)this._ram[3072+(this._fetchers[7&this._parameters[2]].pointer+e&4095)]=this._parameters[0];this._parameterIndex=0;break;case 254:case 255:this._soc.run(3083)}}_advanceRng(){this._rng=(1024&this._rng?279816990:0)^(this._rng>>>11|this._rng<<21)}_rewindRng(){this._rng=this._rng&1<<31?(279816990^this._rng)<<11|(279816990^this._rng)>>>21:this._rng<<11|this._rng>>>21}}class Fetcher{constructor(){this.pointer=0,this.top=0,this.bottom=0}contructor(){this.reset()}reset(){this.pointer=this.top=this.bottom=0}setPointerHi(e){this.pointer=255&this.pointer|(15&e)<<8}setPointerLo(e){this.pointer=3840&this.pointer|255&e}increment(){this.pointer=this.pointer+1&4095}decrement(){this.pointer=this.pointer+4095&4095}mask(){return(this.top-(255&this.pointer)&255)>(this.top-this.bottom&255)?255:0}}class FractionalFetcher{constructor(){this.pointer=0,this.fraction=0}contructor(){this.reset()}reset(){this.pointer=this.fraction=0}setPointerHi(e){this.pointer=65535&this.pointer|(15&e)<<16}setPointerLo(e){this.pointer=983295&this.pointer|(255&e)<<8}setFraction(e){this.fraction=e,this.pointer&=1048320}increment(){this.pointer=this.pointer+this.fraction&1048575}}class MusicFetcher{constructor(){this.frequency=-1,this.counter=-1,this.waveform=0,this.reset()}reset(){this.frequency=0,this.waveform=0,this.counter=0}increment(e){this.counter=this.counter+e*this.frequency|0}waveformSample(){return this.counter>>>27}}class CartridgeCDF extends AbstractCartridge{constructor(e){super(),this._handleBxCDF0=e=>{const t=this._soc.getThumbulator(),r=t.readRegister(2),n=t.readRegister(3);switch(e){case 1762:return this._musicStreams[r%3].frequency=n,0;case 1766:return this._musicStreams[r%3].counter=0,0;case 1770:return t.writeRegister(2,this._musicStreams[r%3].counter),0;case 1774:return this._musicStreams[r%3].waveformSize=n,0}return 3},this._handleBxCDF1=e=>{const t=this._soc.getThumbulator(),r=t.readRegister(2),n=t.readRegister(3);switch(e){case 1874:return this._musicStreams[r%3].frequency=n,0;case 1878:return this._musicStreams[r%3].counter=0,0;case 1882:return t.writeRegister(2,this._musicStreams[r%3].counter),0;case 1886:return this._musicStreams[r%3].waveformSize=n,0}return 3},this._banks=new Array(7),this._currentBank=null,this._rom=null,this._ram=null,this._displayRam=null,this._musicStreams=new Array(3),this._clockAccumulator=0,this._lastCpuTime=0,this._soc=null,this._fastFetch=!1,this._digitalAudio=!1,this._fastJumpCountdown=0,this._fastFetchPending=!1,this._jmpOperandAddress=0,this._ldaOperandAddress=0,this._datastreamBase=0,this._datastreamIncrementBase=0,this._waveformBase=0,this._jumpstream=0,this._jumpstreamMask=0,this._amplitudeStream=0,this._bus=null,this._cpuTimeProvider=null;const t=CartridgeCDF.getVersion(e);switch(t){case 0:this._jumpstreamMask=255,this._amplitudeStream=34,this._datastreamBase=1760,this._datastreamIncrementBase=1896,this._waveformBase=2032;break;case 1:this._jumpstreamMask=255,this._amplitudeStream=34,this._datastreamBase=160,this._datastreamIncrementBase=296,this._waveformBase=432;break;case 2:this._jumpstreamMask=254,this._amplitudeStream=35,this._datastreamBase=152,this._datastreamIncrementBase=292,this._waveformBase=432;break;default:throw new Error("not a CDF image: missing signature")}if(32768!==e.length)throw new Error(`not a CDF image: invalid lenght ${e.length}`);this._soc=new Soc(0===t?this._handleBxCDF0:this._handleBxCDF1),this._soc.trap.addHandler(e=>this.triggerTrap(2,e)),this._rom=this._soc.getRom();for(let t=0;t<32768;t++)this._rom[t]=e[t];for(let e=0;e<7;e++)this._banks[e]=new Uint8Array(this._rom.buffer,4096*(e+1),4096);this._ram=this._soc.getRam(),this._displayRam=new Uint8Array(this._soc.getRam().buffer,2048,4096);for(let e=0;e<3;e++)this._musicStreams[e]=new MusicStream;this.reset()}static getVersion(e){const t="CDF".split("").map(e=>e.charCodeAt(0)),r=searchForSignature(e,[...t,-1,...t,-1,...t]);if(r<0)return 3;switch(e[r+3]){case 0:return 0;case 1:return 1;case"J".charCodeAt(0):return 2;default:return 3}}static matchesBuffer(e){return 3!==CartridgeCDF.getVersion(e)}init(){return this._soc.init()}reset(){for(let e=0;e<512;e++)this._soc.setRam32(e<<2,this._soc.getRom32(e<<2));this._fastFetch=!1,this._digitalAudio=!1,this._fastJumpCountdown=0,this._fastFetchPending=!1,this._jmpOperandAddress=0,this._ldaOperandAddress=0,this._currentBank=this._banks[6];for(let e=0;e<3;e++)this._musicStreams[e].reset();this._lastCpuTime=0,this._clockAccumulator=0}getType(){return CartridgeInfo.CartridgeType.bankswitch_cdf}setBus(e){return this._bus=e,this}setCpuTimeProvider(e){return this._cpuTimeProvider=e,this}read(e){return this._access(e,this._bus.getLastDataBusValue())}peek(e){return this._currentBank[4095&e]}write(e,t){this._access(e,t)}_access(e,t){e&=4095;const r=this._currentBank[e];if(this._fastJumpCountdown-- >0&&e===this._jmpOperandAddress)return this._jmpOperandAddress++,this._datastreamReadWithIncrement(this._jumpstream,256);if(this._fastFetch&&76===r&&0==(this._currentBank[e+1&4095]&this._jumpstreamMask)&&0===this._currentBank[e+2&4095])return this._fastJumpCountdown=2,this._jmpOperandAddress=e+1&4095,this._jumpstream=33+this._currentBank[e+1&4095],r;if(this._fastJumpCountdown=0,this._fastFetch&&this._fastFetchPending&&this._ldaOperandAddress===e&&r<=this._amplitudeStream){if(this._fastFetchPending=!1,r===this._amplitudeStream){if(this._clockMusicStreams(),this._digitalAudio){const e=this._musicStreams[0].counter,t=this._soc.getRam32(this._waveformBase)+(e>>>21);let r=0;return t<32768&&(r=this._rom[t]),t>1073741824&&t<1073750016&&(r=this._ram[t-1073741824]),0==(1048576&e)&&(r>>>=4),15&r}{let e=0;for(let t=0;t<3;t++)e+=this._displayRam[this._getWaveform(t)+(this._musicStreams[t].counter>>>this._musicStreams[t].waveformSize)&4095];return e}}return this._datastreamRead(r)}if(this._fastFetchPending=!1,e>=4080){switch(e){case 4080:this._datastreamWriteWithIncrement(32,t,256);break;case 4081:{let e=this._getDatastreamPointer(32);e<<=8,e&=4026531840,e|=t<<20,this._setDatastreamPointer(32,e);break}case 4082:this._fastFetch=0==(15&t),this._digitalAudio=0==(240&t);break;case 4083:switch(t){case 254:case 255:this._soc.run(2059)}}e>4084&&e<4092&&(this._currentBank=this._banks[e-4085])}return this._fastFetch&&169===r&&(this._fastFetchPending=!0,this._ldaOperandAddress=e+1&4095),r}_clockMusicStreams(){const e=this._cpuTimeProvider();this._clockAccumulator+=2e4*(e-this._lastCpuTime),this._lastCpuTime=e;const t=Math.floor(this._clockAccumulator);if(this._clockAccumulator-=t,0!==t)for(let e=0;e<3;e++)this._musicStreams[e].increment(t)}_getDatastreamPointer(e){return this._soc.getRam32(this._datastreamBase+4*e)}_setDatastreamPointer(e,t){this._soc.setRam32(this._datastreamBase+4*e,t)}_getDatastreamIncrement(e){return this._soc.getRam32(this._datastreamIncrementBase+4*e)}_datastreamRead(e){const t=this._getDatastreamPointer(e),r=this._displayRam[t>>>20];return this._setDatastreamPointer(e,t+(this._getDatastreamIncrement(e)<<12)|0),r}_datastreamReadWithIncrement(e,t){const r=this._getDatastreamPointer(e),n=this._displayRam[r>>>20];return this._setDatastreamPointer(e,r+(t<<12)|0),n}_datastreamWriteWithIncrement(e,t,r){const n=this._getDatastreamPointer(e);this._displayRam[n>>>20]=t,this._setDatastreamPointer(e,n+(r<<12)|0)}_getWaveform(e){return this._soc.getRam32(this._waveformBase+4*e)-1073741824-2048&4095}}class MusicStream{constructor(){this.counter=0,this.frequency=0,this.waveformSize=27}reset(){this.counter=this.frequency=0,this.waveformSize=27}increment(e){this.counter=this.counter+e*this.frequency|0}}class Cartridge8040 extends AbstractCartridge{constructor(e){if(super(),this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._bus=null,8192!==e.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${e.length}`);for(let t=0;t<4096;t++)this._bank0[t]=e[t],this._bank1[t]=e[4096+t];this.reset()}static matchesBuffer(e){const t=searchForSignatures(e,[[173,0,8],[173,64,8],[44,0,8],[12,0,8,76],[12,255,15,76]]);for(const e of t)if(e>=2)return!0;return!1}reset(){this._bank=this._bank0}read(e){return this.peek(e)}peek(e){return e&=4095,this._bank[e]}getType(){return CartridgeInfo.CartridgeType.bankswitch_8k_econobanking}setBus(e){return this._bus=e,this._bus.event.read.addHandler(this._onBusAccess,this),this._bus.event.write.addHandler(this._onBusAccess,this),this}_onBusAccess(e,t){switch(6208&t._bus.getLastAddresBusValue()){case 2048:t._bank=t._bank0;break;case 2112:t._bank=t._bank1}}}class CartridgeCV extends AbstractCartridge{constructor(e){if(super(),this._rom=new Uint8Array(2048),this._ram=new Uint8Array(1024),2048!==e.length)throw new Error(`buffer is not a 2k cartridge image: wrong length ${e.length}`);for(let t=0;t<2048;t++)this._rom[t]=e[t]}static matchesBuffer(e){const t=searchForSignatures(e,[[157,255,243],[153,0,244]]);return t[0]>0||t[1]>0}setBus(e){return this._bus=e,this}randomize(e){for(let t=0;t<1024;t++)this._ram[t]=e.int(255)}read(e){return(e&=4095)<1024?this._ram[e]:e<2048?this._ram[1023&e]=this._bus.getLastDataBusValue():this._rom[2047&e]}write(e,t){(e&=4095)>=1024&&e<2048&&(this._ram[1023&e]=t)}peek(e){return(e&=4095)<1024?this._ram[e]:e<2048?0:this._rom[2047&e]}getType(){return CartridgeInfo.CartridgeType.bankswitch_2k_cv}}class CartridgeDetector{detectCartridgeType(e){if(e.length%8448==0)return CartridgeInfo.CartridgeType.bankswitch_supercharger;if(e.length<2048)return CartridgeInfo.CartridgeType.vanilla_2k;if(e.length>=10240&&e.length<=10496)return CartridgeInfo.CartridgeType.bankswitch_8k_DPC;switch(e.length){case 2048:return this._detect2k(e);case 4096:return CartridgeInfo.CartridgeType.vanilla_4k;case 8192:return this._detect8k(e);case 8195:return CartridgeInfo.CartridgeType.bankswitch_8k_pp;case 12288:return CartridgeInfo.CartridgeType.bankswitch_12k_FA;case 16384:return this._detect16k(e);case 28672:return CartridgeInfo.CartridgeType.bankswitch_FA2;case 29696:return this._detect29k(e);case 32768:return this._detect32k(e);case 65536:return this._detect64k(e);default:return CartridgeInfo.CartridgeType.unknown}}_detect2k(e){return CartridgeCV.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_2k_cv:CartridgeInfo.CartridgeType.vanilla_2k}_detect8k(e){const t=CartridgeF8.matchesBuffer(e);return CartridgeE0.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_8k_E0:Cartridge3F.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_8k_3F:CartridgeUA.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_8k_UA:!t&&CartridgeFE.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_8k_FE:Cartridge8040.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_8k_econobanking:CartridgeInfo.CartridgeType.bankswitch_8k_F8}_detect16k(e){return CartrdigeE7.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_16k_E7:CartridgeInfo.CartridgeType.bankswitch_16k_F6}_detect29k(e){return CartridgeFA2.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_FA2:CartridgeInfo.CartridgeType.bankswitch_dpc_plus}_detect32k(e){return Cartridge3E.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_3E:CartridgeDPCPlus.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_dpc_plus:CartridgeCDF.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_cdf:CartridgeInfo.CartridgeType.bankswitch_32k_F4}_detect64k(e){return CartridgeEF.matchesBuffer(e)?CartridgeInfo.CartridgeType.bankswitch_64k_EF:CartridgeInfo.CartridgeType.bankswitch_64k_F0}}var keys$1=Object.keys,isArray$3=Array.isArray,_global="undefined"!=typeof self?self:"undefined"!=typeof window?window:global$1;function extend(e,t){return"object"!=typeof t?e:(keys$1(t).forEach((function(r){e[r]=t[r]})),e)}var getProto=Object.getPrototypeOf,_hasOwn={}.hasOwnProperty;function hasOwn(e,t){return _hasOwn.call(e,t)}function props(e,t){"function"==typeof t&&(t=t(getProto(e))),keys$1(t).forEach((function(r){setProp(e,r,t[r])}))}var defineProperty=Object.defineProperty;function setProp(e,t,r,n){defineProperty(e,t,extend(r&&hasOwn(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function derive(e){return{from:function(t){return e.prototype=Object.create(t.prototype),setProp(e.prototype,"constructor",e),{extend:props.bind(null,e.prototype)}}}}var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;function getPropertyDescriptor(e,t){var r;return getOwnPropertyDescriptor(e,t)||(r=getProto(e))&&getPropertyDescriptor(r,t)}var _slice=[].slice;function slice(e,t,r){return _slice.call(e,t,r)}function override(e,t){return t(e)}function assert(e){if(!e)throw new Error("Assertion Failed")}function asap(e){_global.setImmediate?setImmediate(e):setTimeout(e,0)}function arrayToObject(e,t){return e.reduce((function(e,r,n){var i=t(r,n);return i&&(e[i[0]]=i[1]),e}),{})}function trycatcher(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function tryCatch$1(e,t,r){try{e.apply(null,r)}catch(e){t&&t(e)}}function getByKeyPath(e,t){if(hasOwn(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,i=t.length;n<i;++n){var a=getByKeyPath(e,t[n]);r.push(a)}return r}var s=t.indexOf(".");if(-1!==s){var o=e[t.substr(0,s)];return void 0===o?void 0:getByKeyPath(o,t.substr(s+1))}}function setByKeyPath(e,t,r){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){assert("string"!=typeof r&&"length"in r);for(var n=0,i=t.length;n<i;++n)setByKeyPath(e,t[n],r[n])}else{var a=t.indexOf(".");if(-1!==a){var s=t.substr(0,a),o=t.substr(a+1);if(""===o)void 0===r?delete e[s]:e[s]=r;else{var u=e[s];u||(u=e[s]={}),setByKeyPath(u,o,r)}}else void 0===r?delete e[t]:e[t]=r}}function delByKeyPath(e,t){"string"==typeof t?setByKeyPath(e,t,void 0):"length"in t&&[].map.call(t,(function(t){setByKeyPath(e,t,void 0)}))}function shallowClone(e){var t={};for(var r in e)hasOwn(e,r)&&(t[r]=e[r]);return t}var concat$1=[].concat;function flatten(e){return concat$1.apply([],e)}var intrinsicTypes="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(flatten([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return _global[e]})).map((function(e){return _global[e]}));function deepClone(e){if(!e||"object"!=typeof e)return e;var t;if(isArray$3(e)){t=[];for(var r=0,n=e.length;r<n;++r)t.push(deepClone(e[r]))}else if(intrinsicTypes.indexOf(e.constructor)>=0)t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)hasOwn(e,i)&&(t[i]=deepClone(e[i]));return t}function getObjectDiff(e,t,r,n){return r=r||{},n=n||"",keys$1(e).forEach((function(i){if(hasOwn(t,i)){var a=e[i],s=t[i];"object"==typeof a&&"object"==typeof s&&a&&s&&""+a.constructor==""+s.constructor?getObjectDiff(a,s,r,n+i+"."):a!==s&&(r[n+i]=t[i])}else r[n+i]=void 0})),keys$1(t).forEach((function(i){hasOwn(e,i)||(r[n+i]=t[i])})),r}var iteratorSymbol="undefined"!=typeof Symbol&&Symbol.iterator,getIteratorOf=iteratorSymbol?function(e){var t;return null!=e&&(t=e[iteratorSymbol])&&t.apply(e)}:function(){return null},NO_CHAR_ARRAY={};function getArrayOf(e){var t,r,n,i;if(1===arguments.length){if(isArray$3(e))return e.slice();if(this===NO_CHAR_ARRAY&&"string"==typeof e)return[e];if(i=getIteratorOf(e)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==e)return[e];if("number"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var debug$1="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function setDebug(e,t){debug$1=e,libraryFilter=t}var libraryFilter=function(){return!0},NEEDS_THROW_FOR_STACK=!new Error("").stack;function getErrorWithStack(){if(NEEDS_THROW_FOR_STACK)try{throw getErrorWithStack.arguments,new Error}catch(e){return e}return new Error}function prettyStack(e,t){var r=e.stack;return r?(t=t||0,0===r.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),r.split("\n").slice(t).filter(libraryFilter).map((function(e){return"\n"+e})).join("")):""}function deprecated(e,t){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+prettyStack(getErrorWithStack(),1)),t.apply(this,arguments)}}var dexieErrorNames=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],idbDomErrorNames=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],errorList=dexieErrorNames.concat(idbDomErrorNames),defaultTexts={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function DexieError(e,t){this._e=getErrorWithStack(),this.name=e,this.message=t}function getMultiErrorMessage(e,t){return e+". Errors: "+t.map((function(e){return e.toString()})).filter((function(e,t,r){return r.indexOf(e)===t})).join("\n")}function ModifyError(e,t,r,n){this._e=getErrorWithStack(),this.failures=t,this.failedKeys=n,this.successCount=r}function BulkError(e,t){this._e=getErrorWithStack(),this.name="BulkError",this.failures=t,this.message=getMultiErrorMessage(e,t)}derive(DexieError).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+prettyStack(this._e,2))}},toString:function(){return this.name+": "+this.message}}),derive(ModifyError).from(DexieError),derive(BulkError).from(DexieError);var errnames=errorList.reduce((function(e,t){return e[t]=t+"Error",e}),{}),BaseException=DexieError,exceptions$1=errorList.reduce((function(e,t){var r=t+"Error";function n(e,n){this._e=getErrorWithStack(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=defaultTexts[t]||r,this.inner=null)}return derive(n).from(BaseException),e[t]=n,e}),{});exceptions$1.Syntax=SyntaxError,exceptions$1.Type=TypeError,exceptions$1.Range=RangeError;var exceptionMap=idbDomErrorNames.reduce((function(e,t){return e[t+"Error"]=exceptions$1[t],e}),{});function mapError(e,t){if(!e||e instanceof DexieError||e instanceof TypeError||e instanceof SyntaxError||!e.name||!exceptionMap[e.name])return e;var r=new exceptionMap[e.name](t||e.message,e);return"stack"in e&&setProp(r,"stack",{get:function(){return this.inner.stack}}),r}var fullNameExceptions=errorList.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=exceptions$1[t]),e}),{});function nop$1(){}function mirror(e){return e}function pureFunctionChain(e,t){return null==e||e===mirror?t:function(r){return t(e(r))}}function callBoth(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function hookCreatingChain(e,t){return e===nop$1?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?callBoth(n,this.onsuccess):n),i&&(this.onerror=this.onerror?callBoth(i,this.onerror):i),void 0!==a?a:r}}function hookDeletingChain(e,t){return e===nop$1?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?callBoth(r,this.onsuccess):r),n&&(this.onerror=this.onerror?callBoth(n,this.onerror):n)}}function hookUpdatingChain(e,t){return e===nop$1?t:function(r){var n=e.apply(this,arguments);extend(r,n);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?callBoth(i,this.onsuccess):i),a&&(this.onerror=this.onerror?callBoth(a,this.onerror):a),void 0===n?void 0===s?void 0:s:extend(n,s)}}function reverseStoppableEventChain(e,t){return e===nop$1?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function promisableChain(e,t){return e===nop$1?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return r.then((function(){return t.apply(n,a)}))}return t.apply(this,arguments)}}fullNameExceptions.ModifyError=ModifyError,fullNameExceptions.DexieError=DexieError,fullNameExceptions.BulkError=BulkError;var INTERNAL$1={},LONG_STACKS_CLIP_LIMIT=100,MAX_LONG_STACKS=20,ZONE_ECHO_LIMIT=7,nativePromiseInstanceAndProto=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=_global.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),resolvedNativePromise=nativePromiseInstanceAndProto[0],nativePromiseProto=nativePromiseInstanceAndProto[1],resolvedGlobalPromise=nativePromiseInstanceAndProto[2],nativePromiseThen=nativePromiseProto&&nativePromiseProto.then,NativePromise=resolvedNativePromise&&resolvedNativePromise.constructor,AsyncFunction=nativePromiseInstanceAndProto[3],patchGlobalPromise=!!resolvedGlobalPromise,stack_being_generated=!1,schedulePhysicalTick=resolvedGlobalPromise?function(){resolvedGlobalPromise.then(physicalTick)}:_global.setImmediate?setImmediate.bind(null,physicalTick):_global.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){physicalTick(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(physicalTick,0)},asap$1=function(e,t){microtickQueue.push([e,t]),needsNewPhysicalTick&&(schedulePhysicalTick(),needsNewPhysicalTick=!1)},isOutsideMicroTick=!0,needsNewPhysicalTick=!0,unhandledErrors=[],rejectingErrors=[],currentFulfiller=null,rejectionMapper=mirror,globalPSD={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:globalError,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{globalError(e[0],e[1])}catch(e){}}))}},PSD=globalPSD,microtickQueue=[],numScheduledCalls=0,tickFinalizers=[];function Promise$2(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=nop$1,this._lib=!1;var t=this._PSD=PSD;if(debug$1&&(this._stackHolder=getErrorWithStack(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==INTERNAL$1)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&handleRejection(this,this._value))}this._state=null,this._value=null,++t.ref,executePromiseTask(this,e)}var thenProp={get:function(){var e=PSD,t=totalEchoes;function r(r,n){var i=this,a=!e.global&&(e!==PSD||t!==totalEchoes);a&&decrementExpectedAwaits();var s=new Promise$2((function(t,s){propagateToListener(i,new Listener(nativeAwaitCompatibleWrap(r,e,a),nativeAwaitCompatibleWrap(n,e,a),t,s,e))}));return debug$1&&linkToPreviousPromise(s,this),s}return r.prototype=INTERNAL$1,r},set:function(e){setProp(this,"then",e&&e.prototype===INTERNAL$1?thenProp:{get:function(){return e},set:thenProp.set})}};function Listener(e,t,r,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=i}function executePromiseTask(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&beginMicroTickScope();t&&"function"==typeof t.then?executePromiseTask(e,(function(e,r){t instanceof Promise$2?t._then(e,r):t.then(e,r)})):(e._state=!0,e._value=t,propagateAllListeners(e)),r&&endMicroTickScope()}}),handleRejection.bind(null,e))}catch(t){handleRejection(e,t)}}function handleRejection(e,t){if(rejectingErrors.push(t),null===e._state){var r=e._lib&&beginMicroTickScope();t=rejectionMapper(t),e._state=!1,e._value=t,debug$1&&null!==t&&"object"==typeof t&&!t._promise&&tryCatch$1((function(){var r=getPropertyDescriptor(t,"stack");t._promise=e,setProp(t,"stack",{get:function(){return stack_being_generated?r&&(r.get?r.get.apply(t):r.value):e.stack}})})),addPossiblyUnhandledError(e),propagateAllListeners(e),r&&endMicroTickScope()}}function propagateAllListeners(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)propagateToListener(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),0===numScheduledCalls&&(++numScheduledCalls,asap$1((function(){0==--numScheduledCalls&&finalizePhysicalTick()}),[]))}function propagateToListener(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++numScheduledCalls,asap$1(callListener,[r,e,t])}else e._listeners.push(t)}function callListener(e,t,r){try{currentFulfiller=t;var n,i=t._value;t._state?n=e(i):(rejectingErrors.length&&(rejectingErrors=[]),n=e(i),-1===rejectingErrors.indexOf(i)&&markErrorAsHandled(t)),r.resolve(n)}catch(e){r.reject(e)}finally{currentFulfiller=null,0==--numScheduledCalls&&finalizePhysicalTick(),--r.psd.ref||r.psd.finalize()}}function getStack(e,t,r){if(t.length===r)return t;var n="";if(!1===e._state){var i,a,s=e._value;null!=s?(i=s.name||"Error",a=s.message||s,n=prettyStack(s,0)):(i=s,a=""),t.push(i+(a?": "+a:"")+n)}return debug$1&&((n=prettyStack(e._stackHolder,2))&&-1===t.indexOf(n)&&t.push(n),e._prev&&getStack(e._prev,t,r)),t}function linkToPreviousPromise(e,t){var r=t?t._numPrev+1:0;r<LONG_STACKS_CLIP_LIMIT&&(e._prev=t,e._numPrev=r)}function physicalTick(){beginMicroTickScope()&&endMicroTickScope()}function beginMicroTickScope(){var e=isOutsideMicroTick;return isOutsideMicroTick=!1,needsNewPhysicalTick=!1,e}function endMicroTickScope(){var e,t,r;do{for(;microtickQueue.length>0;)for(e=microtickQueue,microtickQueue=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(microtickQueue.length>0);isOutsideMicroTick=!0,needsNewPhysicalTick=!0}function finalizePhysicalTick(){var e=unhandledErrors;unhandledErrors=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=tickFinalizers.slice(0),r=t.length;r;)t[--r]()}function run_at_end_of_this_or_next_physical_tick(e){tickFinalizers.push((function t(){e(),tickFinalizers.splice(tickFinalizers.indexOf(t),1)})),++numScheduledCalls,asap$1((function(){0==--numScheduledCalls&&finalizePhysicalTick()}),[])}function addPossiblyUnhandledError(e){unhandledErrors.some((function(t){return t._value===e._value}))||unhandledErrors.push(e)}function markErrorAsHandled(e){for(var t=unhandledErrors.length;t;)if(unhandledErrors[--t]._value===e._value)return void unhandledErrors.splice(t,1)}function PromiseReject(e){return new Promise$2(INTERNAL$1,!1,e)}function wrap(e,t){var r=PSD;return function(){var n=beginMicroTickScope(),i=PSD;try{return switchToZone(r,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{switchToZone(i,!1),n&&endMicroTickScope()}}}props(Promise$2.prototype,{then:thenProp,_then:function(e,t){propagateToListener(this,new Listener(null,null,e,t,PSD))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],r=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?r(e):PromiseReject(e)})):this.then(null,(function(e){return e&&e.name===t?r(e):PromiseReject(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),PromiseReject(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{stack_being_generated=!0;var e=getStack(this,[],MAX_LONG_STACKS).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{stack_being_generated=!1}}},timeout:function(e,t){var r=this;return e<1/0?new Promise$2((function(n,i){var a=setTimeout((function(){return i(new exceptions$1.Timeout(t))}),e);r.then(n,i).finally(clearTimeout.bind(null,a))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&setProp(Promise$2.prototype,Symbol.toStringTag,"Promise"),globalPSD.env=snapShot(),props(Promise$2,{all:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new Promise$2((function(t,r){0===e.length&&t([]);var n=e.length;e.forEach((function(i,a){return Promise$2.resolve(i).then((function(r){e[a]=r,--n||t(e)}),r)}))}))},resolve:function(e){if(e instanceof Promise$2)return e;if(e&&"function"==typeof e.then)return new Promise$2((function(t,r){e.then(t,r)}));var t=new Promise$2(INTERNAL$1,!0,e);return linkToPreviousPromise(t,currentFulfiller),t},reject:PromiseReject,race:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new Promise$2((function(t,r){e.map((function(e){return Promise$2.resolve(e).then(t,r)}))}))},PSD:{get:function(){return PSD},set:function(e){return PSD=e}},newPSD:newScope,usePSD:usePSD,scheduler:{get:function(){return asap$1},set:function(e){asap$1=e}},rejectionMapper:{get:function(){return rejectionMapper},set:function(e){rejectionMapper=e}},follow:function(e,t){return new Promise$2((function(r,n){return newScope((function(t,r){var n=PSD;n.unhandleds=[],n.onunhandled=r,n.finalize=callBoth((function(){var e=this;run_at_end_of_this_or_next_physical_tick((function(){0===e.unhandleds.length?t():r(e.unhandleds[0])}))}),n.finalize),e()}),t,r,n)}))}});var task={awaits:0,echoes:0,id:0},taskCounter=0,zoneStack=[],zoneEchoes=0,totalEchoes=0,zone_id_counter=0;function newScope(e,t,r,n){var i=PSD,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++zone_id_counter;var s=globalPSD.env;a.env=patchGlobalPromise?{Promise:Promise$2,PromiseProp:{value:Promise$2,configurable:!0,writable:!0},all:Promise$2.all,race:Promise$2.race,resolve:Promise$2.resolve,reject:Promise$2.reject,nthen:getPatchedPromiseThen(s.nthen,a),gthen:getPatchedPromiseThen(s.gthen,a)}:{},t&&extend(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=usePSD(a,e,r,n);return 0===a.ref&&a.finalize(),o}function incrementExpectedAwaits(){return task.id||(task.id=++taskCounter),++task.awaits,task.echoes+=ZONE_ECHO_LIMIT,task.id}function decrementExpectedAwaits(e){!task.awaits||e&&e!==task.id||(0==--task.awaits&&(task.id=0),task.echoes=task.awaits*ZONE_ECHO_LIMIT)}function onPossibleParallellAsync(e){return task.echoes&&e&&e.constructor===NativePromise?(incrementExpectedAwaits(),e.then((function(e){return decrementExpectedAwaits(),e}),(function(e){return decrementExpectedAwaits(),rejection(e)}))):e}function zoneEnterEcho(e){++totalEchoes,task.echoes&&0!=--task.echoes||(task.echoes=task.id=0),zoneStack.push(PSD),switchToZone(e,!0)}function zoneLeaveEcho(){var e=zoneStack[zoneStack.length-1];zoneStack.pop(),switchToZone(e,!1)}function switchToZone(e,t){var r=PSD;if((t?!task.echoes||zoneEchoes++&&e===PSD:!zoneEchoes||--zoneEchoes&&e===PSD)||enqueueNativeMicroTask(t?zoneEnterEcho.bind(null,e):zoneLeaveEcho),e!==PSD&&(PSD=e,r===globalPSD&&(globalPSD.env=snapShot()),patchGlobalPromise)){var n=globalPSD.env.Promise,i=e.env;nativePromiseProto.then=i.nthen,n.prototype.then=i.gthen,(r.global||e.global)&&(Object.defineProperty(_global,"Promise",i.PromiseProp),n.all=i.all,n.race=i.race,n.resolve=i.resolve,n.reject=i.reject)}}function snapShot(){var e=_global.Promise;return patchGlobalPromise?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(_global,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:nativePromiseProto.then,gthen:e.prototype.then}:{}}function usePSD(e,t,r,n,i){var a=PSD;try{return switchToZone(e,!0),t(r,n,i)}finally{switchToZone(a,!1)}}function enqueueNativeMicroTask(e){nativePromiseThen.call(resolvedNativePromise,e)}function nativeAwaitCompatibleWrap(e,t,r){return"function"!=typeof e?e:function(){var n=PSD;r&&incrementExpectedAwaits(),switchToZone(t,!0);try{return e.apply(this,arguments)}finally{switchToZone(n,!1)}}}function getPatchedPromiseThen(e,t){return function(r,n){return e.call(this,nativeAwaitCompatibleWrap(r,t,!1),nativeAwaitCompatibleWrap(n,t,!1))}}var UNHANDLEDREJECTION="unhandledrejection";function globalError(e,t){var r;try{r=t.onuncatched(e)}catch(e){}if(!1!==r)try{var n,i={promise:t,reason:e};if(_global.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(UNHANDLEDREJECTION,!0,!0),extend(n,i)):_global.CustomEvent&&extend(n=new CustomEvent(UNHANDLEDREJECTION,{detail:i}),i),n&&_global.dispatchEvent&&(dispatchEvent(n),!_global.PromiseRejectionEvent&&_global.onunhandledrejection))try{_global.onunhandledrejection(n)}catch(e){}n.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var rejection=Promise$2.reject;function Events(e){var t={},r=function(r,n){if(n){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return t[r].subscribe.apply(null,a),e}if("string"==typeof r)return t[r]};r.addEventType=a;for(var n=1,i=arguments.length;n<i;++n)a(arguments[n]);return r;function a(e,n,i){if("object"!=typeof e){var s;n||(n=reverseStoppableEventChain),i||(i=nop$1);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=n(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(n,i)}};return t[e]=r[e]=o,o}keys$1(s=e).forEach((function(e){var t=s[e];if(isArray$3(t))a(e,s[e][0],s[e][1]);else{if("asap"!==t)throw new exceptions$1.InvalidArgument("Invalid event config");var r=a(e,mirror,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){asap((function(){e.apply(null,t)}))}))}))}}))}}var DEXIE_VERSION="{version}",maxString=String.fromCharCode(65535),maxKey=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return maxString}}(),minKey=-1/0,INVALID_KEY_ARGUMENT="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",STRING_EXPECTED="String expected.",connections=[],isIEOrEdge="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),hasIEDeleteObjectStoreBug=isIEOrEdge,hangsOnDeleteLargeKeyRange=isIEOrEdge,dexieStackFrameFilter=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},dbNamesDB;function Dexie(e,t){var r,n,i,a=Dexie.dependencies,s=extend({addons:Dexie.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},t),o=s.addons,u=s.autoOpen,c=s.indexedDB,l=s.IDBKeyRange,h=this._dbSchema={},d=[],f=[],_={},p=null,m=null,g=!1,b=null,y=!1,v="readwrite",w=this,k=new Promise$2((function(e){r=e})),E=new Promise$2((function(e,t){n=t})),S=!0,A=!!getNativeGetDatabaseNamesFn(c);function T(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function C(e,t,r){var n=w._createTransaction(v,f,h);n.create(t),n._completion.catch(r);var i=n._reject.bind(n);newScope((function(){PSD.trans=n,0===e?(keys$1(h).forEach((function(e){I(t,e,h[e].primKey,h[e].indexes)})),Promise$2.follow((function(){return w.on.populate.fire(n)})).catch(i)):function(e,t,r){var n=[],i=d.filter((function(t){return t._cfg.version===e}))[0];if(!i)throw new exceptions$1.Upgrade("Dexie specification of currently installed DB version is missing");h=w._dbSchema=i._cfg.dbschema;var a=!1;return d.filter((function(t){return t._cfg.version>e})).forEach((function(e){n.push((function(){var n=h,i=e._cfg.dbschema;K(n,r),K(i,r),h=w._dbSchema=i;var s=function(e,t){var r={del:[],add:[],change:[]};for(var n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],a=t[n];if(i){var s={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==a.primKey.src)s.recreate=!0,r.change.push(s);else{var o=i.idxByName,u=a.idxByName;for(var c in o)u[c]||s.del.push(c);for(c in u){var l=o[c],h=u[c];l?l.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&r.change.push(s)}}else r.add.push([n,a])}return r}(n,i);if(s.add.forEach((function(e){I(r,e[0],e[1].primKey,e[1].indexes)})),s.change.forEach((function(e){if(e.recreate)throw new exceptions$1.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){x(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),x(t,e)})),e.del.forEach((function(e){t.deleteIndex(e)}))})),e._cfg.contentUpgrade)return a=!0,Promise$2.follow((function(){e._cfg.contentUpgrade(t)}))})),n.push((function(t){a&&hasIEDeleteObjectStoreBug||function(e,t){for(var r=0;r<t.db.objectStoreNames.length;++r){var n=t.db.objectStoreNames[r];null==e[n]&&t.db.deleteObjectStore(n)}}(e._cfg.dbschema,t)}))})),function e(){return n.length?Promise$2.resolve(n.shift()(t.idbtrans)).then(e):Promise$2.resolve()}().then((function(){!function(e,t){keys$1(e).forEach((function(r){t.db.objectStoreNames.contains(r)||I(t,r,e[r].primKey,e[r].indexes)}))}(h,r)}))}(e,n,t).catch(i)}))}function I(e,t,r,n){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach((function(e){x(i,e)})),i}function x(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function R(e,t,r){var n=arguments.length;if(n<2)throw new exceptions$1.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return r=i.pop(),[e,flatten(i),r]}function O(e,t,r){this.name=e,this.schema=t,this._tx=r,this.hook=_[e]?_[e].hook:Events(null,{creating:[hookCreatingChain,nop$1],reading:[pureFunctionChain,mirror],updating:[hookUpdatingChain,nop$1],deleting:[hookDeletingChain,nop$1]})}function M(e,t,r){return(r?hookedEventRejectHandler:eventRejectHandler)((function(r){e.push(r),t&&t()}))}function P(e,t,r,n,i){return new Promise$2((function(a,s){var o=r.length,u=o-1;if(0===o)return a();if(n){var c,l=hookedEventRejectHandler(s),h=hookedEventSuccessHandler(null);tryCatch$1((function(){for(var n=0;n<o;++n){c={onsuccess:null,onerror:null};var s=r[n];i.call(c,s[0],s[1],t);var d=e.delete(s[0]);d._hookCtx=c,d.onerror=l,d.onsuccess=n===u?hookedEventSuccessHandler(a):h}}),(function(e){throw c.onerror&&c.onerror(e),e}))}else for(var d=0;d<o;++d){var f=e.delete(r[d]);f.onerror=eventRejectHandler(s),d===u&&(f.onsuccess=wrap((function(){return a()})))}}))}function D(e,t,r,n){var i=this;this.db=w,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=Events(this,"complete","error","abort"),this.parent=n||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Promise$2((function(e,t){i._resolve=e,i._reject=t})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),rejection(e)}))}function N(e,t,r){this._ctx={table:e,index:":id"===t?null:t,or:r}}function B(e,t){var r=null,n=null;if(t)try{r=t()}catch(e){n=e}var i=e._ctx,a=i.table;this._ctx={table:a,index:i.index,isPrimKey:!i.index||a.schema.primKey.keyPath&&i.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:i.or,valueMapper:a.hook.reading.fire}}function L(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function $(e,t){return e._cfg.version-t._cfg.version}function F(e,t,r){t.forEach((function(t){var n=r[t];e.forEach((function(e){t in e||(e===D.prototype||e instanceof D?setProp(e,t,{get:function(){return this.table(t)}}):e[t]=new O(t,n))}))}))}function j(e,t,r,n,i,a){var s=wrap(a?function(e,t,n){return r(a(e),t,n)}:r,i);e.onerror||(e.onerror=eventRejectHandler(i)),e.onsuccess=trycatcher(t?function(){var r=e.result;if(r){var a=function(){r.continue()};t(r,(function(e){a=e}),n,i)&&s(r.value,r,(function(e){a=e})),a()}else n()}:function(){var t=e.result;if(t){var r=function(){t.continue()};s(t.value,t,(function(e){r=e})),r()}else n()},i)}function U(e,t){return c.cmp(e,t)}function H(e,t){return U(e,t)>0?e:t}function z(e,t){return c.cmp(e,t)}function W(e,t){return c.cmp(t,e)}function Z(e,t){return e<t?-1:e===t?0:1}function Y(e,t){return e>t?-1:e===t?0:1}function G(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function K(e,t){for(var r=t.db.objectStoreNames,n=0;n<r.length;++n){var a=r[n],s=t.objectStore(a);i="getAll"in s;for(var o=0;o<s.indexNames.length;++o){var u=s.indexNames[o],c=s.index(u).keyPath,l="string"==typeof c?c:"["+slice(c).join("+")+"]";if(e[a]){var h=e[a].idxByName[l];h&&(h.name=u)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&_global.WorkerGlobalScope&&_global instanceof _global.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i=!1)}function V(e){w.on("blocked").fire(e),connections.filter((function(e){return e.name===w.name&&e!==w&&!e._vcFired})).map((function(t){return t.on("versionchange").fire(e)}))}this.version=function(e){if(p||g)throw new exceptions$1.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=d.filter((function(t){return t._cfg.version===e}))[0];return t||(t=new T(e),d.push(t),d.sort($),S=!1,t)},extend(T.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?extend(this._cfg.storesSource,e):e;var t={};d.forEach((function(e){extend(t,e._cfg.storesSource)}));var r=this._cfg.dbschema={};return this._parseStoresSpec(t,r),h=w._dbSchema=r,[_,w,D.prototype].forEach((function(e){for(var t in e)e[t]instanceof O&&delete e[t]})),F([_,w,D.prototype,this._cfg.tables],keys$1(r),r),f=keys$1(r),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){keys$1(e).forEach((function(r){if(null!==e[r]){var n={},i=function(e){var t=[];return e.split(",").forEach((function(e){var r=(e=e.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;t.push(new IndexSpec(r,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),isArray$3(n),/\./.test(e)))})),t}(e[r]),a=i.shift();if(a.multi)throw new exceptions$1.Schema("Primary key cannot be multi-valued");a.keyPath&&setByKeyPath(n,a.keyPath,a.auto?0:a.keyPath),i.forEach((function(e){if(e.auto)throw new exceptions$1.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new exceptions$1.Schema("Index must have a name and cannot be an empty string");setByKeyPath(n,e.keyPath,e.compound?e.keyPath.map((function(){return""})):"")})),t[r]=new TableSchema(r,a,i,n)}}))}}),this._allTables=_,this._createTransaction=function(e,t,r,n){return new D(e,t,r,n)},this._whenReady=function(e){return y||PSD.letThrough?e():new Promise$2((function(e,t){if(!g){if(!u)return void t(new exceptions$1.DatabaseClosed);w.open().catch(nop$1)}k.then(e,t)})).then(e)},this.verno=0,this.open=function(){if(g||p)return k.then((function(){return m?rejection(m):w}));debug$1&&(E._stackHolder=getErrorWithStack()),g=!0,m=null,y=!1;var t=r,n=null;return Promise$2.race([E,new Promise$2((function(t,r){if(!c)throw new exceptions$1.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=S?c.open(e):c.open(e,Math.round(10*w.verno));if(!i)throw new exceptions$1.MissingAPI("IndexedDB API not available");i.onerror=eventRejectHandler(r),i.onblocked=wrap(V),i.onupgradeneeded=wrap((function(t){if(n=i.transaction,S&&!w._allowEmptyDB){i.onerror=preventDefault,n.abort(),i.result.close();var a=c.deleteDatabase(e);a.onsuccess=a.onerror=wrap((function(){r(new exceptions$1.NoSuchDatabase("Database "+e+" doesnt exist"))}))}else{n.onerror=eventRejectHandler(r),C((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,n,r)}}),r),i.onsuccess=wrap((function(){if(n=null,p=i.result,connections.push(w),S)!function(){if(w.verno=p.version/10,w._dbSchema=h={},0===(f=slice(p.objectStoreNames,0)).length)return;var e=p.transaction(safariMultiStoreFix(f),"readonly");f.forEach((function(t){for(var r=e.objectStore(t),n=r.keyPath,i=n&&"string"==typeof n&&-1!==n.indexOf("."),a=new IndexSpec(n,n||"",!1,!1,!!r.autoIncrement,n&&"string"!=typeof n,i),s=[],o=0;o<r.indexNames.length;++o){var u=r.index(r.indexNames[o]);i=(n=u.keyPath)&&"string"==typeof n&&-1!==n.indexOf(".");var c=new IndexSpec(u.name,n,!!u.unique,!!u.multiEntry,!1,n&&"string"!=typeof n,i);s.push(c)}h[t]=new TableSchema(t,a,s,{})})),F([_],keys$1(h),h)}();else if(p.objectStoreNames.length>0)try{K(h,p.transaction(safariMultiStoreFix(p.objectStoreNames),"readonly"))}catch(e){}p.onversionchange=wrap((function(e){w._vcFired=!0,w.on("versionchange").fire(e)})),A||"__dbnames"===e||dbNamesDB.dbnames.put({name:e}).catch(nop$1),t()}),r)}))]).then((function(){return b=[],Promise$2.resolve(Dexie.vip(w.on.ready.fire)).then((function e(){if(b.length>0){var t=b.reduce(promisableChain,nop$1);return b=[],Promise$2.resolve(Dexie.vip(t)).then(e)}}))})).finally((function(){b=null})).then((function(){return g=!1,w})).catch((function(e){try{n&&n.abort()}catch(e){}return g=!1,w.close(),rejection(m=e)})).finally((function(){y=!0,t()}))},this.close=function(){var e=connections.indexOf(w);if(e>=0&&connections.splice(e,1),p){try{p.close()}catch(e){}p=null}u=!1,m=new exceptions$1.DatabaseClosed,g&&n(m),k=new Promise$2((function(e){r=e})),E=new Promise$2((function(e,t){n=t}))},this.delete=function(){var t=arguments.length>0;return new Promise$2((function(r,n){if(t)throw new exceptions$1.InvalidArgument("Arguments not allowed in db.delete()");function i(){w.close();var t=c.deleteDatabase(e);t.onsuccess=wrap((function(){A||dbNamesDB.dbnames.delete(e).catch(nop$1),r()})),t.onerror=eventRejectHandler(n),t.onblocked=V}g?k.then(i):i()}))},this.backendDB=function(){return p},this.isOpen=function(){return null!==p},this.hasBeenClosed=function(){return m&&m instanceof exceptions$1.DatabaseClosed},this.hasFailed=function(){return null!==m},this.dynamicallyOpened=function(){return S},this.name=e,props(this,{tables:{get:function(){return keys$1(_).map((function(e){return _[e]}))}}}),this.on=Events(this,"populate","blocked","versionchange",{ready:[promisableChain,nop$1]}),this.on.ready.subscribe=override(this.on.ready.subscribe,(function(e){return function(t,r){Dexie.vip((function(){y?(m||Promise$2.resolve().then(t),r&&e(t)):b?(b.push(t),r&&e(t)):(e(t),r||e((function e(){w.on.ready.unsubscribe(t),w.on.ready.unsubscribe(e)})))}))}})),this.transaction=function(){var e=R.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,r){var n=PSD.trans;n&&n.db===w&&-1===e.indexOf("!")||(n=null);var i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var a=t.map((function(e){var t=e instanceof O?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}));if("r"==e||"readonly"==e)e="readonly";else{if("rw"!=e&&e!=v)throw new exceptions$1.InvalidArgument("Invalid transaction mode: "+e);e=v}if(n){if("readonly"===n.mode&&e===v){if(!i)throw new exceptions$1.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");n=null}n&&a.forEach((function(e){if(n&&-1===n.storeNames.indexOf(e)){if(!i)throw new exceptions$1.SubTransaction("Table "+e+" not included in parent transaction.");n=null}})),i&&n&&!n.active&&(n=null)}}catch(e){return n?n._promise(null,(function(t,r){r(e)})):rejection(e)}return n?n._promise(e,s,"lock"):PSD.trans?usePSD(PSD.transless,(function(){return w._whenReady(s)})):w._whenReady(s);function s(){return Promise$2.resolve().then((function(){var t,i=PSD.transless||PSD,s=w._createTransaction(e,a,h,n),o={trans:s,transless:i};n?s.idbtrans=n.idbtrans:s.create(),r.constructor===AsyncFunction&&incrementExpectedAwaits();var u=Promise$2.follow((function(){if(t=r.call(s,s))if(t.constructor===NativePromise){var e=decrementExpectedAwaits.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=awaitIterator(t))}),o);return(t&&"function"==typeof t.then?Promise$2.resolve(t).then((function(e){return s.active?e:rejection(new exceptions$1.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return t}))).then((function(e){return n&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),rejection(e)}))}))}},this.table=function(e){if(!hasOwn(_,e))throw new exceptions$1.InvalidTable("Table "+e+" does not exist");return _[e]},props(O.prototype,{_trans:function(e,t,r){var n=this._tx||PSD.trans;return n&&n.db===w?n===PSD.trans?n._promise(e,t,r):newScope((function(){return n._promise(e,t,r)}),{trans:n,transless:PSD.transless||PSD}):function e(t,r,n){if(y||PSD.letThrough){var i=w._createTransaction(t,r,h);try{i.create()}catch(e){return rejection(e)}return i._promise(t,(function(e,t){return newScope((function(){return PSD.trans=i,n(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(!g){if(!u)return rejection(new exceptions$1.DatabaseClosed);w.open().catch(nop$1)}return k.then((function(){return e(t,r,n)}))}(e,[this.name],t)},_idbstore:function(e,t,r){var n=this.name;return this._trans(e,(function(e,r,i){if(-1===i.storeNames.indexOf(n))throw new exceptions$1.NotFound("Table"+n+" not part of transaction");return t(e,r,i.idbtrans.objectStore(n),i)}),r)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var r=this;return this._idbstore("readonly",(function(t,n,i){var a=i.get(e);a.onerror=eventRejectHandler(n),a.onsuccess=wrap((function(){t(r.hook.reading.fire(a.result))}),n)})).then(t)},where:function(e){if("string"==typeof e)return new N(this,e);if(isArray$3(e))return new N(this,"["+e.join("+")+"]");var t=keys$1(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(r&&maxKey!==maxString)return this.where(r.name).equals(r.keyPath.map((function(t){return e[t]})));r||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var n=this.schema.idxByName,i=t.reduce((function(t,r){return[t[0]||n[r],t[0]||!n[r]?G(t[1],(function(t){return""+getByKeyPath(t,r)==""+e[r]})):t[1]]}),[null,null]),a=i[0];return a?this.where(a.name).equals(e[a.keyPath]).filter(i[1]):r?this.filter(i[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new B(new N(this,isArray$3(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new B(new N(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var r=Object.create(e.prototype);t&&applyStructure(r,t),this.schema.instanceTemplate=r;var n=function(t){if(!t)return t;var r=Object.create(e.prototype);for(var n in t)if(hasOwn(t,n))try{r[n]=t[n]}catch(e){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},defineClass:function(e){return this.mapToClass(Dexie.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===nop$1?this._idbstore(v,(function(t,r,n,i){t(P(n,i,e,!1,nop$1))})):this.where(":id").anyOf(e).delete().then((function(){}))},bulkPut:function(e,t){var r=this;return this._idbstore(v,(function(n,i,a){if(!a.keyPath&&!r.schema.primKey.auto&&!t)throw new exceptions$1.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(a.keyPath&&t)throw new exceptions$1.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new exceptions$1.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return n();var s,o,u=function(e){0===c.length?n(e):i(new BulkError(r.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=e.length,h=r;if(r.hook.creating.fire===nop$1&&r.hook.updating.fire===nop$1){o=M(c);for(var d=0,f=e.length;d<f;++d)(s=t?a.put(e[d],t[d]):a.put(e[d])).onerror=o;s.onerror=M(c,u),s.onsuccess=eventSuccessHandler(u)}else{var _=t||a.keyPath&&e.map((function(e){return getByKeyPath(e,a.keyPath)})),p=_&&arrayToObject(_,(function(t,r){return null!=t&&[t,e[r]]}));(_?h.where(":id").anyOf(_.filter((function(e){return null!=e}))).modify((function(){this.value=p[this.primKey],p[this.primKey]=null})).catch(ModifyError,(function(e){c=e.failures})).then((function(){for(var r=[],n=t&&[],i=_.length-1;i>=0;--i){var a=_[i];(null==a||p[a])&&(r.push(e[i]),t&&n.push(a),null!=a&&(p[a]=null))}return r.reverse(),t&&n.reverse(),h.bulkAdd(r,n)})).then((function(e){var t=_[_.length-1];return null!=t?t:e})):h.bulkAdd(e)).then(u).catch(BulkError,(function(e){c=c.concat(e.failures),u()})).catch(i)}}),"locked")},bulkAdd:function(e,t){var r=this,n=this.hook.creating.fire;return this._idbstore(v,(function(i,a,s,o){if(!s.keyPath&&!r.schema.primKey.auto&&!t)throw new exceptions$1.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&t)throw new exceptions$1.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new exceptions$1.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();function u(e){0===d.length?i(e):a(new BulkError(r.name+".bulkAdd(): "+d.length+" of "+f+" operations failed",d))}var c,l,h,d=[],f=e.length;if(n!==nop$1){var _,p=s.keyPath;l=M(d,null,!0),h=hookedEventSuccessHandler(null),tryCatch$1((function(){for(var r=0,i=e.length;r<i;++r){_={onerror:null,onsuccess:null};var a=t&&t[r],u=e[r],d=t?a:p?getByKeyPath(u,p):void 0,f=n.call(_,d,u,o);null==d&&null!=f&&(p?setByKeyPath(u=deepClone(u),p,f):a=f),(c=null!=a?s.add(u,a):s.add(u))._hookCtx=_,r<i-1&&(c.onerror=l,_.onsuccess&&(c.onsuccess=h))}}),(function(e){throw _.onerror&&_.onerror(e),e})),c.onerror=M(d,u,!0),c.onsuccess=hookedEventSuccessHandler(u)}else{l=M(d);for(var m=0,g=e.length;m<g;++m)(c=t?s.add(e[m],t[m]):s.add(e[m])).onerror=l;c.onerror=M(d,u),c.onsuccess=eventSuccessHandler(u)}}))},add:function(e,t){var r=this.hook.creating.fire;return this._idbstore(v,(function(n,i,a,s){var o={onsuccess:null,onerror:null};if(r!==nop$1){var u=null!=t?t:a.keyPath?getByKeyPath(e,a.keyPath):void 0,c=r.call(o,u,e,s);null==u&&null!=c&&(a.keyPath?setByKeyPath(e,a.keyPath,c):t=c)}try{var l=null!=t?a.add(e,t):a.add(e);l._hookCtx=o,l.onerror=hookedEventRejectHandler(i),l.onsuccess=hookedEventSuccessHandler((function(t){var r=a.keyPath;r&&setByKeyPath(e,r,t),n(t)}))}catch(e){throw o.onerror&&o.onerror(e),e}}))},put:function(e,t){var r=this,n=this.hook.creating.fire,i=this.hook.updating.fire;if(n!==nop$1||i!==nop$1){var a=this.schema.primKey.keyPath,s=void 0!==t?t:a&&getByKeyPath(e,a);return null==s?this.add(e):(e=deepClone(e),this._trans(v,(function(){return r.where(":id").equals(s).modify((function(){this.value=e})).then((function(n){return 0===n?r.add(e,t):s}))}),"locked"))}return this._idbstore(v,(function(r,n,i){var a=void 0!==t?i.put(e,t):i.put(e);a.onerror=eventRejectHandler(n),a.onsuccess=wrap((function(t){var n=i.keyPath;n&&setByKeyPath(e,n,t.target.result),r(a.result)}))}))},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(v,(function(t,r,n){var i=n.delete(e);i.onerror=eventRejectHandler(r),i.onsuccess=wrap((function(){t(i.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(v,(function(e,t,r){var n=r.clear();n.onerror=eventRejectHandler(t),n.onsuccess=wrap((function(){e(n.result)}))}))},update:function(e,t){if("object"!=typeof t||isArray$3(t))throw new exceptions$1.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||isArray$3(e))return this.where(":id").equals(e).modify(t);keys$1(t).forEach((function(r){setByKeyPath(e,r,t[r])}));var r=getByKeyPath(e,this.schema.primKey.keyPath);return void 0===r?rejection(new exceptions$1.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(t)}}),props(D.prototype,{_lock:function(){return assert(!PSD.global),++this._reculock,1!==this._reculock||PSD.global||(PSD.lockOwnerFor=this),this},_unlock:function(){if(assert(!PSD.global),0==--this._reculock)for(PSD.global||(PSD.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{usePSD(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&PSD.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(assert(!this.idbtrans),!e&&!p)switch(m&&m.name){case"DatabaseClosedError":throw new exceptions$1.DatabaseClosed(m);case"MissingAPIError":throw new exceptions$1.MissingAPI(m.message,m);default:throw new exceptions$1.OpenFailed(m)}if(!this.active)throw new exceptions$1.TransactionInactive;return assert(null===this._completion._state),(e=this.idbtrans=e||p.transaction(safariMultiStoreFix(this.storeNames),this.mode)).onerror=wrap((function(r){preventDefault(r),t._reject(e.error)})),e.onabort=wrap((function(r){preventDefault(r),t.active&&t._reject(new exceptions$1.Abort(e.error)),t.active=!1,t.on("abort").fire(r)})),e.oncomplete=wrap((function(){t.active=!1,t._resolve()})),this},_promise:function(e,t,r){var n=this;if(e===v&&this.mode!==v)return rejection(new exceptions$1.ReadOnly("Transaction is readonly"));if(!this.active)return rejection(new exceptions$1.TransactionInactive);if(this._locked())return new Promise$2((function(i,a){n._blockedFuncs.push([function(){n._promise(e,t,r).then(i,a)},PSD])}));if(r)return newScope((function(){var e=new Promise$2((function(e,r){n._lock();var i=t(e,r,n);i&&i.then&&i.then(e,r)}));return e.finally((function(){return n._unlock()})),e._lib=!0,e}));var i=new Promise$2((function(e,r){var i=t(e,r,n);i&&i.then&&i.then(e,r)}));return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=Promise$2.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return e}));else{t._waitingFor=e,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var n=t._waitingFor;return new Promise$2((function(r,i){e.then((function(e){return t._waitingQueue.push(wrap(r.bind(null,e)))}),(function(e){return t._waitingQueue.push(wrap(i.bind(null,e)))})).finally((function(){t._waitingFor===n&&(t._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new exceptions$1.Abort),this.active=!1},tables:{get:deprecated("Transaction.tables",(function(){return _}))},table:function(e){return new O(e,w.table(e).schema,this)}}),props(N.prototype,(function(){function e(e,t,r){var n=e instanceof N?new B(e):e;return n._ctx.error=r?new r(t):new TypeError(t),n}function t(e){return new B(e,(function(){return l.only("")})).limit(0)}function r(e,t,r,n,i,a){for(var s=Math.min(e.length,n.length),o=-1,u=0;u<s;++u){var c=t[u];if(c!==n[u])return i(e[u],r[u])<0?e.substr(0,u)+r[u]+r.substr(u+1):i(e[u],n[u])<0?e.substr(0,u)+n[u]+r.substr(u+1):o>=0?e.substr(0,o)+t[o]+r.substr(o+1):null;i(e[u],c)<0&&(o=u)}return s<n.length&&"next"===a?e+r.substr(e.length):s<e.length&&"prev"===a?e.substr(0,r.length):o<0?null:e.substr(0,o)+n[o]+r.substr(o+1)}function n(t,n,i,a){var s,o,u,c,h,d,f,_=i.length;if(!i.every((function(e){return"string"==typeof e})))return e(t,STRING_EXPECTED);function p(e){s=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),u="next"===e?Z:Y;var t=i.map((function(e){return{lower:o(e),upper:s(e)}})).sort((function(e,t){return u(e.lower,t.lower)}));c=t.map((function(e){return e.upper})),h=t.map((function(e){return e.lower})),d=e,f="next"===e?"":a}p("next");var m=new B(t,(function(){return l.bound(c[0],h[_-1]+a)}));m._ondirectionchange=function(e){p(e)};var g=0;return m._addAlgorithm((function(e,t,i){var a=e.key;if("string"!=typeof a)return!1;var s=o(a);if(n(s,h,g))return!0;for(var l=null,p=g;p<_;++p){var m=r(a,s,c[p],h[p],u,d);null===m&&null===l?g=p+1:(null===l||u(l,m)>0)&&(l=m)}return t(null!==l?function(){e.continue(l+f)}:i),!1})),m}return{between:function(r,n,i,a){i=!1!==i,a=!0===a;try{return U(r,n)>0||0===U(r,n)&&(i||a)&&(!i||!a)?t(this):new B(this,(function(){return l.bound(r,n,!i,!a)}))}catch(t){return e(this,INVALID_KEY_ARGUMENT)}},equals:function(e){return new B(this,(function(){return l.only(e)}))},above:function(e){return new B(this,(function(){return l.lowerBound(e,!0)}))},aboveOrEqual:function(e){return new B(this,(function(){return l.lowerBound(e)}))},below:function(e){return new B(this,(function(){return l.upperBound(e,!0)}))},belowOrEqual:function(e){return new B(this,(function(){return l.upperBound(e)}))},startsWith:function(t){return"string"!=typeof t?e(this,STRING_EXPECTED):this.between(t,t+maxString,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):n(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],maxString)},equalsIgnoreCase:function(e){return n(this,(function(e,t){return e===t[0]}),[e],"")},anyOfIgnoreCase:function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return 0===e.length?t(this):n(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},startsWithAnyOfIgnoreCase:function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return 0===e.length?t(this):n(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,maxString)},anyOf:function(){var r=getArrayOf.apply(NO_CHAR_ARRAY,arguments),n=z;try{r.sort(n)}catch(t){return e(this,INVALID_KEY_ARGUMENT)}if(0===r.length)return t(this);var i=new B(this,(function(){return l.bound(r[0],r[r.length-1])}));i._ondirectionchange=function(e){n="next"===e?z:W,r.sort(n)};var a=0;return i._addAlgorithm((function(e,t,i){for(var s=e.key;n(s,r[a])>0;)if(++a===r.length)return t(i),!1;return 0===n(s,r[a])||(t((function(){e.continue(r[a])})),!1)})),i},notEqual:function(e){return this.inAnyRange([[minKey,e],[e,maxKey]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(0===t.length)return new B(this);try{t.sort(z)}catch(t){return e(this,INVALID_KEY_ARGUMENT)}var r=t.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[minKey,t]]}),null);return r.push([t[t.length-1],maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(r,n){if(0===r.length)return t(this);if(!r.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&z(e[0],e[1])<=0})))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",exceptions$1.InvalidArgument);var i=!n||!1!==n.includeLowers,a=n&&!0===n.includeUppers;var s,o=z;function u(e,t){return o(e[0],t[0])}try{(s=r.reduce((function(e,t){for(var r=0,n=e.length;r<n;++r){var i=e[r];if(U(t[0],i[1])<0&&U(t[1],i[0])>0){i[0]=(a=i[0],s=t[0],U(a,s)<0?a:s),i[1]=H(i[1],t[1]);break}}var a,s;return r===n&&e.push(t),e}),[])).sort(u)}catch(t){return e(this,INVALID_KEY_ARGUMENT)}var c=0,h=a?function(e){return z(e,s[c][1])>0}:function(e){return z(e,s[c][1])>=0},d=i?function(e){return W(e,s[c][0])>0}:function(e){return W(e,s[c][0])>=0};var f=h,_=new B(this,(function(){return l.bound(s[0][0],s[s.length-1][1],!i,!a)}));return _._ondirectionchange=function(e){"next"===e?(f=h,o=z):(f=d,o=W),s.sort(u)},_._addAlgorithm((function(e,t,r){for(var n=e.key;f(n);)if(++c===s.length)return t(r),!1;return!!function(e){return!h(e)&&!d(e)}(n)||0!==U(n,s[c][1])&&0!==U(n,s[c][0])&&(t((function(){o===z?e.continue(s[c][0]):e.continue(s[c][1])})),!1)})),_},startsWithAnyOf:function(){var r=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return r.every((function(e){return"string"==typeof e}))?0===r.length?t(this):this.inAnyRange(r.map((function(e){return[e,e+maxString]}))):e(this,"startsWithAnyOf() only works with strings")}}})),props(B.prototype,(function(){function e(e,t){e.filter=G(e.filter,t)}function t(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return G(n(),t())}:t,e.justLimit=r&&!n}function r(e,t){if(e.isPrimKey)return t;var r=e.table.schema.idxByName[e.index];if(!r)throw new exceptions$1.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(r.name)}function n(e,t){var n=r(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function a(e,t,r,i,a){var s=e.replayFilter?G(e.filter,e.replayFilter()):e.filter;e.or?function(){var o={},u=0;function c(){2==++u&&r()}function l(e,r,n){if(!s||s(r,n,c,i)){var a=r.primaryKey,u=""+a;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(a)),hasOwn(o,u)||(o[u]=!0,t(e,r,n))}}e.or._iterate(l,c,i,a),j(n(e,a),e.algorithm,l,c,i,!e.keysOnly&&e.valueMapper)}():j(n(e,a),G(e.algorithm,s),t,r,i,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var r=this._ctx;return r.error?r.table._trans(null,rejection.bind(null,r.error)):r.table._idbstore("readonly",e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,rejection.bind(null,t.error)):t.table._idbstore(v,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=G(t.algorithm,e)},_iterate:function(e,t,r,n){return a(this._ctx,e,t,r,n)},clone:function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&extend(r,e),t._ctx=r,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read((function(r,n,i){a(t,e,r,n,i)}))},count:function(e){var t=this._ctx;if(L(t,!0))return this._read((function(e,n,i){var a=r(t,i),s=t.range?a.count(t.range):a.count();s.onerror=eventRejectHandler(n),s.onsuccess=function(r){e(Math.min(r.target.result,t.limit))}}),e);var n=0;return this._read((function(e,r,i){a(t,(function(){return++n,!1}),(function(){e(n)}),r,i)}),e)},sortBy:function(e,t){var r=e.split(".").reverse(),n=r[0],i=r.length-1;function a(e,t){return t?a(e[r[t]],t-1):e[n]}var s="next"===this._ctx.dir?1:-1;function o(e,t){var r=a(e,i),n=a(t,i);return r<n?-s:r>n?s:0}return this.toArray((function(e){return e.sort(o)})).then(t)},toArray:function(e){var t=this._ctx;return this._read((function(e,n,s){if(i&&"next"===t.dir&&L(t,!0)&&t.limit>0){var o=t.table.hook.reading.fire,u=r(t,s),c=t.limit<1/0?u.getAll(t.range,t.limit):u.getAll(t.range);c.onerror=eventRejectHandler(n),c.onsuccess=eventSuccessHandler(o===mirror?e:function(t){try{e(t.map(o))}catch(e){n(e)}})}else{var l=[];a(t,(function(e){l.push(e)}),(function(){e(l)}),n,s)}}),e)},offset:function(e){var r=this._ctx;return e<=0?this:(r.offset+=e,L(r)?t(r,(function(){var t=e;return function(e,r){return 0===t||(1===t?(--t,!1):(r((function(){e.advance(t),t=0})),!1))}})):t(r,(function(){var t=e;return function(){return--t<0}})),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),t(this._ctx,(function(){var t=e;return function(e,r,n){return--t<=0&&r(n),t>=0}}),!0),this},until:function(t,r){return e(this._ctx,(function(e,n,i){return!t(e.value)||(n(i),r)})),this},first:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){var r,n;return e(this._ctx,(function(e){return t(e.value)})),r=this._ctx,n=t,r.isMatch=G(r.isMatch,n),this},and:function(e){return this.filter(e)},or:function(e){return new N(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,r){e(r.key,r)}))},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,r){e(r.primaryKey,r)}))},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.key)})).then((function(){return r})).then(e)},primaryKeys:function(e){var t=this._ctx;if(i&&"next"===t.dir&&L(t,!0)&&t.limit>0)return this._read((function(e,n,i){var a=r(t,i),s=t.limit<1/0?a.getAllKeys(t.range,t.limit):a.getAllKeys(t.range);s.onerror=eventRejectHandler(n),s.onsuccess=eventSuccessHandler(e)})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var n={};return e(this._ctx,(function(e){var t=e.primaryKey.toString(),r=hasOwn(n,t);return n[t]=!0,!r})),this},modify:function(e){var t=this,r=this._ctx.table.hook,n=r.updating.fire,i=r.deleting.fire;return this._write((function(r,a,s,o){var u;if("function"==typeof e)u=n===nop$1&&i===nop$1?e:function(t){var r=deepClone(t);if(!1===e.call(this,t,this))return!1;if(hasOwn(this,"value")){var a=getObjectDiff(r,this.value),s=n.call(this,a,this.primKey,r,o);s&&(t=this.value,keys$1(s).forEach((function(e){setByKeyPath(t,e,s[e])})))}else i.call(this,this.primKey,t,o)};else if(n===nop$1){var c=keys$1(e),l=c.length;u=function(t){for(var r=!1,n=0;n<l;++n){var i=c[n],a=e[i];getByKeyPath(t,i)!==a&&(setByKeyPath(t,i,a),r=!0)}return r}}else{var h=e;e=shallowClone(h),u=function(t){var r=!1,i=n.call(this,e,this.primKey,deepClone(t),o);return i&&extend(e,i),keys$1(e).forEach((function(n){var i=e[n];getByKeyPath(t,n)!==i&&(setByKeyPath(t,n,i),r=!0)})),i&&(e=shallowClone(h)),r}}var d=0,f=0,_=!1,p=[],m=[],g=null;function b(e){return e&&(p.push(e),m.push(g)),a(new ModifyError("Error modifying one or more objects",p,f,m))}function y(){_&&f+p.length===d&&(p.length>0?b():r(f))}t.clone().raw()._iterate((function(e,t){g=t.primaryKey;var r={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function n(e){return p.push(e),m.push(r.primKey),y(),!0}if(!1!==u.call(r,e,r)){var i=!hasOwn(r,"value");++d,tryCatch$1((function(){var e=i?t.delete():t.update(r.value);e._hookCtx=r,e.onerror=hookedEventRejectHandler(n),e.onsuccess=hookedEventSuccessHandler((function(){++f,y()}))}),n)}else r.onsuccess&&r.onsuccess(r.value)}),(function(){_=!0,y()}),b,s)}))},delete:function(){var e=this,t=this._ctx,r=t.range,n=t.table.hook.deleting.fire,i=n!==nop$1;if(!i&&L(t)&&(t.isPrimKey&&!hangsOnDeleteLargeKeyRange||!r))return this._write((function(e,t,n){var i=eventRejectHandler(t),a=r?n.count(r):n.count();a.onerror=i,a.onsuccess=function(){var s=a.result;tryCatch$1((function(){var t=r?n.delete(r):n.clear();t.onerror=i,t.onsuccess=function(){return e(s)}}),(function(e){return t(e)}))}}));var a=i?2e3:1e4;return this._write((function(r,s,o,u){var c=0,l=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(a).raw(),h=[],d=function(){return l.each(i?function(e,t){h.push([t.primaryKey,t.value])}:function(e,t){h.push(t.primaryKey)}).then((function(){return i?h.sort((function(e,t){return z(e[0],t[0])})):h.sort(z),P(o,u,h,i,n)})).then((function(){var e=h.length;return c+=e,h=[],e<a?c:d()}))};r(d())}))}}})),extend(this,{Collection:B,Table:O,Transaction:D,Version:T,WhereClause:N}),w.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+w.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+w.name+"'. Closing db now to resume the delete request."),w.close()})),w.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+w.name+"') was blocked"):console.warn("Upgrade '"+w.name+"' blocked by other connection holding version "+e.oldVersion/10)})),o.forEach((function(e){e(w)}))}function parseType(e){if("function"==typeof e)return new e;if(isArray$3(e))return[parseType(e[0])];if(e&&"object"==typeof e){var t={};return applyStructure(t,e),t}return e}function applyStructure(e,t){return keys$1(t).forEach((function(r){var n=parseType(t[r]);e[r]=n})),e}function hookedEventSuccessHandler(e){return wrap((function(t){var r=t.target,n=r._hookCtx,i=n.value||r.result,a=n&&n.onsuccess;a&&a(i),e&&e(i)}),e)}function eventRejectHandler(e){return wrap((function(t){return preventDefault(t),e(t.target.error),!1}))}function eventSuccessHandler(e){return wrap((function(t){e(t.target.result)}))}function hookedEventRejectHandler(e){return wrap((function(t){var r=t.target,n=r.error,i=r._hookCtx,a=i&&i.onerror;return a&&a(n),preventDefault(t),e(n),!1}))}function preventDefault(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function awaitIterator(e){var t=function(t){return e.next(t)},r=i(t),n=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),a=i.value;return i.done?a:a&&"function"==typeof a.then?a.then(r,n):isArray$3(a)?Promise$2.all(a).then(r,n):r(a)}}return i(t)()}function IndexSpec(e,t,r,n,i,a,s){this.name=e,this.keyPath=t,this.unique=r,this.multi=n,this.auto=i,this.compound=a,this.dotted=s;var o="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(r?"&":"")+(n?"*":"")+(i?"++":"")+o}function TableSchema(e,t,r,n){this.name=e,this.primKey=t||new IndexSpec,this.indexes=r||[new IndexSpec],this.instanceTemplate=n,this.mappedClass=null,this.idxByName=arrayToObject(r,(function(e){return[e.name,e]}))}function safariMultiStoreFix(e){return 1===e.length?e[0]:e}function getNativeGetDatabaseNamesFn(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}setDebug(debug$1,dexieStackFrameFilter),props(Dexie,fullNameExceptions),props(Dexie,{delete:function(e){var t=new Dexie(e),r=t.delete();return r.onblocked=function(e){return t.on("blocked",e),this},r},exists:function(e){return new Dexie(e).open().then((function(e){return e.close(),!0})).catch(Dexie.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(e){var t=getNativeGetDatabaseNamesFn(Dexie.dependencies.indexedDB);return t?new Promise$2((function(e,r){var n=t();n.onsuccess=function(t){e(slice(t.target.result,0))},n.onerror=eventRejectHandler(r)})).then(e):dbNamesDB.dbnames.toCollection().primaryKeys(e)},defineClass:function(){return function(e){e&&extend(this,e)}},applyStructure:applyStructure,ignoreTransaction:function(e){return PSD.trans?usePSD(PSD.transless,e):e()},vip:function(e){return newScope((function(){return PSD.letThrough=!0,e()}))},async:function(e){return function(){try{var t=awaitIterator(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Promise$2.resolve(t)}catch(e){return rejection(e)}}},spawn:function(e,t,r){try{var n=awaitIterator(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:Promise$2.resolve(n)}catch(e){return rejection(e)}},currentTransaction:{get:function(){return PSD.trans||null}},waitFor:function(e,t){var r=Promise$2.resolve("function"==typeof e?Dexie.ignoreTransaction(e):e).timeout(t||6e4);return PSD.trans?PSD.trans.waitFor(r):r},Promise:Promise$2,debug:{get:function(){return debug$1},set:function(e){setDebug(e,"dexie"===e?function(){return!0}:dexieStackFrameFilter)}},derive:derive,extend:extend,props:props,override:override,Events:Events,getByKeyPath:getByKeyPath,setByKeyPath:setByKeyPath,delByKeyPath:delByKeyPath,shallowClone:shallowClone,deepClone:deepClone,getObjectDiff:getObjectDiff,asap:asap,maxKey:maxKey,minKey:minKey,addons:[],connections:connections,MultiModifyError:exceptions$1.Modify,errnames:errnames,IndexSpec:IndexSpec,TableSchema:TableSchema,dependencies:function(){try{return{indexedDB:_global.indexedDB||_global.mozIndexedDB||_global.webkitIndexedDB||_global.msIndexedDB,IDBKeyRange:_global.IDBKeyRange||_global.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:DEXIE_VERSION,version:DEXIE_VERSION.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,r){return e+t/Math.pow(10,2*r)})),default:Dexie,Dexie:Dexie}),Promise$2.rejectionMapper=mapError,dbNamesDB=new Dexie("__dbnames"),dbNamesDB.version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==_global.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach((function(e){return dbNamesDB.dbnames.put({name:e}).catch(nop$1)})),localStorage.removeItem("Dexie.DatabaseNames"))}catch(e){}}();const SETTINGS_ID=0,DB_NAME="stellerator-ng",DEFAULT_SETTINGS={cpuEmulation:"cycle",volume:80,audioEmulation:"pcm",smoothScaling:!0,phosphorEmulation:!0,gammaCorrection:1,videoSync:!0,touchControls:void 0,leftHanded:!1,virtualJoystickSensitivity:10,uiMode:void 0,uiSize:100};class Database extends Dexie{constructor(){super(DB_NAME),this.version(1).stores({cartridges:"&hash",roms:"&hash",settings:"&id"})}}let Storage=class{constructor(){this._database=new Database}getAllCartridges(){return this._database.cartridges.toArray()}insertCartridges(e){return this._database.transaction("rw",[this._database.cartridges,this._database.roms],()=>__awaiter(this,void 0,void 0,(function*(){yield Promise.all([this._database.cartridges.bulkPut(e.map(e=>e.cartridge)),this._database.roms.bulkPut(e.map(e=>({hash:e.cartridge.hash,image:e.image})))])})))}updateCartridge(e){return __awaiter(this,void 0,void 0,(function*(){return this._database.transaction("rw",[this._database.cartridges],()=>__awaiter(this,void 0,void 0,(function*(){(yield this._database.cartridges.get(e.hash))&&(yield this._database.cartridges.put(e))})))}))}deleteCartridge(e){return this._database.transaction("rw",[this._database.cartridges,this._database.roms],()=>__awaiter(this,void 0,void 0,(function*(){yield Promise.all([this._database.cartridges.delete(e),this._database.roms.delete(e)])})))}deleteAllCartridges(){return this._database.cartridges.clear()}getCartridge(e){return this._database.cartridges.get(e)}getCartridgeImage(e){return __awaiter(this,void 0,void 0,(function*(){const t=yield this._database.roms.get(e);return t&&t.image}))}getSettings(){return __awaiter(this,void 0,void 0,(function*(){const e=yield this._database.settings.get(SETTINGS_ID);return e?__rest(e,["id"]):DEFAULT_SETTINGS}))}saveSettings(e){return __awaiter(this,void 0,void 0,(function*(){yield this._database.settings.put(Object.assign(Object.assign({},e),{id:SETTINGS_ID}))}))}dropDatabase(){return __awaiter(this,void 0,void 0,(function*(){this._database.close(),yield indexedDB.deleteDatabase(DB_NAME),this._database=new Database}))}};Storage=__decorate([inversify_8()],Storage);var Storage$1=Storage;let AddCartridge=class{constructor(e){this._storage=e,this._addCartridge=()=>{this._input&&this._input.removeEventListener("change",this._onCartridgeAdded),this._input=document.createElement("input"),this._input.type="file",this._input.accept=".bin, .a26, .zip",this._input.multiple=!0,this._input.addEventListener("change",this._onCartridgeAdded),this._input.click()},this._onCartridgeAdded=e=>__awaiter(this,void 0,void 0,(function*(){const t=e.target,r=(yield Promise.all(Array.prototype.map.call(t.files,e=>this._processFile(e)))).reduce((e,t)=>e.concat(t),[]),n=Array.from(new Map(r.map(e=>[e.cartridge.hash,e])).values());yield this._storage.insertCartridges(n),this._ports.onNewCartridges_.send(Array.from(n.map(e=>e.cartridge)))})),this._input=null,this._detector=new CartridgeDetector}init(e){this._ports=e,e.addCartridge_.subscribe(this._addCartridge)}_processFile(e){return __awaiter(this,void 0,void 0,(function*(){try{const t=yield new Promise((t,r)=>{const n=new FileReader;n.addEventListener("load",()=>t(new Uint8Array(n.result))),n.addEventListener("error",()=>r(n.error)),n.readAsArrayBuffer(e)});if(e.name.match(/.zip$/i)){const e=new lib$2;return yield e.loadAsync(t),yield Promise.all(e.file(/\.(bin|a26)$/i).filter(e=>!e.dir).map(e=>e.async("uint8array").then(t=>this._createCartridge(e.name.replace(/.*\//,""),t))))}return[this._createCartridge(e.name,t)]}catch(e){return[]}}))}_createCartridge(e,t){const r=calculateFromUint8Array(t),n=e.replace(/\.[^\.]*$/,"");return{cartridge:{hash:r,name:n,tvMode:this._tvModeFromName(n),cartridgeType:this._detector.detectCartridgeType(t),emulatePaddles:!1,volume:100},image:t}}_tvModeFromName(e){return e.match(/[\W\-_]pal\d*[\W\-_]/i)?"pal":e.match(/[\W\-_]secam\d*[\W\-_]/i)?"secam":"ntsc"}};AddCartridge=__decorate([inversify_8(),__param(0,inversify_11(Storage$1)),__metadata("design:paramtypes",[Storage$1])],AddCartridge);var AddCartridge$1=AddCartridge,Mutex_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._queue=[],this._pending=!1}return e.prototype.isLocked=function(){return this._pending},e.prototype.acquire=function(){var e=this,t=new Promise((function(t){return e._queue.push(t)}));return this._pending||this._dispatchNext(),t},e.prototype.runExclusive=function(e){return this.acquire().then((function(t){var r;try{r=e()}catch(e){throw t(),e}return Promise.resolve(r).then((function(e){return t(),e}),(function(e){throw t(),e}))}))},e.prototype._dispatchNext=function(){this._queue.length>0?(this._pending=!0,this._queue.shift()(this._dispatchNext.bind(this))):this._pending=!1},e}();t.default=r}));unwrapExports(Mutex_1);var lib$4=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Mutex=Mutex_1.default}));unwrapExports(lib$4);var lib_1$1=lib$4.Mutex,EmulationServiceInterface;!function(e){let t;!function(e){e.stopped="stopped",e.running="running",e.paused="paused",e.error="error"}(t=e.State||(e.State={}))}(EmulationServiceInterface||(EmulationServiceInterface={}));var RpcProvider_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=0),this._dispatch=e,this._rpcTimeout=t,this.error=new lib$3.Event,this._rpcHandlers={},this._signalHandlers={},this._pendingTransactions={},this._nextTransactionId=0}return e.prototype.dispatch=function(t){var r=t;switch(r.type){case e.MessageType.signal:return this._handleSignal(r);case e.MessageType.rpc:return this._handeRpc(r);case e.MessageType.internal:return this._handleInternal(r);default:this._raiseError("invalid message type "+r.type)}},e.prototype.rpc=function(t,r,n){var i=this,a=this._nextTransactionId++;return this._dispatch({type:e.MessageType.rpc,transactionId:a,id:t,payload:r},n||void 0),new Promise((function(e,t){var r=i._pendingTransactions[a]={id:a,resolve:e,reject:t};i._rpcTimeout>0&&(i._pendingTransactions[a].timeoutHandle=setTimeout((function(){return i._transactionTimeout(r)}),i._rpcTimeout))}))},e.prototype.signal=function(t,r,n){return this._dispatch({type:e.MessageType.signal,id:t,payload:r},n||void 0),this},e.prototype.registerRpcHandler=function(e,t){if(this._rpcHandlers[e])throw new Error("rpc handler for "+e+" already registered");return this._rpcHandlers[e]=t,this},e.prototype.registerSignalHandler=function(e,t){return this._signalHandlers[e]||(this._signalHandlers[e]=[]),this._signalHandlers[e].push(t),this},e.prototype.deregisterRpcHandler=function(e,t){return this._rpcHandlers[e]&&delete this._rpcHandlers[e],this},e.prototype.deregisterSignalHandler=function(e,t){return this._signalHandlers[e]&&(this._signalHandlers[e]=this._signalHandlers[e].filter((function(e){return t!==e}))),this},e.prototype._raiseError=function(t){this.error.dispatch(new Error(t)),this._dispatch({type:e.MessageType.internal,id:"error",payload:t})},e.prototype._handleSignal=function(e){if(!this._signalHandlers[e.id])return this._raiseError("invalid signal "+e.id);this._signalHandlers[e.id].forEach((function(t){return t(e.payload)}))},e.prototype._handeRpc=function(t){var r=this;if(!this._rpcHandlers[t.id])return this._raiseError("invalid rpc "+t.id);Promise.resolve(this._rpcHandlers[t.id](t.payload)).then((function(n){return r._dispatch({type:e.MessageType.internal,id:"resolve_transaction",transactionId:t.transactionId,payload:n})}),(function(n){return r._dispatch({type:e.MessageType.internal,id:"reject_transaction",transactionId:t.transactionId,payload:n})}))},e.prototype._handleInternal=function(e){var t=void 0!==e.transactionId?this._pendingTransactions[e.transactionId]:void 0;switch(e.id){case"resolve_transaction":if(!t||void 0===e.transactionId)return this._raiseError("no pending transaction with id "+e.transactionId);t.resolve(e.payload),this._clearTransaction(this._pendingTransactions[e.transactionId]);break;case"reject_transaction":if(!t||void 0===e.transactionId)return this._raiseError("no pending transaction with id "+e.transactionId);this._pendingTransactions[e.transactionId].reject(e.payload),this._clearTransaction(this._pendingTransactions[e.transactionId]);break;case"error":this.error.dispatch(new Error("remote error: "+e.payload));break;default:this._raiseError("unhandled internal message "+e.id)}},e.prototype._transactionTimeout=function(e){e.reject("transaction timed out"),this._raiseError("transaction "+e.id+" timed out"),delete this._pendingTransactions[e.id]},e.prototype._clearTransaction=function(e){void 0!==e.timeoutHandle&&clearTimeout(e.timeoutHandle),delete this._pendingTransactions[e.id]},e}();!function(e){!function(e){e[e.signal=0]="signal",e[e.rpc=1]="rpc",e[e.internal=2]="internal"}(e.MessageType||(e.MessageType={}))}(r||(r={})),t.default=r}));unwrapExports(RpcProvider_1);var lib$5=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RpcProvider=RpcProvider_1.default}));unwrapExports(lib$5);var lib_1$2=lib$5.RpcProvider;class EmulationContext{constructor(e,t,r,n){if(this._videoProxy=e,this._controlProxy=t,this._waveformChannels=r,this._pcmChannel=n,this._config=null,2!==this._waveformChannels.length)throw new Error(`invalid channel count ${this._waveformChannels.length}`)}setConfig(e){this._config=e}getConfig(){return this._config}getVideo(){return this._videoProxy}getJoystick(e){return this._controlProxy.getJoystick(e)}getControlPanel(){return this._controlProxy.getControlPanel()}getPaddle(e){return this._controlProxy.getPaddle(e)}getWaveformChannels(){return this._waveformChannels}getPCMChannel(){return this._pcmChannel}getVideoProxy(){return this._videoProxy}}const RPC_TYPE={emulationPause:"emulation/pause",emulationReset:"emulation/reset",emulationResume:"emulation/resume",emulationSetRateLimit:"emulation/setRateLimit",emulationStart:"emulation/start",emulationStop:"emulation/stop",emulationFetchLastError:"emulation/fetchLastError",getVideoParameters:"video/getParameters",getWaveformAudioParameters:e=>`audio/waveform/getParameters/${e}`,getPCMAudioParameters:e=>`audio/pcm/getParameters/${e}`,setup:"/setup"};Object.freeze(RPC_TYPE);const SIGNAL_TYPE={emulationError:"emulation/error",emulationFrequencyUpdate:"emulation/frequencyUpdate",videoNewFrame:"video/newFrame",videoReturnSurface:"video/returnSurface",controlStateUpdate:"control/stateUpdate",waveformAudioVolumeChange:"audio/waveform/volumeChange",waveformAudioBufferChange:"audio/waveform/bufferChange",pcmAudioNewFrame:e=>`audio/pcm/newFrame/${e}`,pcmAudioTogglePause:e=>`audio/pcm/togglePause/${e}`,pcmAudioReturnFrame:e=>`audio/pcm/returnFrame/${e}`,audioStop:"audio/stop"};Object.freeze(SIGNAL_TYPE);class VideoProxy{constructor(e){this._rpc=e,this.newFrame=new lib_1,this._active=!1,this._width=0,this._height=0,this._ids=null}init(){this._rpc.registerSignalHandler(SIGNAL_TYPE.videoNewFrame,this._onNewFrame.bind(this))}start(){return __awaiter(this,void 0,void 0,(function*(){this._active&&this.stop();const e=yield this._rpc.rpc(RPC_TYPE.getVideoParameters);this._active=!0,this._width=e.width,this._height=e.height,this._ids=new Set}))}stop(){this._active=!1,this._ids=null}getWidth(){return this._width}getHeight(){return this._height}_onNewFrame(e){if(!this._active)return void console.warn("video proxy deactivated: ignoring frame");if(this._width!==e.width||this._height!==e.height)return void console.warn("surface dimensions do not match; ignoring frame");this._ids.add(e.id);const t=new ImageData(new Uint8ClampedArray(e.buffer),e.width,e.height);this.newFrame.dispatch({get:()=>t,release:()=>{this._active&&this._ids.has(e.id)&&this._rpc.signal(SIGNAL_TYPE.videoReturnSurface,{id:e.id,buffer:e.buffer},[e.buffer])},dispose:()=>void 0,adopt:()=>{throw new Error("adopt is not implemented")}})}}class Switch{constructor(e=!1){this._state=e,this.stateChanged=new lib_1,this.beforeRead=new lib_1}read(){return this.beforeRead.dispatch(this),this._state}peek(){return this._state}toggle(e){this._state!==e&&(this._state=e,this.stateChanged.dispatch(e))}}class DigitalJoystick{constructor(){this._left=new Switch,this._right=new Switch,this._up=new Switch,this._down=new Switch,this._fire=new Switch}getLeft(){return this._left}getRight(){return this._right}getUp(){return this._up}getDown(){return this._down}getFire(){return this._fire}}class ControlPanel{constructor(){this._selectSwitch=new Switch,this._resetButton=new Switch,this._colorSwitch=new Switch,this._difficutlyP0=new Switch,this._difficutlyP1=new Switch}getSelectSwitch(){return this._selectSwitch}getResetButton(){return this._resetButton}getColorSwitch(){return this._colorSwitch}getDifficultySwitchP0(){return this._difficutlyP0}getDifficultySwitchP1(){return this._difficutlyP1}}class Paddle{constructor(){this.valueChanged=new lib_1,this._fireSwitch=new Switch,this._value=.5}setValue(e){this._value=e,this.valueChanged.dispatch(e)}getValue(){return this._value}getFire(){return this._fireSwitch}}class ControlProxy{constructor(e){this._rpc=e,this._joysticks=new Array(2),this._paddles=new Array(4),this._controlPanel=new ControlPanel;for(let e=0;e<2;e++)this._joysticks[e]=new DigitalJoystick;for(let e=0;e<4;e++)this._paddles[e]=new Paddle}sendUpdate(){this._rpc.signal(SIGNAL_TYPE.controlStateUpdate,{joystickState:this._joysticks.map(ControlProxy._joystickState),paddleState:this._paddles.map(ControlProxy._paddleState),controlPanelState:ControlProxy._controlPanelState(this._controlPanel)})}getJoystick(e){if(e<0||e>1)throw new Error(`invalid joystick index ${e}`);return this._joysticks[e]}getControlPanel(){return this._controlPanel}getPaddle(e){if(e<0||e>3)throw new Error(`invalid paddle index ${e}`);return this._paddles[e]}static _joystickState(e){return{up:e.getUp().read(),down:e.getDown().read(),left:e.getLeft().read(),right:e.getRight().read(),fire:e.getFire().read()}}static _paddleState(e){return{value:e.getValue(),fire:e.getFire().read()}}static _controlPanelState(e){return{difficulty0:e.getDifficultySwitchP0().read(),difficulty1:e.getDifficultySwitchP1().read(),select:e.getSelectSwitch().read(),reset:e.getResetButton().read(),color:e.getColorSwitch().read()}}}var CpuInterface;!function(e){e.State=class{constructor(){this.a=0,this.x=0,this.y=0,this.s=0,this.p=0,this.flags=0,this.irq=!1,this.nmi=!1}}}(CpuInterface||(CpuInterface={}));class ResultImpl{constructor(){this.cycleType=0,this.address=0,this.value=0,this.pollInterrupts=!1,this.nextStep=null}read(e,t){return this.cycleType=0,this.address=t,this.nextStep=e,this}write(e,t,r){return this.cycleType=1,this.address=t,this.value=r,this.nextStep=e,this}poll(e){return this.pollInterrupts=e,this}}const immutables=Symbol("immutable properties");function freezeImmutables(e){const t=e[immutables];if(t)for(const r of t)Object.defineProperty(e,r,{writable:!1,configurable:!1})}function Immutable(e,t){e[immutables]||Object.defineProperty(e,immutables,{value:[],writable:!1,enumerable:!1}),e[immutables].push(t)}class Boot{constructor(e){this.reset=()=>this._result.read(this._pre1Step,255),this._pre1Step=()=>this._result.read(this._pre2Step,255),this._pre2Step=()=>this._result.read(this._stack1Step,256),this._stack1Step=()=>this._result.read(this._stack2Step,511),this._stack2Step=()=>(this._state.s=253,this._result.read(this._stack3Step,510)),this._stack3Step=()=>this._result.read(this._readTargetLoStep,65532),this._readTargetLoStep=e=>(this._targetAddress=e,this._result.read(this._readTargetHiStep,65533)),this._readTargetHiStep=e=>(this._targetAddress|=e<<8,this._state.p=this._targetAddress,null),this._targetAddress=0,this._result=new ResultImpl,this._state=e,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Boot.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Boot.prototype,"_pre1Step",void 0),__decorate([Immutable,__metadata("design:type",Object)],Boot.prototype,"_pre2Step",void 0),__decorate([Immutable,__metadata("design:type",Object)],Boot.prototype,"_stack1Step",void 0),__decorate([Immutable,__metadata("design:type",Object)],Boot.prototype,"_stack2Step",void 0),__decorate([Immutable,__metadata("design:type",Object)],Boot.prototype,"_stack3Step",void 0),__decorate([Immutable,__metadata("design:type",Object)],Boot.prototype,"_readTargetLoStep",void 0),__decorate([Immutable,__metadata("design:type",Object)],Boot.prototype,"_readTargetHiStep",void 0),__decorate([Immutable,__metadata("design:type",Object)],Boot.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Boot.prototype,"_state",void 0);const boot=e=>new Boot(e);class Interrupt{constructor(e,t,r){this.reset=()=>this._result.read(this._dummyRead,this._state.p),this._dummyRead=()=>(this._isBrk&&(this._state.p=this._state.p+1&65535),this._result.write(this._pushPch,256+this._state.s,this._state.p>>>8)),this._pushPch=()=>(this._state.s=this._state.s-1&255,this._result.write(this._pushPcl,256+this._state.s,255&this._state.p).poll(!0)),this._pushPcl=()=>(this._state.s=this._state.s-1&255,this._vector=this._state.nmi?65530:this._defaultVector,this._result.write(this._pushFlags,256+this._state.s,this._isBrk?16|this._state.flags:-17&this._state.flags)),this._pushFlags=()=>(this._state.s=this._state.s-1&255,this._result.read(this._fetchPcl,this._vector)),this._fetchPcl=e=>(this._state.flags|=4,this._state.p=e,this._result.read(this._fetchPch,++this._vector)),this._fetchPch=e=>(this._state.p=this._state.p|e<<8,this._state.nmi=this._state.irq=!1,null),this._vector=0,this._result=new ResultImpl,this._state=e,this._defaultVector=t,this._isBrk=r,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Interrupt.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Interrupt.prototype,"_dummyRead",void 0),__decorate([Immutable,__metadata("design:type",Object)],Interrupt.prototype,"_pushPch",void 0),__decorate([Immutable,__metadata("design:type",Object)],Interrupt.prototype,"_pushPcl",void 0),__decorate([Immutable,__metadata("design:type",Object)],Interrupt.prototype,"_pushFlags",void 0),__decorate([Immutable,__metadata("design:type",Object)],Interrupt.prototype,"_fetchPcl",void 0),__decorate([Immutable,__metadata("design:type",Object)],Interrupt.prototype,"_fetchPch",void 0),__decorate([Immutable,__metadata("design:type",Object)],Interrupt.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Interrupt.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Number)],Interrupt.prototype,"_defaultVector",void 0),__decorate([Immutable,__metadata("design:type",Boolean)],Interrupt.prototype,"_isBrk",void 0);const brk=e=>new Interrupt(e,65534,!0),irq=e=>new Interrupt(e,65534,!1),nmi=e=>new Interrupt(e,65530,!1);class Instruction{constructor(e,t,r=t){this.operation=e,this.addressingMode=t,this.effectiveAddressingMode=r}getSize(){switch(this.effectiveAddressingMode){case 1:case 2:case 6:case 9:case 8:case 11:case 5:return 2;case 3:case 7:case 10:case 4:return 3;default:return 1}}}!function(e){let t;!function(e){e[e.adc=0]="adc",e[e.and=1]="and",e[e.asl=2]="asl",e[e.bcc=3]="bcc",e[e.bcs=4]="bcs",e[e.beq=5]="beq",e[e.bit=6]="bit",e[e.bmi=7]="bmi",e[e.bne=8]="bne",e[e.bpl=9]="bpl",e[e.brk=10]="brk",e[e.bvc=11]="bvc",e[e.bvs=12]="bvs",e[e.clc=13]="clc",e[e.cld=14]="cld",e[e.cli=15]="cli",e[e.clv=16]="clv",e[e.cmp=17]="cmp",e[e.cpx=18]="cpx",e[e.cpy=19]="cpy",e[e.dec=20]="dec",e[e.dex=21]="dex",e[e.dey=22]="dey",e[e.eor=23]="eor",e[e.inc=24]="inc",e[e.inx=25]="inx",e[e.iny=26]="iny",e[e.jmp=27]="jmp",e[e.jsr=28]="jsr",e[e.lda=29]="lda",e[e.ldx=30]="ldx",e[e.ldy=31]="ldy",e[e.lsr=32]="lsr",e[e.nop=33]="nop",e[e.ora=34]="ora",e[e.pha=35]="pha",e[e.php=36]="php",e[e.pla=37]="pla",e[e.plp=38]="plp",e[e.rol=39]="rol",e[e.ror=40]="ror",e[e.rti=41]="rti",e[e.rts=42]="rts",e[e.sbc=43]="sbc",e[e.sec=44]="sec",e[e.sed=45]="sed",e[e.sei=46]="sei",e[e.sta=47]="sta",e[e.stx=48]="stx",e[e.sty=49]="sty",e[e.tax=50]="tax",e[e.tay=51]="tay",e[e.tsx=52]="tsx",e[e.txa=53]="txa",e[e.txs=54]="txs",e[e.tya=55]="tya",e[e.dop=56]="dop",e[e.top=57]="top",e[e.alr=58]="alr",e[e.axs=59]="axs",e[e.dcp=60]="dcp",e[e.lax=61]="lax",e[e.arr=62]="arr",e[e.slo=63]="slo",e[e.aax=64]="aax",e[e.lar=65]="lar",e[e.isc=66]="isc",e[e.aac=67]="aac",e[e.atx=68]="atx",e[e.rra=69]="rra",e[e.rla=70]="rla",e[e.invalid=71]="invalid"}(t=e.OperationMap||(e.OperationMap={})),e.opcodes=new Array(256)}(Instruction||(Instruction={})),function(e){let t;!function(t){for(let t=0;t<256;t++)e.opcodes[t]=new e(71,12);let r,n,i;for(let t=0;t<8;t++){switch(t){case 0:r=34;break;case 1:r=1;break;case 2:r=23;break;case 3:r=0;break;case 4:r=47;break;case 5:r=29;break;case 6:r=17;break;case 7:r=43}for(let a=0;a<8;a++){switch(a){case 0:n=8;break;case 1:n=2;break;case 2:n=1;break;case 3:n=3;break;case 4:n=11;break;case 5:n=6;break;case 6:n=10;break;case 7:n=7}47===r&&1===n&&(n=12),71!==r&&12!==n&&(i=t<<5|a<<2|1,e.opcodes[i]=new e(r,n))}}function a(t,r,n,i){if(71!==e.opcodes[t].operation)throw new Error("entry for opcode "+t+" already exists");e.opcodes[t]=new e(r,n,i)}a(6,2,2),a(10,2,0),a(14,2,3),a(22,2,6),a(30,2,7),a(38,39,2),a(42,39,0),a(46,39,3),a(54,39,6),a(62,39,7),a(70,32,2),a(74,32,0),a(78,32,3),a(86,32,6),a(94,32,7),a(102,40,2),a(106,40,0),a(110,40,3),a(118,40,6),a(126,40,7),a(134,48,2),a(142,48,3),a(150,48,9),a(162,30,1),a(166,30,2),a(174,30,3),a(182,30,9),a(190,30,10),a(198,20,2),a(206,20,3),a(214,20,6),a(222,20,7),a(230,24,2),a(238,24,3),a(246,24,6),a(254,24,7),a(36,6,2),a(44,6,3),a(76,27,3),a(108,27,4),a(132,49,2),a(140,49,3),a(148,49,6),a(160,31,1),a(164,31,2),a(172,31,3),a(180,31,6),a(188,31,7),a(192,19,1),a(196,19,2),a(204,19,3),a(224,18,1),a(228,18,2),a(236,18,3),a(16,9,5),a(48,7,5),a(80,11,5),a(112,12,5),a(144,3,5),a(176,4,5),a(208,8,5),a(240,5,5),a(0,10,0),a(32,28,0,3),a(64,41,0),a(96,42,0),a(8,36,0),a(40,38,0),a(72,35,0),a(104,37,0),a(136,22,0),a(168,51,0),a(200,26,0),a(232,25,0),a(24,13,0),a(56,44,0),a(88,15,0),a(120,46,0),a(152,55,0),a(184,16,0),a(216,14,0),a(248,45,0),a(138,53,0),a(154,54,0),a(170,50,0),a(186,52,0),a(202,21,0),a(234,33,0),a(26,33,0),a(58,33,0),a(90,33,0),a(122,33,0),a(218,33,0),a(250,33,0),a(4,56,2),a(20,56,6),a(52,56,6),a(68,56,2),a(84,56,6),a(100,56,2),a(116,56,6),a(128,56,1),a(130,56,1),a(137,56,1),a(194,56,1),a(212,56,6),a(226,56,1),a(244,56,6),a(12,57,3),a(28,57,7),a(60,57,7),a(92,57,7),a(124,57,7),a(220,57,7),a(252,57,7),a(235,43,1),a(75,58,1),a(203,59,1),a(199,60,2),a(215,60,6),a(207,60,3),a(223,60,7),a(219,60,10),a(195,60,8),a(211,60,11),a(167,61,2),a(183,61,9),a(175,61,3),a(191,61,10),a(163,61,8),a(179,61,11),a(107,62,1),a(7,63,2),a(23,63,6),a(15,63,3),a(31,63,7),a(27,63,10),a(3,63,8),a(19,63,11),a(135,64,2),a(151,64,9),a(131,64,8),a(143,64,3),a(187,65,10),a(231,66,2),a(247,66,6),a(239,66,3),a(255,66,7),a(251,66,10),a(227,66,8),a(243,66,11),a(11,67,1),a(43,67,1),a(171,68,1),a(103,69,2),a(119,69,6),a(111,69,3),a(127,69,7),a(123,69,10),a(99,69,8),a(115,69,11),a(39,70,2),a(55,70,6),a(47,70,3),a(63,70,7),a(59,70,10),a(35,70,8),a(51,70,11)}(t=e.__init||(e.__init={}))}(Instruction||(Instruction={}));class Absolute{constructor(e,t=(()=>null)){this.reset=()=>this._result.read(this._fetchLo,this._state.p),this._fetchLo=e=>(this._operand=e,this._state.p=this._state.p+1&65535,this._result.read(this._fetchHi,this._state.p)),this._fetchHi=e=>(this._operand|=e<<8,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new ResultImpl,this._state=e,this._next=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Absolute.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Absolute.prototype,"_fetchLo",void 0),__decorate([Immutable,__metadata("design:type",Object)],Absolute.prototype,"_fetchHi",void 0),__decorate([Immutable,__metadata("design:type",Object)],Absolute.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Absolute.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],Absolute.prototype,"_next",void 0);const absolute=(e,t)=>new Absolute(e,t);class AbsoluteIndexed{constructor(e,t,r=(()=>null),n=!1){this.reset=()=>this._result.read(this._fetchLo,this._state.p),this._fetchLo=e=>(this._operand=e,this._state.p=this._state.p+1&65535,this._result.read(this._fetchHi,this._state.p)),this._fetchHi=e=>{this._operand|=e<<8,this._state.p=this._state.p+1&65535;const t=this._indexExtractor(this._state);return this._carry=(255&this._operand)+t>255,this._operand=65280&this._operand|this._operand+t&255,this._carry||this._writeOp?this._result.read(this._dereferenceAndCarry,this._operand):this._next(this._operand,this._state)},this._dereferenceAndCarry=e=>(this._carry&&(this._operand=this._operand+256&65535),this._next(this._operand,this._state)),this._operand=0,this._carry=!1,this._result=new ResultImpl,this._state=e,this._indexExtractor=t,this._next=r,this._writeOp=n,freezeImmutables(this)}static absoluteX(e,t,r){return new AbsoluteIndexed(e,e=>e.x,t,r)}static absoluteY(e,t,r){return new AbsoluteIndexed(e,e=>e.y,t,r)}}__decorate([Immutable,__metadata("design:type",Object)],AbsoluteIndexed.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],AbsoluteIndexed.prototype,"_fetchLo",void 0),__decorate([Immutable,__metadata("design:type",Object)],AbsoluteIndexed.prototype,"_fetchHi",void 0),__decorate([Immutable,__metadata("design:type",Object)],AbsoluteIndexed.prototype,"_dereferenceAndCarry",void 0),__decorate([Immutable,__metadata("design:type",Object)],AbsoluteIndexed.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],AbsoluteIndexed.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],AbsoluteIndexed.prototype,"_indexExtractor",void 0),__decorate([Immutable,__metadata("design:type",Function)],AbsoluteIndexed.prototype,"_next",void 0),__decorate([Immutable,__metadata("design:type",Boolean)],AbsoluteIndexed.prototype,"_writeOp",void 0),__decorate([Immutable,__metadata("design:type",Function),__metadata("design:paramtypes",[CpuInterface.State,Function,Boolean]),__metadata("design:returntype",AbsoluteIndexed)],AbsoluteIndexed,"absoluteX",null),__decorate([Immutable,__metadata("design:type",Function),__metadata("design:paramtypes",[CpuInterface.State,Function,Boolean]),__metadata("design:returntype",AbsoluteIndexed)],AbsoluteIndexed,"absoluteY",null);const absoluteX=(e,t,r)=>AbsoluteIndexed.absoluteX(e,t,r),absoluteY=(e,t,r)=>AbsoluteIndexed.absoluteY(e,t,r);class Dereference{constructor(e,t=(()=>null)){this.reset=e=>this._result.read(this._dereference,e),this._dereference=e=>this._next(e,this._state),this._result=new ResultImpl,this._next=t,this._state=e,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Dereference.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Dereference.prototype,"_dereference",void 0),__decorate([Immutable,__metadata("design:type",Object)],Dereference.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Dereference.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],Dereference.prototype,"_next",void 0);const dereference=(e,t)=>new Dereference(e,t);class Immediate{constructor(e,t=(()=>null)){this.reset=()=>this._result.read(this._fetchOperand,this._state.p),this._fetchOperand=e=>(this._operand=e,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new ResultImpl,this._state=e,this._next=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Immediate.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Immediate.prototype,"_fetchOperand",void 0),__decorate([Immutable,__metadata("design:type",Object)],Immediate.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Immediate.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],Immediate.prototype,"_next",void 0);const immediate$1=(e,t)=>new Immediate(e,t);class IndexedIndirectX{constructor(e,t=(()=>null)){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=e=>(this._address=e,this._state.p=this._state.p+1&65535,this._result.read(this._addIndex,this._address)),this._addIndex=e=>(this._address=this._address+this._state.x&255,this._result.read(this._fetchLo,this._address)),this._fetchLo=e=>(this._operand=e,this._address=this._address+1&255,this._result.read(this._fetchHi,this._address)),this._fetchHi=e=>(this._operand|=e<<8,this._next(this._operand,this._state)),this._operand=0,this._address=0,this._result=new ResultImpl,this._state=e,this._next=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectX.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectX.prototype,"_fetchAddress",void 0),__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectX.prototype,"_addIndex",void 0),__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectX.prototype,"_fetchLo",void 0),__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectX.prototype,"_fetchHi",void 0),__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectX.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],IndexedIndirectX.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],IndexedIndirectX.prototype,"_next",void 0);const indexedIndirectX=(e,t)=>new IndexedIndirectX(e,t);class IndexedIndirectY{constructor(e,t=(()=>null),r){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=e=>(this._address=e,this._state.p=this._state.p+1&65535,this._result.read(this._fetchLo,this._address)),this._fetchLo=e=>(this._operand=e,this._address=this._address+1&255,this._result.read(this._fetchHi,this._address)),this._fetchHi=e=>(this._operand|=e<<8,this._carry=(255&this._operand)+this._state.y>255,this._operand=65280&this._operand|this._operand+this._state.y&255,this._carry||this._writeOp?this._result.read(this._dereferenceAndCarry,this._operand):this._next(this._operand,this._state)),this._dereferenceAndCarry=e=>(this._carry&&(this._operand=this._operand+256&65535),this._next(this._operand,this._state)),this._operand=0,this._address=0,this._carry=!1,this._result=new ResultImpl,this._state=e,this._next=t,this._writeOp=r,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectY.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectY.prototype,"_fetchAddress",void 0),__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectY.prototype,"_fetchLo",void 0),__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectY.prototype,"_fetchHi",void 0),__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectY.prototype,"_dereferenceAndCarry",void 0),__decorate([Immutable,__metadata("design:type",Object)],IndexedIndirectY.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],IndexedIndirectY.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],IndexedIndirectY.prototype,"_next",void 0),__decorate([Immutable,__metadata("design:type",Boolean)],IndexedIndirectY.prototype,"_writeOp",void 0);const indirectIndexedY=(e,t,r)=>new IndexedIndirectY(e,t,r);class ZeroPage{constructor(e,t=(()=>null)){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=e=>(this._operand=e,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new ResultImpl,this._state=e,this._next=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],ZeroPage.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],ZeroPage.prototype,"_fetchAddress",void 0),__decorate([Immutable,__metadata("design:type",Object)],ZeroPage.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],ZeroPage.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],ZeroPage.prototype,"_next",void 0);const zeroPage=(e,t)=>new ZeroPage(e,t);class ZeroPageIndexed{constructor(e,t,r){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=e=>(this._operand=e,this._state.p=this._state.p+1&65535,this._result.read(this._addIndex,this._operand)),this._addIndex=e=>(this._operand=this._operand+this._indexExtractor(this._state)&255,this._next(this._operand,this._state)),this._operand=0,this._result=new ResultImpl,this._state=e,this._indexExtractor=t,this._next=r,freezeImmutables(this)}static zeroPageX(e,t=(()=>null)){return new ZeroPageIndexed(e,e=>e.x,t)}static zeroPageY(e,t=(()=>null)){return new ZeroPageIndexed(e,e=>e.y,t)}}__decorate([Immutable,__metadata("design:type",Object)],ZeroPageIndexed.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],ZeroPageIndexed.prototype,"_fetchAddress",void 0),__decorate([Immutable,__metadata("design:type",Object)],ZeroPageIndexed.prototype,"_addIndex",void 0),__decorate([Immutable,__metadata("design:type",Object)],ZeroPageIndexed.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],ZeroPageIndexed.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],ZeroPageIndexed.prototype,"_next",void 0),__decorate([Immutable,__metadata("design:type",Function)],ZeroPageIndexed.prototype,"_indexExtractor",void 0);const zeroPageX=(e,t)=>ZeroPageIndexed.zeroPageX(e,t),zeroPageY=(e,t)=>ZeroPageIndexed.zeroPageY(e,t);class Branch{constructor(e,t){this.reset=()=>this._result.read(this._fetchTarget,this._state.p).poll(!0),this._fetchTarget=e=>(this._operand=e,this._state.p=this._state.p+1&65535,this._predicate(this._state.flags)?this._result.read(this._firstDummyRead,this._state.p):null),this._firstDummyRead=e=>(this._target=this._state.p+(128&this._operand?this._operand-256:this._operand)&65535,(65280&this._target)==(65280&this._state.p)?(this._state.p=this._target,null):this._result.read(this._secondDummyRead,65280&this._state.p|255&this._target).poll(!0)),this._secondDummyRead=e=>(this._state.p=this._target,null),this._target=0,this._operand=0,this._result=new ResultImpl,this._state=e,this._predicate=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Branch.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Branch.prototype,"_fetchTarget",void 0),__decorate([Immutable,__metadata("design:type",Object)],Branch.prototype,"_firstDummyRead",void 0),__decorate([Immutable,__metadata("design:type",Object)],Branch.prototype,"_secondDummyRead",void 0),__decorate([Immutable,__metadata("design:type",Object)],Branch.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Branch.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],Branch.prototype,"_predicate",void 0);const branch=(e,t)=>new Branch(e,t);class Jsr{constructor(e){this.reset=()=>this._result.read(this._fetchPcl,this._state.p),this._fetchPcl=e=>(this._addressLo=e,this._state.p=this._state.p+1&65535,this._result.read(this._dummyStackRead,256+this._state.s)),this._dummyStackRead=()=>this._result.write(this._pushPch,256+this._state.s,this._state.p>>>8),this._pushPch=()=>(this._state.s=this._state.s-1&255,this._result.write(this._pushPcl,256+this._state.s,255&this._state.p)),this._pushPcl=()=>(this._state.s=this._state.s-1&255,this._result.read(this._fetchPch,this._state.p)),this._fetchPch=e=>(this._state.p=this._addressLo|e<<8,null),this._addressLo=0,this._result=new ResultImpl,this._state=e,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Jsr.prototype,"_fetchPcl",void 0),__decorate([Immutable,__metadata("design:type",Object)],Jsr.prototype,"_dummyStackRead",void 0),__decorate([Immutable,__metadata("design:type",Object)],Jsr.prototype,"_pushPch",void 0),__decorate([Immutable,__metadata("design:type",Object)],Jsr.prototype,"_pushPcl",void 0),__decorate([Immutable,__metadata("design:type",Object)],Jsr.prototype,"_fetchPch",void 0),__decorate([Immutable,__metadata("design:type",Object)],Jsr.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Jsr.prototype,"_state",void 0);const jsr=e=>new Jsr(e);class ReadModifyWrite{constructor(e,t){this.reset=e=>(this._address=e,this._result.read(this._read,e)),this._read=e=>(this._operand=e,this._result.write(this._dummyWrite,this._address,this._operand)),this._dummyWrite=e=>this._result.write(this._write,this._address,this._operation(this._operand,this._state)),this._write=()=>null,this._result=new ResultImpl,this._state=e,this._operation=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],ReadModifyWrite.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],ReadModifyWrite.prototype,"_read",void 0),__decorate([Immutable,__metadata("design:type",Object)],ReadModifyWrite.prototype,"_dummyWrite",void 0),__decorate([Immutable,__metadata("design:type",Object)],ReadModifyWrite.prototype,"_write",void 0),__decorate([Immutable,__metadata("design:type",Object)],ReadModifyWrite.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],ReadModifyWrite.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],ReadModifyWrite.prototype,"_operation",void 0);const readModifyWrite=(e,t)=>new ReadModifyWrite(e,t);class Rts{constructor(e){this.reset=()=>this._result.read(this._dummyOperandRead,this._state.p),this._dummyOperandRead=()=>this._result.read(this._dummyStackRead,256+this._state.s),this._dummyStackRead=()=>(this._state.s=this._state.s+1&255,this._result.read(this._popPcl,256+this._state.s)),this._popPcl=e=>(this._state.p=65280&this._state.p|e,this._state.s=this._state.s+1&255,this._result.read(this._popPch,256+this._state.s)),this._popPch=e=>(this._state.p=255&this._state.p|e<<8,this._result.read(this._incrementP,this._state.p)),this._incrementP=()=>(this._state.p=this._state.p+1&65535,null),this._result=new ResultImpl,this._state=e,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Rts.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rts.prototype,"_dummyOperandRead",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rts.prototype,"_dummyStackRead",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rts.prototype,"_popPcl",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rts.prototype,"_popPch",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rts.prototype,"_incrementP",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rts.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Rts.prototype,"_state",void 0);const rts=e=>new Rts(e);class NullaryOneCycle{constructor(e,t){this.reset=()=>this._result.read(this._executeOperation,this._state.p).poll(!0),this._executeOperation=()=>(this._operation(this._state),null),this._result=new ResultImpl,this._state=e,this._operation=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],NullaryOneCycle.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],NullaryOneCycle.prototype,"_executeOperation",void 0),__decorate([Immutable,__metadata("design:type",Object)],NullaryOneCycle.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],NullaryOneCycle.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],NullaryOneCycle.prototype,"_operation",void 0);const nullaryOneCycle=(e,t)=>new NullaryOneCycle(e,t);class Pull{constructor(e,t){this.reset=()=>this._result.read(this._dummyRead,this._state.p).poll(!0),this._dummyRead=()=>this._result.read(this._incrementS,256+this._state.s),this._incrementS=()=>(this._state.s=this._state.s+1&255,this._result.read(this._pull,256+this._state.s)),this._pull=e=>(this._operation(this._state,e),null),this._result=new ResultImpl,this._state=e,this._operation=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Pull.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Pull.prototype,"_dummyRead",void 0),__decorate([Immutable,__metadata("design:type",Object)],Pull.prototype,"_incrementS",void 0),__decorate([Immutable,__metadata("design:type",Object)],Pull.prototype,"_pull",void 0),__decorate([Immutable,__metadata("design:type",Object)],Pull.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Pull.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],Pull.prototype,"_operation",void 0);const pull=(e,t)=>new Pull(e,t);class Push{constructor(e,t){this.reset=()=>this._result.read(this._dummyRead,this._state.p),this._dummyRead=()=>this._result.write(this._push,256+this._state.s,this._operation(this._state)),this._push=()=>(this._state.s=this._state.s-1&255,null),this._result=new ResultImpl,this._state=e,this._operation=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Push.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Push.prototype,"_dummyRead",void 0),__decorate([Immutable,__metadata("design:type",Object)],Push.prototype,"_push",void 0),__decorate([Immutable,__metadata("design:type",Object)],Push.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Push.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],Push.prototype,"_operation",void 0);const push=(e,t)=>new Push(e,t);class Rti{constructor(e){this.reset=()=>this._result.read(this._dummyOperandRead,this._state.p),this._dummyOperandRead=()=>this._result.read(this._dummyStackRead,256+this._state.s),this._dummyStackRead=()=>(this._state.s=this._state.s+1&255,this._result.read(this._popP,256+this._state.s)),this._popP=e=>(this._state.flags=-17&(32|e),this._state.s=this._state.s+1&255,this._result.read(this._popPcl,256+this._state.s)),this._popPcl=e=>(this._state.p=65280&this._state.p|e,this._state.s=this._state.s+1&255,this._result.read(this._popPch,256+this._state.s)),this._popPch=e=>(this._state.p=255&this._state.p|e<<8,null),this._result=new ResultImpl,this._state=e,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Rti.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rti.prototype,"_dummyOperandRead",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rti.prototype,"_dummyStackRead",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rti.prototype,"_popP",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rti.prototype,"_popPcl",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rti.prototype,"_popPch",void 0),__decorate([Immutable,__metadata("design:type",Object)],Rti.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Rti.prototype,"_state",void 0);const rti=e=>new Rti(e);class Write{constructor(e,t){this.reset=e=>this._result.write(()=>null,e,this._operation(this._state)),this._result=new ResultImpl,this._state=e,this._operation=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Write.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Write.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Write.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],Write.prototype,"_operation",void 0);const write$1=(e,t)=>new Write(e,t);function setFlagsNZ(e,t){t.flags=-131&t.flags|128&e|(e?0:2)}function genRmw(e,t,r){const n=r(e);return setFlagsNZ(n,t),n}function genNullary(e,t){setFlagsNZ(t(e),e)}function genUnary(e,t,r){return setFlagsNZ(r(e,t),t),null}function adc(e,t){if(8&t.flags){const r=(15&e)+(15&t.a)+(1&t.flags),n=(e>>>4)+(t.a>>>4)+(r>9?1:0);t.a=r%10|n%10<<4,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|(n>9?1:0)}else{const r=t.a+e+(1&t.flags),n=255&r;t.flags=-196&t.flags|128&n|(n?0:2)|r>>>8|(~(e^t.a)&(n^e)&128)>>>1,t.a=n}return null}function aslImmediate(e){const t=e.a;e.a=e.a<<1&255,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|t>>>7}function aslRmw(e,t){const r=e<<1&255;return t.flags=-132&t.flags|128&r|(r?0:2)|e>>>7,r}function bit(e,t){return t.flags=-195&t.flags|192&e|(e&t.a?0:2),null}function cmp(e,t,r){const n=r(t)+(255&~e)+1;t.flags=-132&t.flags|128&n|(255&n?0:2)|n>>>8}function sbc(e,t){if(8&t.flags){const r=(15&t.a)-(15&e)-(1&~t.flags),n=(t.a>>>4)-(e>>>4)-(r<0?1:0);t.a=(r<0?10+r:r)|(n<0?10+n:n)<<4,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|(n<0?0:1)}else{e=255&~e;const r=t.a+e+(1&t.flags),n=255&r;t.flags=-196&t.flags|128&n|(n?0:2)|r>>>8|(~(e^t.a)&(n^e)&128)>>>1,t.a=n}return null}function lsrImmediate(e){const t=e.a;e.a=e.a>>>1,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|1&t}function lsrRmw(e,t){const r=e>>>1;return t.flags=-132&t.flags|128&r|(r?0:2)|1&e,r}function rolImmediate(e){const t=e.a;e.a=e.a<<1&255|1&e.flags,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|t>>>7}function rolRmw(e,t){const r=e<<1&255|1&t.flags;return t.flags=-132&t.flags|128&r|(r?0:2)|e>>>7,r}function rorImmediate(e){const t=e.a;e.a=e.a>>>1|(1&e.flags)<<7,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|1&t}function rorRmw(e,t){const r=e>>>1|(1&t.flags)<<7;return t.flags=-132&t.flags|128&r|(r?0:2)|1&e,r}function arr(e,t){t.a=(t.a&e)>>>1|(1&t.flags?128:0),t.flags=-196&t.flags|(64&t.a)>>>6|(t.a?0:2)|128&t.a|64&t.a^(32&t.a)<<1}function alr(e,t){const r=t.a&e;return t.a=r>>>1,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&r,null}function dcp(e,t){const r=e+255&255,n=t.a+(255&~r)+1;return t.flags=-132&t.flags|128&n|(255&n?0:2)|n>>>8,r}function axs(e,t){const r=(t.a&t.x)+(255&~e)+1;return t.x=255&r,t.flags=-132&t.flags|128&t.x|(255&t.x?0:2)|r>>>8,null}function rra(e,t){const r=e>>>1|(1&t.flags)<<7;return t.flags=-2&t.flags|1&e,adc(r,t),r}function rla(e,t){const r=e<<1&255|1&t.flags;return t.flags=-2&t.flags|e>>>7,setFlagsNZ(t.a&=r,t),r}function slo(e,t){t.flags=-2&t.flags|e>>>7;const r=e<<1&255;return t.a=t.a|r,setFlagsNZ(t.a,t),r}function aax(e){const t=e.a&e.x;return setFlagsNZ(t,e),t}function isc(e,t){const r=e+1&255;return sbc(r,t),r}function aac(e,t){return t.a&=e,setFlagsNZ(t.a,t),t.flags=-2&t.flags|(128&t.a)>>>7,null}class Indirect{constructor(e,t=(()=>null)){this.reset=()=>this._result.read(this._fetchAddressLo,this._state.p),this._fetchAddressLo=e=>(this._address=e,this._state.p=this._state.p+1&65535,this._result.read(this._fetchAddressHi,this._state.p)),this._fetchAddressHi=e=>(this._address|=e<<8,this._state.p=this._state.p+1&65535,this._result.read(this._fetchLo,this._address)),this._fetchLo=e=>(this._operand=e,255==(255&this._address)?this._address&=65280:this._address=this._address+1&65535,this._result.read(this._fetchHi,this._address)),this._fetchHi=e=>(this._operand|=e<<8,this._next(this._operand,this._state)),this._operand=0,this._address=0,this._result=new ResultImpl,this._state=e,this._next=t,freezeImmutables(this)}}__decorate([Immutable,__metadata("design:type",Object)],Indirect.prototype,"reset",void 0),__decorate([Immutable,__metadata("design:type",Object)],Indirect.prototype,"_fetchAddressLo",void 0),__decorate([Immutable,__metadata("design:type",Object)],Indirect.prototype,"_fetchAddressHi",void 0),__decorate([Immutable,__metadata("design:type",Object)],Indirect.prototype,"_fetchLo",void 0),__decorate([Immutable,__metadata("design:type",Object)],Indirect.prototype,"_fetchHi",void 0),__decorate([Immutable,__metadata("design:type",Object)],Indirect.prototype,"_result",void 0),__decorate([Immutable,__metadata("design:type",CpuInterface.State)],Indirect.prototype,"_state",void 0),__decorate([Immutable,__metadata("design:type",Function)],Indirect.prototype,"_next",void 0);const indirect=(e,t)=>new Indirect(e,t);class Compiler{constructor(e){this._state=e}compile(e){const t=Instruction.opcodes[e];switch(t.operation){case 0:return this._createAddressing(t.addressingMode,adc,{deref:!0});case 1:return this._createAddressing(t.addressingMode,(e,t)=>genUnary(e,t,(e,t)=>t.a=t.a&e),{deref:!0});case 2:return 0===t.addressingMode?nullaryOneCycle(this._state,aslImmediate):this._createAddressing(t.addressingMode,readModifyWrite(this._state,aslRmw).reset,{writeOp:!0});case 6:return this._createAddressing(t.addressingMode,bit,{deref:!0});case 10:return brk(this._state);case 17:return this._createAddressing(t.addressingMode,(e,t)=>(cmp(e,t,e=>e.a),null),{deref:!0});case 18:return this._createAddressing(t.addressingMode,(e,t)=>(cmp(e,t,e=>e.x),null),{deref:!0});case 19:return this._createAddressing(t.addressingMode,(e,t)=>(cmp(e,t,e=>e.y),null),{deref:!0});case 20:return this._createAddressing(t.addressingMode,readModifyWrite(this._state,(e,t)=>genRmw(e,t,e=>e-1&255)).reset,{writeOp:!0});case 21:return nullaryOneCycle(this._state,e=>genNullary(e,e=>e.x=e.x-1&255));case 22:return nullaryOneCycle(this._state,e=>genNullary(e,e=>e.y=e.y-1&255));case 24:return this._createAddressing(t.addressingMode,readModifyWrite(this._state,(e,t)=>genRmw(e,t,e=>e+1&255)).reset,{writeOp:!0});case 25:return nullaryOneCycle(this._state,e=>genNullary(e,e=>e.x=e.x+1&255));case 26:return nullaryOneCycle(this._state,e=>genNullary(e,e=>e.y=e.y+1&255));case 23:return this._createAddressing(t.addressingMode,(e,t)=>genUnary(e,t,(e,t)=>t.a=t.a^e),{deref:!0});case 27:return this._createAddressing(t.addressingMode,(e,t)=>(t.p=e,null));case 28:return jsr(this._state);case 29:return this._createAddressing(t.addressingMode,(e,t)=>genUnary(e,t,(e,t)=>t.a=e),{deref:!0});case 30:return this._createAddressing(t.addressingMode,(e,t)=>genUnary(e,t,(e,t)=>t.x=e),{deref:!0});case 31:return this._createAddressing(t.addressingMode,(e,t)=>genUnary(e,t,(e,t)=>t.y=e),{deref:!0});case 32:return 0===t.addressingMode?nullaryOneCycle(this._state,lsrImmediate):this._createAddressing(t.addressingMode,readModifyWrite(this._state,lsrRmw).reset,{writeOp:!0});case 33:return nullaryOneCycle(this._state,()=>void 0);case 34:return this._createAddressing(t.addressingMode,(e,t)=>genUnary(e,t,(e,t)=>t.a|=e),{deref:!0});case 35:return push(this._state,e=>e.a);case 36:return push(this._state,e=>16|e.flags);case 37:return pull(this._state,(e,t)=>genNullary(e,e=>e.a=t));case 38:return pull(this._state,(e,t)=>e.flags=-17&(32|t));case 39:return 0===t.addressingMode?nullaryOneCycle(this._state,rolImmediate):this._createAddressing(t.addressingMode,readModifyWrite(this._state,rolRmw).reset,{writeOp:!0});case 40:return 0===t.addressingMode?nullaryOneCycle(this._state,rorImmediate):this._createAddressing(t.addressingMode,readModifyWrite(this._state,rorRmw).reset,{writeOp:!0});case 41:return rti(this._state);case 42:return rts(this._state);case 43:return this._createAddressing(t.addressingMode,sbc,{deref:!0});case 48:return this._createAddressing(t.addressingMode,write$1(this._state,e=>e.x).reset,{writeOp:!0});case 49:return this._createAddressing(t.addressingMode,write$1(this._state,e=>e.y).reset,{writeOp:!0});case 50:return nullaryOneCycle(this._state,e=>genNullary(e,e=>e.x=e.a));case 51:return nullaryOneCycle(this._state,e=>genNullary(e,e=>e.y=e.a));case 52:return nullaryOneCycle(this._state,e=>genNullary(e,e=>e.x=e.s));case 53:return nullaryOneCycle(this._state,e=>genNullary(e,e=>e.a=e.x));case 54:return nullaryOneCycle(this._state,e=>e.s=e.x);case 55:return nullaryOneCycle(this._state,e=>genNullary(e,e=>e.a=e.y));case 3:return branch(this._state,e=>0==(1&e));case 4:return branch(this._state,e=>(1&e)>0);case 8:return branch(this._state,e=>0==(2&e));case 5:return branch(this._state,e=>(2&e)>0);case 9:return branch(this._state,e=>0==(128&e));case 7:return branch(this._state,e=>(128&e)>0);case 11:return branch(this._state,e=>0==(64&e));case 12:return branch(this._state,e=>(64&e)>0);case 44:return nullaryOneCycle(this._state,e=>e.flags|=1);case 45:return nullaryOneCycle(this._state,e=>e.flags|=8);case 46:return nullaryOneCycle(this._state,e=>e.flags|=4);case 47:return this._createAddressing(t.addressingMode,write$1(this._state,e=>e.a).reset,{writeOp:!0});case 13:return nullaryOneCycle(this._state,e=>e.flags&=-2);case 14:return nullaryOneCycle(this._state,e=>e.flags&=-9);case 15:return nullaryOneCycle(this._state,e=>e.flags&=-5);case 16:return nullaryOneCycle(this._state,e=>e.flags&=-65);case 56:case 57:return this._createAddressing(t.addressingMode,()=>null,{deref:!0});case 67:return this._createAddressing(t.addressingMode,aac);case 64:return this._createAddressing(t.addressingMode,write$1(this._state,aax).reset,{writeOp:!0});case 58:return this._createAddressing(t.addressingMode,alr,{deref:!0});case 62:return this._createAddressing(t.addressingMode,(e,t)=>(arr(e,t),null),{deref:!0});case 59:return this._createAddressing(t.addressingMode,axs,{deref:!0});case 68:return this._createAddressing(t.addressingMode,(e,t)=>genUnary(e,t,(e,t)=>t.x=t.a=t.a&e),{deref:!0});case 60:return this._createAddressing(t.addressingMode,readModifyWrite(this._state,dcp).reset,{writeOp:!0});case 66:return this._createAddressing(t.addressingMode,readModifyWrite(this._state,isc).reset,{writeOp:!0});case 61:return this._createAddressing(t.addressingMode,(e,t)=>genUnary(e,t,(e,t)=>t.a=t.x=e),{deref:!0});case 65:return this._createAddressing(t.addressingMode,(e,t)=>genUnary(e,t,(e,t)=>t.s=t.x=t.a=t.s&e),{deref:!0});case 70:return this._createAddressing(t.addressingMode,readModifyWrite(this._state,rla).reset,{writeOp:!0});case 69:return this._createAddressing(t.addressingMode,readModifyWrite(this._state,rra).reset,{writeOp:!0});case 63:return this._createAddressing(t.addressingMode,readModifyWrite(this._state,slo).reset,{writeOp:!0});default:return null}}_createAddressing(e,t,{deref:r=!1,writeOp:n=!1}={}){switch(r&&1!==e&&(t=dereference(this._state,t).reset),e){case 1:return immediate$1(this._state,t);case 2:return zeroPage(this._state,t);case 3:return absolute(this._state,t);case 6:return zeroPageX(this._state,t);case 9:return zeroPageY(this._state,t);case 7:return absoluteX(this._state,t,n);case 10:return absoluteY(this._state,t,n);case 8:return indexedIndirectX(this._state,t);case 11:return indirectIndexedY(this._state,t,n);case 4:return indirect(this._state,t);default:throw new Error(`invalid addressing mode ${e}`)}}}class StateMachineCpu{constructor(e,t){this._bus=e,this._rng=t,this.executionState=0,this.state=new CpuInterface.State,this._invalidInstructionCallback=null,this._interruptPending=!1,this._nmiPending=!1,this._halt=!1,this._pollInterruptsAfterLastInstruction=!1,this._lastInstructionPointer=0,this._operations=new Array(255),this._opBoot=boot(this.state),this._opIrq=irq(this.state),this._opNmi=nmi(this.state);const r=new Compiler(this.state);for(let e=0;e<256;e++)this._operations[e]=r.compile(e);this.reset()}reset(){return this.state.a=this._rng?this._rng.int(255):0,this.state.x=this._rng?this._rng.int(255):0,this.state.y=this._rng?this._rng.int(255):0,this.state.s=253,this.state.p=this._rng?this._rng.int(65535):0,this.state.flags=52|(this._rng?this._rng.int(255):0),this.state.irq=!1,this.state.nmi=!1,this.executionState=0,this._interruptPending=!1,this._nmiPending=!1,this._halt=!1,this._lastResult=this._opBoot.reset(void 0),this._lastInstructionPointer=0,this}setInterrupt(e){return this._interruptPending=e,this}isInterrupt(){return this._interruptPending}nmi(){return this._nmiPending=!0,this}halt(){return this._halt=!0,this}resume(){return this._halt=!1,this}isHalt(){return this._halt}setInvalidInstructionCallback(e){return this._invalidInstructionCallback=e,this}getInvalidInstructionCallback(){return this._invalidInstructionCallback}getLastInstructionPointer(){return this._lastInstructionPointer}cycle(){if(this._halt&&(!this._lastResult||0===this._lastResult.cycleType))return this;if(1===this.executionState)return this._fetch(),this;let e;switch(this._lastResult.cycleType){case 0:e=this._bus.read(this._lastResult.address);break;case 1:e=this._lastResult.value,this._bus.write(this._lastResult.address,e);break;default:throw new Error("invalid cycle type")}return this._lastResult.pollInterrupts&&(this._pollInterrupts(),this._lastResult.pollInterrupts=!1,this._pollInterruptsAfterLastInstruction=!1),this._lastResult=this._lastResult.nextStep(e),null===this._lastResult&&(this.executionState=1),this}_fetch(){let e;this._pollInterruptsAfterLastInstruction&&this._pollInterrupts(),this._lastInstructionPointer=this.state.p;const t=this._bus.read(this.state.p);this.state.nmi?(e=this._opNmi,this._pollInterruptsAfterLastInstruction=!1):this.state.irq?(e=this._opIrq,this._pollInterruptsAfterLastInstruction=!1):(e=this._operations[t],this.state.p=this.state.p+1&65535,this._pollInterruptsAfterLastInstruction=!0),e?(this.executionState=2,this._lastResult=e.reset(void 0)):this._invalidInstructionCallback&&this._invalidInstructionCallback(this)}_pollInterrupts(){if(this.state.irq=!1,this._nmiPending)return this.state.nmi=!0,void(this._nmiPending=!1);!this._interruptPending||this.state.nmi||4&this.state.flags||(this.state.irq=!0)}}function restoreFlagsFromStack(e,t){e.s=e.s+1&255,e.flags=-17&(32|t.read(256+e.s))}function setFlagsNZ$1(e,t){e.flags=-131&e.flags|128&t|(t?0:2)}function opAdc(e,t,r){if(8&e.flags){const t=(15&r)+(15&e.a)+(1&e.flags),n=(r>>>4)+(e.a>>>4)+(t>9?1:0);e.a=t%10|n%10<<4,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|(n>9?1:0)}else{const t=e.a+r+(1&e.flags),n=255&t;e.flags=-196&e.flags|128&n|(n?0:2)|t>>>8|(~(r^e.a)&(n^r)&128)>>>1,e.a=n}}function opAnd(e,t,r){e.a&=r,setFlagsNZ$1(e,e.a)}function opAslAcc(e){const t=e.a;e.a=e.a<<1&255,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|t>>>7}function opAslMem(e,t,r){const n=t.read(r),i=n<<1&255;t.write(r,i),e.flags=-132&e.flags|128&i|(i?0:2)|n>>>7}function opBit(e,t,r){e.flags=-195&e.flags|192&r|(r&e.a?0:2)}function opBrk(e,t){const r=e.p+1&65535;let n=65534;e.nmi&&(n=65530,e.nmi=!1),e.nmi=e.irq=!1,t.write(e.s+256,r>>>8&255),e.s=e.s+255&255,t.write(e.s+256,255&r),e.s=e.s+255&255,t.write(e.s+256,16|e.flags),e.s=e.s+255&255,e.flags|=4,e.p=t.readWord(n)}function opClc(e){e.flags&=-2}function opCld(e){e.flags&=-9}function opCli(e){e.flags&=-5}function opClv(e){e.flags&=-65}function opCmp(e,t,r){const n=e.a+(255&~r)+1;e.flags=-132&e.flags|128&n|(255&n?0:2)|n>>>8}function opCpx(e,t,r){const n=e.x+(255&~r)+1;e.flags=-132&e.flags|128&n|(255&n?0:2)|n>>>8}function opCpy(e,t,r){const n=e.y+(255&~r)+1;e.flags=-132&e.flags|128&n|(255&n?0:2)|n>>>8}function opDec(e,t,r){const n=t.read(r)+255&255;t.write(r,n),setFlagsNZ$1(e,n)}function opDex(e){e.x=e.x+255&255,setFlagsNZ$1(e,e.x)}function opEor(e,t,r){e.a=e.a^r,setFlagsNZ$1(e,e.a)}function opDey(e){e.y=e.y+255&255,setFlagsNZ$1(e,e.y)}function opInc(e,t,r){const n=t.read(r)+1&255;t.write(r,n),setFlagsNZ$1(e,n)}function opInx(e){e.x=e.x+1&255,setFlagsNZ$1(e,e.x)}function opIny(e){e.y=e.y+1&255,setFlagsNZ$1(e,e.y)}function opJmp(e,t,r){e.p=r}function opJsr(e,t,r){const n=e.p+1&65535,i=t.read(e.p);t.read(256+e.s),t.write(256+e.s,n>>>8),e.s=e.s+255&255,t.write(256+e.s,255&n),e.s=e.s+255&255,e.p=i|t.read(e.p+1&65535)<<8}function opLda(e,t,r,n){e.a=1===n?r:t.read(r),setFlagsNZ$1(e,e.a)}function opLdx(e,t,r,n){e.x=1===n?r:t.read(r),setFlagsNZ$1(e,e.x)}function opLdy(e,t,r,n){e.y=1===n?r:t.read(r),setFlagsNZ$1(e,e.y)}function opLsrAcc(e){const t=e.a;e.a=e.a>>>1,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|1&t}function opLsrMem(e,t,r){const n=t.read(r),i=n>>>1;t.write(r,i),e.flags=-132&e.flags|128&i|(i?0:2)|1&n}function opNop(){}function opOra(e,t,r){e.a|=r,setFlagsNZ$1(e,e.a)}function opPhp(e,t){t.write(256+e.s,16|e.flags),e.s=e.s+255&255}function opPlp(e,t){restoreFlagsFromStack(e,t)}function opPha(e,t){t.write(256+e.s,e.a),e.s=e.s+255&255}function opPla(e,t){e.s=e.s+1&255,e.a=t.read(256+e.s),setFlagsNZ$1(e,e.a)}function opRolAcc(e){const t=e.a;e.a=e.a<<1&255|1&e.flags,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|t>>>7}function opRolMem(e,t,r){const n=t.read(r),i=n<<1&255|1&e.flags;t.write(r,i),e.flags=-132&e.flags|128&i|(i?0:2)|n>>>7}function opRorAcc(e){const t=e.a;e.a=e.a>>>1|(1&e.flags)<<7,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|1&t}function opRorMem(e,t,r){const n=t.read(r),i=n>>>1|(1&e.flags)<<7;t.write(r,i),e.flags=-132&e.flags|128&i|(i?0:2)|1&n}function opRti(e,t){let r;restoreFlagsFromStack(e,t),e.s=e.s+1&255,r=t.read(256+e.s),e.s=e.s+1&255,r|=t.read(256+e.s)<<8,e.p=r}function opRts(e,t){let r;t.read(256+e.s),e.s=e.s+1&255,r=t.read(256+e.s),e.s=e.s+1&255,r+=t.read(256+e.s)<<8,e.p=r+1&65535}function opSbc(e,t,r){if(8&e.flags){const t=(15&e.a)-(15&r)-(1&~e.flags),n=(e.a>>>4)-(r>>>4)-(t<0?1:0);e.a=(t<0?10+t:t)|(n<0?10+n:n)<<4,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|(n<0?0:1)}else{r=255&~r;const t=e.a+r+(1&e.flags),n=255&t;e.flags=-196&e.flags|128&n|(n?0:2)|t>>>8|(~(r^e.a)&(n^r)&128)>>>1,e.a=n}}function opSec(e){e.flags|=1}function opSed(e){e.flags|=8}function opSei(e){e.flags|=4}function opSta(e,t,r){t.write(r,e.a)}function opStx(e,t,r){t.write(r,e.x)}function opSty(e,t,r){t.write(r,e.y)}function opTax(e){e.x=e.a,setFlagsNZ$1(e,e.a)}function opTay(e){e.y=e.a,setFlagsNZ$1(e,e.a)}function opTsx(e){e.x=e.s,setFlagsNZ$1(e,e.x)}function opTxa(e){e.a=e.x,setFlagsNZ$1(e,e.a)}function opTxs(e){e.s=e.x}function opTya(e){e.a=e.y,setFlagsNZ$1(e,e.a)}function opAlr(e,t,r){const n=e.a&r;e.a=n>>>1,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|1&n}function opAxs(e,t,r){const n=(e.a&e.x)+(255&~r)+1;e.x=255&n,e.flags=-132&e.flags|128&e.x|(255&e.x?0:2)|n>>>8}function opDcp(e,t,r){const n=t.read(r)+255&255;t.write(r,n);const i=e.a+(255&~n)+1;e.flags=-132&e.flags|128&i|(255&i?0:2)|i>>>8}function opLax(e,t,r){e.a=r,e.x=r,setFlagsNZ$1(e,r)}function opArr(e,t,r){e.a=(e.a&r)>>>1|(1&e.flags?128:0),e.flags=-196&e.flags|(64&e.a)>>>6|(e.a?0:2)|128&e.a|64&e.a^(32&e.a)<<1}function opSlo(e,t,r){let n=t.read(r);e.flags=-2&e.flags|n>>>7,n=n<<1&255,t.write(r,n),e.a=e.a|n,setFlagsNZ$1(e,e.a)}function opAax(e,t,r){const n=e.x&e.a;t.write(r,n),setFlagsNZ$1(e,n)}function opLar(e,t,r){e.s=e.a=e.x=e.s&r,setFlagsNZ$1(e,e.a)}function opIsc(e,t,r){const n=t.read(r)+1&255;t.write(r,n),opSbc(e,t,n)}function opAac(e,t,r){e.a&=r,setFlagsNZ$1(e,e.a),e.flags=-2&e.flags|(128&e.a)>>>7}function opAtx(e,t,r){e.a&=r,e.x=e.a,setFlagsNZ$1(e,e.a)}function opRra(e,t,r){const n=t.read(r),i=n>>>1|(1&e.flags)<<7;t.write(r,i),e.flags=-2&e.flags|1&n,opAdc(e,t,i)}function opRla(e,t,r){const n=t.read(r),i=n<<1&255|1&e.flags;t.write(r,i),e.flags=-2&e.flags|n>>>7,opAnd(e,t,i)}function opBoot(e,t){e.p=t.readWord(65532)}function dispatchInterrupt(e,t,r){const n=e.p;e.nmi&&(r=65530),e.nmi=e.irq=!1,t.write(e.s+256,n>>>8&255),e.s=e.s+255&255,t.write(e.s+256,255&n),e.s=e.s+255&255,t.write(e.s+256,-17&e.flags),e.s=e.s+255&255,e.flags|=4,e.p=t.readWord(r)}function opIrq(e,t){dispatchInterrupt(e,t,65534)}function opNmi(e,t){dispatchInterrupt(e,t,65530)}class BatchedAccessCpu{constructor(e,t){this._bus=e,this._rng=t,this.executionState=0,this.state=new CpuInterface.State,this._opCycles=0,this._instructionCallback=null,this._invalidInstructionCallback=null,this._interruptPending=!1,this._nmiPending=!1,this._interuptCheck=0,this._halted=!1,this._operand=0,this._lastInstructionPointer=0,this._currentAddressingMode=12,this._dereference=!1,this.reset()}setInterrupt(e){return this._interruptPending=e,this}isInterrupt(){return this._interruptPending}nmi(){return this._nmiPending=!0,this}halt(){return this._halted=!0,this}resume(){return this._halted=!1,this}isHalt(){return this._halted}setInvalidInstructionCallback(e){return this._invalidInstructionCallback=e,this}getInvalidInstructionCallback(){return this._invalidInstructionCallback}getLastInstructionPointer(){return this._lastInstructionPointer}reset(){return this.state.a=this._rng?this._rng.int(255):0,this.state.x=this._rng?this._rng.int(255):0,this.state.y=this._rng?this._rng.int(255):0,this.state.s=253,this.state.p=this._rng?this._rng.int(65535):0,this.state.flags=52|(this._rng?this._rng.int(255):0),this.state.irq=!1,this.state.nmi=!1,this.executionState=0,this._opCycles=7,this._interruptPending=!1,this._nmiPending=!1,this._instructionCallback=opBoot,this}cycle(){if(this._halted)return this;switch(this.executionState){case 0:case 2:0==--this._opCycles&&(this._dereference&&(this._operand=this._bus.read(this._operand)),1===this._interuptCheck&&this._checkForInterrupts(),this._instructionCallback(this.state,this._bus,this._operand,this._currentAddressingMode),this.executionState=1,0===this._interuptCheck&&this._checkForInterrupts());break;case 1:if(this.state.nmi)return this._instructionCallback=opNmi,this._opCycles=6,this.state.nmi=this.state.irq=!1,this._interuptCheck=1,this.executionState=2,this;if(this.state.irq)return this._instructionCallback=opIrq,this._opCycles=6,this.state.nmi=this.state.irq=!1,this._interuptCheck=1,this.executionState=2,this;this._fetch()}return this}_fetch(){const e=Instruction.opcodes[this._bus.read(this.state.p)];let t,r,n=e.addressingMode,i=!1,a=!1;switch(this._lastInstructionPointer=this.state.p,this._currentAddressingMode=n,this._interuptCheck=0,e.operation){case 0:this._opCycles=0,this._instructionCallback=opAdc,i=!0;break;case 1:this._opCycles=0,this._instructionCallback=opAnd,i=!0;break;case 2:0===n?(this._opCycles=1,this._instructionCallback=opAslAcc):(this._opCycles=3,this._instructionCallback=opAslMem,a=!0);break;case 3:1&this.state.flags?(n=0,this._instructionCallback=opNop,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=opJmp,this._opCycles=0);break;case 4:1&this.state.flags?(this._instructionCallback=opJmp,this._opCycles=0):(n=0,this._instructionCallback=opNop,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 5:2&this.state.flags?(this._instructionCallback=opJmp,this._opCycles=0):(n=0,this._instructionCallback=opNop,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 6:this._opCycles=0,this._instructionCallback=opBit,i=!0;break;case 7:128&this.state.flags?(this._instructionCallback=opJmp,this._opCycles=0):(n=0,this._instructionCallback=opNop,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 8:2&this.state.flags?(n=0,this._instructionCallback=opNop,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=opJmp,this._opCycles=0);break;case 9:128&this.state.flags?(n=0,this._instructionCallback=opNop,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=opJmp,this._opCycles=0);break;case 11:64&this.state.flags?(n=0,this._instructionCallback=opNop,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=opJmp,this._opCycles=0);break;case 12:64&this.state.flags?(this._instructionCallback=opJmp,this._opCycles=0):(n=0,this._instructionCallback=opNop,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 10:this._opCycles=6,this._instructionCallback=opBrk,this._interuptCheck=1;break;case 13:this._opCycles=1,this._instructionCallback=opClc;break;case 14:this._opCycles=1,this._instructionCallback=opCld;break;case 15:this._opCycles=1,this._instructionCallback=opCli,this._interuptCheck=1;break;case 16:this._opCycles=1,this._instructionCallback=opClv;break;case 17:this._opCycles=0,this._instructionCallback=opCmp,i=!0;break;case 18:this._opCycles=0,this._instructionCallback=opCpx,i=!0;break;case 19:this._opCycles=0,this._instructionCallback=opCpy,i=!0;break;case 20:this._opCycles=3,this._instructionCallback=opDec,a=!0;break;case 21:this._opCycles=1,this._instructionCallback=opDex;break;case 22:this._opCycles=1,this._instructionCallback=opDey;break;case 23:this._opCycles=0,this._instructionCallback=opEor,i=!0;break;case 24:this._opCycles=3,this._instructionCallback=opInc,a=!0;break;case 25:this._opCycles=1,this._instructionCallback=opInx;break;case 26:this._opCycles=1,this._instructionCallback=opIny;break;case 27:this._opCycles=0,this._instructionCallback=opJmp;break;case 28:this._opCycles=5,this._instructionCallback=opJsr;break;case 29:this._opCycles=1===n?0:1,this._instructionCallback=opLda;break;case 30:this._opCycles=1===n?0:1,this._instructionCallback=opLdx;break;case 31:this._opCycles=1===n?0:1,this._instructionCallback=opLdy;break;case 32:0===n?(this._opCycles=1,this._instructionCallback=opLsrAcc):(this._opCycles=3,this._instructionCallback=opLsrMem,a=!0);break;case 33:this._opCycles=1,this._instructionCallback=opNop;break;case 56:case 57:this._opCycles=0,i=!0,this._instructionCallback=opNop;break;case 34:this._opCycles=0,this._instructionCallback=opOra,i=!0;break;case 36:this._opCycles=2,this._instructionCallback=opPhp;break;case 35:this._opCycles=2,this._instructionCallback=opPha;break;case 37:this._opCycles=3,this._instructionCallback=opPla;break;case 38:this._opCycles=3,this._instructionCallback=opPlp,this._interuptCheck=1;break;case 39:0===n?(this._opCycles=1,this._instructionCallback=opRolAcc):(this._opCycles=3,this._instructionCallback=opRolMem,a=!0);break;case 40:0===n?(this._opCycles=1,this._instructionCallback=opRorAcc):(this._opCycles=3,this._instructionCallback=opRorMem,a=!0);break;case 41:this._opCycles=5,this._instructionCallback=opRti;break;case 42:this._opCycles=5,this._instructionCallback=opRts;break;case 43:this._opCycles=0,this._instructionCallback=opSbc,i=!0;break;case 44:this._opCycles=1,this._instructionCallback=opSec;break;case 45:this._opCycles=1,this._instructionCallback=opSed;break;case 46:this._opCycles=1,this._instructionCallback=opSei,this._interuptCheck=1;break;case 47:this._opCycles=1,this._instructionCallback=opSta,a=!0;break;case 48:this._opCycles=1,this._instructionCallback=opStx,a=!0;break;case 49:this._opCycles=1,this._instructionCallback=opSty,a=!0;break;case 50:this._opCycles=1,this._instructionCallback=opTax;break;case 51:this._opCycles=1,this._instructionCallback=opTay;break;case 52:this._opCycles=1,this._instructionCallback=opTsx;break;case 53:this._opCycles=1,this._instructionCallback=opTxa;break;case 54:this._opCycles=1,this._instructionCallback=opTxs;break;case 55:this._opCycles=1,this._instructionCallback=opTya;break;case 62:this._opCycles=0,this._instructionCallback=opArr;break;case 58:this._opCycles=0,this._instructionCallback=opAlr;break;case 59:this._opCycles=0,this._instructionCallback=opAxs;break;case 60:this._opCycles=3,this._instructionCallback=opDcp,a=!0;break;case 61:this._opCycles=0,this._instructionCallback=opLax,i=!0;break;case 63:this._opCycles=3,this._instructionCallback=opSlo,a=!0,i=!1;break;case 64:this._opCycles=1,this._instructionCallback=opAax;break;case 65:this._opCycles=0,this._instructionCallback=opLar,i=!0;break;case 66:this._opCycles=3,this._instructionCallback=opIsc,a=!0;break;case 67:this._opCycles=0,this._instructionCallback=opAac;break;case 68:this._opCycles=0,this._instructionCallback=opAtx;break;case 69:this._opCycles=3,i=!1,a=!0,this._instructionCallback=opRra;break;case 70:this._opCycles=3,i=!1,a=!0,this._instructionCallback=opRla;break;default:return void(this._invalidInstructionCallback&&this._invalidInstructionCallback(this))}switch(this.state.p=this.state.p+1&65535,n){case 1:this._operand=this._bus.read(this.state.p),i=!1,this.state.p=this.state.p+1&65535,this._opCycles++;break;case 2:this._operand=this._bus.read(this.state.p),this.state.p=this.state.p+1&65535,this._opCycles++;break;case 3:this._operand=this._bus.readWord(this.state.p),this.state.p=this.state.p+2&65535,this._opCycles+=2;break;case 4:t=this._bus.readWord(this.state.p),this._operand=255==(255&t)?this._bus.read(t)+(this._bus.read(65280&t)<<8):this._bus.readWord(t),this.state.p=this.state.p+2&65535,this._opCycles+=4;break;case 5:t=this._bus.read(this.state.p),t=128&t?-(255&~(t-1)):t,this._operand=this.state.p+t+65537&65535,this.state.p=this.state.p+1&65535,this._opCycles+=(65280&this._operand)!=(65280&this.state.p)?3:2;break;case 6:r=this._bus.read(this.state.p),this._bus.read(r),this._operand=r+this.state.x&255,this.state.p=this.state.p+1&65535,this._opCycles+=2;break;case 7:t=this._bus.readWord(this.state.p),this._operand=t+this.state.x&65535,(65280&this._operand)!=(65280&t)&&this._bus.read(65280&t|255&this._operand),this._opCycles+=a||(65280&this._operand)!=(65280&t)?3:2,this.state.p=this.state.p+2&65535;break;case 9:r=this._bus.read(this.state.p),this._bus.read(r),this._operand=r+this.state.y&255,this.state.p=this.state.p+1&65535,this._opCycles+=2;break;case 10:t=this._bus.readWord(this.state.p),this._operand=t+this.state.y&65535,(65280&this._operand)!=(65280&t)&&this._bus.read(65280&t|255&this._operand),this._opCycles+=a||(65280&this._operand)!=(65280&t)?3:2,this.state.p=this.state.p+2&65535;break;case 8:r=this._bus.read(this.state.p),this._bus.read(r),t=r+this.state.x&255,this._operand=255===t?this._bus.read(255)+(this._bus.read(0)<<8):this._bus.readWord(t),this._opCycles+=4,this.state.p=this.state.p+1&65535;break;case 11:t=this._bus.read(this.state.p),t=255===t?this._bus.read(255)+(this._bus.read(0)<<8):this._bus.readWord(t),this._operand=t+this.state.y&65535,(65280&this._operand)!=(65280&t)&&this._bus.read(65280&t|255&this._operand),this._opCycles+=a||(65280&t)!=(65280&this._operand)?4:3,this.state.p=this.state.p+1&65535}this._dereference=i,i&&this._opCycles++,this.executionState=2}_checkForInterrupts(){this._nmiPending&&(this.state.irq=!1,this.state.nmi=!0,this._nmiPending=!1),!this._interruptPending||this.state.nmi||4&this.state.flags||(this.state.irq=!0)}}class Factory{constructor(e){this._type=e}create(e,t){switch(this._type){case Factory.Type.stateMachine:return new StateMachineCpu(e,t);case Factory.Type.batchedAccess:return new BatchedAccessCpu(e,t);default:throw new Error("invalid CPU type")}}}!function(e){let t;!function(e){e[e.stateMachine=0]="stateMachine",e[e.batchedAccess=1]="batchedAccess"}(t=e.Type||(e.Type={}))}(Factory||(Factory={}));var CpuFactory=Factory,Config$1;!function(e){e.create=function(e={}){return Object.assign({tvMode:0,enableAudio:!0,randomSeed:-1,emulatePaddles:!0,frameStart:-1,pcmAudio:!1,cpuType:CpuFactory.Type.stateMachine},e)},e.getClockHz=function(e){switch(e.tvMode){case 0:return 3584160;case 1:case 2:return 3556800}}}(Config$1||(Config$1={}));class AudioOutputBuffer{constructor(e,t){this._content=e,this._sampleRate=t}getLength(){return this._content.length}getContent(){return this._content}getSampleRate(){return this._sampleRate}replaceUnderlyingBuffer(e){this._content=e}}const encodingsString="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",encodings=new Uint8Array(256);function decodeChar(e,t){const r=encodings[e.charCodeAt(t)];if(r>63)throw new Error('invalid base64 character "'+e[t]+'" at index '+t);return r}function decodeNibble(e,t){return(decodeChar(e,t)<<18)+(decodeChar(e,t+1)<<12)+(decodeChar(e,t+2)<<6)+decodeChar(e,t+3)}function getPadding(e){let t=0,r=e.length-1;for(;r>=0&&"="===e[r--];)t++;return t}function decode$1(e){if(e.length%4!=0)throw new Error("invalid base64 data --- char count mismatch");const t=e.length/4,r=3*t-getPadding(e),n=new Uint8Array(r);let i=0;for(let a=0;a<t;a++){const t=decodeNibble(e,4*a);for(let e=0;e<3&&i<r;e++)n[i++]=t>>>8*(2-e)&255}return n}!function(e){let t;for(t=0;t<256;t++)encodings[t]=255;for(t=0;t<64;t++)encodings[encodingsString.charCodeAt(t)]=t;encodings["=".charCodeAt(0)]=0}();const FREQUENCY_DIVISIORS=decode$1("AQEPAQEBAQEBAQEBAwMDAQ=="),POLY0=new Int8Array([1]),POLY1=new Int8Array([1,1]),POLY2=new Int8Array([16,15]),POLY4=decode$1("AQICAQEBBAM="),POLY5=decode$1("AQIBAQICBQQCAQMBAQEBBA=="),POLY9=decode$1("AQQBAwIEAQIDAgEBAQEBAQIEAgEEAQECAgEDAgEDAQEBBAEBAQECAQECBgECAgECAQIBAQIBBgIBAgIBAQEBAgICAgcCAwICAQEBAwIBAQIBAQcBAQMBAQIDAwEBAQICAQECAgQDBQEDAQEFAgEBAQIBAgEDAQIFAQECAQEBBQEBAQEBAQEBBgEBAQIBAQEBBAIBAQMBAwYDAgMBAQIBAgQBAQEDAQEBAQMBAgEEAgIDBAEBBAECAQICAgEBBAMBBAQJBQQBBQMBAQMCAgIBBQECAQEBAgMBAgEBAwQCBQICAQIDAQEBAQECAQMDAwIBAgEBAQEBAwMBAgIDAQMBCA=="),POLY68=decode$1("BQYEBQoFAwcECgYDBgQJBg=="),POLY465=decode$1("AgMCAQQBBgoCBAIBAQQFCQMDBAEBAQgFBQUEAQEBCAQCCAMDAQEHBAIHBQEDAQcEAQQIAgEDBAcBAwcDAgEGBgICBAUDAgYGAQMDAgUDBwMEAwICAgUJAwEFAwECAgsFAQUDAQECDAUBAgUCAQEMBgECBQECAQoGAwICBAECBgo="),POLYS=[POLY0,POLY4,POLY4,POLY465,POLY1,POLY1,POLY2,POLY5,POLY9,POLY5,POLY2,POLY0,POLY1,POLY1,POLY2,POLY68];class ToneGenerator{constructor(e){this._config=e}setConfig(e){this._config=e}getKey(e,t){return POLYS[e]===POLY1&&FREQUENCY_DIVISIORS[e]*(t+1)==1?0:e<<5|t}getBuffer(e){const t=e>>>5&15,r=31&e,n=POLYS[t];let i=0;for(let e=0;e<n.length;e++)i+=n[e];i=i*FREQUENCY_DIVISIORS[t]*(r+1);const a=new Float32Array(i),s=Config$1.getClockHz(this._config)/114;let o=0,u=0,c=0,l=!0;for(let e=0;e<i;e++)o++,o===FREQUENCY_DIVISIORS[t]*(r+1)&&(o=0,u++,u===n[c]&&(c++,u=0,n.length===c&&(c=0)),l=!(1&c)),a[e]=l?1:-1;return new AudioOutputBuffer(a,s)}}class WaveformAudioProxy{constructor(e,t){this._index=e,this._rpc=t,this.bufferChanged=new lib_1,this.volumeChanged=new lib_1,this.stop=new lib_1,this._toneGenerator=new ToneGenerator,this._volume=0}init(){return this._rpc.registerSignalHandler(SIGNAL_TYPE.waveformAudioBufferChange,this._onBufferChangeSignal.bind(this)).registerSignalHandler(SIGNAL_TYPE.waveformAudioVolumeChange,this._onVolumeChangeSignal.bind(this)).registerSignalHandler(SIGNAL_TYPE.audioStop,this._onStopSignal.bind(this)),this}start(e){return __awaiter(this,void 0,void 0,(function*(){const t=yield this._rpc.rpc(RPC_TYPE.getWaveformAudioParameters(this._index));this._toneGenerator.setConfig(e),this.setVolume(t.volume)}))}setVolume(e){return this._volume=e,this}getVolume(){return this._volume}getBuffer(e){return this._toneGenerator.getBuffer(e)}_onVolumeChangeSignal(e){e.index===this._index&&(this._volume=e.value,this.volumeChanged.dispatch(this._volume))}_onBufferChangeSignal(e){e.index===this._index&&this.bufferChanged.dispatch(e.key)}_onStopSignal(e){e===this._index&&this.stop.dispatch(void 0)}}class PoolMember{constructor(e,t,r){this._value=e,this._releaseCB=t,this._disposeCB=r,this._isAvailable=!1,this._isDisposed=!1}adopt(e){this._value=e}get(){return this._value}release(){this._releaseCB(this)}dispose(){this._disposeCB(this)}}class Pool{constructor(e){this._factory=e,this.event={release:new lib_1,dispose:new lib_1},this._pool=[],this._poolSize=0}get(){let e;if(0===this._poolSize){const t=this._factory();e=new PoolMember(t,e=>this._releaseMember(e),e=>this._disposeMember(e))}else e=this._pool[--this._poolSize],e._isAvailable=!1;return e}_releaseMember(e){if(e._isAvailable)throw new Error("Trying to release an already released pool member");if(e._isDisposed)throw new Error("Trying to release an already disposed pool member");const t=this._poolSize++;this._pool[t]=e,e._isAvailable=!0,e._poolPosition=t,this.event.release.dispatch(e.get())}_disposeMember(e){if(e._isDisposed)throw new Error("Trying to dispose of an already disposed pool member");e._isAvailable&&(this._poolSize>1&&(this._pool[e._poolPosition]=this._pool[this._poolSize-1]),this._poolSize--),e._isDisposed=!0,this.event.dispose.dispatch(e.get())}}class PCMAudioProxy{constructor(e,t){this._index=e,this._rpc=t,this.newFrame=new lib_1,this.togglePause=new lib_1,this._sampleRate=0,this._frameSize=0,this._paused=!1,this._framePool=new Pool(()=>null),this._frameMap=new WeakMap,this._enabled=!1,this._signalReturnFrame="",this._framePool.event.release.addHandler(PCMAudioProxy._onReleaseFragment,this),this._signalReturnFrame=SIGNAL_TYPE.pcmAudioReturnFrame(this._index)}init(){return this._rpc.registerSignalHandler(SIGNAL_TYPE.pcmAudioNewFrame(this._index),this._onNewFrame.bind(this)).registerSignalHandler(SIGNAL_TYPE.pcmAudioTogglePause(this._index),this._onTogglePause.bind(this)),this}start(){return __awaiter(this,void 0,void 0,(function*(){if(this._enabled)return;const e=yield this._rpc.rpc(RPC_TYPE.getPCMAudioParameters(this._index));this._sampleRate=e.sampleRate,this._frameSize=e.frameSize,this._paused=e.paused,this._enabled=!0}))}stop(){this._enabled=!1}isPaused(){return this._paused}getSampleRate(){return this._sampleRate}getFrameSize(){return this._frameSize}static _onReleaseFragment(e,t){t._frameMap.has(e)&&t._rpc.signal(t._signalReturnFrame,{id:t._frameMap.get(e),buffer:e.buffer},[e.buffer])}_onNewFrame(e){if(!this._enabled)return;const t=this._framePool.get(),r=new Float32Array(e.buffer);t.adopt(r),this._frameMap.set(r,e.id),this.newFrame.dispatch(t)}_onTogglePause(e){e.paused!==this._paused&&(this._paused=e.paused,this.togglePause.dispatch(this._paused))}}const CONTROL_PROXY_UPDATE_INTERVAL=25;class EmulationService{constructor(e,t){this._stellaWorkerUri=e,this._videoWorkerUri=t,this.stateChanged=new lib_1,this.frequencyUpdate=new lib_1,this._rateLimitEnforced=!0,this._mutex=new lib_1$1,this._worker=null,this._rpc=null,this._state=EmulationServiceInterface.State.stopped,this._lastError=null,this._emulationContext=null,this._frequency=0,this._waveformChannels=new Array(2),this._pcmChannel=null,this._controlProxy=null,this._controlProxyUpdateHandle=null,this._proxyState=0,this._saveConfig=null}init(){this._worker=new Worker(this._stellaWorkerUri),this._rpc=new lib_1$2((e,t)=>this._worker.postMessage(e,t)),this._pcmChannel=new PCMAudioProxy(0,this._rpc).init();for(let e=0;e<2;e++)this._waveformChannels[e]=new WaveformAudioProxy(e,this._rpc).init();const e=new VideoProxy(this._rpc),t=new ControlProxy(this._rpc);return e.init(),this._emulationContext=new EmulationContext(e,t,this._waveformChannels,this._pcmChannel),this._worker.onmessage=e=>this._rpc.dispatch(e.data),this._rpc.registerSignalHandler(SIGNAL_TYPE.emulationFrequencyUpdate,this._onFrequencyUpdate.bind(this)).registerSignalHandler(SIGNAL_TYPE.emulationError,this._onEmulationError.bind(this)),this._controlProxy=t,this._startVideoProcessingPipeline().then(()=>this.setRateLimit(this._rateLimitEnforced))}start(e,t,r,n){return __awaiter(this,void 0,void 0,(function*(){return yield this.stop(),this._mutex.runExclusive(()=>__awaiter(this,void 0,void 0,(function*(){const i=yield this._rpc.rpc(RPC_TYPE.emulationStart,{buffer:e,config:t,cartridgeType:r,videoProcessing:n});return i===EmulationServiceInterface.State.paused?(this._saveConfig=t,this._emulationContext.setConfig(t),yield this._startProxies(t)):this._saveConfig=null,this._applyState(i)})))}))}pause(){return this._mutex.runExclusive(()=>this._rpc.rpc(RPC_TYPE.emulationPause).then(e=>(this._pauseProxies(),this._applyState(e))))}stop(){return this._mutex.runExclusive(()=>this._rpc.rpc(RPC_TYPE.emulationStop).then(e=>(this._stopProxies(),this._applyState(e))))}reset(){return this._mutex.runExclusive(()=>__awaiter(this,void 0,void 0,(function*(){const e=yield this._rpc.rpc(RPC_TYPE.emulationReset);return this._state!==EmulationServiceInterface.State.error||e!==EmulationServiceInterface.State.running&&e!==EmulationServiceInterface.State.paused||!this._saveConfig||(yield this._startProxies(this._saveConfig)),this._applyState(e)})))}resume(){return this._mutex.runExclusive(()=>this._rpc.rpc(RPC_TYPE.emulationResume).then(e=>(this._resumeProxies(),this._applyState(e))))}setRateLimit(e){return this._rateLimitEnforced=e,this._rpc.rpc(RPC_TYPE.emulationSetRateLimit,e)}getFrequency(){return this._frequency}getRateLimit(){return this._rateLimitEnforced}getState(){return this._state}getLastError(){return this._lastError}getEmulationContext(){switch(this._state){case EmulationServiceInterface.State.running:case EmulationServiceInterface.State.paused:return this._emulationContext;default:return null}}_fetchLastError(){return this._rpc.rpc(RPC_TYPE.emulationFetchLastError).then(e=>e?new Error(e):null)}_applyState(e){return e===EmulationServiceInterface.State.error?this._fetchLastError().then(t=>(this._state=e,this._lastError=t,this._stopProxies(),this.stateChanged.dispatch(e),e)):(this._state=e,this.stateChanged.dispatch(e),e)}_onFrequencyUpdate(e){this._frequency=e,this.frequencyUpdate.dispatch(this._frequency)}_onEmulationError(e){this._lastError=new Error(e||""),this._stopProxies(),this._state=EmulationServiceInterface.State.error,this.stateChanged.dispatch(this._state)}_startProxies(e){return __awaiter(this,void 0,void 0,(function*(){yield this._emulationContext.getVideoProxy().start();for(let t=0;t<this._waveformChannels.length;t++)yield this._waveformChannels[t].start(e);yield this._pcmChannel.start(),this._startControlUpdates(),this._proxyState=1}))}_stopProxies(){0!==this._proxyState&&(this._emulationContext.getVideoProxy().stop(),this._pcmChannel.stop(),this._stopControlUpdates(),this._proxyState=0)}_pauseProxies(){1===this._proxyState&&(this._stopControlUpdates(),this._proxyState=2)}_resumeProxies(){2===this._proxyState&&(this._startControlUpdates(),this._proxyState=1)}_startControlUpdates(){null===this._controlProxyUpdateHandle&&(this._controlProxyUpdateHandle=setInterval(()=>this._controlProxy.sendUpdate(),CONTROL_PROXY_UPDATE_INTERVAL))}_stopControlUpdates(){null!==this._controlProxyUpdateHandle&&(clearInterval(this._controlProxyUpdateHandle),this._controlProxyUpdateHandle=null)}_startVideoProcessingPipeline(){return __awaiter(this,void 0,void 0,(function*(){let e=null;if(this._videoWorkerUri){e=new MessageChannel;const t=new Worker(this._videoWorkerUri),r=new lib_1$2((e,r)=>t.postMessage(e,r));t.onmessage=e=>r.dispatch(e.data),yield r.rpc("/use-port",e.port1,[e.port1])}yield this._rpc.rpc(RPC_TYPE.setup,{videoProcessorPort:e&&e.port2},e?[e.port2]:[])}))}}class DriverManager{constructor(){this._drivers=new Map,this._driversBound=!1}bind(e){return this._driversBound?this:(this._emulationService=e,this._shouldBindDrivers()&&this._bindDrivers(),this._emulationService.stateChanged.addHandler(DriverManager._onEmuStateChange,this),this)}unbind(){return this._emulationService?(this._unbindDrivers(),this._emulationService.stateChanged.removeHandler(DriverManager._onEmuStateChange,this),this._emulationService=null,this):this}addDriver(e,t){return this._drivers.set(e,new DriverManager.DriverContext(e,t)),this._driversBound&&t(this._emulationService.getEmulationContext(),e),this}removeDriver(e){return this._drivers.get(e)?(e.unbind(),this._drivers.delete(e),this):this}static _onEmuStateChange(e,t){t._shouldBindDrivers(e)?t._bindDrivers():t._unbindDrivers()}_shouldBindDrivers(e=(this._emulationService?this._emulationService.getState():void 0)){return this._emulationService&&(e===EmulationServiceInterface.State.running||e===EmulationServiceInterface.State.paused)}_bindDrivers(){this._driversBound||(this._drivers.forEach(e=>e.binder(this._emulationService.getEmulationContext(),e.driver)),this._driversBound=!0)}_unbindDrivers(){this._driversBound&&(this._drivers.forEach(e=>e.driver.unbind()),this._driversBound=!1)}}!function(e){e.DriverContext=class{constructor(e,t){this.driver=e,this.binder=t}}}(DriverManager||(DriverManager={}));const vertexShader="\n    attribute vec2 a_VertexPosition;\n    attribute vec2 a_TextureCoordinate;\n\n    varying vec2 v_TextureCoordinate;\n\n    void main() {\n        v_TextureCoordinate = a_TextureCoordinate;\n        gl_Position = vec4(a_VertexPosition, 0, 1);\n    }\n",fragmentShaderPlain="\n    precision mediump float;\n\n    varying vec2 v_TextureCoordinate;\n\n    uniform sampler2D u_Sampler0;\n    uniform float u_Gamma;\n\n    void main() {\n        vec4 texel = texture2D(u_Sampler0, v_TextureCoordinate);\n\n        gl_FragColor = vec4(pow(texel.rgb, vec3(u_Gamma)), 1.);\n    }\n",fragmentShaderPov="\n    precision mediump float;\n\n    varying vec2 v_TextureCoordinate;\n\n    uniform sampler2D u_Sampler0, u_Sampler1, u_Sampler2;\n    uniform float u_Gamma;\n\n    void main() {\n        vec4 compositedTexel =\n            0.4 * texture2D(u_Sampler0, v_TextureCoordinate) +\n            0.4 * texture2D(u_Sampler1, v_TextureCoordinate) +\n            0.2 * texture2D(u_Sampler2, v_TextureCoordinate);\n\n        gl_FragColor = vec4(pow(compositedTexel.rgb, vec3(u_Gamma)), 1.);\n    }\n",CONTEXT_IDS=["webgl","experimental-webgl"];class WebglVideoDriver{constructor(e,t={}){this._canvas=e,this._gl=null,this._program=null,this._vertexBuffer=null,this._textureCoordinateBuffer=null,this._currentFrameIndex=0,this._frameCount=0,this._gamma=1,this._aspect=4/3,this._povEmulation=!0,this._animationFrameHandle=0,this._syncRendering=!0,this._video=null,this._interpolation=!0,void 0!==t.aspect&&(this._aspect=t.aspect),void 0!==t.gamma&&(this._gamma=t.gamma),void 0!==t.povEmulation&&(this._povEmulation=t.povEmulation);for(const e of CONTEXT_IDS){if(this._gl)break;this._gl=this._canvas.getContext(e,{alpha:!1})}if(!this._gl)throw new Error("unable to acquire WebGL context");this._createTextureArrays()}init(){return this._gl.clearColor(0,0,0,1),this._createProgram(),this._createBuffers(),this.resize(),this._allocateTextures(),this._configureTextures(),this._setupAttribs(),this.enableInterpolation(!0),this}close(){return this._program&&this._gl.deleteProgram(this._program),this._vertexShader&&this._gl.deleteShader(this._vertexShader),this._fragmentShader&&this._gl.deleteShader(this._fragmentShader),this._textures&&this._textures.forEach(e=>e&&this._gl.deleteTexture(e)),this._imageData&&this._imageData.forEach(e=>e&&e.release()),this._vertexBuffer&&this._gl.deleteBuffer(this._vertexBuffer),this._textureCoordinateBuffer&&this._gl.deleteBuffer(this._textureCoordinateBuffer),this}resize(e,t){void 0!==e&&void 0!==t||(e=this._canvas.clientWidth,t=this._canvas.clientHeight);let r=window.devicePixelRatio||1;if(this._video){const n=this._video.getWidth(),i=this._video.getHeight();t*this._aspect<=e?t>=3*i&&t*this._aspect>=3*n&&(r=1):e>=3*n&&e/this._aspect>=3*i&&(r=1)}return this._canvas.width=e*r,this._canvas.height=t*r,this._gl.viewport(0,0,e*r,t*r),this._recalculateVertexBuffer(),this._video&&this._draw(),this}getCanvas(){return this._canvas}bind(e){return this._video?this:(this.resize(),this._video=e,this._video.newFrame.addHandler(WebglVideoDriver._frameHandler,this),this)}unbind(){return this._cancelDraw(),this._video?(this._video.newFrame.removeHandler(WebglVideoDriver._frameHandler,this),this._video=null,this):this}enableInterpolation(e){return e===this._interpolation?this:(this._interpolation=e,this._configureTextures(),this)}interpolationEnabled(){return this._interpolation}enableSyncRendering(e){return e===this._syncRendering?this:(e||this._cancelDraw(),this._syncRendering=e,this)}syncRenderingEnabled(){return this._syncRendering}setGamma(e){return this._gamma=e,this}getGamma(){return this._gamma}enablePovEmulation(e){if(e===this._povEmulation)return this;this._povEmulation=e,this._reinit()}povEmulationEnabled(){return this._povEmulation}static _frameHandler(e,t){const r=t._imageData[t._currentFrameIndex];t._imageData[t._currentFrameIndex]=e,t._imageDataGeneration[t._currentFrameIndex]++,t._currentFrameIndex=(t._currentFrameIndex+1)%t._numberOfFramesToCompose,t._frameCount<t._numberOfFramesToCompose?t._frameCount++:(t._syncRendering?t._scheduleDraw():t._draw(),r.release())}_createTextureArrays(){this._numberOfFramesToCompose=this._povEmulation?3:1,this._textures&&this._textures.forEach(e=>e&&this._gl.deleteTexture(e)),this._imageData&&this._imageData.forEach(e=>e&&e.release()),this._textures=new Array(this._numberOfFramesToCompose),this._imageData=new Array(this._numberOfFramesToCompose),this._imageDataGeneration=new Array(this._numberOfFramesToCompose),this._textureGeneration=new Array(this._numberOfFramesToCompose);for(let e=0;e<this._numberOfFramesToCompose;e++)this._imageDataGeneration[e]=0,this._textureGeneration[e]=-1}_reinit(){this._createTextureArrays(),this._createProgram(),this._allocateTextures(),this._configureTextures(),this._setupAttribs(),this._frameCount=0,this._currentFrameIndex=0}_scheduleDraw(){this._animationFrameHandle||(this._animationFrameHandle=requestAnimationFrame(()=>(this._draw(),this._animationFrameHandle=0)))}_cancelDraw(){0!==this._animationFrameHandle&&(cancelAnimationFrame(this._animationFrameHandle),this._animationFrameHandle=0)}_draw(){if(this._frameCount<this._numberOfFramesToCompose)return;const e=this._gl;for(let t=0;t<this._numberOfFramesToCompose;t++){const r=(this._currentFrameIndex-t-1+this._numberOfFramesToCompose)%this._numberOfFramesToCompose;this._textureGeneration[r]!==this._imageDataGeneration[r]&&(e.activeTexture(e[`TEXTURE${r}`]),e.bindTexture(e.TEXTURE_2D,this._textures[r]),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._imageData[r].get()),this._textureGeneration[r]=this._imageDataGeneration[r])}for(let t=0;t<this._numberOfFramesToCompose;t++)e.uniform1i(this._getUniformLocation(`u_Sampler${t}`),(this._currentFrameIndex+this._numberOfFramesToCompose-t-1)%this._numberOfFramesToCompose);e.uniform1f(this._getUniformLocation("u_Gamma"),this._gamma),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4)}_createProgram(){const e=this._gl,t=e.createShader(e.VERTEX_SHADER),r=e.createShader(e.FRAGMENT_SHADER),n=e.createProgram();if(e.shaderSource(t,vertexShader),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))throw new Error(`failed to compile vertex shader: ${e.getShaderInfoLog(t)}`);if(e.shaderSource(r,this._povEmulation?fragmentShaderPov:fragmentShaderPlain),e.compileShader(r),!e.getShaderParameter(t,e.COMPILE_STATUS))throw new Error(`failed to compile fragment shader: ${e.getShaderInfoLog(r)}`);if(e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw new Error(`failed to link program: ${e.getProgramInfoLog(n)}`);e.useProgram(n),this._program&&e.deleteProgram(this._program),this._vertexShader&&e.deleteShader(this._vertexShader),this._fragmentShader&&e.deleteShader(this._fragmentShader),this._program=n,this._vertexShader=t,this._fragmentShader=r}_allocateTextures(){for(let e=0;e<this._numberOfFramesToCompose;e++)this._allocateTexture(e)}_configureTextures(){for(let e=0;e<this._numberOfFramesToCompose;e++)this._configureTexture(e)}_allocateTexture(e){const t=this._gl,r=t.createTexture();t.activeTexture(t[`TEXTURE${e}`]),t.bindTexture(t.TEXTURE_2D,r),this._textures[e]=r}_configureTexture(e){const t=this._gl;t.activeTexture(t[`TEXTURE${e}`]),t.bindTexture(t.TEXTURE_2D,this._textures[e]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this._interpolation?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this._interpolation?t.LINEAR:t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1)}_createBuffers(){const e=this._gl,t=e.createBuffer(),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),e.STATIC_DRAW),this._vertexBuffer=t,this._textureCoordinateBuffer=r}_recalculateVertexBuffer(){const e=this._gl,t=this._canvas.width,r=this._canvas.height,n=t>0?2/t:1,i=r>0?2/r:1;let a,s,o,u;this._aspect*r<=t?(s=2,a=this._aspect*r*n,u=1,o=Math.floor(-this._aspect*r)/2*n):(s=t/this._aspect*i,a=2,u=Math.floor(t/this._aspect)/2*i,o=-1);const c=[o+a,u,o,u,o+a,u-s,o,u-s];e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(c),e.STATIC_DRAW)}_getAttribLocation(e){const t=this._gl.getAttribLocation(this._program,e);if(t<0)throw new Error(`unable to locate attribute ${e}`);return t}_getUniformLocation(e){const t=this._gl.getUniformLocation(this._program,e);if(t<0)throw new Error(`unable to locate uniform ${e}`);return t}_setupAttribs(){const e=this._gl;e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.enableVertexAttribArray(this._getAttribLocation("a_VertexPosition")),e.vertexAttribPointer(this._getAttribLocation("a_VertexPosition"),2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._textureCoordinateBuffer),e.enableVertexAttribArray(this._getAttribLocation("a_TextureCoordinate")),e.vertexAttribPointer(this._getAttribLocation("a_TextureCoordinate"),2,e.FLOAT,!1,0,0)}}function mkSwitch(e){return{type:0,swtch:e}}function mkTrigger(e){return{type:1,trigger:e}}class KeyboardIO{constructor(e,t=KeyboardIO.defaultMappings){this._target=e,this.toggleFullscreen=new lib_1,this.hardReset=new lib_1,this.togglePause=new lib_1,this._keydownListener=null,this._keyupListener=null,this._joystick0=null,this._joystick1=null,this._controlPanel=null,this._dispatchTable={},this._compiledMappings=new Map,this._compileMappings(t)}bind(e,t,r){this._joystick0||(this._joystick0=e,this._joystick1=t,this._controlPanel=r,this._updateActionTable(),this._keydownListener=e=>{if(!this._compiledMappings.has(e.keyCode))return;const t=(e.shiftKey?4:0)|(e.ctrlKey?1:0)|(e.altKey?2:0);if(!this._compiledMappings.get(e.keyCode).has(t))return;const r=this._compiledMappings.get(e.keyCode).get(t);if(void 0!==r){e.preventDefault();const t=this._dispatchTable[r];switch(t.type){case 0:t.swtch.toggle(!0);break;case 1:t.trigger.dispatch(void 0)}}},this._keyupListener=e=>{if(this._compiledMappings.has(e.keyCode))for(const t of this._compiledMappings.get(e.keyCode).values()){e.preventDefault();const r=this._dispatchTable[t];switch(r.type){case 0:r.swtch.toggle(!1)}}},this._target.addEventListener("keydown",this._keydownListener),this._target.addEventListener("keyup",this._keyupListener))}unbind(){this._joystick0&&(this._target.removeEventListener("keydown",this._keydownListener),this._target.removeEventListener("keyup",this._keyupListener),this._joystick0=this._joystick1=this._controlPanel=null,this._keydownListener=this._keyupListener=null)}_updateActionTable(){this._dispatchTable[12]=mkTrigger(this.toggleFullscreen),this._dispatchTable[13]=mkTrigger(this.hardReset),this._dispatchTable[14]=mkTrigger(this.togglePause),this._dispatchTable[0]=mkSwitch(this._controlPanel.getSelectSwitch()),this._dispatchTable[1]=mkSwitch(this._controlPanel.getResetButton()),this._dispatchTable[2]=mkSwitch(this._joystick0.getLeft()),this._dispatchTable[3]=mkSwitch(this._joystick0.getRight()),this._dispatchTable[4]=mkSwitch(this._joystick0.getUp()),this._dispatchTable[5]=mkSwitch(this._joystick0.getDown()),this._dispatchTable[10]=mkSwitch(this._joystick0.getFire()),this._dispatchTable[6]=mkSwitch(this._joystick1.getLeft()),this._dispatchTable[7]=mkSwitch(this._joystick1.getRight()),this._dispatchTable[8]=mkSwitch(this._joystick1.getUp()),this._dispatchTable[9]=mkSwitch(this._joystick1.getDown()),this._dispatchTable[11]=mkSwitch(this._joystick1.getFire())}_compileMappings(e){const t=(e,t,r)=>{if(0!=(-8&r))throw new Error(`invalid modifier set ${r}`);this._compiledMappings.has(t)||this._compiledMappings.set(t,new Map),this._compiledMappings.get(t).set(r,e)};e.forEach(e=>{const r=e.action;(Array.isArray(e.spec)?e.spec:[e.spec]).forEach(e=>t(r,"object"==typeof e?e.keycode:e,"object"==typeof e?e.modifiers:0))})}}!function(e){e.defaultMappings=[{action:0,spec:{keycode:32,modifiers:4}},{action:1,spec:{keycode:13,modifiers:4}},{action:2,spec:[65,37]},{action:3,spec:[68,39]},{action:4,spec:[87,38]},{action:5,spec:[83,40]},{action:10,spec:[32,86]},{action:6,spec:74},{action:7,spec:76},{action:8,spec:73},{action:9,spec:75},{action:11,spec:66},{action:12,spec:13},{action:13,spec:{keycode:82,modifiers:4}},{action:14,spec:80}]}(KeyboardIO||(KeyboardIO={}));class WaveformChannel{constructor(e){this._cache=e,this._context=null,this._source=null,this._gain=null,this._audio=null,this._volume=0,this._masterVolume=1}init(e,t){this._context=e,this._gain=this._context.createGain(),this._gain.connect(t)}bind(e){this._audio||(this._audio=e,this._volume=this._audio.getVolume(),this._updateGain(),this._audio.volumeChanged.addHandler(WaveformChannel._onVolumeChanged,this),this._audio.bufferChanged.addHandler(WaveformChannel._onBufferChanged,this),this._audio.stop.addHandler(WaveformChannel._onStop,this))}unbind(){this._audio&&(this._audio.volumeChanged.removeHandler(WaveformChannel._onVolumeChanged,this),this._audio.bufferChanged.removeHandler(WaveformChannel._onBufferChanged,this),this._audio.stop.removeHandler(WaveformChannel._onStop,this),this._source&&(this._source.stop(),this._source=null),this._audio=null)}setMasterVolume(e){this._masterVolume=e,this._updateGain()}static _onVolumeChanged(e,t){t._volume=e,t._updateGain()}static _onBufferChanged(e,t){if(!t._cache.has(e)){const r=t._audio.getBuffer(e),n=t._context.createBuffer(1,r.getLength(),r.getSampleRate());n.getChannelData(0).set(r.getContent()),t._cache.set(e,n)}const r=t._cache.get(e),n=t._context.createBufferSource();t._source&&t._source.stop(),n.loop=!0,n.buffer=r,n.connect(t._gain),n.start(),t._source=n}static _onStop(e,t){t._source&&(t._source.stop(),t._source=null)}_updateGain(){this._gain.gain.value=this._volume*this._masterVolume}}class RingBuffer{constructor(e){this._capacity=e,this._size=0,this._index=0,this._buffer=new Array(this._capacity);for(let e=0;e<this._capacity;e++)this._buffer[e]=null}size(){return this._size}pop(){if(0===this._size)return;const e=this._buffer[this._index];return this._buffer[this._index]=null,this._index=(this._index+1)%this._capacity,this._size--,e}push(e){return this._size===this._capacity&&this.pop(),this._buffer[(this._index+this._size++)%this._capacity]=e,this}forEach(e){for(let t=0;t<this._size;t++)e(this._buffer[(this._index+t)%this._capacity]);return this}clear(){for(let e=0;e<this._capacity;e++)this._buffer[e]=null;return this._size=0,this._index=0,this}}class LinearReasmpler{constructor(){this._buffer=new Float32Array(2),this._fractionalIndex=0,this._needsData=!1,this._ratio=0,this.reset(1,1)}reset(e,t){this._ratio=e/t,this._needsData=!1,this._fractionalIndex=0;for(let e=0;e<2;e++)this._buffer[e]=0}get(){const e=(1-this._fractionalIndex)*this._buffer[0]+this._fractionalIndex*this._buffer[1];return this._fractionalIndex+=this._ratio,this._fractionalIndex>1&&(this._fractionalIndex-=1,this._needsData=!0),e}push(e){this._buffer[0]=this._buffer[1],this._buffer[1]=e,this._needsData=!1}needsData(){return this._needsData}}class PCMChannel{constructor(e=1024){this._hostFragmentSize=e,this._outputSampleRate=0,this._bufferSize=0,this._volume=1,this._gain=null,this._processor=null,this._bufferUnderrun=!1,this._fragmentRing=null,this._fragmentSize=0,this._inputSampleRate=0,this._fragmentIndex=0,this._currentFragment=null,this._lastFragment=null,this._resampler=new LinearReasmpler}init(e,t){this._outputSampleRate=e.sampleRate,this._gain=e.createGain(),this._gain.gain.value=this._volume,this._gain.connect(t),this._processor=e.createScriptProcessor(this._hostFragmentSize,1,1),this._bufferSize=this._processor.bufferSize,this._processor.connect(this._gain),this._processor.onaudioprocess=e=>this._processAudio(e),e.createBuffer(1,1,e.sampleRate).getChannelData(0).set([0])}bind(e){this.unbind(),this._audio=e,this._fragmentSize=e.getFrameSize(),this._inputSampleRate=e.getSampleRate(),this._fragmentIndex=0,this._lastFragment=null,this._bufferUnderrun=!0,this._fragmentRing=new RingBuffer(Math.ceil(4*this._bufferSize/this._outputSampleRate/this._fragmentSize*this._inputSampleRate)),this._audio.newFrame.addHandler(PCMChannel._onNewFragment,this),this._resampler.reset(this._inputSampleRate,this._outputSampleRate)}unbind(){this._audio&&(this._audio.newFrame.removeHandler(PCMChannel._onNewFragment,this),this._lastFragment&&(this._lastFragment.release(),this._lastFragment=null),this._currentFragment&&(this._currentFragment.release(),this._currentFragment=null),this._fragmentRing&&(this._fragmentRing.forEach(e=>e.release()),this._fragmentRing.clear(),this._fragmentRing=null))}setMasterVolume(e){this._volume=e}static _onNewFragment(e,t){t._fragmentRing.push(e),t._currentFragment||(t._currentFragment=t._fragmentRing.pop(),t._fragmentIndex=0)}_processAudio(e){if(!this._audio)return;const t=e.outputBuffer.getChannelData(0);let r=0;const n=e=>{const n=this._lastFragment&&this._lastFragment.get();for(;r<e;)this._resampler.needsData()&&(this._resampler.push(this._audio&&this._audio.isPaused()||!n?0:n[this._fragmentIndex++]*this._volume),this._fragmentIndex>=this._fragmentSize&&(this._fragmentIndex=0)),t[r++]=this._resampler.get()};this._currentFragment&&this._bufferUnderrun&&(n(this._bufferSize>>>1),this._bufferUnderrun=!1);let i=this._currentFragment&&this._currentFragment.get();for(;r<this._bufferSize&&this._currentFragment;)this._resampler.needsData()&&(this._resampler.push(i[this._fragmentIndex++]*this._volume),this._fragmentIndex>=this._fragmentSize&&(this._fragmentIndex=0,this._lastFragment&&this._lastFragment.release(),this._lastFragment=this._currentFragment,this._currentFragment=this._fragmentRing.pop(),i=this._currentFragment&&this._currentFragment.get())),t[r++]=this._resampler.get();r<this._bufferSize&&(this._bufferUnderrun=!0),n(this._bufferSize)}}const isSafari="safari"in window,isIOS=!!navigator.platform.match(/iPhone|iPad|iPod/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,audioNeedsInteraction=isIOS||isSafari,INTERACTION_EVENTS=["touchstart","click","keydown"],audioContextCtor=window.AudioContext||window.webkitAudioContext;class PreallocatedContext{constructor(){if(this._interactionListener=()=>{const e=this.context;this.interactionRequired=!1,INTERACTION_EVENTS.forEach(e=>document.removeEventListener(e,this._interactionListener)),this.mutex.runExclusive(()=>(e.resume(),new Promise(t=>setTimeout(()=>{e.suspend(),t()},100))))},this.mutex=new lib_1$1,this.context=null,this.interactionRequired=!0,audioContextCtor){this.context=new audioContextCtor;try{this.context.destination.channelCount=1}catch(e){console.warn("audio driver: failed to set channel count")}INTERACTION_EVENTS.forEach(e=>document.addEventListener(e,this._interactionListener))}}stopListening(){INTERACTION_EVENTS.forEach(e=>document.removeEventListener(e,this._interactionListener))}}let preallocatedContext=audioNeedsInteraction?new PreallocatedContext:null;class WebAudioDriver{constructor(e=0,t=0,r){this._touchListener=()=>{INTERACTION_EVENTS.forEach(e=>document.removeEventListener(e,this._touchListener,!0)),this._context&&(this._context.resume(),setTimeout(()=>{this._mutex.runExclusive(()=>this._suspended?this._context.suspend():this._context.resume())},10))},this._context=null,this._merger=null,this._waveformChannels=null,this._pcmChannels=null,this._channels=null,this._cache=new Map,this._mutex=new lib_1$1,this._suspended=!0,this._isBound=!1,this._waveformChannels=new Array(e),this._pcmChannels=new Array(t);for(let t=0;t<e;t++)this._waveformChannels[t]=new WaveformChannel(this._cache);for(let e=0;e<t;e++)this._pcmChannels[e]=new PCMChannel(r);this._channels=[...this._waveformChannels,...this._pcmChannels]}init(){if(preallocatedContext){const e=preallocatedContext;preallocatedContext=new PreallocatedContext,this._context=e.context,e.stopListening(),this._mutex=e.mutex,e.interactionRequired&&INTERACTION_EVENTS.forEach(e=>document.addEventListener(e,this._touchListener,!0))}else{if(!audioContextCtor)throw new Error("web audio is not supported by runtime");this._context=new audioContextCtor;try{this._context.destination.channelCount=1}catch(e){console.warn("audio driver: failed to set channel count")}}this._merger=this._context.createChannelMerger(this._channels.length),this._merger.connect(this._context.destination),this._channels.forEach(e=>e.init(this._context,this._merger))}bind(e=[],t=[]){if(!this._isBound){if(e.length!==this._waveformChannels.length)throw new Error(`invalid number of waveform sources: expected ${this._waveformChannels.length}, got ${e.length}`);if(t.length!==this._pcmChannels.length)throw new Error(`invalid number of waveform sources: expected ${this._pcmChannels.length}, got ${t.length}`);this._waveformChannels.forEach((t,r)=>t.bind(e[r])),this._pcmChannels.forEach((e,r)=>e.bind(t[r])),this._isBound=!0,this.resume()}}unbind(){this._isBound&&(this._channels.forEach(e=>e.unbind()),this._isBound=!1,this.pause())}setMasterVolume(e,t){this._channels[e].setMasterVolume(t)}pause(){return this._mutex.runExclusive(()=>{if(!this._suspended)return this._suspended=!0,new Promise(e=>{this._context.suspend().then(e,e),setTimeout(e,200)})})}resume(){return this._mutex.runExclusive(()=>{if(this._suspended)return this._suspended=!1,new Promise(e=>{this._context.resume().then(e,e),setTimeout(e,200)})})}close(){this._mutex.runExclusive(()=>this._context.close())}}class WebAudioDriver$1{constructor(e){this._fragmentSize=e,this._pcmAudio=!1,this._volume=1}init(){}bind(e,t){if(!this._channels){this._channels=[...t],this._driver&&this._pcmAudio===e||(this._driver&&this._driver.close(),this._driver=e?new WebAudioDriver(0,this._channels.length,this._fragmentSize):new WebAudioDriver(this._channels.length,0,this._fragmentSize),this._driver.init()),e?this._driver.bind([],this._channels):this._driver.bind(this._channels,[]);for(let e=0;e<this._channels.length;e++)this._driver.setMasterVolume(e,this._volume);this._pcmAudio=e}}unbind(){this._channels&&(this._driver.unbind(),this._channels=null)}setMasterVolume(e){if(this._volume=e,this._channels)for(let e=0;e<this._channels.length;e++)this._driver.setMasterVolume(e,this._volume)}getMasterVolume(){return this._volume}pause(){return __awaiter(this,void 0,void 0,(function*(){this._driver&&(yield this._driver.pause())}))}resume(){return __awaiter(this,void 0,void 0,(function*(){this._driver&&(yield this._driver.resume())}))}}var screenfull=createCommonjsModule((function(e){
/*!
    * screenfull
    * v4.2.1 - 2019-07-27
    * (c) Sindre Sorhus; MIT License
    */
!function(){var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=e.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var e,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,i=r.length,a={};n<i;n++)if((e=r[n])&&e[1]in t){for(n=0;n<e.length;n++)a[r[0][n]]=e[n];return a}return!1}(),a={change:i.fullscreenchange,error:i.fullscreenerror},s={request:function(e){return new Promise(function(r,a){var s,o=i.requestFullscreen,u=function(){this.off("change",u),r()}.bind(this);this.on("change",u),e=e||t.documentElement,s=/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[o]():e[o](n?Element.ALLOW_KEYBOARD_INPUT:{}),Promise.resolve(s).catch(a)}.bind(this))},exit:function(){return new Promise(function(e){if(this.isFullscreen){var r=function(){this.off("change",r),e()}.bind(this);t[i.exitFullscreen](),this.on("change",r)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,r){var n=a[e];n&&t.addEventListener(n,r,!1)},off:function(e,r){var n=a[e];n&&t.removeEventListener(n,r,!1)},raw:i};i?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(t[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[i.fullscreenEnabled])}}}),r?(e.exports=s,e.exports.default=s):window.screenfull=s):r?e.exports=!1:window.screenfull=!1}()}));const noFullscrenApi=isIOS;class FullscreenVideoDriver{constructor(e,t=1e5,r="stellerator-fullscreen"){this._videoDriver=e,this._zIndex=t,this._fullscreenClass=r,this._resizeListener=()=>{this._resizeHandle||(this._resizeHandle=setTimeout(()=>{this._resizeHandle=null,this._adjustSizeForFullscreen()},100))},this._resizeHandle=null,this._changeListener=this._onChange.bind(this),this._engaged=!1}engage(){this._engaged||(this._engaged=!0,noFullscrenApi||!screenfull?(this._adjustSizeForFullscreen(),window.addEventListener("resize",this._resizeListener),this._engaged=!0):(screenfull.on("change",this._changeListener),screenfull.request(this._videoDriver.getCanvas())))}disengage(){this._engaged&&(noFullscrenApi||!screenfull?(this._resetSize(),window.removeEventListener("resize",this._resizeListener),this._engaged=!1):screenfull.exit())}toggle(){this._engaged?this.disengage():this.engage()}isEngaged(){return this._engaged}_onChange(){screenfull&&(screenfull.isFullscreen?(window.addEventListener("resize",this._resizeListener),this._adjustSizeForFullscreen()):(this._resetSize(),window.removeEventListener("resize",this._resizeListener),screenfull.off("change",this._changeListener),this._engaged=!1))}_resetSize(){const e=this._videoDriver.getCanvas();this._resizeHandle&&(clearTimeout(this._resizeHandle),this._resizeHandle=null),e.style.width="",e.style.height="",e.style.maxWidth="",e.style.maxHeight="",noFullscrenApi&&(e.style.position="",e.style.top="",e.style.left="",e.style.zIndex=""),document.body.classList.remove(this._fullscreenClass),setTimeout(()=>this._videoDriver.resize(),0)}_adjustSizeForFullscreen(){const e=this._videoDriver.getCanvas();this._videoDriver.resize(window.innerWidth,window.innerHeight),e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",e.style.maxWidth=window.innerWidth+"px",e.style.maxHeight=window.innerHeight+"px",noFullscrenApi&&(e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.zIndex=""+this._zIndex),document.body.classList.add(this._fullscreenClass)}}class DoubleTapDetector{constructor(e=500,t=200){this._maxTapLength=e,this._timeout=t,this.trigger=new lib_1,this._dispatch=!1,this._touching=!1,this._lastTouchEligible=!1,this._lastTouchStart=0,this._lastTouchEnd=0}startTouch(){this._lastTouchStart=Date.now(),this._touching||(this._touching=!0,this._dispatch=this._lastTouchEligible&&this._lastTouchStart-this._lastTouchEnd<this._timeout)}endTouch(){this._lastTouchEnd=Date.now(),this._dispatch&&(this._dispatch=!1,this.trigger.dispatch(void 0)),this._touching&&(this._touching=!1,this._lastTouchEligible=this._lastTouchStart-this._lastTouchEnd<this._maxTapLength)}cancelTouch(){this.endTouch(),this._lastTouchEligible=!1}isDispatching(){return this._dispatch}}class TouchIO{constructor(e,t=15,r=!1){this._canvas=e,this._joystickSensitivity=t,this._leftHanded=r,this._onTouchStart=e=>{let t=!1;for(let r=0;r<e.changedTouches.length;r++){const n=new NormalizedTouch(e.changedTouches.item(r),this._canvas),i=n.touch.identifier;if((this._leftHanded?n.x>.5:n.x<=.5)?n.y<=.5?n.type="alt":n.type=this._isAlt?"pause":"fire":n.y<=.5?n.type=this._isAlt?"select":"joystick":n.type=this._isAlt?"reset":"joystick",!this._pendingTouches.has(i)&&!this._pendingTouches.has(n.type)){switch(this._pendingTouches.set(i,n),this._pendingTouches.set(n.type,n),n.type){case"alt":this._isAlt=!0,this._fullscreenDoubleTapDetector.startTouch();break;case"fire":this._joystick.getFire().toggle(!0);break;case"pause":this.togglePause.dispatch(void 0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"select":this._select.toggle(!0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"reset":this._reset.toggle(!0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"joystick":break;default:throw new Error("invalid touch type")}(this._cancelEvent(n)||this._fullscreenDoubleTapDetector.isDispatching())&&(t=!0)}}t&&e.preventDefault()},this._onTouchEnd=e=>{let t=!1;for(let r=0;r<e.changedTouches.length;r++){const n=this._pendingTouches.get(e.changedTouches.item(r).identifier);if(n){switch((this._cancelEvent(n)||this._fullscreenDoubleTapDetector.isDispatching())&&(t=!0),n.type){case"alt":this._isAlt=!1,this._fullscreenDoubleTapDetector.endTouch();break;case"fire":this._joystick.getFire().toggle(!1);break;case"select":this._select.toggle(!1);break;case"reset":this._reset.toggle(!1);break;case"joystick":this._joystick.getDown().toggle(!1),this._joystick.getUp().toggle(!1),this._joystick.getLeft().toggle(!1),this._joystick.getRight().toggle(!1);break;case"pause":break;default:throw new Error("invalid touch type")}this._pendingTouches.delete(n.type),this._pendingTouches.delete(n.touch.identifier)}}t&&e.preventDefault()},this._onTouchMove=e=>{let t=!1;for(let r=0;r<e.changedTouches.length;r++){const n=e.changedTouches.item(r),i=this._pendingTouches.get(n.identifier);if(!i)continue;if(this._cancelEvent(i)&&(t=!0),"joystick"!==i.type)continue;const a=n.clientX-i.x0,s=n.clientY-i.y0,o=Math.sqrt(a*a+s*s),u=Math.abs(s/o),c=Math.abs(a/o),l=o>this._joystickSensitivity;this._joystick.getLeft().toggle(l&&a<0&&c>.5),this._joystick.getRight().toggle(l&&a>0&&c>.5),this._joystick.getUp().toggle(l&&s<0&&u>.5),this._joystick.getDown().toggle(l&&s>0&&u>.5),o>3*this._joystickSensitivity&&(i.x0+=a/o*(o-3*this._joystickSensitivity),i.y0+=s/o*(o-3*this._joystickSensitivity))}t&&e.preventDefault()},this.togglePause=new lib_1,this._fullscreenDoubleTapDetector=new DoubleTapDetector,this._bound=!1,this._joystick=null,this._select=null,this._reset=null,this._isAlt=!1,this._pendingTouches=new Map,this.toggleFullscreen=this._fullscreenDoubleTapDetector.trigger}static isSupported(){return"ontouchstart"in window}bind(e,t){this._bound||(this._bound=!0,this._joystick=e,this._select=t.getSelectSwitch(),this._reset=t.getResetButton(),this._bindListeners())}unbind(){this._bound&&(this._unbindListeners(),this._bound=!1,this._joystick=this._reset=this._select=null)}_bindListeners(){this._canvas.addEventListener("touchstart",this._onTouchStart),this._canvas.addEventListener("touchend",this._onTouchEnd),this._canvas.addEventListener("touchmove",this._onTouchMove)}_unbindListeners(){this._canvas.removeEventListener("touchstart",this._onTouchStart),this._canvas.removeEventListener("touchend",this._onTouchEnd),this._canvas.removeEventListener("touchmove",this._onTouchMove)}_cancelEvent(e){return"alt"!==e.type}}class NormalizedTouch{constructor(e,t){this.touch=e,this.type="unknown";const r=t.getBoundingClientRect();this.x=(e.clientX-r.left)/r.width,this.y=(e.clientY-r.top)/r.height,this.x0=e.clientX,this.y0=e.clientY}}var Emulation_1;const CANVAS_ID="stellerator-canvas",WORKER_URL="worker/stellerator.min.js";function error(e){return{state:"error",error:e}}function cpuType(e,t){const r=e.cpuEmulation||t.cpuEmulation;switch(r){case"cycle":return CpuFactory.Type.stateMachine;case"instruction":return CpuFactory.Type.batchedAccess;default:throw new Error(`cannot happen: invalid cpu emulation mod e${r}`)}}function tvMode(e){switch(e.tvMode){case"ntsc":return 0;case"pal":return 1;case"secam":return 2;default:throw new Error(`cannot happen: invalid TV mode ${e.tvMode}`)}}function config$1(e,t){return{tvMode:tvMode(e),enableAudio:e.volume*t.volume>0,randomSeed:void 0===e.rngSeed?-1:e.rngSeed,emulatePaddles:e.emulatePaddles,frameStart:void 0===e.firstVisibleLine?-1:e.firstVisibleLine,pcmAudio:"pcm"===(e.audioEmulation||t.audioEmulation),cpuType:cpuType(e,t)}}let Emulation=Emulation_1=class{constructor(e){this._storage=e,this._onEmulationStarted=({hash:e,switches:t})=>__awaiter(this,void 0,void 0,(function*(){try{yield this._emulationMutex.runExclusive(()=>this._startEmulation(e,t))}catch(e){this._ports.onEmulationStateChange_.send(error(e.message))}})),this._onEmulationStopped=()=>this._emulationMutex.runExclusive(()=>this._stopEmulation()),this._onEmulationPaused=()=>this._emulationMutex.runExclusive(()=>this._pauseEmulation()),this._onEmulationResumed=()=>this._emulationMutex.runExclusive(()=>this._resumeEmulation()),this._onEmulationReset=()=>this._emulationMutex.runExclusive(()=>this._resetEmulation()),this._onToggleFullscreen=()=>this._fullscreenDriver&&this._fullscreenDriver.toggle(),this._onSetLimitFramerate=e=>this._emulationService.setRateLimit(e),this._onInputTogglePause=()=>this._ports.onInputDriverEvent_.send("pause"),this._onInputReset=()=>this._ports.onInputDriverEvent_.send("reset"),this._onInputToggleFullscreen=()=>this._ports.onInputDriverEvent_.send("fullscreen"),this._onWindowResize=()=>this._videoDriver&&this._videoDriver.resize(),this._onUpdateConsoleSwitches=e=>this._emulationMutex.runExclusive(()=>this._updateConsoleSwitches(e)),this._onMutation=e=>{if(!e.some(e=>e.addedNodes))return;const t=document.getElementById(CANVAS_ID);t===this._canvas||this._handledCanvasElements.has(t)||(t&&this._handledCanvasElements.add(t),t&&this._canvas?this._canvasMutex.runExclusive(()=>this._rebindCanvas(t)):t?this._canvasMutex.runExclusive(()=>this._bindCanvas(t)):this._canvasMutex.runExclusive(()=>this._unbindCanvas()))},this._emulationMutex=new lib_1$1,this._canvasMutex=new lib_1$1,this._driverManager=new DriverManager,this._currentCartridgeHash=null,this._canvas=null,this._videoDriver=null,this._fullscreenDriver=null,this._mutationObserver=new MutationObserver(this._onMutation),this._keyboardDriver=new KeyboardIO(document),this._audioDriver=new WebAudioDriver$1,this._touchDriver=null,this._currentConfig=null,this._handledCanvasElements=new WeakSet,this._emulationService=new EmulationService(WORKER_URL),this._emulationServiceReady=this._emulationService.init(),this._driverManager.bind(this._emulationService),this._audioDriver.init(),this._keyboardDriver.hardReset.addHandler(this._onInputReset),this._keyboardDriver.togglePause.addHandler(this._onInputTogglePause),this._keyboardDriver.toggleFullscreen.addHandler(this._onInputToggleFullscreen),window.addEventListener("resize",this._onWindowResize)}init(e){this._ports=e,e.startEmulation_.subscribe(this._onEmulationStarted),e.stopEmulation_.subscribe(this._onEmulationStopped),e.pauseEmulation_.subscribe(this._onEmulationPaused),e.resumeEmulation_.subscribe(this._onEmulationResumed),e.resetEmulation_.subscribe(this._onEmulationReset),e.toggleFullscreen_.subscribe(this._onToggleFullscreen),e.setLimitFramerate_.subscribe(this._onSetLimitFramerate),e.updateConsoleSwitches_.subscribe(this._onUpdateConsoleSwitches),this._emulationService.stateChanged.addHandler(Emulation_1._onEmulationStateChange,this),this._emulationService.frequencyUpdate.addHandler(Emulation_1._onFrequencyChange,this),this._mutationObserver.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0})}updateCartridge(e){return __awaiter(this,void 0,void 0,(function*(){if(e.hash!==this._currentCartridgeHash)return;switch(this._emulationService.getState()){case EmulationServiceInterface.State.running:case EmulationServiceInterface.State.paused:break;default:return}const t=yield this._storage.getSettings();this._audioDriver.setMasterVolume(e.volume*t.volume/1e4),this._videoDriver&&this._videoDriver.enablePovEmulation(void 0===e.phosphorEmulation?t.phosphorEmulation:e.phosphorEmulation)}))}updateSettings(e){return __awaiter(this,void 0,void 0,(function*(){switch(this._emulationService.getState()){case EmulationServiceInterface.State.running:case EmulationServiceInterface.State.paused:break;default:return}const t=yield this._storage.getCartridge(this._currentCartridgeHash);this._audioDriver.setMasterVolume(t.volume*e.volume/1e4),this._videoDriver&&this._videoDriver.enablePovEmulation(void 0===t.phosphorEmulation?e.phosphorEmulation:t.phosphorEmulation).enableInterpolation(e.smoothScaling).enableSyncRendering(e.videoSync).setGamma(e.gammaCorrection)}))}static _onEmulationStateChange(e,t){t._ports.onEmulationStateChange_.send(t._emulationState(e)),e===EmulationServiceInterface.State.running?t._audioDriver.resume():t._audioDriver.pause()}static _onFrequencyChange(e,t){t._emulationService.getState()===EmulationServiceInterface.State.running&&t._ports.onEmulationStateChange_.send({state:"running",frequency:e})}_startEmulation(e,t){return __awaiter(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.stop();const[r,n,i]=yield Promise.all([this._storage.getCartridge(e),this._storage.getCartridgeImage(e),this._storage.getSettings()]);if(!r||!n)throw new Error(`invalid cartridge hash ${e}`);const a=config$1(r,i);this._currentConfig&&this._currentConfig.pcmAudio===a.pcmAudio||(this._driverManager.removeDriver(this._audioDriver),this._driverManager.addDriver(this._audioDriver,(e,t)=>t.bind(a.pcmAudio,a.pcmAudio?[e.getPCMChannel()]:e.getWaveformChannels()))),this._audioDriver.setMasterVolume(r.volume*i.volume/1e4),this._currentConfig=config$1(r,i),yield this._emulationService.start(n,this._currentConfig,r.cartridgeType),this._updateConsoleSwitches(t),yield this._emulationService.resume(),this._currentCartridgeHash=e}))}_stopEmulation(){return __awaiter(this,void 0,void 0,(function*(){yield this._emulationService.stop(),this._currentCartridgeHash=null}))}_pauseEmulation(){return __awaiter(this,void 0,void 0,(function*(){yield this._emulationService.pause()}))}_resumeEmulation(){return __awaiter(this,void 0,void 0,(function*(){this._emulationService.getState()===EmulationServiceInterface.State.paused&&(yield this._emulationService.resume())}))}_resetEmulation(){return __awaiter(this,void 0,void 0,(function*(){yield this._emulationService.reset()}))}_updateConsoleSwitches(e){const t=this._emulationService.getEmulationContext();if(!t)return;const r=t.getControlPanel();r.getDifficultySwitchP0().toggle("pro"===e.difficultyP0),r.getDifficultySwitchP1().toggle("pro"===e.difficultyP1),r.getColorSwitch().toggle("bw"===e.color)}_createAndBindVideoDriver(e){return __awaiter(this,void 0,void 0,(function*(){this._removeVideoDriver();const[t,r]=yield Promise.all([this._storage.getSettings(),this._currentCartridgeHash&&this._storage.getCartridge(this._currentCartridgeHash)]);this._canvas=e,this._videoDriver=new WebglVideoDriver(this._canvas,{gamma:t.gammaCorrection,povEmulation:r&&void 0!==r.phosphorEmulation?r.phosphorEmulation:t.phosphorEmulation}),this._videoDriver.init().enableInterpolation(t.smoothScaling).enableSyncRendering(t.videoSync),this._driverManager.addDriver(this._videoDriver,(e,t)=>t.bind(e.getVideo())),this._fullscreenDriver=new FullscreenVideoDriver(this._videoDriver)}))}_bindCanvas(e){var t;return __awaiter(this,void 0,void 0,(function*(){const r=yield this._storage.getSettings();yield this._createAndBindVideoDriver(e),this._driverManager.addDriver(this._keyboardDriver,(e,t)=>t.bind(e.getJoystick(0),e.getJoystick(1),e.getControlPanel())),(null!=(t=r.touchControls)?t:TouchIO.isSupported())&&(this._touchDriver=new TouchIO(e,r.virtualJoystickSensitivity,r.leftHanded),this._touchDriver.toggleFullscreen.addHandler(this._onInputToggleFullscreen),this._touchDriver.togglePause.addHandler(this._onInputTogglePause),this._driverManager.addDriver(this._touchDriver,(e,t)=>t.bind(e.getJoystick(0),e.getControlPanel())))}))}_rebindCanvas(e){return __awaiter(this,void 0,void 0,(function*(){yield this._createAndBindVideoDriver(e)}))}_unbindCanvas(){return __awaiter(this,void 0,void 0,(function*(){this._driverManager.removeDriver(this._keyboardDriver),this._touchDriver&&(this._driverManager.removeDriver(this._touchDriver),this._touchDriver=null),yield this._removeVideoDriver(),this._handledCanvasElements.delete(this._canvas),this._canvas=null}))}_removeVideoDriver(){this._videoDriver&&(this._driverManager.removeDriver(this._videoDriver),this._videoDriver=null,this._fullscreenDriver.disengage(),this._fullscreenDriver=null)}_emulationState(e){switch(e){case EmulationServiceInterface.State.error:return error(this._emulationService.getLastError().message);case EmulationServiceInterface.State.running:return{state:"running"};case EmulationServiceInterface.State.paused:return{state:"paused"};case EmulationServiceInterface.State.stopped:return{state:"stopped"};default:throw new Error(`cannot happen: invalid emulation state ${e}`)}}};Emulation=Emulation_1=__decorate([inversify_8(),__param(0,inversify_11(Storage$1)),__metadata("design:paramtypes",[Storage$1])],Emulation);var Emulation$1=Emulation;let TrackCartridges=class{constructor(e,t){this._storage=e,this._emulation=t,this._onCartridgeUpdated=e=>__awaiter(this,void 0,void 0,(function*(){return this._mutex.runExclusive(()=>this._updateCartridge(e))})),this._onCartridgeDeleted=e=>this._storage.deleteCartridge(e),this._onDeleteAllCartridges=()=>this._storage.deleteAllCartridges(),this._mutex=new lib_1$1}init(e){e.updateCartridge_.subscribe(this._onCartridgeUpdated),e.deleteCartridge_.subscribe(this._onCartridgeDeleted),e.deleteAllCartridges_.subscribe(this._onDeleteAllCartridges)}_updateCartridge(e){return __awaiter(this,void 0,void 0,(function*(){yield this._storage.updateCartridge(e),yield this._emulation.updateCartridge(e)}))}};TrackCartridges=__decorate([inversify_8(),__param(0,inversify_11(Storage$1)),__param(1,inversify_11(Emulation$1)),__metadata("design:paramtypes",[Storage$1,Emulation$1])],TrackCartridges);var TrackCartridges$1=TrackCartridges;let TrackSettings=class{constructor(e,t){this._storage=e,this._emulation=t,this._onSettingsUpdate=e=>this._mutex.runExclusive(()=>this.updateSettings(e)),this._mutex=new lib_1$1}init(e){e.updateSettings_.subscribe(this._onSettingsUpdate)}updateSettings(e){return __awaiter(this,void 0,void 0,(function*(){yield this._storage.saveSettings(e),yield this._emulation.updateSettings(e)}))}};TrackSettings=__decorate([inversify_8(),__param(0,inversify_11(Storage$1)),__param(1,inversify_11(Emulation$1)),__metadata("design:paramtypes",[Storage$1,Emulation$1])],TrackSettings);var TrackSettings$1=TrackSettings;const VERSION_STORAGE_KEY="stellerator-ng-version";function main(){return __awaiter(this,void 0,void 0,(function*(){initialize();const e=CartridgeInfo.getAllTypes().map(e=>({key:e,description:CartridgeInfo.describeCartridgeType(e)})),t=new inversify_2({autoBindInjectable:!0,defaultScope:"Singleton"}),r=t.get(Storage$1);let n,i;try{[n,i]=yield Promise.all([r.getAllCartridges(),r.getSettings()])}catch(e){yield r.dropDatabase(),[n,i]=yield Promise.all([r.getAllCartridges(),r.getSettings()])}const a=version$1.replace(/^(.*)\+.*\.([0-9a-fA-F]+)$/,"$1 build $2"),s=localStorage.getItem(VERSION_STORAGE_KEY)!==a;localStorage.setItem(VERSION_STORAGE_KEY,a);const{ports:o}=Elm.Stellerator.Main.init({flags:{cartridges:n,cartridgeTypes:e,settings:i,defaultSettings:DEFAULT_SETTINGS,touchSupport:TouchIO.isSupported(),version:a,wasUpdated:s}});t.get(MediaApi$1).init(o),t.get(ScrollIntoView$1).init(o),t.get(AddCartridge$1).init(o),t.get(TrackCartridges$1).init(o),t.get(TrackSettings$1).init(o),t.get(Emulation$1).init(o),o.scrollToTop_.subscribe(()=>window.scrollTo(0,0)),o.blurCurrentElement_.subscribe(()=>document.activeElement.blur())}))}navigator.serviceWorker&&navigator.serviceWorker.register("./service-worker.js",{scope:"./"}),window.addEventListener("load",main)}();
//# sourceMappingURL=app.js.map
