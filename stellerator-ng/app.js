!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};var e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function r(t,e,n,r){var i,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(s<3?i(a):s>3?i(e,n,a):i(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a}function i(t,e){return function(n,r){e(n,r,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function a(t,e,n,r){return new(n||(n=Promise))((function(i,s){function a(t){try{u(r.next(t))}catch(t){s(t)}}function o(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,o)}u((r=r.apply(t,e||[])).next())}))}function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a}function c(t){return this instanceof c?(this.v=t,this):new c(t)}var h=Object.freeze({__proto__:null,__extends:function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},get __assign(){return e},__rest:n,__decorate:r,__param:i,__metadata:s,__awaiter:a,__generator:function(t,e){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},__exportStar:function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},__values:o,__read:u,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r},__await:c,__asyncGenerator:function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){s.push([t,e,n,r])>1||o(t,e)}))})}function o(t,e){try{(n=i[t](e)).value instanceof c?Promise.resolve(n.value.v).then(u,h):l(s[0][2],n)}catch(t){l(s[0][3],t)}var n}function u(t){o("next",t)}function h(t){o("throw",t)}function l(t,e){t(e),s.shift(),s.length&&o(s[0][0],s[0][1])}},__asyncDelegator:function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:c(t[r](e)),done:"return"===r}:i?i(e):e}:i}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=o(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}}}),l="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function f(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}var p=f,_=d;function g(t){if(p===setTimeout)return setTimeout(t,0);if((p===f||!p)&&setTimeout)return p=setTimeout,setTimeout(t,0);try{return p(t,0)}catch(e){try{return p.call(null,t,0)}catch(e){return p.call(this,t,0)}}}"function"==typeof l.setTimeout&&(p=setTimeout),"function"==typeof l.clearTimeout&&(_=clearTimeout);var b,v=[],m=!1,y=-1;function w(){m&&b&&(m=!1,b.length?v=b.concat(v):y=-1,v.length&&A())}function A(){if(!m){var t=g(w);m=!0;for(var e=v.length;e;){for(b=v,v=[];++y<e;)b&&b[y].run();y=-1,e=v.length}b=null,m=!1,function(t){if(_===clearTimeout)return clearTimeout(t);if((_===d||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(t);try{_(t)}catch(e){try{return _.call(null,t)}catch(e){return _.call(this,t)}}}(t)}}function k(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new E(t,e)),1!==v.length||m||g(A)}function E(t,e){this.fun=t,this.array=e}E.prototype.run=function(){this.fun.apply(null,this.array)};function x(){}var T=x,C=x,S=x,R=x,I=x,B=x,P=x;var O=l.performance||{},D=O.now||O.mozNow||O.msNow||O.oNow||O.webkitNow||function(){return(new Date).getTime()};var M=new Date;var F,L={nextTick:k,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:T,addListener:C,once:S,off:R,removeListener:I,removeAllListeners:B,emit:P,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*D.call(O),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-M)/1e3}},N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function j(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function U(t,e){return t(e={exports:{}},e.exports),e.exports}function z(t){return t&&t.default||t}
/*! *****************************************************************************
    Copyright (C) Microsoft. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */!function(t){!function(e){var n="object"==typeof N?N:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(t);function i(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===n.Reflect?n.Reflect=t:r=i(n.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,o=!s&&!a,u={create:s?function(){return P(Object.create(null))}:a?function(){return P({__proto__:null})}:function(){return P({})},has:o?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:o?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),h="object"==typeof L&&L.env&&"true"===L.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,s)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function s(t,e){return e}function a(t,e){return[t,e]}}():Map,f=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}():Set,d=new(h||"function"!=typeof WeakMap?function(){var t=u.create(),n=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var e;do{e="@@WeakMap@@"+a()}while(u.has(t,e));return t[e]=!0,e}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:u.create()})}return t[n]}function s(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function p(t,e,n){var r=d.get(t);if(y(r)){if(!n)return;r=new l,d.set(t,r)}var i=r.get(e);if(y(i)){if(!n)return;i=new l,r.set(e,i)}return i}function _(t,e,n){var r=p(e,n,!1);return!y(r)&&!!r.has(t)}function g(t,e,n){var r=p(e,n,!1);if(!y(r))return r.get(t)}function b(t,e,n,r){p(n,r,!0).set(t,e)}function v(t,e){var n=[],r=p(t,e,!1);if(y(r))return n;for(var s=function(t){var e=S(t,i);if(!T(e))throw new TypeError;var n=e.call(t);if(!A(n))throw new TypeError;return n}(r.keys()),a=0;;){var o=R(s);if(!o)return n.length=a,n;var u=o.value;try{n[a]=u}catch(t){try{I(s)}finally{throw t}}a++}}function m(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function y(t){return void 0===t}function w(t){return null===t}function A(t){return"object"==typeof t?null!==t:"function"==typeof t}function k(t,e){switch(m(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=S(t,r);if(void 0!==i){var s=i.call(t,n);if(A(s))throw new TypeError;return s}return function(t,e){if("string"===e){var n=t.toString;if(T(n))if(!A(i=n.call(t)))return i;if(T(r=t.valueOf))if(!A(i=r.call(t)))return i}else{var r;if(T(r=t.valueOf))if(!A(i=r.call(t)))return i;var i,s=t.toString;if(T(s))if(!A(i=s.call(t)))return i}throw new TypeError}(t,"default"===n?"number":n)}function E(t){var e=k(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function x(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function T(t){return"function"==typeof t}function C(t){return"function"==typeof t}function S(t,e){var n=t[e];if(null!=n){if(!T(n))throw new TypeError;return n}}function R(t){var e=t.next();return!e.done&&e}function I(t){var e=t.return;e&&e.call(t)}function B(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i?e:i===t?e:i}function P(t){return t.__=void 0,delete t.__,t}t("decorate",(function(t,e,n,r){if(y(n)){if(!x(t))throw new TypeError;if(!C(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!y(r)&&!w(r)){if(!C(r))throw new TypeError;e=r}}return e}(t,e)}if(!x(t))throw new TypeError;if(!A(e))throw new TypeError;if(!A(r)&&!y(r)&&!w(r))throw new TypeError;return w(r)&&(r=void 0),function(t,e,n,r){for(var i=t.length-1;i>=0;--i){var s=(0,t[i])(e,n,r);if(!y(s)&&!w(s)){if(!A(s))throw new TypeError;r=s}}return r}(t,e,n=E(n),r)})),t("metadata",(function(t,e){return function(n,r){if(!A(n))throw new TypeError;if(!y(r)&&!function(t){switch(m(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(t,e,n,r)}})),t("defineMetadata",(function(t,e,n,r){if(!A(n))throw new TypeError;return y(r)||(r=E(r)),b(t,e,n,r)})),t("hasMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return y(n)||(n=E(n)),function t(e,n,r){if(_(e,n,r))return!0;var i=B(n);return!w(i)&&t(e,i,r)}(t,e,n)})),t("hasOwnMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return y(n)||(n=E(n)),_(t,e,n)})),t("getMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return y(n)||(n=E(n)),function t(e,n,r){if(_(e,n,r))return g(e,n,r);var i=B(n);return w(i)?void 0:t(e,i,r)}(t,e,n)})),t("getOwnMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return y(n)||(n=E(n)),g(t,e,n)})),t("getMetadataKeys",(function(t,e){if(!A(t))throw new TypeError;return y(e)||(e=E(e)),function t(e,n){var r=v(e,n),i=B(e);if(null===i)return r;var s=t(i,n);if(s.length<=0)return r;if(r.length<=0)return s;for(var a=new f,o=[],u=0,c=r;u<c.length;u++){var h=c[u];a.has(h)||(a.add(h),o.push(h))}for(var l=0,d=s;l<d.length;l++){h=d[l];a.has(h)||(a.add(h),o.push(h))}return o}(t,e)})),t("getOwnMetadataKeys",(function(t,e){if(!A(t))throw new TypeError;return y(e)||(e=E(e)),v(t,e)})),t("deleteMetadata",(function(t,e,n){if(!A(e))throw new TypeError;y(n)||(n=E(n));var r=p(e,n,!1);if(y(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=d.get(e);return i.delete(n),i.size>0||(d.delete(e),!0)}))}(r)}()}(F||(F={}));let $={};(function(){!function(t){function e(t,e,n){return n.a=t,n.f=e,n}function n(t){return e(2,t,(function(e){return function(n){return t(e,n)}}))}function r(t){return e(3,t,(function(e){return function(n){return function(r){return t(e,n,r)}}}))}function i(t){return e(4,t,(function(e){return function(n){return function(r){return function(i){return t(e,n,r,i)}}}}))}function s(t){return e(5,t,(function(e){return function(n){return function(r){return function(i){return function(s){return t(e,n,r,i,s)}}}}}))}function a(t){return e(6,t,(function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return t(e,n,r,i,s,a)}}}}}}))}function o(t){return e(7,t,(function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return function(o){return t(e,n,r,i,s,a,o)}}}}}}}))}function u(t){return e(8,t,(function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return function(o){return function(u){return t(e,n,r,i,s,a,o,u)}}}}}}}}))}function c(t){return e(9,t,(function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return function(o){return function(u){return function(c){return t(e,n,r,i,s,a,o,u,c)}}}}}}}}}))}function h(t,e,n){return 2===t.a?t.f(e,n):t(e)(n)}function l(t,e,n,r){return 3===t.a?t.f(e,n,r):t(e)(n)(r)}function f(t,e,n,r,i){return 4===t.a?t.f(e,n,r,i):t(e)(n)(r)(i)}function d(t,e,n,r,i,s){return 5===t.a?t.f(e,n,r,i,s):t(e)(n)(r)(i)(s)}function p(t,e,n,r,i,s,a){return 6===t.a?t.f(e,n,r,i,s,a):t(e)(n)(r)(i)(s)(a)}function _(t,e,n,r,i,s,a,o){return 7===t.a?t.f(e,n,r,i,s,a,o):t(e)(n)(r)(i)(s)(a)(o)}function g(t,e){for(var n,r=[],i=b(t,e,0,r);i&&(n=r.pop());i=b(n.a,n.b,0,r));return i}function b(t,e,n,r){if(t===e)return!0;if("object"!=typeof t||null===t||null===e)return"function"==typeof t&&M(5),!1;if(n>100)return r.push(w(t,e)),!0;for(var i in t.$<0&&(t=vn(t),e=vn(e)),t)if(!b(t[i],e[i],n+1,r))return!1;return!0}var v=n(g);n((function(t,e){return!g(t,e)}));function m(t,e,n){if("object"!=typeof t)return t===e?0:t<e?-1:1;if(void 0===t.$)return(n=m(t.a,e.a))?n:(n=m(t.b,e.b))?n:m(t.c,e.c);for(;t.b&&e.b&&!(n=m(t.a,e.a));t=t.b,e=e.b);return n||(t.b?1:e.b?-1:0)}n((function(t,e){return m(t,e)<0})),n((function(t,e){return m(t,e)<1})),n((function(t,e){return m(t,e)>0})),n((function(t,e){return m(t,e)>=0}));var y=n((function(t,e){var n=m(t,e);return n<0?_n:n?pn:dn}));function w(t,e){return{a:t,b:e}}function A(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}var k=n(E);function E(t,e){if("string"==typeof t)return t+e;if(!t.b)return e;var n=T(t.a,e);t=t.b;for(var r=n;t.b;t=t.b)r=r.b=T(t.a,e);return n}var x={$:0};function T(t,e){return{$:1,a:t,b:e}}var C=n(T);function S(t){for(var e=x,n=t.length;n--;)e=T(t[n],e);return e}function R(t){for(var e=[];t.b;t=t.b)e.push(t.a);return e}var I=r((function(t,e,n){for(var r=[];e.b&&n.b;e=e.b,n=n.b)r.push(h(t,e.a,n.a));return S(r)})),B=(i((function(t,e,n,r){for(var i=[];e.b&&n.b&&r.b;e=e.b,n=n.b,r=r.b)i.push(l(t,e.a,n.a,r.a));return S(i)})),s((function(t,e,n,r,i){for(var s=[];e.b&&n.b&&r.b&&i.b;e=e.b,n=n.b,r=r.b,i=i.b)s.push(f(t,e.a,n.a,r.a,i.a));return S(s)})),a((function(t,e,n,r,i,s){for(var a=[];e.b&&n.b&&r.b&&i.b&&s.b;e=e.b,n=n.b,r=r.b,i=i.b,s=s.b)a.push(d(t,e.a,n.a,r.a,i.a,s.a));return S(a)})),n((function(t,e){return S(R(e).sort((function(e,n){return m(t(e),t(n))})))})));n((function(t,e){return S(R(e).sort((function(e,n){var r=h(t,e,n);return r===dn?0:r===_n?-1:1})))}));var P=r((function(t,e,n){for(var r=new Array(t),i=0;i<t;i++)r[i]=n(e+i);return r})),O=n((function(t,e){for(var n=new Array(t),r=0;r<t&&e.b;r++)n[r]=e.a,e=e.b;return n.length=r,w(n,e)})),D=(n((function(t,e){return e[t]})),r((function(t,e,n){for(var r=n.length,i=new Array(r),s=0;s<r;s++)i[s]=n[s];return i[t]=e,i})),n((function(t,e){for(var n=e.length,r=new Array(n+1),i=0;i<n;i++)r[i]=e[i];return r[n]=t,r})),r((function(t,e,n){for(var r=n.length,i=0;i<r;i++)e=h(t,n[i],e);return e})),r((function(t,e,n){for(var r=n.length-1;r>=0;r--)e=h(t,n[r],e);return e})));n((function(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=t(e[i]);return r})),r((function(t,e,n){for(var r=n.length,i=new Array(r),s=0;s<r;s++)i[s]=h(t,e+s,n[s]);return i})),r((function(t,e,n){return n.slice(t,e)})),r((function(t,e,n){var r=e.length,i=t-r;i>n.length&&(i=n.length);for(var s=new Array(r+i),a=0;a<r;a++)s[a]=e[a];for(a=0;a<i;a++)s[a+r]=n[a];return s})),n((function(t,e){return e})),n((function(t,e){return console.log(t+": <internals>"),e}));function M(t){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+t+".md")}n((function(t,e){return t+e})),n((function(t,e){return t-e})),n((function(t,e){return t*e})),n((function(t,e){return t/e})),n((function(t,e){return t/e|0})),n(Math.pow),n((function(t,e){return e%t}));var F=n((function(t,e){var n=e%t;return 0===t?M(11):n>0&&t<0||n<0&&t>0?n+t:n}));n(Math.atan2);var L=Math.ceil,N=Math.floor,j=Math.round,U=Math.log,z=isNaN;n((function(t,e){return t&&e})),n((function(t,e){return t||e})),n((function(t,e){return t!==e}));var $=n((function(t,e){return t+e}));var H=n((function(t,e){return t+e}));n((function(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;){var s=e.charCodeAt(i);55296<=s&&s<=56319?(r[i]=t(e[i]+e[i+1]),i+=2):(r[i]=t(e[i]),i++)}return r.join("")}));var W=n((function(t,e){for(var n=[],r=e.length,i=0;i<r;){var s=e[i],a=e.charCodeAt(i);i++,55296<=a&&a<=56319&&(s+=e[i],i++),t(s)&&n.push(s)}return n.join("")}));var G=r((function(t,e,n){for(var r=n.length,i=0;i<r;){var s=n[i],a=n.charCodeAt(i);i++,55296<=a&&a<=56319&&(s+=n[i],i++),e=h(t,s,e)}return e})),V=r((function(t,e,n){for(var r=n.length;r--;){var i=n[r],s=n.charCodeAt(r);56320<=s&&s<=57343&&(i=n[--r]+i),e=h(t,i,e)}return e})),q=n((function(t,e){return e.split(t)})),X=n((function(t,e){return e.join(t)})),Q=r((function(t,e,n){return n.slice(t,e)}));n((function(t,e){for(var n=e.length;n--;){var r=e[n],i=e.charCodeAt(n);if(56320<=i&&i<=57343&&(r=e[--n]+r),t(r))return!0}return!1}));var J=n((function(t,e){for(var n=e.length;n--;){var r=e[n],i=e.charCodeAt(n);if(56320<=i&&i<=57343&&(r=e[--n]+r),!t(r))return!1}return!0})),Y=n((function(t,e){return e.indexOf(t)>-1})),K=n((function(t,e){return 0===e.indexOf(t)})),Z=n((function(t,e){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length})),tt=n((function(t,e){var n=t.length;if(n<1)return x;for(var r=0,i=[];(r=e.indexOf(t,r))>-1;)i.push(r),r+=n;return S(i)}));function et(t){return t+""}function nt(t){return{$:2,b:t}}var rt=nt((function(t){return"number"!=typeof t?vt("an INT",t):-2147483647<t&&t<2147483647&&(0|t)===t?En(t):!isFinite(t)||t%1?vt("an INT",t):En(t)})),it=nt((function(t){return"boolean"==typeof t?En(t):vt("a BOOL",t)})),st=nt((function(t){return"number"==typeof t?En(t):vt("a FLOAT",t)})),at=nt((function(t){return En(t)})),ot=nt((function(t){return"string"==typeof t?En(t):t instanceof String?En(t+""):vt("a STRING",t)}));var ut=n((function(t,e){return{$:6,d:t,b:e}}));n((function(t,e){return{$:7,e:t,b:e}}));function ct(t,e){return{$:9,f:t,g:e}}var ht=n((function(t,e){return{$:10,b:e,h:t}}));var lt=n((function(t,e){return ct(t,[e])})),ft=r((function(t,e,n){return ct(t,[e,n])})),dt=(i((function(t,e,n,r){return ct(t,[e,n,r])})),s((function(t,e,n,r,i){return ct(t,[e,n,r,i])})),a((function(t,e,n,r,i,s){return ct(t,[e,n,r,i,s])})),o((function(t,e,n,r,i,s,a){return ct(t,[e,n,r,i,s,a])})),u((function(t,e,n,r,i,s,a,o){return ct(t,[e,n,r,i,s,a,o])})),c((function(t,e,n,r,i,s,a,o,u){return ct(t,[e,n,r,i,s,a,o,u])})),n((function(t,e){try{return pt(t,JSON.parse(e))}catch(t){return yn(h(wn,"This is not valid JSON! "+t.message,e))}})),n((function(t,e){return pt(t,e)})));function pt(t,e){switch(t.$){case 2:return t.b(e);case 5:return null===e?En(t.c):vt("null",e);case 3:return gt(e)?_t(t.b,e,S):vt("a LIST",e);case 4:return gt(e)?_t(t.b,e,bt):vt("an ARRAY",e);case 6:var n=t.d;if("object"!=typeof e||null===e||!(n in e))return vt("an OBJECT with a field named `"+n+"`",e);var r=pt(t.b,e[n]);return vr(r)?r:yn(h(An,n,r.a));case 7:var i=t.e;if(!gt(e))return vt("an ARRAY",e);if(i>=e.length)return vt("a LONGER array. Need index "+i+" but only see "+e.length+" entries",e);r=pt(t.b,e[i]);return vr(r)?r:yn(h(kn,i,r.a));case 8:if("object"!=typeof e||null===e||gt(e))return vt("an OBJECT",e);var s=x;for(var a in e)if(e.hasOwnProperty(a)){r=pt(t.b,e[a]);if(!vr(r))return yn(h(An,a,r.a));s=T(w(a,r.a),s)}return En(qn(s));case 9:for(var o=t.f,u=t.g,c=0;c<u.length;c++){r=pt(u[c],e);if(!vr(r))return r;o=o(r.a)}return En(o);case 10:r=pt(t.b,e);return vr(r)?pt(t.h(r.a),e):r;case 11:for(var l=x,f=t.g;f.b;f=f.b){r=pt(f.a,e);if(vr(r))return r;l=T(r.a,l)}return yn(xn(qn(l)));case 1:return yn(h(wn,t.a,e));case 0:return En(t.a)}}function _t(t,e,n){for(var r=e.length,i=new Array(r),s=0;s<r;s++){var a=pt(t,e[s]);if(!vr(a))return yn(h(kn,s,a.a));i[s]=a.a}return En(n(i))}function gt(t){return Array.isArray(t)||"undefined"!=typeof FileList&&t instanceof FileList}function bt(t){return h(br,t.length,(function(e){return t[e]}))}function vt(t,e){return yn(h(wn,"Expecting "+t,e))}function mt(t,e){if(t===e)return!0;if(t.$!==e.$)return!1;switch(t.$){case 0:case 1:return t.a===e.a;case 2:return t.b===e.b;case 5:return t.c===e.c;case 3:case 4:case 8:return mt(t.b,e.b);case 6:return t.d===e.d&&mt(t.b,e.b);case 7:return t.e===e.e&&mt(t.b,e.b);case 9:return t.f===e.f&&yt(t.g,e.g);case 10:return t.h===e.h&&mt(t.b,e.b);case 11:return yt(t.g,e.g)}}function yt(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(!mt(t[r],e[r]))return!1;return!0}var wt=n((function(t,e){return JSON.stringify(e,null,t)+""}));function At(t){return t}var kt=r((function(t,e,n){return n[t]=e,n}));function Et(t){return{$:0,a:t}}function xt(t){return{$:2,b:t,c:null}}var Tt=n((function(t,e){return{$:3,b:t,d:e}}));n((function(t,e){return{$:4,b:t,d:e}}));var Ct=0;function St(t){var e={$:0,e:Ct++,f:t,g:null,h:[]};return Dt(e),e}function Rt(t){return xt((function(e){e(Et(St(t)))}))}function It(t,e){t.h.push(e),Dt(t)}var Bt=n((function(t,e){return xt((function(n){It(t,e),n(Et(0))}))}));var Pt=!1,Ot=[];function Dt(t){if(Ot.push(t),!Pt){for(Pt=!0;t=Ot.shift();)Mt(t);Pt=!1}}function Mt(t){for(;t.f;){var e=t.f.$;if(0===e||1===e){for(;t.g&&t.g.$!==e;)t.g=t.g.i;if(!t.g)return;t.f=t.g.b(t.f.a),t.g=t.g.i}else{if(2===e)return void(t.f.c=t.f.b((function(e){t.f=e,Dt(t)})));if(5===e){if(0===t.h.length)return;t.f=t.f.b(t.h.shift())}else t.g={$:3===e?0:1,b:t.f.b,i:t.g},t.f=t.f.d}}}i((function(t,e,n,r){return Ft(e,r,t.de,t.ea,t.d1,(function(){return function(){}}))}));function Ft(t,e,n,r,i,s){var a=h(dt,t,e?e.flags:void 0);vr(a)||M(2);var o={},u=(a=n(a.a)).a,c=s(f,u),l=function(t,e){var n;for(var r in Lt){var i=Lt[r];i.a&&((n=n||{})[r]=i.a(r,e)),t[r]=jt(i,e)}return n}(o,f);function f(t,e){a=h(r,t,u),c(u=a.a,e),Vt(o,a.b,i(u))}return Vt(o,a.b,i(u)),l?{ports:l}:{}}var Lt={};function Nt(t,e,n,r,i){return{b:t,c:e,d:n,e:r,f:i}}function jt(t,e){var n={g:e,h:void 0},r=t.c,i=t.d,s=t.e,a=t.f;return n.h=St(h(Tt,(function t(e){return h(Tt,t,{$:5,b:function(t){var o=t.a;return 0===t.$?l(i,n,o,e):s&&a?f(r,n,o.i,o.j,e):l(r,n,s?o.i:o.j,e)}})}),t.b))}var Ut=n((function(t,e){return xt((function(n){t.g(e),n(Et(0))}))})),zt=n((function(t,e){return h(Bt,t.h,{$:0,a:e})}));function $t(t){return function(e){return{$:1,k:t,l:e}}}function Ht(t){return{$:2,m:t}}n((function(t,e){return{$:3,n:t,o:e}}));var Wt=[],Gt=!1;function Vt(t,e,n){if(Wt.push({p:t,q:e,r:n}),!Gt){Gt=!0;for(var r;r=Wt.shift();)qt(r.p,r.q,r.r);Gt=!1}}function qt(t,e,n){var r={};for(var i in Xt(!0,e,r,null),Xt(!1,n,r,null),t)It(t[i],{$:"fx",a:r[i]||{i:x,j:x}})}function Xt(t,e,n,r){switch(e.$){case 1:var i=e.k,s=function(t,e,n,r){return h(t?Lt[e].e:Lt[e].f,(function(t){for(var e=n;e;e=e.t)t=e.s(t);return t}),r)}(t,i,r,e.l);return void(n[i]=function(t,e,n){return n=n||{i:x,j:x},t?n.i=T(e,n.i):n.j=T(e,n.j),n}(t,s,n[i]));case 2:for(var a=e.m;a.b;a=a.b)Xt(t,a.a,n,r);return;case 3:return void Xt(t,e.o,n,{s:e.n,t:r})}}function Qt(t){Lt[t]&&M(3)}function Jt(t,e){return Qt(t),Lt[t]={e:Yt,u:e,a:Kt},$t(t)}var Yt=n((function(t,e){return e}));function Kt(t){var e,n=[],i=Lt[t].u,s=(e=0,xt((function(t){var n=setTimeout((function(){t(Et(0))}),e);return function(){clearTimeout(n)}})));return Lt[t].b=s,Lt[t].c=r((function(t,e,r){for(;e.b;e=e.b)for(var a=n,o=i(e.a),u=0;u<a.length;u++)a[u](o);return s})),{subscribe:function(t){n.push(t)},unsubscribe:function(t){var e=(n=n.slice()).indexOf(t);e>=0&&n.splice(e,1)}}}function Zt(t,e){return Qt(t),Lt[t]={f:ee,u:e,a:ne},$t(t)}var te,ee=n((function(t,e){return function(n){return t(e(n))}}));function ne(t,e){var n=x,i=Lt[t].u,s=Et(null);return Lt[t].b=s,Lt[t].c=r((function(t,e,r){return n=e,s})),{send:function(t){var r=h(dt,i,t);vr(r)||M(4,r.a);for(var s=r.a,a=n;a.b;a=a.b)e(a.a(s))}}}var re="undefined"!=typeof document?document:{};function ie(t,e){t.appendChild(e)}i((function(t,e,n,r){var i=r.node;return i.parentNode.replaceChild(ke(t,(function(){})),i),{}}));function se(t){return{$:0,a:t}}var ae=n((function(t,e){return n((function(n,r){for(var i=[],s=0;r.b;r=r.b){var a=r.a;s+=a.b||0,i.push(a)}return s+=i.length,{$:1,c:e,d:we(n),e:i,f:t,b:s}}))})),oe=ae(void 0),ue=n((function(t,e){return n((function(n,r){for(var i=[],s=0;r.b;r=r.b){var a=r.a;s+=a.b.b||0,i.push(a)}return s+=i.length,{$:2,c:e,d:we(n),e:i,f:t,b:s}}))})),ce=ue(void 0);n((function(t,e){return{$:4,j:t,k:e,b:1+(e.b||0)}}));function he(t,e){return{$:5,l:t,m:e,k:void 0}}n((function(t,e){return he([t,e],(function(){return t(e)}))}));var le=r((function(t,e,n){return he([t,e,n],(function(){return h(t,e,n)}))})),fe=i((function(t,e,n,r){return he([t,e,n,r],(function(){return l(t,e,n,r)}))})),de=(s((function(t,e,n,r,i){return he([t,e,n,r,i],(function(){return f(t,e,n,r,i)}))})),a((function(t,e,n,r,i,s){return he([t,e,n,r,i,s],(function(){return d(t,e,n,r,i,s)}))})),o((function(t,e,n,r,i,s,a){return he([t,e,n,r,i,s,a],(function(){return p(t,e,n,r,i,s,a)}))})),u((function(t,e,n,r,i,s,a,o){return he([t,e,n,r,i,s,a,o],(function(){return _(t,e,n,r,i,s,a,o)}))})),c((function(t,e,n,r,i,s,a,o,u){return he([t,e,n,r,i,s,a,o,u],(function(){return function(t,e,n,r,i,s,a,o,u){return 8===t.a?t.f(e,n,r,i,s,a,o,u):t(e)(n)(r)(i)(s)(a)(o)(u)}(t,e,n,r,i,s,a,o,u)}))})),n((function(t,e){return{$:"a0",n:t,o:e}}))),pe=(n((function(t,e){return{$:"a1",n:t,o:e}})),n((function(t,e){return{$:"a2",n:t,o:e}}))),_e=n((function(t,e){return{$:"a3",n:t,o:e}}));r((function(t,e,n){return{$:"a4",n:e,o:{f:t,o:n}}}));function ge(t){return"script"==t?"p":t}function be(t){return/^\s*(javascript:|data:text\/html)/i.test(t)?"":t}n((function(t,e){return"a0"===e.$?h(de,e.n,function(t,e){var n=Ar(e);return{$:e.$,a:n?l(yr,n<3?me:ye,wr(t),e.a):h(mr,t,e.a)}}(t,e.o)):e}));var ve,me=n((function(t,e){return w(t(e.a),e.b)})),ye=n((function(t,e){return{dm:t(e.dm),d$:e.d$,dL:e.dL}}));function we(t){for(var e={};t.b;t=t.b){var n=t.a,r=n.$,i=n.n,s=n.o;if("a2"!==r){var a=e[r]||(e[r]={});"a3"===r&&"class"===i?Ae(a,i,s):a[i]=s}else"className"===i?Ae(e,i,s):e[i]=s}return e}function Ae(t,e,n){var r=t[e];t[e]=r?r+" "+n:n}function ke(t,e){var n=t.$;if(5===n)return ke(t.k||(t.k=t.m()),e);if(0===n)return re.createTextNode(t.a);if(4===n){for(var r=t.k,i=t.j;4===r.$;)"object"!=typeof i?i=[i,r.j]:i.push(r.j),r=r.k;var s={j:i,p:e};return(a=ke(r,s)).elm_event_node_ref=s,a}if(3===n)return Ee(a=t.h(t.g),e,t.d),a;var a=t.f?re.createElementNS(t.f,t.c):re.createElement(t.c);te&&"a"==t.c&&a.addEventListener("click",te(a)),Ee(a,e,t.d);for(var o=t.e,u=0;u<o.length;u++)ie(a,ke(1===n?o[u]:o[u].b,e));return a}function Ee(t,e,n){for(var r in n){var i=n[r];"a1"===r?xe(t,i):"a0"===r?Se(t,e,i):"a3"===r?Te(t,i):"a4"===r?Ce(t,i):("value"!==r&&"checked"!==r||t[r]!==i)&&(t[r]=i)}}function xe(t,e){var n=t.style;for(var r in e)n[r]=e[r]}function Te(t,e){for(var n in e){var r=e[n];void 0!==r?t.setAttribute(n,r):t.removeAttribute(n)}}function Ce(t,e){for(var n in e){var r=e[n],i=r.f,s=r.o;void 0!==s?t.setAttributeNS(i,n,s):t.removeAttributeNS(i,n)}}function Se(t,e,n){var r=t.elmFs||(t.elmFs={});for(var i in n){var s=n[i],a=r[i];if(s){if(a){if(a.q.$===s.$){a.q=s;continue}t.removeEventListener(i,a)}a=Re(e,s),t.addEventListener(i,a,ve&&{passive:Ar(s)<2}),r[i]=a}else t.removeEventListener(i,a),r[i]=void 0}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){ve=!0}}))}catch(t){}function Re(t,e){function n(e){var r=n.q,i=pt(r.a,e);if(vr(i)){for(var s,a=Ar(r),o=i.a,u=a?a<3?o.a:o.dm:o,c=1==a?o.b:3==a&&o.d$,h=(c&&e.stopPropagation(),(2==a?o.b:3==a&&o.dL)&&e.preventDefault(),t);s=h.j;){if("function"==typeof s)u=s(u);else for(var l=s.length;l--;)u=s[l](u);h=h.p}h(u,c)}}return n.q=e,n}function Ie(t,e){return t.$==e.$&&mt(t.a,e.a)}function Be(t,e){var n=[];return Oe(t,e,n,0),n}function Pe(t,e,n,r){var i={$:e,r:n,s:r,t:void 0,u:void 0};return t.push(i),i}function Oe(t,e,n,r){if(t!==e){var i=t.$,s=e.$;if(i!==s){if(1!==i||2!==s)return void Pe(n,0,r,e);e=function(t){for(var e=t.e,n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=e[i].b;return{$:1,c:t.c,d:t.d,e:r,f:t.f,b:t.b}}(e),s=1}switch(s){case 5:for(var a=t.l,o=e.l,u=a.length,c=u===o.length;c&&u--;)c=a[u]===o[u];if(c)return void(e.k=t.k);e.k=e.m();var h=[];return Oe(t.k,e.k,h,0),void(h.length>0&&Pe(n,1,r,h));case 4:for(var l=t.j,f=e.j,d=!1,p=t.k;4===p.$;)d=!0,"object"!=typeof l?l=[l,p.j]:l.push(p.j),p=p.k;for(var _=e.k;4===_.$;)d=!0,"object"!=typeof f?f=[f,_.j]:f.push(_.j),_=_.k;return d&&l.length!==f.length?void Pe(n,0,r,e):((d?function(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(l,f):l===f)||Pe(n,2,r,f),void Oe(p,_,n,r+1));case 0:return void(t.a!==e.a&&Pe(n,3,r,e.a));case 1:return void De(t,e,n,r,Fe);case 2:return void De(t,e,n,r,Le);case 3:if(t.h!==e.h)return void Pe(n,0,r,e);var g=Me(t.d,e.d);g&&Pe(n,4,r,g);var b=e.i(t.g,e.g);return void(b&&Pe(n,5,r,b))}}}function De(t,e,n,r,i){if(t.c===e.c&&t.f===e.f){var s=Me(t.d,e.d);s&&Pe(n,4,r,s),i(t,e,n,r)}else Pe(n,0,r,e)}function Me(t,e,n){var r;for(var i in t)if("a1"!==i&&"a0"!==i&&"a3"!==i&&"a4"!==i)if(i in e){var s=t[i],a=e[i];s===a&&"value"!==i&&"checked"!==i||"a0"===n&&Ie(s,a)||((r=r||{})[i]=a)}else(r=r||{})[i]=n?"a1"===n?"":"a0"===n||"a3"===n?void 0:{f:t[i].f,o:void 0}:"string"==typeof t[i]?"":null;else{var o=Me(t[i],e[i]||{},i);o&&((r=r||{})[i]=o)}for(var u in e)u in t||((r=r||{})[u]=e[u]);return r}function Fe(t,e,n,r){var i=t.e,s=e.e,a=i.length,o=s.length;a>o?Pe(n,6,r,{v:o,i:a-o}):a<o&&Pe(n,7,r,{v:a,e:s});for(var u=a<o?a:o,c=0;c<u;c++){var h=i[c];Oe(h,s[c],n,++r),r+=h.b||0}}function Le(t,e,n,r){for(var i=[],s={},a=[],o=t.e,u=e.e,c=o.length,h=u.length,l=0,f=0,d=r;l<c&&f<h;){var p=o[l],_=u[f],g=p.a,b=_.a,v=p.b,m=_.b,y=void 0,w=void 0;if(g!==b){var A=o[l+1],k=u[f+1];if(A){var E=A.a,x=A.b;w=b===E}if(k){var T=k.a,C=k.b;y=g===T}if(y&&w)Oe(v,C,i,++d),Ne(s,i,g,m,f,a),d+=v.b||0,je(s,i,g,x,++d),d+=x.b||0,l+=2,f+=2;else if(y)d++,Ne(s,i,b,m,f,a),Oe(v,C,i,d),d+=v.b||0,l+=1,f+=2;else if(w)je(s,i,g,v,++d),d+=v.b||0,Oe(x,m,i,++d),d+=x.b||0,l+=2,f+=1;else{if(!A||E!==T)break;je(s,i,g,v,++d),Ne(s,i,b,m,f,a),d+=v.b||0,Oe(x,C,i,++d),d+=x.b||0,l+=2,f+=2}}else Oe(v,m,i,++d),d+=v.b||0,l++,f++}for(;l<c;){d++;v=(p=o[l]).b;je(s,i,p.a,v,d),d+=v.b||0,l++}for(;f<h;){var S=S||[];Ne(s,i,(_=u[f]).a,_.b,void 0,S),f++}(i.length>0||a.length>0||S)&&Pe(n,8,r,{w:i,x:a,y:S})}function Ne(t,e,n,r,i,s){var a=t[n];if(!a)return a={c:0,z:r,r:i,s:void 0},s.push({r:i,A:a}),void(t[n]=a);if(1===a.c){s.push({r:i,A:a}),a.c=2;var o=[];return Oe(a.z,r,o,a.r),a.r=i,void(a.s.s={w:o,A:a})}Ne(t,e,n+"_elmW6BL",r,i,s)}function je(t,e,n,r,i){var s=t[n];if(s){if(0===s.c){s.c=2;var a=[];return Oe(r,s.z,a,i),void Pe(e,9,i,{w:a,A:s})}je(t,e,n+"_elmW6BL",r,i)}else{var o=Pe(e,9,i,void 0);t[n]={c:1,z:r,r:i,s:o}}}function Ue(t,e,n,r){!function t(e,n,r,i,s,a,o){var u=r[i],c=u.r;for(;c===s;){var h=u.$;if(1===h)Ue(e,n.k,u.s,o);else if(8===h){u.t=e,u.u=o,(l=u.s.w).length>0&&t(e,n,l,0,s,a,o)}else if(9===h){u.t=e,u.u=o;var l,f=u.s;if(f)f.A.s=e,(l=f.w).length>0&&t(e,n,l,0,s,a,o)}else u.t=e,u.u=o;if(i++,!(u=r[i])||(c=u.r)>a)return i}var d=n.$;if(4===d){for(var p=n.k;4===p.$;)p=p.k;return t(e,p,r,i,s+1,a,e.elm_event_node_ref)}for(var _=n.e,g=e.childNodes,b=0;b<_.length;b++){s++;var v=1===d?_[b]:_[b].b,m=s+(v.b||0);if(s<=c&&c<=m&&(i=t(g[b],v,r,i,s,m,o),!(u=r[i])||(c=u.r)>a))return i;s=m}return i}(t,e,n,0,0,e.b,r)}function ze(t,e,n,r){return 0===n.length?t:(Ue(t,e,n,r),$e(t,n))}function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.t,s=He(i,r);i===t&&(t=s)}return t}function He(t,e){switch(e.$){case 0:return function(t,e,n){var r=t.parentNode,i=ke(e,n);i.elm_event_node_ref||(i.elm_event_node_ref=t.elm_event_node_ref);r&&i!==t&&r.replaceChild(i,t);return i}(t,e.s,e.u);case 4:return Ee(t,e.u,e.s),t;case 3:return t.replaceData(0,t.length,e.s),t;case 1:return $e(t,e.s);case 2:return t.elm_event_node_ref?t.elm_event_node_ref.j=e.s:t.elm_event_node_ref={j:e.s,p:e.u},t;case 6:for(var n=e.s,r=0;r<n.i;r++)t.removeChild(t.childNodes[n.v]);return t;case 7:for(var i=(n=e.s).e,s=(r=n.v,t.childNodes[r]);r<i.length;r++)t.insertBefore(ke(i[r],e.u),s);return t;case 9:if(!(n=e.s))return t.parentNode.removeChild(t),t;var a=n.A;return void 0!==a.r&&t.parentNode.removeChild(t),a.s=$e(t,n.w),t;case 8:return function(t,e){var n=e.s,r=function(t,e){if(!t)return;for(var n=re.createDocumentFragment(),r=0;r<t.length;r++){var i=t[r].A;ie(n,2===i.c?i.s:ke(i.z,e.u))}return n}(n.y,e);t=$e(t,n.w);for(var i=n.x,s=0;s<i.length;s++){var a=i[s],o=a.A,u=2===o.c?o.s:ke(o.z,e.u);t.insertBefore(u,t.childNodes[a.r])}r&&ie(t,r);return t}(t,e);case 5:return e.s(t);default:M(10)}}function We(t){if(3===t.nodeType)return se(t.textContent);if(1!==t.nodeType)return se("");for(var e=x,n=t.attributes,r=n.length;r--;){var i=n[r],s=i.name,a=i.value;e=T(h(_e,s,a),e)}var o=t.tagName.toLowerCase(),u=x,c=t.childNodes;for(r=c.length;r--;)u=T(We(c[r]),u);return l(oe,o,e,u)}i((function(t,e,n,r){return Ft(e,r,t.de,t.ea,t.d1,(function(e,n){var i=t.ec,s=r.node,a=We(s);return qe(n,(function(t){var n=i(t),r=Be(a,n);s=ze(s,a,r,e),a=n}))}))}));var Ge=i((function(t,e,n,r){return Ft(e,r,t.de,t.ea,t.d1,(function(e,n){var r=t.bl&&t.bl(e),i=t.ec,s=re.title,a=re.body,o=We(a);return qe(n,(function(t){te=r;var n=i(t),u=oe("body")(x)(n.cE),c=Be(o,u);a=ze(a,o,c,e),o=u,te=0,s!==n.d6&&(re.title=s=n.d6)}))}))})),Ve="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(t,1e3/60)};function qe(t,e){e(t);var n=0;function r(){n=1===n?0:(Ve(r),e(t),1)}return function(i,s){t=i,s?(e(t),2===n&&(n=1)):(0===n&&Ve(r),n=2)}}function Xe(){return zr(re.location.href).a||M(1)}n((function(t,e){return h(ii,$r,xt((function(){e&&history.go(e),t()})))}));var Qe=n((function(t,e){return h(ii,$r,xt((function(){history.pushState({},"",e),t()})))})),Je=n((function(t,e){return h(ii,$r,xt((function(){history.replaceState({},"",e),t()})))})),Ye="undefined"!=typeof window?window:{addEventListener:function(){},removeEventListener:function(){}};r((function(t,e,n){return Rt(xt((function(r){function i(t){St(n(t))}return t.addEventListener(e,i,ve&&{passive:!0}),function(){t.removeEventListener(e,i)}})))})),n((function(t,e){var n=pt(t,e);return vr(n)?Tn(n.a):Cn}));function Ke(t,e){return xt((function(n){Ve((function(){var r=document.getElementById(t);n(r?Et(e(r)):function(t){return{$:1,a:t}}(Tr(t)))}))}))}n((function(t,e){return Ke(e,(function(e){return e[t](),0}))})),n((function(t,e){return n=function(){return Ye.scroll(t,e),0},xt((function(t){Ve((function(){t(Et(n()))}))}));var n})),r((function(t,e,n){return Ke(t,(function(t){return t.scrollLeft=e,t.scrollTop=n,0}))}));var Ze=r((function(t,e,n){return xt((function(r){function i(t){r(e(n.bb.a(t)))}var s=new XMLHttpRequest;s.addEventListener("error",(function(){i(qi)})),s.addEventListener("timeout",(function(){i(Ji)})),s.addEventListener("load",(function(){i(function(t,e){return h(200<=e.status&&e.status<300?Vi:Wi,function(t){return{bq:t.responseURL,dZ:t.status,d_:t.statusText,bP:tn(t.getAllResponseHeaders())}}(e),t(e.response))}(n.bb.b,s))})),Zi(n.co)&&function(t,e,n){e.upload.addEventListener("progress",(function(r){e.c||St(h(ts,t,w(n,Qi({dV:r.loaded,ch:r.total}))))})),e.addEventListener("progress",(function(r){e.c||St(h(ts,t,w(n,Xi({dM:r.loaded,ch:r.lengthComputable?Tn(r.total):Cn}))))}))}(t,s,n.co.a);try{s.open(n.$7,n.bq,!0)}catch(t){return i(Gi(n.bq))}return function(t,e){for(var n=e.bP;n.b;n=n.b)t.setRequestHeader(n.a.a,n.a.b);t.timeout=e.d5.a||0,t.responseType=e.bb.d,t.withCredentials=e.cA}(s,n),n.cE.a&&s.setRequestHeader("Content-Type",n.cE.a),s.send(n.cE.b),function(){s.c=!0,s.abort()}}))}));function tn(t){if(!t)return Ki;for(var e=Ki,n=t.split("\r\n"),r=n.length;r--;){var i=n[r],s=i.indexOf(": ");if(s>0){var a=i.substring(0,s),o=i.substring(s+2);e=l(ps,a,(function(t){return Tn(Zi(t)?o+", "+t.a:o)}),e)}}return e}var en=r((function(t,e,n){return{$:0,d:t,b:e,a:n}})),nn=n((function(t,e){return{$:0,d:e.d,b:e.b,a:function(n){return t(e.a(n))}}}));n((function(t,e){return{$:0,a:t,b:e}})),n((function(t,e){return new Blob([e],{type:t})}));n((function(t,e){return t&e})),n((function(t,e){return t|e})),n((function(t,e){return t^e})),n((function(t,e){return e<<t})),n((function(t,e){return e>>t})),n((function(t,e){return e>>>t}));var rn=r((function(t,e,n){return function(t,e,n,r){return{$:3,d:we(t),g:e,h:n,i:r}}(e,{a:t,b:n},sn,an)}));function sn(t){return h(cn,t,re.createElement("div"))}function an(t,e){return(t.b!==e.b||t.a!==e.a)&&cn(e)}var on,un,cn=n((function(t,e){var n,r;return e.innerHTML=hn(t.b,(n=t.a,{highlight:function(t,e){return!e&&Zi(n.bH)&&(e=n.bH.a),"undefined"!=typeof hljs&&e&&hljs.listLanguages().indexOf(e)>=0?hljs.highlight(e,t,!0).value:t},gfm:r=n.c8.a,tables:r&&r.d2,breaks:r&&r.cF,sanitize:n.dQ,smartypants:n.dY})),e})),hn=(un=(on={}).exports={},function(){var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function e(e){this.tokens=[],this.tokens.links={},this.options=e||h.defaults,this.rules=t.normal,this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t.bullet=/(?:[*+-]|\d+\.)/,t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,t.item=o(t.item,"gm")(/bull/g,t.bullet)(),t.list=o(t.list)(/bull/g,t.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+t.def.source+")")(),t.blockquote=o(t.blockquote)("def",t.def)(),t._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",t.html=o(t.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,t._tag)(),t.paragraph=o(t.paragraph)("hr",t.hr)("heading",t.heading)("lheading",t.lheading)("blockquote",t.blockquote)("tag","<"+t._tag)("def",t.def)(),t.normal=c({},t),t.gfm=c({},t.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),t.gfm.paragraph=o(t.paragraph)("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|")(),t.tables=c({},t.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=t,e.lex=function(t,n){return new e(n).lex(t)},e.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},e.prototype.token=function(e,n,r){var i,s,a,o,u,c,h,l,f;for(e=e.replace(/^ +$/gm,"");e;)if((a=this.rules.newline.exec(e))&&(e=e.substring(a[0].length),a[0].length>1&&this.tokens.push({type:"space"})),a=this.rules.code.exec(e))e=e.substring(a[0].length),a=a[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?a:a.replace(/\n+$/,"")});else if(a=this.rules.fences.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"code",lang:a[2],text:a[3]||""});else if(a=this.rules.heading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:a[1].length,text:a[2]});else if(n&&(a=this.rules.nptable.exec(e))){for(e=e.substring(a[0].length),c={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/\n$/,"").split("\n")},l=0;l<c.align.length;l++)/^ *-+: *$/.test(c.align[l])?c.align[l]="right":/^ *:-+: *$/.test(c.align[l])?c.align[l]="center":/^ *:-+ *$/.test(c.align[l])?c.align[l]="left":c.align[l]=null;for(l=0;l<c.cells.length;l++)c.cells[l]=c.cells[l].split(/ *\| */);this.tokens.push(c)}else if(a=this.rules.lheading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:"="===a[2]?1:2,text:a[1]});else if(a=this.rules.hr.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"hr"});else if(a=this.rules.blockquote.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"blockquote_start"}),a=a[0].replace(/^ *> ?/gm,""),this.token(a,n,!0),this.tokens.push({type:"blockquote_end"});else if(a=this.rules.list.exec(e)){for(e=e.substring(a[0].length),o=a[2],this.tokens.push({type:"list_start",ordered:o.length>1}),i=!1,f=(a=a[0].match(this.rules.item)).length,l=0;l<f;l++)h=(c=a[l]).length,~(c=c.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(h-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+h+"}","gm"),"")),this.options.smartLists&&l!==f-1&&(o===(u=t.bullet.exec(a[l+1])[0])||o.length>1&&u.length>1||(e=a.slice(l+1).join("\n")+e,l=f-1)),s=i||/\n\n(?!\s*$)/.test(c),l!==f-1&&(i="\n"===c.charAt(c.length-1),s||(s=i)),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(c,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(a=this.rules.html.exec(e))e=e.substring(a[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===a[1]||"script"===a[1]||"style"===a[1]),text:a[0]});else if(!r&&n&&(a=this.rules.def.exec(e)))e=e.substring(a[0].length),this.tokens.links[a[1].toLowerCase()]={href:a[2],title:a[3]};else if(n&&(a=this.rules.table.exec(e))){for(e=e.substring(a[0].length),c={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/(?: *\| *)?\n$/,"").split("\n")},l=0;l<c.align.length;l++)/^ *-+: *$/.test(c.align[l])?c.align[l]="right":/^ *:-+: *$/.test(c.align[l])?c.align[l]="center":/^ *:-+ *$/.test(c.align[l])?c.align[l]="left":c.align[l]=null;for(l=0;l<c.cells.length;l++)c.cells[l]=c.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(c)}else if(n&&(a=this.rules.paragraph.exec(e)))e=e.substring(a[0].length),this.tokens.push({type:"paragraph",text:"\n"===a[1].charAt(a[1].length-1)?a[1].slice(0,-1):a[1]});else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"text",text:a[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^_\_([\s\S]+?)_\_(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|_\_)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function r(t,e){if(this.options=e||h.defaults,this.links=t,this.rules=n.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function i(t){this.options=t||{}}function s(t){this.tokens=[],this.token=null,this.options=t||h.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(t,e){return t=t.source,e=e||"",function n(r,i){return r?(i=(i=i.source||i).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(r,i),n):new RegExp(t,e)}}function u(){}function c(t){for(var e,n,r=1;r<arguments.length;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function h(t,n,r){if(r||"function"==typeof n){r||(r=n,n=null);var i,o,u=(n=c({},h.defaults,n||{})).highlight,l=0;try{i=e.lex(t,n)}catch(t){return r(t)}o=i.length;var f=function(t){if(t)return n.highlight=u,r(t);var e;try{e=s.parse(i,n)}catch(e){t=e}return n.highlight=u,t?r(t):r(null,e)};if(!u||u.length<3)return f();if(delete n.highlight,!o)return f();for(;l<i.length;l++)!function(t){"code"!==t.type?--o||f():u(t.text,t.lang,(function(e,n){return e?f(e):null==n||n===t.text?--o||f():(t.text=n,t.escaped=!0,void(--o||f()))}))}(i[l])}else try{return n&&(n=c({},h.defaults,n)),s.parse(e.lex(t,n),n)}catch(t){if(t.message+="\nPlease report this to https://github.com/chjj/marked.",(n||h.defaults).silent)return"<p>An error occured:</p><pre>"+a(t.message+"",!0)+"</pre>";throw t}}n._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=o(n.link)("inside",n._inside)("href",n._href)(),n.reflink=o(n.reflink)("inside",n._inside)(),n.normal=c({},n),n.pedantic=c({},n.normal,{strong:/^_\_(?=\S)([\s\S]*?\S)_\_(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=c({},n.normal,{escape:o(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=c({},n.gfm,{br:o(n.br)("{2,}","*")(),text:o(n.gfm.text)("{2,}","*")()}),r.rules=n,r.output=function(t,e,n){return new r(e,n).output(t)},r.prototype.output=function(t){for(var e,n,r,i,s="";t;)if(i=this.rules.escape.exec(t))t=t.substring(i[0].length),s+=i[1];else if(i=this.rules.autolink.exec(t))t=t.substring(i[0].length),"@"===i[2]?(n=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),r=this.mangle("mailto:")+n):r=n=a(i[1]),s+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(t))){if(i=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),t=t.substring(i[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):a(i[0]):i[0];else if(i=this.rules.link.exec(t))t=t.substring(i[0].length),this.inLink=!0,s+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(t))||(i=this.rules.nolink.exec(t))){if(t=t.substring(i[0].length),e=(i[2]||i[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){s+=i[0].charAt(0),t=i[0].substring(1)+t;continue}this.inLink=!0,s+=this.outputLink(i,e),this.inLink=!1}else if(i=this.rules.strong.exec(t))t=t.substring(i[0].length),s+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(t))t=t.substring(i[0].length),s+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(t))t=t.substring(i[0].length),s+=this.renderer.codespan(a(i[2],!0));else if(i=this.rules.br.exec(t))t=t.substring(i[0].length),s+=this.renderer.br();else if(i=this.rules.del.exec(t))t=t.substring(i[0].length),s+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(t))t=t.substring(i[0].length),s+=this.renderer.text(a(this.smartypants(i[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(i[0].length),r=n=a(i[1]),s+=this.renderer.link(r,null,n);return s},r.prototype.outputLink=function(t,e){var n=a(e.href),r=e.title?a(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,a(t[1]))},r.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},r.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",r=t.length,i=0;i<r;i++)e=t.charCodeAt(i),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},i.prototype.code=function(t,e,n){if(this.options.highlight){var r=this.options.highlight(t,e);null!=r&&r!==t&&(n=!0,t=r)}return e?'<pre><code class="'+this.options.langPrefix+a(e,!0)+'">'+(n?t:a(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:a(t,!0))+"\n</code></pre>"},i.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},i.prototype.html=function(t){return t},i.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(t,e){var n=e?"ol":"ul";return"<"+n+">\n"+t+"</"+n+">\n"},i.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},i.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},i.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},i.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},i.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},i.prototype.strong=function(t){return"<strong>"+t+"</strong>"},i.prototype.em=function(t){return"<em>"+t+"</em>"},i.prototype.codespan=function(t){return"<code>"+t+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(t){return"<del>"+t+"</del>"},i.prototype.link=function(t,e,n){if(this.options.sanitize){try{var r=decodeURIComponent((i=t,i.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})))).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return""}var i,s='<a href="'+t+'"';return e&&(s+=' title="'+e+'"'),s+=">"+n+"</a>"},i.prototype.image=function(t,e,n){var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">"},i.prototype.text=function(t){return t},s.parse=function(t,e,n){return new s(e,n).parse(t)},s.prototype.parse=function(t){this.inline=new r(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},s.prototype.next=function(){return this.token=this.tokens.pop()},s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},s.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},s.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,r,i="",s="";for(n="",t=0;t<this.token.header.length;t++)this.token.align[t],n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(i+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",r=0;r<e.length;r++)n+=this.renderer.tablecell(this.inline.output(e[r]),{header:!1,align:this.token.align[r]});s+=this.renderer.tablerow(n)}return this.renderer.table(i,s);case"blockquote_start":for(s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":s="";for(var a=this.token.ordered;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,a);case"list_item_start":for(s="";"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var o=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(o);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},u.exec=u,h.options=h.setOptions=function(t){return c(h.defaults,t),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},h.Parser=s,h.parser=s.parse,h.Renderer=i,h.Lexer=e,h.lexer=e.lex,h.InlineLexer=r,h.inlineLexer=r.output,h.parse=h,void 0!==on&&"object"==typeof un?on.exports=h:"function"==typeof define&&define.amd?define((function(){return h})):this.marked=h}.call(function(){return this||("undefined"!=typeof window?window:global)}()),on.exports);var ln=n((function(t,e){var n="g";t.dr&&(n+="m"),t.cI&&(n+="i");try{return Tn(new RegExp(e,n))}catch(t){return Cn}})),fn=(n((function(t,e){return null!==e.match(t)})),r((function(t,e,n){for(var r,i=[],s=0,a=n,o=e.lastIndex,u=-1;s++<t&&(r=e.exec(a))&&u!=e.lastIndex;){for(var c=r.length-1,h=new Array(c);c>0;){var l=r[c];h[--c]=l?Tn(l):Cn}i.push(f(p_,r[0],r.index,s,S(h))),u=e.lastIndex}return e.lastIndex=o,S(i)})),i((function(t,e,n,r){var i=0;return r.replace(e,(function(e){if(i++>=t)return e;for(var r=arguments.length-3,s=new Array(r);r>0;){var a=arguments[r];s[--r]=a?Tn(a):Cn}return n(f(p_,e,arguments[arguments.length-2],i,S(s)))}))}))),dn=(r((function(t,e,n){for(var r=n,i=[],s=e.lastIndex,a=e.lastIndex;t--;){var o=e.exec(r);if(!o)break;i.push(r.slice(s,o.index)),s=e.lastIndex}return i.push(r.slice(s)),e.lastIndex=a,S(i)})),1),pn=2,_n=0,gn=C,bn=r((function(t,e,n){for(;;){if(-2===n.$)return e;var r=n.b,i=n.c,s=n.d,a=n.e,o=t,u=l(t,r,i,l(bn,t,e,a));t=o,e=u,n=s}})),vn=function(t){return l(bn,r((function(t,e,n){return h(gn,w(t,e),n)})),x,t)},mn=D,yn=(r((function(t,e,r){var i=r.c,s=r.d,a=n((function(e,n){if(e.$){var r=e.a;return l(mn,t,n,r)}var i=e.a;return l(mn,a,n,i)}));return l(mn,a,l(mn,t,e,s),i)})),function(t){return{$:1,a:t}}),wn=n((function(t,e){return{$:3,a:t,b:e}})),An=n((function(t,e){return{$:0,a:t,b:e}})),kn=n((function(t,e){return{$:1,a:t,b:e}})),En=function(t){return{$:0,a:t}},xn=function(t){return{$:2,a:t}},Tn=function(t){return{$:0,a:t}},Cn={$:1},Sn=J,Rn=k,In=wt,Bn=et,Pn=n((function(t,e){return h(X,t,R(e))})),On=n((function(t,e){return S(h(q,t,e))})),Dn=function(t){return h(Pn,"\n    ",h(On,"\n",t))},Mn=r((function(t,e,n){for(;;){if(!n.b)return e;var r=n.a,i=n.b,s=t,a=h(t,r,e);t=s,e=a,n=i}})),Fn=function(t){return l(Mn,n((function(t,e){return e+1})),0,t)},Ln=I,Nn=r((function(t,e,n){for(;;){if(!(m(t,e)<1))return n;var r=t,i=e-1,s=h(gn,e,n);t=r,e=i,n=s}})),jn=n((function(t,e){return l(Nn,t,e,x)})),Un=n((function(t,e){return l(Ln,t,h(jn,0,Fn(e)-1),e)})),zn=function(t){var e=t.charCodeAt(0);return 55296<=e&&e<=56319?1024*(e-55296)+t.charCodeAt(1)-56320+65536:e},$n=function(t){var e=zn(t);return 97<=e&&e<=122},Hn=function(t){var e=zn(t);return e<=90&&65<=e},Wn=function(t){return $n(t)||Hn(t)},Gn=function(t){var e=zn(t);return e<=57&&48<=e},Vn=function(t){return $n(t)||Hn(t)||Gn(t)},qn=function(t){return l(Mn,gn,x,t)},Xn=function(t){var e=t.charCodeAt(0);return isNaN(e)?Cn:Tn(55296<=e&&e<=56319?w(t[0]+t[1],t.slice(2)):w(t[0],t.slice(1)))},Qn=n((function(t,e){return"\n\n("+Bn(t+1)+") "+Dn(Jn(e))})),Jn=function(t){return h(Yn,t,x)},Yn=n((function(t,e){t:for(;;)switch(t.$){case 0:var n=t.a,r=t.b,i=function(){var t=Xn(n);if(1===t.$)return!1;var e=t.a,r=e.a,i=e.b;return Wn(r)&&h(Sn,Vn,i)}(),s=r,a=h(gn,i?"."+n:"['"+n+"']",e);t=s,e=a;continue t;case 1:var o=t.a,u=(r=t.b,"["+Bn(o)+"]");s=r,a=h(gn,u,e);t=s,e=a;continue t;case 2:var c=t.a;if(c.b){if(c.b.b){var l=(e.b?"The Json.Decode.oneOf at json"+h(Pn,"",qn(e)):"Json.Decode.oneOf")+" failed in the following "+Bn(Fn(c))+" ways:";return h(Pn,"\n\n",h(gn,l,h(Un,Qn,c)))}t=s=r=c.a,e=a=e;continue t}return"Ran into a Json.Decode.oneOf with no possibilities"+(e.b?" at json"+h(Pn,"",qn(e)):"!");default:var f=t.a,d=t.b;return(l=e.b?"Problem with the value at json"+h(Pn,"",qn(e))+":\n\n    ":"Problem with the given value:\n\n")+(Dn(h(In,4,d))+"\n\n")+f}})),Kn=i((function(t,e,n,r){return{$:0,a:t,b:e,c:n,d:r}})),Zn=[],tr=L,er=n((function(t,e){return U(e)/U(t)})),nr=function(t){return t},rr=tr(h(er,2,32)),ir=f(Kn,0,rr,Zn,Zn),sr=P,ar=(n((function(t,e){return t(e)})),n((function(t,e){return e(t)}))),or=v,ur=N,cr=function(t){return t.length},hr=n((function(t,e){return m(t,e)>0?t:e})),lr=O,fr=n((function(t,e){for(;;){var n=h(lr,32,t),r=n.a,i=n.b,s=h(gn,{$:0,a:r},e);if(!i.b)return qn(s);t=i,e=s}})),dr=function(t){return t.a},pr=n((function(t,e){for(;;){var n=tr(e/32);if(1===n)return h(lr,32,t).a;t=h(fr,t,x),e=n}})),_r=n((function(t,e){if(e.h){var n=32*e.h,r=ur(h(er,32,n-1)),i=t?qn(e.k):e.k,s=h(pr,i,e.h);return f(Kn,cr(e.j)+n,h(hr,5,r*rr),s,e.j)}return f(Kn,cr(e.j),rr,Zn,e.j)})),gr=s((function(t,e,n,r,i){for(;;){if(e<0)return h(_r,!1,{k:r,h:n/32|0,j:i});var s={$:1,a:l(sr,32,e,t)};t=t,e=e-32,n=n,r=h(gn,s,r),i=i}})),br=n((function(t,e){if(t<=0)return ir;var n=t%32,r=l(sr,n,t-n,e);return d(gr,e,t-n-32,t,x,r)})),vr=function(t){return!t.$},mr=lt,yr=ft,wr=function(t){return{$:0,a:t}},Ar=function(t){switch(t.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},kr=function(t){return{$:1,a:t}},Er=function(t){return{$:0,a:t}},xr=function(t){return t},Tr=xr,Cr=a((function(t,e,n,r,i,s){return{c6:s,bR:e,b2:r,b4:n,b7:t,b8:i}})),Sr=Y,Rr=function(t){return t.length},Ir=Q,Br=n((function(t,e){return t<1?e:l(Ir,t,Rr(e),e)})),Pr=tt,Or=function(t){return""===t},Dr=n((function(t,e){return t<1?"":l(Ir,0,t,e)})),Mr=function(t){for(var e=0,n=t.charCodeAt(0),r=43==n||45==n?1:0,i=r;i<t.length;++i){var s=t.charCodeAt(i);if(s<48||57<s)return Cn;e=10*e+s-48}return i==r?Cn:Tn(45==n?-e:e)},Fr=s((function(t,e,n,r,i){if(Or(i)||h(Sr,"@",i))return Cn;var s=h(Pr,":",i);if(s.b){if(s.b.b)return Cn;var a=s.a,o=Mr(h(Br,a+1,i));if(1===o.$)return Cn;var u=o;return Tn(p(Cr,t,h(Dr,a,i),u,e,n,r))}return Tn(p(Cr,t,i,Cn,e,n,r))})),Lr=i((function(t,e,n,r){if(Or(r))return Cn;var i=h(Pr,"/",r);if(i.b){var s=i.a;return d(Fr,t,h(Br,s,r),e,n,h(Dr,s,r))}return d(Fr,t,"/",e,n,r)})),Nr=r((function(t,e,n){if(Or(n))return Cn;var r=h(Pr,"?",n);if(r.b){var i=r.a;return f(Lr,t,Tn(h(Br,i+1,n)),e,h(Dr,i,n))}return f(Lr,t,Cn,e,n)})),jr=n((function(t,e){if(Or(e))return Cn;var n=h(Pr,"#",e);if(n.b){var r=n.a;return l(Nr,t,Tn(h(Br,r+1,e)),h(Dr,r,e))}return l(Nr,t,Cn,e)})),Ur=K,zr=function(t){return h(Ur,"http://",t)?h(jr,0,h(Br,7,t)):h(Ur,"https://",t)?h(jr,1,h(Br,8,t)):Cn},$r=function(t){},Hr=Et,Wr=Hr(0),Gr=i((function(t,e,n,r){if(r.b){var i=r.a,s=r.b;if(s.b){var a=s.a,o=s.b;if(o.b){var u=o.a,c=o.b;if(c.b){var d=c.a,p=c.b;return h(t,i,h(t,a,h(t,u,h(t,d,n>500?l(Mn,t,e,qn(p)):f(Gr,t,e,n+1,p)))))}return h(t,i,h(t,a,h(t,u,e)))}return h(t,i,h(t,a,e))}return h(t,i,e)}return e})),Vr=r((function(t,e,n){return f(Gr,t,e,0,n)})),qr=n((function(t,e){return l(Vr,n((function(e,n){return h(gn,t(e),n)})),x,e)})),Xr=Tt,Qr=n((function(t,e){return h(Xr,(function(e){return Hr(t(e))}),e)})),Jr=r((function(t,e,n){return h(Xr,(function(e){return h(Xr,(function(n){return Hr(h(t,e,n))}),n)}),e)})),Yr=function(t){return l(Vr,Jr(gn),Hr(x),t)},Kr=Ut,Zr=n((function(t,e){var n=e;return Rt(h(Xr,Kr(t),n))})),ti=r((function(t,e,n){return h(Qr,(function(t){return 0}),Yr(h(qr,Zr(t),e)))})),ei=r((function(t,e,n){return Hr(0)})),ni=n((function(t,e){return h(Qr,t,e)}));Lt.Task=Nt(Wr,ti,ei,ni);var ri=$t("Task"),ii=n((function(t,e){return ri(h(Qr,t,e))})),si=function(t){var e=t.dD,r=t.dE,i=function(){i.a(e(Xe()))};return Ge({bl:function(t){return i.a=t,Ye.addEventListener("popstate",i),Ye.navigator.userAgent.indexOf("Trident")<0||Ye.addEventListener("hashchange",i),n((function(e,n){if(!n.ctrlKey&&!n.metaKey&&!n.shiftKey&&n.button<1&&!e.target&&!e.hasAttribute("download")){n.preventDefault();var i=e.href,s=Xe(),a=zr(i).a;t(r(a&&s.b7===a.b7&&s.bR===a.bR&&s.b4.a===a.b4.a?Er(a):kr(i)))}}))},de:function(e){return l(t.de,e,Xe(),i)},ec:t.ec,ea:t.ea,d1:t.d1})},ai={$:0},oi=n((function(t,e){return{$:1,a:t,b:e}})),ui=n((function(t,e){return{$:0,a:t,b:e}})),ci={$:39},hi={$:41},li=function(t){return{$:4,a:t}},fi=function(t){return{$:3,a:t}},di=function(t){return{$:5,a:t}},pi=Ht,_i=c((function(t,e,n,r,i,s,a,o,u){return{aN:u,aP:e,aQ:t,aR:r,aU:o,aE:n,a8:i,aK:s,br:a}})),gi=it,bi=ht,vi=function(t){return{$:1,a:t}},mi=ot,yi=h(bi,(function(t){switch(t){case"pcm":return wr(1);case"waveform":return wr(0);default:return vi("invalid AudioEmulation value")}}),mi),wi=h(bi,(function(t){switch(t){case"cycle":return wr(0);case"instruction":return wr(1);default:return vi("invalid CpuEmulation value")}}),mi),Ai=h(bi,(function(t){switch(t){case"pal":return wr(0);case"ntsc":return wr(1);case"secam":return wr(2);default:return vi("invalid TvMode value")}}),mi),ki=rt,Ei=function(t){return{$:11,g:t}},xi=function(t){return Ei(S([h(mr,Tn,t),wr(Cn)]))},Ti=yr(ar),Ci=ut,Si=dt,Ri=function(t){return{$:5,c:t}},Ii=at,Bi=r((function(t,e,n){return h(bi,(function(r){var i=h(Si,t,r);if(i.$)return wr(n);var s=i.a,a=h(Si,Ei(S([e,Ri(n)])),s);if(a.$){var o=a.a;return vi(Jn(o))}var u=a.a;return wr(u)}),Ii)})),Pi=i((function(t,e,n,r){return h(Ti,l(Bi,h(Ci,t,Ii),e,n),r)})),Oi=r((function(t,e,n){return h(Ti,h(Ci,t,e),n)})),Di=f(Pi,"phosphorLevel",xi(ki),Cn,f(Pi,"audioEmulation",xi(yi),Cn,f(Pi,"cpuEmulation",xi(wi),Cn,f(Pi,"firstVisibleLine",xi(ki),Cn,f(Pi,"rngSeed",xi(ki),Cn,l(Oi,"volume",ki,l(Oi,"emulatePaddles",gi,l(Oi,"tvMode",Ai,l(Oi,"cartridgeType",mi,l(Oi,"name",mi,l(Oi,"hash",mi,wr((function(t){return function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return function(o){return function(u){return function(c){return function(h){return{cD:c,bD:n,cO:u,bJ:i,bN:o,Q:t,az:e,dH:h,ce:a,cr:r,ee:s}}}}}}}}}}}}))))))))))))),Mi=n((function(t,e){return{cW:e,dg:t}})),Fi=l(yr,Mi,h(Ci,"key",mi),h(Ci,"description",mi)),Li=h(bi,(function(t){switch(t){case"wide":return wr(1);case"narrow":return wr(0);default:return vi("invalid media value")}}),mi),Ni=h(bi,(function(t){switch(t){case"qis":return wr(0);case"bilinear":return wr(1);case"none":return wr(2);default:return vi("invalid scaling value")}}),mi),ji=h(bi,(function(t){switch(t){case"composite":return wr(0);case"svideo":return wr(1);case"none":return wr(2);default:return vi("invalid tv emulation value")}}),mi),Ui=st,zi=l(Oi,"uiSize",ki,f(Pi,"uiMode",xi(Li),Cn,l(Oi,"virtualJoystickSensitivity",ki,l(Oi,"leftHanded",gi,f(Pi,"touchControls",xi(gi),Cn,l(Oi,"scanlineIntensity",ki,l(Oi,"phosphorLevel",ki,l(Oi,"scaling",Ni,l(Oi,"tvEmulation",ji,l(Oi,"gammaCorrection",Ui,l(Oi,"audioEmulation",yi,l(Oi,"volume",ki,l(Oi,"cpuEmulation",wi,wr((function(t){return function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return function(o){return function(u){return function(c){return function(h){return function(l){return function(f){return{cD:n,cO:t,c7:r,dh:c,dH:a,dR:s,dS:o,d7:u,d8:i,d9:l,cs:f,ed:h,ee:e}}}}}}}}}}}}}}))))))))))))))),$i=function(t){return{$:3,b:t}},Hi=l(Oi,"badGpu",gi,l(Oi,"gamepadCount",ki,l(Oi,"wasUpdated",gi,l(Oi,"version",mi,l(Oi,"touchSupport",gi,l(Oi,"defaultSettings",zi,l(Oi,"settings",zi,l(Oi,"cartridgeTypes",$i(Fi),l(Oi,"cartridges",$i(Di),wr(_i)))))))))),Wi=n((function(t,e){return{$:3,a:t,b:e}})),Gi=function(t){return{$:0,a:t}},Vi=n((function(t,e){return{$:4,a:t,b:e}})),qi={$:2},Xi=function(t){return{$:1,a:t}},Qi=function(t){return{$:0,a:t}},Ji={$:1},Yi={$:-2},Ki=Yi,Zi=function(t){return!t.$},ts=zt,es=y,ns=n((function(t,e){t:for(;;){if(-2===e.$)return Cn;var n=e.b,r=e.c,i=e.d,s=e.e;switch(h(es,t,n)){case 0:t=t,e=i;continue t;case 1:return Tn(r);default:t=t,e=s;continue t}}})),rs=s((function(t,e,n,r,i){return{$:-1,a:t,b:e,c:n,d:r,e:i}})),is=s((function(t,e,n,r,i){if(-1!==i.$||i.a){if(-1!==r.$||r.a||-1!==r.d.$||r.d.a)return d(rs,t,e,n,r,i);r.a,_=r.b,g=r.c;var s=r.d,a=(s.a,s.b),o=s.c,u=s.d,c=s.e;v=r.e;return d(rs,0,_,g,d(rs,1,a,o,u,c),d(rs,1,e,n,v,i))}i.a;var h=i.b,l=i.c,f=i.d,p=i.e;if(-1!==r.$||r.a)return d(rs,t,h,l,d(rs,0,e,n,r,f),p);r.a;var _=r.b,g=r.c,b=r.d,v=r.e;return d(rs,0,e,n,d(rs,1,_,g,b,v),d(rs,1,h,l,f,p))})),ss=r((function(t,e,n){if(-2===n.$)return d(rs,0,t,e,Yi,Yi);var r=n.a,i=n.b,s=n.c,a=n.d,o=n.e;switch(h(es,t,i)){case 0:return d(is,r,i,s,l(ss,t,e,a),o);case 1:return d(rs,r,i,e,a,o);default:return d(is,r,i,s,a,l(ss,t,e,o))}})),as=r((function(t,e,n){var r=l(ss,t,e,n);if(-1!==r.$||r.a)return r;r.a;var i=r.b,s=r.c,a=r.d,o=r.e;return d(rs,1,i,s,a,o)})),os=function(t){if(-1===t.$&&-1===t.d.$&&-1===t.e.$){if(-1!==t.e.d.$||t.e.d.a){t.a,i=t.b,s=t.c;var e=t.d,n=(e.a,o=e.b,u=e.c,c=e.d,h=e.e,t.e);n.a,f=n.b,p=n.c,r=n.d,m=n.e;return d(rs,1,i,s,d(rs,0,o,u,c,h),d(rs,0,f,p,r,m))}t.a;var r,i=t.b,s=t.c,a=t.d,o=(a.a,a.b),u=a.c,c=a.d,h=a.e,l=t.e,f=(l.a,l.b),p=l.c,_=((r=l.d).a,r.b),g=r.c,b=r.d,v=r.e,m=l.e;return d(rs,0,_,g,d(rs,1,i,s,d(rs,0,o,u,c,h),b),d(rs,1,f,p,v,m))}return t},us=function(t){if(-1===t.$&&-1===t.d.$&&-1===t.e.$){if(-1!==t.d.d.$||t.d.d.a){t.a,i=t.b,s=t.c;var e=t.d,n=(e.a,o=e.b,u=e.c,e.d),r=(_=e.e,t.e);r.a,b=r.b,v=r.c,m=r.d,y=r.e;return d(rs,1,i,s,d(rs,0,o,u,n,_),d(rs,0,b,v,m,y))}t.a;var i=t.b,s=t.c,a=t.d,o=(a.a,a.b),u=a.c,c=a.d,h=(c.a,c.b),l=c.c,f=c.d,p=c.e,_=a.e,g=t.e,b=(g.a,g.b),v=g.c,m=g.d,y=g.e;return d(rs,0,o,u,d(rs,1,h,l,f,p),d(rs,1,i,s,_,d(rs,0,b,v,m,y)))}return t},cs=o((function(t,e,n,r,i,s,a){if(-1!==s.$||s.a){t:for(;;){if(-1===a.$&&1===a.a){if(-1===a.d.$){if(1===a.d.a){a.a,a.d.a;return us(e)}break t}a.a,a.d;return us(e)}break t}return e}s.a;var o=s.b,u=s.c,c=s.d,h=s.e;return d(rs,n,o,u,c,d(rs,0,r,i,h,a))})),hs=function(t){if(-1===t.$&&-1===t.d.$){var e=t.a,n=t.b,r=t.c,i=t.d,s=i.a,a=i.d,o=t.e;if(1===s){if(-1!==a.$||a.a){var u=os(t);if(-1===u.$){var c=u.a,h=u.b,l=u.c,f=u.d,p=u.e;return d(is,c,h,l,hs(f),p)}return Yi}a.a;return d(rs,e,n,r,hs(i),o)}return d(rs,e,n,r,hs(i),o)}return Yi},ls=n((function(t,e){if(-2===e.$)return Yi;var n=e.a,r=e.b,i=e.c,s=e.d,a=e.e;if(m(t,r)<0){if(-1===s.$&&1===s.a){s.a;var o=s.d;if(-1!==o.$||o.a){var u=os(e);if(-1===u.$){var c=u.a,l=u.b,f=u.c,p=u.d,g=u.e;return d(is,c,l,f,h(ls,t,p),g)}return Yi}o.a;return d(rs,n,r,i,h(ls,t,s),a)}return d(rs,n,r,i,h(ls,t,s),a)}return h(fs,t,_(cs,t,e,n,r,i,s,a))})),fs=n((function(t,e){if(-1===e.$){var n=e.a,r=e.b,i=e.c,s=e.d,a=e.e;if(g(t,r)){var o=function(t){for(;;){if(-1!==t.$||-1!==t.d.$)return t;t=t.d}}(a);if(-1===o.$){var u=o.b,c=o.c;return d(is,n,u,c,s,hs(a))}return Yi}return d(is,n,r,i,s,h(ls,t,a))}return Yi})),ds=n((function(t,e){var n=h(ls,t,e);if(-1!==n.$||n.a)return n;n.a;var r=n.b,i=n.c,s=n.d,a=n.e;return d(rs,1,r,i,s,a)})),ps=r((function(t,e,n){var r=e(h(ns,t,n));if(r.$)return h(ds,t,n);var i=r.a;return l(as,t,i,n)})),_s=r((function(t,e,n){return e(t(n))})),gs=n((function(t,e){return l(en,"",xr,h(_s,e,t))})),bs=function(t){return{$:4,a:t}},vs={$:2},ms={$:1},ys=n((function(t,e){if(e.$){var n=e.a;return yn(t(n))}var r=e.a;return En(r)})),ws=n((function(t,e){switch(e.$){case 0:var n=e.a;return yn({$:0,a:n});case 1:return yn(ms);case 2:return yn(vs);case 3:var r=e.a;return yn(function(t){return{$:3,a:t}}(r.dZ));default:var i=e.b;return h(ys,bs,t(i))}})),As={cD:1,cO:0,c7:1,dh:!1,dH:50,dR:0,dS:20,d7:Cn,d8:0,d9:Cn,cs:100,ed:10,ee:80},ks={$:0},Es=function(t){return{$:1,a:t}},xs=n((function(t,e){return{cb:t,cl:e}})),Ts=Hr(h(xs,Ki,x)),Cs=function(t){return xt((function(e){var n=t.f;2===n.$&&n.c&&n.c(),t.f=null,e(Et(0))}))},Ss=Rt,Rs=r((function(t,e,n){t:for(;;){if(e.b){var r=e.a,i=e.b;if(r.$){var s=r.a;return h(Xr,(function(e){var r=s.co;if(1===r.$)return l(Rs,t,i,n);var a=r.a;return l(Rs,t,i,l(as,a,e,n))}),Ss(l(Ze,t,Kr(t),s)))}var a=r.a,o=h(ns,a,n);if(1===o.$){t=t,e=i,n=n;continue t}var u=o.a;return h(Xr,(function(e){return l(Rs,t,i,h(ds,a,n))}),Cs(u))}return Hr(n)}})),Is=i((function(t,e,n,r){return h(Xr,(function(t){return Hr(h(xs,t,n))}),l(Rs,t,e,r.cb))})),Bs=r((function(t,e,n){var r=t(e);if(r.$)return n;var i=r.a;return h(gn,i,n)})),Ps=n((function(t,e){return l(Vr,Bs(t),x,e)})),Os=i((function(t,e,n,r){var i=r.a,s=r.b;return g(e,i)?Tn(h(Kr,t,s(n))):Cn})),Ds=r((function(t,e,n){var r=e.a,i=e.b;return h(Xr,(function(t){return Hr(n)}),Yr(h(Ps,l(Os,t,r,i),n.cl)))})),Ms=n((function(t,e){if(e.$){var n=e.a;return Es({cA:n.cA,cE:n.cE,bb:h(nn,t,n.bb),bP:n.bP,$7:n.$7,d5:n.d5,co:n.co,bq:n.bq})}var r=e.a;return{$:0,a:r}})),Fs=n((function(t,e){return{$:0,a:t,b:e}})),Ls=n((function(t,e){var n=e.a,r=e.b;return h(Fs,n,h(_s,r,t))}));Lt.Http=Nt(Ts,Is,Ds,Ms,Ls);var Ns=$t("Http"),js=function(t){return function(t){return Ns(Es({cA:!1,cE:t.cE,bb:t.bb,bP:t.bP,$7:t.$7,d5:t.d5,co:t.co,bq:t.bq}))}({cE:ks,bb:t.bb,bP:x,$7:"GET",d5:Cn,co:Cn,bq:t.bq})},Us=n((function(t,e){return e.$?Cn:t(e.a)})),zs=n((function(t,e){return l(Vr,n((function(e,n){return t(e)?h(gn,e,n):n})),x,e)})),$s=function(t){if(t.b){var e=t.a;t.b;return Tn(e)}return Cn},Hs=n((function(t,e){if(e.$)return Cn;var n=e.a;return Tn(t(n))})),Ws=S([w(2,"emulation"),w(1,"settings"),w(0,"cartridges"),w(3,"help"),w(4,"about")]),Gs=function(t){var e=t.c6;return h(Us,(function(t){return l(_s,zs((function(e){return g(e.b,t)})),h(_s,$s,Hs(dr)),Ws)}),e)},Vs=Je,qs=function(t){return t.b},Xs=n((function(t,e){return e.$?t:e.a})),Qs=function(t){return"#"+l(_s,zs((function(e){return g(e.a,t)})),h(_s,$s,h(_s,Hs(qs),Xs(""))),Ws)},Js=n((function(t,e){return l(Mn,function(t){return n((function(e,n){return n.push(t(e)),n}))}(t),[],e)})),Ys=At,Ks=Jt("watchMedia_",Js(Ys)),Zs=Ks,ta=function(t){return Zs(S(["(max-width: "+Bn(750*t/100|0)+"px)"]))},ea=r((function(t,e,n){var r,i=h(Xs,0,Gs(e)),s=function(t){return h(gs,(function(e){if(e.$)return hi;var n=e.a;return t(n)}),ws(En))},a=(r=h(Si,Hi,t)).$?{aN:!1,aP:x,aQ:x,aR:As,aU:0,aE:As,a8:!1,aK:"[unknown]",br:!1}:r.a,o={aN:a.aN,cG:"",aP:a.aP,cH:0,aQ:a.aQ,cK:Cn,cN:{cM:0,cX:0,cY:0},cP:Cn,cQ:i,aR:a.aR,c$:!1,c0:ai,aU:a.aU,c9:Cn,dg:n,di:Cn,dj:!0,dl:Cn,dn:a.br?w(Tn(ci),h(ui,"Stellerator has been updated to version "+a.aK+".",w("Changelog","Close"))):w(Cn,h(oi,"","")),dP:Cn,aE:a.aE,dW:!1,dX:!1,a8:a.a8,aK:a.aK};return w(o,pi(S([h(Vs,n,Qs(i)),ta(o.aE.cs),js({bb:s(fi),bq:"doc/stellerator.md"}),js({bb:s(li),bq:"CHANGELOG.md"}),js({bb:s(di),bq:"LICENSE.md"})])))})),na=function(t){return{$:0,a:t}},ra=h(_s,Gs,h(_s,Hs((function(t){return{$:1,a:t}})),Xs(na(Qs(0))))),ia=n((function(t,e){if(1===t.$)return e;var n=t.a;return e+":"+Bn(n)})),sa=r((function(t,e,n){return 1===e.$?n:E(n,E(t,e.a))})),aa=function(t){return{$:20,a:t}},oa=function(t){return{$:34,a:t}},ua=function(t){return{$:33,a:t}},ca=function(t){return{$:40,a:t}},ha=Ht,la=function(t){return{$:3,a:t}},fa={$:1},da=function(t){return{$:2,a:t}},pa=h(bi,(function(t){switch(t){case"stopped":return wr(ai);case"paused":return wr(fa);case"running":return h(mr,da,xi(h(Ci,"frequency",Ui)));case"error":return h(mr,la,h(Ci,"error",mi));default:return vi("invalid emulation state")}}),h(Ci,"state",mi)),_a=n((function(t,e){if(e.$){var n=e.a;return yn(n)}var r=e.a;return En(t(r))})),ga=Zt("onEmulationStateChange_",Ii),ba=n((function(t,e){return e.$?t:e.a})),va=function(t){return ga(h(_s,Si(pa),h(_s,_a(t),ba(hi))))},ma=h(bi,(function(t){switch(t){case"pause":return wr(0);case"reset":return wr(1);case"fullscreen":return wr(2);default:return vi("invalid input driver event")}}),mi),ya=Zt("onInputDriverEvent_",Ii),wa=function(t){return ya(h(_s,Si(ma),h(_s,_a(t),ba(hi))))},Aa=r((function(t,e,n){return t(e(n))})),ka=Zt("onNewCartridges_",Ii),Ea=Zt("onUpdateGamepadCount_",ki),xa=Ea,Ta=Zt("onMediaUpdate_",$i(gi)),Ca=Ta,Sa=Ca(h(_s,$s,h(_s,Hs((function(t){return{$:2,a:t?0:1}})),Xs(hi)))),Ra={$:4},Ia=function(t){return{$:9,a:t}},Ba={$:31},Pa=Jt("addCartridge_",(function(t){return null})),Oa=Pa(0),Da=Jt("blurCurrentElement_",(function(t){return null})),Ma=Da(0),Fa=n((function(t,e){for(;;){if(!e.b)return!1;var n=e.a,r=e.b;if(t(n))return!0;t=t,e=r}})),La=function(t){return!t},Na=n((function(t,e){return!h(Fa,h(Aa,La,t),e)})),ja=function(t){return t.toUpperCase()},Ua=function(t){return S(t.trim().split(/\s+/g))},za=n((function(t,e){var n=Ua(ja(t));return h(zs,(function(t){return h(Na,(function(e){return h(Sr,e,ja(t.az))}),n)}),e)})),$a=function(t){return h(za,t.cG,t.aQ)},Ha=Jt("deleteAllCartridges_",(function(t){return null})),Wa=Ha(0),Ga=Jt("deleteCartridge_",Ys),Va=Ga,qa=n((function(t,e){for(;;){if(!e.b)return Cn;var n=e.a,r=e.b;if(t(n))return Tn(n);t=t,e=r}})),Xa=B,Qa=n((function(t,e){var n=h(Xa,h(_s,(function(t){return t.az}),ja),t),r=function(t){if(t.b&&t.b.b){var i=t.a,s=t.b,a=s.a,o=s.b;return g(i.Q,e)?Tn(a):r(h(gn,a,o))}return $s(n)};return r(E(n,E(n,n)))})),Ja=pi(x),Ya=Jt("pauseEmulation_",(function(t){return null})),Ka=Ya(0),Za=n((function(t,e){var n=h(Xa,h(_s,(function(t){return t.az}),ja),t),r=function(t){if(t.b&&t.b.b){var i=t.a,s=t.b,a=s.a,o=s.b;return g(a.Q,e)?Tn(i):r(h(gn,a,o))}return $s(qn(n))};return r(E(n,E(n,n)))})),to=Qe,eo=Jt("resetEmulation_",(function(t){return null})),no=eo(0),ro=Jt("resumeEmulation_",(function(t){return null})),io=ro(0),so=Jt("saveCartridge_",Ys),ao=so,oo=Jt("scrollIntoView_",(function(t){var e=t.a,n=t.b;return h(Js,xr,S([Ys(e),Ys(n)]))})),uo=n((function(t,e){var n=function(){switch(t){case 0:return"start";case 1:return"center";case 2:return"end";default:return"nearest"}}();return oo(w(n,e))})),co=Jt("scrollToTop_",(function(t){return null})),ho=co(0),lo=function(t){return l(_s,Us((function(e){return h(qa,(function(t){return g(t.Q,e)}),$a(t))})),Hs((function(t){return t.Q})),t.cP)},fo=At,po=Jt("setLimitFramerate_",fo),_o=po,go=function(t){return Ys(t?"amateur":"pro")},bo=function(t){return l(Mn,n((function(t,e){var n=t.a,r=t.b;return l(kt,n,r,e)})),{},t)},vo=function(t){return bo(S([w("difficultyP0",go(t.cX)),w("difficultyP1",go(t.cY)),w("color",(e=t.cM,Ys(e?"bw":"color")))]));var e},mo=Jt("startEmulation_",xr),yo=n((function(t,e){return mo(bo(S([w("hash",Ys(t)),w("switches",vo(e))])))})),wo=Jt("stopEmulation_",(function(t){return null})),Ao=wo(0),ko=Jt("toggleFullscreen_",(function(t){return null})),Eo=ko(0),xo=function(t){return Ys(1===t?"pcm":"waveform")},To=function(t){return Ys(t?"instruction":"cycle")},Co=i((function(t,e,n,r){return h(Xs,r,h(Hs,(function(n){return h(gn,w(t,e(n)),r)}),n))})),So=function(t){switch(t){case 0:return Ys("pal");case 1:return Ys("ntsc");default:return Ys("secam")}},Ro=At,Io=Jt("updateCartridge_",xr),Bo=function(t){return Io(bo(f(Co,"phosphorLevel",Ro,(e=t).dH,f(Co,"audioEmulation",xo,e.cD,f(Co,"cpuEmulation",To,e.cO,f(Co,"firstVisibleLine",Ro,e.bN,f(Co,"rngSeed",Ro,e.ce,S([w("hash",Ys(e.Q)),w("name",Ys(e.az)),w("cartridgeType",Ys(e.bD)),w("tvMode",So(e.cr)),w("emulatePaddles",fo(e.bJ)),w("volume",Ro(e.ee))]))))))));var e},Po=r((function(t,e,n){switch(e.$){case 0:var r=e.a;return A(n,{az:r});case 1:var i=e.a,s=h(Xs,n.bD,h(Hs,(function(t){return t.dg}),h(qa,(function(t){return g(t.dg,i)}),t)));return A(n,{bD:s});case 2:var a=e.a;return A(n,{cr:a});case 3:var o=e.a;return A(n,{bJ:o});case 4:var u=e.a,c=h(Us,(function(t){return t>=0?Tn(t):n.ce}),u);return A(n,{ce:c});case 5:var l=e.a,f=h(Us,(function(t){return t>=0&&t<100?Tn(t):n.bN}),l);return A(n,{bN:f});case 6:var d=e.a;return A(n,{cO:d});case 7:d=e.a;return A(n,{cD:d});case 8:var p=e.a;return A(n,{ee:p});default:var _=e.a;return A(n,{dH:_})}})),Oo=Jt("updateConsoleSwitches_",xr),Do=h(_s,vo,Oo),Mo=function(t){return Ys(1===t?"wide":"narrow")},Fo=function(t){switch(t){case 0:return Ys("qis");case 1:return Ys("bilinear");default:return Ys("none")}},Lo=function(t){switch(t){case 0:return Ys("composite");case 1:return Ys("svideo");default:return Ys("none")}},No=At,jo=Jt("updateSettings_",xr),Uo=h(_s,(function(t){return bo(f(Co,"uiMode",Mo,t.d9,f(Co,"touchControls",fo,t.d7,S([w("cpuEmulation",To(t.cO)),w("volume",Ro(t.ee)),w("audioEmulation",xo(t.cD)),w("gammaCorrection",No(t.c7)),w("tvEmulation",Lo(t.d8)),w("scaling",Fo(t.dR)),w("phosphorLevel",Ro(t.dH)),w("scanlineIntensity",Ro(t.dS)),w("leftHanded",fo(t.dh)),w("virtualJoystickSensitivity",Ro(t.ed)),w("uiSize",Ro(t.cs))]))))}),jo),zo=S([50,75,100,125,150]),$o=r((function(t,e,n){switch(t.$){case 0:var r=t.a;return A(n,{cO:r});case 1:var i=t.a;return A(n,{ee:i});case 2:var s=t.a;return A(n,{cD:s});case 3:var a=t.a;return A(n,{c7:a});case 4:var o=t.a;return A(n,{d8:o});case 5:var u=t.a;return A(n,{dR:u});case 6:var c=t.a;return A(n,{dH:c});case 7:var l=t.a;return A(n,{dS:l});case 8:var f=t.a;return A(n,{d7:f});case 9:var d=t.a;return A(n,{dh:d});case 10:var p=t.a;return A(n,{ed:p});case 11:var _=t.a;return A(n,{d9:_});case 12:var g=t.a;return h(Xs,n,h(Hs,(function(t){return A(n,{cs:t})}),h(qa,or(g),zo)));default:return e}})),Ho=n((function(t,e){t:for(;;){var i=function(t){return w(A(e,{cP:t}),h(Xs,Ja,h(Hs,uo(3),t)))},s=function(t){return w(t,Ja)};switch(t.$){case 0:var a=t.a;return w(e,h(to,e.dg,a));case 1:var o=t.a,u=function(){var t=w(o,lo(e));if(t.a||t.b.$)return S([ho]);var n=t.b.a;return e.cQ?S([h(uo,1,n)]):x}(),c=A(e,{cQ:o,dW:2===o,dX:!1}),f=(J=void 0,2!==(J=w(o,e.c$)).a||J.b?S([Ka]):S([io]));return w(c,pi(E(u,f)));case 2:var d=t.a,p=function(){var t=w(e.cQ,lo(e));if(t.a||t.b.$)return Ja;var n=t.b.a;return h(uo,1,n)}();return w(A(e,{cH:0,dl:Tn(d)}),p);case 7:var _=t.a;return w(c=A(e,{cG:_}),ho);case 8:p=function(){var t=e.dl;if(t.$||t.a)return h(Xs,Ja,h(Hs,uo(3),e.cP));t.a;return ho}();return w(A(e,{cG:""}),p);case 9:var b=t.a;return i(Tn(b));case 10:b=t.a;return i(h(Hs,(function(t){return t.Q}),h(Qa,$a(e),b)));case 11:b=t.a;return i(h(Hs,(function(t){return t.Q}),h(Za,$a(e),b)));case 12:return i(h(Hs,(function(t){return t.Q}),$s($a(e))));case 13:return i(h(Hs,(function(t){return t.Q}),$s(qn($a(e)))));case 14:return s(A(e,{cP:Cn}));case 15:b=t.a;var v=g(e.cP,Tn(b))?h(Hs,(function(t){return t.Q}),h(Qa,$a(e),b)):e.cP;p=g(v,e.cP)?Ja:h(Xs,Ja,h(Hs,uo(3),v));return w(A(e,{cH:0,aQ:h(zs,(function(t){return!g(t.Q,b)}),e.aQ),cP:v}),pi(S([p,Va(b)])));case 16:return w(A(e,{aQ:x,cP:Cn}),Wa);case 17:b=t.a;var m=t.b,y=h(qr,(function(t){return g(t.Q,b)?l(Po,e.aP,m,t):t}),e.aQ);p=h(Xs,Ja,h(Hs,Bo,h(qa,h(Aa,or(b),(function(t){return t.Q})),y)));return w(A(e,{aQ:y}),p);case 3:var k=t.a;return s(A(e,{c9:Tn(k)}));case 4:k=t.a;return s(A(e,{cK:Tn(k)}));case 5:k=t.a;return s(A(e,{di:Tn(k)}));case 6:return s(A(e,{dX:!e.dX}));case 18:var T=t.a,C=(Q=void 0,1!==(Q=w(T,e.cP)).a||Q.b.$?0:1);p=function(){var t,n,r,i=(t=C,n=e.cH,r=lo(e),{a:t,b:n,c:r});e:for(;;){if(i.a){if(i.b)break e;return ho}if(1!==i.b||i.c.$)break e;var s=i.c.a;return h(uo,1,s)}return Ja}();return w(A(e,{cH:C}),p);case 19:return w(e,Oa);case 20:var R=t.a,I=A(e,{cG:"",aQ:(X=l(Mn,n((function(t,e){return l(as,t.Q,t,e)})),Ki,E(e.aQ,R)),l(bn,r((function(t,e,n){return h(gn,e,n)})),x,X))});if(R.b){var B=R.a;t=Ia(B.Q),e=I;continue t}return s(I);case 21:b=t.a;return w(e,ao(b));case 22:var P=t.a,O=l($o,P,e.aR,e.aE),D=g(e.aE.cs,O.cs)?Ja:ta(O.cs);return w(A(e,{aE:O}),pi(S([Uo(O),D])));case 23:var M=t.a,F=t.b,L=t.c;return s(A(e,{dn:w(Tn(L),h(ui,M,F))}));case 24:M=t.a;var N=t.b;L=t.c;return s(A(e,{dn:w(Tn(L),h(oi,M,N))}));case 25:return s(A(e,{dn:w(Cn,e.dn.b)}));case 26:c=A(e,{dn:w(Cn,e.dn.b)});return h(Xs,s(c),h(Hs,(function(t){return h(Ho,t,c)}),e.dn.a));case 27:b=t.a;return w(A(e,{c$:!1,c0:Ra,dP:Tn(b)}),pi(S([h(yo,b,e.cN),h(to,e.dg,Qs(2))])));case 29:return w(e,Ao);case 28:return w(e,Ka);case 30:return w(e,no);case 31:var j=!e.c$;c=A(e,{c$:j,dW:!1}),p=j?Ka:io;switch(e.c0.$){case 1:case 2:return w(c,p);default:return w(e,Ja)}case 33:var U=t.a,z=(q=void 0,4!==(q=w(e.c0,U)).a.$||q.b.$?U:Ra);return s(A(e,{c0:z}));case 34:switch(t.a){case 0:t=Ba,e=e;continue t;case 1:return w(e,no);default:return w(e,Eo)}case 32:var $=t.a;return w(A(e,{dj:$}),_o($));case 35:var H=t.a,W=A(e.cN,{cX:H});return w(A(e,{cN:W}),Do(W));case 36:H=t.a,W=A(e.cN,{cY:H});return w(A(e,{cN:W}),Do(W));case 37:var G=t.a;W=A(e.cN,{cM:G});return w(A(e,{cN:W}),Do(W));case 38:return w(e,Ma);case 39:return w(e,h(to,e.dg,Qs(4)));case 40:var V=t.a;return w(A(e,{aU:V}),Ja);default:return s(e)}}var q,X,Q,J})),Wo=r((function(t,e,n){return{$:0,a:t,b:e,c:n}})),Go=r((function(t,e,n){return{$:0,a:t,b:e,c:n}})),Vo=function(t){return{$:0,a:t}},qo=n((function(t,e){return{$:0,a:t,b:e}})),Xo=n((function(t,e){var n=h(qo,t,x),r=l(Wo,n,x,Cn);return S([Vo(l(Go,r,x,e))])})),Qo=Xo("body"),Jo=function(t){return{$:0,a:t}},Yo=n((function(t,e){return Jo(t+":"+e)})),Ko=n((function(t,e){return h(Yo,t,e.D)})),Zo=Ko("font-size"),tu=function(t){return!t.b},eu=n((function(t,e){var n=e.a,r=e.b;switch(t.$){case 0:var i=t.a.c;return tu(i)?w(n,r):w(n,h(gn,t,r));case 1:var s=t.b;return h(Na,(function(t){var e=t.c;return tu(e)}),s)?w(n,r):w(n,h(gn,t,r));case 2:var a=t.b;return tu(a)?w(n,r):w(n,h(gn,t,r));case 3:return w(n,h(gn,t,r));case 4:i=t.b;return tu(i)?w(n,r):w(n,h(gn,t,r));case 5:i=t.a;return tu(i)?w(n,r):w(n,h(gn,t,r));case 6:var o=t.a;return Or(o.cT)?w(n,r):w(l(as,o.az,o.cT,n),r);case 7:case 8:i=t.a;return tu(i)?w(n,r):w(n,h(gn,t,r));default:var u=t.a;return h(Na,(function(t){var e=t.b;return tu(e)}),u)?w(n,r):w(n,h(gn,t,r))}})),nu=function(t){return{$:6,a:t}},ru=n((function(t,e){return e.b?l(Vr,gn,e,t):t})),iu=n((function(t,e){return h(ru,h(qr,(function(t){var e=t.a,n=t.b;return nu({cT:n,az:e})}),vn(t)),e)})),su=function(t){return h(Xs,"",h(Hs,(function(t){return'@charset "'+t+'"'}),t))},au=function(t){return"("+t.bM+h(Xs,"",h(Hs,Rn(": "),t.D))+")"},ou=function(t){var e=r((function(t,e,n){return t+" "+h(Pn," and ",h(gn,function(t){switch(t){case 0:return"print";case 1:return"screen";default:return"speech"}}(e),h(qr,au,n)))}));switch(t.$){case 0:var n=t.a;return h(Pn," and ",h(qr,au,n));case 1:return l(e,"only",t.a,n=t.b);case 2:return l(e,"not",t.a,n=t.b);default:return t.a}},uu=n((function(t,e){return'@import "'+t+ou(e)+'"'})),cu=function(t){var e=t.a,n=t.b;return h(Pn,"\n",h(qr,uu(e),n))},hu=function(t){return"@namespace "+t.a+'"'+t.b+'"'},lu=function(t){return E("    ",t)},fu=function(t){return t+";"},du=function(t){return h(Pn,"\n",h(qr,h(Aa,lu,fu),t))},pu=H,_u=function(t){return"::"+t},gu=function(t){switch(t){case 0:return"+";case 1:return"~";case 2:return">";default:return""}},bu=function(t){switch(t.$){case 0:return"."+t.a;case 1:return"#"+t.a;case 2:return":"+t.a;default:return"["+t.a+"]"}},vu=function(t){switch(t.$){case 0:var e=t.a,n=t.b;return h(Pn,"",h(gn,e,h(qr,bu,n)));case 1:n=t.a;return tu(n)?"*":h(Pn,"",h(qr,bu,n));default:e=t.a,n=t.b;return h(Pn,"",h(gn,e,h(qr,bu,n)))}},mu=function(t){var e=t.a,n=t.b;return h(Pn," ",S([gu(e),vu(n)]))},yu=function(t){var e=t.a,n=t.b,r=t.c,i=h(gn,vu(e),h(qr,mu,n)),s=h(Pn,"",S([h(Xs,"",h(Hs,_u,r))]));return h(pu,h(Pn," ",h(zs,h(Aa,La,Or),i)),s)},wu=n((function(t,e){var n=e.a,r=e.b,i=e.c,s=h(Pn,", ",h(qr,yu,h(gn,n,r)));return h(Pn,"",S([s," {\n",t,du(i),"\n",t,"}"]))})),Au=function(t){switch(t.$){case 0:var e=t.a;return h(wu,"",e);case 1:var n=t.a,r=t.b;return"@media "+h(Pn,",\n",h(qr,ou,n))+" {\n"+h(Pn,"\n\n",h(qr,h(Aa,lu,wu("    ")),r))+"\n}";case 2:case 3:case 4:case 5:return"TODO";case 6:return"@keyframes "+t.a.az+" {\n"+t.a.cT+"\n}";case 7:case 8:default:return"TODO"}},ku=function(t){return l(Vr,ru,x,t)},Eu=n((function(t,e){return ku(h(qr,t,e))})),xu=function(t){return{$:8,a:t}},Tu=function(t){return{$:5,a:t}},Cu=n((function(t,e){return{$:4,a:t,b:e}})),Su=r((function(t,e,n){return{$:0,a:t,b:e,c:n}})),Ru=function(t){return{$:0,a:t}},Iu=n((function(t,e){return{$:2,a:t,b:e}})),Bu=function(t){return{$:7,a:t}},Pu=n((function(t,e){return{$:1,a:t,b:e}})),Ou=n((function(t,e){if(e.b){if(e.b.b){var n=e.a,r=e.b;return h(gn,n,h(Ou,t,r))}return S([t(e.a)])}return e})),Du=n((function(t,e){var n=e.a,r=e.b,i=e.c;return l(Su,n,r,E(i,S([t])))})),Mu=n((function(t,e){if(!e.b)return e;if(e.b.b){var n=e.a,r=e.b;return h(gn,n,h(Mu,t,r))}switch(e.a.$){case 0:var i=e.a.a;return S([Ru(h(Du,t,i))]);case 1:var s=e.a,a=s.a,o=s.b;return S([h(Pu,a,h(Ou,Du(t),o))]);default:return e}})),Fu=n((function(t,e){if(e.b.b){var n=e.a,r=e.b,i=(o=e.c,h(qr,t,r)),s=t(n);return S([l(Su,n,r,o),l(Su,s,i,x)])}var a=e.a,o=e.c;return S([l(Su,a,x,o),l(Su,t(a),x,x)])})),Lu=n((function(t,e){var n=e.a,r=e.b;return l(Wo,n,r,Tn(t))})),Nu=n((function(t,e){return h(Fu,Lu(t),e)})),ju=n((function(t,e){return{$:2,a:t,b:e}})),Uu=function(t){return{$:1,a:t}},zu=n((function(t,e){switch(e.$){case 0:var n=e.a,r=e.b;return h(qo,n,E(r,S([t])));case 1:r=e.a;return Uu(E(r,S([t])));default:var i=e.a;r=e.b;return h(ju,i,E(r,S([t])))}})),$u=n((function(t,e){if(e.b){if(e.b.b){var n=e.a,r=e.b;return h(gn,n,h($u,t,r))}var i=e.a,s=i.a,a=i.b;return S([w(s,h(zu,t,a))])}return x})),Hu=n((function(t,e){if(e.b.b){var n=e.a,r=e.b;s=e.c;return l(Wo,n,h($u,t,r),s)}var i=e.a,s=e.c;return l(Wo,h(zu,t,i),x,s)})),Wu=n((function(t,e){return h(Fu,Hu(t),e)})),Gu=function(t){t:for(;;){if(t.b){if(t.a.$){t=i=t.b;continue t}var e=t.a.a,n=e.a,r=e.b,i=t.b;return E(h(gn,n,r),Gu(i))}return x}},Vu=s((function(t,e,n,r,i){return{$:3,a:t,b:e,c:n,d:r,e:i}})),qu=n((function(t,e){t:for(;;){if(!e.b)return e;if(e.b.b)break t;switch(e.a.$){case 0:var n=e.a.a;return h(qr,Ru,t(n));case 1:if(e.a.b.b){if(e.a.b.b.b){var r=e.a,i=(p=r.a,r.b),s=i.a,a=i.b,o=h(qu,t,S([h(Pu,p,a)]));if(o.b&&1===o.a.$&&!o.b.b){var u=o.a,c=u.a,l=u.b;return S([h(Pu,c,h(gn,s,l))])}return o}var d=e.a,p=d.a;n=d.b.a;return S([h(Pu,p,t(n))])}break t;case 2:var _=e.a,g=_.a,b=_.b;return S([h(Iu,g,h(qu,t,b))]);case 3:var v=e.a,m=v.a,y=v.b,w=v.c,A=v.d;n=v.e;return h(qr,f(Vu,m,y,w,A),t(n));case 4:e.a;return e;case 5:case 6:case 7:case 8:default:return e}}s=e.a,a=e.b;return h(gn,s,h(qu,t,a))})),Xu=$,Qu=i((function(t,e,n,r){return{aa:r,Q:n,V:e,ak:t}})),Ju=n((function(t,e){return(65535&e)*t+(((e>>>16)*t&65535)<<16)})),Yu=n((function(t,e){return e<<t|e>>>32-t})),Ku=G,Zu=n((function(t,e){return h(Ju,5,h(Yu,13,t^h(Ju,461845907,h(Yu,15,h(Ju,3432918353,e)))))+3864292196})),tc=n((function(t,e){var n=e.Q|(255&zn(t))<<e.ak;return 24===e.ak?{aa:e.aa+1,Q:0,V:h(Zu,e.V,n),ak:0}:{aa:e.aa+1,Q:n,V:e.V,ak:e.ak+8}})),ec=n((function(t,e){return n=l(Ku,tc,f(Qu,0,t,0,0),e),r=(n.Q?n.V^h(Ju,461845907,h(Yu,15,h(Ju,3432918353,n.Q))):n.V)^n.aa,i=h(Ju,2246822507,r^r>>>16),((s=h(Ju,3266489909,i^i>>>13))^s>>>16)>>>0;var n,r,i,s})),nc=function(t){return R(t).join("")},rc=F,ic=function(t){t:for(;;)switch(t){case 0:return"0";case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"8";case 9:return"9";case 10:return"a";case 11:return"b";case 12:return"c";case 13:return"d";case 14:return"e";case 15:return"f";default:t=t;continue t}},sc=n((function(t,e){for(;;){if(e<16)return h(gn,ic(e),t);t=h(gn,ic(h(rc,16,e)),t),e=e/16|0}})),ac=function(t){return nc(t<0?h(gn,"-",h(sc,x,-t)):h(sc,x,t))},oc=function(t){t:for(;;){if(t.b){if(t.b.b){t=t.b;continue t}var e=t.a;return Tn(S([e]))}return Cn}},uc=function(t){var e,n=function(t){if(t.b){var e=t.a,r=t.b;return h(gn,e,n(r))}return x},r=n(t);return S([(e=r,{$:9,a:e})])},cc=function(t){return S([t])},hc=n((function(t,e){if(e.$)return e;var n=e.a;return h(Pu,t,S([n]))})),lc=r((function(t,e,n){for(;;){if(t<=0)return n;if(!e.b)return n;var r=e.a;t=t-1,e=e.b,n=h(gn,r,n)}})),fc=n((function(t,e){return qn(l(lc,t,e,x))})),dc=r((function(t,e,n){if(e<=0)return x;var r=w(e,n);t:for(;;){e:for(;;){if(!r.b.b)return n;if(!r.b.b.b){if(1===r.a)break t;break e}switch(r.a){case 1:break t;case 2:var i=r.b;return S([a=i.a,f=i.b.a]);case 3:if(r.b.b.b.b){var s=r.b,a=s.a,o=s.b;return S([a,f=o.a,p=o.b.a])}break e;default:if(r.b.b.b.b&&r.b.b.b.b.b){var u=r.b,a=u.a,c=u.b,f=c.a,d=c.b,p=d.a,_=d.b,g=_.a,b=_.b;return h(gn,a,h(gn,f,h(gn,p,h(gn,g,t>1e3?h(fc,e-4,b):l(dc,t+1,e-4,b)))))}break e}}return n}return S([a=r.b.a])})),pc=n((function(t,e){return l(dc,0,t,e)})),_c=s((function(t,e,n,r,i){if(i.$)return i;var s=i.a;return d(Vu,t,e,n,r,s)})),gc=n((function(t,e){switch(e.$){case 0:var n=e.a;return h(Pu,t,S([n]));case 1:var r=e.a,i=e.b;return h(Pu,E(t,r),i);case 2:var s=e.a,a=e.b;return h(Iu,s,h(qr,gc(t),a));case 3:var o=e.a,u=e.b,c=e.c,l=e.d;n=e.e;return d(Vu,o,u,c,l,n);case 4:case 5:case 6:case 7:case 8:default:return e}})),bc=function(t){return t},vc=i((function(t,e,n,r){var i=function(t){return h(Xs,x,function(t){if(t.b){t.a;var e=t.b;return Tn(e)}return Cn}(t))},s=h(mc,e,h(Xs,x,oc(r))),a=function(){var t=w($s(s),function(t){t:for(;;){if(t.b){if(t.b.b){t=t.b;continue t}var e=t.a;return Tn(e)}return Cn}}(r));if(t.a.$||t.b.$)return r;var e=t.a.a,n=t.b.a;return E(h(pc,Fn(r)-1,r),S([g(n,e)?n:e]))}();return E(a,E(i(h(Xs,x,h(Hs,(function(e){return ku(h(Ou,mc(t),h(qr,cc,h(qu,n,e))))}),oc(r)))),i(s)))})),mc=n((function(t,e){if(!t.b)return e;switch(t.a.$){case 0:var r=t.a.a,i=t.b;return h(mc,i,h(Mu,r,e));case 1:var s=t.a,a=s.a,o=s.b;i=t.b;return f(vc,o,i,Wu(a),e);case 2:var u=t.a,c=u.a,d=u.b,p=(i=t.b,n((function(t,e){var n=t.a,r=t.b,i=t.c,s=e.a,a=e.b,o=e.c;return l(Wo,n,E(r,h(gn,w(c,s),a)),function(t){t:for(;;){if(t.b){var e=t.a,n=t.b;if(1===e.$){t=n;continue t}return e}return Cn}}(S([o,i])))})));return ku(E(S([h(mc,i,e)]),h(qr,(function(t){switch(t.$){case 0:var n=t.a,r=n.a,i=n.b,s=n.c,a=h(Eu,(function(t){return h(qr,p(t),h(gn,r,i))}),Gu(e)),o=function(){if(a.b){var t=a.a,e=a.b;return S([Ru(l(Su,t,e,x))])}return x}();return h(mc,s,o);case 1:var u=t.a,c=t.b;return h(Ac,u,c);case 2:var d=t.a,_=t.b;return h(kc,d,_);case 3:var g=t.a,b=t.b,v=t.c,m=t.d,y=t.e;return h(qr,f(_c,g,b,v,m),yc(y));case 4:d=t.a;var w=t.b;return S([h(Cu,d,w)]);case 5:w=t.a;return S([Tu(w)]);case 6:w=t.a;return S([Bu(w)]);case 7:w=t.a;return S([xu(w)]);default:var A=t.a;return uc(A)}}),h(Eu,bc,d))));case 3:var _=t.a,g=_.a;o=_.b,i=t.b;return f(vc,o,i,Nu(g),e);case 5:var b=t.a.a,v=(i=t.b,function(t){return h(Xu,"_",ac(h(ec,15739,t)))}(b)),m=h(mc,i,h(Mu,"animation-name:"+v,e));return h(ru,m,S([nu({cT:b,az:v})]));case 4:var y=t.a,A=y.a,k=(o=y.b,i=t.b,function(){var t=Gu(e);if(t.b){var n=t.a,r=t.b;return h(qr,hc(A),h(mc,o,cc(Ru(l(Su,n,r,x)))))}return x}());return E(h(mc,i,e),k);default:var T=t.a.a;i=t.b;return h(mc,E(T,i),e)}})),yc=function(t){var e=t.a,n=t.b,r=t.c;return h(mc,r,S([Ru(l(Su,e,n,x))]))},wc=function(t){if(t.b){var e=t.a,n=t.b;return E(Ec(e),wc(n))}return x},Ac=n((function(t,e){return h(Eu,(function(e){return h(qr,gc(t),yc(e))}),e)})),kc=n((function(t,e){var n=wc(h(Eu,bc,e));return S([h(Iu,t,n)])})),Ec=function(t){switch(t.$){case 0:var e=t.a;return yc(e);case 1:var n=t.a,r=t.b;return h(Ac,n,r);case 2:var i=t.a,s=t.b;return h(kc,i,s);case 3:var a=t.a,o=t.b,u=t.c,c=t.d;e=t.e;return h(qr,f(_c,a,o,u,c),yc(e));case 4:i=t.a;var l=t.b;return S([h(Cu,i,l)]);case 5:l=t.a;return S([Tu(l)]);case 6:l=t.a;return S([Bu(l)]);case 7:l=t.a;return S([xu(l)]);default:var d=t.a;return uc(d)}},xc=function(t){return function(t){var e=t.bF,n=t.bS,r=t.b_,i=t.cU;return h(Pn,"\n\n",h(zs,h(Aa,La,Or),S([su(e),h(Pn,"\n",h(qr,cu,n)),h(Pn,"\n",h(qr,hu,r)),h(Pn,"\n\n",h(qr,Au,i))])))}(function(t){var e=t.bF,n=t.bS,r=t.b_,i=t.cU,s=l(Vr,eu,w(Ki,x),i),a=s.a,o=s.b;return{bF:e,cU:h(iu,a,o),bS:n,b_:r}}((n=(e=t).bF,r=e.bS,i=e.b_,s=e.ci,{bF:n,cU:wc(h(Eu,bc,s)),bS:r,b_:i})));var e,n,r,i,s},Tc=function(t){return h(Pn,"\n\n",h(qr,xc,t))},Cc=function(t){return oe(ge(t))},Sc=function(t){return{bF:Cn,bS:x,b_:x,ci:t}},Rc=se,Ic=function(t){return{$:4,a:t}},Bc=Ic,Pc=function(t){return Bc(l(Cc,"style",x,cc(Rc(Tc(cc(Sc(t)))))))},Oc=Ko("line-height"),Dc=function(t){return h(Yo,"background-color",t.D)},Mc=r((function(t,e,n){return{$:0,a:t,b:e,c:n}})),Fc=n((function(t,e){var n=l(Wo,e,x,Cn);return S([Vo(l(Go,n,x,t))])})),Lc=n((function(t,e){return h(pe,function(t){return"innerHTML"==t||"formAction"==t?"data-"+t:t}(t),be(e))})),Nc=function(t){var e=function(t){return tu(t)?"unstyled":h(Xu,"_",ac(h(ec,15739,Tc(cc(Sc(cc(h(Fc,t,Uu(x)))))))))}(t),n=h(Lc,"className",Ys(e));return l(Mc,n,t,e)},jc=Ko("display"),Uc=r((function(t,e,n){return{$:0,a:t,b:e,c:n}})),zc=Uc,$c=zc,Hc=$c("div"),Wc={at:0,aC:0,a6:0,D:"fixed"},Gc=Ko("height"),Vc=function(t){return{I:0,aV:0,S:0,B:0,dC:0,aY:0,K:t,ap:"",aJ:0,D:Bn(t)}},qc=Ko("left"),Xc={Z:0,bz:0,r:0,a:0,g:0,db:0,bU:0,bf:0,ai:0,R:0,B:0,c:0,b:0,bi:0,a_:0,dI:0,z:0,a1:0,dT:0,am:0,X:0,v:0,e:0,eb:0,D:"none"},Qc=Ko("position"),Jc=et,Yc=r((function(t,e,n){return{bs:0,bC:0,ad:0,o:0,ax:0,ag:0,J:0,ah:0,ai:0,R:0,S:0,B:0,K:n,an:0,ap:e,aJ:t,D:E(Jc(n),e)}})),Kc=h(Yc,0,"px"),Zc=n((function(t,e){return t+"("+h(Pn,", ",e)+")"})),th=i((function(t,e,n,r){return{as:r,au:n,cM:0,aw:e,aD:t,D:h(Zc,"rgba",E(h(qr,Bn,S([t,e,n])),S([Jc(r)])))}})),eh=Ko("top"),nh=h(Yc,0,"vh"),rh=h(Yc,0,"vw"),ih=Ko("width"),sh=Ko("z-index"),ah=function(t){var e=t?x:S([jc(Xc)]);return h(Hc,S([Nc(E(e,S([Qc(Wc),eh(Kc(0)),qc(Kc(0)),ih(rh(100)),Gc(nh(100)),sh(Vc(100)),Dc(f(th,0,0,0,.5))])))]),x)},oh=Ko("center"),uh={$:26},ch={$:25},hh=h(Yo,"display","flex"),lh=h(Yc,0,"em"),fh=Ko("flex-end"),dh=function(t){return{$:6,a:t}},ph=n((function(t,e){return Jo(t+":"+e)})),_h=r((function(t,e,n){t:for(;;)switch(n.$){case 0:var r=n.a,i=h(Xs,"",$s(h(On,":",r)));return h(ph,e,i);case 1:n.a;return h(ph,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-selector");case 2:n.a;return h(ph,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-combinator");case 3:n.a;return h(ph,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-pseudo-element setter");case 4:return h(ph,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-media-query");case 5:return h(ph,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-keyframes");default:if(n.a.b){if(n.a.b.b){var s=n.a,a=(s.a,s.b);t=t,e=e,n=dh(a);continue t}t=t,e=e,n=n.a.a;continue t}return h(ph,e,"elm-css-error-cannot-apply-"+t+"-with-empty-Style")}})),gh=l(Yc,0,"",0),bh=function(t){return l(_h,"justifyContent","justify-content",t(gh))},vh=Ko("padding-top"),mh=n((function(t,e){return l(Mc,h(Lc,t,e),x,"")})),yh=n((function(t,e){return h(mh,t,Ys(e))})),wh=yh("className"),Ah=wh("panel"),kh=$c("button"),Eh=de,xh=n((function(t,e){return l(Mc,h(Eh,t,e),x,"")})),Th=n((function(t,e){return h(xh,t,{$:3,a:e})})),Ch=Z,Sh=function(t){return t.toLowerCase()},Rh=n((function(t,e){return{$:1,a:t,b:e}})),Ih=n((function(t,e){if(e.b){if(e.b.b){var n=e.a,r=e.b;return h(gn,n,h(Ih,t,r))}var i=e.a;return S([h(Bh,t,i)])}return e})),Bh=n((function(t,e){switch(e.$){case 0:var n=e.a;return Jo(t(n));case 1:var r=e.a,i=e.b;return h(Rh,r,h(Ih,t,i));case 2:case 3:case 4:case 5:return e;default:var s=e.a;return dh(h(Ou,Bh(t),s))}})),Ph=Bh((function(t){return h(Ch," !important",Sh(t))?t:t+" !important"})),Oh={g:0,D:"inline-block"},Dh=function(t){return Rh({$:2,a:t})},Mh=$c("span"),Fh=function(t){return Ic(Rc(t))},Lh=r((function(t,e,n){return h(Mh,S([Nc(S([jc(Oh),h(Dh,"not(:last-child)",S([h(Yo,"margin-right","var(--cw)")]))])),h(Th,"click",wr({dm:e,dL:!0,d$:!0}))]),S([h(kh,h(gn,Nc(S([Ph(h(Yo,"margin-right","var(--cw)"))])),t),S([Fh(n)]))]))})),Nh=n((function(t,e){return h(xh,t,{$:0,a:e})})),jh=function(t){return h(Nh,"click",wr(t))},Uh=i((function(t,e,n,r){return t?h(kh,h(gn,jh(n),e),S([Fh(r)])):l(Lh,e,n,r)})),zh=Ko("space-between"),$h=n((function(t,e){var n=(t.b.$,t.b.a);return h(Hc,S([Ah,Nc(S([ih(rh(100)),h(Yo,"max-width","calc(80*var(--cw))")]))]),S([h(Hc,x,S([Fh(n)])),function(n){if(1===t.b.$){var r=t.b.b;return h(Hc,S([Nc(E(S([hh,bh(fh)]),n))]),S([f(Uh,e,S([Nc(S([h(Yo,"width","calc(8*var(--cw))")]))]),uh,r)]))}var i=t.b.b,s=i.a,a=i.b,o="calc("+Bn(4+h(hr,Rr(s),Rr(a)))+"*var(--cw))";return h(Hc,S([Nc(E(S([hh,bh(zh)]),n))]),S([f(Uh,e,S([Nc(S([h(Yo,"width",o)]))]),ch,a),f(Uh,e,S([Nc(S([h(Yo,"width",o)]))]),uh,s)]))}(S([vh(lh(2))]))]))})),Hh={r:0,aj:0,D:"hidden",aL:0},Wh=h(Yc,0,"%"),Gh=h(Aa,Ko("transform"),(function(t){return tu(t)?{D:"none"}:{D:h(Pn," ",h(qr,(function(t){return t.D}),t))}})),Vh=function(t){return Gh(S([t]))},qh=n((function(t,e){return{aM:t,aS:Cn,bI:e,a7:Cn}})),Xh=qh(89),Qh=function(t){switch(t){case 0:return"background";case 1:return"background-color";case 2:return"background-position";case 3:return"background-size";case 4:return"border";case 5:return"border-bottom";case 6:return"border-bottom-color";case 7:return"border-bottom-left-radius";case 8:return"border-bottom-right-radius";case 9:return"border-bottom-width";case 10:return"border-color";case 11:return"border-left";case 12:return"border-left-color";case 13:return"border-left-width";case 14:return"border-radius";case 15:return"border-right";case 16:return"border-right-color";case 17:return"border-right-width";case 18:return"border-top";case 19:return"border-top-color";case 20:return"border-top-left-radius";case 21:return"border-top-right-radius";case 22:return"border-top-width";case 23:return"border-width";case 24:return"bottom";case 25:return"box-shadow";case 26:return"caret-color";case 27:return"clip";case 28:return"clip-path";case 29:return"color";case 30:return"column-count";case 31:return"column-gap";case 32:return"column-rule";case 33:return"column-rule-color";case 34:return"column-rule-width";case 35:return"column-width";case 36:return"columns";case 37:return"filter";case 38:return"flex";case 39:return"flex-basis";case 40:return"flex-grow";case 41:return"flex-shrink";case 42:return"font";case 43:return"font-size";case 44:return"font-size-adjust";case 45:return"font-stretch";case 46:return"font-variation-settings";case 47:return"font-weight";case 48:return"grid-column-gap";case 49:return"grid-gap";case 50:return"grid-row-gap";case 51:return"height";case 52:return"left";case 53:return"letter-spacing";case 54:return"line-height";case 55:return"margin";case 56:return"margin-bottom";case 57:return"margin-left";case 58:return"margin-right";case 59:return"margin-top";case 60:return"mask";case 61:return"mask-position";case 62:return"mask-size";case 63:return"max-height";case 64:return"max-width";case 65:return"min-height";case 66:return"min-width";case 67:return"object-position";case 68:return"offset";case 69:return"offset-anchor";case 70:return"offset-distance";case 71:return"offset-path";case 72:return"offset-rotate";case 73:return"opacity";case 74:return"order";case 75:return"outline";case 76:return"outline-color";case 77:return"outline-offset";case 78:return"outline-width";case 79:return"padding";case 80:return"padding-bottom";case 81:return"padding-left";case 82:return"padding-right";case 83:return"padding-top";case 84:return"right";case 85:return"tab-size";case 86:return"text-indent";case 87:return"text-shadow";case 88:return"top";case 89:return"transform";case 90:return"transform-origin";case 91:return"vertical-align";case 92:return"visibility";case 93:return"width";case 94:return"word-spacing";default:return"z-index"}},Jh=function(t){return Jc(t)+"ms"},Yh=function(t){switch(t.$){case 0:return"ease";case 1:return"linear";case 2:return"ease-in";case 3:return"ease-out";case 4:return"ease-in-out";case 5:return"step-start";case 6:return"step-end";default:var e=t.a,n=t.b,r=t.c,i=t.d;return"cubic-bezier("+Jc(e)+" , "+Jc(n)+" , "+Jc(r)+" , "+Jc(i)+")"}},Kh=function(t){var e=l(Ir,0,-1,l(Mn,n((function(t,e){var n=t.aM,r=t.bI,i=t.aS,s=t.a7;return e+(h(Pn," ",S([Qh(n),Jh(r),h(Xs,"",h(Hs,Jh,i)),h(Xs,"",h(Hs,Yh,s))]))+",")})),"",t));return h(Yo,"transition",e)},Zh=function(t){var e=t.D;return{e:0,D:h(Zc,"translateY",S([e]))}},tl=Ko("visibility"),el=qh(92),nl={aj:0,z:0,D:"visible",aL:0},rl=n((function(t,e){var n=!t.a.$;return S([ah(n),h(Hc,S([Nc(E(S([Qc(Wc),eh(Kc(0)),qc(Kc(0)),ih(rh(100)),sh(Vc(150)),hh,bh(oh),Kh(S([Xh(300),el(300)]))]),S(n?[Vh(Zh(Wh(0))),tl(nl)]:[Vh(Zh(Wh(-100))),tl(Hh)])))]),S([h($h,t,e)]))])})),il=function(t){return"var(--"+function(){switch(t){case 0:return"black";case 1:return"blue";case 2:return"light-blue";case 3:return"green";case 4:return"light-green";case 5:return"cyan";case 6:return"light-cyan";case 9:return"magenta";case 10:return"light-magenta";case 7:return"red";case 8:return"light-red";case 11:return"dark-gray";case 12:return"light-gray";case 13:return"brown";case 14:return"yellow";default:return"white"}}()+")"},sl=function(t){return h(Yo,"background-color",il(t))},al=function(t){return h(Yo,"color",il(t))},ol=s((function(t,e,n,r,i){return{cS:n,bV:e,b1:t,a0:r,a5:i}})),ul=function(t){return h(Pn,"",t)},cl=n((function(t,e){for(;;){if(t<=0)return e;if(!e.b)return e;e.a;t=t-1,e=e.b}})),hl=W,ll=function(t){return t<0?-t:t},fl=V,dl=n((function(t,e){var n=h(Fa,(function(t){return"0"!==t&&"."!==t}),l(fl,gn,x,e));return E(t&&n?"-":"",e)})),pl=function(t){return t<0||1114111<t?"�":t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(Math.floor(t/1024)+55296,t%1024+56320))},_l=function(t){var e=t.a,n=t.b;if("9"===e){var r=Xn(n);if(1===r.$)return"01";var i=r.a;return h(Xu,"0",_l(i))}var s=zn(e);return s>=48&&s<57?h(Xu,pl(s+1),n):"0"},gl=function(t){return t===1/0||t===-1/0},bl=z,vl=function(t){return h(Xu,t,"")},ml=r((function(t,e,n){return t<=0?n:l(ml,t>>1,E(e,e),1&t?E(n,e):n)})),yl=n((function(t,e){return l(ml,t,e,"")})),wl=r((function(t,e,n){return E(n,h(yl,t-Rr(n),vl(e)))})),Al=function(t){for(var e=t.length,n=new Array(e),r=0;r<e;){var i=t.charCodeAt(r);55296<=i&&i<=56319?(n[e-r]=t[r+1],n[e-++r]=t[r-1],r++):(n[e-r]=t[r],r++)}return n.join("")},kl=function(t){var e=h(On,".",t);return e.b?e.b.b?w(e.a,e.b.a):w(e.a,"0"):w("0","0")},El=n((function(t,e){var n=e.a,r=e.b;return w(t(n),r)})),xl=r((function(t,e,n){if(gl(n)||bl(n))return Jc(n);var r=n<0,i=kl(function(t){var e=h(On,"e",Jc(ll(t)));if(e.b){if(e.b.b){var n=e.a,r=e.b.a,i=h(Xs,0,Mr(h(Ur,"+",r)?h(Br,1,r):r)),s=kl(n),a=E(s.a,s.b),o=i<0?h(Xs,"0",h(Hs,(function(t){return t.a+"."+t.b}),h(Hs,El(vl),Xn(E(h(yl,ll(i),"0"),a))))):l(wl,i+1,"0",a);return E(t<0?"-":"",o)}return E(t<0?"-":"",n=e.a)}return""}(ll(n))),s=i.a,a=i.b,o=Rr(s)+e,u=E(h(yl,1-o,"0"),l(wl,o,"0",E(s,a))),c=Rr(u),f=h(hr,1,o),d=h(t,r,l(Ir,f,c,u)),p=l(Ir,0,f,u),_=d?Al(h(Xs,"1",h(Hs,_l,Xn(Al(p))))):p,g=Rr(_),b="0"===_?_:e<=0?E(_,h(yl,ll(e),"0")):m(e,Rr(a))<0?l(Ir,0,g-e,_)+"."+l(Ir,g-e,g,_):E(s+".",l(wl,e,"0",a));return h(dl,r,b)})),Tl=xl(n((function(t,e){var n=Xn(e);if(1===n.$)return!1;if("5"===n.a.a)return""!==n.a.b||!t;var r=n.a.a;return function(e){return e>53&&t||e>=53&&!t}(zn(r))}))),Cl=n((function(t,e){return t<1?e:l(Ir,0,-t,e)})),Sl=n((function(t,e){return t<1?"":l(Ir,-t,Rr(e),e)})),Rl=n((function(t,e){var n,r=h(On,".",h(Tl,t.cS,e)),i=function(t){var e=function(t){return Rr(t)>3?h(gn,h(Sl,3,t),e(h(Cl,3,t))):S([t])};return qn(e(t))}(h(hl,Gn,h(Xs,"0",$s(r)))),s=h(Xs,"",$s(h(cl,1,r))),a=d(ol,e,i,s,"","");switch(h(Sn,(function(t){return"0"===t}),ul(h(ru,(n=a).bV,cc(n.cS))))?1:n.b1<0?2:0){case 2:return A(a,{a0:t.dt,a5:t.du});case 0:return A(a,{a0:t.dJ,a5:t.dK});default:return A(a,{a0:t.eg,a5:t.eh})}})),Il=n((function(t,e){return""===e?"":E(t.cR,e)})),Bl=function(t){return"0"!==h(Sl,1,t)?t:Bl(h(Cl,1,t))},Pl=r((function(t,e,n){return""===n||g(h(yl,t.cS,"0"),n)?"":e?h(Il,t,Bl(n)):E(t.cR,n)})),Ol=r((function(t,e,n){var r=function(){if(e.$)return Il(t);var n=e.a;return h(Pl,t,n)}(),i=h(Pn,t.d4,n.bV),s=r(n.cS);return ul(S([n.a0,i,s,n.a5]))})),Dl=n((function(t,e){return l(Ol,t,Cn,h(Rl,t,e))})),Ml=c((function(t,e,n,r,i,s,a,o,u){return{cR:n,cS:t,dt:r,du:i,dJ:s,dK:a,d4:e,eg:o,eh:u}})),Fl=function(t,e,n,r,i,s,a,o,u,c){return 9===t.a?t.f(e,n,r,i,s,a,o,u,c):t(e)(n)(r)(i)(s)(a)(o)(u)(c)}(Ml,2,",",".","−","","","","",""),Ll=function(t){var e=function(){var e=t.c0;switch(e.$){case 0:return"stopped";case 4:return"starting";case 1:return"paused";case 2:if(1===e.a.$){e.a;return"running"}var n=e.a.a;return"running: "+h(Dl,A(Fl,{cS:2}),n/1e6)+" MHz";default:return"error"}}();return E(function(){switch(t.aU){case 0:return"";case 1:return"Gamepads: 1▕ ";default:return"Gamepads: 2▕ "}}(),e)},Nl={$:6},jl={aC:0,D:"absolute"},Ul=$c("br"),zl=n((function(t,e){return{cB:0,A:0,D:E(Jc(e),t)}})),$l=zl("deg"),Hl=Ko("overflow"),Wl=function(t){return"calc("+Jc(t)+" * var(--cw))"},Gl=function(t){var e,n,r,i=t.dX?S([Vh((e=$l(-90),n=e.D,{e:0,D:h(Zc,"rotate",S([n]))}))]):x;return h(Hc,S([Nc(S([Qc(jl),eh(Kc(0)),qc(Kc(0)),sl(11),Gc(lh(2)),(r=4,h(Yo,"width",Wl(r))),Hl(Hh)])),jh(Nl)]),S([h(Hc,S([Nc(E(S([al(15),Kh(S([Xh(300)]))]),i))]),S([Fh("░░░░"),h(Ul,x,x),Fh("░░░░")]))]))},Vl=Ko("right"),ql=function(t){return h(Us,(function(e){return h(qa,h(_s,(function(t){return t.Q}),or(e)),t.aQ)}),t.dP)},Xl=n((function(t,e){return h(Fc,e,h(ju,t,x))})),Ql={bd:0,av:0,D:"row"},Jl=A(Ql,{D:"column"}),Yl=Ko("flex-direction"),Kl=$c("a"),Zl=A({bu:0,l:0,at:0,bw:0,Z:0,bx:0,_:0,F:0,r:0,aO:0,cM:0,a:0,g:0,ad:0,bd:0,av:0,aT:0,O:0,o:0,ae:0,d:0,I:0,aV:0,bW:0,bf:0,ax:0,ag:0,J:0,ah:0,ai:0,R:0,S:0,B:0,aW:0,c:0,b:0,bi:0,dC:0,K:0,a_:0,aj:0,z:0,a6:0,am:0,W:0,an:0,ao:0,X:0,v:0,ap:"",aJ:0,D:"initial",aL:0,N:0},{D:"inherit"}),tf=Ko("text-decoration"),ef=i((function(t,e,n,r){var i,s=g(e.cQ,n)?al(15):al(0),a=g(e.cQ,n)?sl(11):Dc(Zl);return h(Kl,S([(i=Qs(n),h(yh,"href",i)),Nc(E(S([h(Yo,"padding","0 var(--cw)"),Ph(s),Ph(a),Ph(tf(Xc)),jc(Oh)]),t))]),S([Fh(r)]))})),nf=Ko("padding-bottom"),rf=function(t){return l(_h,"textAlign","text-align",t(gh))},sf=function(t){var e,n,r=t.dX?S([tl(nl)]):S([Vh((e=Wh(-100),n=e.D,{e:0,D:h(Zc,"translateX",S([n]))})),tl(Hh)]),i=S([vh(lh(1)),nf(lh(1)),rf(oh)]);return h(Hc,S([Ah,Nc(E(S([Qc(Wc),qc(Kc(0)),eh(lh(2)),ih(rh(70)),sl(12),al(0),Kh(S([Xh(300),el(300)])),hh,Yl(Jl)]),r))]),S([f(ef,i,t,0,"ROMs"),f(ef,i,t,1,"Settings"),f(ef,i,t,2,"Emulation"),f(ef,i,t,3,"Help"),f(ef,i,t,4,"About")]))},af={cn:0,D:"ellipsis"},of=Ko("flex-shrink"),uf={av:0,aT:0,D:"nowrap",N:0},cf=r((function(t,e,n){return h(Yo,t,h(Pn," ",S([e.D,n.D])))})),hf=cf("padding"),lf=Ko("text-overflow"),ff=Ko("white-space"),df=i((function(t,e,n,r){var i=function(t){return h(Hc,S([Nc(S([jc(Oh),ff(uf),h(hf,lh(0),lh(1)),of(Vc(0))]))]),S([Fh(t)]))};return h(Hc,S([Nc(E(S([hh,bh(oh),Hl(Hh)]),r))]),S([i(t),h(Hc,S([Nc(S([jc(Oh),ff(uf),Hl(Hh),lf(af)]))]),S([Fh(n)])),i(e)]))})),pf=$c("nav"),_f=n((function(t,e){return 1===e?function(t){var e,n=h(Xs,"6502.ts / Stellerator",h(Hs,(function(t){return"Stellerator: "+t.az}),ql(t)));return S([h(Hc,S([Nc(S([ih(rh(100)),Gc(lh(2)),Qc(Wc),eh(Kc(0)),qc(Kc(0)),sh(Vc(20)),al(12),sl(0)]))]),S([f(df,"----====≡≡≡≡","≡≡≡≡====----",n,x),h(pf,S([Nc(S([sl(12),al(0)]))]),S([f(ef,x,t,0,"ROMs"),f(ef,x,t,1,"Settings"),f(ef,x,t,2,"Emulation"),f(ef,x,t,3,"Help"),f(ef,x,t,4,"About"),h(Mh,S([Nc(S([(e=Vl,l(_h,"float","float",e(gh))),h(Yo,"margin-right","var(--cw)")]))]),S([Fh(Ll(t))]))]))])),Pc(S([h(Xl,"body",S([vh(lh(2))]))]))])}(t):function(t){var e=h(Xs,"Stellerator",h(Hs,(function(t){return t.az}),ql(t)));return S([h(Hc,S([Nc(S([ih(rh(100)),Gc(lh(2)),Qc(Wc),eh(Kc(0)),qc(Kc(0)),sh(Vc(20)),al(12),sl(0)]))]),S([f(df,"--==≡≡","≡≡==--",e,S([h(Yo,"padding-left","calc(4 * var(--cw))")])),h(Hc,S([Nc(S([sl(12),al(0),rf(Vl)]))]),S([Fh(Ll(t))])),Gl(t),sf(t)])),Pc(S([h(Xl,"body",S([vh(lh(2))]))]))])}(t)})),gf=Bc,bf=yh("id"),vf=Ko("margin-bottom"),mf={bH:Cn,c8:Tn({cF:!1,d2:!1}),dQ:!0,dY:!1},yf=rn,wf=yf(mf),Af=function(t){var e=h(Xs,h(Hc,x,S([Fh("loading license...")])),h(Hs,(function(t){return gf(h(wf,x,t))}),t.di)),n=h(Xs,h(Hc,x,S([Fh("loading changelog...")])),h(Hs,(function(t){return gf(h(wf,x,t))}),t.cK));return h(Hc,S([Nc(S([h(Yo,"padding","0 var(--cw)"),vh(lh(1))]))]),S([h(Hc,S([bf("version"),Nc(S([rf(oh),al(5),vf(lh(1))]))]),S([Fh("Version "+t.aK)])),h(Hc,S([Nc(S([rf(oh),vf(lh(1))]))]),S([Fh("** CHANGELOG **")])),n,h(Hc,S([Nc(S([sl(5),Gc(lh(.5)),vf(lh(1.5))]))]),x),h(Hc,S([Nc(S([rf(oh),vf(lh(1))]))]),S([Fh("** LICENSE **")])),e]))},kf={$:19},Ef=Dh("active"),xf=Ko("bottom"),Tf=h(kh,S([Nc(S([rf(oh),Qc(Wc),Vl(lh(0)),xf(lh(0)),h(hf,lh(1),lh(.75)),Ph(sl(2)),al(12),sh(Vc(10)),Ef(S([Ph(sl(1))]))])),jh(kf)]),S([Fh("─┼─")])),Cf={a9:0,aO:0,D:"border-box"},Sf=Ko("box-sizing"),Rf=function(t){return{$:18,a:t}},If=function(t){return{$:27,a:t}},Bf=r((function(t,e,n){var r=h(qr,Fn,S([t.aQ,$a(t)]));t:for(;;){if(r.b&&r.b.b&&!r.b.b.b){if(r.a){if(r.b.a)break t;r.b;return e("no ROMS match the search")}r.b;return e('start by clicking "Add new" to add a ROM image')}break t}return n})),Pf=Ko("cursor"),Of=n((function(t,e){return h(Xs,!1,h(Hs,or(t.Q),e))})),Df=i((function(t,e,n,r){return h(Of,t,e)?n:r})),Mf=fe,Ff=n((function(t,e){var n=t.b,r=t.c;return tu(n)?e:l(as,r,n,e)})),Lf=function(t){return t.a},Nf=function(t){return ce(ge(t))},jf=n((function(t,e){return h(ue,t,ge(e))})),Uf=function(t){return ae(ge(t))},zf=n((function(t,e){var n=t.a,r=t.b,i=e.a,s=e.b;switch(r.$){case 4:var a=r.a;return w(h(gn,w(n,a),i),s);case 0:var o=r.a,u=r.b,c=r.c,d=l(Mn,Ff,s,u),p=l(Mn,$f,w(x,d),c),_=p.a,g=p.b;a=l(Cc,o,h(qr,Lf,u),qn(_));return w(h(gn,w(n,a),i),g);case 1:var b=r.a,v=(o=r.b,u=r.c,c=r.d,d=l(Mn,Ff,s,u),l(Mn,$f,w(x,d),c));_=v.a,g=v.b,a=f(Uf,b,o,h(qr,Lf,u),qn(_));return w(h(gn,w(n,a),i),g);case 2:o=r.a,u=r.b,c=r.c,d=l(Mn,Ff,s,u);var m=l(Mn,zf,w(x,d),c);_=m.a,g=m.b,a=l(Nf,o,h(qr,Lf,u),qn(_));return w(h(gn,w(n,a),i),g);default:b=r.a,o=r.b,u=r.c,c=r.d,d=l(Mn,Ff,s,u);var y=l(Mn,zf,w(x,d),c);_=y.a,g=y.b,a=f(jf,b,o,h(qr,Lf,u),qn(_));return w(h(gn,w(n,a),i),g)}})),$f=n((function(t,e){var n=e.a,r=e.b;switch(t.$){case 4:var i=t.a;return w(h(gn,i,n),r);case 0:var s=t.a,a=t.b,o=t.c,u=l(Mn,Ff,r,a),c=l(Mn,$f,w(x,u),o),d=c.a,p=c.b;i=l(Cc,s,h(qr,Lf,a),qn(d));return w(h(gn,i,n),p);case 1:var _=t.a,g=(s=t.b,a=t.c,o=t.d,u=l(Mn,Ff,r,a),l(Mn,$f,w(x,u),o));d=g.a,p=g.b,i=f(Uf,_,s,h(qr,Lf,a),qn(d));return w(h(gn,i,n),p);case 2:s=t.a,a=t.b,o=t.c,u=l(Mn,Ff,r,a);var b=l(Mn,zf,w(x,u),o);d=b.a,p=b.b,i=l(Nf,s,h(qr,Lf,a),qn(d));return w(h(gn,i,n),p);default:_=t.a,s=t.b,a=t.c,o=t.d,u=l(Mn,Ff,r,a);var v=l(Mn,zf,w(x,u),o);d=v.a,p=v.b,i=f(jf,_,s,h(qr,Lf,a),qn(d));return w(h(gn,i,n),p)}})),Hf=n((function(t,e){return d(rs,1,t,e,Yi,Yi)})),Wf=n((function(t,e){for(;;){if(!e.b)return t;var n=e.a,r=n.b,i=n.c,s=e.b;if(Or(i))t=t,e=s;else t=Tn(w(i,r)),e=s}})),Gf=function(t){var e=h(Wf,Cn,t);if(1===e.$)return Ki;var n=e.a,r=n.a,i=n.b;return h(Hf,r,i)},Vf=function(t){var e,n=t.a,r=t.b;return h(Fc,r,Uu(S([(e=n,{$:0,a:e})])))},qf=function(t){return l(Cc,"style",x,cc(Rc(Tc(cc(Sc(h(qr,Vf,vn(t))))))))},Xf=r((function(t,e,n){var r=h(qr,Lf,e),i=Gf(e),s=l(Mn,$f,w(x,i),n),a=s.a,o=s.b,u=qf(o);return l(Cc,t,r,h(gn,u,qn(a)))})),Qf=n((function(t,e){for(;;){if(!e.b)return!1;var n=e.a.a,r=e.b;if(g(t,n))return!0;t=t,e=r}})),Jf=n((function(t,e){t:for(;;){if(e.b){var n=e.a.a,r=e.b,i="_"+n;if(h(Qf,i,r)){t=i,e=r;continue t}return i}return t}})),Yf=n((function(t,e){return w(h(Jf,"_",e),qf(t))})),Kf=r((function(t,e,n){var r=h(qr,Lf,e),i=Gf(e),s=l(Mn,zf,w(x,i),n),a=s.a,o=s.b,u=h(Yf,o,a);return l(Nf,t,r,h(gn,u,qn(a)))})),Zf=i((function(t,e,n,r){var i=h(qr,Lf,n),s=Gf(n),a=l(Mn,zf,w(x,s),r),o=a.a,u=a.b,c=h(Yf,u,o);return f(jf,t,e,i,h(gn,c,qn(o)))})),td=i((function(t,e,n,r){var i=h(qr,Lf,n),s=Gf(n),a=l(Mn,$f,w(x,s),r),o=a.a,u=a.b,c=qf(u);return f(Uf,t,e,i,h(gn,c,qn(o)))})),ed=function(t){switch(t.$){case 4:return t.a;case 0:var e=t.a,n=t.b,r=t.c;return l(Xf,e,n,r);case 1:var i=t.a;e=t.b,n=t.c,r=t.d;return f(td,i,e,n,r);case 2:e=t.a,n=t.b,r=t.c;return l(Kf,e,n,r);default:i=t.a,e=t.b,n=t.c,r=t.d;return f(Zf,i,e,n,r)}},nd=r((function(t,e,n){return ed(h(t,e,n))})),rd=r((function(t,e,n){return Ic(f(Mf,nd,t,e,n))})),id=Ko("margin-top"),sd=Ko("min-height"),ad=r((function(t,e,n){return{$:2,a:t,b:e,c:n}})),od=function(t){return Dh("nth-child("+t+")")},ud={a:0,D:"pointer"},cd=yh("type"),hd=function(t){var e=function(t){return h(Hc,S([bf(t.Q),Nc(S([Sf(Cf),h(Yo,"padding","2.25em calc(2 * var(--cw))"),sd(lh(5)),rf(oh),h(od,"odd",S([sl(12)])),h(od,"even",S([sl(5)])),al(0),Pf(ud),h(Yo,"word-break","break-word")])),jh(Ia(t.Q))]),S([Fh(t.az)]))},r=function(e){var r=n((function(t,e){return l(Lh,S([cd("button"),Nc(S([h(Yo,"width","calc(8 * var(--cw))")]))]),t,e)}));return h(Hc,S([bf(e.Q),Ah,Nc(S([Sf(Cf),sd(lh(4)),rf(oh),sl(11),al(15),Pf(ud),h(Yo,"word-break","break-word")]))]),S([Fh(e.az),h(Hc,S([Nc(S([hh,rf(qc),id(lh(1)),vf(lh(-.5)),bh(zh)]))]),S([h(r,Rf(1),"Edit"),h(r,h(Xs,hi,h(Hs,If,lo(t))),"Run")]))]))},i=S([l(rd,n((function(n,i){return l(ad,"div",S([Nc(S([Sf(Cf),ih(rh(100)),id(lh(3.5))]))]),h(qr,(function(n){return w(n.Q,d(Df,i=n,t.cP,r,e,i));var i}),h(Xa,h(_s,(function(t){return t.az}),ja),h(za,n,i))))})),t.cG,t.aQ)]);return l(Bf,t,(function(t){return S([h(Hc,S([Nc(S([ih(rh(100)),id(lh(3.5)),h(Yo,"padding","3em calc(2 * var(--cw)) 0 calc(2 * var(--cw))"),rf(oh),Sf(Cf)]))]),S([Fh(t)]))])}),i)},ld={$:38},fd=function(t){return{$:7,a:t}},dd={$:8},pd=n((function(t,e){return h(mh,t,fo(e))})),_d=pd("disabled"),gd=Ko("flex-grow"),bd=$c("label"),vd=function(t){return h(Yo,"margin-right",Wl(t))},md=n((function(t,e){return h(xh,t,{$:2,a:e})})),yd=n((function(t,e){return l(Vr,Ci,e,t)})),wd=h(yd,S(["target","value"]),mi),Ad=function(t){return h(md,"change",h(mr,h(_s,t,(function(t){return w(t,!0)})),wd))},kd=function(t){return h(md,"input",h(mr,h(_s,t,(function(t){return w(t,!0)})),wd))},Ed=yh("placeholder"),xd=$c("input"),Td=le,Cd=n((function(t,e){return ed(t(e))})),Sd=n((function(t,e){return Ic(l(Td,Cd,t,e))})),Rd=yh("value"),Id=function(t){return Sd((function(e){return h(xd,h(gn,cd("text"),h(gn,Rd(e),t)),x)}))},Bd=n((function(t,e){return h(bd,S([Nc(E(S([hh]),t)),Ah]),S([h(Id,S([cd("text"),Nc(S([gd(Vc(1)),vd(1)])),Ed("Filter ROMs..."),kd(fd),Ad((function(t){return ld}))]),e.cG),l(Lh,S([cd("button"),_d(""===e.cG),Nc(S([vf(lh(.5))]))]),dd,"Clear")]))})),Pd=function(t){return{$:15,a:t}},Od=function(t){return l(_h,"alignItems","align-items",t(gh))},Dd=n((function(t,e){return{$:2,a:t,b:e}})),Md=Dd(2),Fd=Ko("flex-start"),Ld=$c("form"),Nd=Xo("label"),jd=function(t){return w(t,!0)},Ud=function(t){return h(md,"submit",h(mr,jd,wr(t)))},zd=n((function(t,e){return h(_e,function(t){return/^(on|formAction$)/i.test(t)?"data-"+t:t}(t),be(e))})),$d=n((function(t,e){return l(Mc,h(zd,t,e),x,"")})),Hd=$d,Wd=function(t){return h(Hd,"data-label",t)},Gd=n((function(t,e){return{$:17,a:t,b:e}})),Vd=function(t){return{$:7,a:t}},qd=function(t){return{$:6,a:t}},Xd=function(t){return{$:3,a:t}},Qd=function(t){return{$:5,a:t}},Jd=function(t){return{$:0,a:t}},Yd=function(t){return{$:9,a:t}},Kd=function(t){return{$:4,a:t}},Zd=function(t){return{$:2,a:t}},tp=function(t){return{$:1,a:t}},ep=function(t){return{$:8,a:t}},np={g:0,D:"block"},rp=pd("checked"),ip=h(yd,S(["target","checked"]),gi),sp=function(t){return h(md,"change",h(mr,h(_s,t,(function(t){return w(t,!0)})),ip))},ap=n((function(t,e){return h(xd,S([cd("checkbox"),sp(t),rp(e)]),x)})),op=yh("htmlFor"),up=Ko("max-width"),cp=$c("option"),hp=$c("select"),lp=pd("selected"),fp=i((function(t,e,n,r){var i;return h(Mh,S([wh("select-wrapper"),Nc(t)]),S([h(hp,E(S([Rd(r),(i=!1,h(yh,"autocomplete",i?"on":"off"))]),e),h(qr,(function(t){var e=t.a,n=t.b;return h(cp,S([Rd(e),lp(g(e,r))]),S([Fh(n)]))}),n))]))})),dp=r((function(t,e,n){return f(fp,S([up(Wh(100))]),S([Nc(S([up(Wh(100))])),Ad(e)]),t,n)})),pp=i((function(t,e,n,r){return h(Mh,t,h(qr,(function(t){return h(bd,S([Nc(S([Pf(ud),ff(uf),h(Dh,"not(:first-of-type)",S([h(Yo,"margin-left","calc(2 * var(--cw))")]))]))]),S([Fh(t.b),h(xd,S([cd("radio"),Nc(S([h(Yo,"margin-left","var(--cw)")])),rp(g(r,t.a)),l(Aa,h(Aa,md("change"),mr((function(t){return w(t,!0)}))),bi((function(e){return e?wr(n(t.a)):vi("")})),ip)]),x)]))}),e))})),_p={g:0,D:"inline-flex"},gp=yh("max"),bp=yh("min"),vp=function(t){return h($d,"tabIndex",Bn(t))},mp=s((function(t,e,n,r,i){var s=e.a,a=e.b,o=function(t){return m(t,s)>-1&&m(t,a)<1?Tn(t):Cn},u=h(Nh,"keydown",h(bi,(function(t){switch(t){case"ArrowLeft":return wr(n(o(i-1)));case"ArrowRight":return wr(n(o(i+1)));default:return vi("")}}),h(Ci,"key",mi)));return h(Mh,S([Nc(E(t,S([jc(_p)]))),vp(0),u]),S([h(xd,S([Nc(S([gd(Vc(1))])),cd("range"),bp(Bn(s)),gp(Bn(a)),Rd(Bn(i)),kd(h(_s,Mr,h(_s,Us(o),n)))]),x),h(Mh,S([Nc(S([jc(np),h(Yo,"padding-left","calc(2 * var(--cw))"),h(Yo,"min-width","calc(4 * var(--cw))"),gd(Vc(0)),of(Vc(0))]))]),S([Fh(r(i))]))]))})),yp=n((function(t,e){var r,i,s,a=n((function(t,e){return h(bd,S([Nc(S([jc(np),ih(Wh(100))]))]),S([Fh(t),h(Ul,x,x),e]))})),o=(r=t.dl,i=r.$||r.a?"calc(40 * var(--cw))":(r.a,"calc(100vw - 10 * var(--cw))"),mp(S([h(Yo,"width",i)]))),u=n((function(t,e){return h(bd,S([op("nothing")]),S([h(Mh,S([Nc(S([jc(Oh),h(Yo,"width","calc(20 * var(--cw))")]))]),S([Fh(t)])),e]))})),c=n((function(t,e){return h(bd,S([Nc(S([Pf(ud)]))]),S([h(Mh,S([Nc(S([jc(Oh),h(Yo,"width","calc(20 * var(--cw))")]))]),S([Fh(t)])),e]))})),d=function(t){return h(_s,t,Gd(e.Q))},p=n((function(t,e){return h(Id,S([cd("text"),Ed("Auto"),Nc(S([h(Yo,"width","calc(10 * var(--cw))")])),kd((function(e){return""===e?h(d,t,Cn):h(Xs,hi,h(Hs,h(Aa,d(t),Tn),Mr(e)))}))]),l(Aa,Xs(""),Hs(Bn),e))}));return E(S([h(a,"ROM name:",h(Id,S([cd("text"),Nc(S([ih(Wh(100))])),kd(d(Jd))]),e.az)),h(a,"ROM type:",l(dp,h(qr,(function(t){return w(t.dg,t.cW)}),t.aP),d(tp),e.bD)),h(u,"TV mode:",f(pp,x,S([w(0,"PAL"),w(1,"NTSC"),w(2,"SECAM")]),d(Zd),e.cr)),h(c,"Emulate paddles:",h(ap,d(Xd),e.bJ)),h(u,"RNG seed:",h(p,Kd,e.ce)),h(u,"First visible line:",h(p,Qd,e.bN)),h(u,"CPU emulation:",f(pp,x,S([w(Cn,"Default"),w(Tn(1),"Instruction"),w(Tn(0),"Cycle")]),d(qd),e.cO)),h(u,"Audio emulation:",f(pp,x,S([w(Cn,"Default"),w(Tn(1),"PCM"),w(Tn(0),"Waveform")]),d(Vd),e.cD)),h(u,"Volume:",f(o,w(0,100),h(_s,Hs(d(ep)),Xs(hi)),(function(t){return Bn(t)+"%"}),e.ee)),h(c,"Default phosphor:",h(ap,d(h(_s,(function(e){return e?Cn:Tn(t.aE.dH)}),Yd)),h(Xs,!0,h(Hs,(function(t){return!1}),e.dH))))]),E(function(){var t=e.dH;if(t.$)return x;var n=t.a;return S([h(u,"Phosphor level:",f(o,w(0,100),h(_s,Hs(d(h(_s,Tn,Yd))),Xs(hi)),(function(t){return Bn(t)+"%"}),n))])}(),S([h(Hc,x,S([h(kh,S([cd("button"),jh((s=e.Q,{$:21,a:s})),Nc(S([id(lh(1)),h(hf,Kc(0),lh(1))]))]),S([Fh("Save ROM image")]))]))])))})),wp=n((function(t,e){var r,i=n((function(t,e){return l(Lh,S([cd("button"),Nc(S([h(Yo,"width","calc(10 * var(--cw))")]))]),t,e)}));return S([h(Ld,S([Nc(S([nf(lh(.5)),hh,bh(zh),Qc(Wc),eh(lh(2)),qc(Kc(0)),sh(Vc(10)),ih(rh(100)),Sf(Cf)])),Ud(hi),Ah]),S([h(i,Rf(0),"Back"),h(i,Pd(e.Q),"Delete")])),(r=h(yp,t,e),h(Ld,S([Ah,Wd("Settings:"),Ud(hi),Nc(S([hh,Yl(Jl),Od(Fd),Md(S([Nd(S([h(Dh,"not(:first-of-type)",S([vh(lh(1))]))]))])),id(lh(4)),vh(lh(2))]))]),r))])})),Ap=function(t){var e=w(t.cH,h(Us,(function(e){return h(qa,h(Aa,or(e),(function(t){return t.Q})),t.aQ)}),t.cP));if(1!==e.a||e.b.$)return function(t){return h(gn,h(Bd,S([ih(rh(100)),Qc(Wc),eh(lh(2)),qc(Kc(0)),Sf(Cf),sh(Vc(10))]),t),h(gn,Tf,h(gn,Pc(S([h(Xl,"body",S([nf(lh(5))]))])),hd(t))))}(t);var n=e.b.a;return h(wp,t,n)},kp=Ko("border-style"),Ep=function(t){return t?"-":"+"},xp=r((function(t,e,n){var r=function(t){return h(Ur,"calc(",t.D)?h(Br,4,t.D):t.D},i=h(Pn," ",S([r(t),Ep(e),r(n)]));return{bC:0,ad:0,o:0,ax:0,ag:0,J:0,ah:0,ai:0,R:0,S:0,B:0,an:0,D:h(Zc,"calc",S([i]))}})),Tp=Ko("overflow-y"),Cp={at:0,bz:0,bU:0,aj:0,dU:0,D:"scroll"},Sp=Ko("stretch"),Rp=function(t){var e=l(rd,n((function(e,n){return h(Hc,S([Ah,Nc(S([hh,gd(Vc(1)),Od(Sp),Tp(Hh)]))]),S([l(ad,"div",S([Nc(S([gd(Vc(1)),Tp(Cp),h(Yo,"-webkit-overflow-scrolling","touch")]))]),h(qr,(function(e){return w(e.Q,(i=h(Df,n=e,t.cP),h(Hc,S([bf(n.Q),Nc(S([h(od,"odd",S([sl(h(i,11,5))])),h(od,"even",S([sl(h(i,11,12))])),h(i,al(15),al(0)),h(Yo,"padding-left","var(--cw)"),Pf(ud),h(Yo,"word-break","break-word")])),jh(Ia(n.Q)),(r=If(n.Q),h(Nh,"dblclick",wr(r)))]),S([Fh(" * "+n.az)]))));var n,r,i}),h(Xa,h(_s,(function(t){return t.az}),ja),h(za,e,n))))]))})),t.cG,t.aQ);return l(Bf,t,(function(t){return h(Hc,S([Ah,Nc(S([gd(Vc(1)),hh,Yl(Jl),rf(oh),bh(oh)]))]),S([Fh(t)]))}),e)},Ip=r((function(t,e,n){return lo(t).$?n:e})),Bp=function(t){var e=h(Hc,S([Nc(S([hh]))]),S([h(Id,S([cd("text"),Nc(S([gd(Vc(1)),vd(1)])),Ed("Filter ROMs..."),kd(fd)]),t.cG),h(kh,S([cd("button"),_d(""===t.cG),jh(dd)]),S([Fh("Clear")]))])),r=n((function(t,e){return h(kh,E(S([cd("button"),Nc(S([h(Yo,"width","calc(10 * var(--cw))")]))]),t),e)}));return h(Ld,S([Ah,Ud(hi)]),S([e,h(Hc,x,S([h(r,S([jh(kf)]),S([Fh("Add new")])),h(r,S([_d(l(Ip,t,!1,!0)),jh(h(Xs,hi,h(Hs,Pd,t.cP)))]),S([Fh("Delete")])),h(r,S([_d(l(Ip,t,!1,!0)),jh(h(Xs,hi,h(Hs,If,lo(t))))]),S([Fh("Run")]))]))]))},Pp=Ko("flex-basis"),Op={$:12},Dp={$:13},Mp=function(t){return{$:10,a:t}},Fp=function(t){return{$:11,a:t}},Lp=n((function(t,e){t:for(;;){if(e.a){if("d"===e.b)return h(Xs,hi,h(Hs,Pd,lo(t)));break t}switch(e.b){case"ArrowUp":return h(Xs,Dp,h(Hs,Fp,t.cP));case"ArrowDown":return h(Xs,Op,h(Hs,Mp,t.cP));case"Enter":return h(Xs,hi,h(Hs,If,lo(t)));default:break t}}return hi})),Np=n((function(t,e){return w(t,e)})),jp=Ko("outline-style"),Up=Ko("overflow-x"),zp=n((function(t,e){return h(Hc,S([Ah,Wd("Settings:"),Nc(E(S([hh,Up(Hh)]),E(l(Ip,t,S([Od(Sp)]),S([Od(oh),bh(oh)])),e)))]),S([h(Xs,Fh("no ROMs selected"),h(Hs,h(Aa,(function(t){return h(Ld,S([Nc(S([hh,Yl(Jl),Od(Fd),vh(lh(1)),Tp(Cp),h(Yo,"-webkit-overflow-scrolling","touch"),gd(Vc(1)),Md(S([Nd(S([h(Dh,"not(:first-of-type)",S([vh(lh(1))]))]))]))])),Ud(hi)]),t)}),yp(t)),h(Us,(function(e){return h(qa,(function(t){return g(e,t.Q)}),$a(t))}),t.cP)))]))})),$p=n((function(t,e){return 1===e?function(t){return S([h(Hc,S([Nc(S([Gc(l(xp,nh(100),1,lh(2))),hh,Od(Sp),vh(lh(1)),Sf(Cf),Ph(kp(Xc)),Ph(jp(Xc))])),vp(0),(e=Lp(t),h(md,"keydown",h(mr,(function(t){return 41===t.$?w(t,!1):w(t,!0)}),h(mr,e,l(yr,Np,h(Ci,"ctrlKey",gi),h(Ci,"key",mi))))))]),S([h(Hc,S([Nc(S([Sf(Cf),gd(Vc(1)),Pp(Kc(0)),hh,Yl(Jl)]))]),S([Bp(t),Rp(t)])),h(zp,t,S([Sf(Cf),gd(Vc(1)),Pp(Kc(0))]))]))]);var e}(t):Ap(t)})),Hp=function(t){return{$:0,a:t}},Wp=function(t){return{$:37,a:t}},Gp=function(t){return{$:35,a:t}},Vp=function(t){return{$:36,a:t}},qp=function(t){return{$:32,a:t}},Xp={$:30},Qp=function(t){var e=n((function(t,e){return h(bd,S([op("nothing"),Nc(S([jc(np)]))]),S([h(Mh,S([Nc(S([jc(Oh),h(Yo,"width","calc(20 * var(--cw))")]))]),S([Fh(t)])),e]))})),r=function(){switch(t.c0.$){case 1:case 2:return!0;default:return!1}}(),i=n((function(t,e){return h(bd,S([Nc(S([Pf(ud)]))]),S([h(Mh,S([Nc(S([jc(Oh),h(Yo,"width","calc(20 * var(--cw))")]))]),S([Fh(t)])),e]))}));return S([h(e,"Difficulty left:",f(pp,x,S([w(0,"A/Pro:"),w(1,"B/Amateur:")]),Gp,t.cN.cX)),h(e,"Difficulty right:",f(pp,x,S([w(0,"A/Pro:"),w(1,"B/Amateur:")]),Vp,t.cN.cY)),h(e,"TV mode:",f(pp,x,S([w(0,"Color:"),w(1,"BW:")]),Wp,t.cN.cM)),h(i,"Limit framerate:",h(ap,qp,t.dj)),h(Ul,x,x),h(Ul,x,x),h(kh,S([jh(Ba),_d(!r),Nc(S([h(Yo,"min-width","calc(15 * var(--cw))")]))]),S([Fh(t.c$?"Resume":"Pause")])),h(kh,S([jh(Xp),_d(!r),Nc(S([h(Yo,"min-width","calc(15 * var(--cw))")]))]),S([Fh("Hard Reset")]))])},Jp=yh("alt"),Yp=$c("h1"),Kp=$c("img"),Zp=$c("li"),t_=$c("p"),e_=function(t){return h(yh,"src",t)},n_=function(t){return h(Xs,t.a8,t.aE.d7)},r_=$c("ul"),i_=function(t){var e=t.aE.dh?"doc/images/2600_touch_lh.jpg":"doc/images/2600_touch.jpg",n=t.aE.dh?"doc/images/2600_touch_alt_lh.jpg":"doc/images/2600_touch_alt.jpg",r=S([h(Yp,x,S([Fh("Touch controls")])),h(t_,x,S([h(Kp,S([e_(e),Jp("touch controls"),Nc(S([jc(np),ih(Wh(100)),up(lh(20))]))]),x),h(Kp,S([e_(n),Jp("touch controls, alt mode"),Nc(S([jc(np),id(lh(1)),ih(Wh(100)),up(lh(20))]))]),x)]))]),i=function(t){return h(Zp,x,S([Fh(t)]))},s=S([h(Yp,x,S([Fh("Keyboard controls")])),h(t_,x,S([h(r_,x,S([i("LEFT JOYSTICK: wasd / arrows + v / space"),i("RIGHT JOYSTICK: ijkl + b"),i("RESET: shift-enter"),i("SELECT: shift-space"),i("TOGGLE FULLSCREEN: enter"),i("HARD RESET: shift-r"),i("PAUSE: p")]))]))]),a=function(){switch(t.aU){case 0:return x;case 1:return S([h(Yp,x,S([Fh("Gamepad controls")])),h(t_,x,S([h(r_,x,S([i("Gamepad 1: left joystick")]))]))]);default:return S([h(Yp,x,S([Fh("Gamepad controls")])),h(t_,x,S([h(r_,x,S([i("Gamepad 1: left joystick"),i("Gamepad 2: right joystick")]))]))])}}();return n_(t)?E(r,E(a,s)):E(s,a)},s_=$c("canvas"),a_=Ko("touch-action"),o_=function(t){var e=function(){var e=w(t.c0,t.dW);t:for(;;)switch(e.a.$){case 2:return tl(nl);case 1:if(e.b)break t;return tl(nl);default:break t}return tl(Hh)}();return h(s_,S([bf("stellerator-canvas"),Nc(S([ih(Wh(100)),Gc(Wh(100)),Qc(jl),qc(Kc(0)),eh(Kc(0)),sh(Vc(10)),e,a_(Xc)]))]),x)},u_=Ko("max-height"),c_=n((function(t,e){var n=e.D;return{bM:t,D:Tn(n)}})),h_=function(t){var e=function(){var e=w(t.c0,t.dW);t:for(;;)switch(e.a.$){case 2:return tl(Hh);case 1:if(e.b)break t;return tl(Hh);default:break t}return tl(nl)}(),n=n_(t)?S([Fh("emulation paused"),h(Ul,x,x),Fh("tap to resume")]):S([Fh("emulation paused")]),r=function(){var e=t.c0;switch(e.$){case 0:return S([Fh("emulation stopped")]);case 4:return S([Fh("emulation starting")]);case 1:return n;case 3:var r=e.a;return S([Fh("ERROR: "+r)]);default:return x}}(),i=3===t.c0.$?sl(7):sl(3);return h(Hc,S([Nc(S([Gc(Wh(100)),ih(Wh(100)),hh,bh(oh),Od(oh),rf(oh),Qc(jl),qc(Kc(0)),eh(Kc(0)),sh(Vc(10)),al(15),e,i])),jh(g(t.c0,fa)&&n_(t)?Ba:hi)]),r)},l_={aC:0,D:"relative"},f_=n((function(t,e){return{$:4,a:t,b:e}})),d_=Dd(3),p_=i((function(t,e,n,r){return{dd:e,dk:t,dC:n,d0:r}})),__=h(ln,{cI:!1,dr:!1},"(\\[.*?\\])\\((?!/|https?://)(.*?)\\)"),g_=fn(1/0),b_=n((function(t,e){var n=function(e){var n=e.d0;if(!n.b||n.a.$||!n.b.b||n.b.a.$||n.b.b.b)return"";var r=n.a.a,i=n.b.a.a;return r+"("+t+i+")"},r=h(Hs,(function(t){return l(g_,t,n,e)}),__);return h(Xs,e,r)})),v_=function(t){var e=t.c9;if(e.$)return Fh("loading...");var n=e.a;return h(Hc,S([Nc(S([h(Yo,"padding","0 var(--cw)"),vh(lh(1)),d_(S([h(Xl,"img",S([ih(lh(25)),h(Yo,"max-width","calc(100vw - 2*var(--cw))")]))]))]))]),S([gf(h(wf,x,h(b_,"doc/",n)))]))},m_=function(t){return{$:22,a:t}},y_=function(t){return{$:2,a:t}},w_=function(t){return{$:0,a:t}},A_=function(t){return{$:3,a:t}},k_=function(t){return{$:9,a:t}},E_=function(t){return{$:6,a:t}},x_={$:13},T_=function(t){return{$:5,a:t}},C_=function(t){return{$:7,a:t}},S_=function(t){return{$:8,a:t}},R_=function(t){return{$:4,a:t}},I_=function(t){return{$:11,a:t}},B_=function(t){return{$:12,a:t}},P_=function(t){return{$:10,a:t}},O_=function(t){return{$:1,a:t}},D_={$:16},M_=r((function(t,e,n){return{$:23,a:t,b:e,c:n}})),F_=j,L_=r((function(t,e,i){var s,a=mp(S([h(Yo,"width","calc(40*var(--cw))"),h(Yo,"max-width","calc(100vw - 4*var(--cw))")])),o=t.aE,u=function(t){return h(Yp,S([Nc(S([al(5)]))]),S([Fh(t)]))},c=n((function(t,e){return h(bd,S([op("nothing"),Nc(S([jc(np)]))]),S([h(Mh,S([Nc(S([jc(Oh),h(Yo,"width","calc(20 * var(--cw))")]))]),S([Fh(t)])),e]))})),d=r((function(t,e,n){return h(bd,S([Nc(S([Pf(ud),jc(np)]))]),S([h(Mh,S([Nc(S([jc(Oh),h(Yo,"width","calc(20 * var(--cw))")]))]),S([Fh(t)])),h(ap,e,n)]))}));return S([u("General"),h(t_,x,S([h(c,"CPU emulation:",f(pp,x,S([w(1,"Instruction"),w(0,"Cycle")]),h(Aa,m_,w_),o.cO))])),u("Audio"),h(t_,x,S([h(c,"Audio emulation:",f(pp,x,S([w(1,"PCM"),w(0,"Waveform")]),h(Aa,m_,y_),o.cD)),h(c,"Volume:",f(a,w(0,100),h(_s,Hs(h(Aa,m_,O_)),Xs(hi)),(function(t){return Bn(t)+"%"}),o.ee))])),u("Display"),h(t_,x,E(S([h(c,"Gamma correction:",f(a,w(0,50),h(_s,Hs(h(Aa,h(Aa,h(Aa,m_,A_),(function(t){return t/10})),nr)),Xs(hi)),(function(t){return Jc(t/10)}),F_(10*o.c7))),h(c,"TV Emulation:",f(pp,x,S([w(0,"Composite"),w(1,"S-Video"),w(2,"None")]),h(Aa,m_,R_),o.d8))]),E(t.aN&&2!==o.d8?S([h(Hc,S([Nc(S([al(7),h(Yo,"width","calc(60*var(--cw))"),h(Yo,"max-width","calc(100vw - 4*var(--cw))")]))]),S([Fh("WARNING: Your GPU lacks required features. TV emulation will work, but colors will be slightly wrong.")]))]):x,S([h(c,"Scaling:",f(pp,x,S([w(0,"QIS"),w(1,"Bilinear"),w(2,"Plain")]),h(Aa,m_,T_),o.dR)),h(c,"Phosphor level:",f(a,w(0,100),h(_s,Hs(h(_s,E_,m_)),Xs(hi)),(function(t){return Bn(t)+"%"}),o.dH)),h(c,"Scanline intensity:",f(a,w(0,100),h(_s,Hs(h(_s,C_,m_)),Xs(hi)),(function(t){return Bn(t)+"%"}),o.dS))])))),u("Controls"),h(t_,x,S([h(c,"Touch controls:",f(pp,x,S([w(Cn,"Auto"),w(Tn(!0),"On"),w(Tn(!1),"Off")]),h(Aa,m_,S_),o.d7)),l(d,"Left handed mode:",h(Aa,m_,k_),o.dh),h(c,"Touch joystick sensitivity:",f(a,w(0,100),h(_s,Hs(h(Aa,m_,P_)),Xs(hi)),Bn,o.ed))])),u("Ui"),h(t_,x,S([h(c,"Display mode:",f(pp,x,S([w(Cn,"Auto"),w(Tn(1),"Wide"),w(Tn(0),"Narrow")]),h(Aa,m_,I_),o.d9)),h(c,"Size:",l(dp,h(qr,h(Aa,(function(t){return w(t,t+"%")}),Bn),zo),h(_s,Mr,h(_s,Hs(h(Aa,m_,B_)),Xs(hi))),Bn(o.cs)))])),u("Reset"),h(t_,x,(s=h(Yo,"width","calc(25*var(--cw))"),S([f(Uh,e,S([Nc(S([s]))]),m_(x_),"Reset to defaults"),f(Uh,e,S([Nc(S([s])),_d(!i)]),l(M_,"Do you really want to delete all cartridges?",w("OK","Cancel"),D_),"Delete all cartridges")])))])})),N_=n((function(t,e){return S([h(Hc,S([Nc(S([h(Yo,"padding","1rem var(--cw) 1rem var(--cw)"),ih(rh(100)),Sf(Cf),d_(S([Nd(S([h(Dh,"not(:first-of-type)",S([vh(lh(1))]))]))]))]))]),l(L_,t,e,Fn(t.aQ)>0))])})),j_=function(t){var e,n=function(t){var e=t.aE.d9;if(e.$)return t.dl;var n=e.a;return Tn(n)}(t),r=h(Xs,x,h(Hs,_f(t),n)),i=function(){var e=w(t.cQ,n);if(e.b.$)return x;switch(e.a){case 0:var r=e.b.a;return h($p,t,r);case 1:r=e.b.a;return h(N_,t,r);case 2:return function(t){var e,n,r=f_(S([Hp(S([(e=Kc(900*t.aE.cs/100|0),h(c_,"max-width",e))]))]));return S([h(Hc,S([Nc(S([ih(rh(100)),h(Yo,"height","calc(100vh - 3em)"),id(lh(1)),hh,Sf(Cf),Od(Sp),Yl(Ql),r(S([jc(np)]))]))]),S([h(Hc,S([Ah,Nc(S([hh,Od(Sp),gd(Vc(1)),r(S([h(Yo,"height","calc(70vh - 4em)"),u_(Kc(600))]))]))]),S([h(Hc,S([Nc(S([gd(Vc(1)),h(Yo,"padding","1em calc(2 * var(--cw))"),sl(0),Qc(l_)]))]),S([o_(t),h_(t)]))])),h(Hc,S([Nc(S([gd((n=0,{S:0,B:0,dC:0,aY:0,K:n,ap:"",aJ:0,D:Jc(n)})),of(Vc(0)),h(Yo,"flex-basis","calc(50 * var(--cw))"),hh,Yl(Jl),Od(Sp)]))]),S([h(Hc,S([Ah,Wd("Console:")]),Qp(t)),h(Hc,S([Ah,Wd("Help:"),Nc(S([gd(Vc(1)),Hl(Hh),hh,Od(Sp),Yl(Jl)]))]),S([h(Hc,S([Nc(S([Tp(Cp),h(Yo,"-webkit-overflow-scrolling","touch"),gd(Vc(1))]))]),i_(t))]))]))]))])}(t);case 3:return function(t){return S([v_(t)])}(t);default:return function(t){return S([Af(t)])}(t)}}(),s=(e=Kc(t.aE.cs/100*18),Pc(S([Qo(S([Zo(e),Oc(e)]))])));return h(gn,s,E(r,E(h(Xs,x,h(Hs,rl(t.dn),n)),i)))},U_=ed;!function(e){t.Elm?function t(e,n){for(var r in n)r in e?"init"==r?M(6):t(e[r],n[r]):e[r]=n[r]}(t.Elm,e):t.Elm=e}({Stellerator:{Main:{init:si({de:ea,dD:ra,dE:function(t){if(t.$)return hi;var e=t.a;return na(function(t){var e=t.b7?"https://":"http://";return l(sa,"#",t.c6,l(sa,"?",t.b8,E(h(ia,t.b4,E(e,t.bR)),t.b2)))}(e))},d1:function(t){return ha(S([Sa,(e=aa,ka(h(Aa,e,(function(t){var e=h(Si,$i(Di),t);return e.$?x:e.a})))),va(ua),wa(oa),xa(ca)]));var e},ea:Ho,ec:function(t){return{cE:h(qr,U_,j_(t)),d6:h(Xs,"Stellerator",h(Hs,(function(t){return"Stellerator: "+t.az}),ql(t)))}}})(Ii)(0)}}})}(this)}).call($);var H=$.Elm;const W={addCSS:!0,thumbWidth:15,watch:!0};const G=t=>null!=t?t.constructor:null,V=(t,e)=>Boolean(t&&e&&t instanceof e),q=t=>null==t,X=t=>G(t)===Object,Q=t=>G(t)===String,J=t=>Array.isArray(t),Y=t=>V(t,NodeList);var K=Q,Z=J,tt=Y,et=t=>V(t,Element),nt=t=>V(t,Event),rt=t=>q(t)||(Q(t)||J(t)||Y(t))&&!t.length||X(t)&&!Object.keys(t).length;function it(t,e){if(e<1){const n=function(t){const e=`${t}`.match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(e);return parseFloat(t.toFixed(n))}return Math.round(t/e)*e}class st{constructor(t,e){et(t)?this.element=t:K(t)&&(this.element=document.querySelector(t)),et(this.element)&&rt(this.element.rangeTouch)&&(this.config=Object.assign({},W,e),this.init())}static get enabled(){return"ontouchstart"in document.documentElement}static setup(t,e={}){let n=null;if(rt(t)||K(t)?n=Array.from(document.querySelectorAll(K(t)?t:'input[type="range"]')):et(t)?n=[t]:tt(t)?n=Array.from(t):Z(t)&&(n=t.filter(et)),rt(n))return null;const r=Object.assign({},W,e);if(K(t)&&r.watch){new MutationObserver(e=>{Array.from(e).forEach(e=>{Array.from(e.addedNodes).forEach(e=>{if(!et(e)||!function(t,e){return function(){return Array.from(document.querySelectorAll(e)).includes(this)}.call(t,e)}(e,t))return;new st(e,r)})})}).observe(document.body,{childList:!0,subtree:!0})}return n.map(t=>new st(t,e))}init(){st.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}destroy(){st.enabled&&(this.listeners(!1),this.element.rangeTouch=null)}listeners(t){const e=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(t=>{this.element[e](t,t=>this.set(t),!1)})}get(t){if(!st.enabled||!nt(t))return null;const e=t.target,n=t.changedTouches[0],r=parseFloat(e.getAttribute("min"))||0,i=parseFloat(e.getAttribute("max"))||100,s=parseFloat(e.getAttribute("step"))||1,a=i-r;let o;const u=e.getBoundingClientRect(),c=100/u.width*(this.config.thumbWidth/2)/100;return o=100/u.width*(n.clientX-u.left),o<0?o=0:o>100&&(o=100),o<50?o-=(100-2*o)*c:o>50&&(o+=2*(o-50)*c),r+it(a*(o/100),s)}set(t){st.enabled&&nt(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(t,e){if(!t||!e)return;const n=new Event(e);t.dispatchEvent(n)}(t.target,"touchend"===t.type?"change":"input"))}}const at=new WeakMap;function ot(t){at.has(t)||at.set(t,new st(t,{watch:!1,addCSS:!1,thumbWidth:8}))}function ut(t){t.matches&&t.matches("input[type=range]")&&ot(t),t.querySelectorAll&&t.querySelectorAll("input[type=range]").forEach(ot)}let ct=null;var ht;!function(t){let e;!function(t){t.vanilla_2k="vanilla_2k",t.vanilla_4k="vanilla_4k",t.bankswitch_2k_cv="bankswitch_2k_cv",t.bankswitch_8k_F8="bankswitch_8k_F8",t.bankswitch_8k_E0="bankswitch_8k_E0",t.bankswitch_8k_3F="bankswitch_8k_3F",t.bankswitch_8k_FE="bankswitch_8k_FE",t.bankswitch_8k_UA="bankswitch_8k_UA",t.bankswitch_8k_DPC="bankswitch_8k_DPC",t.bankswitch_8k_econobanking="bankswitch_8k_econobanking",t.bankswitch_8k_pp="bankswitch_8k_pp",t.bankswitch_12k_FA="bankswitch_12k_FA",t.bankswitch_16k_F6="bankswitch_16k_F6",t.bankswitch_16k_E7="bankswitch_16k_E7",t.bankswitch_FA2="bankswitch_FA2",t.bankswitch_32k_F4="bankswitch_32k_F4",t.bankswitch_64k_F0="bankswitch_64k_F0",t.bankswitch_64k_EF="bankswitch_64k_EF",t.bankswitch_3E="bankswitch_3E",t.bankswitch_supercharger="bankswitch_supercharger",t.bankswitch_dpc_plus="bankswitch_dpc_plus",t.bankswitch_cdf="bankswitch_cdf",t.unknown="unknown"}(e=t.CartridgeType||(t.CartridgeType={})),t.getAllTypes=function(){return[e.vanilla_2k,e.vanilla_4k,e.bankswitch_2k_cv,e.bankswitch_8k_F8,e.bankswitch_8k_E0,e.bankswitch_8k_3F,e.bankswitch_8k_FE,e.bankswitch_8k_UA,e.bankswitch_8k_econobanking,e.bankswitch_8k_pp,e.bankswitch_12k_FA,e.bankswitch_8k_DPC,e.bankswitch_16k_F6,e.bankswitch_16k_E7,e.bankswitch_FA2,e.bankswitch_32k_F4,e.bankswitch_3E,e.bankswitch_64k_F0,e.bankswitch_64k_EF,e.bankswitch_supercharger,e.bankswitch_dpc_plus,e.bankswitch_cdf,e.unknown]},t.describeCartridgeType=function(t){switch(t){case e.vanilla_2k:return"plain 2k";case e.vanilla_4k:return"plain 4k";case e.bankswitch_2k_cv:return"2k CommaVideo scheme";case e.bankswitch_8k_F8:return"bankswitched 8k, F8 (Atari) scheme";case e.bankswitch_8k_E0:return"bankswitched 8k, E0 (Parker Bros.) scheme";case e.bankswitch_8k_3F:return"bankswitched 8k, 3F (Tigervision) scheme";case e.bankswitch_8k_FE:return"bankswitched 8k, FE (Activision) scheme";case e.bankswitch_8k_UA:return"bankswitched 8k, UA (Pleiades) scheme";case e.bankswitch_8k_pp:return"bankswitched 8k, Pink Panther scheme";case e.bankswitch_12k_FA:return"bankswitched 12k, FA (CBS) scheme";case e.bankswitch_8k_DPC:return"bankswitched 8k + DPC";case e.bankswitch_8k_econobanking:return"bankswitched 8k, econobanking scheme";case e.bankswitch_16k_F6:return"bankswitched 16k, F6 (Atari) scheme";case e.bankswitch_16k_E7:return"bankswitched 16k, E7 (M-Network) scheme";case e.bankswitch_FA2:return"bankswitched 28k/29k, FA2 (modified CBS) scheme";case e.bankswitch_32k_F4:return"bankswitched 32k, F4 (Atari) scheme";case e.bankswitch_3E:return"bankswitched 3E (Tigervision + RAM) scheme";case e.bankswitch_64k_F0:return"bankswitched 64k, F0 (Megaboy) scheme";case e.bankswitch_64k_EF:return"bankswitched 64k, EFSC (Homestar Runner) scheme";case e.bankswitch_supercharger:return"bankswitched supercharger";case e.bankswitch_dpc_plus:return"bankswitched DPC+";case e.bankswitch_cdf:return"bankswitched CDF";case e.unknown:return"unknown"}}}(ht||(ht={}));var lt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"}));j(lt);lt.NAMED_TAG,lt.NAME_TAG,lt.UNMANAGED_TAG,lt.OPTIONAL_TAG,lt.INJECT_TAG,lt.MULTI_INJECT_TAG,lt.TAGGED,lt.TAGGED_PROP,lt.PARAM_TYPES,lt.DESIGN_PARAM_TYPES,lt.POST_CONSTRUCT;var ft=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}}));j(ft);ft.BindingScopeEnum,ft.BindingTypeEnum,ft.TargetTypeEnum;var dt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=0;e.id=function(){return n++}}));j(dt);dt.id;var pt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.id=dt.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=ft.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=n}));j(pt);pt.Binding;var _t=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"}));j(_t);_t.DUPLICATED_INJECTABLE_DECORATOR,_t.DUPLICATED_METADATA,_t.NULL_ARGUMENT,_t.KEY_NOT_FOUND,_t.AMBIGUOUS_MATCH,_t.CANNOT_UNBIND,_t.NOT_REGISTERED,_t.MISSING_INJECTABLE_ANNOTATION,_t.MISSING_INJECT_ANNOTATION,_t.UNDEFINED_INJECT_ANNOTATION,_t.CIRCULAR_DEPENDENCY,_t.NOT_IMPLEMENTED,_t.INVALID_BINDING_TYPE,_t.NO_MORE_SNAPSHOTS_AVAILABLE,_t.INVALID_MIDDLEWARE_RETURN,_t.INVALID_FUNCTION_BINDING,_t.INVALID_TO_SELF_VALUE,_t.INVALID_DECORATOR_OPERATION,_t.ARGUMENTS_LENGTH_MISMATCH,_t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT,_t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE,_t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE,_t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK,_t.MULTIPLE_POST_CONSTRUCT_METHODS,_t.POST_CONSTRUCT_ERROR,_t.CIRCULAR_DEPENDENCY_IN_FACTORY,_t.STACK_OVERFLOW;var gt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(lt.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(lt.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(lt.TAGGED_PROP,t)||[]},t}();e.MetadataReader=n}));j(gt);gt.MetadataReader;var bt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}}));j(bt);bt.BindingCount;var vt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===_t.STACK_OVERFLOW}}));j(vt);vt.isStackOverflowExeption;var mt=U((function(t,e){function n(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function r(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}Object.defineProperty(e,"__esModule",{value:!0}),e.getServiceIdentifierAsString=n,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var i="",s=n(t,e);return 0!==s.length&&(i="\nRegistered bindings:",s.forEach((function(t){var e="Object";null!==t.implementationType&&(e=r(t.implementationType)),i=i+"\n "+e,t.constraint.metaData&&(i=i+" - "+t.constraint.metaData)}))),i},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var r=function(t){return function t(e,r){void 0===r&&(r=[]);var i=n(e.serviceIdentifier);return r.push(i),null!==e.parentRequest?t(e.parentRequest,r):r}(t).reverse().join(" --\x3e ")}(e);throw new Error(_t.CIRCULAR_DEPENDENCY+" "+r)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=r}));j(mt);mt.getServiceIdentifierAsString,mt.listRegisteredBindingsForServiceIdentifier,mt.circularDependencyToException,mt.listMetadataForTarget,mt.getFunctionName;var yt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.id=dt.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=n}));j(yt);yt.Context;var wt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===lt.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=n}));j(wt);wt.Metadata;var At=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=n}));j(At);At.Plan;var kt=U((function(t,e){function n(t,e,n,r,i){var s={},a="number"==typeof i,o=void 0!==i&&a?i.toString():n;if(a&&void 0!==n)throw new Error(_t.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(s=Reflect.getMetadata(t,e));var u=s[o];if(Array.isArray(u))for(var c=0,h=u;c<h.length;c++){var l=h[c];if(l.key===r.key)throw new Error(_t.DUPLICATED_METADATA+" "+l.key.toString())}else u=[];u.push(r),s[o]=u,Reflect.defineMetadata(t,s,e)}function r(t,e){Reflect.decorate(t,e)}function i(t,e){return function(n,r){e(n,r,t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.tagParameter=function(t,e,r,i){n(lt.TAGGED,t,e,i,r)},e.tagProperty=function(t,e,r){n(lt.TAGGED_PROP,t.constructor,e,r)},e.decorate=function(t,e,n){"number"==typeof n?r([i(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):r([t],e)}}));j(kt);kt.tagParameter,kt.tagProperty,kt.decorate;var Et=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=n,e.inject=function(t){return function(e,n,r){if(void 0===t)throw new Error(_t.UNDEFINED_INJECT_ANNOTATION(e.name));var i=new wt.Metadata(lt.INJECT_TAG,t);"number"==typeof r?kt.tagParameter(e,n,r,i):kt.tagProperty(e,n,i)}}}));j(Et);Et.LazyServiceIdentifer,Et.inject;var xt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=n}));j(xt);xt.QueryableString;var Tt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,r){this.id=dt.id(),this.type=t,this.serviceIdentifier=n,this.name=new xt.QueryableString(e||""),this.metadata=new Array;var i=null;"string"==typeof r?i=new wt.Metadata(lt.NAMED_TAG,r):r instanceof wt.Metadata&&(i=r),null!==i&&this.metadata.push(i)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(lt.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(lt.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(lt.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==lt.INJECT_TAG&&t.key!==lt.MULTI_INJECT_TAG&&t.key!==lt.NAME_TAG&&t.key!==lt.UNMANAGED_TAG&&t.key!==lt.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(lt.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===lt.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==lt.INJECT_TAG&&t.key!==lt.MULTI_INJECT_TAG&&t.key!==lt.NAME_TAG&&t.key!==lt.UNMANAGED_TAG&&t.key!==lt.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(lt.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var s=i[r];if(s.key===t&&s.value===n)return!0}return!1}},t}();e.Target=n}));j(Tt);Tt.Target;var Ct=U((function(t,e){function n(t,e,n,s){var a=t.getConstructorMetadata(n),o=a.compilerGeneratedMetadata;if(void 0===o){var u=_t.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(u)}var c=a.userGeneratedMetadata,h=Object.keys(c),l=function(t,e,n,i,s){for(var a=[],o=0;o<s;o++){var u=r(o,t,e,n,i);null!==u&&a.push(u)}return a}(s,e,o,c,0===n.length&&h.length>0?h.length:n.length),f=function t(e,n){for(var r=e.getPropertiesMetadata(n),s=[],a=Object.keys(r),o=0,u=a;o<u.length;o++){var c=u[o],h=r[c],l=i(r[c]),f=l.targetName||c,d=l.inject||l.multiInject,p=new Tt.Target(ft.TargetTypeEnum.ClassProperty,f,d);p.metadata=h,s.push(p)}var _=Object.getPrototypeOf(n.prototype).constructor;if(_!==Object){var g=t(e,_);s=s.concat(g)}return s}(t,n);return l.concat(f)}function r(t,e,n,r,s){var a=s[t.toString()]||[],o=i(a),u=!0!==o.unmanaged,c=r[t],h=o.inject||o.multiInject;if((c=h||c)instanceof Et.LazyServiceIdentifer&&(c=c.unwrap()),u){if(!e&&(c===Object||c===Function||void 0===c)){var l=_t.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(l)}var f=new Tt.Target(ft.TargetTypeEnum.ConstructorArgument,o.targetName,c);return f.metadata=a,f}return null}function i(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[lt.INJECT_TAG],multiInject:e[lt.MULTI_INJECT_TAG],targetName:e[lt.NAME_TAG],unmanaged:e[lt.UNMANAGED_TAG]}}Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=mt.getFunctionName,e.getDependencies=function(t,e){return n(t,mt.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,r){var i=Object.getPrototypeOf(r.prototype).constructor;if(i!==Object){var s=n(e,mt.getFunctionName(i),i,!0),a=s.map((function(t){return t.metadata.filter((function(t){return t.key===lt.UNMANAGED_TAG}))})),o=[].concat.apply([],a).length,u=s.length-o;return u>0?u:t(e,i)}return 0}}));j(Ct);Ct.getFunctionName,Ct.getDependencies,Ct.getBaseClassDependencyCount;var St=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,r,i){this.id=dt.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();e.Request=n}));j(St);St.Request;var Rt=U((function(t,e){function n(t){return t._bindingDictionary}function r(t,e,n,r,i,s){var a=t?lt.MULTI_INJECT_TAG:lt.INJECT_TAG,o=new wt.Metadata(a,n),u=new Tt.Target(e,r,n,o);if(void 0!==i){var c=new wt.Metadata(i,s);u.metadata.push(c)}return u}function i(t,e,n,r,i){var a=s(n.container,i.serviceIdentifier),o=[];return a.length===bt.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),a=s(n.container,i.serviceIdentifier)),o=e?a:a.filter((function(t){var e=new St.Request(t.serviceIdentifier,n,r,t,i);return t.constraint(e)})),function(t,e,n,r){switch(e.length){case bt.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var i=mt.getServiceIdentifierAsString(t),a=_t.NOT_REGISTERED;throw a+=mt.listMetadataForTarget(i,n),a+=mt.listRegisteredBindingsForServiceIdentifier(r,i,s),new Error(a);case bt.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case bt.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;i=mt.getServiceIdentifierAsString(t),a=_t.AMBIGUOUS_MATCH+" "+i;throw a+=mt.listRegisteredBindingsForServiceIdentifier(r,i,s),new Error(a)}}(i.serviceIdentifier,o,i,n.container),o}function s(t,e){var r=[],i=n(t);return i.hasKey(e)?r=i.get(e):null!==t.parent&&(r=s(t.parent,e)),r}Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=n,e.plan=function(t,e,n,s,a,o,u,c){void 0===c&&(c=!1);var h=new yt.Context(e),l=r(n,s,a,"",o,u);try{return function t(e,n,r,s,a,o){var u,c;if(null===a){u=i(e,n,s,null,o),c=new St.Request(r,s,null,u,o);var h=new At.Plan(s,c);s.addPlan(h)}else u=i(e,n,s,a,o),c=a.addChildRequest(o.serviceIdentifier,u,o);u.forEach((function(n){var r=null;if(o.isArray())r=c.addChildRequest(n.serviceIdentifier,n,o);else{if(n.cache)return;r=c}if(n.type===ft.BindingTypeEnum.Instance&&null!==n.implementationType){var i=Ct.getDependencies(e,n.implementationType);if(!s.container.options.skipBaseClassChecks){var a=Ct.getBaseClassDependencyCount(e,n.implementationType);if(i.length<a){var u=_t.ARGUMENTS_LENGTH_MISMATCH(Ct.getFunctionName(n.implementationType));throw new Error(u)}}i.forEach((function(n){t(e,!1,n.serviceIdentifier,s,r,n)}))}}))}(t,c,a,h,null,l),h}catch(t){throw vt.isStackOverflowExeption(t)&&h.plan&&mt.circularDependencyToException(h.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){var i=new Tt.Target(ft.TargetTypeEnum.Variable,"",e,new wt.Metadata(n,r)),s=new yt.Context(t);return new St.Request(e,s,null,[],i)}}));j(Rt);Rt.getBindingDictionary,Rt.plan,Rt.createMockRequest;var It=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=function(t,e,n){var r,i,s=null;if(e.length>0){var a=e.filter((function(t){return null!==t.target&&t.target.type===ft.TargetTypeEnum.ConstructorArgument})).map(n);i=a,s=function(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===ft.TargetTypeEnum.ClassProperty})),i=r.map(n);return r.forEach((function(e,n){var r;r=e.target.name.value();var s=i[n];t[r]=s})),t}(s=new((r=t).bind.apply(r,[void 0].concat(i))),e,n)}else s=new t;return function(t,e){if(Reflect.hasMetadata(lt.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(lt.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(_t.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,s),s}}));j(It);It.resolveInstance;var Bt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){try{return n()}catch(n){throw vt.isStackOverflowExeption(n)?new Error(_t.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},r=function(t){return function(e){e.parentContext.setCurrentRequest(e);var i=e.bindings,s=e.childRequests,a=e.target&&e.target.isArray(),o=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(a&&o)return s.map((function(e){return r(t)(e)}));var u=null;if(!e.target.isOptional()||0!==i.length){var c=i[0],h=c.scope===ft.BindingScopeEnum.Singleton,l=c.scope===ft.BindingScopeEnum.Request;if(h&&c.activated)return c.cache;if(l&&null!==t&&t.has(c.id))return t.get(c.id);if(c.type===ft.BindingTypeEnum.ConstantValue)u=c.cache;else if(c.type===ft.BindingTypeEnum.Function)u=c.cache;else if(c.type===ft.BindingTypeEnum.Constructor)u=c.implementationType;else if(c.type===ft.BindingTypeEnum.DynamicValue&&null!==c.dynamicValue)u=n("toDynamicValue",c.serviceIdentifier,(function(){return c.dynamicValue(e.parentContext)}));else if(c.type===ft.BindingTypeEnum.Factory&&null!==c.factory)u=n("toFactory",c.serviceIdentifier,(function(){return c.factory(e.parentContext)}));else if(c.type===ft.BindingTypeEnum.Provider&&null!==c.provider)u=n("toProvider",c.serviceIdentifier,(function(){return c.provider(e.parentContext)}));else{if(c.type!==ft.BindingTypeEnum.Instance||null===c.implementationType){var f=mt.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(_t.INVALID_BINDING_TYPE+" "+f)}u=It.resolveInstance(c.implementationType,s,r(t))}return"function"==typeof c.onActivation&&(u=c.onActivation(e.parentContext,u)),h&&(c.cache=u,c.activated=!0),l&&null!==t&&!t.has(c.id)&&t.set(c.id,u),u}}};e.resolve=function(t){return r(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}}));j(Bt);Bt.resolve;var Pt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){var r=t.parentRequest;return null!==r&&(!!e(r)||n(r,e))};e.traverseAncerstors=n;var r=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new wt.Metadata(t,e),n}};e.taggedConstraint=r;var i=r(lt.NAMED_TAG);e.namedConstraint=i;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}}}));j(Pt);Pt.traverseAncerstors,Pt.taggedConstraint,Pt.namedConstraint,Pt.typeConstraint;var Ot=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new Dt.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=Pt.namedConstraint(t),new Dt.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=Pt.taggedConstraint(t)(e),new Dt.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return Pt.typeConstraint(t)(e.parentRequest)},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return Pt.namedConstraint(t)(e.parentRequest)},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return Pt.taggedConstraint(t)(e)(n.parentRequest)},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return Pt.traverseAncerstors(e,Pt.typeConstraint(t))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!Pt.traverseAncerstors(e,Pt.typeConstraint(t))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return Pt.traverseAncerstors(e,Pt.namedConstraint(t))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!Pt.traverseAncerstors(e,Pt.namedConstraint(t))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return Pt.traverseAncerstors(n,Pt.taggedConstraint(t)(e))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!Pt.traverseAncerstors(n,Pt.taggedConstraint(t)(e))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return Pt.traverseAncerstors(e,t)},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!Pt.traverseAncerstors(e,t)},new Dt.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=n}));j(Ot);Ot.BindingWhenSyntax;var Dt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new Ot.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=n}));j(Dt);Dt.BindingOnSyntax;var Mt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new Ot.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new Dt.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=n}));j(Mt);Mt.BindingWhenOnSyntax;var Ft=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=ft.BindingScopeEnum.Request,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=ft.BindingScopeEnum.Singleton,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=ft.BindingScopeEnum.Transient,new Mt.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=n}));j(Ft);Ft.BindingInSyntax;var Lt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new Ot.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new Dt.BindingOnSyntax(this._binding),this._bindingInSyntax=new Ft.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=n}));j(Lt);Lt.BindingInWhenOnSyntax;var Nt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=ft.BindingTypeEnum.Instance,this._binding.implementationType=t,new Lt.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+_t.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=ft.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=ft.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new Lt.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=ft.BindingTypeEnum.Constructor,this._binding.implementationType=t,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=ft.BindingTypeEnum.Factory,this._binding.factory=t,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(_t.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=ft.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=ft.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=ft.BindingTypeEnum.Provider,this._binding.provider=t,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=n}));j(Nt);Nt.BindingToSyntax;var jt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=n}));j(jt);jt.ContainerSnapshot;var Ut=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(_t.NULL_ARGUMENT);if(null==e)throw new Error(_t.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(_t.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(_t.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(_t.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(_t.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var i=n.filter((function(e){return!t(e)}));i.length>0?e._map.set(r,i):e._map.delete(r)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(_t.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=n}));j(Ut);Ut.Lookup;var zt=U((function(t,e){var n=N&&N.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function a(t){try{u(r.next(t))}catch(t){s(t)}}function o(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,o)}u((r=r.apply(t,e||[])).next())}))},r=N&&N.__generator||function(t,e){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[0,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error(""+_t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=ft.BindingScopeEnum.Transient;else if(e.defaultScope!==ft.BindingScopeEnum.Singleton&&e.defaultScope!==ft.BindingScopeEnum.Transient&&e.defaultScope!==ft.BindingScopeEnum.Request)throw new Error(""+_t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+_t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+_t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=dt.id(),this._bindingDictionary=new Ut.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new gt.MetadataReader}return t.merge=function(e,n){var r=new t,i=Rt.getBindingDictionary(r),s=Rt.getBindingDictionary(e),a=Rt.getBindingDictionary(n);function o(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return o(s,i),o(a,i),r},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var s=i[r],a=n(s.id);s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(this,void 0,void 0,(function(){var e,n,i,s,a;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,i=t,r.label=1;case 1:return n<i.length?(s=i[n],a=e(s.id),[4,s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||ft.BindingScopeEnum.Transient,n=new pt.Binding(t,e);return this._bindingDictionary.add(t,n),new Nt.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(_t.CANNOT_UNBIND+" "+mt.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new Ut.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,lt.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),s=Rt.createMockRequest(this,t,e,n);r=i.some((function(t){return t.constraint(s)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(jt.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(_t.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,ft.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,ft.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,lt.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,ft.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,ft.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,lt.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var i=t.rebind.bind(t)(r);return e(i,n),i}};return function(r){return{bindFunction:(i=r,function(n){var r=t.bind.bind(t)(n);return e(r,i),r}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(r),unbindFunction:function(e){t.unbind.bind(t)(e)}};var i}},t.prototype._get=function(t,e,n,r,i,s){var a=null,o={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:s};if(this._middleware){if(null==(a=this._middleware(o)))throw new Error(_t.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(o);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=Rt.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),Bt.resolve(n)}},t}();e.Container=i}));j(zt);zt.Container;var $t=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){this.id=dt.id(),this.registry=t};e.ContainerModule=n;var r=function(t){this.id=dt.id(),this.registry=t};e.AsyncContainerModule=r}));j($t);$t.ContainerModule,$t.AsyncContainerModule;var Ht=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(lt.PARAM_TYPES,t))throw new Error(_t.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(lt.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(lt.PARAM_TYPES,e,t),t}}}));j(Ht);Ht.injectable;var Wt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=function(t,e){return function(n,r,i){var s=new wt.Metadata(t,e);"number"==typeof i?kt.tagParameter(n,r,i,s):kt.tagProperty(n,r,s)}}}));j(Wt);Wt.tagged;var Gt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.named=function(t){return function(e,n,r){var i=new wt.Metadata(lt.NAMED_TAG,t);"number"==typeof r?kt.tagParameter(e,n,r,i):kt.tagProperty(e,n,i)}}}));j(Gt);Gt.named;var Vt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.optional=function(){return function(t,e,n){var r=new wt.Metadata(lt.OPTIONAL_TAG,!0);"number"==typeof n?kt.tagParameter(t,e,n,r):kt.tagProperty(t,e,r)}}}));j(Vt);Vt.optional;var qt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=function(){return function(t,e,n){var r=new wt.Metadata(lt.UNMANAGED_TAG,!0);kt.tagParameter(t,e,n,r)}}}));j(qt);qt.unmanaged;var Xt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=function(t){return function(e,n,r){var i=new wt.Metadata(lt.MULTI_INJECT_TAG,t);"number"==typeof r?kt.tagParameter(e,n,r,i):kt.tagProperty(e,n,i)}}}));j(Xt);Xt.multiInject;var Qt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=function(t){return function(e,n,r){var i=new wt.Metadata(lt.NAME_TAG,t);kt.tagParameter(e,n,r,i)}}}));j(Qt);Qt.targetName;var Jt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=function(){return function(t,e,n){var r=new wt.Metadata(lt.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(lt.POST_CONSTRUCT,t.constructor))throw new Error(_t.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(lt.POST_CONSTRUCT,r,t.constructor)}}}));j(Jt);Jt.postConstruct;var Yt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}}));j(Yt);Yt.multiBindToService;var Kt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.METADATA_KEY=lt,e.Container=zt.Container,e.BindingScopeEnum=ft.BindingScopeEnum,e.BindingTypeEnum=ft.BindingTypeEnum,e.TargetTypeEnum=ft.TargetTypeEnum,e.AsyncContainerModule=$t.AsyncContainerModule,e.ContainerModule=$t.ContainerModule,e.injectable=Ht.injectable,e.tagged=Wt.tagged,e.named=Gt.named,e.inject=Et.inject,e.LazyServiceIdentifer=Et.LazyServiceIdentifer,e.optional=Vt.optional,e.unmanaged=qt.unmanaged,e.multiInject=Xt.multiInject,e.targetName=Qt.targetName,e.postConstruct=Jt.postConstruct,e.MetadataReader=gt.MetadataReader,e.id=dt.id,e.decorate=kt.decorate,e.traverseAncerstors=Pt.traverseAncerstors,e.taggedConstraint=Pt.taggedConstraint,e.namedConstraint=Pt.namedConstraint,e.typeConstraint=Pt.typeConstraint,e.getServiceIdentifierAsString=mt.getServiceIdentifierAsString,e.multiBindToService=Yt.multiBindToService}));j(Kt);Kt.METADATA_KEY;var Zt=Kt.Container,te=(Kt.BindingScopeEnum,Kt.BindingTypeEnum,Kt.TargetTypeEnum,Kt.AsyncContainerModule,Kt.ContainerModule,Kt.injectable),ee=(Kt.tagged,Kt.named,Kt.inject);Kt.LazyServiceIdentifer,Kt.optional,Kt.unmanaged,Kt.multiInject,Kt.targetName,Kt.postConstruct,Kt.MetadataReader,Kt.id,Kt.decorate,Kt.traverseAncerstors,Kt.taggedConstraint,Kt.namedConstraint,Kt.typeConstraint,Kt.getServiceIdentifierAsString,Kt.multiBindToService;let ne=class{constructor(){this._watchMedia=t=>{this._queries.forEach(t=>{t.removeEventListener?t.removeEventListener("change",this._updateQueries):t.removeListener(this._updateQueries)}),this._queries=t.map(t=>matchMedia(t)),this._queries.forEach(t=>{t.removeEventListener?t.addEventListener("change",this._updateQueries):t.addListener(this._updateQueries)}),this._updateQueries()},this._updateQueries=()=>this._ports.onMediaUpdate_.send(this._queries.map(t=>t.matches)),this._queries=[]}init(t){this._ports=t,t.watchMedia_.subscribe(this._watchMedia)}};ne=r([te()],ne);var re=ne;let ie=class{constructor(){this._scrollIntoView=([t,e])=>{const n=document.getElementById(e);n?n.scrollIntoView({block:t}):new se(t,e).start()}}init(t){t.scrollIntoView_.subscribe(this._scrollIntoView)}};ie=r([te()],ie);class se{constructor(t,e,n=500){this._position=t,this._id=e,this._timeout=n,this._onMutation=t=>{if(!t.some(t=>t.addedNodes))return;const e=document.getElementById(this._id);e&&(this._observer.disconnect(),clearTimeout(this._timeoutHandle),e.scrollIntoView({block:this._position}))},this._observer=new MutationObserver(this._onMutation),this._timeoutHandle=null}start(){setTimeout(()=>this._observer.disconnect(),this._timeout),this._observer.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0})}}var ae=ie,oe=[],ue=[],ce="undefined"!=typeof Uint8Array?Uint8Array:Array,he=!1;function le(){he=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)oe[e]=t[e],ue[t.charCodeAt(e)]=e;ue["-".charCodeAt(0)]=62,ue["_".charCodeAt(0)]=63}function fe(t,e,n){for(var r,i,s=[],a=e;a<n;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],s.push(oe[(i=r)>>18&63]+oe[i>>12&63]+oe[i>>6&63]+oe[63&i]);return s.join("")}function de(t){var e;he||le();for(var n=t.length,r=n%3,i="",s=[],a=0,o=n-r;a<o;a+=16383)s.push(fe(t,a,a+16383>o?o:a+16383));return 1===r?(e=t[n-1],i+=oe[e>>2],i+=oe[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=oe[e>>10],i+=oe[e>>4&63],i+=oe[e<<2&63],i+="="),s.push(i),s.join("")}function pe(t,e,n,r,i){var s,a,o=8*i-r-1,u=(1<<o)-1,c=u>>1,h=-7,l=n?i-1:0,f=n?-1:1,d=t[e+l];for(l+=f,s=d&(1<<-h)-1,d>>=-h,h+=o;h>0;s=256*s+t[e+l],l+=f,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=r;h>0;a=256*a+t[e+l],l+=f,h-=8);if(0===s)s=1-c;else{if(s===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),s-=c}return(d?-1:1)*a*Math.pow(2,s-r)}function _e(t,e,n,r,i,s){var a,o,u,c=8*s-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=h?(o=0,a=h):a+l>=1?(o=(e*u-1)*Math.pow(2,i),a+=l):(o=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&o,d+=p,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*_}var ge={}.toString,be=Array.isArray||function(t){return"[object Array]"==ge.call(t)};we.TYPED_ARRAY_SUPPORT=void 0===l.TYPED_ARRAY_SUPPORT||l.TYPED_ARRAY_SUPPORT;var ve=me();function me(){return we.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ye(t,e){if(me()<e)throw new RangeError("Invalid typed array length");return we.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=we.prototype:(null===t&&(t=new we(e)),t.length=e),t}function we(t,e,n){if(!(we.TYPED_ARRAY_SUPPORT||this instanceof we))return new we(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return Ee(this,t)}return Ae(this,t,e,n)}function Ae(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);we.TYPED_ARRAY_SUPPORT?(t=e).__proto__=we.prototype:t=xe(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!we.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Se(e,n),i=(t=ye(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(Ce(e)){var n=0|Te(e.length);return 0===(t=ye(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?ye(t,0):xe(t,e);if("Buffer"===e.type&&be(e.data))return xe(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function ke(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Ee(t,e){if(ke(e),t=ye(t,e<0?0:0|Te(e)),!we.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function xe(t,e){var n=e.length<0?0:0|Te(e.length);t=ye(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function Te(t){if(t>=me())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+me().toString(16)+" bytes");return 0|t}function Ce(t){return!(null==t||!t._isBuffer)}function Se(t,e){if(Ce(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return tn(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return en(t).length;default:if(r)return tn(t).length;e=(""+e).toLowerCase(),r=!0}}function Re(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return He(this,e,n);case"utf8":case"utf-8":return Ue(this,e,n);case"ascii":return ze(this,e,n);case"latin1":case"binary":return $e(this,e,n);case"base64":return je(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return We(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Ie(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Be(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=we.from(e,r)),Ce(e))return 0===e.length?-1:Pe(t,e,n,r,i);if("number"==typeof e)return e&=255,we.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):Pe(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Pe(t,e,n,r,i){var s,a=1,o=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,o/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var h=-1;for(s=n;s<o;s++)if(c(t,s)===c(e,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===u)return h*a}else-1!==h&&(s-=s-h),h=-1}else for(n+u>o&&(n=o-u),s=n;s>=0;s--){for(var l=!0,f=0;f<u;f++)if(c(t,s+f)!==c(e,f)){l=!1;break}if(l)return s}return-1}function Oe(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var a=0;a<r;++a){var o=parseInt(e.substr(2*a,2),16);if(isNaN(o))return a;t[n+a]=o}return a}function De(t,e,n,r){return nn(tn(e,t.length-n),t,n,r)}function Me(t,e,n,r){return nn(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function Fe(t,e,n,r){return Me(t,e,n,r)}function Le(t,e,n,r){return nn(en(e),t,n,r)}function Ne(t,e,n,r){return nn(function(t,e){for(var n,r,i,s=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(e,t.length-n),t,n,r)}function je(t,e,n){return 0===e&&n===t.length?de(t):de(t.slice(e,n))}function Ue(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,a,o,u,c=t[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(h=c);break;case 2:128==(192&(s=t[i+1]))&&(u=(31&c)<<6|63&s)>127&&(h=u);break;case 3:s=t[i+1],a=t[i+2],128==(192&s)&&128==(192&a)&&(u=(15&c)<<12|(63&s)<<6|63&a)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:s=t[i+1],a=t[i+2],o=t[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(u=(15&c)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}we.poolSize=8192,we._augment=function(t){return t.__proto__=we.prototype,t},we.from=function(t,e,n){return Ae(null,t,e,n)},we.TYPED_ARRAY_SUPPORT&&(we.prototype.__proto__=Uint8Array.prototype,we.__proto__=Uint8Array),we.alloc=function(t,e,n){return function(t,e,n,r){return ke(e),e<=0?ye(t,e):void 0!==n?"string"==typeof r?ye(t,e).fill(n,r):ye(t,e).fill(n):ye(t,e)}(null,t,e,n)},we.allocUnsafe=function(t){return Ee(null,t)},we.allocUnsafeSlow=function(t){return Ee(null,t)},we.isBuffer=rn,we.compare=function(t,e){if(!Ce(t)||!Ce(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},we.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},we.concat=function(t,e){if(!be(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return we.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=we.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!Ce(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},we.byteLength=Se,we.prototype._isBuffer=!0,we.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ie(this,e,e+1);return this},we.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ie(this,e,e+3),Ie(this,e+1,e+2);return this},we.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ie(this,e,e+7),Ie(this,e+1,e+6),Ie(this,e+2,e+5),Ie(this,e+3,e+4);return this},we.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Ue(this,0,t):Re.apply(this,arguments)},we.prototype.equals=function(t){if(!Ce(t))throw new TypeError("Argument must be a Buffer");return this===t||0===we.compare(this,t)},we.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},we.prototype.compare=function(t,e,n,r,i){if(!Ce(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),o=Math.min(s,a),u=this.slice(r,i),c=t.slice(e,n),h=0;h<o;++h)if(u[h]!==c[h]){s=u[h],a=c[h];break}return s<a?-1:a<s?1:0},we.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},we.prototype.indexOf=function(t,e,n){return Be(this,t,e,n,!0)},we.prototype.lastIndexOf=function(t,e,n){return Be(this,t,e,n,!1)},we.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return Oe(this,t,e,n);case"utf8":case"utf-8":return De(this,t,e,n);case"ascii":return Me(this,t,e,n);case"latin1":case"binary":return Fe(this,t,e,n);case"base64":return Le(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},we.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ze(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function $e(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function He(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=e;s<n;++s)i+=Ze(t[s]);return i}function We(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function Ge(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Ve(t,e,n,r,i,s){if(!Ce(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function qe(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Xe(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function Qe(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Je(t,e,n,r,i){return i||Qe(t,0,n,4),_e(t,e,n,r,23,4),n+4}function Ye(t,e,n,r,i){return i||Qe(t,0,n,8),_e(t,e,n,r,52,8),n+8}we.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),we.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=we.prototype;else{var i=e-t;n=new we(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},we.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Ge(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},we.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Ge(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},we.prototype.readUInt8=function(t,e){return e||Ge(t,1,this.length),this[t]},we.prototype.readUInt16LE=function(t,e){return e||Ge(t,2,this.length),this[t]|this[t+1]<<8},we.prototype.readUInt16BE=function(t,e){return e||Ge(t,2,this.length),this[t]<<8|this[t+1]},we.prototype.readUInt32LE=function(t,e){return e||Ge(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},we.prototype.readUInt32BE=function(t,e){return e||Ge(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},we.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Ge(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},we.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Ge(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},we.prototype.readInt8=function(t,e){return e||Ge(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},we.prototype.readInt16LE=function(t,e){e||Ge(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},we.prototype.readInt16BE=function(t,e){e||Ge(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},we.prototype.readInt32LE=function(t,e){return e||Ge(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},we.prototype.readInt32BE=function(t,e){return e||Ge(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},we.prototype.readFloatLE=function(t,e){return e||Ge(t,4,this.length),pe(this,t,!0,23,4)},we.prototype.readFloatBE=function(t,e){return e||Ge(t,4,this.length),pe(this,t,!1,23,4)},we.prototype.readDoubleLE=function(t,e){return e||Ge(t,8,this.length),pe(this,t,!0,52,8)},we.prototype.readDoubleBE=function(t,e){return e||Ge(t,8,this.length),pe(this,t,!1,52,8)},we.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||Ve(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},we.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||Ve(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},we.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,1,255,0),we.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},we.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,2,65535,0),we.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):qe(this,t,e,!0),e+2},we.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,2,65535,0),we.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):qe(this,t,e,!1),e+2},we.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,4,4294967295,0),we.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Xe(this,t,e,!0),e+4},we.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,4,4294967295,0),we.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Xe(this,t,e,!1),e+4},we.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Ve(this,t,e,n,i-1,-i)}var s=0,a=1,o=0;for(this[e]=255&t;++s<n&&(a*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+n},we.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Ve(this,t,e,n,i-1,-i)}var s=n-1,a=1,o=0;for(this[e+s]=255&t;--s>=0&&(a*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+n},we.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,1,127,-128),we.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},we.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,2,32767,-32768),we.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):qe(this,t,e,!0),e+2},we.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,2,32767,-32768),we.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):qe(this,t,e,!1),e+2},we.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,4,2147483647,-2147483648),we.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Xe(this,t,e,!0),e+4},we.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),we.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Xe(this,t,e,!1),e+4},we.prototype.writeFloatLE=function(t,e,n){return Je(this,t,e,!0,n)},we.prototype.writeFloatBE=function(t,e,n){return Je(this,t,e,!1,n)},we.prototype.writeDoubleLE=function(t,e,n){return Ye(this,t,e,!0,n)},we.prototype.writeDoubleBE=function(t,e,n){return Ye(this,t,e,!1,n)},we.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!we.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},we.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!we.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=Ce(t)?t:tn(new we(t,r).toString()),o=a.length;for(s=0;s<n-e;++s)this[s+e]=a[s%o]}return this};var Ke=/[^+\/0-9A-Za-z-_]/g;function Ze(t){return t<16?"0"+t.toString(16):t.toString(16)}function tn(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function en(t){return function(t){var e,n,r,i,s,a;he||le();var o=t.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===t[o-2]?2:"="===t[o-1]?1:0,a=new ce(3*o/4-s),r=s>0?o-4:o;var u=0;for(e=0,n=0;e<r;e+=4,n+=3)i=ue[t.charCodeAt(e)]<<18|ue[t.charCodeAt(e+1)]<<12|ue[t.charCodeAt(e+2)]<<6|ue[t.charCodeAt(e+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===s?(i=ue[t.charCodeAt(e)]<<2|ue[t.charCodeAt(e+1)]>>4,a[u++]=255&i):1===s&&(i=ue[t.charCodeAt(e)]<<10|ue[t.charCodeAt(e+1)]<<4|ue[t.charCodeAt(e+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Ke,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function nn(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function rn(t){return null!=t&&(!!t._isBuffer||sn(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&sn(t.slice(0,0))}(t))}function sn(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var an=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:ve,Buffer:we,SlowBuffer:function(t){return+t!=t&&(t=0),we.alloc(+t)},isBuffer:rn});function on(){}function un(){un.init.call(this)}function cn(t){return void 0===t._maxListeners?un.defaultMaxListeners:t._maxListeners}function hn(t,e,n){if(e)t.call(n);else for(var r=t.length,i=vn(t,r),s=0;s<r;++s)i[s].call(n)}function ln(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,s=vn(t,i),a=0;a<i;++a)s[a].call(n,r)}function fn(t,e,n,r,i){if(e)t.call(n,r,i);else for(var s=t.length,a=vn(t,s),o=0;o<s;++o)a[o].call(n,r,i)}function dn(t,e,n,r,i,s){if(e)t.call(n,r,i,s);else for(var a=t.length,o=vn(t,a),u=0;u<a;++u)o[u].call(n,r,i,s)}function pn(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,s=vn(t,i),a=0;a<i;++a)s[a].apply(n,r)}function _n(t,e,n,r){var i,s,a,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]):(s=t._events=new on,t._eventsCount=0),a){if("function"==typeof a?a=s[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=cn(t))&&i>0&&a.length>i){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,o=u,"function"==typeof console.warn?console.warn(o):console.log(o)}}else a=s[e]=n,++t._eventsCount;return t}function gn(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function bn(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function vn(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}on.prototype=Object.create(null),un.EventEmitter=un,un.usingDomains=!1,un.prototype.domain=void 0,un.prototype._events=void 0,un.prototype._maxListeners=void 0,un.defaultMaxListeners=10,un.init=function(){this.domain=null,un.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new on,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},un.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},un.prototype.getMaxListeners=function(){return cn(this)},un.prototype.emit=function(t){var e,n,r,i,s,a,o,u="error"===t;if(a=this._events)u=u&&null==a.error;else if(!u)return!1;if(o=this.domain,u){if(e=arguments[1],!o){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=o,e.domainThrown=!1,o.emit("error",e),!1}if(!(n=a[t]))return!1;var h="function"==typeof n;switch(r=arguments.length){case 1:hn(n,h,this);break;case 2:ln(n,h,this,arguments[1]);break;case 3:fn(n,h,this,arguments[1],arguments[2]);break;case 4:dn(n,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];pn(n,h,this,i)}return!0},un.prototype.addListener=function(t,e){return _n(this,t,e,!1)},un.prototype.on=un.prototype.addListener,un.prototype.prependListener=function(t,e){return _n(this,t,e,!0)},un.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,gn(this,t,e)),this},un.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,gn(this,t,e)),this},un.prototype.removeListener=function(t,e){var n,r,i,s,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new on:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,s=n.length;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){a=n[s].listener,i=s;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new on,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i);r.removeListener&&this.emit("removeListener",t,a||e)}return this},un.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new on,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new on:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),s=0;s<i.length;++s)"removeListener"!==(r=i[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new on,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},un.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},un.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):bn.call(t,e)},un.prototype.listenerCount=bn,un.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var mn="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},yn=/%[sdj%]/g;function wn(t){if(!On(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(xn(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(yn,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),a=r[n];n<i;a=r[++n])Pn(a)||!Fn(a)?s+=" "+a:s+=" "+xn(a);return s}function An(t,e){if(Dn(l.process))return function(){return An(t,e).apply(this,arguments)};if(!0===L.noDeprecation)return t;var n=!1;return function(){if(!n){if(L.throwDeprecation)throw new Error(e);L.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var kn,En={};function xn(t,e){var n={seen:[],stylize:Cn};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Bn(e)?n.showHidden=e:e&&zn(n,e),Dn(n.showHidden)&&(n.showHidden=!1),Dn(n.depth)&&(n.depth=2),Dn(n.colors)&&(n.colors=!1),Dn(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Tn),Sn(n,t,n.depth)}function Tn(t,e){var n=xn.styles[e];return n?"["+xn.colors[n][0]+"m"+t+"["+xn.colors[n][1]+"m":t}function Cn(t,e){return t}function Sn(t,e,n){if(t.customInspect&&e&&jn(e.inspect)&&e.inspect!==xn&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return On(r)||(r=Sn(t,r,n)),r}var i=function(t,e){if(Dn(e))return t.stylize("undefined","undefined");if(On(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(r=e,"number"==typeof r)return t.stylize(""+e,"number");var r;if(Bn(e))return t.stylize(""+e,"boolean");if(Pn(e))return t.stylize("null","null")}(t,e);if(i)return i;var s=Object.keys(e),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),Nn(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Rn(e);if(0===s.length){if(jn(e)){var o=e.name?": "+e.name:"";return t.stylize("[Function"+o+"]","special")}if(Mn(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Ln(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Nn(e))return Rn(e)}var u,c,h="",l=!1,f=["{","}"];(u=e,Array.isArray(u)&&(l=!0,f=["[","]"]),jn(e))&&(h=" [Function"+(e.name?": "+e.name:"")+"]");return Mn(e)&&(h=" "+RegExp.prototype.toString.call(e)),Ln(e)&&(h=" "+Date.prototype.toUTCString.call(e)),Nn(e)&&(h=" "+Rn(e)),0!==s.length||l&&0!=e.length?n<0?Mn(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=l?function(t,e,n,r,i){for(var s=[],a=0,o=e.length;a<o;++a)$n(e,String(a))?s.push(In(t,e,n,r,String(a),!0)):s.push("");return i.forEach((function(i){i.match(/^\d+$/)||s.push(In(t,e,n,r,i,!0))})),s}(t,e,n,a,s):s.map((function(r){return In(t,e,n,a,r,l)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,h,f)):f[0]+h+f[1]}function Rn(t){return"["+Error.prototype.toString.call(t)+"]"}function In(t,e,n,r,i,s){var a,o,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?o=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(o=t.stylize("[Setter]","special")),$n(r,i)||(a="["+i+"]"),o||(t.seen.indexOf(u.value)<0?(o=Pn(n)?Sn(t,u.value,null):Sn(t,u.value,n-1)).indexOf("\n")>-1&&(o=s?o.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+o.split("\n").map((function(t){return"   "+t})).join("\n")):o=t.stylize("[Circular]","special")),Dn(a)){if(s&&i.match(/^\d+$/))return o;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+o}function Bn(t){return"boolean"==typeof t}function Pn(t){return null===t}function On(t){return"string"==typeof t}function Dn(t){return void 0===t}function Mn(t){return Fn(t)&&"[object RegExp]"===Un(t)}function Fn(t){return"object"==typeof t&&null!==t}function Ln(t){return Fn(t)&&"[object Date]"===Un(t)}function Nn(t){return Fn(t)&&("[object Error]"===Un(t)||t instanceof Error)}function jn(t){return"function"==typeof t}function Un(t){return Object.prototype.toString.call(t)}function zn(t,e){if(!e||!Fn(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function $n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Hn(){this.head=null,this.tail=null,this.length=0}xn.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},xn.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Hn.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},Hn.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},Hn.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},Hn.prototype.clear=function(){this.head=this.tail=null,this.length=0},Hn.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},Hn.prototype.concat=function(t){if(0===this.length)return we.alloc(0);if(1===this.length)return this.head.data;for(var e=we.allocUnsafe(t>>>0),n=this.head,r=0;n;)n.data.copy(e,r),r+=n.data.length,n=n.next;return e};var Wn=U((function(t,e){var n=an.Buffer,r=n.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var i=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!r(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=s)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};function s(t){return t.toString(this.encoding)}function a(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function o(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}i.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;r=(e+=t.toString(this.encoding,0,r)).length-1;if((i=e.charCodeAt(r))>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),e.substring(0,r)}return e},i.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},i.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}})).StringDecoder;qn.ReadableState=Vn;var Gn=function(t){if(Dn(kn)&&(kn=L.env.NODE_DEBUG||""),t=t.toUpperCase(),!En[t])if(new RegExp("\\b"+t+"\\b","i").test(kn)){En[t]=function(){var e=wn.apply(null,arguments);console.error("%s %d: %s",t,0,e)}}else En[t]=function(){};return En[t]}("stream");function Vn(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof yr&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new Hn,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new Wn(t.encoding),this.encoding=t.encoding)}function qn(t){if(!(this instanceof qn))return new qn(t);this._readableState=new Vn(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),un.call(this)}function Xn(t,e,n,r,i){var s=function(t,e){var n=null;rn(e)||"string"==typeof e||null==e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(e,n);if(s)t.emit("error",s);else if(null===n)e.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,Jn(t)}(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var o=new Error("stream.unshift() after end event");t.emit("error",o)}else{var u;!e.decoder||i||r||(n=e.decoder.write(n),u=!e.objectMode&&0===n.length),i||(e.reading=!1),u||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&Jn(t))),function(t,e){e.readingMore||(e.readingMore=!0,k(Kn,t,e))}(t,e)}else i||(e.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}mn(qn,un),qn.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding)!==n.encoding&&(t=we.from(t,e),e=""),Xn(this,n,t,e,!1)},qn.prototype.unshift=function(t){return Xn(this,this._readableState,t,"",!0)},qn.prototype.isPaused=function(){return!1===this._readableState.flowing},qn.prototype.setEncoding=function(t){return this._readableState.decoder=new Wn(t),this._readableState.encoding=t,this};function Qn(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function Jn(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Gn("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?k(Yn,t):Yn(t))}function Yn(t){Gn("emit readable"),t.emit("readable"),er(t)}function Kn(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Gn("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function Zn(t){Gn("readable nexttick read 0"),t.read(0)}function tr(t,e){e.reading||(Gn("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),er(t),e.flowing&&!e.reading&&t.read(0)}function er(t){var e=t._readableState;for(Gn("flow",e.flowing);e.flowing&&null!==t.read(););}function nr(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(a===s.length?i+=s:i+=s.slice(0,t),0===(t-=a)){a===s.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=we.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var s=r.data,a=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,a),0===(t-=a)){a===s.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(a));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function rr(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,k(ir,e,t))}function ir(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function sr(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function ar(){}function or(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function ur(t,e){Object.defineProperty(this,"buffer",{get:An((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof yr&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?k(i,r):i(r);t._writableState.errorEmitted=!0,t.emit("error",r)}(t,n,r,e,i);else{var s=dr(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||fr(t,n),r?k(lr,t,n,s,i):lr(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new gr(this)}function cr(t){if(!(this instanceof cr||this instanceof yr))return new cr(t);this._writableState=new ur(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),un.call(this)}function hr(t,e,n,r,i,s,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function lr(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),_r(t,e)}function fr(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var a=0;n;)i[a]=n,n=n.next,a+=1;hr(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new gr(e)}else{for(;n;){var o=n.chunk,u=n.encoding,c=n.callback;if(hr(t,e,!1,e.objectMode?1:o.length,o,u,c),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function dr(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function pr(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function _r(t,e){var n=dr(e);return n&&(0===e.pendingcb?(pr(t,e),e.finished=!0,t.emit("finish")):pr(t,e)),n}function gr(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}qn.prototype.read=function(t){Gn("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Gn("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?rr(this):Jn(this),null;if(0===(t=Qn(t,e))&&e.ended)return 0===e.length&&rr(this),null;var r,i=e.needReadable;return Gn("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&Gn("length less than watermark",i=!0),e.ended||e.reading?Gn("reading or ended",i=!1):i&&(Gn("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Qn(n,e))),null===(r=t>0?nr(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&rr(this)),null!==r&&this.emit("data",r),r},qn.prototype._read=function(t){this.emit("error",new Error("not implemented"))},qn.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,Gn("pipe count=%d opts=%j",r.pipesCount,e);var i=!e||!1!==e.end?a:c;function s(t){Gn("onunpipe"),t===n&&c()}function a(){Gn("onend"),t.end()}r.endEmitted?k(i):n.once("end",i),t.on("unpipe",s);var o=function(t){return function(){var e=t._readableState;Gn("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&t.listeners("data").length&&(e.flowing=!0,er(t))}}(n);t.on("drain",o);var u=!1;function c(){Gn("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",o),t.removeListener("error",f),t.removeListener("unpipe",s),n.removeListener("end",a),n.removeListener("end",c),n.removeListener("data",l),u=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||o()}var h=!1;function l(e){Gn("ondata"),h=!1,!1!==t.write(e)||h||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==sr(r.pipes,t))&&!u&&(Gn("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,h=!0),n.pause())}function f(e){var n;Gn("onerror",e),_(),t.removeListener("error",f),0===(n="error",t.listeners(n).length)&&t.emit("error",e)}function d(){t.removeListener("finish",p),_()}function p(){Gn("onfinish"),t.removeListener("close",d),_()}function _(){Gn("unpipe"),n.unpipe(t)}return n.on("data",l),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",f),t.once("close",d),t.once("finish",p),t.emit("pipe",n),r.flowing||(Gn("pipe resume"),n.resume()),t},qn.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var s=sr(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},qn.prototype.on=function(t,e){var n=un.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&Jn(this):k(Zn,this))}return n},qn.prototype.addListener=qn.prototype.on,qn.prototype.resume=function(){var t=this._readableState;return t.flowing||(Gn("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,k(tr,t,e))}(this,t)),this},qn.prototype.pause=function(){return Gn("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Gn("pause"),this._readableState.flowing=!1,this.emit("pause")),this},qn.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;for(var i in t.on("end",(function(){if(Gn("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)})),t.on("data",(function(i){(Gn("wrapped data"),e.decoder&&(i=e.decoder.write(i)),e.objectMode&&null==i)||(e.objectMode||i&&i.length)&&(r.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}(["error","close","destroy","pause","resume"],(function(e){t.on(e,r.emit.bind(r,e))})),r._read=function(e){Gn("wrapped _read",e),n&&(n=!1,t.resume())},r},qn._fromList=nr,cr.WritableState=ur,mn(cr,un),ur.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},cr.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},cr.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return"function"==typeof e&&(n=e,e=null),we.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=ar),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),k(e,n)}(this,n):function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):we.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),k(r,s),i=!1),i}(this,r,t,n)&&(r.pendingcb++,i=function(t,e,n,r,i){n=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=we.from(e,n));return e}(e,n,r),we.isBuffer(n)&&(r="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;a||(e.needDrain=!0);if(e.writing||e.corked){var o=e.lastBufferedRequest;e.lastBufferedRequest=new or(n,r,i),o?o.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else hr(t,e,!1,s,n,r,i);return a}(this,r,t,e,n)),i},cr.prototype.cork=function(){this._writableState.corked++},cr.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||fr(this,t))},cr.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},cr.prototype._write=function(t,e,n){n(new Error("not implemented"))},cr.prototype._writev=null,cr.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,_r(t,e),n&&(e.finished?k(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},mn(yr,qn);for(var br=Object.keys(cr.prototype),vr=0;vr<br.length;vr++){var mr=br[vr];yr.prototype[mr]||(yr.prototype[mr]=cr.prototype[mr])}function yr(t){if(!(this instanceof yr))return new yr(t);qn.call(this,t),cr.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",wr)}function wr(){this.allowHalfOpen||this._writableState.ended||k(Ar,this)}function Ar(t){t.end()}function kr(t){this.afterTransform=function(e,n){return function(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=n&&t.push(n);i(e);var s=t._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&t._read(s.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Er(t){if(!(this instanceof Er))return new Er(t);yr.call(this,t),this._transformState=new kr(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(t){xr(e,t)})):xr(e)}))}function xr(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}function Tr(t){if(!(this instanceof Tr))return new Tr(t);Er.call(this,t)}function Cr(){un.call(this)}mn(Er,yr),Er.prototype.push=function(t,e){return this._transformState.needTransform=!1,yr.prototype.push.call(this,t,e)},Er.prototype._transform=function(t,e,n){throw new Error("Not implemented")},Er.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Er.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},mn(Tr,Er),Tr.prototype._transform=function(t,e,n){n(null,t)},mn(Cr,un),Cr.Readable=qn,Cr.Writable=cr,Cr.Duplex=yr,Cr.Transform=Er,Cr.PassThrough=Tr,Cr.Stream=Cr,Cr.prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",o));var s=!1;function a(){s||(s=!0,t.end())}function o(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(c(),0===un.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",o),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",u),t.on("error",u),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};var Sr,Rr,Ir=U((function(t,e){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer=!0,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(n),e.blob=0===r.getBlob("application/zip").size}catch(t){e.blob=!1}}}try{e.nodestream=!!Cr.Readable}catch(t){e.nodestream=!1}})),Br=(Ir.base64,Ir.array,Ir.string,Ir.arraybuffer,Ir.nodebuffer,Ir.uint8array,Ir.blob,Ir.nodestream,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Pr=function(t){for(var e,n,r,i,s,a,o,u=[],c=0,h=t.length,l=h,f="string"!==oi.getTypeOf(t);c<t.length;)l=h-c,f?(e=t[c++],n=c<h?t[c++]:0,r=c<h?t[c++]:0):(e=t.charCodeAt(c++),n=c<h?t.charCodeAt(c++):0,r=c<h?t.charCodeAt(c++):0),i=e>>2,s=(3&e)<<4|n>>4,a=l>1?(15&n)<<2|r>>6:64,o=l>2?63&r:64,u.push(Br.charAt(i)+Br.charAt(s)+Br.charAt(a)+Br.charAt(o));return u.join("")},Or=function(t){var e,n,r,i,s,a,o=0,u=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var c,h=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===Br.charAt(64)&&h--,t.charAt(t.length-2)===Br.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(c=Ir.uint8array?new Uint8Array(0|h):new Array(0|h);o<t.length;)e=Br.indexOf(t.charAt(o++))<<2|(i=Br.indexOf(t.charAt(o++)))>>4,n=(15&i)<<4|(s=Br.indexOf(t.charAt(o++)))>>2,r=(3&s)<<6|(a=Br.indexOf(t.charAt(o++))),c[u++]=e,64!==s&&(c[u++]=n),64!==a&&(c[u++]=r);return c},Dr=!0,Mr=function(t,e){if(we.from&&we.from!==Uint8Array.from)return we.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new we(t,e)},Fr=function(t){if(we.alloc)return we.alloc(t);var e=new we(t);return e.fill(0),e},Lr=function(t){return rn(t)},Nr=function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume},jr="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)},Ur=N.MutationObserver||N.WebKitMutationObserver;if(Ur){var zr=0,$r=new Ur(Vr),Hr=N.document.createTextNode("");$r.observe(Hr,{characterData:!0}),Sr=function(){Hr.data=zr=++zr%2}}else if(N.setImmediate||void 0===N.MessageChannel)Sr="document"in N&&"onreadystatechange"in N.document.createElement("script")?function(){var t=N.document.createElement("script");t.onreadystatechange=function(){Vr(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},N.document.documentElement.appendChild(t)}:function(){setTimeout(Vr,0)};else{var Wr=new N.MessageChannel;Wr.port1.onmessage=Vr,Sr=function(){Wr.port2.postMessage(0)}}var Gr=[];function Vr(){var t,e;Rr=!0;for(var n=Gr.length;n;){for(e=Gr,Gr=[],t=-1;++t<n;)e[t]();n=Gr.length}Rr=!1}var qr=function(t){1!==Gr.push(t)||Rr||Sr()};function Xr(){}var Qr={},Jr=["REJECTED"],Yr=["FULFILLED"],Kr=["PENDING"],Zr=ti;function ti(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=Kr,this.queue=[],this.outcome=void 0,t!==Xr&&ii(this,t)}function ei(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function ni(t,e,n){qr((function(){var r;try{r=e(n)}catch(e){return Qr.reject(t,e)}r===t?Qr.reject(t,new TypeError("Cannot resolve promise with itself")):Qr.resolve(t,r)}))}function ri(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function ii(t,e){var n=!1;function r(e){n||(n=!0,Qr.reject(t,e))}function i(e){n||(n=!0,Qr.resolve(t,e))}var s=si((function(){e(i,r)}));"error"===s.status&&r(s.value)}function si(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}ti.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},ti.prototype.catch=function(t){return this.then(null,t)},ti.prototype.then=function(t,e){if("function"!=typeof t&&this.state===Yr||"function"!=typeof e&&this.state===Jr)return this;var n=new this.constructor(Xr);this.state!==Kr?ni(n,this.state===Yr?t:e,this.outcome):this.queue.push(new ei(n,t,e));return n},ei.prototype.callFulfilled=function(t){Qr.resolve(this.promise,t)},ei.prototype.otherCallFulfilled=function(t){ni(this.promise,this.onFulfilled,t)},ei.prototype.callRejected=function(t){Qr.reject(this.promise,t)},ei.prototype.otherCallRejected=function(t){ni(this.promise,this.onRejected,t)},Qr.resolve=function(t,e){var n=si(ri,e);if("error"===n.status)return Qr.reject(t,n.value);var r=n.value;if(r)ii(t,r);else{t.state=Yr,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t},Qr.reject=function(t,e){t.state=Jr,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},ti.resolve=function(t){if(t instanceof this)return t;return Qr.resolve(new this(Xr),t)},ti.reject=function(t){var e=new this(Xr);return Qr.reject(e,t)},ti.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);var i=new Array(n),s=0,a=-1,o=new this(Xr);for(;++a<n;)u(t[a],a);return o;function u(t,a){e.resolve(t).then((function(t){i[a]=t,++s!==n||r||(r=!0,Qr.resolve(o,i))}),(function(t){r||(r=!0,Qr.reject(o,t))}))}},ti.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);var i=-1,s=new this(Xr);for(;++i<n;)a=t[i],e.resolve(a).then((function(t){r||(r=!0,Qr.resolve(s,t))}),(function(t){r||(r=!0,Qr.reject(s,t))}));var a;return s};var ai={Promise:"undefined"!=typeof Promise?Promise:Zr},oi=U((function(t,e){function n(t){return t}function r(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}e.newBlob=function(t,n){e.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(t),r.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var i={stringifyByChunk:function(t,e,n){var r=[],i=0,s=t.length;if(s<=n)return String.fromCharCode.apply(null,t);for(;i<s;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+n,s)))):r.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+n,s)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return Ir.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return Ir.nodebuffer&&1===String.fromCharCode.apply(null,Fr(1)).length}catch(t){return!1}}()}};function s(t){var n=65536,r=e.getTypeOf(t),s=!0;if("uint8array"===r?s=i.applyCanBeUsed.uint8array:"nodebuffer"===r&&(s=i.applyCanBeUsed.nodebuffer),s)for(;n>1;)try{return i.stringifyByChunk(t,r,n)}catch(t){n=Math.floor(n/2)}return i.stringifyByChar(t)}function a(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}e.applyFromCharCode=s;var o={};o.string={string:n,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return o.string.uint8array(t).buffer},uint8array:function(t){return r(t,new Uint8Array(t.length))},nodebuffer:function(t){return r(t,Fr(t.length))}},o.array={string:s,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return Mr(t)}},o.arraybuffer={string:function(t){return s(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return Mr(new Uint8Array(t))}},o.uint8array={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return Mr(t)}},o.nodebuffer={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return o.nodebuffer.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:n},e.transformTo=function(t,n){if(n||(n=""),!t)return n;e.checkSupport(t);var r=e.getTypeOf(n);return o[r][t](n)},e.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":Ir.nodebuffer&&Lr(t)?"nodebuffer":Ir.uint8array&&t instanceof Uint8Array?"uint8array":Ir.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(t){if(!Ir[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},e.delay=function(t,e,n){jr((function(){t.apply(n||null,e||[])}))},e.inherits=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n},e.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},e.prepareContent=function(t,n,i,s,a){return ai.Promise.resolve(n).then((function(t){return Ir.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new ai.Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)})):t})).then((function(n){var o,u=e.getTypeOf(n);return u?("arraybuffer"===u?n=e.transformTo("uint8array",n):"string"===u&&(a?n=Or(n):i&&!0!==s&&(n=r(o=n,Ir.uint8array?new Uint8Array(o.length):new Array(o.length)))),n):ai.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}}));oi.newBlob,oi.applyFromCharCode,oi.transformTo,oi.getTypeOf,oi.checkSupport,oi.MAX_VALUE_16BITS,oi.MAX_VALUE_32BITS,oi.pretty,oi.delay,oi.inherits,oi.extend,oi.prepareContent;function ui(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}ui.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}};var ci=ui,hi=U((function(t,e){for(var n=new Array(256),r=0;r<256;r++)n[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;n[254]=n[254]=1;function i(){ci.call(this,"utf-8 decode"),this.leftOver=null}function s(){ci.call(this,"utf-8 encode")}e.utf8encode=function(t){return Ir.nodebuffer?Mr(t,"utf-8"):function(t){var e,n,r,i,s,a=t.length,o=0;for(i=0;i<a;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=Ir.uint8array?new Uint8Array(o):new Array(o),s=0,i=0;s<o;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e}(t)},e.utf8decode=function(t){return Ir.nodebuffer?oi.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,i,s,a=t.length,o=new Array(2*a);for(r=0,e=0;e<a;)if((i=t[e++])<128)o[r++]=i;else if((s=n[i])>4)o[r++]=65533,e+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&e<a;)i=i<<6|63&t[e++],s--;s>1?o[r++]=65533:i<65536?o[r++]=i:(i-=65536,o[r++]=55296|i>>10&1023,o[r++]=56320|1023&i)}return o.length!==r&&(o.subarray?o=o.subarray(0,r):o.length=r),oi.applyFromCharCode(o)}(t=oi.transformTo(Ir.uint8array?"uint8array":"array",t))},oi.inherits(i,ci),i.prototype.processChunk=function(t){var r=oi.transformTo(Ir.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(Ir.uint8array){var i=r;(r=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),r.set(i,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var s=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+n[t[r]]>e?r:e}(r),a=r;s!==r.length&&(Ir.uint8array?(a=r.subarray(0,s),this.leftOver=r.subarray(s,r.length)):(a=r.slice(0,s),this.leftOver=r.slice(s,r.length))),this.push({data:e.utf8decode(a),meta:t.meta})},i.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=i,oi.inherits(s,ci),s.prototype.processChunk=function(t){this.push({data:e.utf8encode(t.data),meta:t.meta})},e.Utf8EncodeWorker=s}));hi.utf8encode,hi.utf8decode,hi.Utf8DecodeWorker,hi.Utf8EncodeWorker;function li(t){ci.call(this,"ConvertWorker to "+t),this.destType=t}oi.inherits(li,ci),li.prototype.processChunk=function(t){this.push({data:oi.transformTo(this.destType,t.data),meta:t.meta})};var fi=li,di=Cr.Readable;function pi(t,e,n){di.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}oi.inherits(pi,di),pi.prototype._read=function(){this._helper.resume()};var _i=pi,gi=null;if(Ir.nodestream)try{gi=_i}catch(t){}function bi(t,e){return new ai.Promise((function(n,r){var i=[],s=t._internalType,a=t._outputType,o=t._mimeType;t.on("data",(function(t,n){i.push(t),e&&e(n)})).on("error",(function(t){i=[],r(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return oi.newBlob(oi.transformTo("arraybuffer",e),n);case"base64":return Pr(e);default:return oi.transformTo(t,e)}}(a,function(t,e){var n,r=0,i=null,s=0;for(n=0;n<e.length;n++)s+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(s),n=0;n<e.length;n++)i.set(e[n],r),r+=e[n].length;return i;case"nodebuffer":return we.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(s,i),o);n(t)}catch(t){r(t)}i=[]})).resume()}))}function vi(t,e,n){var r=e;switch(e){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=e,this._mimeType=n,oi.checkSupport(r),this._worker=t.pipe(new fi(r)),t.lock()}catch(t){this._worker=new ci("error"),this._worker.error(t)}}vi.prototype={accumulate:function(t){return bi(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){oi.delay(e,arguments,n)})),this},resume:function(){return oi.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(oi.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new gi(this,{objectMode:"nodebuffer"!==this._outputType},t)}};var mi=vi,yi={base64:!1,binary:!1,dir:!1,createFolders:!0,date:null,compression:null,compressionOptions:null,comment:null,unixPermissions:null,dosPermissions:null};function wi(t){ci.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=oi.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}oi.inherits(wi,ci),wi.prototype.cleanUp=function(){ci.prototype.cleanUp.call(this),this.data=null},wi.prototype.resume=function(){return!!ci.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,oi.delay(this._tickAndRepeat,[],this)),!0)},wi.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(oi.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},wi.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})};var Ai=wi;function ki(t){ci.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}oi.inherits(ki,ci),ki.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}ci.prototype.processChunk.call(this,t)};var Ei=ki;var xi=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();var Ti=function(t,e){return void 0!==t&&t.length?"string"!==oi.getTypeOf(t)?function(t,e,n,r){var i=xi,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,n,r){var i=xi,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^i[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0};function Ci(){ci.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}oi.inherits(Ci,ci),Ci.prototype.processChunk=function(t){this.streamInfo.crc32=Ti(t.data,this.streamInfo.crc32||0),this.push(t)};var Si=Ci;function Ri(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}Ri.prototype={getContentWorker:function(){var t=new Ai(ai.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Ei("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new Ai(ai.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},Ri.createWorkerFrom=function(t,e,n){return t.pipe(new Si).pipe(new Ei("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new Ei("compressedSize")).withStreamInfo("compression",e)};var Ii=Ri,Bi=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};Bi.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(e=e.pipe(new hi.Utf8EncodeWorker)),!i&&r&&(e=e.pipe(new hi.Utf8DecodeWorker))}catch(t){(e=new ci("error")).error(t)}return new mi(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof Ii&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new hi.Utf8EncodeWorker)),Ii.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof Ii?this._data.getContentWorker():this._data instanceof ci?this._data:new Ai(this._data)}};for(var Pi=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Oi=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Di=0;Di<Pi.length;Di++)Bi.prototype[Pi[Di]]=Oi;var Mi=Bi,Fi=U((function(t,e){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var s=0;s<r;s++)t[i+s]=e[n+s]},flattenChunks:function(t){var e,n,r,i,s,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)s=t[e],a.set(s,i),i+=s.length;return a}},s={arraySet:function(t,e,n,r,i){for(var s=0;s<r;s++)t[i+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)}));Fi.assign,Fi.shrinkBuf,Fi.setTyped,Fi.Buf8,Fi.Buf16,Fi.Buf32;function Li(t){for(var e=t.length;--e>=0;)t[e]=0}var Ni=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ji=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ui=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],zi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$i=new Array(576);Li($i);var Hi=new Array(60);Li(Hi);var Wi=new Array(512);Li(Wi);var Gi=new Array(256);Li(Gi);var Vi=new Array(29);Li(Vi);var qi,Xi,Qi,Ji=new Array(30);function Yi(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function Ki(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function Zi(t){return t<256?Wi[t]:Wi[256+(t>>>7)]}function ts(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function es(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,ts(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function ns(t,e,n){es(t,n[2*e],n[2*e+1])}function rs(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function is(t,e,n){var r,i,s=new Array(16),a=0;for(r=1;r<=15;r++)s[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var o=t[2*i+1];0!==o&&(t[2*i]=rs(s[o]++,o))}}function ss(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function as(t){t.bi_valid>8?ts(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function os(t,e,n,r){var i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]}function us(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&os(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!os(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function cs(t,e,n){var r,i,s,a,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?ns(t,i,e):(ns(t,(s=Gi[i])+256+1,e),0!==(a=Ni[s])&&es(t,i-=Vi[s],a),ns(t,s=Zi(--r),n),0!==(a=ji[s])&&es(t,r-=Ji[s],a))}while(o<t.last_lit);ns(t,256,e)}function hs(t,e){var n,r,i,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==s[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):s[2*n+1]=0;for(;t.heap_len<2;)s[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=a[2*i+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)us(t,s,n);i=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],us(t,s,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,s[2*i]=s[2*n]+s[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,s[2*n+1]=s[2*r+1]=i,t.heap[1]=i++,us(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,s,a,o,u=e.dyn_tree,c=e.max_code,h=e.stat_desc.static_tree,l=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,_=0;for(s=0;s<=15;s++)t.bl_count[s]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(s=u[2*u[2*(r=t.heap[n])+1]+1]+1)>p&&(s=p,_++),u[2*r+1]=s,r>c||(t.bl_count[s]++,a=0,r>=d&&(a=f[r-d]),o=u[2*r],t.opt_len+=o*(s+a),l&&(t.static_len+=o*(h[2*r+1]+a)));if(0!==_){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,_-=2}while(_>0);for(s=p;0!==s;s--)for(r=t.bl_count[s];0!==r;)(i=t.heap[--n])>c||(u[2*i+1]!==s&&(t.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),r--)}}(t,e),is(s,c,t.bl_count)}function ls(t,e,n){var r,i,s=-1,a=e[1],o=0,u=7,c=4;for(0===a&&(u=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++o<u&&i===a||(o<c?t.bl_tree[2*i]+=o:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4))}function fs(t,e,n){var r,i,s=-1,a=e[1],o=0,u=7,c=4;for(0===a&&(u=138,c=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++o<u&&i===a)){if(o<c)do{ns(t,i,t.bl_tree)}while(0!=--o);else 0!==i?(i!==s&&(ns(t,i,t.bl_tree),o--),ns(t,16,t.bl_tree),es(t,o-3,2)):o<=10?(ns(t,17,t.bl_tree),es(t,o-3,3)):(ns(t,18,t.bl_tree),es(t,o-11,7));o=0,s=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4)}}Li(Ji);var ds=!1;function ps(t,e,n,r){es(t,0+(r?1:0),3),function(t,e,n,r){as(t),r&&(ts(t,n),ts(t,~n)),Fi.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}var _s={_tr_init:function(t){ds||(!function(){var t,e,n,r,i,s=new Array(16);for(n=0,r=0;r<28;r++)for(Vi[r]=n,t=0;t<1<<Ni[r];t++)Gi[n++]=r;for(Gi[n-1]=r,i=0,r=0;r<16;r++)for(Ji[r]=i,t=0;t<1<<ji[r];t++)Wi[i++]=r;for(i>>=7;r<30;r++)for(Ji[r]=i<<7,t=0;t<1<<ji[r]-7;t++)Wi[256+i++]=r;for(e=0;e<=15;e++)s[e]=0;for(t=0;t<=143;)$i[2*t+1]=8,t++,s[8]++;for(;t<=255;)$i[2*t+1]=9,t++,s[9]++;for(;t<=279;)$i[2*t+1]=7,t++,s[7]++;for(;t<=287;)$i[2*t+1]=8,t++,s[8]++;for(is($i,287,s),t=0;t<30;t++)Hi[2*t+1]=5,Hi[2*t]=rs(t,5);qi=new Yi($i,Ni,257,286,15),Xi=new Yi(Hi,ji,0,30,15),Qi=new Yi(new Array(0),Ui,0,19,7)}(),ds=!0),t.l_desc=new Ki(t.dyn_ltree,qi),t.d_desc=new Ki(t.dyn_dtree,Xi),t.bl_desc=new Ki(t.bl_tree,Qi),t.bi_buf=0,t.bi_valid=0,ss(t)},_tr_stored_block:ps,_tr_flush_block:function(t,e,n,r){var i,s,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),hs(t,t.l_desc),hs(t,t.d_desc),a=function(t){var e;for(ls(t,t.dyn_ltree,t.l_desc.max_code),ls(t,t.dyn_dtree,t.d_desc.max_code),hs(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*zi[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?ps(t,e,n,r):4===t.strategy||s===i?(es(t,2+(r?1:0),3),cs(t,$i,Hi)):(es(t,4+(r?1:0),3),function(t,e,n,r){var i;for(es(t,e-257,5),es(t,n-1,5),es(t,r-4,4),i=0;i<r;i++)es(t,t.bl_tree[2*zi[i]+1],3);fs(t,t.dyn_ltree,e-1),fs(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),cs(t,t.dyn_ltree,t.dyn_dtree)),ss(t),r&&as(t)},_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(Gi[n]+256+1)]++,t.dyn_dtree[2*Zi(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){es(t,2,3),ns(t,256,$i),function(t){16===t.bi_valid?(ts(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}};var gs=function(t,e,n,r){for(var i=65535&t|0,s=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{s=s+(i=i+e[r++]|0)|0}while(--a);i%=65521,s%=65521}return i|s<<16|0};var bs=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();var vs,ms=function(t,e,n,r){var i=bs,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^i[255&(t^e[a])];return-1^t},ys={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ws(t,e){return t.msg=ys[e],e}function As(t){return(t<<1)-(t>4?9:0)}function ks(t){for(var e=t.length;--e>=0;)t[e]=0}function Es(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(Fi.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function xs(t,e){_s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Es(t.strm)}function Ts(t,e){t.pending_buf[t.pending++]=e}function Cs(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function Ss(t,e){var n,r,i=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,c=t.window,h=t.w_mask,l=t.prev,f=t.strstart+258,d=c[s+a-1],p=c[s+a];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(c[(n=e)+a]===p&&c[n+a-1]===d&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<f);if(r=258-(f-s),s=f-258,r>a){if(t.match_start=e,a=r,r>=o)break;d=c[s+a-1],p=c[s+a]}}}while((e=l[e&h])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function Rs(t){var e,n,r,i,s,a,o,u,c,h,l=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=l+(l-262)){Fi.arraySet(t.window,t.window,l,l,0),t.match_start-=l,t.strstart-=l,t.block_start-=l,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=l?r-l:0}while(--n);e=n=l;do{r=t.prev[--e],t.prev[e]=r>=l?r-l:0}while(--n);i+=l}if(0===t.strm.avail_in)break;if(a=t.strm,o=t.window,u=t.strstart+t.lookahead,c=i,h=void 0,(h=a.avail_in)>c&&(h=c),n=0===h?0:(a.avail_in-=h,Fi.arraySet(o,a.input,a.next_in,h,u),1===a.state.wrap?a.adler=gs(a.adler,o,h,u):2===a.state.wrap&&(a.adler=ms(a.adler,o,h,u)),a.next_in+=h,a.total_in+=h,h),t.lookahead+=n,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+3-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function Is(t,e){for(var n,r;;){if(t.lookahead<262){if(Rs(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=Ss(t,n)),t.match_length>=3)if(r=_s._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=_s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(xs(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(xs(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xs(t,!1),0===t.strm.avail_out)?1:2}function Bs(t,e){for(var n,r,i;;){if(t.lookahead<262){if(Rs(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=Ss(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=_s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(xs(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=_s._tr_tally(t,0,t.window[t.strstart-1]))&&xs(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=_s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(xs(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xs(t,!1),0===t.strm.avail_out)?1:2}function Ps(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function Os(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Fi.Buf16(1146),this.dyn_dtree=new Fi.Buf16(122),this.bl_tree=new Fi.Buf16(78),ks(this.dyn_ltree),ks(this.dyn_dtree),ks(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Fi.Buf16(16),this.heap=new Fi.Buf16(573),ks(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Fi.Buf16(573),ks(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ds(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,_s._tr_init(e),0):ws(t,-2)}function Ms(t){var e,n=Ds(t);return 0===n&&((e=t.state).window_size=2*e.w_size,ks(e.head),e.max_lazy_match=vs[e.level].max_lazy,e.good_match=vs[e.level].good_length,e.nice_match=vs[e.level].nice_length,e.max_chain_length=vs[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function Fs(t,e,n,r,i,s){if(!t)return-2;var a=1;if(-1===e&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||8!==n||r<8||r>15||e<0||e>9||s<0||s>4)return ws(t,-2);8===r&&(r=9);var o=new Os;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Fi.Buf8(2*o.w_size),o.head=new Fi.Buf16(o.hash_size),o.prev=new Fi.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Fi.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=n,Ms(t)}vs=[new Ps(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Rs(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,xs(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(xs(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(xs(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(xs(t,!1),t.strm.avail_out),1)})),new Ps(4,4,8,4,Is),new Ps(4,5,16,8,Is),new Ps(4,6,32,32,Is),new Ps(4,4,16,16,Bs),new Ps(8,16,32,32,Bs),new Ps(8,16,128,128,Bs),new Ps(8,32,128,256,Bs),new Ps(32,128,258,1024,Bs),new Ps(32,258,258,4096,Bs)];var Ls={deflateInit:function(t,e){return Fs(t,e,8,15,8,0)},deflateInit2:Fs,deflateReset:Ms,deflateResetKeep:Ds,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},deflate:function(t,e){var n,r,i,s;if(!t||!t.state||e>5||e<0)return t?ws(t,-2):-2;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return ws(t,0===t.avail_out?-5:-2);if(r.strm=t,n=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,Ts(r,31),Ts(r,139),Ts(r,8),r.gzhead?(Ts(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ts(r,255&r.gzhead.time),Ts(r,r.gzhead.time>>8&255),Ts(r,r.gzhead.time>>16&255),Ts(r,r.gzhead.time>>24&255),Ts(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Ts(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Ts(r,255&r.gzhead.extra.length),Ts(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=ms(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Ts(r,0),Ts(r,0),Ts(r,0),Ts(r,0),Ts(r,0),Ts(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Ts(r,3),r.status=113);else{var a=8+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=113,Cs(r,a),0!==r.strstart&&(Cs(r,t.adler>>>16),Cs(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(t.adler=ms(t.adler,r.pending_buf,r.pending-i,i)),Es(t),i=r.pending,r.pending!==r.pending_buf_size));)Ts(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=ms(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=ms(t.adler,r.pending_buf,r.pending-i,i)),Es(t),i=r.pending,r.pending===r.pending_buf_size)){s=1;break}s=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Ts(r,s)}while(0!==s);r.gzhead.hcrc&&r.pending>i&&(t.adler=ms(t.adler,r.pending_buf,r.pending-i,i)),0===s&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=ms(t.adler,r.pending_buf,r.pending-i,i)),Es(t),i=r.pending,r.pending===r.pending_buf_size)){s=1;break}s=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Ts(r,s)}while(0!==s);r.gzhead.hcrc&&r.pending>i&&(t.adler=ms(t.adler,r.pending_buf,r.pending-i,i)),0===s&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Es(t),r.pending+2<=r.pending_buf_size&&(Ts(r,255&t.adler),Ts(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(Es(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&As(e)<=As(n)&&4!==e)return ws(t,-5);if(666===r.status&&0!==t.avail_in)return ws(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var o=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(Rs(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=_s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(xs(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(xs(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xs(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var n,r,i,s,a=t.window;;){if(t.lookahead<=258){if(Rs(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){s=t.strstart+258;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);t.match_length=258-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=_s._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=_s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(xs(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(xs(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xs(t,!1),0===t.strm.avail_out)?1:2}(r,e):vs[r.level].func(r,e);if(3!==o&&4!==o||(r.status=666),1===o||3===o)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===o&&(1===e?_s._tr_align(r):5!==e&&(_s._tr_stored_block(r,0,0,!1),3===e&&(ks(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Es(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(Ts(r,255&t.adler),Ts(r,t.adler>>8&255),Ts(r,t.adler>>16&255),Ts(r,t.adler>>24&255),Ts(r,255&t.total_in),Ts(r,t.total_in>>8&255),Ts(r,t.total_in>>16&255),Ts(r,t.total_in>>24&255)):(Cs(r,t.adler>>>16),Cs(r,65535&t.adler)),Es(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},deflateEnd:function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?ws(t,-2):(t.state=null,113===e?ws(t,-3):0):-2},deflateSetDictionary:function(t,e){var n,r,i,s,a,o,u,c,h=e.length;if(!t||!t.state)return-2;if(2===(s=(n=t.state).wrap)||1===s&&42!==n.status||n.lookahead)return-2;for(1===s&&(t.adler=gs(t.adler,e,h,0)),n.wrap=0,h>=n.w_size&&(0===s&&(ks(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new Fi.Buf8(n.w_size),Fi.arraySet(c,e,h-n.w_size,n.w_size,0),e=c,h=n.w_size),a=t.avail_in,o=t.next_in,u=t.input,t.avail_in=h,t.next_in=0,t.input=e,Rs(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=2,Rs(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=o,t.input=u,t.avail_in=a,n.wrap=s,0},deflateInfo:"pako deflate (from Nodeca project)"},Ns=!0,js=!0;try{String.fromCharCode.apply(null,[0])}catch(t){Ns=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){js=!1}for(var Us=new Fi.Buf8(256),zs=0;zs<256;zs++)Us[zs]=zs>=252?6:zs>=248?5:zs>=240?4:zs>=224?3:zs>=192?2:1;Us[254]=Us[254]=1;function $s(t,e){if(e<65534&&(t.subarray&&js||!t.subarray&&Ns))return String.fromCharCode.apply(null,Fi.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}var Hs=function(t){var e,n,r,i,s,a=t.length,o=0;for(i=0;i<a;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Fi.Buf8(o),s=0,i=0;s<o;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},Ws=function(t){return $s(t,t.length)},Gs=function(t){for(var e=new Fi.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},Vs=function(t,e){var n,r,i,s,a=e||t.length,o=new Array(2*a);for(r=0,n=0;n<a;)if((i=t[n++])<128)o[r++]=i;else if((s=Us[i])>4)o[r++]=65533,n+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&n<a;)i=i<<6|63&t[n++],s--;s>1?o[r++]=65533:i<65536?o[r++]=i:(i-=65536,o[r++]=55296|i>>10&1023,o[r++]=56320|1023&i)}return $s(o,r)},qs=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+Us[t[n]]>e?n:e};var Xs=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Qs=Object.prototype.toString;function Js(t){if(!(this instanceof Js))return new Js(t);this.options=Fi.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xs,this.strm.avail_out=0;var n=Ls.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(ys[n]);if(e.header&&Ls.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?Hs(e.dictionary):"[object ArrayBuffer]"===Qs.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=Ls.deflateSetDictionary(this.strm,r)))throw new Error(ys[n]);this._dict_set=!0}}function Ys(t,e){var n=new Js(e);if(n.push(t,!0),n.err)throw n.msg||ys[n.err];return n.result}Js.prototype.push=function(t,e){var n,r,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=Hs(t):"[object ArrayBuffer]"===Qs.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new Fi.Buf8(s),i.next_out=0,i.avail_out=s),1!==(n=Ls.deflate(i,r))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(Ws(Fi.shrinkBuf(i.output,i.next_out))):this.onData(Fi.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=Ls.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),i.avail_out=0,!0)},Js.prototype.onData=function(t){this.chunks.push(t)},Js.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Fi.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Ks={Deflate:Js,deflate:Ys,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Ys(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Ys(t,e)}},Zs=function(t,e){var n,r,i,s,a,o,u,c,h,l,f,d,p,_,g,b,v,m,y,w,A,k,E,x,T;n=t.state,r=t.next_in,x=t.input,i=r+(t.avail_in-5),s=t.next_out,T=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),u=n.dmax,c=n.wsize,h=n.whave,l=n.wnext,f=n.window,d=n.hold,p=n.bits,_=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{p<15&&(d+=x[r++]<<p,p+=8,d+=x[r++]<<p,p+=8),m=_[d&b];e:for(;;){if(d>>>=y=m>>>24,p-=y,0===(y=m>>>16&255))T[s++]=65535&m;else{if(!(16&y)){if(0==(64&y)){m=_[(65535&m)+(d&(1<<y)-1)];continue e}if(32&y){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&m,(y&=15)&&(p<y&&(d+=x[r++]<<p,p+=8),w+=d&(1<<y)-1,d>>>=y,p-=y),p<15&&(d+=x[r++]<<p,p+=8,d+=x[r++]<<p,p+=8),m=g[d&v];n:for(;;){if(d>>>=y=m>>>24,p-=y,!(16&(y=m>>>16&255))){if(0==(64&y)){m=g[(65535&m)+(d&(1<<y)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(A=65535&m,p<(y&=15)&&(d+=x[r++]<<p,(p+=8)<y&&(d+=x[r++]<<p,p+=8)),(A+=d&(1<<y)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=y,p-=y,A>(y=s-a)){if((y=A-y)>h&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=0,E=f,0===l){if(k+=c-y,y<w){w-=y;do{T[s++]=f[k++]}while(--y);k=s-A,E=T}}else if(l<y){if(k+=c+l-y,(y-=l)<w){w-=y;do{T[s++]=f[k++]}while(--y);if(k=0,l<w){w-=y=l;do{T[s++]=f[k++]}while(--y);k=s-A,E=T}}}else if(k+=l-y,y<w){w-=y;do{T[s++]=f[k++]}while(--y);k=s-A,E=T}for(;w>2;)T[s++]=E[k++],T[s++]=E[k++],T[s++]=E[k++],w-=3;w&&(T[s++]=E[k++],w>1&&(T[s++]=E[k++]))}else{k=s-A;do{T[s++]=T[k++],T[s++]=T[k++],T[s++]=T[k++],w-=3}while(w>2);w&&(T[s++]=T[k++],w>1&&(T[s++]=T[k++]))}break}}break}}while(r<i&&s<o);r-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=s<o?o-s+257:257-(s-o),n.hold=d,n.bits=p},ta=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ea=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],na=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ra=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],ia=function(t,e,n,r,i,s,a,o){var u,c,h,l,f,d,p,_,g,b=o.bits,v=0,m=0,y=0,w=0,A=0,k=0,E=0,x=0,T=0,C=0,S=null,R=0,I=new Fi.Buf16(16),B=new Fi.Buf16(16),P=null,O=0;for(v=0;v<=15;v++)I[v]=0;for(m=0;m<r;m++)I[e[n+m]]++;for(A=b,w=15;w>=1&&0===I[w];w--);if(A>w&&(A=w),0===w)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(y=1;y<w&&0===I[y];y++);for(A<y&&(A=y),x=1,v=1;v<=15;v++)if(x<<=1,(x-=I[v])<0)return-1;if(x>0&&(0===t||1!==w))return-1;for(B[1]=0,v=1;v<15;v++)B[v+1]=B[v]+I[v];for(m=0;m<r;m++)0!==e[n+m]&&(a[B[e[n+m]]++]=m);if(0===t?(S=P=a,d=19):1===t?(S=ta,R-=257,P=ea,O-=257,d=256):(S=na,P=ra,d=-1),C=0,m=0,v=y,f=s,k=A,E=0,h=-1,l=(T=1<<A)-1,1===t&&T>852||2===t&&T>592)return 1;for(;;){p=v-E,a[m]<d?(_=0,g=a[m]):a[m]>d?(_=P[O+a[m]],g=S[R+a[m]]):(_=96,g=0),u=1<<v-E,y=c=1<<k;do{i[f+(C>>E)+(c-=u)]=p<<24|_<<16|g|0}while(0!==c);for(u=1<<v-1;C&u;)u>>=1;if(0!==u?(C&=u-1,C+=u):C=0,m++,0==--I[v]){if(v===w)break;v=e[n+a[m]]}if(v>A&&(C&l)!==h){for(0===E&&(E=A),f+=y,x=1<<(k=v-E);k+E<w&&!((x-=I[k+E])<=0);)k++,x<<=1;if(T+=1<<k,1===t&&T>852||2===t&&T>592)return 1;i[h=C&l]=A<<24|k<<16|f-s|0}}return 0!==C&&(i[f+C]=v-E<<24|64<<16|0),o.bits=A,0};function sa(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function aa(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Fi.Buf16(320),this.work=new Fi.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function oa(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Fi.Buf32(852),e.distcode=e.distdyn=new Fi.Buf32(592),e.sane=1,e.back=-1,0):-2}function ua(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,oa(t)):-2}function ca(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,ua(t))):-2}function ha(t,e){var n,r;return t?(r=new aa,t.state=r,r.window=null,0!==(n=ca(t,e))&&(t.state=null),n):-2}var la,fa,da=!0;function pa(t){if(da){var e;for(la=new Fi.Buf32(512),fa=new Fi.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ia(1,t.lens,0,288,la,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ia(2,t.lens,0,32,fa,0,t.work,{bits:5}),da=!1}t.lencode=la,t.lenbits=9,t.distcode=fa,t.distbits=5}function _a(t,e,n,r){var i,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Fi.Buf8(s.wsize)),r>=s.wsize?(Fi.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((i=s.wsize-s.wnext)>r&&(i=r),Fi.arraySet(s.window,e,n-r,i,s.wnext),(r-=i)?(Fi.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}var ga={inflateReset:ua,inflateReset2:ca,inflateResetKeep:oa,inflateInit:function(t){return ha(t,15)},inflateInit2:ha,inflate:function(t,e){var n,r,i,s,a,o,u,c,h,l,f,d,p,_,g,b,v,m,y,w,A,k,E,x,T=0,C=new Fi.Buf8(4),S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(n=t.state).mode&&(n.mode=13),a=t.next_out,i=t.output,u=t.avail_out,s=t.next_in,r=t.input,o=t.avail_in,c=n.hold,h=n.bits,l=o,f=u,k=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;h<16;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(2&n.wrap&&35615===c){n.check=0,C[0]=255&c,C[1]=c>>>8&255,n.check=ms(n.check,C,2,0),c=0,h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&c)){t.msg="unknown compression method",n.mode=30;break}if(h-=4,A=8+(15&(c>>>=4)),0===n.wbits)n.wbits=A;else if(A>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<A,t.adler=n.check=1,n.mode=512&c?10:12,c=0,h=0;break;case 2:for(;h<16;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(n.flags=c,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,n.check=ms(n.check,C,2,0)),c=0,h=0,n.mode=3;case 3:for(;h<32;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.head&&(n.head.time=c),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=ms(n.check,C,4,0)),c=0,h=0,n.mode=4;case 4:for(;h<16;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,n.check=ms(n.check,C,2,0)),c=0,h=0,n.mode=5;case 5:if(1024&n.flags){for(;h<16;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,n.check=ms(n.check,C,2,0)),c=0,h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((d=n.length)>o&&(d=o),d&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Fi.arraySet(n.head.extra,r,s,d,A)),512&n.flags&&(n.check=ms(n.check,r,d,s)),o-=d,s+=d,n.length-=d),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break t;d=0;do{A=r[s+d++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A))}while(A&&d<o);if(512&n.flags&&(n.check=ms(n.check,r,d,s)),o-=d,s+=d,A)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break t;d=0;do{A=r[s+d++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A))}while(A&&d<o);if(512&n.flags&&(n.check=ms(n.check,r,d,s)),o-=d,s+=d,A)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;h<16;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}c=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;h<32;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}t.adler=n.check=sa(c),c=0,h=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=o,n.hold=c,n.bits=h,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){c>>>=7&h,h-=7&h,n.mode=27;break}for(;h<3;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}switch(n.last=1&c,h-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(pa(n),n.mode=20,6===e){c>>>=2,h-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}c>>>=2,h-=2;break;case 14:for(c>>>=7&h,h-=7&h;h<32;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,c=0,h=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(d=n.length){if(d>o&&(d=o),d>u&&(d=u),0===d)break t;Fi.arraySet(i,r,s,d,a),o-=d,s+=d,u-=d,a+=d,n.length-=d;break}n.mode=12;break;case 17:for(;h<14;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(n.nlen=257+(31&c),c>>>=5,h-=5,n.ndist=1+(31&c),c>>>=5,h-=5,n.ncode=4+(15&c),c>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;h<3;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.lens[S[n.have++]]=7&c,c>>>=3,h-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},k=ia(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,k){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;b=(T=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,v=65535&T,!((g=T>>>24)<=h);){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(v<16)c>>>=g,h-=g,n.lens[n.have++]=v;else{if(16===v){for(x=g+2;h<x;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(c>>>=g,h-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}A=n.lens[n.have-1],d=3+(3&c),c>>>=2,h-=2}else if(17===v){for(x=g+3;h<x;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}h-=g,A=0,d=3+(7&(c>>>=g)),c>>>=3,h-=3}else{for(x=g+7;h<x;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}h-=g,A=0,d=11+(127&(c>>>=g)),c>>>=7,h-=7}if(n.have+d>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;d--;)n.lens[n.have++]=A}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,E={bits:n.lenbits},k=ia(1,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,k){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},k=ia(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,k){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(o>=6&&u>=258){t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=o,n.hold=c,n.bits=h,Zs(t,f),a=t.next_out,i=t.output,u=t.avail_out,s=t.next_in,r=t.input,o=t.avail_in,c=n.hold,h=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;b=(T=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,v=65535&T,!((g=T>>>24)<=h);){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(b&&0==(240&b)){for(m=g,y=b,w=v;b=(T=n.lencode[w+((c&(1<<m+y)-1)>>m)])>>>16&255,v=65535&T,!(m+(g=T>>>24)<=h);){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}c>>>=m,h-=m,n.back+=m}if(c>>>=g,h-=g,n.back+=g,n.length=v,0===b){n.mode=26;break}if(32&b){n.back=-1,n.mode=12;break}if(64&b){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&b,n.mode=22;case 22:if(n.extra){for(x=n.extra;h<x;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;b=(T=n.distcode[c&(1<<n.distbits)-1])>>>16&255,v=65535&T,!((g=T>>>24)<=h);){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(0==(240&b)){for(m=g,y=b,w=v;b=(T=n.distcode[w+((c&(1<<m+y)-1)>>m)])>>>16&255,v=65535&T,!(m+(g=T>>>24)<=h);){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}c>>>=m,h-=m,n.back+=m}if(c>>>=g,h-=g,n.back+=g,64&b){t.msg="invalid distance code",n.mode=30;break}n.offset=v,n.extra=15&b,n.mode=24;case 24:if(n.extra){for(x=n.extra;h<x;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===u)break t;if(d=f-u,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),_=n.window}else _=i,p=a-n.offset,d=n.length;d>u&&(d=u),u-=d,n.length-=d;do{i[a++]=_[p++]}while(--d);0===n.length&&(n.mode=21);break;case 26:if(0===u)break t;i[a++]=n.length,u--,n.mode=21;break;case 27:if(n.wrap){for(;h<32;){if(0===o)break t;o--,c|=r[s++]<<h,h+=8}if(f-=u,t.total_out+=f,n.total+=f,f&&(t.adler=n.check=n.flags?ms(n.check,i,f,a-f):gs(n.check,i,f,a-f)),f=u,(n.flags?c:sa(c))!==n.check){t.msg="incorrect data check",n.mode=30;break}c=0,h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;h<32;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}c=0,h=0}n.mode=29;case 29:k=1;break t;case 30:k=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=o,n.hold=c,n.bits=h,(n.wsize||f!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&_a(t,t.output,t.next_out,f-t.avail_out),l-=t.avail_in,f-=t.avail_out,t.total_in+=l,t.total_out+=f,n.total+=f,n.wrap&&f&&(t.adler=n.check=n.flags?ms(n.check,i,f,t.next_out-f):gs(n.check,i,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===l&&0===f||4===e)&&0===k&&(k=-5),k},inflateEnd:function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},inflateGetHeader:function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?-2:(n.head=e,e.done=!1,0):-2},inflateSetDictionary:function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?-2:11===n.mode&&gs(1,e,r,0)!==n.check?-3:_a(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},ba={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var va=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},ma=Object.prototype.toString;function ya(t){if(!(this instanceof ya))return new ya(t);this.options=Fi.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xs,this.strm.avail_out=0;var n=ga.inflateInit2(this.strm,e.windowBits);if(n!==ba.Z_OK)throw new Error(ys[n]);if(this.header=new va,ga.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Hs(e.dictionary):"[object ArrayBuffer]"===ma.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=ga.inflateSetDictionary(this.strm,e.dictionary))!==ba.Z_OK))throw new Error(ys[n])}function wa(t,e){var n=new ya(e);if(n.push(t,!0),n.err)throw n.msg||ys[n.err];return n.result}ya.prototype.push=function(t,e){var n,r,i,s,a,o=this.strm,u=this.options.chunkSize,c=this.options.dictionary,h=!1;if(this.ended)return!1;r=e===~~e?e:!0===e?ba.Z_FINISH:ba.Z_NO_FLUSH,"string"==typeof t?o.input=Gs(t):"[object ArrayBuffer]"===ma.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new Fi.Buf8(u),o.next_out=0,o.avail_out=u),(n=ga.inflate(o,ba.Z_NO_FLUSH))===ba.Z_NEED_DICT&&c&&(n=ga.inflateSetDictionary(this.strm,c)),n===ba.Z_BUF_ERROR&&!0===h&&(n=ba.Z_OK,h=!1),n!==ba.Z_STREAM_END&&n!==ba.Z_OK)return this.onEnd(n),this.ended=!0,!1;o.next_out&&(0!==o.avail_out&&n!==ba.Z_STREAM_END&&(0!==o.avail_in||r!==ba.Z_FINISH&&r!==ba.Z_SYNC_FLUSH)||("string"===this.options.to?(i=qs(o.output,o.next_out),s=o.next_out-i,a=Vs(o.output,i),o.next_out=s,o.avail_out=u-s,s&&Fi.arraySet(o.output,o.output,i,s,0),this.onData(a)):this.onData(Fi.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(h=!0)}while((o.avail_in>0||0===o.avail_out)&&n!==ba.Z_STREAM_END);return n===ba.Z_STREAM_END&&(r=ba.Z_FINISH),r===ba.Z_FINISH?(n=ga.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===ba.Z_OK):r!==ba.Z_SYNC_FLUSH||(this.onEnd(ba.Z_OK),o.avail_out=0,!0)},ya.prototype.onData=function(t){this.chunks.push(t)},ya.prototype.onEnd=function(t){t===ba.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Fi.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Aa={Inflate:ya,inflate:wa,inflateRaw:function(t,e){return(e=e||{}).raw=!0,wa(t,e)},ungzip:wa},ka={};(0,Fi.assign)(ka,Ks,Aa,ba);var Ea=ka,xa="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array?"uint8array":"array";function Ta(t,e){ci.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}oi.inherits(Ta,ci),Ta.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(oi.transformTo(xa,t.data),!1)},Ta.prototype.flush=function(){ci.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},Ta.prototype.cleanUp=function(){ci.prototype.cleanUp.call(this),this._pako=null},Ta.prototype._createPako=function(){this._pako=new Ea[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}};var Ca={STORE:{magic:"\0\0",compressWorker:function(t){return new ci("STORE compression")},uncompressWorker:function(){return new ci("STORE decompression")}},DEFLATE:{magic:"\b\0",compressWorker:function(t){return new Ta("Deflate",t)},uncompressWorker:function(){return new Ta("Inflate",{})}}},Sa="PK",Ra="PK",Ia="PK",Ba="PK",Pa="PK",Oa="PK\b",Da=function(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},Ma=function(t,e,n,r,i,s){var a,o,u=t.file,c=t.compression,h=s!==hi.utf8encode,l=oi.transformTo("string",s(u.name)),f=oi.transformTo("string",hi.utf8encode(u.name)),d=u.comment,p=oi.transformTo("string",s(d)),_=oi.transformTo("string",hi.utf8encode(d)),g=f.length!==u.name.length,b=_.length!==d.length,v="",m="",y="",w=u.dir,A=u.date,k={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(k.crc32=t.crc32,k.compressedSize=t.compressedSize,k.uncompressedSize=t.uncompressedSize);var E=0;e&&(E|=8),h||!g&&!b||(E|=2048);var x=0,T=0;w&&(x|=16),"UNIX"===i?(T=798,x|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(u.unixPermissions,w)):(T=20,x|=function(t,e){return 63&(t||0)}(u.dosPermissions)),a=A.getUTCHours(),a<<=6,a|=A.getUTCMinutes(),a<<=5,a|=A.getUTCSeconds()/2,o=A.getUTCFullYear()-1980,o<<=4,o|=A.getUTCMonth()+1,o<<=5,o|=A.getUTCDate(),g&&(m=Da(1,1)+Da(Ti(l),4)+f,v+="up"+Da(m.length,2)+m),b&&(y=Da(1,1)+Da(Ti(p),4)+_,v+="uc"+Da(y.length,2)+y);var C="";return C+="\n\0",C+=Da(E,2),C+=c.magic,C+=Da(a,2),C+=Da(o,2),C+=Da(k.crc32,4),C+=Da(k.compressedSize,4),C+=Da(k.uncompressedSize,4),C+=Da(l.length,2),C+=Da(v.length,2),{fileRecord:Sa+C+l+v,dirRecord:Ra+Da(T,2)+C+Da(p.length,2)+"\0\0\0\0"+Da(x,4)+Da(r,4)+l+v+p}},Fa=function(t){return Oa+Da(t.crc32,4)+Da(t.compressedSize,4)+Da(t.uncompressedSize,4)};function La(t,e,n,r){ci.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}oi.inherits(La,ci),La.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,ci.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},La.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=Ma(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},La.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=Ma(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:Fa(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},La.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,i){var s=oi.transformTo("string",i(r));return Ia+"\0\0\0\0"+Da(t,2)+Da(t,2)+Da(e,4)+Da(n,4)+Da(s.length,2)+s}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},La.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},La.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},La.prototype.resume=function(){return!!ci.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},La.prototype.error=function(t){var e=this._sources;if(!ci.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},La.prototype.lock=function(){ci.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()};var Na=La,ja=function(t,e,n){var r=new Na(e.streamFiles,n,e.platform,e.encodeFileName),i=0;try{t.forEach((function(t,n){i++;var s=function(t,e){var n=t||e,r=Ca[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),a=n.options.compressionOptions||e.compressionOptions||{},o=n.dir,u=n.date;n._compressWorker(s,a).withStreamInfo("file",{name:t,dir:o,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(r)})),r.entriesCount=i}catch(t){r.error(t)}return r};function Ua(t,e){ci.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}oi.inherits(Ua,ci),Ua.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},Ua.prototype.pause=function(){return!!ci.prototype.pause.call(this)&&(this._stream.pause(),!0)},Ua.prototype.resume=function(){return!!ci.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)};var za=Ua,$a=function(t,e,n){var r,i=oi.getTypeOf(e),s=oi.extend(n||{},yi);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=Wa(t)),s.createFolders&&(r=Ha(t))&&Ga.call(this,r,!0);var a="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!a),(e instanceof Ii&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",i="string");var o=null;o=e instanceof Ii||e instanceof ci?e:Dr&&Nr(e)?new za(t,e):oi.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var u=new Mi(t,o,s);this.files[t]=u},Ha=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},Wa=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},Ga=function(t,e){return e=void 0!==e?e:yi.createFolders,t=Wa(t),this.files[t]||$a.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function Va(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var qa={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)this.files.hasOwnProperty(e)&&(r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r))},filter:function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(r)})),e},file:function(t,e,n){if(1===arguments.length){if(Va(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var i=this.files[this.root+t];return i&&!i.dir?i:null}return(t=this.root+t,$a.call(this,t,e,n),this)},folder:function(t){if(!t)return this;if(Va(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=Ga.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=oi.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:hi.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");oi.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";e=ja(this,n,r)}catch(t){(e=new ci("error")).error(t)}return new mi(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};function Xa(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}Xa.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return oi.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}};var Qa=Xa;function Ja(t){Qa.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}oi.inherits(Ja,Qa),Ja.prototype.byteAt=function(t){return this.data[this.zero+t]},Ja.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===e&&this.data[s+1]===n&&this.data[s+2]===r&&this.data[s+3]===i)return s-this.zero;return-1},Ja.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&n===s[1]&&r===s[2]&&i===s[3]},Ja.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var Ya=Ja;function Ka(t){Qa.call(this,t)}oi.inherits(Ka,Qa),Ka.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},Ka.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},Ka.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},Ka.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var Za=Ka;function to(t){Ya.call(this,t)}oi.inherits(to,Ya),to.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var eo=to;function no(t){eo.call(this,t)}oi.inherits(no,eo),no.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var ro=no,io=function(t){var e=oi.getTypeOf(t);return oi.checkSupport(e),"string"!==e||Ir.uint8array?"nodebuffer"===e?new ro(t):Ir.uint8array?new eo(oi.transformTo("uint8array",t)):new Ya(oi.transformTo("array",t)):new Za(t)};function so(t,e){this.options=t,this.loadOptions=e}so.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in Ca)if(Ca.hasOwnProperty(e)&&Ca[e].magic===t)return Ca[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+oi.pretty(this.compressionMethod)+" unknown (inner file : "+oi.transformTo("string",this.fileName)+")");this.decompressed=new Ii(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=io(this.extraFields[1].value);this.uncompressedSize===oi.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===oi.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===oi.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===oi.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r}},handleUTF8:function(){var t=Ir.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=hi.utf8decode(this.fileName),this.fileCommentStr=hi.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=oi.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=oi.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=io(t.value);return 1!==e.readInt(1)?null:Ti(this.fileName)!==e.readInt(4)?null:hi.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=io(t.value);return 1!==e.readInt(1)?null:Ti(this.fileComment)!==e.readInt(4)?null:hi.utf8decode(e.readData(t.length-5))}return null}};var ao=so;function oo(t){this.files=[],this.loadOptions=t}oo.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+oi.pretty(e)+", expected "+oi.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=Ir.uint8array?"uint8array":"array",n=oi.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(Sa),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(Ra);)(t=new ao({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(Ia);if(t<0)throw!this.isSignature(0,Sa)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(t);var e=t;if(this.checkSignature(Ia),this.readBlockEndOfCentral(),this.diskNumber===oi.MAX_VALUE_16BITS||this.diskWithCentralDirStart===oi.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===oi.MAX_VALUE_16BITS||this.centralDirRecords===oi.MAX_VALUE_16BITS||this.centralDirSize===oi.MAX_VALUE_32BITS||this.centralDirOffset===oi.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(Ba))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(Ba),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,Pa)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(Pa),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(Pa),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(r>0)this.isSignature(e,Ra)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=io(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};var uo=oo;function co(t){return new ai.Promise((function(e,n){var r=t.decompressed.getContentWorker().pipe(new Si);r.on("error",(function(t){n(t)})).on("end",(function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}function ho(){if(!(this instanceof ho))return new ho;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new ho;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}ho.prototype=qa,ho.prototype.loadAsync=function(t,e){var n=this;return e=oi.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:hi.utf8decode}),Dr&&Nr(t)?ai.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):oi.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new uo(e);return n.load(t),n})).then((function(t){var n=[ai.Promise.resolve(t)],r=t.files;if(e.checkCRC32)for(var i=0;i<r.length;i++)n.push(co(r[i]));return ai.Promise.all(n)})).then((function(t){for(var r=t.shift(),i=r.files,s=0;s<i.length;s++){var a=i[s];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))},ho.support=Ir,ho.defaults=yi,ho.version="3.2.0",ho.loadAsync=function(t,e){return(new ho).loadAsync(t,e)},ho.external=ai;var lo=ho,fo=U((function(t){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],s=0;s<4;s++)8*r+6*s<=8*t.length?n.push(e.charAt(i>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}};t.exports=n}()})),po={utf8:{stringToBytes:function(t){return po.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(po.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}},_o=po,go=function(t){return null!=t&&(bo(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&bo(t.slice(0,0))}(t)||!!t._isBuffer)};function bo(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var vo=U((function(t){!function(){var e=fo,n=_o.utf8,r=go,i=_o.bin,s=function(t,a){t.constructor==String?t=a&&"binary"===a.encoding?i.stringToBytes(t):n.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var o=e.bytesToWords(t),u=8*t.length,c=1732584193,h=-271733879,l=-1732584194,f=271733878,d=0;d<o.length;d++)o[d]=16711935&(o[d]<<8|o[d]>>>24)|4278255360&(o[d]<<24|o[d]>>>8);o[u>>>5]|=128<<u%32,o[14+(u+64>>>9<<4)]=u;var p=s._ff,_=s._gg,g=s._hh,b=s._ii;for(d=0;d<o.length;d+=16){var v=c,m=h,y=l,w=f;c=p(c,h,l,f,o[d+0],7,-680876936),f=p(f,c,h,l,o[d+1],12,-389564586),l=p(l,f,c,h,o[d+2],17,606105819),h=p(h,l,f,c,o[d+3],22,-1044525330),c=p(c,h,l,f,o[d+4],7,-176418897),f=p(f,c,h,l,o[d+5],12,1200080426),l=p(l,f,c,h,o[d+6],17,-1473231341),h=p(h,l,f,c,o[d+7],22,-45705983),c=p(c,h,l,f,o[d+8],7,1770035416),f=p(f,c,h,l,o[d+9],12,-1958414417),l=p(l,f,c,h,o[d+10],17,-42063),h=p(h,l,f,c,o[d+11],22,-1990404162),c=p(c,h,l,f,o[d+12],7,1804603682),f=p(f,c,h,l,o[d+13],12,-40341101),l=p(l,f,c,h,o[d+14],17,-1502002290),c=_(c,h=p(h,l,f,c,o[d+15],22,1236535329),l,f,o[d+1],5,-165796510),f=_(f,c,h,l,o[d+6],9,-1069501632),l=_(l,f,c,h,o[d+11],14,643717713),h=_(h,l,f,c,o[d+0],20,-373897302),c=_(c,h,l,f,o[d+5],5,-701558691),f=_(f,c,h,l,o[d+10],9,38016083),l=_(l,f,c,h,o[d+15],14,-660478335),h=_(h,l,f,c,o[d+4],20,-405537848),c=_(c,h,l,f,o[d+9],5,568446438),f=_(f,c,h,l,o[d+14],9,-1019803690),l=_(l,f,c,h,o[d+3],14,-187363961),h=_(h,l,f,c,o[d+8],20,1163531501),c=_(c,h,l,f,o[d+13],5,-1444681467),f=_(f,c,h,l,o[d+2],9,-51403784),l=_(l,f,c,h,o[d+7],14,1735328473),c=g(c,h=_(h,l,f,c,o[d+12],20,-1926607734),l,f,o[d+5],4,-378558),f=g(f,c,h,l,o[d+8],11,-2022574463),l=g(l,f,c,h,o[d+11],16,1839030562),h=g(h,l,f,c,o[d+14],23,-35309556),c=g(c,h,l,f,o[d+1],4,-1530992060),f=g(f,c,h,l,o[d+4],11,1272893353),l=g(l,f,c,h,o[d+7],16,-155497632),h=g(h,l,f,c,o[d+10],23,-1094730640),c=g(c,h,l,f,o[d+13],4,681279174),f=g(f,c,h,l,o[d+0],11,-358537222),l=g(l,f,c,h,o[d+3],16,-722521979),h=g(h,l,f,c,o[d+6],23,76029189),c=g(c,h,l,f,o[d+9],4,-640364487),f=g(f,c,h,l,o[d+12],11,-421815835),l=g(l,f,c,h,o[d+15],16,530742520),c=b(c,h=g(h,l,f,c,o[d+2],23,-995338651),l,f,o[d+0],6,-198630844),f=b(f,c,h,l,o[d+7],10,1126891415),l=b(l,f,c,h,o[d+14],15,-1416354905),h=b(h,l,f,c,o[d+5],21,-57434055),c=b(c,h,l,f,o[d+12],6,1700485571),f=b(f,c,h,l,o[d+3],10,-1894986606),l=b(l,f,c,h,o[d+10],15,-1051523),h=b(h,l,f,c,o[d+1],21,-2054922799),c=b(c,h,l,f,o[d+8],6,1873313359),f=b(f,c,h,l,o[d+15],10,-30611744),l=b(l,f,c,h,o[d+6],15,-1560198380),h=b(h,l,f,c,o[d+13],21,1309151649),c=b(c,h,l,f,o[d+4],6,-145523070),f=b(f,c,h,l,o[d+11],10,-1120210379),l=b(l,f,c,h,o[d+2],15,718787259),h=b(h,l,f,c,o[d+9],21,-343485551),c=c+v>>>0,h=h+m>>>0,l=l+y>>>0,f=f+w>>>0}return e.endian([c,h,l,f])};s._ff=function(t,e,n,r,i,s,a){var o=t+(e&n|~e&r)+(i>>>0)+a;return(o<<s|o>>>32-s)+e},s._gg=function(t,e,n,r,i,s,a){var o=t+(e&r|n&~r)+(i>>>0)+a;return(o<<s|o>>>32-s)+e},s._hh=function(t,e,n,r,i,s,a){var o=t+(e^n^r)+(i>>>0)+a;return(o<<s|o>>>32-s)+e},s._ii=function(t,e,n,r,i,s,a){var o=t+(n^(e|~r))+(i>>>0)+a;return(o<<s|o>>>32-s)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(s(t,n));return n&&n.asBytes?r:n&&n.asString?i.bytesToString(r):e.bytesToHex(r)}}()}));var mo=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=[];function r(t){return n[t]||(n[t]=function(t){for(var e="return function dispatcher"+t+"(payload) {\n",n=[],r=[],i=0;i<t;i++)n.push("cb"+i),r.push("ctx"+i),e+="    cb"+i+"(payload, ctx"+i+");\n";return e+="};",new(Function.bind.apply(Function,[void 0].concat(n.concat(r),[e])))}(t)),n[t]}n[0]=function(){return function(){}},n[1]=function(t,e){return void 0===e?t:function(n){t(n,e)}};var i=function(){function t(){this.hasHandlers=!1,this._handlers=[],this._contexts=[],this._createDispatcher()}return t.prototype.addHandler=function(t,e){return this.isHandlerAttached(t,e)||(this._handlers.push(t),this._contexts.push(e),this._createDispatcher(),this._updateHasHandlers()),this},t.prototype.removeHandler=function(t,e){var n=this._getHandlerIndex(t,e);return void 0!==n&&(this._handlers.splice(n,1),this._contexts.splice(n,1),this._createDispatcher(),this._updateHasHandlers()),this},t.prototype.isHandlerAttached=function(t,e){return void 0!==this._getHandlerIndex(t,e)},t.prototype._updateHasHandlers=function(){this.hasHandlers=!!this._handlers.length},t.prototype._getHandlerIndex=function(t,e){var n,r=this._handlers.length;for(n=0;n<r&&(this._handlers[n]!==t||this._contexts[n]!==e);n++);return n<r?n:void 0},t.prototype._createDispatcher=function(){this.dispatch=r(this._handlers.length).apply(this,this._handlers.concat(this._contexts))},t}();e.default=i}));j(mo);var yo=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Event=mo.default}));j(yo);var wo,Ao=yo.Event;!function(t){t.TrapPayload=class{constructor(t,e,n){this.reason=t,this.cartridge=e,this.message=n}}}(wo||(wo={}));class ko{constructor(){this.trap=new Ao}init(){return a(this,void 0,void 0,(function*(){}))}reset(){}read(t){return 0}peek(t){return this.read(t)}write(t,e){}getType(){return ht.CartridgeType.unknown}setCpu(t){return this}setBus(t){return this}setRng(t){return this}setCpuTimeProvider(t){return this}notifyCpuCycleComplete(){}randomize(t){}triggerTrap(t,e){if(!this.trap.hasHandlers)throw new Error(e);this.trap.dispatch(new wo.TrapPayload(t,this,e))}}function Eo(t,e){const n=[],r=e.map(t=>0);for(let i=0;i<t.length;i++){for(let s=0;s<n.length;s++){const a=n[s],o=e[a.signature];t[i]===o[a.nextIndex]?++a.nextIndex===o.length&&(r[a.signature]++,n.splice(s,1),s--):(n.splice(s,1),s--)}for(let s=0;s<e.length;s++){const a=e[s];a.length>0&&t[i]===a[0]&&(1===a.length?r[s]++:n.push({signature:s,nextIndex:1}))}}return r}class xo extends ko{constructor(t,e=!0){if(super(),this._supportSC=e,this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._hasSC=!1,this._saraRAM=new Uint8Array(128),this._bus=null,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){return Eo(t,[[141,249,31]])[0]>=2}reset(){this._bank=this._bank1,this._hasSC=!1}read(t){return this._access(4095&t,this._bus.getLastDataBusValue()),this.peek(t)}peek(t){return t&=4095,this._hasSC&&t>=128&&t<256?this._saraRAM[t-128]:this._bank[t]}write(t,e){(t&=4095)<128&&this._supportSC&&(this._hasSC=!0),this._access(t,e)}getType(){return ht.CartridgeType.bankswitch_8k_F8}randomize(t){for(let e=0;e<this._saraRAM.length;e++)this._saraRAM[e]=t.int(255)}setBus(t){return this._bus=t,this}_access(t,e){if(t<128&&this._hasSC)this._saraRAM[t]=255&e;else switch(t){case 4088:this._bank=this._bank0;break;case 4089:this._bank=this._bank1}}}class To extends ko{constructor(t){if(super(),this._banks=new Array(8),this._activeBanks=new Array(4),8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: invalid length ${t.length}`);for(let t=0;t<8;t++)this._banks[t]=new Uint8Array(1024);for(let e=0;e<1024;e++)for(let n=0;n<8;n++)this._banks[n][e]=t[1024*n+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[141,224,31],[141,224,95],[141,233,255],[12,224,31],[173,224,31],[173,233,255],[173,237,255],[173,243,191]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){for(let t=0;t<4;t++)this._activeBanks[t]=this._banks[7]}read(t){return(t&=4095)>=4064&&t<4088&&this._handleBankswitch(t),this._activeBanks[t>>10][1023&t]}peek(t){return t&=4095,this._activeBanks[t>>10][1023&t]}write(t,e){const n=4095&t;return n>=4064&&n<4088&&this._handleBankswitch(n),super.write(t,e)}getType(){return ht.CartridgeType.bankswitch_8k_E0}_handleBankswitch(t){t<4072?this._activeBanks[0]=this._banks[t-4064]:t<4080?this._activeBanks[1]=this._banks[t-4072]:this._activeBanks[2]=this._banks[t-4080]}}class Co extends ko{constructor(t){if(super(),this._banks=new Array(4),this._bus=null,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: invalid length ${t.length}`);for(let t=0;t<4;t++)this._banks[t]=new Uint8Array(2048);this._bank1=this._banks[3],this._bank0=this._banks[0];for(let e=0;e<2048;e++)for(let n=0;n<4;n++)this._banks[n][e]=t[2048*n+e]}static matchesBuffer(t){return Eo(t,[[133,63]])[0]>=2}reset(){this._bank0=this._banks[0]}setBus(t){return this._bus=t,this._bus.event.read.addHandler(Co._onBusAccess,this),this._bus.event.write.addHandler(Co._onBusAccess,this),this}read(t){return(t&=4095)<2048?this._bank0[t]:this._bank1[2047&t]}getType(){return ht.CartridgeType.bankswitch_8k_3F}static _onBusAccess(t,e){63===e._bus.getLastAddresBusValue()&&(e._bank0=e._banks[3&e._bus.getLastDataBusValue()])}}class So extends ko{constructor(t){if(super(),this._banks=null,this._ramSelect=!1,this._ramBanks=new Array(256),this._bus=null,0!=(2047&t.length))throw new Error(`buffer length ${t.length} is not a multiple of 2k`);const e=t.length>>>11;if(e<2)throw new Error("image must have at least 2k");this._banks=new Array(e);for(let t=0;t<e;t++)this._banks[t]=new Uint8Array(2048);for(let t=0;t<=255;t++)this._ramBanks[t]=new Uint8Array(1024);this._ramBank=this._ramBanks[0],this._bank1=this._banks[e-1],this._bank0=this._banks[0];for(let n=0;n<2048;n++)for(let r=0;r<e;r++)this._banks[r][n]=t[2048*r+n]}static matchesBuffer(t){return Eo(t,[[133,62,169,0]])[0]>=1}reset(){this._bank0=this._banks[0]}randomize(t){for(let e=0;e<this._ramBanks.length;e++)for(let n=0;n<1024;n++)this._ramBanks[e][n]=t.int(255)}setBus(t){return this._bus=t,this._bus.event.read.addHandler(So._onBusAccess,this),this._bus.event.write.addHandler(So._onBusAccess,this),this}read(t){return t&=4095,this._ramSelect?t<1024?this._ramBank[t]:t<2048?this._ramBank[1023&t]=this._bus.getLastDataBusValue():this._bank1[2047&t]:t<2048?this._bank0[t]:this._bank1[2047&t]}peek(t){return t&=4095,this._ramSelect?t<1024?this._ramBank[t]:t<2048?this._bus.getLastDataBusValue():this._bank1[2047&t]:t<2048?this._bank0[t]:this._bank1[2047&t]}write(t,e){this._ramSelect&&(t&=4095)>=1024&&t<2048&&(this._ramBank[1023&t]=e)}getType(){return ht.CartridgeType.bankswitch_3E}static _onBusAccess(t,e){switch(e._bus.getLastAddresBusValue()){case 63:e._ramSelect=!1,e._bank0=e._banks[e._bus.getLastDataBusValue()%e._banks.length];break;case 62:e._ramSelect=!0,e._ramBank=e._ramBanks[e._bus.getLastDataBusValue()%32]}}}class Ro extends ko{constructor(t){if(super(),this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._lastAccessWasFE=!1,this._lastAddressBusValue=-1,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[32,0,208,198,197],[32,195,248,165,130],[208,251,32,115,254],[32,0,240,132,214]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){this._bank=this._bank0,this._lastAccessWasFE=!1,this._lastAddressBusValue=-1}read(t){return this._bank[4095&t]}write(t,e){super.write(t,e)}setBus(t){return this._bus=t,this._bus.event.read.addHandler(Ro._onBusAccess,this),this._bus.event.write.addHandler(Ro._onBusAccess,this),this}getType(){return ht.CartridgeType.bankswitch_8k_FE}static _onBusAccess(t,e){const n=e._lastAddressBusValue;if(e._lastAddressBusValue=8191&e._bus.getLastAddresBusValue(),e._lastAddressBusValue!==n){if(e._lastAccessWasFE){const t=224&e._bus.getLastDataBusValue();e._bank=0===t?e._bank0:(32&e._bus.getLastDataBusValue())>0?e._bank0:e._bank1}e._lastAccessWasFE=510===e._lastAddressBusValue}}}class Io extends ko{constructor(t){if(super(),this._bus=null,this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[141,64,2],[173,64,2],[189,31,2]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){this._bank=this._bank0}read(t){return this._bank[4095&t]}setBus(t){return this._bus=t,t.event.read.addHandler(Io._onBusAccess,this),t.event.write.addHandler(Io._onBusAccess,this),this}getType(){return ht.CartridgeType.bankswitch_8k_UA}static _onBusAccess(t,e){switch(e._bus.getLastAddresBusValue()){case 544:e._bank=e._bank0;break;case 576:e._bank=e._bank1}}}class Bo extends ko{constructor(t){if(super(),this._banks=new Array(8),this._ram0=new Uint8Array(1024),this._ram1Banks=new Array(4),this._ram0Enabled=!1,16384!==t.length)throw new Error(`buffer is not a 16k cartridge image: wrong length ${t.length}`);for(let t=0;t<8;t++)this._banks[t]=new Uint8Array(2048);for(let t=0;t<4;t++)this._ram1Banks[t]=new Uint8Array(256);for(let e=0;e<2048;e++)for(let n=0;n<8;n++)this._banks[n][e]=t[2048*n+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[173,226,255],[173,229,255],[173,229,31],[173,231,31],[12,231,31],[141,231,255],[141,231,31]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){this._bank0=this._banks[0],this._ram1=this._ram1Banks[0],this._ram0Enabled=!1}read(t){return this._handleBankswitch(4095&t),this.peek(t)}peek(t){return(t&=4095)<2048?this._ram0Enabled?t>=1024?this._ram0[t-1024]:0:this._bank0[t]:t<=2559?t>=2304?this._ram1[t-2304]:0:this._banks[7][2047-(4095-t)]}write(t,e){t&=4095,this._handleBankswitch(t),t<1024?this._ram0Enabled?this._ram0[t]=e:super.write(t,e):t<2048?super.write(t,e):t<2303?this._ram1[t-2048]=e:super.write(t,e)}getType(){return ht.CartridgeType.bankswitch_16k_E7}randomize(t){for(let e=0;e<4;e++)for(let n=0;n<this._ram1Banks[e].length;n++)this._ram1Banks[e][n]=t.int(255);for(let e=0;e<this._ram0.length;e++)this._ram0[e]=t.int(255)}_handleBankswitch(t){t<4064||(t<=4070?(this._bank0=this._banks[15&t],this._ram0Enabled=!1):4071===t?this._ram0Enabled=!0:t<=4075&&(this._ram1=this._ram1Banks[t-4072]))}}class Po extends ko{constructor(t){if(super(),this._banks=new Array(7),this._ram=new Uint8Array(256),this._savedRam=new Uint8Array(256),this._accessCounter=0,this._accessCounterLimit=0,28672!==t.length&&29696!==t.length)throw new Error(`buffer is not a 28k/29k cartridge image: wrong length ${t.length}`);for(let t=0;t<7;t++)this._banks[t]=new Uint8Array(4096);const e=28672===t.length?0:1024;for(let n=0;n<4096;n++)for(let r=0;r<7;r++)this._banks[r][n]=t[4096*r+n+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[160,193,31,224],[0,128,2,224]]);return e[0]>0||e[1]>0}reset(){this._accessCounter=0,this._accessCounterLimit=0,this._bank=this._banks[0]}getType(){return ht.CartridgeType.bankswitch_FA2}randomize(t){for(let e=0;e<this._ram.length;e++)this._ram[e]=t.int(255)}setBus(t){return this._bus=t,this}read(t){return this.write(4095&t,this._bus.getLastDataBusValue()),this.peek(t)}peek(t){return(t&=4095)>=256&&t<512?this._ram[t-256]:4084===t?this._accessCounter>=this._accessCounterLimit?-65&this._bank[t]:64|this._bank[t]:this._bank[t]}write(t,e){if(t&=4095,this._accessCounter++,!(t<256))return 4084===t?this._handleIo():void(t>=4085&&t<=4091&&(this._bank=this._banks[t-4085]));this._ram[t]=e}_handleIo(){if(!(this._accessCounter<this._accessCounterLimit)){if(1===this._ram[255]){for(let t=0;t<256;t++)this._ram[t]=this._savedRam[t];this._accessCounterLimit=10}else{if(2!==this._ram[255])return;for(let t=0;t<256;t++)this._savedRam[t]=this._ram[t];this._accessCounterLimit=100}this._accessCounter=0,this._ram[255]=0}}}class Oo extends ko{constructor(t,e=!0){if(super(),this._supportSC=e,this._bus=null,this._banks=new Array(16),this._ram=new Uint8Array(128),this._hasSC=!1,65536!==t.length)throw new Error(`buffer is not a 64k cartridge image: wrong length ${t.length}`);for(let t=0;t<16;t++)this._banks[t]=new Uint8Array(4096);for(let e=0;e<4096;e++)for(let n=0;n<16;n++)this._banks[n][e]=t[4096*n+e];this.reset()}static matchesBuffer(t){const e=e=>{const n=e.split("").map(t=>t.charCodeAt(0));for(let e=0;e<n.length;e++)if(n[e]!==t[65528+e])return!1;return!0};if(65536!==t.length)return!1;if(e("efef")||e("efsc"))return!0;const n=Eo(t,[[12,224,255],[173,224,255],[12,224,31],[173,224,31]]);for(let t=0;t<4;t++)if(n[t]>0)return!0;return!1}reset(){this._bank=this._banks[15],this._hasSC=!1}getType(){return ht.CartridgeType.bankswitch_64k_EF}randomize(t){for(let e=0;e<this._ram.length;e++)this._ram[e]=t.int(255)}setBus(t){return this._bus=t,this}read(t){return this._access(4095&t,this._bus.getLastDataBusValue()),this.peek(t)}peek(t){return t&=4095,this._hasSC&&t>=128&&t<256?this._ram[t-128]:this._bank[t]}write(t,e){(t&=4095)<128&&this._supportSC&&(this._hasSC=!0),this._access(t,e)}_access(t,e){t<128&&this._hasSC?this._ram[t]=e:t>=4064&&t<=4079&&(this._bank=this._banks[t-4064])}}var Do="/home/travis/build/6502ts/6502.ts/node_modules/thumbulator.ts/lib/native",Mo=Object.freeze({__proto__:null,default:{}});function Fo(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var Lo=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,No=function(t){return Lo.exec(t).slice(1)};function jo(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return(e?"/":"")+(t=Fo(Xo(t.split("/"),(function(t){return!!t})),!e).join("/"))||"."}function Uo(t){var e=zo(t),n="/"===Qo(t,-1);return(t=Fo(Xo(t.split("/"),(function(t){return!!t})),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function zo(t){return"/"===t.charAt(0)}function $o(){var t=Array.prototype.slice.call(arguments,0);return Uo(Xo(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))}function Ho(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=jo(t).substr(1),e=jo(e).substr(1);for(var r=n(t.split("/")),i=n(e.split("/")),s=Math.min(r.length,i.length),a=s,o=0;o<s;o++)if(r[o]!==i[o]){a=o;break}var u=[];for(o=a;o<r.length;o++)u.push("..");return(u=u.concat(i.slice(a))).join("/")}function Wo(t){var e=No(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function Go(t,e){var n=No(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n}function Vo(t){return No(t)[3]}var qo={extname:Vo,basename:Go,dirname:Wo,sep:"/",delimiter:":",relative:Ho,join:$o,isAbsolute:zo,normalize:Uo,resolve:jo};function Xo(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var Qo="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)},Jo=Object.freeze({__proto__:null,resolve:jo,normalize:Uo,isAbsolute:zo,join:$o,relative:Ho,sep:"/",delimiter:":",dirname:Wo,basename:Go,extname:Vo,default:qo}),Yo=z(Mo),Ko=z(Jo),Zo=U((function(t,e){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){t=void 0!==(t=t||{})?t:{};var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);var i=function(t,e){throw e},s=!1,a=!1,o=!1,u=!1,c=!1;s="object"==typeof window,a="function"==typeof importScripts,u="object"==typeof L&&"object"==typeof L.versions&&"string"==typeof L.versions.node,o=u&&!s&&!a,c=!s&&!o&&!a;var h,l,f,d,p,_="";function g(e){return t.locateFile?t.locateFile(e,_):_+e}o?(_=Do+"/",h=function(t,e){var n;return(n=It(t))||(d||(d=Yo),p||(p=Ko),t=p.normalize(t),n=d.readFileSync(t)),e?n:n.toString()},f=function(t){var e=h(t,!0);return e.buffer||(e=new Uint8Array(e)),x(e.buffer),e},L.argv.length>1&&L.argv[1].replace(/\\/g,"/"),L.argv.slice(2),L.on("unhandledRejection",Vt),i=function(t){L.exit(t)},t.inspect=function(){return"[Emscripten Module object]"}):c?("undefined"!=typeof read&&(h=function(t){var e=It(t);return e?Ct(e):read(t)}),f=function(t){var e;return(e=It(t))?e:"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(x("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(i=function(t){quit(t)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(s||a)&&(a?_=self.location.href:document.currentScript&&(_=document.currentScript.src),n&&(_=n),_=0!==_.indexOf("blob:")?_.substr(0,_.lastIndexOf("/")+1):"",h=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var n=It(t);if(n)return Ct(n);throw e}},a&&(f=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}catch(e){var n=It(t);if(n)return n;throw e}}),l=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)e(r.response);else{var i=It(t);i?e(i.buffer):n()}},r.onerror=n,r.send(null)});var b=t.print||console.log.bind(console),v=t.printErr||console.warn.bind(console);for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);r=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&(i=t.quit),new Array(0);var m,y=0,w=function(t){y=t},A=function(){return y},k=8;t.wasmBinary&&t.wasmBinary,t.noExitRuntime&&(m=t.noExitRuntime);var E=!1;function x(t,e){t||Vt("Assertion failed: "+e)}function T(e){var n=t["_"+e];return x(n,"Cannot call unknown function "+e+", make sure it is exported"),n}function C(t,e,n,r,i){var s={string:function(t){var e=0;if(null!=t&&0!==t){var n=1+(t.length<<2);F(t,e=Mt(n),n)}return e},array:function(t){var e=Mt(t.length);return N(t,e),e}},a=T(t),o=[],u=0;if(r)for(var c=0;c<r.length;c++){var h=s[n[c]];h?(0===u&&(u=Lt()),o[c]=h(r[c])):o[c]=r[c]}var l=a.apply(null,o);return l=function(t){return"string"===e?D(t):"boolean"===e?Boolean(t):t}(l),0!==u&&Ft(u),l}var S,R,I,B,P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.subarray&&P)return P.decode(t.subarray(e,i));for(var s="";e<i;){var a=t[e++];if(128&a){var o=63&t[e++];if(192!=(224&a)){var u=63&t[e++];if((a=224==(240&a)?(15&a)<<12|o<<6|u:(7&a)<<18|o<<12|u<<6|63&t[e++])<65536)s+=String.fromCharCode(a);else{var c=a-65536;s+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else s+=String.fromCharCode((31&a)<<6|o)}else s+=String.fromCharCode(a)}return s}function D(t,e){return t?O(I,t,e):""}function M(t,e,n,r){if(!(r>0))return 0;for(var i=n,s=n+r-1,a=0;a<t.length;++a){var o=t.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++a)),o<=127){if(n>=s)break;e[n++]=o}else if(o<=2047){if(n+1>=s)break;e[n++]=192|o>>6,e[n++]=128|63&o}else if(o<=65535){if(n+2>=s)break;e[n++]=224|o>>12,e[n++]=128|o>>6&63,e[n++]=128|63&o}else{if(n+3>=s)break;e[n++]=240|o>>18,e[n++]=128|o>>12&63,e[n++]=128|o>>6&63,e[n++]=128|63&o}}return e[n]=0,n-i}function F(t,e,n){return M(t,I,e,n)}function N(t,e){R.set(t,e)}function j(e){S=e,t.HEAP8=R=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=B=new Int32Array(e),t.HEAPU8=I=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var U=13920,z=3648,$=t.TOTAL_MEMORY||16777216;function H(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?t.dynCall_v(r):t.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}$=(S=t.buffer?t.buffer:new ArrayBuffer($)).byteLength,j(S),B[z>>2]=U;var W=[],G=[],V=[],q=[];function X(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)K(t.preRun.shift());H(W)}function Q(){H(G)}function J(){H(V)}function Y(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)Z(t.postRun.shift());H(q)}function K(t){W.unshift(t)}function Z(t){q.unshift(t)}var tt=0,et=null;function nt(e){tt++,t.monitorRunDependencies&&t.monitorRunDependencies(tt)}function rt(e){if(tt--,t.monitorRunDependencies&&t.monitorRunDependencies(tt),0==tt&&et){var n=et;et=null,n()}}t.preloadedImages={},t.preloadedAudios={};var it=null,st="data:application/octet-stream;base64,";function at(t){return String.prototype.startsWith?t.startsWith(st):0===t.indexOf(st)}var ot=[function(e){return t.trapOnInstructionFetch(e)},function(e){return t.busRead32(e)},function(e,n){t.busWrite32(e,n)},function(e){return t.busRead16(e)},function(e,n){return t.trapOnBx32(e,n)},function(e,n){t.busWrite16(e,n)}];function ut(t,e,n){return ot[t](e,n)}function ct(t,e){return ot[t](e)}it="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAHkNAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHRodW1idWxhdG9yAHsgcmV0dXJuIE1vZHVsZS5idXNSZWFkMTYoJDApOyB9AHsgcmV0dXJuIE1vZHVsZS5idXNSZWFkMzIoJDApOyB9AHsgTW9kdWxlLmJ1c1dyaXRlMTYoJDAsICQxKTsgfQB7IE1vZHVsZS5idXNXcml0ZTMyKCQwLCAkMSk7IH0AcGMgaGFzIGxzYml0IHNldCAweCUwOFgKAHsgcmV0dXJuIE1vZHVsZS50cmFwT25JbnN0cnVjdGlvbkZldGNoKCQwKTsgfQAtLS0gMHglMDhYOiAweCUwNFggAGFkYyByJXUsciV1CgBhZGRzIHIldSxyJXUsIzB4JVgKAGFkZHMgciV1LCMweCUwMlgKAGFkZHMgciV1LHIldSxyJXUKAGFkZCByJXUsciV1CgBhZGQgcGMsLi4uIHByb2R1Y2VkIGFuIGFybSBhZGRyZXNzIDB4JTA4WCAweCUwOFgKAGFkZCByJXUsUEMsIzB4JTAyWAoAYWRkIHIldSxTUCwjMHglMDJYCgBhZGQgU1AsIzB4JTAyWAoAYW5kcyByJXUsciV1CgBhc3JzIHIldSxyJXUsIzB4JVgKAGFzcnMgciV1LHIldQoAYmVxIDB4JTA4WAoAYm5lIDB4JTA4WAoAYmNzIDB4JTA4WAoAYmNjIDB4JTA4WAoAYm1pIDB4JTA4WAoAYnBsIDB4JTA4WAoAYnZzIDB4JTA4WAoAYnZjIDB4JTA4WAoAYmhpIDB4JTA4WAoAYmxzIDB4JTA4WAoAYmdlIDB4JTA4WAoAYmx0IDB4JTA4WAoAYmd0IDB4JTA4WAoAYmxlIDB4JTA4WAoAQiAweCUwOFgKAGJpY3MgciV1LHIldQoAYmtwdCAweCUwMlgKAGJsIDB4JTA4WAoAYmx4IHIldQoAY2Fubm90IGJyYW5jaCB0byBhcm0gMHglMDhYIDB4JTA0WAoAYnggciV1CgB7IHJldHVybiBNb2R1bGUudHJhcE9uQngzMigkMCwgJDEpOyB9AGNtbnMgciV1LHIldQoAY21wIHIldSwjMHglMDJYCgBjbXBzIHIldSxyJXUKAGNwcyBUT0RPCgBjcHkgciV1LHIldQoAZW9ycyByJXUsciV1CgBsZG1pYSByJXUhLHsAciV1AH0KAGxkciByJXUsW3IldSwjMHglWF0KAGxkciByJXUsW3IldSxyJXVdCgBsZHIgciV1LFtQQysjMHglWF0KAGxkciByJXUsW1NQKyMweCVYXQoAbGRyYiByJXUsW3IldSwjMHglWF0KAGxkcmIgciV1LFtyJXUsciV1XQoAbGRyaCByJXUsW3IldSwjMHglWF0KAGxkcmggciV1LFtyJXUsciV1XQoAbGRyc2IgciV1LFtyJXUsciV1XQoAbGRyc2ggciV1LFtyJXUsciV1XQoAbHNscyByJXUsciV1LCMweCVYCgBsc2xzIHIldSxyJXUKAGxzcnMgciV1LHIldSwjMHglWAoAbHNycyByJXUsciV1CgBtb3ZzIHIldSwjMHglMDJYCgBtb3ZzIHIldSxyJXUKAG1vdiByJXUsciV1CgBtdWxzIHIldSxyJXUKAG12bnMgciV1LHIldQoAbmVncyByJXUsciV1CgBvcnJzIHIldSxyJXUKAHBvcCB7AHBjAHBvcCB7cmN9IHdpdGggYW4gQVJNIGFkZHJlc3MgcGMgMHglMDhYIHBvcHBlZCAweCUwOFgKAHB1c2ggewBscgBwdXNoIHtscn0gd2l0aCBhbiBBUk0gYWRkcmVzcyBwYyAweCUwOFggcG9wcGVkIDB4JTA4WAoAcmV2IHIldSxyJXUKAHJldjE2IHIldSxyJXUKAHJldnNoIHIldSxyJXUKAHJvcnMgciV1LHIldQoAc2JjIHIldSxyJXUKAHNldGVuZCBub3QgaW1wbGVtZW50ZWQKAHN0bWlhIHIldSEsewBzdHIgciV1LFtyJXUsIzB4JVhdCgBzdHIgciV1LFtyJXUsciV1XQoAc3RyIHIldSxbU1AsIzB4JVhdCgBzdHJiIHIldSxbciV1LCMweCVYXQoAc3RyYiByJXUsW3IldSxyJXVdCgBzdHJoIHIldSxbciV1LCMweCVYXQoAc3RyaCByJXUsW3IldSxyJXVdCgBzdWJzIHIldSxyJXUsIzB4JVgKAHN1YnMgciV1LCMweCUwMlgKAHN1YnMgciV1LHIldSxyJXUKAHN1YiBTUCwjMHglMDJYCgBzd2kgMHglMDJYCgAKCnN3aSAweCUwMlgKAHN4dGIgciV1LHIldQoAc3h0aCByJXUsciV1CgB0c3QgciV1LHIldQoAdXh0YiByJXUsciV1CgB1eHRoIHIldSxyJXUKAGludmFsaWQgaW5zdHJ1Y3Rpb24gMHglMDhYIDB4JTA0WAoALSsgICAwWDB4AChudWxsKQAtMFgrMFggMFgtMHgrMHggMHgAaW5mAElORgBuYW4ATkFOAC4=";var ht=3664;function lt(t){return t}function ft(t){return t.replace(/\b__Z[\w\d_]+/g,(function(t){return t==t?t:t+" ["+t+"]"}))}function dt(){var t=new Error;if(!t.stack){try{throw new Error(0)}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()}function pt(){var e=dt();return t.extraStackTrace&&(e+="\n"+t.extraStackTrace()),ft(e)}var _t={buffers:[null,[],[]],printChar:function(t,e){var n=_t.buffers[t];0===e||10===e?((1===t?b:v)(O(n,0)),n.length=0):n.push(e)},varargs:0,get:function(t){return _t.varargs+=4,B[_t.varargs-4>>2]},getStr:function(){return D(_t.get())},get64:function(){var t=_t.get();return _t.get(),t},getZero:function(){_t.get()}};function gt(t,e){_t.varargs=e;try{return _t.getStreamFromFD(),_t.get(),_t.get(),_t.get(),_t.get(),0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Vt(t),-t.errno}}function bt(t,e){_t.varargs=e;try{return _t.getStreamFromFD(),0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Vt(t),-t.errno}}function vt(){var e=t._fflush;e&&e(0);var n=_t.buffers;n[1].length&&_t.printChar(1,10),n[2].length&&_t.printChar(2,10)}function mt(t,e,n,r){try{for(var i=0,s=0;s<n;s++){for(var a=B[e+8*s>>2],o=B[e+(8*s+4)>>2],u=0;u<o;u++)_t.printChar(t,I[a+u]);i+=o}return B[r>>2]=i,0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Vt(t),-t.errno}}function yt(){return mt.apply(null,arguments)}function wt(){return R.length}function At(t){Gt(t)}function kt(t,e,n){I.set(I.subarray(e,e+n),t)}function Et(e){return t.___errno_location&&(B[t.___errno_location()>>2]=e),e}function xt(t){Vt("OOM")}function Tt(t){xt()}function Ct(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r>255&&(r&=255),e.push(String.fromCharCode(r))}return e.join("")}var St="function"==typeof atob?atob:function(t){var e,n,r,i,s,a,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=o.indexOf(t.charAt(c++))<<2|(i=o.indexOf(t.charAt(c++)))>>4,n=(15&i)<<4|(s=o.indexOf(t.charAt(c++)))>>2,r=(3&s)<<6|(a=o.indexOf(t.charAt(c++))),u+=String.fromCharCode(e),64!==s&&(u+=String.fromCharCode(n)),64!==a&&(u+=String.fromCharCode(r))}while(c<t.length);return u};function Rt(t){if("boolean"==typeof o&&o){var e;try{e=we.from(t,"base64")}catch(n){e=new we(t,"base64")}return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}try{for(var n=St(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}catch(t){throw new Error("Converting base64 string to bytes failed.")}}function It(t){if(at(t))return Rt(t.slice(st.length))}var Bt,Pt={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Float32Array:Float32Array,Float64Array:Float64Array},Ot={a:Vt,b:w,c:A,d:Et,e:gt,f:bt,g:yt,h:ct,i:ut,j:wt,k:kt,l:Tt,m:At,n:mt,o:xt,p:lt,q:ft,r:vt,s:dt,t:pt,u:ht,v:z},Dt=function(t,e,n){"use asm";var r=new t.Int8Array(n),i=new t.Int16Array(n),s=new t.Int32Array(n),a=new t.Uint8Array(n),o=new t.Uint16Array(n),u=new t.Float32Array(n),c=new t.Float64Array(n),h=e.u|0,l=e.v|0,f=0,d=0,p=0,_=0,g=0,b=0,v=0,m=0.0,y=t.Math.imul,w=t.Math.clz32,A=e.a,k=e.b,E=e.c,x=e.d,T=e.e,C=e.f,S=e.g,R=e.h,I=e.i,B=e.j,P=e.k,O=e.l,D=e.m,M=e.n,F=e.o,L=e.p,N=e.q,j=e.r,U=e.s,z=e.t,$=3680,H=13920,W=0.0;function G(t){t=t|0;var e=0;e=$;$=$+t|0;$=$+15&-16;return e|0}function V(){return $|0}function q(t){t=t|0;$=t}function X(t,e){t=t|0;e=e|0;$=t;H=e}function Q(t){t=t|0;s[712]=t;return}function J(){return 888}function Y(t){t=t|0;var e=0,n=0,r=0,i=0,a=0;s[713]=0;if(!t){i=0;return i|0}e=0;n=0;while(1){a=rt()|0;r=(s[713]|0)!=0;n=(a|0)==0?n:a;e=e+1|0;if(r|(a|0)==0^1)break;if(e>>>0>=t>>>0){e=0;i=6;break}}if((i|0)==6)return e|0;a=r?10:n;return a|0}function K(){s[713]=1;return}function Z(t){t=t|0;r[3440]=t;return}function tt(t){t=t|0;var e=0,n=0;n=$;$=$+16|0;e=s[2784+((t&15)<<2)>>2]|0;if((t&15|0)!=15){$=n;return e|0}if(e&1|0){t=s[160]|0;s[n>>2]=e;mt(t,1028,n)|0}e=e&-2;$=n;return e|0}function et(t,e){t=t|0;e=e|0;s[2784+((t&15)<<2)>>2]=(t&15|0)==15?e&-2:e;return}function nt(){s[714]=4;s[715]=0;s[716]=0;s[717]=0;s[718]=0;return 0}function rt(){var t=0,e=0,n=0,i=0,a=0,o=0,u=0,c=0,h=0,l=0,f=0,d=0,p=0;p=$;$=$+1232|0;e=s[711]|0;if(e&1|0){d=s[160]|0;s[p>>2]=e;mt(d,1028,p)|0}t=s[712]|0;if(!t){t=R(0,(e&-2)+-2|0)|0;if(t|0){d=t;$=p;return d|0}}else if(((e&-2)+-2|0)==(t|0)){d=20;$=p;return d|0}if((e&-2)>>>0>4026531839&(s[717]|0)!=0){s[717]=0;d=s[709]|0;s[696]=R(1,d|0)|0;s[697]=R(1,d+4|0)|0;s[698]=R(1,d+8|0)|0;s[699]=R(1,d+12|0)|0;s[708]=R(1,d+16|0)|0;s[710]=R(1,d+20|0)|0;n=R(1,d+24|0)|0;s[718]=R(1,d+28|0)|0;s[709]=d+32}else n=e&-2;t=s[714]|0;do{if(t&1){e=s[716]|0;if(!e){s[716]=s[715];s[714]=t|65536;t=t|65536;break}else{s[716]=e+-1;break}}}while(0);if((t&3|0)==3?(t&65536|0)!=0&(s[717]|0)==0:0){i=s[709]|0;e=s[718]|0;t:do{if((i+-4&-268435456|0)==-536870912)switch((i+536813548|0)>>>2|i+536813548<<30|0){case 0:{s[714]=e&65543;if((t&1|0)!=0|(e&1|0)==0)break t;s[716]=s[715];break t}case 1:{s[715]=e&16777215;break t}case 2:{s[716]=e&16777215;break t}case 3:break t;default:break t}else I(2,i+-4|0,e|0)|0}while(0);t:do{if((i+-8&-268435456|0)==-536870912)switch((i+536813544|0)>>>2|i+536813544<<30|0){case 0:{d=s[714]|0;s[714]=n&65543;if((n&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=n&16777215;break t}case 2:{s[716]=n&16777215;break t}case 3:break t;default:break t}else I(2,i+-8|0,n|0)|0}while(0);t=s[710]|0;t:do{if((i+-12&-268435456|0)==-536870912)switch((i+536813540|0)>>>2|i+536813540<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else I(2,i+-12|0,t|0)|0}while(0);t=s[708]|0;t:do{if((i+-16&-268435456|0)==-536870912)switch((i+536813536|0)>>>2|i+536813536<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else I(2,i+-16|0,t|0)|0}while(0);t=s[699]|0;t:do{if((i+-20&-268435456|0)==-536870912)switch((i+536813532|0)>>>2|i+536813532<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else I(2,i+-20|0,t|0)|0}while(0);t=s[698]|0;t:do{if((i+-24&-268435456|0)==-536870912)switch((i+536813528|0)>>>2|i+536813528<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else I(2,i+-24|0,t|0)|0}while(0);t=s[697]|0;t:do{if((i+-28&-268435456|0)==-536870912)switch((i+536813524|0)>>>2|i+536813524<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else I(2,i+-28|0,t|0)|0}while(0);t=s[696]|0;t:do{if((i+-32&-268435456|0)==-536870912)switch((i+536813520|0)>>>2|i+536813520<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else I(2,i+-32|0,t|0)|0}while(0);s[709]=i+-32;n=(R(1,60)|0)+2|0;s[710]=-7;s[717]=1}a=n+-2|0;d=R(3,a|0)|0;f=n+2|0;s[711]=f&-2;if(r[3440]|0){l=s[160]|0;s[p+8>>2]=a;s[p+8+4>>2]=d;mt(l,1099,p+8|0)|0}if((d&65472|0)==16704){if(r[3440]|0){f=s[160]|0;s[p+16>>2]=d&7;s[p+16+4>>2]=d>>>3&7;mt(f,1119,p+16|0)|0}e=s[2784+((d&7)<<2)>>2]|0;n=s[2784+((d>>>3&7)<<2)>>2]|0;f=s[718]|0;s[2784+((d&7)<<2)>>2]=n+e+(f>>>29&1);t=(n+e+(f>>>29&1)|0)<0?f|-2147483648:f&2147483647;t=(n+e+(f>>>29&1)|0)==0?t|1073741824:t&-1073741825;s[718]=t;if(!(t&536870912)){d=((n>>>31)+(e>>>31)+(((n&2147483647)+(e&2147483647)|0)>>>31)&2|0)==0?t&-536870913:t|536870912;s[718]=(((n&2147483647)+(e&2147483647)|0)>>>31|0)==(((n>>>31)+(e>>>31)+(((n&2147483647)+(e&2147483647)|0)>>>31)|0)>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}else{f=(n>>>31)+(e>>>31)+(((n&2147483647)+(e&2147483647)+1|0)>>>31)|0;d=(f&2|0)==0?t&-536870913:t|536870912;s[718]=(((n&2147483647)+(e&2147483647)+1|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}}if((d&65024|0)==7168?d>>>6&7|0:0){if(r[3440]|0){f=s[160]|0;s[p+24>>2]=d&7;s[p+24+4>>2]=d>>>3&7;s[p+24+8>>2]=d>>>6&7;mt(f,1132,p+24|0)|0}l=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=l+(d>>>6&7);f=s[718]|0;f=(l+(d>>>6&7)|0)<0?f|-2147483648:f&2147483647;f=(l+(d>>>6&7)|0)==0?f|1073741824:f&-1073741825;f=((((l&2147483647)+(d>>>6&7)|0)>>>31)+(l>>>31)&2|0)==0?f&-536870913:f|536870912;s[718]=(((l&2147483647)+(d>>>6&7)|0)>>>31|0)==(((((l&2147483647)+(d>>>6&7)|0)>>>31)+(l>>>31)|0)>>>1|0)?f&-268435457:f|268435456;d=0;$=p;return d|0}if((d&63488|0)==12288){if(r[3440]|0){f=s[160]|0;s[p+40>>2]=d>>>8&7;s[p+40+4>>2]=d&255;mt(f,1152,p+40|0)|0}l=s[2784+((d>>>8&7)<<2)>>2]|0;s[2784+((d>>>8&7)<<2)>>2]=l+(d&255);f=s[718]|0;f=(l+(d&255)|0)<0?f|-2147483648:f&2147483647;f=(l+(d&255)|0)==0?f|1073741824:f&-1073741825;f=((((l&2147483647)+(d&255)|0)>>>31)+(l>>>31)&2|0)==0?f&-536870913:f|536870912;s[718]=(((l&2147483647)+(d&255)|0)>>>31|0)==(((((l&2147483647)+(d&255)|0)>>>31)+(l>>>31)|0)>>>1|0)?f&-268435457:f|268435456;d=0;$=p;return d|0}if((d&65024|0)==6144){if(r[3440]|0){f=s[160]|0;s[p+48>>2]=d&7;s[p+48+4>>2]=d>>>3&7;s[p+48+8>>2]=d>>>6&7;mt(f,1170,p+48|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;l=s[2784+((d>>>6&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=l+f;d=s[718]|0;d=(l+f|0)<0?d|-2147483648:d&2147483647;d=(l+f|0)==0?d|1073741824:d&-1073741825;d=((l>>>31)+(f>>>31)+(((l&2147483647)+(f&2147483647)|0)>>>31)&2|0)==0?d&-536870913:d|536870912;s[718]=(((l&2147483647)+(f&2147483647)|0)>>>31|0)==(((l>>>31)+(f>>>31)+(((l&2147483647)+(f&2147483647)|0)>>>31)|0)>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}if((d&65280|0)==17408){if(r[3440]|0){l=s[160]|0;s[p+64>>2]=d>>>4&8|d&7;s[p+64+4>>2]=d>>>3&15;mt(l,1188,p+64|0)|0}t=s[2784+((d>>>4&8|d&7)<<2)>>2]|0;if((d>>>4&8|d&7|0)==15){if(t&1|0){l=s[160]|0;s[p+72>>2]=t;mt(l,1028,p+72|0)|0}t=t&-2}e=s[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(e&1|0){l=s[160]|0;s[p+80>>2]=e;mt(l,1028,p+80|0)|0}e=e&-2}t=e+t|0;if((d>>>4&8|d&7|0)!=15){s[2784+((d>>>4&8|d&7)<<2)>>2]=t;d=0;$=p;return d|0}if(!(t&1)){d=s[160]|0;s[p+88>>2]=f;s[p+88+4>>2]=t;mt(d,1201,p+88|0)|0;D(1)}s[711]=t+2&-2;d=0;$=p;return d|0}e=d&63488;switch(e<<16>>16){case-24576:{if(r[3440]|0){f=s[160]|0;s[p+96>>2]=d>>>8&7;s[p+96+4>>2]=d<<2&1020;mt(f,1251,p+96|0)|0}t=s[711]|0;if(t&1|0){f=s[160]|0;s[p+104>>2]=t;mt(f,1028,p+104|0)|0}s[2784+((d>>>8&7)<<2)>>2]=(t&-4)+(d<<2&1020);d=0;$=p;return d|0}case-22528:{if(r[3440]|0){f=s[160]|0;s[p+112>>2]=d>>>8&7;s[p+112+4>>2]=d<<2&1020;mt(f,1271,p+112|0)|0}s[2784+((d>>>8&7)<<2)>>2]=(s[709]|0)+(d<<2&1020);d=0;$=p;return d|0}default:{if((d&65408|0)==45056){if(r[3440]|0){f=s[160]|0;s[p+120>>2]=d<<2&508;mt(f,1291,p+120|0)|0}s[709]=(s[709]|0)+(d<<2&508);d=0;$=p;return d|0}if((d&65472|0)==16384){if(r[3440]|0){f=s[160]|0;s[p+128>>2]=d&7;s[p+128+4>>2]=d>>>3&7;mt(f,1307,p+128|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]&s[2784+((d&7)<<2)>>2];s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}if((d&63488|0)==4096){if(r[3440]|0){f=s[160]|0;s[p+136>>2]=d&7;s[p+136+4>>2]=d>>>3&7;s[p+136+8>>2]=d>>>6&31;mt(f,1321,p+136|0)|0}e=s[2784+((d>>>3&7)<<2)>>2]|0;do{if(!(d>>>6&31)){t=s[718]|0;if((e|0)<0){s[718]=t|536870912;s[2784+((d&7)<<2)>>2]=-1;t=t|536870912;o=141;break}else{s[718]=t&-536870913;s[2784+((d&7)<<2)>>2]=0;t=t&1610612735;o=143;break}}else{t=s[718]|0;t=(e&1<<(d>>>6&31)+-1|0)==0?t&-536870913:t|536870912;s[718]=t;e=((e|0)<0?-1<<32-(d>>>6&31):0)|e>>>(d>>>6&31);s[2784+((d&7)<<2)>>2]=e;if((e|0)>=0)if(!e){t=t&1073741823;o=143}else t=t&1073741823;else o=141}}while(0);if((o|0)==141)t=t&1073741823|-2147483648;else if((o|0)==143)t=t|1073741824;s[718]=t;d=0;$=p;return d|0}if((d&65472|0)==16640){if(r[3440]|0){f=s[160]|0;s[p+152>>2]=d&7;s[p+152+4>>2]=d>>>3&7;mt(f,1341,p+152|0)|0}e=s[2784+((d&7)<<2)>>2]|0;t=s[2784+((d>>>3&7)<<2)>>2]&255;do{if(t){if(t>>>0<32){o=s[718]|0;o=(1<<t+-1&e|0)==0?o&-536870913:o|536870912;s[718]=o;t=((e|0)<0?-1<<32-t:0)|e>>>t;e=o;o=155;break}t=s[718]|0;if((e|0)<0){s[718]=t|536870912;s[2784+((d&7)<<2)>>2]=-1;t=t|-1610612736;o=156;break}else{s[718]=t&-536870913;s[2784+((d&7)<<2)>>2]=0;t=t&536870911;o=158;break}}else{t=e;e=s[718]|0;o=155}}while(0);do{if((o|0)==155){s[2784+((d&7)<<2)>>2]=t;if((t|0)<0){t=e|-2147483648;o=156;break}if(!t){t=e&2147483647;o=158}else t=e&1073741823}}while(0);if((o|0)==156)t=t&-1073741825;else if((o|0)==158)t=t|1073741824;s[718]=t;d=0;$=p;return d|0}t:do{if((d&61440|0)==53248){i=(((d&128|0)==0?d&255:d|-256)<<1)+f|0;do{switch(d>>>8&15){case 0:{if(r[3440]|0){d=s[160]|0;s[p+160>>2]=i+-1;mt(d,1355,p+160|0)|0}if(!(s[718]&1073741824)){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 1:{if(r[3440]|0){d=s[160]|0;s[p+168>>2]=i+-1;mt(d,1367,p+168|0)|0}if(s[718]&1073741824|0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 2:{if(r[3440]|0){d=s[160]|0;s[p+176>>2]=i+-1;mt(d,1379,p+176|0)|0}if(!(s[718]&536870912)){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 3:{if(r[3440]|0){d=s[160]|0;s[p+184>>2]=i+-1;mt(d,1391,p+184|0)|0}if(s[718]&536870912|0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 4:{if(r[3440]|0){d=s[160]|0;s[p+192>>2]=i+-1;mt(d,1403,p+192|0)|0}if((s[718]|0)>=0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 5:{if(r[3440]|0){d=s[160]|0;s[p+200>>2]=i+-1;mt(d,1415,p+200|0)|0}if((s[718]|0)<0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 6:{if(r[3440]|0){d=s[160]|0;s[p+208>>2]=i+-1;mt(d,1427,p+208|0)|0}if(!(s[718]&268435456)){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 7:{if(r[3440]|0){d=s[160]|0;s[p+216>>2]=i+-1;mt(d,1439,p+216|0)|0}if(s[718]&268435456|0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 8:{if(r[3440]|0){d=s[160]|0;s[p+224>>2]=i+-1;mt(d,1451,p+224|0)|0}if((s[718]&1610612736|0)!=536870912){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 9:{if(r[3440]|0){d=s[160]|0;s[p+232>>2]=i+-1;mt(d,1463,p+232|0)|0}if((s[718]&1610612736|0)==536870912){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 10:{if(r[3440]|0){d=s[160]|0;s[p+240>>2]=i+-1;mt(d,1475,p+240|0)|0}t=s[718]&-1879048192;e:do{if((t|0)<0){switch(t|0){case-1879048192:break e;default:t=0}$=p;return t|0}else{switch(t|0){case 0:break e;default:t=0}$=p;return t|0}}while(0);s[711]=i+2&-2;d=0;$=p;return d|0}case 11:{if(r[3440]|0){d=s[160]|0;s[p+248>>2]=i+-1;mt(d,1487,p+248|0)|0}t=s[718]&-1879048192;e:do{if((t|0)<268435456){switch(t|0){case-2147483648:break e;default:t=0}$=p;return t|0}else{switch(t|0){case 268435456:break e;default:t=0}$=p;return t|0}}while(0);s[711]=i+2&-2;d=0;$=p;return d|0}case 12:{if(r[3440]|0){d=s[160]|0;s[p+256>>2]=i+-1;mt(d,1499,p+256|0)|0}d=s[718]|0;if(d&1073741824|0?1:(((d&-1879048192|0)==0?(d&-1879048192|0)==-1879048192?2:1:(d&-1879048192|0)==-1879048192&1)|0)==0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 13:{if(r[3440]|0){d=s[160]|0;s[p+264>>2]=i+-1;mt(d,1511,p+264|0)|0}d=s[718]|0;if((((d&-1879048192|0)==-2147483648?(d&-1879048192|0)==268435456?2:1:(d&-1879048192|0)==268435456&1)|0)==(0-(d>>>30&1)|0)){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}default:break t}}while(0)}}while(0);if((d&63488|0)==57344){t=(((d&1024|0)==0?d&2047:d|-2048)<<1)+f|0;if(r[3440]|0){d=s[160]|0;s[p+272>>2]=t+-1;mt(d,1523,p+272|0)|0}s[711]=t+2&-2;d=0;$=p;return d|0}if((d&65472|0)==17280){if(r[3440]|0){f=s[160]|0;s[p+280>>2]=d&7;s[p+280+4>>2]=d>>>3&7;mt(f,1533,p+280|0)|0}f=s[2784+((d&7)<<2)>>2]&~s[2784+((d>>>3&7)<<2)>>2];s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}if((d&65280|0)==48640){f=s[160]|0;s[p+288>>2]=d&255;mt(f,1547,p+288|0)|0;d=1;$=p;return d|0}t:do{if((d&57344|0)==57344){if((d&6144)<4096){switch(d&6144){case 2048:break;default:break t}t=(s[710]|0)+(d<<1&4094)&-4|2;if(r[3440]|0){d=s[160]|0;s[p+304>>2]=t+-3;mt(d,1560,p+304|0)|0}s[710]=n|1;s[711]=t;d=0;$=p;return d|0}switch(d&6144){case 4096:{if(r[3440]|0)Lt(10,s[160]|0)|0;s[710]=(((d&1024|0)==0?d&2047:d|1046528)<<12)+f;d=0;$=p;return d|0}case 6144:{t=(s[710]|0)+(d<<1&4094)|0;if(r[3440]|0){d=s[160]|0;s[p+296>>2]=t+-1;mt(d,1560,p+296|0)|0}s[710]=n|1;s[711]=t+2&-2;d=0;$=p;return d|0}default:break t}}}while(0);switch((d&65415)<<16>>16){case 18304:{if(r[3440]|0){l=s[160]|0;s[p+312>>2]=d>>>3&15;mt(l,1571,p+312|0)|0}t=s[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){l=s[160]|0;s[p+320>>2]=t;mt(l,1028,p+320|0)|0}t=t&-2}t=t+2|0;if(!(t&1)){l=s[160]|0;s[p+328>>2]=f;s[p+328+4>>2]=d;mt(l,1580,p+328|0)|0;d=2;$=p;return d|0}else{s[710]=n|1;s[711]=t&-2;d=0;$=p;return d|0}}case 18176:{if(r[3440]|0){f=s[160]|0;s[p+336>>2]=d>>>3&15;mt(f,1616,p+336|0)|0}t=s[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){d=s[160]|0;s[p+344>>2]=t;mt(d,1028,p+344|0)|0}t=t&-2}t=t+2|0;if(t&1|0){s[711]=t&-2;d=0;$=p;return d|0}t=I(4,a|0,t|0)|0;if(t|0){d=t;$=p;return d|0}s[711]=(s[710]|0)+2&-2;d=0;$=p;return d|0}default:{if((d&65472|0)==17088){if(r[3440]|0){f=s[160]|0;s[p+352>>2]=d&7;s[p+352+4>>2]=d>>>3&7;mt(f,1662,p+352|0)|0}f=s[2784+((d&7)<<2)>>2]|0;l=s[2784+((d>>>3&7)<<2)>>2]|0;d=s[718]|0;d=(l+f|0)<0?d|-2147483648:d&2147483647;d=(l+f|0)==0?d|1073741824:d&-1073741825;d=((l>>>31)+(f>>>31)+(((l&2147483647)+(f&2147483647)|0)>>>31)&2|0)==0?d&-536870913:d|536870912;s[718]=(((l&2147483647)+(f&2147483647)|0)>>>31|0)==(((l>>>31)+(f>>>31)+(((l&2147483647)+(f&2147483647)|0)>>>31)|0)>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}if((d&63488|0)==10240){if(r[3440]|0){f=s[160]|0;s[p+360>>2]=d>>>8&7;s[p+360+4>>2]=d&255;mt(f,1676,p+360|0)|0}h=s[2784+((d>>>8&7)<<2)>>2]|0;f=s[718]|0;f=(h-(d&255)|0)<0?f|-2147483648:f&2147483647;f=(h-(d&255)|0)==0?f|1073741824:f&-1073741825;l=(h>>>31)+1+((-2147483648-(d&255)+(h&2147483647)|0)>>>31)|0;f=(l&2|0)==0?f&-536870913:f|536870912;s[718]=((-2147483648-(d&255)+(h&2147483647)|0)>>>31|0)==(l>>>1&1|0)?f&-268435457:f|268435456;d=0;$=p;return d|0}if((d&65472|0)==17024){if(r[3440]|0){f=s[160]|0;s[p+368>>2]=d&7;s[p+368+4>>2]=d>>>3&7;mt(f,1693,p+368|0)|0}h=s[2784+((d&7)<<2)>>2]|0;l=s[2784+((d>>>3&7)<<2)>>2]|0;d=s[718]|0;d=(h-l|0)<0?d|-2147483648:d&2147483647;d=(h-l|0)==0?d|1073741824:d&-1073741825;f=(~l>>>31)+(h>>>31)+(((h&2147483647)+1+(~l&2147483647)|0)>>>31)|0;d=(f&2|0)==0?d&-536870913:d|536870912;s[718]=(((h&2147483647)+1+(~l&2147483647)|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}if((d&65280|0)==17664){if(r[3440]|0){f=s[160]|0;s[p+376>>2]=d>>>4&8|d&7;s[p+376+4>>2]=d>>>3&15;mt(f,1693,p+376|0)|0}t=s[2784+((d>>>4&8|d&7)<<2)>>2]|0;if((d>>>4&8|d&7|0)==15){if(t&1|0){f=s[160]|0;s[p+384>>2]=t;mt(f,1028,p+384|0)|0}e=t&-2}else e=t;t=s[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){d=s[160]|0;s[p+392>>2]=t;mt(d,1028,p+392|0)|0}t=t&-2}f=e-t|0;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;d=(f|0)==0?d|1073741824:d&-1073741825;f=~t;l=((e&2147483647)+1+(f&2147483647)|0)>>>31;f=(f>>>31)+(e>>>31)+l|0;d=(f&2|0)==0?d&-536870913:d|536870912;s[718]=(l|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}if((d&65512|0)==46688&(r[3440]|0)!=0)ft(1707,9,1,s[160]|0)|0;t=d&65472;switch(t<<16>>16){case 17920:{if(r[3440]|0){f=s[160]|0;s[p+400>>2]=d&7;s[p+400+4>>2]=d>>>3&7;mt(f,1717,p+400|0)|0}s[2784+((d&7)<<2)>>2]=s[2784+((d>>>3&7)<<2)>>2];d=0;$=p;return d|0}case 16448:{if(r[3440]|0){f=s[160]|0;s[p+408>>2]=d&7;s[p+408+4>>2]=d>>>3&7;mt(f,1730,p+408|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]^s[2784+((d&7)<<2)>>2];s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}default:{t:do{if(e<<16>>16<26624){switch(e<<16>>16){case-14336:break;default:break t}if(!(r[3440]|0))e=d&1;else{e=s[160]|0;s[p+416>>2]=d>>>8&7;mt(e,1744,p+416|0)|0;if(!(d&1))t=0;else{s[p+424>>2]=0;mt(e,1757,p+424|0)|0;t=1}if(d&2){if(t|0)Lt(44,e)|0;s[p+1168>>2]=1;mt(e,1757,p+1168|0)|0;t=t+1|0}if(d&4){if(t|0)Lt(44,e)|0;s[p+1176>>2]=2;mt(e,1757,p+1176|0)|0;t=t+1|0}if(d&8){if(t|0)Lt(44,e)|0;s[p+1184>>2]=3;mt(e,1757,p+1184|0)|0;t=t+1|0}if(d&16){if(t|0)Lt(44,e)|0;s[p+1192>>2]=4;mt(e,1757,p+1192|0)|0;t=t+1|0}if(d&32){if(t|0)Lt(44,e)|0;s[p+1200>>2]=5;mt(e,1757,p+1200|0)|0;t=t+1|0}if(d&64){if(t|0)Lt(44,e)|0;s[p+1208>>2]=6;mt(e,1757,p+1208|0)|0;t=t+1|0}if(d&128|0){if(t|0)Lt(44,e)|0;s[p+1216>>2]=7;mt(e,1757,p+1216|0)|0}ft(1761,2,1,e)|0;e=d&1}t=s[2784+((d>>>8&7)<<2)>>2]|0;if(e){s[696]=R(1,t|0)|0;t=t+4|0}if(d&2){s[697]=R(1,t|0)|0;t=t+4|0}if(d&4){s[698]=R(1,t|0)|0;t=t+4|0}if(d&8){s[699]=R(1,t|0)|0;t=t+4|0}if(d&16){s[700]=R(1,t|0)|0;t=t+4|0}if(d&32){s[701]=R(1,t|0)|0;t=t+4|0}if(d&64){s[702]=R(1,t|0)|0;t=t+4|0}if(d&128){s[703]=R(1,t|0)|0;t=t+4|0}if(1<<(d>>>8&7)&d|0){d=0;$=p;return d|0}s[2784+((d>>>8&7)<<2)>>2]=t;d=0;$=p;return d|0}else{switch(e<<16>>16){case 26624:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+432>>2]=d&7;s[p+432+4>>2]=d>>>3&7;s[p+432+8>>2]=d>>>4&124;mt(f,1764,p+432|0)|0}s[2784+((d&7)<<2)>>2]=R(1,(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>4&124)|0)|0;d=0;$=p;return d|0}}while(0);if((d&65024|0)==22528){if(r[3440]|0){f=s[160]|0;s[p+448>>2]=d&7;s[p+448+4>>2]=d>>>3&7;s[p+448+8>>2]=d>>>6&7;mt(f,1785,p+448|0)|0}s[2784+((d&7)<<2)>>2]=R(1,(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0)|0;d=0;$=p;return d|0}t:do{if(e<<16>>16<18432){switch(e<<16>>16){case-26624:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+480>>2]=d>>>8&7;s[p+480+4>>2]=d<<2&1020;mt(f,1824,p+480|0)|0}s[2784+((d>>>8&7)<<2)>>2]=R(1,(s[709]|0)+(d<<2&1020)|0)|0;d=0;$=p;return d|0}else{if(e<<16>>16>=30720){switch(e<<16>>16){case 30720:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+488>>2]=d&7;s[p+488+4>>2]=d>>>3&7;s[p+488+8>>2]=d>>>6&31;mt(f,1844,p+488|0)|0}l=(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>6&31)|0;f=R(3,l&-2|0)|0;s[2784+((d&7)<<2)>>2]=((l&1|0)==0?f:f>>>8)&255;d=0;$=p;return d|0}switch(e<<16>>16){case 18432:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+464>>2]=d>>>8&7;s[p+464+4>>2]=d<<2&1020;mt(f,1804,p+464|0)|0}t=s[711]|0;if(t&1|0){f=s[160]|0;s[p+472>>2]=t;mt(f,1028,p+472|0)|0}s[2784+((d>>>8&7)<<2)>>2]=R(1,(t&-4)+(d<<2&1020)|0)|0;d=0;$=p;return d|0}}while(0);if((d&65024|0)==23552){if(r[3440]|0){f=s[160]|0;s[p+504>>2]=d&7;s[p+504+4>>2]=d>>>3&7;s[p+504+8>>2]=d>>>6&7;mt(f,1866,p+504|0)|0}l=(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0;f=R(3,l&-2|0)|0;s[2784+((d&7)<<2)>>2]=((l&1|0)==0?f:f>>>8)&255;d=0;$=p;return d|0}if((d&63488|0)==34816){if(r[3440]|0){f=s[160]|0;s[p+520>>2]=d&7;s[p+520+4>>2]=d>>>3&7;s[p+520+8>>2]=d>>>5&62;mt(f,1886,p+520|0)|0}s[2784+((d&7)<<2)>>2]=(R(3,(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>5&62)|0)|0)&65535;d=0;$=p;return d|0}switch((d&65024)<<16>>16){case 23040:{if(r[3440]|0){f=s[160]|0;s[p+536>>2]=d&7;s[p+536+4>>2]=d>>>3&7;s[p+536+8>>2]=d>>>6&7;mt(f,1908,p+536|0)|0}s[2784+((d&7)<<2)>>2]=(R(3,(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0)|0)&65535;d=0;$=p;return d|0}case 22016:{if(r[3440]|0){f=s[160]|0;s[p+552>>2]=d&7;s[p+552+4>>2]=d>>>3&7;s[p+552+8>>2]=d>>>6&7;mt(f,1928,p+552|0)|0}l=(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0;f=R(3,l&-2|0)|0;f=(l&1|0)==0?f:f>>>8;s[2784+((d&7)<<2)>>2]=(f&128|0)==0?f&255:f|-256;d=0;$=p;return d|0}case 24064:{if(r[3440]|0){f=s[160]|0;s[p+568>>2]=d&7;s[p+568+4>>2]=d>>>3&7;s[p+568+8>>2]=d>>>6&7;mt(f,1949,p+568|0)|0}f=R(3,(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0)|0;s[2784+((d&7)<<2)>>2]=(f&32768|0)==0?f&65535:f|-65536;d=0;$=p;return d|0}default:{if(!(d&63488)){if(r[3440]|0){f=s[160]|0;s[p+584>>2]=d&7;s[p+584+4>>2]=d>>>3&7;s[p+584+8>>2]=d>>>6&31;mt(f,1970,p+584|0)|0}t=s[2784+((d>>>3&7)<<2)>>2]|0;if(!(d>>>6&31))e=s[718]|0;else{e=s[718]|0;e=(t&1<<32-(d>>>6&31)|0)==0?e&-536870913:e|536870912;s[718]=e;t=t<<(d>>>6&31)}s[2784+((d&7)<<2)>>2]=t;d=(t|0)<0?e|-2147483648:e&2147483647;s[718]=(t|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}if((d&65472|0)==16512){if(r[3440]|0){f=s[160]|0;s[p+600>>2]=d&7;s[p+600+4>>2]=d>>>3&7;mt(f,1990,p+600|0)|0}t=s[2784+((d&7)<<2)>>2]|0;e=s[2784+((d>>>3&7)<<2)>>2]&255;do{if(!e){e=s[718]|0;o=357}else{if(e>>>0<32){o=s[718]|0;o=(1<<32-e&t|0)==0?o&-536870913:o|536870912;s[718]=o;t=t<<e;e=o;o=357;break}if((e|0)==32){f=s[718]|0;t=(t&1|0)==0?f&-536870913:f|536870912}else t=s[718]&-536870913;s[718]=t;s[2784+((d&7)<<2)>>2]=0;t=t&1073741823;o=360}}while(0);do{if((o|0)==357){s[2784+((d&7)<<2)>>2]=t;if((t|0)>=0)if(!t){t=e&2147483647;o=360;break}else{t=e&1073741823;break}else{t=e&1073741823|-2147483648;break}}}while(0);if((o|0)==360)t=t|1073741824;s[718]=t;d=0;$=p;return d|0}if((d&63488|0)==2048){if(r[3440]|0){f=s[160]|0;s[p+608>>2]=d&7;s[p+608+4>>2]=d>>>3&7;s[p+608+8>>2]=d>>>6&31;mt(f,2004,p+608|0)|0}t=s[2784+((d>>>3&7)<<2)>>2]|0;do{if(d>>>6&31){e=s[718]|0;e=(t&1<<(d>>>6&31)+-1|0)==0?e&-536870913:e|536870912;s[718]=e;s[2784+((d&7)<<2)>>2]=t>>>(d>>>6&31);if((t>>>(d>>>6&31)|0)>=0)if(!(t>>>(d>>>6&31))){t=e&1073741823;o=370;break}else{t=e&1073741823;break}else{t=e&1073741823|-2147483648;break}}else{o=s[718]|0;t=(t|0)>-1?o&-536870913:o|536870912;s[718]=t;s[2784+((d&7)<<2)>>2]=0;t=t&2147483647;o=370}}while(0);if((o|0)==370)t=t|1073741824;s[718]=t;d=0;$=p;return d|0}if((d&65472|0)==16576){if(r[3440]|0){f=s[160]|0;s[p+624>>2]=d&7;s[p+624+4>>2]=d>>>3&7;mt(f,2024,p+624|0)|0}t=s[2784+((d&7)<<2)>>2]|0;e=s[2784+((d>>>3&7)<<2)>>2]&255;do{if(!e){e=s[718]|0;o=383}else{if(e>>>0<32){o=s[718]|0;o=(1<<e+-1&t|0)==0?o&-536870913:o|536870912;s[718]=o;t=t>>>e;e=o;o=383;break}if((e|0)==32){f=s[718]|0;t=(t|0)>-1?f&-536870913:f|536870912}else t=s[718]&-536870913;s[718]=t;s[2784+((d&7)<<2)>>2]=0;t=t&1073741823;o=386}}while(0);do{if((o|0)==383){s[2784+((d&7)<<2)>>2]=t;if((t|0)>=0)if(!t){t=e&2147483647;o=386;break}else{t=e&1073741823;break}else{t=e&1073741823|-2147483648;break}}}while(0);if((o|0)==386)t=t|1073741824;s[718]=t;d=0;$=p;return d|0}if((d&63488|0)==8192){if(r[3440]|0){f=s[160]|0;s[p+632>>2]=d>>>8&7;s[p+632+4>>2]=d&255;mt(f,2038,p+632|0)|0}s[2784+((d>>>8&7)<<2)>>2]=d&255;f=s[718]&1073741823;s[718]=(d&255|0)==0?f|1073741824:f;d=0;$=p;return d|0}if((d&65472|0)==7168){if(r[3440]|0){f=s[160]|0;s[p+640>>2]=d&7;s[p+640+4>>2]=d>>>3&7;mt(f,2056,p+640|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=((f|0)==0?d|1073741824:d&-1879048193)&-805306369;d=0;$=p;return d|0}if((d&65280|0)==17920){if(r[3440]|0){f=s[160]|0;s[p+648>>2]=d>>>4&8|d&7;s[p+648+4>>2]=d>>>3&15;mt(f,2070,p+648|0)|0}t=s[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){f=s[160]|0;s[p+656>>2]=t;mt(f,1028,p+656|0)|0}t=t&-2}if((d>>>4&8|d&7|0)==15){s[711]=t+2&-2;d=0;$=p;return d|0}else{s[2784+((d>>>4&8|d&7)<<2)>>2]=t;d=0;$=p;return d|0}}switch(((d&65472)+-16960|0)>>>6&67108863|0){case 4:{if(r[3440]|0){f=s[160]|0;s[p+664>>2]=d&7;s[p+664+4>>2]=d>>>3&7;mt(f,2083,p+664|0)|0}f=y(s[2784+((d>>>3&7)<<2)>>2]|0,s[2784+((d&7)<<2)>>2]|0)|0;s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}case 6:{if(r[3440]|0){f=s[160]|0;s[p+672>>2]=d&7;s[p+672+4>>2]=d>>>3&7;mt(f,2097,p+672|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=~f;d=s[718]|0;d=(f|0)>-1?d|-2147483648:d&2147483647;s[718]=(f|0)==-1?d|1073741824:d&-1073741825;d=0;$=p;return d|0}case 0:{if(r[3440]|0){f=s[160]|0;s[p+680>>2]=d&7;s[p+680+4>>2]=d>>>3&7;mt(f,2111,p+680|0)|0}l=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=0-l;d=s[718]|0;d=(0-l|0)<0?d|-2147483648:d&2147483647;d=(l|0)==0?d|1073741824:d&-1073741825;f=(((~l&2147483647)+1|0)>>>31)+(~l>>>31)|0;d=(f&2|0)==0?d&-536870913:d|536870912;s[718]=(((~l&2147483647)+1|0)>>>31|0)==(f>>>1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}case 3:{if(r[3440]|0){f=s[160]|0;s[p+688>>2]=d&7;s[p+688+4>>2]=d>>>3&7;mt(f,2125,p+688|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|s[2784+((d&7)<<2)>>2];s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}default:switch((d&65024)<<16>>16){case-17408:{if(!(r[3440]|0))e=d&1;else{e=s[160]|0;ft(2139,5,1,e)|0;if(!(d&1))t=0;else{s[p+696>>2]=0;mt(e,1757,p+696|0)|0;t=1}if(d&2){if(t|0)Lt(44,e)|0;s[p+1056>>2]=1;mt(e,1757,p+1056|0)|0;t=t+1|0}if(d&4){if(t|0)Lt(44,e)|0;s[p+1064>>2]=2;mt(e,1757,p+1064|0)|0;t=t+1|0}if(d&8){if(t|0)Lt(44,e)|0;s[p+1072>>2]=3;mt(e,1757,p+1072|0)|0;t=t+1|0}if(d&16){if(t|0)Lt(44,e)|0;s[p+1080>>2]=4;mt(e,1757,p+1080|0)|0;t=t+1|0}if(d&32){if(t|0)Lt(44,e)|0;s[p+1088>>2]=5;mt(e,1757,p+1088|0)|0;t=t+1|0}if(d&64){if(t|0)Lt(44,e)|0;s[p+1096>>2]=6;mt(e,1757,p+1096|0)|0;t=t+1|0}if(d&128){if(t|0)Lt(44,e)|0;s[p+1104>>2]=7;mt(e,1757,p+1104|0)|0;t=t+1|0}if(d&256|0){if(t|0)Lt(44,e)|0;ft(2145,2,1,e)|0}ft(1761,2,1,e)|0;e=d&1}t=s[709]|0;if(e){s[696]=R(1,t|0)|0;t=t+4|0}if(d&2){s[697]=R(1,t|0)|0;t=t+4|0}if(d&4){s[698]=R(1,t|0)|0;t=t+4|0}if(d&8){s[699]=R(1,t|0)|0;t=t+4|0}if(d&16){s[700]=R(1,t|0)|0;t=t+4|0}if(d&32){s[701]=R(1,t|0)|0;t=t+4|0}if(d&64){s[702]=R(1,t|0)|0;t=t+4|0}if(d&128){s[703]=R(1,t|0)|0;t=t+4|0}if(d&256){e=R(1,t|0)|0;if(!(e&1)){d=s[160]|0;s[p+704>>2]=f;s[p+704+4>>2]=e;mt(d,2148,p+704|0)|0;e=e&-2}s[711]=e+2&-2;t=t+4|0}s[709]=t;d=0;$=p;return d|0}case-19456:{l=s[160]|0;if(!(r[3440]|0)){t=d&2;e=d&4;n=d&8;i=d&16;a=d&32;o=d&64;u=d&128;h=d&256;c=d&1}else{ft(2202,6,1,l)|0;if(!(d&1))t=0;else{s[p+712>>2]=0;mt(l,1757,p+712|0)|0;t=1}if(d&2){if(t|0)Lt(44,l)|0;s[p+1112>>2]=1;mt(l,1757,p+1112|0)|0;t=t+1|0}if(d&4){if(t|0)Lt(44,l)|0;s[p+1120>>2]=2;mt(l,1757,p+1120|0)|0;t=t+1|0}if(d&8){if(t|0)Lt(44,l)|0;s[p+1128>>2]=3;mt(l,1757,p+1128|0)|0;t=t+1|0}if(d&16){if(t|0)Lt(44,l)|0;s[p+1136>>2]=4;mt(l,1757,p+1136|0)|0;t=t+1|0}if(d&32){if(t|0)Lt(44,l)|0;s[p+1144>>2]=5;mt(l,1757,p+1144|0)|0;t=t+1|0}if(d&64){if(t|0)Lt(44,l)|0;s[p+1152>>2]=6;mt(l,1757,p+1152|0)|0;t=t+1|0}if(d&128){if(t|0)Lt(44,l)|0;s[p+1160>>2]=7;mt(l,1757,p+1160|0)|0;t=t+1|0}if(d&256|0){if(t|0)Lt(44,l)|0;ft(2209,2,1,l)|0}ft(1761,2,1,l)|0;t=d&2;e=d&4;n=d&8;i=d&16;a=d&32;o=d&64;u=d&128;h=d&256;c=d&1}a=(s[709]|0)-(c+(t>>>1)+(e>>>2)+(n>>>3)+(i>>>4)+(a>>>5)+(o>>>6)+(u>>>7)+(h>>>8)<<2)|0;t=a;n=0;i=1;while(1){if(!(i&d))e=t;else{e=s[2784+(n<<2)>>2]|0;t:do{if((t&-268435456|0)==-536870912){c=t+536813552|0;switch(c>>>2|c<<30|0){case 0:{c=s[714]|0;s[714]=e&65543;if((e&1|0)==0|(c&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=e&16777215;break t}case 2:{s[716]=e&16777215;break t}case 3:break t;default:break t}}else I(2,t|0,e|0)|0}while(0);e=t+4|0}n=n+1|0;if((n|0)==8)break;else{t=e;i=i<<1&254}}do{if(h|0){t=s[710]|0;t:do{if((e&-268435456|0)==-536870912){d=e+536813552|0;switch(d>>>2|d<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}}else I(2,e|0,t|0)|0}while(0);if(t&1|0)break;s[p+720>>2]=f;s[p+720+4>>2]=t;mt(l,2212,p+720|0)|0}}while(0);s[709]=a;d=0;$=p;return d|0}default:{t:do{if(t<<16>>16<-17728)switch(t<<16>>16){case-17920:{if(r[3440]|0){f=s[160]|0;s[p+728>>2]=d&7;s[p+728+4>>2]=d>>>3&7;mt(f,2267,p+728|0)|0}s[2784+((d&7)<<2)>>2]=Qt(s[2784+((d>>>3&7)<<2)>>2]|0)|0;d=0;$=p;return d|0}case-17856:{if(r[3440]|0){f=s[160]|0;s[p+736>>2]=d&7;s[p+736+4>>2]=d>>>3&7;mt(f,2280,p+736|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=f<<8&65280|f>>>8&255|f>>>16<<24|f>>>24<<16;d=0;$=p;return d|0}default:break t}else{if(t<<16>>16<16768){switch(t<<16>>16){case-17728:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+744>>2]=d&7;s[p+744+4>>2]=d>>>3&7;mt(f,2295,p+744|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=(f&128|0)==0?f<<8&65280|f>>>8&255:f<<8&65280|f>>>8&255|-65536;d=0;$=p;return d|0}switch(t<<16>>16){case 16832:break;case 16768:{if(r[3440]|0){f=s[160]|0;s[p+760>>2]=d&7;s[p+760+4>>2]=d>>>3&7;mt(f,2324,p+760|0)|0}e=s[2784+((d&7)<<2)>>2]|0;n=s[2784+((d>>>3&7)<<2)>>2]|0;f=s[718]|0;s[2784+((d&7)<<2)>>2]=e-n+-1+(f>>>29&1);t=(e-n+-1+(f>>>29&1)|0)<0?f|-2147483648:f&2147483647;t=(e-n+-1+(f>>>29&1)|0)==0?t|1073741824:t&-1073741825;s[718]=t;if(!(t&536870912)){f=(~n>>>31)+(e>>>31)+(((~n&2147483647)+(e&2147483647)|0)>>>31)|0;d=(f&2|0)==0?t&-536870913:t|536870912;s[718]=(((~n&2147483647)+(e&2147483647)|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}else{f=(~n>>>31)+(e>>>31)+(((~n&2147483647)+(e&2147483647)+1|0)>>>31)|0;d=(f&2|0)==0?t&-536870913:t|536870912;s[718]=(((~n&2147483647)+(e&2147483647)+1|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}}default:break t}if(r[3440]|0){f=s[160]|0;s[p+752>>2]=d&7;s[p+752+4>>2]=d>>>3&7;mt(f,2310,p+752|0)|0}t=s[2784+((d&7)<<2)>>2]|0;e=s[2784+((d>>>3&7)<<2)>>2]|0;do{if(e&255)if(!(e&31)){e=s[718]|0;e=(t|0)>-1?e&-536870913:e|536870912;s[718]=e;break}else{f=s[718]|0;f=(1<<(e&31)+-1&t|0)==0?f&-536870913:f|536870912;s[718]=f;t=t<<32-(e&31)|t>>>(e&31);e=f;break}else e=s[718]|0}while(0);s[2784+((d&7)<<2)>>2]=t;d=(t|0)<0?e|-2147483648:e&2147483647;s[718]=(t|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}}while(0);if((d&65527|0)==46672){ft(2337,23,1,s[160]|0)|0;d=1;$=p;return d|0}t:do{if(e<<16>>16<24576){switch(e<<16>>16){case-16384:break;default:break t}if(r[3440]|0){e=s[160]|0;s[p+768>>2]=d>>>8&7;mt(e,2361,p+768|0)|0;if(!(d&1))t=0;else{s[p+776>>2]=0;mt(e,1757,p+776|0)|0;t=1}if(d&2){if(t|0)Lt(44,e)|0;s[p+1e3>>2]=1;mt(e,1757,p+1e3|0)|0;t=t+1|0}if(d&4){if(t|0)Lt(44,e)|0;s[p+1008>>2]=2;mt(e,1757,p+1008|0)|0;t=t+1|0}if(d&8){if(t|0)Lt(44,e)|0;s[p+1016>>2]=3;mt(e,1757,p+1016|0)|0;t=t+1|0}if(d&16){if(t|0)Lt(44,e)|0;s[p+1024>>2]=4;mt(e,1757,p+1024|0)|0;t=t+1|0}if(d&32){if(t|0)Lt(44,e)|0;s[p+1032>>2]=5;mt(e,1757,p+1032|0)|0;t=t+1|0}if(d&64){if(t|0)Lt(44,e)|0;s[p+1040>>2]=6;mt(e,1757,p+1040|0)|0;t=t+1|0}if(d&128|0){if(t|0)Lt(44,e)|0;s[p+1048>>2]=7;mt(e,1757,p+1048|0)|0}ft(1761,2,1,e)|0}n=1;i=0;t=s[2784+((d>>>8&7)<<2)>>2]|0;while(1){if(n&d){e=s[2784+(i<<2)>>2]|0;e:do{if((t&-268435456|0)==-536870912){f=t+536813552|0;switch(f>>>2|f<<30|0){case 0:{f=s[714]|0;s[714]=e&65543;if((e&1|0)==0|(f&1|0)!=0)break e;s[716]=s[715];break e}case 1:{s[715]=e&16777215;break e}case 2:{s[716]=e&16777215;break e}case 3:break e;default:break e}}else I(2,t|0,e|0)|0}while(0);t=t+4|0}i=i+1|0;if((i|0)==8)break;else n=n<<1&254}s[2784+((d>>>8&7)<<2)>>2]=t;d=0;$=p;return d|0}else{switch(e<<16>>16){case 24576:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+784>>2]=d&7;s[p+784+4>>2]=d>>>3&7;s[p+784+8>>2]=d>>>4&124;mt(f,2374,p+784|0)|0}e=(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>4&124)|0;t=s[2784+((d&7)<<2)>>2]|0;if((e&-268435456|0)!=-536870912){I(2,e|0,t|0)|0;d=0;$=p;return d|0}switch((e+536813552|0)>>>2|e+536813552<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0){d=0;$=p;return d|0}s[716]=s[715];d=0;$=p;return d|0}case 1:{s[715]=t&16777215;d=0;$=p;return d|0}case 2:{s[716]=t&16777215;d=0;$=p;return d|0}case 3:{d=0;$=p;return d|0}default:{d=0;$=p;return d|0}}}}while(0);if((d&65024|0)==20480){if(r[3440]|0){f=s[160]|0;s[p+800>>2]=d&7;s[p+800+4>>2]=d>>>3&7;s[p+800+8>>2]=d>>>6&7;mt(f,2395,p+800|0)|0}e=(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0;t=s[2784+((d&7)<<2)>>2]|0;if((e&-268435456|0)!=-536870912){I(2,e|0,t|0)|0;d=0;$=p;return d|0}switch((e+536813552|0)>>>2|e+536813552<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0){d=0;$=p;return d|0}s[716]=s[715];d=0;$=p;return d|0}case 1:{s[715]=t&16777215;d=0;$=p;return d|0}case 2:{s[716]=t&16777215;d=0;$=p;return d|0}case 3:{d=0;$=p;return d|0}default:{d=0;$=p;return d|0}}}t:do{if(e<<16>>16<28672){switch(e<<16>>16){case-28672:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+816>>2]=d>>>8&7;s[p+816+4>>2]=d<<2&1020;mt(f,2414,p+816|0)|0}e=(s[709]|0)+(d<<2&1020)|0;t=s[2784+((d>>>8&7)<<2)>>2]|0;if((e&-268435456|0)!=-536870912){I(2,e|0,t|0)|0;d=0;$=p;return d|0}switch((e+536813552|0)>>>2|e+536813552<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0){d=0;$=p;return d|0}s[716]=s[715];d=0;$=p;return d|0}case 1:{s[715]=t&16777215;d=0;$=p;return d|0}case 2:{s[716]=t&16777215;d=0;$=p;return d|0}case 3:{d=0;$=p;return d|0}default:{d=0;$=p;return d|0}}}else{switch(e<<16>>16){case 28672:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+824>>2]=d&7;s[p+824+4>>2]=d>>>3&7;s[p+824+8>>2]=d>>>6&31;mt(f,2434,p+824|0)|0}n=(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>6&31)|0;t=s[2784+((d&7)<<2)>>2]|0;e=R(3,n&-2|0)|0;if(!(n&1))t=e&65280|t&255;else t=e&255|t<<8;I(5,n&-2|0,t&65535|0)|0;d=0;$=p;return d|0}}while(0);if((d&65024|0)==21504){if(r[3440]|0){f=s[160]|0;s[p+840>>2]=d&7;s[p+840+4>>2]=d>>>3&7;s[p+840+8>>2]=d>>>6&7;mt(f,2456,p+840|0)|0}n=(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0;t=s[2784+((d&7)<<2)>>2]|0;e=R(3,n&-2|0)|0;if(!(n&1))t=e&65280|t&255;else t=e&255|t<<8;I(5,n&-2|0,t&65535|0)|0;d=0;$=p;return d|0}if((d&63488|0)==32768){if(r[3440]|0){f=s[160]|0;s[p+856>>2]=d&7;s[p+856+4>>2]=d>>>3&7;s[p+856+8>>2]=d>>>5&62;mt(f,2476,p+856|0)|0}I(5,(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>5&62)|0,s[2784+((d&7)<<2)>>2]&65535|0)|0;d=0;$=p;return d|0}t:do{if((d&65024)<<16>>16<20992){switch((d&65024)<<16>>16){case 7680:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+888>>2]=d&7;s[p+888+4>>2]=d>>>3&7;s[p+888+8>>2]=d>>>6&7;mt(f,2518,p+888|0)|0}h=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=h-(d>>>6&7);f=s[718]|0;f=(h-(d>>>6&7)|0)<0?f|-2147483648:f&2147483647;f=(h-(d>>>6&7)|0)==0?f|1073741824:f&-1073741825;l=(h>>>31)+1+((-2147483648-(d>>>6&7)+(h&2147483647)|0)>>>31)|0;f=(l&2|0)==0?f&-536870913:f|536870912;s[718]=((-2147483648-(d>>>6&7)+(h&2147483647)|0)>>>31|0)==(l>>>1&1|0)?f&-268435457:f|268435456;d=0;$=p;return d|0}else{switch((d&65024)<<16>>16){case 20992:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+872>>2]=d&7;s[p+872+4>>2]=d>>>3&7;s[p+872+8>>2]=d>>>6&7;mt(f,2498,p+872|0)|0}I(5,(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0,s[2784+((d&7)<<2)>>2]&65535|0)|0;d=0;$=p;return d|0}}while(0);if((d&63488|0)==14336){if(r[3440]|0){f=s[160]|0;s[p+904>>2]=d>>>8&7;s[p+904+4>>2]=d&255;mt(f,2538,p+904|0)|0}h=s[2784+((d>>>8&7)<<2)>>2]|0;s[2784+((d>>>8&7)<<2)>>2]=h-(d&255);f=s[718]|0;f=(h-(d&255)|0)<0?f|-2147483648:f&2147483647;f=(h-(d&255)|0)==0?f|1073741824:f&-1073741825;l=(h>>>31)+1+((-2147483648-(d&255)+(h&2147483647)|0)>>>31)|0;f=(l&2|0)==0?f&-536870913:f|536870912;s[718]=((-2147483648-(d&255)+(h&2147483647)|0)>>>31|0)==(l>>>1&1|0)?f&-268435457:f|268435456;d=0;$=p;return d|0}if((d&65024|0)==6656){if(r[3440]|0){f=s[160]|0;s[p+912>>2]=d&7;s[p+912+4>>2]=d>>>3&7;s[p+912+8>>2]=d>>>6&7;mt(f,2556,p+912|0)|0}h=s[2784+((d>>>3&7)<<2)>>2]|0;l=s[2784+((d>>>6&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=h-l;d=s[718]|0;d=(h-l|0)<0?d|-2147483648:d&2147483647;d=(h-l|0)==0?d|1073741824:d&-1073741825;f=(~l>>>31)+(h>>>31)+(((h&2147483647)+1+(~l&2147483647)|0)>>>31)|0;d=(f&2|0)==0?d&-536870913:d|536870912;s[718]=(((h&2147483647)+1+(~l&2147483647)|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}if((d&65408|0)==45184){if(r[3440]|0){f=s[160]|0;s[p+928>>2]=d<<2&508;mt(f,2574,p+928|0)|0}s[709]=(s[709]|0)-(d<<2&508);d=0;$=p;return d|0}if((d&65280|0)==57088){if(r[3440]|0){f=s[160]|0;s[p+936>>2]=d&255;mt(f,2590,p+936|0)|0}if((d&255|0)==204){s[696]=s[718];d=0;$=p;return d|0}else{f=s[160]|0;s[p+944>>2]=d&255;mt(f,2602,p+944|0)|0;d=1;$=p;return d|0}}t:do{if(t<<16>>16>=-19840){if(t<<16>>16<-19776){switch(t<<16>>16){case-19840:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+984>>2]=d&7;s[p+984+4>>2]=d>>>3&7;mt(f,2671,p+984|0)|0}s[2784+((d&7)<<2)>>2]=s[2784+((d>>>3&7)<<2)>>2]&65535;d=0;$=p;return d|0}if(t<<16>>16<16896){switch(t<<16>>16){case-19776:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+976>>2]=d&7;s[p+976+4>>2]=d>>>3&7;mt(f,2657,p+976|0)|0}s[2784+((d&7)<<2)>>2]=s[2784+((d>>>3&7)<<2)>>2]&255;d=0;$=p;return d|0}else{switch(t<<16>>16){case 16896:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+968>>2]=d&7;s[p+968+4>>2]=d>>>3&7;mt(f,2644,p+968|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]&s[2784+((d&7)<<2)>>2];d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}}else switch(t<<16>>16){case-19904:{if(r[3440]|0){f=s[160]|0;s[p+952>>2]=d&7;s[p+952+4>>2]=d>>>3&7;mt(f,2616,p+952|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=(f&128|0)==0?f&255:f|-256;d=0;$=p;return d|0}case-19968:{if(r[3440]|0){f=s[160]|0;s[p+960>>2]=d&7;s[p+960+4>>2]=d>>>3&7;mt(f,2630,p+960|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=(f&32768|0)==0?f&65535:f|-65536;d=0;$=p;return d|0}default:break t}}while(0);f=s[160]|0;s[p+992>>2]=a;s[p+992+4>>2]=d;mt(f,2685,p+992|0)|0;d=1;$=p;return d|0}}}}}}}}}}}return 0}function it(t){t=t|0;var e=0;e=$;$=$+16|0;s[e>>2]=ct(s[t+60>>2]|0)|0;t=ot(C(6,e|0)|0)|0;$=e;return t|0}function st(t,e,n){t=t|0;e=e|0;n=n|0;var r=0,i=0,a=0,o=0,u=0,c=0,h=0;o=$;$=$+32|0;a=s[t+28>>2]|0;s[o>>2]=a;a=(s[t+20>>2]|0)-a|0;s[o+4>>2]=a;s[o+8>>2]=e;s[o+12>>2]=n;i=2;e=a+n|0;a=o;while(1){if(!((S(s[t+60>>2]|0,a|0,i|0,o+16|0)|0)<<16>>16))r=s[o+16>>2]|0;else{s[o+16>>2]=-1;r=-1}if((e|0)==(r|0)){e=6;break}if((r|0)<0){e=8;break}h=s[a+4>>2]|0;c=r>>>0>h>>>0;u=c?a+8|0:a;h=r-(c?h:0)|0;s[u>>2]=(s[u>>2]|0)+h;s[u+4>>2]=(s[u+4>>2]|0)-h;i=i+(c<<31>>31)|0;e=e-r|0;a=u}if((e|0)==6){h=s[t+44>>2]|0;s[t+16>>2]=h+(s[t+48>>2]|0);s[t+28>>2]=h;s[t+20>>2]=h}else if((e|0)==8){s[t+16>>2]=0;s[t+28>>2]=0;s[t+20>>2]=0;s[t>>2]=s[t>>2]|32;if((i|0)==2)n=0;else n=n-(s[a+4>>2]|0)|0}$=o;return n|0}function at(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;var i=0;i=$;$=$+32|0;s[i+8>>2]=s[t+60>>2];s[i+8+4>>2]=n;s[i+8+8>>2]=e;s[i+8+12>>2]=i;s[i+8+16>>2]=r;if((ot(T(140,i+8|0)|0)|0)<0){s[i>>2]=-1;s[i+4>>2]=-1;t=-1;e=-1}else{t=s[i+4>>2]|0;e=s[i>>2]|0}k(t|0);$=i;return e|0}function ot(t){t=t|0;if(t>>>0>4294963200){s[(ut()|0)>>2]=0-t;t=-1}return t|0}function ut(){return 2940}function ct(t){t=t|0;return t|0}function ht(t){t=t|0;return(t+-48|0)>>>0<10|0}function lt(){return 644}function ft(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;var i=0,a=0;i=y(n,e)|0;n=(e|0)==0?0:n;if((s[r+76>>2]|0)>-1){a=(pt(r)|0)==0;t=bt(t,i,r)|0;if(!a)dt(r)}else t=bt(t,i,r)|0;if((t|0)!=(i|0))n=(t>>>0)/(e>>>0)|0;return n|0}function dt(t){t=t|0;return}function pt(t){t=t|0;return 1}function _t(t,e){t=t|0;e=e|0;var n=0,i=0,o=0,u=0;u=$;$=$+16|0;r[u>>0]=e;n=s[t+16>>2]|0;if(!n)if(!(gt(t)|0)){i=s[t+16>>2]|0;o=4}else n=-1;else{i=n;o=4}do{if((o|0)==4){n=s[t+20>>2]|0;if(n>>>0<i>>>0?(e&255|0)!=(r[t+75>>0]|0):0){s[t+20>>2]=n+1;r[n>>0]=e;n=e&255;break}if((le[s[t+36>>2]&1](t,u,1)|0)==1)n=a[u>>0]|0;else n=-1}}while(0);$=u;return n|0}function gt(t){t=t|0;var e=0;e=r[t+74>>0]|0;r[t+74>>0]=e+255|e;e=s[t>>2]|0;if(!(e&8)){s[t+8>>2]=0;s[t+4>>2]=0;e=s[t+44>>2]|0;s[t+28>>2]=e;s[t+20>>2]=e;s[t+16>>2]=e+(s[t+48>>2]|0);t=0}else{s[t>>2]=e|32;t=-1}return t|0}function bt(t,e,n){t=t|0;e=e|0;n=n|0;var i=0,a=0,o=0,u=0;i=s[n+16>>2]|0;if(!i)if(!(gt(n)|0)){a=s[n+16>>2]|0;o=5}else i=0;else{a=i;o=5}t:do{if((o|0)==5){i=s[n+20>>2]|0;if((a-i|0)>>>0<e>>>0){i=le[s[n+36>>2]&1](n,t,e)|0;break}e:do{if((r[n+75>>0]|0)<0|(e|0)==0){u=0;a=t}else{o=e;while(1){a=o+-1|0;if((r[t+a>>0]|0)==10)break;if(!a){u=0;a=t;break e}else o=a}i=le[s[n+36>>2]&1](n,t,o)|0;if(i>>>0<o>>>0)break t;u=o;a=t+o|0;e=e-o|0;i=s[n+20>>2]|0}}while(0);Jt(i|0,a|0,e|0)|0;s[n+20>>2]=(s[n+20>>2]|0)+e;i=u+e|0}}while(0);return i|0}function vt(t,e,n){t=t|0;e=e|0;n=n|0;var i=0,a=0,o=0;t:do{if((n|0)!=0&(t&3|0)!=0){i=n;while(1){if((r[t>>0]|0)==(e&255)<<24>>24){a=6;break t}t=t+1|0;n=i+-1|0;if((n|0)!=0&(t&3|0)!=0)i=n;else{i=n;n=(n|0)!=0;a=5;break}}}else{i=n;n=(n|0)!=0;a=5}}while(0);if((a|0)==5)if(n)a=6;else a=16;t:do{if((a|0)==6){if((r[t>>0]|0)==(e&255)<<24>>24)if(!i){a=16;break}else break;n=y(e&255,16843009)|0;e:do{if(i>>>0>3)while(1){o=s[t>>2]^n;if((o&-2139062144^-2139062144)&o+-16843009|0)break e;t=t+4|0;i=i+-4|0;if(i>>>0<=3){a=11;break}}else a=11}while(0);if((a|0)==11)if(!i){a=16;break}while(1){if((r[t>>0]|0)==(e&255)<<24>>24)break t;i=i+-1|0;if(!i){a=16;break}else t=t+1|0}}}while(0);if((a|0)==16)t=0;return t|0}function mt(t,e,n){t=t|0;e=e|0;n=n|0;var r=0;r=$;$=$+16|0;s[r>>2]=n;n=yt(t,e,r)|0;$=r;return n|0}function yt(t,e,n){t=t|0;e=e|0;n=n|0;return kt(t,e,n,1,1)|0}function wt(t,e,n,i,o,u){t=t|0;e=+e;n=n|0;i=i|0;o=o|0;u=u|0;var c=0,h=0,l=0,f=0,d=0.0,p=0,_=0,g=0,b=0,v=0,m=0,w=0,A=0,k=0,x=0,T=0,C=0;C=$;$=$+560|0;s[C+536>>2]=0;T=C+540+12|0;Mt(e)|0;c=E()|0;if((c|0)<0){Mt(-e)|0;e=-e;x=1;A=2737;c=E()|0}else{x=(o&2049|0)!=0&1;A=(o&2048|0)==0?(o&1|0)==0?2738:2743:2740}do{if(0==0&(c&2146435072|0)==2146435072){c=x+3|0;Bt(t,32,n,c,o&-65537);xt(t,A,x);xt(t,e!=e|0.0!=0.0?u&32|0?2764:2768:u&32|0?2756:2760,3);Bt(t,32,n,c,o^8192)}else{d=+Ft(e,C+536|0)*2.0;if(d!=0.0)s[C+536>>2]=(s[C+536>>2]|0)+-1;if((u|32|0)==97){_=(u&32|0)==0?A:A+9|0;p=x|2;do{if(!(i>>>0>11|(12-i|0)==0)){e=8.0;c=12-i|0;do{c=c+-1|0;e=e*16.0}while((c|0)!=0);if((r[_>>0]|0)==45){e=-(e+(-d-e));break}else{e=d+e-e;break}}else e=d}while(0);h=s[C+536>>2]|0;c=(h|0)<0?0-h|0:h;c=It(c,((c|0)<0)<<31>>31,T)|0;if((c|0)==(T|0)){r[C+540+11>>0]=48;c=C+540+11|0}r[c+-1>>0]=(h>>31&2)+43;f=c+-2|0;r[f>>0]=u+15;c=C;do{x=~~e;h=c+1|0;r[c>>0]=u&32|a[480+x>>0];e=(e-+(x|0))*16.0;if((h-C|0)==1?!((o&8|0)==0&((i|0)<1&e==0.0)):0){r[h>>0]=46;c=c+2|0}else c=h}while(e!=0.0);l=c;if((i|0)!=0?(-2-C+l|0)<(i|0):0){i=i+2+T-f|0;c=T;h=f}else{i=T-C-f+l|0;c=T;h=f}T=i+p|0;Bt(t,32,n,T,o);xt(t,_,p);Bt(t,48,n,T,o^65536);xt(t,C,l-C|0);c=c-h|0;Bt(t,48,i-(l-C+c)|0,0,0);xt(t,f,c);Bt(t,32,n,T,o^8192);c=T;break}h=(i|0)<0?6:i;if(d!=0.0){c=(s[C+536>>2]|0)+-28|0;s[C+536>>2]=c;e=d*268435456.0}else{e=d;c=s[C+536>>2]|0}k=(c|0)<0?C+32|0:C+32+288|0;i=k;do{m=~~e>>>0;s[i>>2]=m;i=i+4|0;e=(e-+(m>>>0))*1.0e9}while(e!=0.0);if((c|0)>0){p=k;while(1){f=(c|0)<29?c:29;c=i+-4|0;if(c>>>0>=p>>>0){l=0;do{b=Xt(s[c>>2]|0,0,f|0)|0;b=$t(b|0,E()|0,l|0,0)|0;v=E()|0;l=Vt(b|0,v|0,1e9,0)|0;m=zt(l|0,E()|0,1e9,0)|0;m=Ht(b|0,v|0,m|0,E()|0)|0;E()|0;s[c>>2]=m;c=c+-4|0}while(c>>>0>=p>>>0);if(l){m=p+-4|0;s[m>>2]=l;l=m}else l=p}else l=p;t:do{if(i>>>0>l>>>0){c=i;while(1){i=c+-4|0;if(s[i>>2]|0){i=c;break t}if(i>>>0>l>>>0)c=i;else break}}}while(0);c=(s[C+536>>2]|0)-f|0;s[C+536>>2]=c;if((c|0)>0)p=l;else break}}else l=k;if((c|0)<0){do{p=0-c|0;p=(p|0)<9?p:9;if(l>>>0<i>>>0){f=0;c=l;do{m=s[c>>2]|0;s[c>>2]=(m>>>p)+f;f=y(m&(1<<p)+-1,1e9>>>p)|0;c=c+4|0}while(c>>>0<i>>>0);c=(s[l>>2]|0)==0?l+4|0:l;if(!f)l=c;else{s[i>>2]=f;i=i+4|0;l=c}}else l=(s[l>>2]|0)==0?l+4|0:l;c=(u|32|0)==102?k:l;i=(i-c>>2|0)>(((h+25|0)/9|0)+1|0)?c+(((h+25|0)/9|0)+1<<2)|0:i;c=(s[C+536>>2]|0)+p|0;s[C+536>>2]=c}while((c|0)<0);c=l}else c=l;if(c>>>0<i>>>0){l=(k-c>>2)*9|0;p=s[c>>2]|0;if(p>>>0>=10){f=10;do{f=f*10|0;l=l+1|0}while(p>>>0>=f>>>0)}}else l=0;f=h-((u|32|0)==102?0:l)+(((h|0)!=0&(u|32|0)==103)<<31>>31)|0;if((f|0)<(((i-k>>2)*9|0)+-9|0)){_=k+4+(((f+9216|0)/9|0)+-1024<<2)|0;f=f+9216-(((f+9216|0)/9|0)*9|0)|0;if((f|0)<8){p=10;while(1){p=p*10|0;if((f|0)<7)f=f+1|0;else break}}else p=10;b=s[_>>2]|0;f=(b>>>0)/(p>>>0)|0;v=b-(y(f,p)|0)|0;g=(_+4|0)==(i|0);if(!(g&(v|0)==0)){e=(f&1|0)==0?9007199254740992.0:9007199254740994.0;m=p>>>1;d=v>>>0<m>>>0?.5:g&(v|0)==(m|0)?1.0:1.5;if(x){m=(r[A>>0]|0)==45;d=m?-d:d;e=m?-e:e}s[_>>2]=b-v;if(e+d!=e){m=b-v+p|0;s[_>>2]=m;if(m>>>0>999999999){f=_;while(1){l=f+-4|0;s[f>>2]=0;if(l>>>0<c>>>0){c=c+-4|0;s[c>>2]=0}m=(s[l>>2]|0)+1|0;s[l>>2]=m;if(m>>>0>999999999)f=l;else{_=l;break}}}l=(k-c>>2)*9|0;p=s[c>>2]|0;if(p>>>0<10)f=_;else{f=10;do{f=f*10|0;l=l+1|0}while(p>>>0>=f>>>0);f=_}}else f=_}else f=_;v=f+4|0;i=i>>>0>v>>>0?v:i;v=c}else v=c;_=0-l|0;t:do{if(i>>>0>v>>>0)while(1){c=i+-4|0;if(s[c>>2]|0){m=i;b=1;break t}if(c>>>0>v>>>0)i=c;else{m=c;b=0;break}}else{m=i;b=0}}while(0);do{if((u|32|0)==103){if((l|0)>-5?(h+(((h|0)!=0^1)&1)|0)>(l|0):0){f=u+-1|0;h=h+(((h|0)!=0^1)&1)+-1-l|0}else{f=u+-2|0;h=h+(((h|0)!=0^1)&1)+-1|0}if(!(o&8)){if(b?(w=s[m+-4>>2]|0,(w|0)!=0):0)if(!((w>>>0)%10|0)){c=0;i=10;do{i=i*10|0;c=c+1|0}while(!((w>>>0)%(i>>>0)|0|0))}else c=0;else c=9;i=((m-k>>2)*9|0)+-9|0;if((f|32|0)==102){u=i-c|0;u=(u|0)>0?u:0;h=(h|0)<(u|0)?h:u;break}else{u=i+l-c|0;u=(u|0)>0?u:0;h=(h|0)<(u|0)?h:u;break}}}else f=u}while(0);g=(h|0)!=0;i=g?1:o>>>3&1;p=(f|32|0)==102;if(p){_=0;c=(l|0)>0?l:0}else{c=(l|0)<0?_:l;c=It(c,((c|0)<0)<<31>>31,T)|0;if((T-c|0)<2)do{c=c+-1|0;r[c>>0]=48}while((T-c|0)<2);r[c+-1>>0]=(l>>31&2)+43;c=c+-2|0;r[c>>0]=f;_=c;c=T-c|0}c=x+1+h+i+c|0;Bt(t,32,n,c,o);xt(t,A,x);Bt(t,48,n,c,o^65536);if(p){f=v>>>0>k>>>0?k:v;l=f;do{i=It(s[l>>2]|0,0,C+9|0)|0;if((l|0)==(f|0)){if((i|0)==(C+9|0)){r[C+8>>0]=48;i=C+8|0}}else if(i>>>0>C>>>0){Yt(C|0,48,i-C|0)|0;do{i=i+-1|0}while(i>>>0>C>>>0)}xt(t,i,C+9-i|0);l=l+4|0}while(l>>>0<=k>>>0);if(!((o&8|0)==0&(g^1)))xt(t,2772,1);if(l>>>0<m>>>0&(h|0)>0)while(1){i=It(s[l>>2]|0,0,C+9|0)|0;if(i>>>0>C>>>0){Yt(C|0,48,i-C|0)|0;do{i=i+-1|0}while(i>>>0>C>>>0)}xt(t,i,(h|0)<9?h:9);l=l+4|0;i=h+-9|0;if(!(l>>>0<m>>>0&(h|0)>9)){h=i;break}else h=i}Bt(t,48,h+9|0,9,0)}else{p=b?m:v+4|0;if(v>>>0<p>>>0&(h|0)>-1){f=v;do{i=It(s[f>>2]|0,0,C+9|0)|0;if((i|0)==(C+9|0)){r[C+8>>0]=48;i=C+8|0}do{if((f|0)==(v|0)){l=i+1|0;xt(t,i,1);if((o&8|0)==0&(h|0)<1){i=l;break}xt(t,2772,1);i=l}else{if(i>>>0<=C>>>0)break;Yt(C|0,48,i+(0-C)|0)|0;do{i=i+-1|0}while(i>>>0>C>>>0)}}while(0);x=C+9-i|0;xt(t,i,(h|0)>(x|0)?x:h);h=h-x|0;f=f+4|0}while(f>>>0<p>>>0&(h|0)>-1)}Bt(t,48,h+18|0,18,0);xt(t,_,T-_|0)}Bt(t,32,n,c,o^8192)}}while(0);$=C;return((c|0)<(n|0)?n:c)|0}function At(t,e){t=t|0;e=e|0;var n=0.0,r=0;r=(s[e>>2]|0)+(8-1)&~(8-1);n=+c[r>>3];s[e>>2]=r+8;c[t>>3]=n;return}function kt(t,e,n,i,a){t=t|0;e=e|0;n=n|0;i=i|0;a=a|0;var o=0,u=0,c=0,h=0;h=$;$=$+224|0;o=h+160|0;u=o+40|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(u|0));s[h+208>>2]=s[n>>2];if((Et(0,e,h+208|0,h+80|0,h+160|0,i,a)|0)<0)n=-1;else{if((s[t+76>>2]|0)>-1)c=pt(t)|0;else c=0;u=s[t>>2]|0;if((r[t+74>>0]|0)<1)s[t>>2]=u&-33;if(!(s[t+48>>2]|0)){o=s[t+44>>2]|0;s[t+44>>2]=h;s[t+28>>2]=h;s[t+20>>2]=h;s[t+48>>2]=80;s[t+16>>2]=h+80;n=Et(t,e,h+208|0,h+80|0,h+160|0,i,a)|0;if(o){le[s[t+36>>2]&1](t,0,0)|0;n=(s[t+20>>2]|0)==0?-1:n;s[t+44>>2]=o;s[t+48>>2]=0;s[t+16>>2]=0;s[t+28>>2]=0;s[t+20>>2]=0}}else n=Et(t,e,h+208|0,h+80|0,h+160|0,i,a)|0;o=s[t>>2]|0;s[t>>2]=o|u&32;if(c|0)dt(t);n=(o&32|0)==0?n:-1}$=h;return n|0}function Et(t,e,n,a,o,u,h){t=t|0;e=e|0;n=n|0;a=a|0;o=o|0;u=u|0;h=h|0;var l=0,f=0,d=0,p=0,_=0,g=0,b=0,v=0,m=0,y=0,w=0,A=0,k=0,x=0,T=0,C=0;T=$;$=$+64|0;s[T+56>>2]=e;A=T+40|0;l=0;e=0;d=0;t:while(1){do{do{if((e|0)>-1)if((l|0)>(2147483647-e|0)){s[(ut()|0)>>2]=75;e=-1;break}else{e=l+e|0;break}}while(0);b=s[T+56>>2]|0;l=r[b>>0]|0;if(!(l<<24>>24)){w=92;break t}f=b;e:while(1){switch(l<<24>>24){case 37:{w=10;break e}case 0:{l=f;break e}default:{}}y=f+1|0;s[T+56>>2]=y;l=r[y>>0]|0;f=y}e:do{if((w|0)==10){w=0;l=f;do{if((r[f+1>>0]|0)!=37)break e;l=l+1|0;f=f+2|0;s[T+56>>2]=f}while((r[f>>0]|0)==37)}}while(0);l=l-b|0;if(t|0)xt(t,b,l)}while((l|0)!=0);y=(ht(r[(s[T+56>>2]|0)+1>>0]|0)|0)==0;f=s[T+56>>2]|0;if(!y?(r[f+2>>0]|0)==36:0){v=(r[f+1>>0]|0)+-48|0;_=1;l=3}else{v=-1;_=d;l=1}l=f+l|0;s[T+56>>2]=l;f=r[l>>0]|0;if(((f<<24>>24)+-32|0)>>>0>31|(1<<(f<<24>>24)+-32&75913|0)==0)p=0;else{d=0;p=(f<<24>>24)+-32|0;do{d=1<<p|d;l=l+1|0;s[T+56>>2]=l;f=r[l>>0]|0;p=(f<<24>>24)+-32|0}while(!(p>>>0>31|(1<<p&75913|0)==0));p=d}if(f<<24>>24==42){if((ht(r[l+1>>0]|0)|0)!=0?(x=s[T+56>>2]|0,(r[x+2>>0]|0)==36):0){s[o+((r[x+1>>0]|0)+-48<<2)>>2]=10;l=s[a+((r[x+1>>0]|0)+-48<<3)>>2]|0;d=1;f=x+3|0}else{if(_|0){e=-1;break}if(t|0){y=(s[n>>2]|0)+(4-1)&~(4-1);l=s[y>>2]|0;s[n>>2]=y+4}else l=0;d=0;f=(s[T+56>>2]|0)+1|0}s[T+56>>2]=f;g=(l|0)<0;m=g?0-l|0:l;g=g?p|8192:p;y=d}else{l=Tt(T+56|0)|0;if((l|0)<0){e=-1;break}m=l;g=p;y=_;f=s[T+56>>2]|0}do{if((r[f>>0]|0)==46){l=f+1|0;if((r[l>>0]|0)!=42){s[T+56>>2]=l;l=Tt(T+56|0)|0;f=s[T+56>>2]|0;break}if(ht(r[f+2>>0]|0)|0?(k=s[T+56>>2]|0,(r[k+3>>0]|0)==36):0){s[o+((r[k+2>>0]|0)+-48<<2)>>2]=10;l=s[a+((r[k+2>>0]|0)+-48<<3)>>2]|0;s[T+56>>2]=k+4;f=k+4|0;break}if(y|0){e=-1;break t}if(t|0){_=(s[n>>2]|0)+(4-1)&~(4-1);l=s[_>>2]|0;s[n>>2]=_+4}else l=0;f=(s[T+56>>2]|0)+2|0;s[T+56>>2]=f}else l=-1}while(0);_=0;while(1){if(((r[f>>0]|0)+-65|0)>>>0>57){e=-1;break t}d=f;f=f+1|0;s[T+56>>2]=f;d=r[(r[d>>0]|0)+-65+(16+(_*58|0))>>0]|0;if(((d&255)+-1|0)>>>0>=8)break;else _=d&255}if(!(d<<24>>24)){e=-1;break}p=(v|0)>-1;do{if(d<<24>>24==19)if(p){e=-1;break t}else w=54;else{if(p){s[o+(v<<2)>>2]=d&255;v=a+(v<<3)|0;w=s[v+4>>2]|0;s[T+40>>2]=s[v>>2];s[T+40+4>>2]=w;w=54;break}if(!t){e=0;break t}Ct(T+40|0,d&255,n,h);f=s[T+56>>2]|0;w=55}}while(0);if((w|0)==54){w=0;if(t|0)w=55;else l=0}e:do{if((w|0)==55){w=0;f=r[f+-1>>0]|0;f=(_|0)!=0&(f&15|0)==3?f&-33:f;d=g&-65537;v=(g&8192|0)==0?g:d;n:do{switch(f|0){case 110:switch((_&255)<<24>>24){case 0:{s[s[T+40>>2]>>2]=e;l=0;break e}case 1:{s[s[T+40>>2]>>2]=e;l=0;break e}case 2:{l=s[T+40>>2]|0;s[l>>2]=e;s[l+4>>2]=((e|0)<0)<<31>>31;l=0;break e}case 3:{i[s[T+40>>2]>>1]=e;l=0;break e}case 4:{r[s[T+40>>2]>>0]=e;l=0;break e}case 6:{s[s[T+40>>2]>>2]=e;l=0;break e}case 7:{l=s[T+40>>2]|0;s[l>>2]=e;s[l+4>>2]=((e|0)<0)<<31>>31;l=0;break e}default:{l=0;break e}}case 112:{f=120;l=l>>>0>8?l:8;d=v|8;w=67;break}case 88:case 120:{d=v;w=67;break}case 111:{d=Rt(s[T+40>>2]|0,s[T+40+4>>2]|0,T+40|0)|0;g=d;p=0;_=2720;l=(v&8|0)==0|(l|0)>(A-d|0)?l:A-d+1|0;d=v;w=73;break}case 105:case 100:{f=s[T+40>>2]|0;d=s[T+40+4>>2]|0;if((d|0)<0){f=Ht(0,0,f|0,d|0)|0;d=E()|0;s[T+40>>2]=f;s[T+40+4>>2]=d;p=1;_=2720;w=72;break n}else{p=(v&2049|0)!=0&1;_=(v&2048|0)==0?(v&1|0)==0?2720:2722:2721;w=72;break n}}case 117:{p=0;_=2720;f=s[T+40>>2]|0;d=s[T+40+4>>2]|0;w=72;break}case 99:{r[T+39>>0]=s[T+40>>2];b=T+39|0;p=0;_=2720;g=1;f=d;l=A;break}case 115:{C=s[T+40>>2]|0;C=(C|0)==0?2730:C;v=vt(C,0,l)|0;b=C;p=0;_=2720;g=(v|0)==0?l:v-C|0;f=d;l=(v|0)==0?C+l|0:v;break}case 67:{s[T+48>>2]=s[T+40>>2];s[T+48+4>>2]=0;s[T+40>>2]=T+48;p=-1;w=79;break}case 83:{if(!l){Bt(t,32,m,0,v);l=0;w=89}else{p=l;w=79}break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{l=he[u&1](t,+c[T+40>>3],m,l,v,f)|0;break e}default:{p=0;_=2720;g=l;f=v;l=A}}}while(0);n:do{if((w|0)==67){g=St(s[T+40>>2]|0,s[T+40+4>>2]|0,T+40|0,f&32)|0;_=(d&8|0)==0|((s[T+40>>2]|0)==0?(s[T+40+4>>2]|0)==0:0);p=_?0:2;_=_?2720:2720+(f>>>4)|0;w=73}else if((w|0)==72){g=It(f,d,T+40|0)|0;d=v;w=73}else if((w|0)==79){w=0;d=s[T+40>>2]|0;l=0;while(1){f=s[d>>2]|0;if(!f)break;f=Pt(T+60|0,f)|0;if((f|0)<0|f>>>0>(p-l|0)>>>0){w=83;break}l=f+l|0;if(p>>>0>l>>>0)d=d+4|0;else break}if((w|0)==83){w=0;if((f|0)<0){e=-1;break t}}Bt(t,32,m,l,v);if(!l){l=0;w=89}else{d=s[T+40>>2]|0;p=0;while(1){f=s[d>>2]|0;if(!f){w=89;break n}f=Pt(T+60|0,f)|0;p=f+p|0;if((p|0)>(l|0)){w=89;break n}xt(t,T+60|0,f);if(p>>>0>=l>>>0){w=89;break}else d=d+4|0}}}}while(0);if((w|0)==73){w=0;f=s[T+40>>2]|0?1:(s[T+40+4>>2]|0)!=0;C=(l|0)!=0|f;f=A-g+((f^1)&1)|0;b=C?g:T+40|0;g=C?(l|0)>(f|0)?l:f:0;f=(l|0)>-1?d&-65537:d;l=A}else if((w|0)==89){w=0;Bt(t,32,m,l,v^8192);l=(m|0)>(l|0)?m:l;break}v=l-b|0;g=(g|0)<(v|0)?v:g;C=g+p|0;l=(m|0)<(C|0)?C:m;Bt(t,32,l,C,f);xt(t,_,p);Bt(t,48,l,C,f^65536);Bt(t,48,g,v,0);xt(t,b,v);Bt(t,32,l,C,f^8192)}}while(0);d=y}t:do{if((w|0)==92)if(!t)if(!d)e=0;else{e=1;while(1){l=s[o+(e<<2)>>2]|0;if(!l)break;Ct(a+(e<<3)|0,l,n,h);e=e+1|0;if(e>>>0>=10){e=1;break t}}while(1){if(s[o+(e<<2)>>2]|0){e=-1;break t}e=e+1|0;if(e>>>0>=10){e=1;break}}}}while(0);$=T;return e|0}function xt(t,e,n){t=t|0;e=e|0;n=n|0;if(!(s[t>>2]&32))bt(e,n,t)|0;return}function Tt(t){t=t|0;var e=0,n=0;if(!(ht(r[s[t>>2]>>0]|0)|0))e=0;else{e=0;do{n=s[t>>2]|0;e=(e*10|0)+-48+(r[n>>0]|0)|0;s[t>>2]=n+1}while((ht(r[n+1>>0]|0)|0)!=0)}return e|0}function Ct(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;var i=0,a=0.0;t:do{if(e>>>0<=20)do{switch(e|0){case 9:{e=(s[n>>2]|0)+(4-1)&~(4-1);r=s[e>>2]|0;s[n>>2]=e+4;s[t>>2]=r;break t}case 10:{e=(s[n>>2]|0)+(4-1)&~(4-1);r=s[e>>2]|0;s[n>>2]=e+4;s[t>>2]=r;s[t+4>>2]=((r|0)<0)<<31>>31;break t}case 11:{e=(s[n>>2]|0)+(4-1)&~(4-1);r=s[e>>2]|0;s[n>>2]=e+4;s[t>>2]=r;s[t+4>>2]=0;break t}case 12:{i=(s[n>>2]|0)+(8-1)&~(8-1);e=s[i>>2]|0;r=s[i+4>>2]|0;s[n>>2]=i+8;s[t>>2]=e;s[t+4>>2]=r;break t}case 13:{r=(s[n>>2]|0)+(4-1)&~(4-1);i=s[r>>2]|0;s[n>>2]=r+4;s[t>>2]=(i&65535)<<16>>16;s[t+4>>2]=(((i&65535)<<16>>16|0)<0)<<31>>31;break t}case 14:{r=(s[n>>2]|0)+(4-1)&~(4-1);i=s[r>>2]|0;s[n>>2]=r+4;s[t>>2]=i&65535;s[t+4>>2]=0;break t}case 15:{r=(s[n>>2]|0)+(4-1)&~(4-1);i=s[r>>2]|0;s[n>>2]=r+4;s[t>>2]=(i&255)<<24>>24;s[t+4>>2]=(((i&255)<<24>>24|0)<0)<<31>>31;break t}case 16:{r=(s[n>>2]|0)+(4-1)&~(4-1);i=s[r>>2]|0;s[n>>2]=r+4;s[t>>2]=i&255;s[t+4>>2]=0;break t}case 17:{i=(s[n>>2]|0)+(8-1)&~(8-1);a=+c[i>>3];s[n>>2]=i+8;c[t>>3]=a;break t}case 18:{de[r&1](t,n);break t}default:break t}}while(0)}while(0);return}function St(t,e,n,i){t=t|0;e=e|0;n=n|0;i=i|0;if(!((t|0)==0&(e|0)==0))do{n=n+-1|0;r[n>>0]=a[480+(t&15)>>0]|0|i;t=qt(t|0,e|0,4)|0;e=E()|0}while(!((t|0)==0&(e|0)==0));return n|0}function Rt(t,e,n){t=t|0;e=e|0;n=n|0;if(!((t|0)==0&(e|0)==0))do{n=n+-1|0;r[n>>0]=t&7|48;t=qt(t|0,e|0,3)|0;e=E()|0}while(!((t|0)==0&(e|0)==0));return n|0}function It(t,e,n){t=t|0;e=e|0;n=n|0;var i=0,s=0,a=0;if(e>>>0>0|(e|0)==0&t>>>0>4294967295){do{i=t;t=Vt(t|0,e|0,10,0)|0;s=e;e=E()|0;a=zt(t|0,e|0,10,0)|0;a=Ht(i|0,s|0,a|0,E()|0)|0;E()|0;n=n+-1|0;r[n>>0]=a&255|48}while(s>>>0>9|(s|0)==9&i>>>0>4294967295);e=t}else e=t;if(e)do{a=e;e=(e>>>0)/10|0;n=n+-1|0;r[n>>0]=a-(e*10|0)|48}while(a>>>0>=10);return n|0}function Bt(t,e,n,r,i){t=t|0;e=e|0;n=n|0;r=r|0;i=i|0;var s=0;s=$;$=$+256|0;if((n|0)>(r|0)&(i&73728|0)==0){Yt(s|0,e<<24>>24|0,((n-r|0)>>>0<256?n-r|0:256)|0)|0;if((n-r|0)>>>0>255){e=n-r|0;do{xt(t,s,256);e=e+-256|0}while(e>>>0>255);e=n-r&255}else e=n-r|0;xt(t,s,e)}$=s;return}function Pt(t,e){t=t|0;e=e|0;if(!t)t=0;else t=Ot(t,e,0)|0;return t|0}function Ot(t,e,n){t=t|0;e=e|0;n=n|0;do{if(t){if(e>>>0<128){r[t>>0]=e;t=1;break}if(!(s[s[(Dt()|0)+188>>2]>>2]|0))if((e&-128|0)==57216){r[t>>0]=e;t=1;break}else{s[(ut()|0)>>2]=84;t=-1;break}if(e>>>0<2048){r[t>>0]=e>>>6|192;r[t+1>>0]=e&63|128;t=2;break}if(e>>>0<55296|(e&-8192|0)==57344){r[t>>0]=e>>>12|224;r[t+1>>0]=e>>>6&63|128;r[t+2>>0]=e&63|128;t=3;break}if((e+-65536|0)>>>0<1048576){r[t>>0]=e>>>18|240;r[t+1>>0]=e>>>12&63|128;r[t+2>>0]=e>>>6&63|128;r[t+3>>0]=e&63|128;t=4;break}else{s[(ut()|0)>>2]=84;t=-1;break}}else t=1}while(0);return t|0}function Dt(){return lt()|0}function Mt(t){t=+t;var e=0;c[h>>3]=t;e=s[h>>2]|0;k(s[h+4>>2]|0);return e|0}function Ft(t,e){t=+t;e=e|0;var n=0,r=0,i=0;c[h>>3]=t;n=s[h>>2]|0;r=s[h+4>>2]|0;i=qt(n|0,r|0,52)|0;E()|0;switch(i&2047){case 0:{if(t!=0.0){t=+Ft(t*18446744073709551616.0,e);n=(s[e>>2]|0)+-64|0}else n=0;s[e>>2]=n;break}case 2047:break;default:{s[e>>2]=(i&2047)+-1022;s[h>>2]=n;s[h+4>>2]=r&-2146435073|1071644672;t=+c[h>>3]}}return+t}function Lt(t,e){t=t|0;e=e|0;var n=0,i=0,a=0;if((s[e+76>>2]|0)>=0?(pt(e)|0)!=0:0){if((t&255|0)!=(r[e+75>>0]|0)?(i=s[e+20>>2]|0,i>>>0<(s[e+16>>2]|0)>>>0):0){s[e+20>>2]=i+1;r[i>>0]=t;t=t&255}else t=_t(e,t)|0;dt(e)}else a=3;do{if((a|0)==3){if((t&255|0)!=(r[e+75>>0]|0)?(n=s[e+20>>2]|0,n>>>0<(s[e+16>>2]|0)>>>0):0){s[e+20>>2]=n+1;r[n>>0]=t;t=t&255;break}t=_t(e,t)|0}}while(0);return t|0}function Nt(t){t=t|0;var e=0,n=0,r=0,i=0,a=0,o=0,u=0,c=0,h=0,l=0,f=0,d=0,p=0,_=0,g=0,b=0,v=0,m=0,y=0,w=0;w=$;$=$+16|0;do{if(t>>>0<245){f=t>>>0<11?16:t+11&-8;h=s[736]|0;if(h>>>(f>>>3)&3|0){t=2984+((h>>>(f>>>3)&1^1)+(f>>>3)<<1<<2)|0;e=s[t+8>>2]|0;n=s[e+8>>2]|0;if((n|0)==(t|0))s[736]=h&~(1<<(h>>>(f>>>3)&1^1)+(f>>>3));else{s[n+12>>2]=t;s[t+8>>2]=n}y=(h>>>(f>>>3)&1^1)+(f>>>3)<<3;s[e+4>>2]=y|3;s[e+y+4>>2]=s[e+y+4>>2]|1;y=e+8|0;$=w;return y|0}l=s[738]|0;if(f>>>0>l>>>0){if(h>>>(f>>>3)|0){t=h>>>(f>>>3)<<(f>>>3)&(2<<(f>>>3)|0-(2<<(f>>>3)));i=((t&0-t)+-1|0)>>>(((t&0-t)+-1|0)>>>12&16);r=i>>>(i>>>5&8)>>>(i>>>(i>>>5&8)>>>2&4);r=(i>>>5&8|((t&0-t)+-1|0)>>>12&16|i>>>(i>>>5&8)>>>2&4|r>>>1&2|r>>>(r>>>1&2)>>>1&1)+(r>>>(r>>>1&2)>>>(r>>>(r>>>1&2)>>>1&1))|0;i=s[2984+(r<<1<<2)+8>>2]|0;t=s[i+8>>2]|0;if((t|0)==(2984+(r<<1<<2)|0)){s[736]=h&~(1<<r);t=h&~(1<<r)}else{s[t+12>>2]=2984+(r<<1<<2);s[2984+(r<<1<<2)+8>>2]=t;t=h}s[i+4>>2]=f|3;s[i+f+4>>2]=(r<<3)-f|1;s[i+(r<<3)>>2]=(r<<3)-f;if(l|0){n=s[741]|0;if(!(t&1<<(l>>>3))){s[736]=t|1<<(l>>>3);t=2984+(l>>>3<<1<<2)|0;e=2984+(l>>>3<<1<<2)+8|0}else{t=s[2984+(l>>>3<<1<<2)+8>>2]|0;e=2984+(l>>>3<<1<<2)+8|0}s[e>>2]=n;s[t+12>>2]=n;s[n+8>>2]=t;s[n+12>>2]=2984+(l>>>3<<1<<2)}s[738]=(r<<3)-f;s[741]=i+f;y=i+8|0;$=w;return y|0}a=s[737]|0;if(a){e=((a&0-a)+-1|0)>>>(((a&0-a)+-1|0)>>>12&16);c=e>>>(e>>>5&8)>>>(e>>>(e>>>5&8)>>>2&4);c=s[3248+((e>>>5&8|((a&0-a)+-1|0)>>>12&16|e>>>(e>>>5&8)>>>2&4|c>>>1&2|c>>>(c>>>1&2)>>>1&1)+(c>>>(c>>>1&2)>>>(c>>>(c>>>1&2)>>>1&1))<<2)>>2]|0;e=c;u=c;c=(s[c+4>>2]&-8)-f|0;while(1){t=s[e+16>>2]|0;if(!t){t=s[e+20>>2]|0;if(!t)break}o=(s[t+4>>2]&-8)-f|0;i=o>>>0<c>>>0;e=t;u=i?t:u;c=i?o:c}o=u+f|0;if(o>>>0>u>>>0){i=s[u+24>>2]|0;t=s[u+12>>2]|0;do{if((t|0)==(u|0)){e=u+20|0;t=s[e>>2]|0;if(!t){e=u+16|0;t=s[e>>2]|0;if(!t){e=0;break}}while(1){r=t+20|0;n=s[r>>2]|0;if(!n){r=t+16|0;n=s[r>>2]|0;if(!n)break;else{t=n;e=r}}else{t=n;e=r}}s[e>>2]=0;e=t}else{e=s[u+8>>2]|0;s[e+12>>2]=t;s[t+8>>2]=e;e=t}}while(0);do{if(i|0){t=s[u+28>>2]|0;if((u|0)==(s[3248+(t<<2)>>2]|0)){s[3248+(t<<2)>>2]=e;if(!e){s[737]=a&~(1<<t);break}}else{s[((s[i+16>>2]|0)==(u|0)?i+16|0:i+20|0)>>2]=e;if(!e)break}s[e+24>>2]=i;t=s[u+16>>2]|0;if(t|0){s[e+16>>2]=t;s[t+24>>2]=e}t=s[u+20>>2]|0;if(t|0){s[e+20>>2]=t;s[t+24>>2]=e}}}while(0);if(c>>>0<16){y=c+f|0;s[u+4>>2]=y|3;y=u+y+4|0;s[y>>2]=s[y>>2]|1}else{s[u+4>>2]=f|3;s[o+4>>2]=c|1;s[o+c>>2]=c;if(l|0){n=s[741]|0;if(!(1<<(l>>>3)&h)){s[736]=1<<(l>>>3)|h;t=2984+(l>>>3<<1<<2)|0;e=2984+(l>>>3<<1<<2)+8|0}else{t=s[2984+(l>>>3<<1<<2)+8>>2]|0;e=2984+(l>>>3<<1<<2)+8|0}s[e>>2]=n;s[t+12>>2]=n;s[n+8>>2]=t;s[n+12>>2]=2984+(l>>>3<<1<<2)}s[738]=c;s[741]=o}y=u+8|0;$=w;return y|0}}}}else if(t>>>0<=4294967231){f=t+11&-8;r=s[737]|0;if(r){if((t+11|0)>>>8)if(f>>>0>16777215)u=31;else{u=(t+11|0)>>>8<<((((t+11|0)>>>8)+1048320|0)>>>16&8);u=14-((u+520192|0)>>>16&4|(((t+11|0)>>>8)+1048320|0)>>>16&8|((u<<((u+520192|0)>>>16&4))+245760|0)>>>16&2)+(u<<((u+520192|0)>>>16&4)<<(((u<<((u+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;u=f>>>(u+7|0)&1|u<<1}else u=0;t=s[3248+(u<<2)>>2]|0;t:do{if(!t){n=0;t=0;e=0-f|0;_=61}else{a=0;e=0-f|0;o=f<<((u|0)==31?0:25-(u>>>1)|0);n=0;while(1){i=(s[t+4>>2]&-8)-f|0;if(i>>>0<e>>>0)if(!i){i=t;e=0;n=t;_=65;break t}else{a=t;e=i}_=s[t+20>>2]|0;t=s[t+16+(o>>>31<<2)>>2]|0;n=(_|0)==0|(_|0)==(t|0)?n:_;if(!t){t=a;_=61;break}else o=o<<1}}}while(0);if((_|0)==61){if((n|0)==0&(t|0)==0){t=2<<u;if(!((t|0-t)&r))break;h=((t|0-t)&r&0-((t|0-t)&r))+-1|0;l=h>>>(h>>>12&16)>>>(h>>>(h>>>12&16)>>>5&8);n=l>>>(l>>>2&4)>>>(l>>>(l>>>2&4)>>>1&2);t=0;n=s[3248+((h>>>(h>>>12&16)>>>5&8|h>>>12&16|l>>>2&4|l>>>(l>>>2&4)>>>1&2|n>>>1&1)+(n>>>(n>>>1&1))<<2)>>2]|0}if(!n){u=t;o=e}else{i=t;_=65}}if((_|0)==65)while(1){l=(s[n+4>>2]&-8)-f|0;t=l>>>0<e>>>0;e=t?l:e;i=t?n:i;t=s[n+16>>2]|0;if(!t)t=s[n+20>>2]|0;if(!t){u=i;o=e;break}else n=t}if(((u|0)!=0?o>>>0<((s[738]|0)-f|0)>>>0:0)?(c=u+f|0,c>>>0>u>>>0):0){a=s[u+24>>2]|0;t=s[u+12>>2]|0;do{if((t|0)==(u|0)){e=u+20|0;t=s[e>>2]|0;if(!t){e=u+16|0;t=s[e>>2]|0;if(!t){t=0;break}}while(1){i=t+20|0;n=s[i>>2]|0;if(!n){i=t+16|0;n=s[i>>2]|0;if(!n)break;else{t=n;e=i}}else{t=n;e=i}}s[e>>2]=0}else{y=s[u+8>>2]|0;s[y+12>>2]=t;s[t+8>>2]=y}}while(0);do{if(a){e=s[u+28>>2]|0;if((u|0)==(s[3248+(e<<2)>>2]|0)){s[3248+(e<<2)>>2]=t;if(!t){s[737]=r&~(1<<e);r=r&~(1<<e);break}}else{s[((s[a+16>>2]|0)==(u|0)?a+16|0:a+20|0)>>2]=t;if(!t)break}s[t+24>>2]=a;e=s[u+16>>2]|0;if(e|0){s[t+16>>2]=e;s[e+24>>2]=t}e=s[u+20>>2]|0;if(e){s[t+20>>2]=e;s[e+24>>2]=t}}}while(0);t:do{if(o>>>0<16){y=o+f|0;s[u+4>>2]=y|3;y=u+y+4|0;s[y>>2]=s[y>>2]|1}else{s[u+4>>2]=f|3;s[c+4>>2]=o|1;s[c+o>>2]=o;n=o>>>3;if(o>>>0<256){t=s[736]|0;if(!(t&1<<n)){s[736]=t|1<<n;t=2984+(n<<1<<2)|0;e=2984+(n<<1<<2)+8|0}else{t=s[2984+(n<<1<<2)+8>>2]|0;e=2984+(n<<1<<2)+8|0}s[e>>2]=c;s[t+12>>2]=c;s[c+8>>2]=t;s[c+12>>2]=2984+(n<<1<<2);break}t=o>>>8;if(t)if(o>>>0>16777215)n=31;else{n=t<<((t+1048320|0)>>>16&8)<<(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4);n=14-(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4|(t+1048320|0)>>>16&8|(n+245760|0)>>>16&2)+(n<<((n+245760|0)>>>16&2)>>>15)|0;n=o>>>(n+7|0)&1|n<<1}else n=0;t=3248+(n<<2)|0;s[c+28>>2]=n;s[c+16+4>>2]=0;s[c+16>>2]=0;e=1<<n;if(!(r&e)){s[737]=r|e;s[t>>2]=c;s[c+24>>2]=t;s[c+12>>2]=c;s[c+8>>2]=c;break}t=s[t>>2]|0;e:do{if((s[t+4>>2]&-8|0)!=(o|0)){r=o<<((n|0)==31?0:25-(n>>>1)|0);while(1){n=t+16+(r>>>31<<2)|0;e=s[n>>2]|0;if(!e)break;if((s[e+4>>2]&-8|0)==(o|0)){t=e;break e}else{r=r<<1;t=e}}s[n>>2]=c;s[c+24>>2]=t;s[c+12>>2]=c;s[c+8>>2]=c;break t}}while(0);m=t+8|0;y=s[m>>2]|0;s[y+12>>2]=c;s[m>>2]=c;s[c+8>>2]=y;s[c+12>>2]=t;s[c+24>>2]=0}}while(0);y=u+8|0;$=w;return y|0}}}else f=-1}while(0);n=s[738]|0;if(n>>>0>=f>>>0){t=n-f|0;e=s[741]|0;if(t>>>0>15){y=e+f|0;s[741]=y;s[738]=t;s[y+4>>2]=t|1;s[e+n>>2]=t;s[e+4>>2]=f|3}else{s[738]=0;s[741]=0;s[e+4>>2]=n|3;s[e+n+4>>2]=s[e+n+4>>2]|1}y=e+8|0;$=w;return y|0}i=s[739]|0;if(i>>>0>f>>>0){v=i-f|0;s[739]=v;y=s[742]|0;m=y+f|0;s[742]=m;s[m+4>>2]=v|1;s[y+4>>2]=f|3;y=y+8|0;$=w;return y|0}if(!(s[854]|0)){s[856]=4096;s[855]=4096;s[857]=-1;s[858]=-1;s[859]=0;s[847]=0;s[854]=w&-16^1431655768;t=4096}else t=s[856]|0;a=f+48|0;o=f+47|0;c=t+o|0;u=0-t|0;if((c&u)>>>0<=f>>>0){y=0;$=w;return y|0}t=s[846]|0;if(t|0?(l=s[844]|0,(l+(c&u)|0)>>>0<=l>>>0?1:(l+(c&u)|0)>>>0>t>>>0):0){y=0;$=w;return y|0}t:do{if(!(s[847]&4)){n=s[742]|0;e:do{if(n){e=3392;while(1){l=s[e>>2]|0;if(l>>>0<=n>>>0?(l+(s[e+4>>2]|0)|0)>>>0>n>>>0:0)break;t=s[e+8>>2]|0;if(!t){_=128;break e}else e=t}if((c-i&u)>>>0<2147483647){t=Kt(c-i&u|0)|0;if((t|0)==((s[e>>2]|0)+(s[e+4>>2]|0)|0))if((t|0)==(-1|0))t=c-i&u;else{o=c-i&u;i=t;_=145;break t}else{r=t;n=c-i&u;_=136}}else t=0}else _=128}while(0);do{if((_|0)==128){e=Kt(0)|0;if((e|0)!=(-1|0)?(p=s[855]|0,p=((p+-1&e|0)==0?0:(p+-1+e&0-p)-e|0)+(c&u)|0,d=s[844]|0,p>>>0>f>>>0&p>>>0<2147483647):0){l=s[846]|0;if(l|0?(p+d|0)>>>0<=d>>>0|(p+d|0)>>>0>l>>>0:0){t=0;break}t=Kt(p|0)|0;if((t|0)==(e|0)){o=p;i=e;_=145;break t}else{r=t;n=p;_=136}}else t=0}}while(0);do{if((_|0)==136){e=0-n|0;if(!(a>>>0>n>>>0&(n>>>0<2147483647&(r|0)!=(-1|0))))if((r|0)==(-1|0)){t=0;break}else{o=n;i=r;_=145;break t}t=s[856]|0;t=o-n+t&0-t;if(t>>>0>=2147483647){o=n;i=r;_=145;break t}if((Kt(t|0)|0)==(-1|0)){Kt(e|0)|0;t=0;break}else{o=t+n|0;i=r;_=145;break t}}}while(0);s[847]=s[847]|4;_=143}else{t=0;_=143}}while(0);if(((_|0)==143?(c&u)>>>0<2147483647:0)?(v=Kt(c&u|0)|0,g=Kt(0)|0,b=(g-v|0)>>>0>(f+40|0)>>>0,!((v|0)==(-1|0)|b^1|v>>>0<g>>>0&((v|0)!=(-1|0)&(g|0)!=(-1|0))^1)):0){o=b?g-v|0:t;i=v;_=145}if((_|0)==145){t=(s[844]|0)+o|0;s[844]=t;if(t>>>0>(s[845]|0)>>>0)s[845]=t;c=s[742]|0;t:do{if(c){t=3392;while(1){e=s[t>>2]|0;n=s[t+4>>2]|0;if((i|0)==(e+n|0)){_=154;break}r=s[t+8>>2]|0;if(!r)break;else t=r}if(((_|0)==154?(m=t+4|0,(s[t+12>>2]&8|0)==0):0)?i>>>0>c>>>0&e>>>0<=c>>>0:0){s[m>>2]=n+o;y=(s[739]|0)+o|0;m=(c+8&7|0)==0?0:0-(c+8)&7;s[742]=c+m;s[739]=y-m;s[c+m+4>>2]=y-m|1;s[c+y+4>>2]=40;s[743]=s[858];break}if(i>>>0<(s[740]|0)>>>0)s[740]=i;n=i+o|0;t=3392;while(1){if((s[t>>2]|0)==(n|0)){_=162;break}e=s[t+8>>2]|0;if(!e)break;else t=e}if((_|0)==162?(s[t+12>>2]&8|0)==0:0){s[t>>2]=i;l=t+4|0;s[l>>2]=(s[l>>2]|0)+o;l=i+8|0;l=i+((l&7|0)==0?0:0-l&7)|0;t=n+((n+8&7|0)==0?0:0-(n+8)&7)|0;h=l+f|0;u=t-l-f|0;s[l+4>>2]=f|3;e:do{if((c|0)==(t|0)){y=(s[739]|0)+u|0;s[739]=y;s[742]=h;s[h+4>>2]=y|1}else{if((s[741]|0)==(t|0)){y=(s[738]|0)+u|0;s[738]=y;s[741]=h;s[h+4>>2]=y|1;s[h+y>>2]=y;break}o=s[t+4>>2]|0;if((o&3|0)==1){n:do{if(o>>>0<256){e=s[t+8>>2]|0;n=s[t+12>>2]|0;if((n|0)==(e|0)){s[736]=s[736]&~(1<<(o>>>3));break}else{s[e+12>>2]=n;s[n+8>>2]=e;break}}else{a=s[t+24>>2]|0;e=s[t+12>>2]|0;do{if((e|0)==(t|0)){e=s[t+16+4>>2]|0;if(!e){e=s[t+16>>2]|0;if(!e){e=0;break}else n=t+16|0}else n=t+16+4|0;while(1){i=e+20|0;r=s[i>>2]|0;if(!r){i=e+16|0;r=s[i>>2]|0;if(!r)break;else{e=r;n=i}}else{e=r;n=i}}s[n>>2]=0}else{y=s[t+8>>2]|0;s[y+12>>2]=e;s[e+8>>2]=y}}while(0);if(!a)break;n=s[t+28>>2]|0;do{if((s[3248+(n<<2)>>2]|0)!=(t|0)){s[((s[a+16>>2]|0)==(t|0)?a+16|0:a+20|0)>>2]=e;if(!e)break n}else{s[3248+(n<<2)>>2]=e;if(e|0)break;s[737]=s[737]&~(1<<n);break n}}while(0);s[e+24>>2]=a;n=s[t+16>>2]|0;if(n|0){s[e+16>>2]=n;s[n+24>>2]=e}n=s[t+16+4>>2]|0;if(!n)break;s[e+20>>2]=n;s[n+24>>2]=e}}while(0);t=t+(o&-8)|0;i=(o&-8)+u|0}else i=u;n=t+4|0;s[n>>2]=s[n>>2]&-2;s[h+4>>2]=i|1;s[h+i>>2]=i;n=i>>>3;if(i>>>0<256){t=s[736]|0;if(!(t&1<<n)){s[736]=t|1<<n;t=2984+(n<<1<<2)|0;e=2984+(n<<1<<2)+8|0}else{t=s[2984+(n<<1<<2)+8>>2]|0;e=2984+(n<<1<<2)+8|0}s[e>>2]=h;s[t+12>>2]=h;s[h+8>>2]=t;s[h+12>>2]=2984+(n<<1<<2);break}t=i>>>8;do{if(!t)r=0;else{if(i>>>0>16777215){r=31;break}r=t<<((t+1048320|0)>>>16&8)<<(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4);r=14-(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4|(t+1048320|0)>>>16&8|(r+245760|0)>>>16&2)+(r<<((r+245760|0)>>>16&2)>>>15)|0;r=i>>>(r+7|0)&1|r<<1}}while(0);t=3248+(r<<2)|0;s[h+28>>2]=r;s[h+16+4>>2]=0;s[h+16>>2]=0;e=s[737]|0;n=1<<r;if(!(e&n)){s[737]=e|n;s[t>>2]=h;s[h+24>>2]=t;s[h+12>>2]=h;s[h+8>>2]=h;break}t=s[t>>2]|0;n:do{if((s[t+4>>2]&-8|0)!=(i|0)){r=i<<((r|0)==31?0:25-(r>>>1)|0);while(1){n=t+16+(r>>>31<<2)|0;e=s[n>>2]|0;if(!e)break;if((s[e+4>>2]&-8|0)==(i|0)){t=e;break n}else{r=r<<1;t=e}}s[n>>2]=h;s[h+24>>2]=t;s[h+12>>2]=h;s[h+8>>2]=h;break e}}while(0);m=t+8|0;y=s[m>>2]|0;s[y+12>>2]=h;s[m>>2]=h;s[h+8>>2]=y;s[h+12>>2]=t;s[h+24>>2]=0}}while(0);y=l+8|0;$=w;return y|0}t=3392;while(1){e=s[t>>2]|0;if(e>>>0<=c>>>0?(y=e+(s[t+4>>2]|0)|0,y>>>0>c>>>0):0)break;t=s[t+8>>2]|0}a=y+-47+((y+-47+8&7|0)==0?0:0-(y+-47+8)&7)|0;a=a>>>0<(c+16|0)>>>0?c:a;t=o+-40|0;v=i+8|0;v=(v&7|0)==0?0:0-v&7;m=i+v|0;s[742]=m;s[739]=t-v;s[m+4>>2]=t-v|1;s[i+t+4>>2]=40;s[743]=s[858];s[a+4>>2]=27;s[a+8>>2]=s[848];s[a+8+4>>2]=s[849];s[a+8+8>>2]=s[850];s[a+8+12>>2]=s[851];s[848]=i;s[849]=o;s[851]=0;s[850]=a+8;t=a+24|0;do{m=t;t=t+4|0;s[t>>2]=7}while((m+8|0)>>>0<y>>>0);if((a|0)!=(c|0)){s[a+4>>2]=s[a+4>>2]&-2;s[c+4>>2]=a-c|1;s[a>>2]=a-c;if((a-c|0)>>>0<256){n=2984+((a-c|0)>>>3<<1<<2)|0;t=s[736]|0;if(!(t&1<<((a-c|0)>>>3))){s[736]=t|1<<((a-c|0)>>>3);t=n;e=n+8|0}else{t=s[n+8>>2]|0;e=n+8|0}s[e>>2]=c;s[t+12>>2]=c;s[c+8>>2]=t;s[c+12>>2]=n;break}if((a-c|0)>>>8)if((a-c|0)>>>0>16777215)r=31;else{r=(a-c|0)>>>8<<((((a-c|0)>>>8)+1048320|0)>>>16&8);r=14-((r+520192|0)>>>16&4|(((a-c|0)>>>8)+1048320|0)>>>16&8|((r<<((r+520192|0)>>>16&4))+245760|0)>>>16&2)+(r<<((r+520192|0)>>>16&4)<<(((r<<((r+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;r=(a-c|0)>>>(r+7|0)&1|r<<1}else r=0;t=3248+(r<<2)|0;s[c+28>>2]=r;s[c+20>>2]=0;s[c+16>>2]=0;e=s[737]|0;n=1<<r;if(!(e&n)){s[737]=e|n;s[t>>2]=c;s[c+24>>2]=t;s[c+12>>2]=c;s[c+8>>2]=c;break}t=s[t>>2]|0;e:do{if((s[t+4>>2]&-8|0)!=(a-c|0)){r=a-c<<((r|0)==31?0:25-(r>>>1)|0);while(1){n=t+16+(r>>>31<<2)|0;e=s[n>>2]|0;if(!e)break;if((s[e+4>>2]&-8|0)==(a-c|0)){t=e;break e}else{r=r<<1;t=e}}s[n>>2]=c;s[c+24>>2]=t;s[c+12>>2]=c;s[c+8>>2]=c;break t}}while(0);m=t+8|0;y=s[m>>2]|0;s[y+12>>2]=c;s[m>>2]=c;s[c+8>>2]=y;s[c+12>>2]=t;s[c+24>>2]=0}}else{y=s[740]|0;if((y|0)==0|i>>>0<y>>>0)s[740]=i;s[848]=i;s[849]=o;s[851]=0;s[745]=s[854];s[744]=-1;s[749]=2984;s[748]=2984;s[751]=2992;s[750]=2992;s[753]=3e3;s[752]=3e3;s[755]=3008;s[754]=3008;s[757]=3016;s[756]=3016;s[759]=3024;s[758]=3024;s[761]=3032;s[760]=3032;s[763]=3040;s[762]=3040;s[765]=3048;s[764]=3048;s[767]=3056;s[766]=3056;s[769]=3064;s[768]=3064;s[771]=3072;s[770]=3072;s[773]=3080;s[772]=3080;s[775]=3088;s[774]=3088;s[777]=3096;s[776]=3096;s[779]=3104;s[778]=3104;s[781]=3112;s[780]=3112;s[783]=3120;s[782]=3120;s[785]=3128;s[784]=3128;s[787]=3136;s[786]=3136;s[789]=3144;s[788]=3144;s[791]=3152;s[790]=3152;s[793]=3160;s[792]=3160;s[795]=3168;s[794]=3168;s[797]=3176;s[796]=3176;s[799]=3184;s[798]=3184;s[801]=3192;s[800]=3192;s[803]=3200;s[802]=3200;s[805]=3208;s[804]=3208;s[807]=3216;s[806]=3216;s[809]=3224;s[808]=3224;s[811]=3232;s[810]=3232;y=o+-40|0;v=i+8|0;v=(v&7|0)==0?0:0-v&7;m=i+v|0;s[742]=m;s[739]=y-v;s[m+4>>2]=y-v|1;s[i+y+4>>2]=40;s[743]=s[858]}}while(0);t=s[739]|0;if(t>>>0>f>>>0){v=t-f|0;s[739]=v;y=s[742]|0;m=y+f|0;s[742]=m;s[m+4>>2]=v|1;s[y+4>>2]=f|3;y=y+8|0;$=w;return y|0}}s[(ut()|0)>>2]=12;y=0;$=w;return y|0}function jt(t){t=t|0;var e=0,n=0,r=0,i=0,a=0,o=0,u=0,c=0;if(!t)return;e=s[740]|0;n=s[t+-4>>2]|0;c=t+-8+(n&-8)|0;do{if(!(n&1)){r=s[t+-8>>2]|0;if(!(n&3))return;o=t+-8+(0-r)|0;a=r+(n&-8)|0;if(o>>>0<e>>>0)return;if((s[741]|0)==(o|0)){e=s[c+4>>2]|0;if((e&3|0)!=3){u=o;e=a;break}s[738]=a;s[c+4>>2]=e&-2;s[o+4>>2]=a|1;s[o+a>>2]=a;return}if(r>>>0<256){e=s[o+8>>2]|0;t=s[o+12>>2]|0;if((t|0)==(e|0)){s[736]=s[736]&~(1<<(r>>>3));u=o;e=a;break}else{s[e+12>>2]=t;s[t+8>>2]=e;u=o;e=a;break}}i=s[o+24>>2]|0;e=s[o+12>>2]|0;do{if((e|0)==(o|0)){e=s[o+16+4>>2]|0;if(!e){e=s[o+16>>2]|0;if(!e){e=0;break}else t=o+16|0}else t=o+16+4|0;while(1){r=e+20|0;n=s[r>>2]|0;if(!n){r=e+16|0;n=s[r>>2]|0;if(!n)break;else{e=n;t=r}}else{e=n;t=r}}s[t>>2]=0}else{u=s[o+8>>2]|0;s[u+12>>2]=e;s[e+8>>2]=u}}while(0);if(i){t=s[o+28>>2]|0;if((s[3248+(t<<2)>>2]|0)==(o|0)){s[3248+(t<<2)>>2]=e;if(!e){s[737]=s[737]&~(1<<t);u=o;e=a;break}}else{s[((s[i+16>>2]|0)==(o|0)?i+16|0:i+20|0)>>2]=e;if(!e){u=o;e=a;break}}s[e+24>>2]=i;t=s[o+16>>2]|0;if(t|0){s[e+16>>2]=t;s[t+24>>2]=e}t=s[o+16+4>>2]|0;if(t){s[e+20>>2]=t;s[t+24>>2]=e;u=o;e=a}else{u=o;e=a}}else{u=o;e=a}}else{u=t+-8|0;e=n&-8;o=t+-8|0}}while(0);if(o>>>0>=c>>>0)return;n=s[c+4>>2]|0;if(!(n&1))return;if(!(n&2)){if((s[742]|0)==(c|0)){c=(s[739]|0)+e|0;s[739]=c;s[742]=u;s[u+4>>2]=c|1;if((u|0)!=(s[741]|0))return;s[741]=0;s[738]=0;return}if((s[741]|0)==(c|0)){c=(s[738]|0)+e|0;s[738]=c;s[741]=o;s[u+4>>2]=c|1;s[o+c>>2]=c;return}i=(n&-8)+e|0;do{if(n>>>0<256){t=s[c+8>>2]|0;e=s[c+12>>2]|0;if((e|0)==(t|0)){s[736]=s[736]&~(1<<(n>>>3));break}else{s[t+12>>2]=e;s[e+8>>2]=t;break}}else{a=s[c+24>>2]|0;e=s[c+12>>2]|0;do{if((e|0)==(c|0)){e=s[c+16+4>>2]|0;if(!e){e=s[c+16>>2]|0;if(!e){t=0;break}else t=c+16|0}else t=c+16+4|0;while(1){r=e+20|0;n=s[r>>2]|0;if(!n){r=e+16|0;n=s[r>>2]|0;if(!n)break;else{e=n;t=r}}else{e=n;t=r}}s[t>>2]=0;t=e}else{t=s[c+8>>2]|0;s[t+12>>2]=e;s[e+8>>2]=t;t=e}}while(0);if(a|0){e=s[c+28>>2]|0;if((s[3248+(e<<2)>>2]|0)==(c|0)){s[3248+(e<<2)>>2]=t;if(!t){s[737]=s[737]&~(1<<e);break}}else{s[((s[a+16>>2]|0)==(c|0)?a+16|0:a+20|0)>>2]=t;if(!t)break}s[t+24>>2]=a;e=s[c+16>>2]|0;if(e|0){s[t+16>>2]=e;s[e+24>>2]=t}e=s[c+16+4>>2]|0;if(e|0){s[t+20>>2]=e;s[e+24>>2]=t}}}}while(0);s[u+4>>2]=i|1;s[o+i>>2]=i;if((u|0)==(s[741]|0)){s[738]=i;return}}else{s[c+4>>2]=n&-2;s[u+4>>2]=e|1;s[o+e>>2]=e;i=e}n=i>>>3;if(i>>>0<256){e=s[736]|0;if(!(e&1<<n)){s[736]=e|1<<n;e=2984+(n<<1<<2)|0;t=2984+(n<<1<<2)+8|0}else{e=s[2984+(n<<1<<2)+8>>2]|0;t=2984+(n<<1<<2)+8|0}s[t>>2]=u;s[e+12>>2]=u;s[u+8>>2]=e;s[u+12>>2]=2984+(n<<1<<2);return}e=i>>>8;if(e)if(i>>>0>16777215)r=31;else{r=e<<((e+1048320|0)>>>16&8)<<(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4);r=14-(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4|(e+1048320|0)>>>16&8|(r+245760|0)>>>16&2)+(r<<((r+245760|0)>>>16&2)>>>15)|0;r=i>>>(r+7|0)&1|r<<1}else r=0;e=3248+(r<<2)|0;s[u+28>>2]=r;s[u+20>>2]=0;s[u+16>>2]=0;t=s[737]|0;n=1<<r;t:do{if(!(t&n)){s[737]=t|n;s[e>>2]=u;s[u+24>>2]=e;s[u+12>>2]=u;s[u+8>>2]=u}else{e=s[e>>2]|0;e:do{if((s[e+4>>2]&-8|0)!=(i|0)){r=i<<((r|0)==31?0:25-(r>>>1)|0);while(1){n=e+16+(r>>>31<<2)|0;t=s[n>>2]|0;if(!t)break;if((s[t+4>>2]&-8|0)==(i|0)){e=t;break e}else{r=r<<1;e=t}}s[n>>2]=u;s[u+24>>2]=e;s[u+12>>2]=u;s[u+8>>2]=u;break t}}while(0);o=e+8|0;c=s[o>>2]|0;s[c+12>>2]=u;s[o>>2]=u;s[u+8>>2]=c;s[u+12>>2]=e;s[u+24>>2]=0}}while(0);c=(s[744]|0)+-1|0;s[744]=c;if(c|0)return;e=3400;while(1){e=s[e>>2]|0;if(!e)break;else e=e+8|0}s[744]=-1;return}function Ut(t,e){t=t|0;e=e|0;var n=0,r=0,i=0;n=y(e&65535,t&65535)|0;i=(n>>>16)+(y(e&65535,t>>>16)|0)|0;r=y(e>>>16,t&65535)|0;return(k((i>>>16)+(y(e>>>16,t>>>16)|0)+(((i&65535)+r|0)>>>16)|0),i+r<<16|n&65535|0)|0}function zt(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;var i=0,s=0;i=Ut(t,n)|0;s=E()|0;return(k((y(e,n)|0)+(y(r,t)|0)+s|s&0|0),i|0|0)|0}function $t(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;return(k(e+r+(t+n>>>0>>>0<t>>>0|0)>>>0|0),t+n>>>0|0)|0}function Ht(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;r=e-r-(n>>>0>t>>>0|0)>>>0;return(k(r|0),t-n>>>0|0)|0}function Wt(t){t=t|0;return(t?31-(w(t^t-1)|0)|0:32)|0}function Gt(t,e,n,r,i){t=t|0;e=e|0;n=n|0;r=r|0;i=i|0;var a=0,o=0,u=0,c=0,h=0,l=0,f=0,d=0,p=0,_=0;if(!e)if(!r){if(i|0){s[i>>2]=(t>>>0)%(n>>>0);s[i+4>>2]=0}r=0;i=(t>>>0)/(n>>>0)>>>0;return(k(r|0),i)|0}else{if(!i){r=0;i=0;return(k(r|0),i)|0}s[i>>2]=t|0;s[i+4>>2]=e&0;r=0;i=0;return(k(r|0),i)|0}do{if(n){if(r|0){o=(w(r|0)|0)-(w(e|0)|0)|0;if(o>>>0<=31){d=o+1|0;u=t>>>((o+1|0)>>>0)&o-31>>31|e<<31-o;f=e>>>((o+1|0)>>>0)&o-31>>31;a=0;o=t<<31-o;break}if(!i){r=0;i=0;return(k(r|0),i)|0}s[i>>2]=t|0;s[i+4>>2]=e|e&0;r=0;i=0;return(k(r|0),i)|0}if(n-1&n|0){o=(w(n|0)|0)+33-(w(e|0)|0)|0;d=o;u=32-o-1>>31&e>>>((o-32|0)>>>0)|(e<<32-o|t>>>(o>>>0))&o-32>>31;f=o-32>>31&e>>>(o>>>0);a=t<<64-o&32-o>>31;o=(e<<64-o|t>>>((o-32|0)>>>0))&32-o>>31|t<<32-o&o-33>>31;break}if(i|0){s[i>>2]=n-1&t;s[i+4>>2]=0}if((n|0)==1){r=e|e&0;i=t|0|0;return(k(r|0),i)|0}else{i=Wt(n|0)|0;r=e>>>(i>>>0)|0;i=e<<32-i|t>>>(i>>>0)|0;return(k(r|0),i)|0}}else{if(!r){if(i|0){s[i>>2]=(e>>>0)%(n>>>0);s[i+4>>2]=0}r=0;i=(e>>>0)/(n>>>0)>>>0;return(k(r|0),i)|0}if(!t){if(i|0){s[i>>2]=0;s[i+4>>2]=(e>>>0)%(r>>>0)}n=0;i=(e>>>0)/(r>>>0)>>>0;return(k(n|0),i)|0}if(!(r-1&r)){if(i|0){s[i>>2]=t|0;s[i+4>>2]=r-1&e|e&0}n=0;i=e>>>((Wt(r|0)|0)>>>0);return(k(n|0),i)|0}o=(w(r|0)|0)-(w(e|0)|0)|0;if(o>>>0<=30){d=o+1|0;u=e<<31-o|t>>>((o+1|0)>>>0);f=e>>>((o+1|0)>>>0);a=0;o=t<<31-o;break}if(!i){r=0;i=0;return(k(r|0),i)|0}s[i>>2]=t|0;s[i+4>>2]=e|e&0;r=0;i=0;return(k(r|0),i)|0}}while(0);if(!d){c=o;e=f;t=0;o=0}else{h=$t(n|0|0,r|r&0|0,-1,-1)|0;l=E()|0;c=o;e=f;t=d;o=0;do{_=c;c=a>>>31|c<<1;a=o|a<<1;_=u<<1|_>>>31|0;p=u>>>31|e<<1|0;Ht(h|0,l|0,_|0,p|0)|0;d=E()|0;f=d>>31|((d|0)<0?-1:0)<<1;o=f&1;u=Ht(_|0,p|0,f&(n|0)|0,(((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1)&(r|r&0)|0)|0;e=E()|0;t=t-1|0}while((t|0)!=0);t=0}if(i|0){s[i>>2]=u;s[i+4>>2]=e}p=(a|0)>>>31|c<<1|(0<<1|a>>>31)&0|t;_=(a<<1|0>>>31)&-2|o;return(k(p|0),_)|0}function Vt(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;return Gt(t,e,n,r,0)|0}function qt(t,e,n){t=t|0;e=e|0;n=n|0;if((n|0)<32){k(e>>>n|0);return t>>>n|(e&(1<<n)-1)<<32-n}k(0);return e>>>n-32|0}function Xt(t,e,n){t=t|0;e=e|0;n=n|0;if((n|0)<32){k(e<<n|(t&(1<<n)-1<<32-n)>>>32-n|0);return t<<n}k(t<<n-32|0);return 0}function Qt(t){t=t|0;return(t&255)<<24|(t>>8&255)<<16|(t>>16&255)<<8|t>>>24|0}function Jt(t,e,n){t=t|0;e=e|0;n=n|0;var i=0,a=0,o=0;if((n|0)>=8192){P(t|0,e|0,n|0)|0;return t|0}o=t|0;a=t+n|0;if((t&3)==(e&3)){while(t&3){if(!n)return o|0;r[t>>0]=r[e>>0]|0;t=t+1|0;e=e+1|0;n=n-1|0}n=a&-4|0;i=n-64|0;while((t|0)<=(i|0)){s[t>>2]=s[e>>2];s[t+4>>2]=s[e+4>>2];s[t+8>>2]=s[e+8>>2];s[t+12>>2]=s[e+12>>2];s[t+16>>2]=s[e+16>>2];s[t+20>>2]=s[e+20>>2];s[t+24>>2]=s[e+24>>2];s[t+28>>2]=s[e+28>>2];s[t+32>>2]=s[e+32>>2];s[t+36>>2]=s[e+36>>2];s[t+40>>2]=s[e+40>>2];s[t+44>>2]=s[e+44>>2];s[t+48>>2]=s[e+48>>2];s[t+52>>2]=s[e+52>>2];s[t+56>>2]=s[e+56>>2];s[t+60>>2]=s[e+60>>2];t=t+64|0;e=e+64|0}while((t|0)<(n|0)){s[t>>2]=s[e>>2];t=t+4|0;e=e+4|0}}else{n=a-4|0;while((t|0)<(n|0)){r[t>>0]=r[e>>0]|0;r[t+1>>0]=r[e+1>>0]|0;r[t+2>>0]=r[e+2>>0]|0;r[t+3>>0]=r[e+3>>0]|0;t=t+4|0;e=e+4|0}}while((t|0)<(a|0)){r[t>>0]=r[e>>0]|0;t=t+1|0;e=e+1|0}return o|0}function Yt(t,e,n){t=t|0;e=e|0;n=n|0;var i=0,a=0;i=t+n|0;e=e&255;if((n|0)>=67){while(t&3){r[t>>0]=e;t=t+1|0}a=e|e<<8|e<<16|e<<24;while((t|0)<=((i&-4)-64|0)){s[t>>2]=a;s[t+4>>2]=a;s[t+8>>2]=a;s[t+12>>2]=a;s[t+16>>2]=a;s[t+20>>2]=a;s[t+24>>2]=a;s[t+28>>2]=a;s[t+32>>2]=a;s[t+36>>2]=a;s[t+40>>2]=a;s[t+44>>2]=a;s[t+48>>2]=a;s[t+52>>2]=a;s[t+56>>2]=a;s[t+60>>2]=a;t=t+64|0}while((t|0)<(i&-4|0)){s[t>>2]=a;t=t+4|0}}while((t|0)<(i|0)){r[t>>0]=e;t=t+1|0}return i-n|0}function Kt(t){t=t|0;var e=0,n=0;n=B()|0;e=s[l>>2]|0;if((t|0)>0&(e+t|0)<(e|0)|(e+t|0)<0){F(e+t|0)|0;x(12);return-1}if((e+t|0)>(n|0))if(!(O(e+t|0)|0)){x(12);return-1}s[l>>2]=e+t;return e|0}function Zt(t,e){t=t|0;e=e|0;return ce[t&1](e|0)|0}function te(t,e,n,r,i,s,a){t=t|0;e=e|0;n=+n;r=r|0;i=i|0;s=s|0;a=a|0;return he[t&1](e|0,+n,r|0,i|0,s|0,a|0)|0}function ee(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;return le[t&1](e|0,n|0,r|0)|0}function ne(t,e,n,r,i){t=t|0;e=e|0;n=n|0;r=r|0;i=i|0;return fe[t&1](e|0,n|0,r|0,i|0)|0}function re(t,e,n){t=t|0;e=e|0;n=n|0;de[t&1](e|0,n|0)}function ie(t){t=t|0;A(0);return 0}function se(t,e,n,r,i,s){t=t|0;e=+e;n=n|0;r=r|0;i=i|0;s=s|0;A(1);return 0}function ae(t,e,n){t=t|0;e=e|0;n=n|0;A(2);return 0}function oe(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;A(3);return 0}function ue(t,e){t=t|0;e=e|0;A(4)}var ce=[ie,it];var he=[se,wt];var le=[ae,st];var fe=[oe,at];var de=[ue,At];return{___errno_location:ut,___muldi3:zt,___udivdi3:Vt,_abort_run:K,_bitshift64Lshr:qt,_bitshift64Shl:Xt,_enable_debug:Z,_free:jt,_i64Add:$t,_i64Subtract:Ht,_llvm_bswap_i32:Qt,_malloc:Nt,_memcpy:Jt,_memset:Yt,_ping:J,_read_register:tt,_reset:nt,_run:Y,_sbrk:Kt,_set_stop_address:Q,_write_register:et,dynCall_ii:Zt,dynCall_iidiiii:te,dynCall_iiii:ee,dynCall_iiiii:ne,dynCall_vii:re,establishStackSpace:X,stackAlloc:G,stackRestore:q,stackSave:V}}(Pt,Ot,S),Mt=(t.___errno_location=Dt.___errno_location,t.___muldi3=Dt.___muldi3,t.___udivdi3=Dt.___udivdi3,t._abort_run=Dt._abort_run,t._bitshift64Lshr=Dt._bitshift64Lshr,t._bitshift64Shl=Dt._bitshift64Shl,t._enable_debug=Dt._enable_debug,t._free=Dt._free,t._i64Add=Dt._i64Add,t._i64Subtract=Dt._i64Subtract,t._llvm_bswap_i32=Dt._llvm_bswap_i32,t._malloc=Dt._malloc,t._memcpy=Dt._memcpy,t._memset=Dt._memset,t._ping=Dt._ping,t._read_register=Dt._read_register,t._reset=Dt._reset,t._run=Dt._run,t._sbrk=Dt._sbrk,t._set_stop_address=Dt._set_stop_address,t._write_register=Dt._write_register,t.establishStackSpace=Dt.establishStackSpace,t.stackAlloc=Dt.stackAlloc),Ft=t.stackRestore=Dt.stackRestore,Lt=t.stackSave=Dt.stackSave;if(t.dynCall_ii=Dt.dynCall_ii,t.dynCall_iidiiii=Dt.dynCall_iidiiii,t.dynCall_iiii=Dt.dynCall_iiii,t.dynCall_iiiii=Dt.dynCall_iiiii,t.dynCall_vii=Dt.dynCall_vii,t.asm=Dt,t.ccall=C,it)if(at(it)||(it=g(it)),o||c){var Nt=f(it);I.set(Nt,k)}else{nt();var jt=function(e){e.byteLength&&(e=new Uint8Array(e)),I.set(e,k),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,rt()},Ut=function(){l(it,jt,(function(){throw"could not load memory initializer "+it}))},zt=It(it);if(zt)jt(zt.buffer);else if(t.memoryInitializerRequest){var $t=function(){var e=t.memoryInitializerRequest,n=e.response;if(200!==e.status&&0!==e.status){var r=It(t.memoryInitializerRequestURL);if(!r)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+e.status+", retrying "+it),void Ut();n=r.buffer}jt(n)};t.memoryInitializerRequest.response?setTimeout($t,0):t.memoryInitializerRequest.addEventListener("load",$t)}else Ut()}function Ht(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Wt(e){function n(){Bt||(Bt=!0,E||(Q(),J(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Y()))}tt>0||(X(),tt>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),n()}),1)):n()))}function Gt(e,n){n&&m&&0===e||(m||(E=!0,t.onExit&&t.onExit(e)),i(e,new Ht(e)))}function Vt(e){throw t.onAbort&&t.onAbort(e),b(e+=""),v(e),E=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(t.then=function(e){if(Bt)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},et=function t(){Bt||Wt(),Bt||(et=t)},t.run=Wt,t.abort=Vt,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return m=!0,Wt(),t});t.exports=r,t.exports=r})),tu=j(U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){void 0===e&&(e={}),this._module=null,this._options=null,this._options=h.__assign({stopAddress:0},e),this._module=Zo(this._getApi(t,this._options)),this.enableDebug(!1)}return t.prototype.init=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){return this._module._set_stop_address(this._options.stopAddress),[2]}))}))},t.prototype.ping=function(){return this._module.ccall("ping","string",[],[])},t.prototype.run=function(t){return this._module._run(t)},t.prototype.abort=function(){this._module._abort_run()},t.prototype.enableDebug=function(t){this._module._enable_debug(t?1:0)},t.prototype.reset=function(){this._module._reset()},t.prototype.readRegister=function(t){if(t<0||t>15)throw new Error("illegal thumb register "+t);return this._module._read_register(t)},t.prototype.writeRegister=function(t,e){if(t<0||t>15)throw new Error("illegal thumb register "+t);this._module._write_register(t,e)},t.prototype._getApi=function(t,e){var n=e.printer||function(t){return console.log("thumbulator: "+t)};return{print:n,printErr:n,trapOnInstructionFetch:e.trapOnInstructionFetch||function(){return 0},trapOnBx32:e.trapOnBx32||function(){return 3},busRead16:t.read16,busRead32:t.read32||function(e){return 65535&t.read16(e)|t.read16(e+2)<<16},busWrite16:t.write16,busWrite32:t.write32||function(e,n){return t.write16(e,65535&n),t.write16(e+2,n>>>16)}}},t}();e.default=n})));function eu(t,e,n=!0){return function t(e,n,r=!0,i=""){if(!r&&e<0)return t(e>>>16,n&&n>8?n-4:4,!1,i)+t(65535&e,4);let s=Math.abs(e).toString(16).toUpperCase();if(void 0!==n)for(;s.length<n;)s="0"+s;return(e<0?"-":"")+i+s}(t,e,n,"$")}class nu{constructor(t=(()=>3)){this.trap=new Ao,this._thumbulatorBus={read16:t=>{if(1&t)return this._triggerTrap(`unaligned 16 bit ARM read from ${eu(t,8,!1)}`),0;const e=268435455&t;switch(t>>>28){case 0:if(e<32768)return this.getRom16(e);break;case 4:if(e<8192)return this.getRam16(e);break;case 14:switch(e){case 2080768:return this._armMamcr}}this._triggerTrap(`invalid 16 bit ARM read from ${eu(t,8,!1)}`)},read32:t=>{if(3&t)return this._triggerTrap(`unaligned 32 bit ARM read from ${eu(t,8,!1)}`),0;const e=268435455&t;switch(t>>>28){case 0:if(e<32768)return this.getRom32(e);break;case 4:if(e<8192)return this.getRam32(e);break;case 14:switch(e){case 32772:case 32776:return 0}}this._triggerTrap(`invalid 32 bit ARM read from ${eu(t,8,!1)}`)},write16:(t,e)=>{if(1&t)return void this._triggerTrap(`unaligned 16 bit ARM write: ${eu(e,4)} -> ${eu(t,8,!1)}`);const n=268435455&t;switch(t>>>28){case 4:if(n<8192)return void this.setRam16(n,65535&e);break;case 14:switch(n){case 2080768:return void(this._armMamcr=e)}}this._triggerTrap(`invalid 16 bit ARM write: ${eu(e,4)} -> ${eu(t,8,!1)}`)},write32:(t,e)=>{if(3&t)return void this._triggerTrap(`unaligned 32 bit ARM write: ${eu(e,8,!1)} -> ${eu(t,8,!1)}`);const n=268435455&t;switch(t>>>28){case 4:if(n<8192)return void this.setRam32(n,e);case 14:switch(n){case 32772:case 32776:return}}this._triggerTrap(`invalid 32 bit ARM write: ${eu(e,8,!1)} -> ${eu(t,8,!1)}`)}},this._romBuffer=new ArrayBuffer(32768),this._ramBuffer=new ArrayBuffer(8192),this._armMamcr=0,this._thumbulator=null,!function(){const t=new Uint8Array([1,2,3,4]);return 67305985===new Uint32Array(t.buffer)[0]}()?(this.getRom16=t=>this._rom8[t]|this._rom8[t+1]<<8,this.getRom32=t=>this._rom8[t]|this._rom8[t+1]<<8|this._rom8[t+2]<<16|this._rom8[t+3]<<24,this.getRam16=t=>this._ram8[t]|this._ram8[t+1]<<8,this.getRam32=t=>this._ram8[t]|this._ram8[t+1]<<8|this._ram8[t+2]<<16|this._ram8[t+3]<<24,this.setRam16=(t,e)=>{this._ram8[t]=255&e,this._ram8[t+1]=e>>>8&255},this.setRam32=(t,e)=>{this._ram8[t]=255&e,this._ram8[t+1]=e>>>8&255,this._ram8[t+2]=e>>>16&255,this._ram8[t+3]=e>>>24&255}):(this.getRom16=t=>this._rom16[t>>>1],this.getRom32=t=>this._rom32[t>>>2],this.getRam16=t=>this._ram16[t>>>1],this.getRam32=t=>this._ram32[t>>>2],this.setRam16=(t,e)=>this._ram16[t>>>1]=e,this.setRam32=(t,e)=>this._ram32[t>>>2]=e),this._rom8=new Uint8Array(this._romBuffer),this._rom16=new Uint16Array(this._romBuffer),this._rom32=new Uint32Array(this._romBuffer),this._ram8=new Uint8Array(this._ramBuffer),this._ram16=new Uint16Array(this._ramBuffer),this._ram32=new Uint32Array(this._ramBuffer),this._thumbulator=new tu(this._thumbulatorBus,{stopAddress:32772,trapOnBx32:t}),this.reset()}init(){return this._thumbulator.init()}reset(){}getRom(){return this._rom8}getRam(){return this._ram8}run(t){this._thumbulator.reset(),this._thumbulator.enableDebug(!1);for(let t=0;t<=12;t++)this._thumbulator.writeRegister(t,0);this._thumbulator.writeRegister(13,1073749940),this._thumbulator.writeRegister(14,32773),this._thumbulator.writeRegister(15,t),this._armMamcr=0;const e=this._thumbulator.run(5e5);20!==e&&10!==e&&this._triggerTrap(`ARM execution trapped: ${e}`)}getThumbulator(){return this._thumbulator}_triggerTrap(t){this._thumbulator.abort(),this.trap.dispatch(t)}}class ru extends ko{constructor(t){if(super(),this._banks=new Array(6),this._fetchers=new Array(8),this._fractionalFetchers=new Array(8),this._musicFetchers=new Array(3),this._parameters=new Uint8Array(8),this._parameterIndex=0,this._rng=0,this._clockAccumulator=0,this._lastCpuTime=0,this._fastFetch=!1,this._ldaPending=!1,this._cpuTimeProvider=null,this._soc=new nu,t.length<28672||t.length>32768)throw new Error(`not a DPC+ image: invalid lenght ${t.length}`);this._rom=this._soc.getRom();for(let t=0;t<6;t++)this._banks[t]=new Uint8Array(this._rom.buffer,3072+4096*t,4096);this._ram=this._soc.getRam(),this._imageRam=new Uint8Array(this._ram.buffer,3072,4096);const e=32768-t.length;for(let n=0;n<t.length;n++)this._rom[e+n]=t[n];for(let t=0;t<8;t++)this._fetchers[t]=new iu,this._fractionalFetchers[t]=new su;for(let t=0;t<3;t++)this._musicFetchers[t]=new au;this._soc.trap.addHandler(t=>this.triggerTrap(2,t)),this.reset()}static matchesBuffer(t){return 2===Eo(t,["DPC+".split("").map(t=>t.charCodeAt(0))])[0]}init(){return this._soc.init()}reset(){this._soc.reset(),this._currentBank=this._banks[5];for(let t=0;t<768;t++)this._soc.setRam32(t<<2,this._soc.getRom32(t<<2));for(let t=6912;t<8192;t++)this._soc.setRam32(768+t-6912<<2,this._soc.getRom32(t<<2));this._currentBank=this._banks[5];for(let t=0;t<8;t++)this._parameters[t]=0;for(let t=0;t<8;t++)this._fetchers[t].reset(),this._fractionalFetchers[t].reset();for(let t=0;t<3;t++)this._musicFetchers[t].reset();this._parameterIndex=0,this._fastFetch=this._ldaPending=!1,this._rng=725831748,this._lastCpuTime=0,this._clockAccumulator=0}getType(){return ht.CartridgeType.bankswitch_dpc_plus}setBus(t){return this._bus=t,this}setCpuTimeProvider(t){return this._cpuTimeProvider=t,this}read(t){return this._access(t,this._bus.getLastDataBusValue())}peek(t){return this._currentBank[4095&t]}write(t,e){this._access(t,e)}triggerTrap(t,e){super.triggerTrap(t,e)}_access(t,e){t&=4095;const n=this._currentBank[t];if(this._fastFetch&&this._ldaPending&&t>127&&t<4086&&n<40&&(t=n),this._ldaPending=!1,t<40){const e=7&t,n=this._fetchers[e],r=this._fractionalFetchers[e];let i=0;switch(t>>>3&7){case 0:switch(e){case 0:return this._advanceRng(),255&this._rng;case 1:return this._rewindRng(),255&this._rng;case 2:return this._rng>>>8&255;case 3:return this._rng>>>16&255;case 4:return this._rng>>>24&255;case 5:{this._clockMusicFetchers();let t=0;for(let e=0;e<3;e++)t+=this._imageRam[(this._musicFetchers[e].waveform<<5)+this._musicFetchers[e].waveformSample()];return 255&t}}return 0;case 1:return i=this._imageRam[n.pointer],n.increment(),i;case 2:return i=this._imageRam[n.pointer]&n.mask(),n.increment(),i;case 3:return i=this._imageRam[r.pointer>>>8],r.increment(),i;case 4:return e<4?n.mask():0;default:return 0}}else if(t<128){const n=7&t,r=this._fetchers[n],i=this._fractionalFetchers[n];switch(t-40>>>3&15){case 0:i.setPointerLo(e);break;case 1:i.setPointerHi(e);break;case 2:i.setFraction(e);break;case 3:r.top=e;break;case 4:r.bottom=e;break;case 5:r.setPointerLo(e);break;case 6:switch(n){case 0:this._fastFetch=0===e;break;case 1:this._parameterIndex<8&&(this._parameters[this._parameterIndex++]=e);break;case 2:this._dispatchFunction(e);break;case 5:case 6:case 7:this._musicFetchers[n-5].waveform=127&e}break;case 7:r.decrement(),this._imageRam[r.pointer]=e;break;case 8:r.setPointerHi(e);break;case 9:switch(n){case 0:this._rng=725831748;break;case 1:this._rng=4294967040&this._rng|e;break;case 2:this._rng=4294902015&this._rng|e<<8;break;case 3:this._rng=4278255615&this._rng|e<<16;break;case 4:this._rng=16777215&this._rng|e<<24;break;case 5:case 6:case 7:this._musicFetchers[n-5].frequency=this._soc.getRam32(7168+(e<<2))}break;case 10:this._imageRam[r.pointer]=e,r.increment()}}else t>4085&&t<4092&&(this._currentBank=this._banks[t-4086]);return this._fastFetch&&t>127&&t<4086&&(this._ldaPending=169===n),n}_clockMusicFetchers(){const t=this._cpuTimeProvider();this._clockAccumulator+=2e4*(t-this._lastCpuTime),this._lastCpuTime=t;const e=Math.floor(this._clockAccumulator);if(this._clockAccumulator-=e,0!==e)for(let t=0;t<3;t++)this._musicFetchers[t].increment(e)}_dispatchFunction(t){const e=this._parameters[0]+(this._parameters[1]<<8);switch(t){case 0:this._parameterIndex=0;break;case 1:for(let t=0;t<this._parameters[3];t++)this._ram[3072+(this._fetchers[7&this._parameters[2]].pointer+t&4095)]=this._rom[3072+(e+t)%29696];this._parameterIndex=0;break;case 2:for(let t=0;t<this._parameters[3];t++)this._ram[3072+(this._fetchers[7&this._parameters[2]].pointer+t&4095)]=this._parameters[0];this._parameterIndex=0;break;case 254:case 255:this._soc.run(3083)}}_advanceRng(){this._rng=(1024&this._rng?279816990:0)^(this._rng>>>11|this._rng<<21)}_rewindRng(){this._rng=this._rng&1<<31?(279816990^this._rng)<<11|(279816990^this._rng)>>>21:this._rng<<11|this._rng>>>21}}class iu{constructor(){this.pointer=0,this.top=0,this.bottom=0}contructor(){this.reset()}reset(){this.pointer=this.top=this.bottom=0}setPointerHi(t){this.pointer=255&this.pointer|(15&t)<<8}setPointerLo(t){this.pointer=3840&this.pointer|255&t}increment(){this.pointer=this.pointer+1&4095}decrement(){this.pointer=this.pointer+4095&4095}mask(){return(this.top-(255&this.pointer)&255)>(this.top-this.bottom&255)?255:0}}class su{constructor(){this.pointer=0,this.fraction=0}contructor(){this.reset()}reset(){this.pointer=this.fraction=0}setPointerHi(t){this.pointer=65535&this.pointer|(15&t)<<16}setPointerLo(t){this.pointer=983295&this.pointer|(255&t)<<8}setFraction(t){this.fraction=t,this.pointer&=1048320}increment(){this.pointer=this.pointer+this.fraction&1048575}}class au{constructor(){this.frequency=-1,this.counter=-1,this.waveform=0,this.reset()}reset(){this.frequency=0,this.waveform=0,this.counter=0}increment(t){this.counter=this.counter+t*this.frequency|0}waveformSample(){return this.counter>>>27}}class ou extends ko{constructor(t){super(),this._handleBxCDF0=t=>{const e=this._soc.getThumbulator(),n=e.readRegister(2),r=e.readRegister(3);switch(t){case 1762:return this._musicStreams[n%3].frequency=r,0;case 1766:return this._musicStreams[n%3].counter=0,0;case 1770:return e.writeRegister(2,this._musicStreams[n%3].counter),0;case 1774:return this._musicStreams[n%3].waveformSize=r,0}return 3},this._handleBxCDF1=t=>{const e=this._soc.getThumbulator(),n=e.readRegister(2),r=e.readRegister(3);switch(t){case 1874:return this._musicStreams[n%3].frequency=r,0;case 1878:return this._musicStreams[n%3].counter=0,0;case 1882:return e.writeRegister(2,this._musicStreams[n%3].counter),0;case 1886:return this._musicStreams[n%3].waveformSize=r,0}return 3},this._banks=new Array(7),this._currentBank=null,this._rom=null,this._ram=null,this._displayRam=null,this._musicStreams=new Array(3),this._clockAccumulator=0,this._lastCpuTime=0,this._soc=null,this._fastFetch=!1,this._digitalAudio=!1,this._fastJumpCountdown=0,this._fastFetchPending=!1,this._jmpOperandAddress=0,this._ldaOperandAddress=0,this._datastreamBase=0,this._datastreamIncrementBase=0,this._waveformBase=0,this._jumpstream=0,this._jumpstreamMask=0,this._amplitudeStream=0,this._bus=null,this._cpuTimeProvider=null;const e=ou.getVersion(t);switch(e){case 0:this._jumpstreamMask=255,this._amplitudeStream=34,this._datastreamBase=1760,this._datastreamIncrementBase=1896,this._waveformBase=2032;break;case 1:this._jumpstreamMask=255,this._amplitudeStream=34,this._datastreamBase=160,this._datastreamIncrementBase=296,this._waveformBase=432;break;case 2:this._jumpstreamMask=254,this._amplitudeStream=35,this._datastreamBase=152,this._datastreamIncrementBase=292,this._waveformBase=432;break;default:throw new Error("not a CDF image: missing signature")}if(32768!==t.length)throw new Error(`not a CDF image: invalid lenght ${t.length}`);this._soc=new nu(0===e?this._handleBxCDF0:this._handleBxCDF1),this._soc.trap.addHandler(t=>this.triggerTrap(2,t)),this._rom=this._soc.getRom();for(let e=0;e<32768;e++)this._rom[e]=t[e];for(let t=0;t<7;t++)this._banks[t]=new Uint8Array(this._rom.buffer,4096*(t+1),4096);this._ram=this._soc.getRam(),this._displayRam=new Uint8Array(this._soc.getRam().buffer,2048,4096);for(let t=0;t<3;t++)this._musicStreams[t]=new uu;this.reset()}static getVersion(t){const e="CDF".split("").map(t=>t.charCodeAt(0)),n=function(t,e){for(let n=0;n<t.length;n++){let r;for(r=0;r<e.length&&(t[n+r]===e[r]||e[r]<0);r++);if(r===e.length)return n}return-1}(t,[...e,-1,...e,-1,...e]);if(n<0)return 3;switch(t[n+3]){case 0:return 0;case 1:return 1;case"J".charCodeAt(0):return 2;default:return 3}}static matchesBuffer(t){return 3!==ou.getVersion(t)}init(){return this._soc.init()}reset(){for(let t=0;t<512;t++)this._soc.setRam32(t<<2,this._soc.getRom32(t<<2));this._fastFetch=!1,this._digitalAudio=!1,this._fastJumpCountdown=0,this._fastFetchPending=!1,this._jmpOperandAddress=0,this._ldaOperandAddress=0,this._currentBank=this._banks[6];for(let t=0;t<3;t++)this._musicStreams[t].reset();this._lastCpuTime=0,this._clockAccumulator=0}getType(){return ht.CartridgeType.bankswitch_cdf}setBus(t){return this._bus=t,this}setCpuTimeProvider(t){return this._cpuTimeProvider=t,this}read(t){return this._access(t,this._bus.getLastDataBusValue())}peek(t){return this._currentBank[4095&t]}write(t,e){this._access(t,e)}_access(t,e){t&=4095;const n=this._currentBank[t];if(this._fastJumpCountdown-- >0&&t===this._jmpOperandAddress)return this._jmpOperandAddress++,this._datastreamReadWithIncrement(this._jumpstream,256);if(this._fastFetch&&76===n&&0==(this._currentBank[t+1&4095]&this._jumpstreamMask)&&0===this._currentBank[t+2&4095])return this._fastJumpCountdown=2,this._jmpOperandAddress=t+1&4095,this._jumpstream=33+this._currentBank[t+1&4095],n;if(this._fastJumpCountdown=0,this._fastFetch&&this._fastFetchPending&&this._ldaOperandAddress===t&&n<=this._amplitudeStream){if(this._fastFetchPending=!1,n===this._amplitudeStream){if(this._clockMusicStreams(),this._digitalAudio){const t=this._musicStreams[0].counter,e=this._soc.getRam32(this._waveformBase)+(t>>>21);let n=0;return e<32768&&(n=this._rom[e]),e>1073741824&&e<1073750016&&(n=this._ram[e-1073741824]),0==(1048576&t)&&(n>>>=4),15&n}{let t=0;for(let e=0;e<3;e++)t+=this._displayRam[this._getWaveform(e)+(this._musicStreams[e].counter>>>this._musicStreams[e].waveformSize)&4095];return t}}return this._datastreamRead(n)}if(this._fastFetchPending=!1,t>=4080){switch(t){case 4080:this._datastreamWriteWithIncrement(32,e,256);break;case 4081:{let t=this._getDatastreamPointer(32);t<<=8,t&=4026531840,t|=e<<20,this._setDatastreamPointer(32,t);break}case 4082:this._fastFetch=0==(15&e),this._digitalAudio=0==(240&e);break;case 4083:switch(e){case 254:case 255:this._soc.run(2059)}}t>4084&&t<4092&&(this._currentBank=this._banks[t-4085])}return this._fastFetch&&169===n&&(this._fastFetchPending=!0,this._ldaOperandAddress=t+1&4095),n}_clockMusicStreams(){const t=this._cpuTimeProvider();this._clockAccumulator+=2e4*(t-this._lastCpuTime),this._lastCpuTime=t;const e=Math.floor(this._clockAccumulator);if(this._clockAccumulator-=e,0!==e)for(let t=0;t<3;t++)this._musicStreams[t].increment(e)}_getDatastreamPointer(t){return this._soc.getRam32(this._datastreamBase+4*t)}_setDatastreamPointer(t,e){this._soc.setRam32(this._datastreamBase+4*t,e)}_getDatastreamIncrement(t){return this._soc.getRam32(this._datastreamIncrementBase+4*t)}_datastreamRead(t){const e=this._getDatastreamPointer(t),n=this._displayRam[e>>>20];return this._setDatastreamPointer(t,e+(this._getDatastreamIncrement(t)<<12)|0),n}_datastreamReadWithIncrement(t,e){const n=this._getDatastreamPointer(t),r=this._displayRam[n>>>20];return this._setDatastreamPointer(t,n+(e<<12)|0),r}_datastreamWriteWithIncrement(t,e,n){const r=this._getDatastreamPointer(t);this._displayRam[r>>>20]=e,this._setDatastreamPointer(t,r+(n<<12)|0)}_getWaveform(t){return this._soc.getRam32(this._waveformBase+4*t)-1073741824-2048&4095}}class uu{constructor(){this.counter=0,this.frequency=0,this.waveformSize=27}reset(){this.counter=this.frequency=0,this.waveformSize=27}increment(t){this.counter=this.counter+t*this.frequency|0}}class cu extends ko{constructor(t){if(super(),this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._bus=null,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[173,0,8],[173,64,8],[44,0,8],[12,0,8,76],[12,255,15,76]]);for(const t of e)if(t>=2)return!0;return!1}reset(){this._bank=this._bank0}read(t){return this.peek(t)}peek(t){return t&=4095,this._bank[t]}getType(){return ht.CartridgeType.bankswitch_8k_econobanking}setBus(t){return this._bus=t,this._bus.event.read.addHandler(this._onBusAccess,this),this._bus.event.write.addHandler(this._onBusAccess,this),this}_onBusAccess(t,e){switch(6208&e._bus.getLastAddresBusValue()){case 2048:e._bank=e._bank0;break;case 2112:e._bank=e._bank1}}}class hu extends ko{constructor(t){if(super(),this._rom=new Uint8Array(2048),this._ram=new Uint8Array(1024),2048!==t.length)throw new Error(`buffer is not a 2k cartridge image: wrong length ${t.length}`);for(let e=0;e<2048;e++)this._rom[e]=t[e]}static matchesBuffer(t){const e=Eo(t,[[157,255,243],[153,0,244]]);return e[0]>0||e[1]>0}setBus(t){return this._bus=t,this}randomize(t){for(let e=0;e<1024;e++)this._ram[e]=t.int(255)}read(t){return(t&=4095)<1024?this._ram[t]:t<2048?this._ram[1023&t]=this._bus.getLastDataBusValue():this._rom[2047&t]}write(t,e){(t&=4095)>=1024&&t<2048&&(this._ram[1023&t]=e)}peek(t){return(t&=4095)<1024?this._ram[t]:t<2048?0:this._rom[2047&t]}getType(){return ht.CartridgeType.bankswitch_2k_cv}}class lu{detectCartridgeType(t){if(t.length%8448==0)return ht.CartridgeType.bankswitch_supercharger;if(t.length<2048)return ht.CartridgeType.vanilla_2k;if(t.length>=10240&&t.length<=10496)return ht.CartridgeType.bankswitch_8k_DPC;switch(t.length){case 2048:return this._detect2k(t);case 4096:return ht.CartridgeType.vanilla_4k;case 8192:return this._detect8k(t);case 8195:return ht.CartridgeType.bankswitch_8k_pp;case 12288:return ht.CartridgeType.bankswitch_12k_FA;case 16384:return this._detect16k(t);case 28672:return ht.CartridgeType.bankswitch_FA2;case 29696:return this._detect29k(t);case 32768:return this._detect32k(t);case 65536:return this._detect64k(t);default:return ht.CartridgeType.unknown}}_detect2k(t){return hu.matchesBuffer(t)?ht.CartridgeType.bankswitch_2k_cv:ht.CartridgeType.vanilla_2k}_detect8k(t){const e=xo.matchesBuffer(t);return To.matchesBuffer(t)?ht.CartridgeType.bankswitch_8k_E0:Co.matchesBuffer(t)?ht.CartridgeType.bankswitch_8k_3F:Io.matchesBuffer(t)?ht.CartridgeType.bankswitch_8k_UA:!e&&Ro.matchesBuffer(t)?ht.CartridgeType.bankswitch_8k_FE:cu.matchesBuffer(t)?ht.CartridgeType.bankswitch_8k_econobanking:ht.CartridgeType.bankswitch_8k_F8}_detect16k(t){return Bo.matchesBuffer(t)?ht.CartridgeType.bankswitch_16k_E7:ht.CartridgeType.bankswitch_16k_F6}_detect29k(t){return Po.matchesBuffer(t)?ht.CartridgeType.bankswitch_FA2:ht.CartridgeType.bankswitch_dpc_plus}_detect32k(t){return So.matchesBuffer(t)?ht.CartridgeType.bankswitch_3E:ru.matchesBuffer(t)?ht.CartridgeType.bankswitch_dpc_plus:ou.matchesBuffer(t)?ht.CartridgeType.bankswitch_cdf:ht.CartridgeType.bankswitch_32k_F4}_detect64k(t){return Oo.matchesBuffer(t)?ht.CartridgeType.bankswitch_64k_EF:ht.CartridgeType.bankswitch_64k_F0}}var fu=Object.keys,du=Array.isArray,pu="undefined"!=typeof self?self:"undefined"!=typeof window?window:l;function _u(t,e){return"object"!=typeof e?t:(fu(e).forEach((function(n){t[n]=e[n]})),t)}var gu=Object.getPrototypeOf,bu={}.hasOwnProperty;function vu(t,e){return bu.call(t,e)}function mu(t,e){"function"==typeof e&&(e=e(gu(t))),fu(e).forEach((function(n){wu(t,n,e[n])}))}var yu=Object.defineProperty;function wu(t,e,n,r){yu(t,e,_u(n&&vu(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Au(t){return{from:function(e){return t.prototype=Object.create(e.prototype),wu(t.prototype,"constructor",t),{extend:mu.bind(null,t.prototype)}}}}var ku=Object.getOwnPropertyDescriptor;var Eu=[].slice;function xu(t,e,n){return Eu.call(t,e,n)}function Tu(t,e){return e(t)}function Cu(t){if(!t)throw new Error("Assertion Failed")}function Su(t){pu.setImmediate?setImmediate(t):setTimeout(t,0)}function Ru(t,e){return t.reduce((function(t,n,r){var i=e(n,r);return i&&(t[i[0]]=i[1]),t}),{})}function Iu(t,e){return function(){try{t.apply(this,arguments)}catch(t){e(t)}}}function Bu(t,e,n){try{t.apply(null,n)}catch(t){e&&e(t)}}function Pu(t,e){if(vu(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var s=Pu(t,e[r]);n.push(s)}return n}var a=e.indexOf(".");if(-1!==a){var o=t[e.substr(0,a)];return void 0===o?void 0:Pu(o,e.substr(a+1))}}function Ou(t,e,n){if(t&&void 0!==e&&!("isFrozen"in Object&&Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){Cu("string"!=typeof n&&"length"in n);for(var r=0,i=e.length;r<i;++r)Ou(t,e[r],n[r])}else{var s=e.indexOf(".");if(-1!==s){var a=e.substr(0,s),o=e.substr(s+1);if(""===o)void 0===n?delete t[a]:t[a]=n;else{var u=t[a];u||(u=t[a]={}),Ou(u,o,n)}}else void 0===n?delete t[e]:t[e]=n}}function Du(t){var e={};for(var n in t)vu(t,n)&&(e[n]=t[n]);return e}var Mu=[].concat;function Fu(t){return Mu.apply([],t)}var Lu="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(Fu([8,16,32,64].map((function(t){return["Int","Uint","Float"].map((function(e){return e+t+"Array"}))})))).filter((function(t){return pu[t]})).map((function(t){return pu[t]}));function Nu(t){if(!t||"object"!=typeof t)return t;var e;if(du(t)){e=[];for(var n=0,r=t.length;n<r;++n)e.push(Nu(t[n]))}else if(Lu.indexOf(t.constructor)>=0)e=t;else for(var i in e=t.constructor?Object.create(t.constructor.prototype):{},t)vu(t,i)&&(e[i]=Nu(t[i]));return e}function ju(t,e,n,r){return n=n||{},r=r||"",fu(t).forEach((function(i){if(vu(e,i)){var s=t[i],a=e[i];"object"==typeof s&&"object"==typeof a&&s&&a&&""+s.constructor==""+a.constructor?ju(s,a,n,r+i+"."):s!==a&&(n[r+i]=e[i])}else n[r+i]=void 0})),fu(e).forEach((function(i){vu(t,i)||(n[r+i]=e[i])})),n}var Uu="undefined"!=typeof Symbol&&Symbol.iterator,zu=Uu?function(t){var e;return null!=t&&(e=t[Uu])&&e.apply(t)}:function(){return null},$u={};function Hu(t){var e,n,r,i;if(1===arguments.length){if(du(t))return t.slice();if(this===$u&&"string"==typeof t)return[t];if(i=zu(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var Wu="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Gu(t,e){Wu=t,Vu=e}var Vu=function(){return!0},qu=!new Error("").stack;function Xu(){if(qu)try{throw Xu.arguments,new Error}catch(t){return t}return new Error}function Qu(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(Vu).map((function(t){return"\n"+t})).join("")):""}var Ju=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Yu=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ju),Ku={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function Zu(t,e){this._e=Xu(),this.name=t,this.message=e}function tc(t,e,n,r){this._e=Xu(),this.failures=e,this.failedKeys=r,this.successCount=n}function ec(t,e){this._e=Xu(),this.name="BulkError",this.failures=e,this.message=function(t,e){return t+". Errors: "+e.map((function(t){return t.toString()})).filter((function(t,e,n){return n.indexOf(t)===e})).join("\n")}(t,e)}Au(Zu).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Qu(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Au(tc).from(Zu),Au(ec).from(Zu);var nc=Yu.reduce((function(t,e){return t[e]=e+"Error",t}),{}),rc=Zu,ic=Yu.reduce((function(t,e){var n=e+"Error";function r(t,r){this._e=Xu(),this.name=n,t?"string"==typeof t?(this.message=t,this.inner=r||null):"object"==typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=Ku[e]||n,this.inner=null)}return Au(r).from(rc),t[e]=r,t}),{});ic.Syntax=SyntaxError,ic.Type=TypeError,ic.Range=RangeError;var sc=Ju.reduce((function(t,e){return t[e+"Error"]=ic[e],t}),{});var ac=Yu.reduce((function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=ic[e]),t}),{});function oc(){}function uc(t){return t}function cc(t,e){return null==t||t===uc?e:function(n){return e(t(n))}}function hc(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function lc(t,e){return t===oc?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?hc(r,this.onsuccess):r),i&&(this.onerror=this.onerror?hc(i,this.onerror):i),void 0!==s?s:n}}function fc(t,e){return t===oc?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?hc(n,this.onsuccess):n),r&&(this.onerror=this.onerror?hc(r,this.onerror):r)}}function dc(t,e){return t===oc?e:function(n){var r=t.apply(this,arguments);_u(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?hc(i,this.onsuccess):i),s&&(this.onerror=this.onerror?hc(s,this.onerror):s),void 0===r?void 0===a?void 0:a:_u(r,a)}}function pc(t,e){return t===oc?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function _c(t,e){return t===oc?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then((function(){return e.apply(r,s)}))}return e.apply(this,arguments)}}ac.ModifyError=tc,ac.DexieError=Zu,ac.BulkError=ec;var gc={},bc=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var t=pu.Promise;return t?[t.resolve(),t.prototype,t.resolve()]:[]}}(),vc=bc[0],mc=bc[1],yc=bc[2],wc=mc&&mc.then,Ac=vc&&vc.constructor,kc=bc[3],Ec=!!yc,xc=!1,Tc=yc?function(){yc.then(Xc)}:pu.setImmediate?setImmediate.bind(null,Xc):pu.MutationObserver?function(){var t=document.createElement("div");new MutationObserver((function(){Xc(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Xc,0)},Cc=function(t,e){Fc.push([t,e]),Rc&&(Tc(),Rc=!1)},Sc=!0,Rc=!0,Ic=[],Bc=[],Pc=null,Oc=uc,Dc={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:bh,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(t){try{bh(t[0],t[1])}catch(t){}}))}},Mc=Dc,Fc=[],Lc=0,Nc=[];function jc(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=oc,this._lib=!1;var e=this._PSD=Mc;if(Wu&&(this._stackHolder=Xu(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==gc)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Hc(this,this._value))}this._state=null,this._value=null,++e.ref,$c(this,t)}var Uc={get:function(){var t=Mc,e=ih;function n(n,r){var i=this,s=!t.global&&(t!==Mc||e!==ih);s&&uh();var a=new jc((function(e,a){Gc(i,new zc(_h(n,t,s),_h(r,t,s),e,a,t))}));return Wu&&qc(a,this),a}return n.prototype=gc,n},set:function(t){wu(this,"then",t&&t.prototype===gc?Uc:{get:function(){return t},set:Uc.set})}};function zc(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function $c(t,e){try{e((function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Qc();e&&"function"==typeof e.then?$c(t,(function(t,n){e instanceof jc?e._then(t,n):e.then(t,n)})):(t._state=!0,t._value=e,Wc(t)),n&&Jc()}}),Hc.bind(null,t))}catch(e){Hc(t,e)}}function Hc(t,e){if(Bc.push(e),null===t._state){var n=t._lib&&Qc();e=Oc(e),t._state=!1,t._value=e,Wu&&null!==e&&"object"==typeof e&&!e._promise&&Bu((function(){var n=function t(e,n){var r;return ku(e,n)||(r=gu(e))&&t(r,n)}(e,"stack");e._promise=t,wu(e,"stack",{get:function(){return xc?n&&(n.get?n.get.apply(e):n.value):t.stack}})})),function(t){Ic.some((function(e){return e._value===t._value}))||Ic.push(t)}(t),Wc(t),n&&Jc()}}function Wc(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Gc(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===Lc&&(++Lc,Cc((function(){0==--Lc&&Yc()}),[]))}function Gc(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Lc,Cc(Vc,[n,t,e])}else t._listeners.push(e)}function Vc(t,e,n){try{Pc=e;var r,i=e._value;e._state?r=t(i):(Bc.length&&(Bc=[]),r=t(i),-1===Bc.indexOf(i)&&function(t){var e=Ic.length;for(;e;)if(Ic[--e]._value===t._value)return void Ic.splice(e,1)}(e)),n.resolve(r)}catch(t){n.reject(t)}finally{Pc=null,0==--Lc&&Yc(),--n.psd.ref||n.psd.finalize()}}function qc(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Xc(){Qc()&&Jc()}function Qc(){var t=Sc;return Sc=!1,Rc=!1,t}function Jc(){var t,e,n;do{for(;Fc.length>0;)for(t=Fc,Fc=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(Fc.length>0);Sc=!0,Rc=!0}function Yc(){var t=Ic;Ic=[],t.forEach((function(t){t._PSD.onunhandled.call(null,t._value,t)}));for(var e=Nc.slice(0),n=e.length;n;)e[--n]()}function Kc(t){return new jc(gc,!1,t)}function Zc(t,e){var n=Mc;return function(){var r=Qc(),i=Mc;try{return fh(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{fh(i,!1),r&&Jc()}}}mu(jc.prototype,{then:Uc,_then:function(t,e){Gc(this,new zc(null,null,t,e,Mc))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,(function(t){return t instanceof e?n(t):Kc(t)})):this.then(null,(function(t){return t&&t.name===e?n(t):Kc(t)}))},finally:function(t){return this.then((function(e){return t(),e}),(function(e){return t(),Kc(e)}))},stack:{get:function(){if(this._stack)return this._stack;try{xc=!0;var t=function t(e,n,r){if(n.length===r)return n;var i="";if(!1===e._state){var s,a,o=e._value;null!=o?(s=o.name||"Error",a=o.message||o,i=Qu(o,0)):(s=o,a=""),n.push(s+(a?": "+a:"")+i)}Wu&&((i=Qu(e._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),e._prev&&t(e._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{xc=!1}}},timeout:function(t,e){var n=this;return t<1/0?new jc((function(r,i){var s=setTimeout((function(){return i(new ic.Timeout(e))}),t);n.then(r,i).finally(clearTimeout.bind(null,s))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&wu(jc.prototype,Symbol.toStringTag,"Promise"),Dc.env=dh(),mu(jc,{all:function(){var t=Hu.apply(null,arguments).map(ch);return new jc((function(e,n){0===t.length&&e([]);var r=t.length;t.forEach((function(i,s){return jc.resolve(i).then((function(n){t[s]=n,--r||e(t)}),n)}))}))},resolve:function(t){if(t instanceof jc)return t;if(t&&"function"==typeof t.then)return new jc((function(e,n){t.then(e,n)}));var e=new jc(gc,!0,t);return qc(e,Pc),e},reject:Kc,race:function(){var t=Hu.apply(null,arguments).map(ch);return new jc((function(e,n){t.map((function(t){return jc.resolve(t).then(e,n)}))}))},PSD:{get:function(){return Mc},set:function(t){return Mc=t}},newPSD:ah,usePSD:ph,scheduler:{get:function(){return Cc},set:function(t){Cc=t}},rejectionMapper:{get:function(){return Oc},set:function(t){Oc=t}},follow:function(t,e){return new jc((function(n,r){return ah((function(e,n){var r=Mc;r.unhandleds=[],r.onunhandled=n,r.finalize=hc((function(){var t=this;!function(t){Nc.push((function e(){t(),Nc.splice(Nc.indexOf(e),1)})),++Lc,Cc((function(){0==--Lc&&Yc()}),[])}((function(){0===t.unhandleds.length?e():n(t.unhandleds[0])}))}),r.finalize),t()}),e,n,r)}))}});var th={awaits:0,echoes:0,id:0},eh=0,nh=[],rh=0,ih=0,sh=0;function ah(t,e,n,r){var i=Mc,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++sh;var a=Dc.env;s.env=Ec?{Promise:jc,PromiseProp:{value:jc,configurable:!0,writable:!0},all:jc.all,race:jc.race,resolve:jc.resolve,reject:jc.reject,nthen:gh(a.nthen,s),gthen:gh(a.gthen,s)}:{},e&&_u(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=ph(s,t,n,r);return 0===s.ref&&s.finalize(),o}function oh(){return th.id||(th.id=++eh),++th.awaits,th.echoes+=7,th.id}function uh(t){!th.awaits||t&&t!==th.id||(0==--th.awaits&&(th.id=0),th.echoes=7*th.awaits)}function ch(t){return th.echoes&&t&&t.constructor===Ac?(oh(),t.then((function(t){return uh(),t}),(function(t){return uh(),vh(t)}))):t}function hh(t){++ih,th.echoes&&0!=--th.echoes||(th.echoes=th.id=0),nh.push(Mc),fh(t,!0)}function lh(){var t=nh[nh.length-1];nh.pop(),fh(t,!1)}function fh(t,e){var n,r=Mc;if((e?!th.echoes||rh++&&t===Mc:!rh||--rh&&t===Mc)||(n=e?hh.bind(null,t):lh,wc.call(vc,n)),t!==Mc&&(Mc=t,r===Dc&&(Dc.env=dh()),Ec)){var i=Dc.env.Promise,s=t.env;mc.then=s.nthen,i.prototype.then=s.gthen,(r.global||t.global)&&(Object.defineProperty(pu,"Promise",s.PromiseProp),i.all=s.all,i.race=s.race,i.resolve=s.resolve,i.reject=s.reject)}}function dh(){var t=pu.Promise;return Ec?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(pu,"Promise"),all:t.all,race:t.race,resolve:t.resolve,reject:t.reject,nthen:mc.then,gthen:t.prototype.then}:{}}function ph(t,e,n,r,i){var s=Mc;try{return fh(t,!0),e(n,r,i)}finally{fh(s,!1)}}function _h(t,e,n){return"function"!=typeof t?t:function(){var r=Mc;n&&oh(),fh(e,!0);try{return t.apply(this,arguments)}finally{fh(r,!1)}}}function gh(t,e){return function(n,r){return t.call(this,_h(n,e,!1),_h(r,e,!1))}}function bh(t,e){var n;try{n=e.onuncatched(t)}catch(t){}if(!1!==n)try{var r,i={promise:e,reason:t};if(pu.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),_u(r,i)):pu.CustomEvent&&_u(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&pu.dispatchEvent&&(dispatchEvent(r),!pu.PromiseRejectionEvent&&pu.onunhandledrejection))try{pu.onunhandledrejection(r)}catch(t){}r.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(t){}}var vh=jc.reject;function mh(t){var e={},n=function(n,r){if(r){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return e[n].subscribe.apply(null,s),t}if("string"==typeof n)return e[n]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(t,r,i){if("object"==typeof t)return a(t);r||(r=pc),i||(i=oc);var s={subscribers:[],fire:i,subscribe:function(t){-1===s.subscribers.indexOf(t)&&(s.subscribers.push(t),s.fire=r(s.fire,t))},unsubscribe:function(t){s.subscribers=s.subscribers.filter((function(e){return e!==t})),s.fire=s.subscribers.reduce(r,i)}};return e[t]=n[t]=s,s}function a(t){fu(t).forEach((function(e){var n=t[e];if(du(n))s(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new ic.InvalidArgument("Invalid event config");var r=s(e,uc,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];r.subscribers.forEach((function(t){Su((function(){t.apply(null,e)}))}))}))}}))}}var yh,wh=String.fromCharCode(65535),Ah=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(t){return wh}}(),kh="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Eh=[],xh="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Th=xh,Ch=xh,Sh=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};function Rh(t,e){var n,r,i,s,a,o=Rh.dependencies,u=_u({addons:Rh.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},e),c=u.addons,h=u.autoOpen,l=u.indexedDB,f=u.IDBKeyRange,d=this._dbSchema={},p=[],_=[],g={},b=null,v=null,m=!1,y=null,w=!1,A="readwrite",k=this,E=new jc((function(t){n=t})),x=new jc((function(t,e){r=e})),T=!0,C=!!Uh(l);function S(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function R(t,e,n){var r=k._createTransaction(A,_,d);r.create(e),r._completion.catch(n);var i=r._reject.bind(r);ah((function(){Mc.trans=r,0===t?(fu(d).forEach((function(t){I(e,t,d[t].primKey,d[t].indexes)})),jc.follow((function(){return k.on.populate.fire(r)})).catch(i)):function(t,e,n){var r=[],i=p.filter((function(e){return e._cfg.version===t}))[0];if(!i)throw new ic.Upgrade("Dexie specification of currently installed DB version is missing");d=k._dbSchema=i._cfg.dbschema;var s=!1;function a(){return r.length?jc.resolve(r.shift()(e.idbtrans)).then(a):jc.resolve()}return p.filter((function(e){return e._cfg.version>t})).forEach((function(t){r.push((function(){var r=d,i=t._cfg.dbschema;J(r,n),J(i,n),d=k._dbSchema=i;var a=function(t,e){var n={del:[],add:[],change:[]};for(var r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],s=e[r];if(i){var a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==s.primKey.src)a.recreate=!0,n.change.push(a);else{var o=i.idxByName,u=s.idxByName;for(var c in o)u[c]||a.del.push(c);for(c in u){var h=o[c],l=u[c];h?h.src!==l.src&&a.change.push(l):a.add.push(l)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,s])}return n}(r,i);if(a.add.forEach((function(t){I(n,t[0],t[1].primKey,t[1].indexes)})),a.change.forEach((function(t){if(t.recreate)throw new ic.Upgrade("Not yet support for changing primary key");var e=n.objectStore(t.name);t.add.forEach((function(t){B(e,t)})),t.change.forEach((function(t){e.deleteIndex(t.name),B(e,t)})),t.del.forEach((function(t){e.deleteIndex(t)}))})),t._cfg.contentUpgrade)return s=!0,jc.follow((function(){t._cfg.contentUpgrade(e)}))})),r.push((function(e){s&&Th||function(t,e){for(var n=0;n<e.db.objectStoreNames.length;++n){var r=e.db.objectStoreNames[n];null==t[r]&&e.db.deleteObjectStore(r)}}(t._cfg.dbschema,e)}))})),a().then((function(){!function(t,e){fu(t).forEach((function(n){e.db.objectStoreNames.contains(n)||I(e,n,t[n].primKey,t[n].indexes)}))}(d,n)}))}(t,r,e).catch(i)}))}function I(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(t){B(i,t)})),i}function B(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function P(t,e,n){var r=arguments.length;if(r<2)throw new ic.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var s=Fu(i);return[t,s,n]}function O(t,e,n){this.name=t,this.schema=e,this._tx=n,this.hook=g[t]?g[t].hook:mh(null,{creating:[lc,oc],reading:[cc,uc],updating:[dc,oc],deleting:[fc,oc]})}function D(t,e,n){return(n?Dh:Ph)((function(n){t.push(n),e&&e()}))}function M(t,e,n,r,i){return new jc((function(s,a){var o=n.length,u=o-1;if(0===o)return s();if(r){var c,h=Dh(a),l=Bh(null);Bu((function(){for(var r=0;r<o;++r){c={onsuccess:null,onerror:null};var a=n[r];i.call(c,a[0],a[1],e);var f=t.delete(a[0]);f._hookCtx=c,f.onerror=h,f.onsuccess=r===u?Bh(s):l}}),(function(t){throw c.onerror&&c.onerror(t),t}))}else for(var f=0;f<o;++f){var d=t.delete(n[f]);d.onerror=Ph(a),f===u&&(d.onsuccess=Zc((function(){return s()})))}}))}function F(t,e,n,r){var i=this;this.db=k,this.mode=t,this.storeNames=e,this.idbtrans=null,this.on=mh(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new jc((function(t,e){i._resolve=t,i._reject=e})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(t){var e=i.active;return i.active=!1,i.on.error.fire(t),i.parent?i.parent._reject(t):e&&i.idbtrans&&i.idbtrans.abort(),vh(t)}))}function L(t,e,n){this._ctx={table:t,index:":id"===e?null:e,or:n}}function N(t,e){var n=null,r=null;if(e)try{n=e()}catch(t){r=t}var i=t._ctx,s=i.table;this._ctx={table:s,index:i.index,isPrimKey:!i.index||s.schema.primKey.keyPath&&i.index===s.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:s.hook.reading.fire}}function j(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function U(t,e){return t._cfg.version-e._cfg.version}function z(t,e,n){e.forEach((function(e){var r=n[e];t.forEach((function(t){e in t||(t===F.prototype||t instanceof F?wu(t,e,{get:function(){return this.table(e)}}):t[e]=new O(e,r))}))}))}function $(t,e,n,r,i,s){var a=Zc(s?function(t,e,r){return n(s(t),e,r)}:n,i);t.onerror||(t.onerror=Ph(i)),t.onsuccess=Iu(e?function(){var n=t.result;if(n){var s=function(){n.continue()};e(n,(function(t){s=t}),r,i)&&a(n.value,n,(function(t){s=t})),s()}else r()}:function(){var e=t.result;if(e){var n=function(){e.continue()};a(e.value,e,(function(t){n=t})),n()}else r()},i)}function H(t,e){return l.cmp(t,e)}function W(t,e){return H(t,e)>0?t:e}function G(t,e){return l.cmp(t,e)}function V(t,e){return l.cmp(e,t)}function q(t,e){return t<e?-1:t===e?0:1}function X(t,e){return t>e?-1:t===e?0:1}function Q(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}function J(t,e){for(var n=e.db.objectStoreNames,r=0;r<n.length;++r){var s=n[r],a=e.objectStore(s);i="getAll"in a;for(var o=0;o<a.indexNames.length;++o){var u=a.indexNames[o],c=a.index(u).keyPath,h="string"==typeof c?c:"["+xu(c).join("+")+"]";if(t[s]){var l=t[s].idxByName[h];l&&(l.name=u)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&pu.WorkerGlobalScope&&pu instanceof pu.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i=!1)}function Y(t){k.on("blocked").fire(t),Eh.filter((function(t){return t.name===k.name&&t!==k&&!t._vcFired})).map((function(e){return e.on("versionchange").fire(t)}))}this.version=function(t){if(b||m)throw new ic.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=p.filter((function(e){return e._cfg.version===t}))[0];return e||(e=new S(t),p.push(e),p.sort(U),T=!1,e)},_u(S.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?_u(this._cfg.storesSource,t):t;var e={};p.forEach((function(t){_u(e,t._cfg.storesSource)}));var n=this._cfg.dbschema={};return this._parseStoresSpec(e,n),d=k._dbSchema=n,[g,k,F.prototype].forEach((function(t){for(var e in t)t[e]instanceof O&&delete t[e]})),z([g,k,F.prototype,this._cfg.tables],fu(n),n),_=fu(n),this},upgrade:function(t){return this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(t,e){fu(t).forEach((function(n){if(null!==t[n]){var r={},i=function(t){var e=[];return t.split(",").forEach((function(t){var n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;e.push(new Lh(n,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),du(r),/\./.test(t)))})),e}(t[n]),s=i.shift();if(s.multi)throw new ic.Schema("Primary key cannot be multi-valued");s.keyPath&&Ou(r,s.keyPath,s.auto?0:s.keyPath),i.forEach((function(t){if(t.auto)throw new ic.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new ic.Schema("Index must have a name and cannot be an empty string");Ou(r,t.keyPath,t.compound?t.keyPath.map((function(){return""})):"")})),e[n]=new Nh(n,s,i,r)}}))}}),this._allTables=g,this._createTransaction=function(t,e,n,r){return new F(t,e,n,r)},this._whenReady=function(t){return w||Mc.letThrough?t():new jc((function(t,e){if(!m){if(!h)return void e(new ic.DatabaseClosed);k.open().catch(oc)}E.then(t,e)})).then(t)},this.verno=0,this.open=function(){if(m||b)return E.then((function(){return v?vh(v):k}));Wu&&(x._stackHolder=Xu()),m=!0,v=null,w=!1;var e=n,r=null;return jc.race([x,new jc((function(e,n){if(!l)throw new ic.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=T?l.open(t):l.open(t,Math.round(10*k.verno));if(!i)throw new ic.MissingAPI("IndexedDB API not available");i.onerror=Ph(n),i.onblocked=Zc(Y),i.onupgradeneeded=Zc((function(e){if(r=i.transaction,T&&!k._allowEmptyDB){i.onerror=Mh,r.abort(),i.result.close();var s=l.deleteDatabase(t);s.onsuccess=s.onerror=Zc((function(){n(new ic.NoSuchDatabase("Database "+t+" doesnt exist"))}))}else{r.onerror=Ph(n),R((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,r,n)}}),n),i.onsuccess=Zc((function(){if(r=null,b=i.result,Eh.push(k),T)!function(){if(k.verno=b.version/10,k._dbSchema=d={},0===(_=xu(b.objectStoreNames,0)).length)return;var t=b.transaction(jh(_),"readonly");_.forEach((function(e){for(var n=t.objectStore(e),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),s=new Lh(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),a=[],o=0;o<n.indexNames.length;++o){var u=n.index(n.indexNames[o]);i=(r=u.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var c=new Lh(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,i);a.push(c)}d[e]=new Nh(e,s,a,{})})),z([g],fu(d),d)}();else if(b.objectStoreNames.length>0)try{J(d,b.transaction(jh(b.objectStoreNames),"readonly"))}catch(t){}b.onversionchange=Zc((function(t){k._vcFired=!0,k.on("versionchange").fire(t)})),C||"__dbnames"===t||yh.dbnames.put({name:t}).catch(oc),e()}),n)}))]).then((function(){return y=[],jc.resolve(Rh.vip(k.on.ready.fire)).then((function t(){if(y.length>0){var e=y.reduce(_c,oc);return y=[],jc.resolve(Rh.vip(e)).then(t)}}))})).finally((function(){y=null})).then((function(){return m=!1,k})).catch((function(t){try{r&&r.abort()}catch(t){}return m=!1,k.close(),vh(v=t)})).finally((function(){w=!0,e()}))},this.close=function(){var t=Eh.indexOf(k);if(t>=0&&Eh.splice(t,1),b){try{b.close()}catch(t){}b=null}h=!1,v=new ic.DatabaseClosed,m&&r(v),E=new jc((function(t){n=t})),x=new jc((function(t,e){r=e}))},this.delete=function(){var e=arguments.length>0;return new jc((function(n,r){if(e)throw new ic.InvalidArgument("Arguments not allowed in db.delete()");function i(){k.close();var e=l.deleteDatabase(t);e.onsuccess=Zc((function(){C||yh.dbnames.delete(t).catch(oc),n()})),e.onerror=Ph(r),e.onblocked=Y}m?E.then(i):i()}))},this.backendDB=function(){return b},this.isOpen=function(){return null!==b},this.hasBeenClosed=function(){return v&&v instanceof ic.DatabaseClosed},this.hasFailed=function(){return null!==v},this.dynamicallyOpened=function(){return T},this.name=t,mu(this,{tables:{get:function(){return fu(g).map((function(t){return g[t]}))}}}),this.on=mh(this,"populate","blocked","versionchange",{ready:[_c,oc]}),this.on.ready.subscribe=Tu(this.on.ready.subscribe,(function(t){return function(e,n){Rh.vip((function(){w?(v||jc.resolve().then(e),n&&t(e)):y?(y.push(e),n&&t(e)):(t(e),n||t((function t(){k.on.ready.unsubscribe(e),k.on.ready.unsubscribe(t)})))}))}})),this.transaction=function(){var t=P.apply(this,arguments);return this._transaction.apply(this,t)},this._transaction=function(t,e,n){var r=Mc.trans;r&&r.db===k&&-1===t.indexOf("!")||(r=null);var i=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{var s=e.map((function(t){var e=t instanceof O?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}));if("r"==t||"readonly"==t)t="readonly";else{if("rw"!=t&&t!=A)throw new ic.InvalidArgument("Invalid transaction mode: "+t);t=A}if(r){if("readonly"===r.mode&&t===A){if(!i)throw new ic.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&s.forEach((function(t){if(r&&-1===r.storeNames.indexOf(t)){if(!i)throw new ic.SubTransaction("Table "+t+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(t){return r?r._promise(null,(function(e,n){n(t)})):vh(t)}return r?r._promise(t,a,"lock"):Mc.trans?ph(Mc.transless,(function(){return k._whenReady(a)})):k._whenReady(a);function a(){return jc.resolve().then((function(){var e,i=Mc.transless||Mc,a=k._createTransaction(t,s,d,r),o={trans:a,transless:i};r?a.idbtrans=r.idbtrans:a.create(),n.constructor===kc&&oh();var u=jc.follow((function(){if(e=n.call(a,a))if(e.constructor===Ac){var t=uh.bind(null,null);e.then(t,t)}else"function"==typeof e.next&&"function"==typeof e.throw&&(e=Fh(e))}),o);return(e&&"function"==typeof e.then?jc.resolve(e).then((function(t){return a.active?t:vh(new ic.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return e}))).then((function(t){return r&&a._resolve(),a._completion.then((function(){return t}))})).catch((function(t){return a._reject(t),vh(t)}))}))}},this.table=function(t){if(!vu(g,t))throw new ic.InvalidTable("Table "+t+" does not exist");return g[t]},mu(O.prototype,{_trans:function(t,e,n){var r=this._tx||Mc.trans;return r&&r.db===k?r===Mc.trans?r._promise(t,e,n):ah((function(){return r._promise(t,e,n)}),{trans:r,transless:Mc.transless||Mc}):function t(e,n,r){if(w||Mc.letThrough){var i=k._createTransaction(e,n,d);try{i.create()}catch(t){return vh(t)}return i._promise(e,(function(t,e){return ah((function(){return Mc.trans=i,r(t,e,i)}))})).then((function(t){return i._completion.then((function(){return t}))}))}if(!m){if(!h)return vh(new ic.DatabaseClosed);k.open().catch(oc)}return E.then((function(){return t(e,n,r)}))}(t,[this.name],e)},_idbstore:function(t,e,n){var r=this.name;return this._trans(t,(function(t,n,i){if(-1===i.storeNames.indexOf(r))throw new ic.NotFound("Table"+r+" not part of transaction");return e(t,n,i.idbtrans.objectStore(r),i)}),n)},get:function(t,e){if(t&&t.constructor===Object)return this.where(t).first(e);var n=this;return this._idbstore("readonly",(function(e,r,i){var s=i.get(t);s.onerror=Ph(r),s.onsuccess=Zc((function(){e(n.hook.reading.fire(s.result))}),r)})).then(e)},where:function(t){if("string"==typeof t)return new L(this,t);if(du(t))return new L(this,"["+t.join("+")+"]");var e=fu(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(t){return t.compound&&e.every((function(e){return t.keyPath.indexOf(e)>=0}))&&t.keyPath.every((function(t){return e.indexOf(t)>=0}))}))[0];if(n&&Ah!==wh)return this.where(n.name).equals(n.keyPath.map((function(e){return t[e]})));n||console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var r=this.schema.idxByName,i=e.reduce((function(e,n){return[e[0]||r[n],e[0]||!r[n]?Q(e[1],(function(e){return""+Pu(e,n)==""+t[n]})):e[1]]}),[null,null]),s=i[0];return s?this.where(s.name).equals(t[s.keyPath]).filter(i[1]):n?this.filter(i[1]):this.where(e).equals("")},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){return this.toCollection().each(t)},toArray:function(t){return this.toCollection().toArray(t)},orderBy:function(t){return new N(new L(this,du(t)?"["+t.join("+")+"]":t))},toCollection:function(){return new N(new L(this))},mapToClass:function(t,e){this.schema.mappedClass=t;var n=Object.create(t.prototype);e&&Ih(n,e),this.schema.instanceTemplate=n;var r=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(vu(e,r))try{n[r]=e[r]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),t},defineClass:function(t){return this.mapToClass(Rh.defineClass(t),t)},bulkDelete:function(t){return this.hook.deleting.fire===oc?this._idbstore(A,(function(e,n,r,i){e(M(r,i,t,!1,oc))})):this.where(":id").anyOf(t).delete().then((function(){}))},bulkPut:function(t,e){var n=this;return this._idbstore(A,(function(r,i,s){if(!s.keyPath&&!n.schema.primKey.auto&&!e)throw new ic.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(s.keyPath&&e)throw new ic.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new ic.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return r();var a,o,u=function(t){0===c.length?r(t):i(new ec(n.name+".bulkPut(): "+c.length+" of "+h+" operations failed",c))},c=[],h=t.length,l=n;if(n.hook.creating.fire===oc&&n.hook.updating.fire===oc){o=D(c);for(var f=0,d=t.length;f<d;++f)(a=e?s.put(t[f],e[f]):s.put(t[f])).onerror=o;a.onerror=D(c,u),a.onsuccess=Oh(u)}else{var p=e||s.keyPath&&t.map((function(t){return Pu(t,s.keyPath)})),_=p&&Ru(p,(function(e,n){return null!=e&&[e,t[n]]}));(p?l.where(":id").anyOf(p.filter((function(t){return null!=t}))).modify((function(){this.value=_[this.primKey],_[this.primKey]=null})).catch(tc,(function(t){c=t.failures})).then((function(){for(var n=[],r=e&&[],i=p.length-1;i>=0;--i){var s=p[i];(null==s||_[s])&&(n.push(t[i]),e&&r.push(s),null!=s&&(_[s]=null))}return n.reverse(),e&&r.reverse(),l.bulkAdd(n,r)})).then((function(t){var e=p[p.length-1];return null!=e?e:t})):l.bulkAdd(t)).then(u).catch(ec,(function(t){c=c.concat(t.failures),u()})).catch(i)}}),"locked")},bulkAdd:function(t,e){var n=this,r=this.hook.creating.fire;return this._idbstore(A,(function(i,s,a,o){if(!a.keyPath&&!n.schema.primKey.auto&&!e)throw new ic.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&e)throw new ic.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new ic.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return i();function u(t){0===f.length?i(t):s(new ec(n.name+".bulkAdd(): "+f.length+" of "+d+" operations failed",f))}var c,h,l,f=[],d=t.length;if(r!==oc){var p,_=a.keyPath;h=D(f,null,!0),l=Bh(null),Bu((function(){for(var n=0,i=t.length;n<i;++n){p={onerror:null,onsuccess:null};var s=e&&e[n],u=t[n],f=e?s:_?Pu(u,_):void 0,d=r.call(p,f,u,o);null==f&&null!=d&&(_?Ou(u=Nu(u),_,d):s=d),(c=null!=s?a.add(u,s):a.add(u))._hookCtx=p,n<i-1&&(c.onerror=h,p.onsuccess&&(c.onsuccess=l))}}),(function(t){throw p.onerror&&p.onerror(t),t})),c.onerror=D(f,u,!0),c.onsuccess=Bh(u)}else{h=D(f);for(var g=0,b=t.length;g<b;++g)(c=e?a.add(t[g],e[g]):a.add(t[g])).onerror=h;c.onerror=D(f,u),c.onsuccess=Oh(u)}}))},add:function(t,e){var n=this.hook.creating.fire;return this._idbstore(A,(function(r,i,s,a){var o={onsuccess:null,onerror:null};if(n!==oc){var u=null!=e?e:s.keyPath?Pu(t,s.keyPath):void 0,c=n.call(o,u,t,a);null==u&&null!=c&&(s.keyPath?Ou(t,s.keyPath,c):e=c)}try{var h=null!=e?s.add(t,e):s.add(t);h._hookCtx=o,h.onerror=Dh(i),h.onsuccess=Bh((function(e){var n=s.keyPath;n&&Ou(t,n,e),r(e)}))}catch(t){throw o.onerror&&o.onerror(t),t}}))},put:function(t,e){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==oc||i!==oc){var s=this.schema.primKey.keyPath,a=void 0!==e?e:s&&Pu(t,s);return null==a?this.add(t):(t=Nu(t),this._trans(A,(function(){return n.where(":id").equals(a).modify((function(){this.value=t})).then((function(r){return 0===r?n.add(t,e):a}))}),"locked"))}return this._idbstore(A,(function(n,r,i){var s=void 0!==e?i.put(t,e):i.put(t);s.onerror=Ph(r),s.onsuccess=Zc((function(e){var r=i.keyPath;r&&Ou(t,r,e.target.result),n(s.result)}))}))},delete:function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t).delete():this._idbstore(A,(function(e,n,r){var i=r.delete(t);i.onerror=Ph(n),i.onsuccess=Zc((function(){e(i.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(A,(function(t,e,n){var r=n.clear();r.onerror=Ph(e),r.onsuccess=Zc((function(){t(r.result)}))}))},update:function(t,e){if("object"!=typeof e||du(e))throw new ic.InvalidArgument("Modifications must be an object.");if("object"!=typeof t||du(t))return this.where(":id").equals(t).modify(e);fu(e).forEach((function(n){Ou(t,n,e[n])}));var n=Pu(t,this.schema.primKey.keyPath);return void 0===n?vh(new ic.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)}}),mu(F.prototype,{_lock:function(){return Cu(!Mc.global),++this._reculock,1!==this._reculock||Mc.global||(Mc.lockOwnerFor=this),this},_unlock:function(){if(Cu(!Mc.global),0==--this._reculock)for(Mc.global||(Mc.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ph(t[1],t[0])}catch(t){}}return this},_locked:function(){return this._reculock&&Mc.lockOwnerFor!==this},create:function(t){var e=this;if(!this.mode)return this;if(Cu(!this.idbtrans),!t&&!b)switch(v&&v.name){case"DatabaseClosedError":throw new ic.DatabaseClosed(v);case"MissingAPIError":throw new ic.MissingAPI(v.message,v);default:throw new ic.OpenFailed(v)}if(!this.active)throw new ic.TransactionInactive;return Cu(null===this._completion._state),(t=this.idbtrans=t||b.transaction(jh(this.storeNames),this.mode)).onerror=Zc((function(n){Mh(n),e._reject(t.error)})),t.onabort=Zc((function(n){Mh(n),e.active&&e._reject(new ic.Abort(t.error)),e.active=!1,e.on("abort").fire(n)})),t.oncomplete=Zc((function(){e.active=!1,e._resolve()})),this},_promise:function(t,e,n){var r=this;if(t===A&&this.mode!==A)return vh(new ic.ReadOnly("Transaction is readonly"));if(!this.active)return vh(new ic.TransactionInactive);if(this._locked())return new jc((function(i,s){r._blockedFuncs.push([function(){r._promise(t,e,n).then(i,s)},Mc])}));if(n)return ah((function(){var t=new jc((function(t,n){r._lock();var i=e(t,n,r);i&&i.then&&i.then(t,n)}));return t.finally((function(){return r._unlock()})),t._lib=!0,t}));var i=new jc((function(t,n){var i=e(t,n,r);i&&i.then&&i.then(t,n)}));return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(t){var e=this._root();if(t=jc.resolve(t),e._waitingFor)e._waitingFor=e._waitingFor.then((function(){return t}));else{e._waitingFor=t,e._waitingQueue=[];var n=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(n.get(-1/0).onsuccess=t)}()}var r=e._waitingFor;return new jc((function(n,i){t.then((function(t){return e._waitingQueue.push(Zc(n.bind(null,t)))}),(function(t){return e._waitingQueue.push(Zc(i.bind(null,t)))})).finally((function(){e._waitingFor===r&&(e._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new ic.Abort),this.active=!1},tables:{get:(s="Transaction.tables",a=function(){return g},function(){return console.warn(s+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+Qu(Xu(),1)),a.apply(this,arguments)})},table:function(t){return new O(t,k.table(t).schema,this)}}),mu(L.prototype,(function(){function t(t,e,n){var r=t instanceof L?new N(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function e(t){return new N(t,(function(){return f.only("")})).limit(0)}function n(t,e,n,r,i,s){for(var a=Math.min(t.length,r.length),o=-1,u=0;u<a;++u){var c=e[u];if(c!==r[u])return i(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):i(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):o>=0?t.substr(0,o)+e[o]+n.substr(o+1):null;i(t[u],c)<0&&(o=u)}return a<r.length&&"next"===s?t+n.substr(t.length):a<t.length&&"prev"===s?t.substr(0,n.length):o<0?null:t.substr(0,o)+r[o]+n.substr(o+1)}function r(e,r,i,s){var a,o,u,c,h,l,d,p=i.length;if(!i.every((function(t){return"string"==typeof t})))return t(e,"String expected.");function _(t){a=function(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}(t),o=function(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}(t),u="next"===t?q:X;var e=i.map((function(t){return{lower:o(t),upper:a(t)}})).sort((function(t,e){return u(t.lower,e.lower)}));c=e.map((function(t){return t.upper})),h=e.map((function(t){return t.lower})),l=t,d="next"===t?"":s}_("next");var g=new N(e,(function(){return f.bound(c[0],h[p-1]+s)}));g._ondirectionchange=function(t){_(t)};var b=0;return g._addAlgorithm((function(t,e,i){var s=t.key;if("string"!=typeof s)return!1;var a=o(s);if(r(a,h,b))return!0;for(var f=null,_=b;_<p;++_){var g=n(s,a,c[_],h[_],u,l);null===g&&null===f?b=_+1:(null===f||u(f,g)>0)&&(f=g)}return e(null!==f?function(){t.continue(f+d)}:i),!1})),g}return{between:function(n,r,i,s){i=!1!==i,s=!0===s;try{return H(n,r)>0||0===H(n,r)&&(i||s)&&(!i||!s)?e(this):new N(this,(function(){return f.bound(n,r,!i,!s)}))}catch(e){return t(this,kh)}},equals:function(t){return new N(this,(function(){return f.only(t)}))},above:function(t){return new N(this,(function(){return f.lowerBound(t,!0)}))},aboveOrEqual:function(t){return new N(this,(function(){return f.lowerBound(t)}))},below:function(t){return new N(this,(function(){return f.upperBound(t,!0)}))},belowOrEqual:function(t){return new N(this,(function(){return f.upperBound(t)}))},startsWith:function(e){return"string"!=typeof e?t(this,"String expected."):this.between(e,e+wh,!0,!0)},startsWithIgnoreCase:function(t){return""===t?this.startsWith(t):r(this,(function(t,e){return 0===t.indexOf(e[0])}),[t],wh)},equalsIgnoreCase:function(t){return r(this,(function(t,e){return t===e[0]}),[t],"")},anyOfIgnoreCase:function(){var t=Hu.apply($u,arguments);return 0===t.length?e(this):r(this,(function(t,e){return-1!==e.indexOf(t)}),t,"")},startsWithAnyOfIgnoreCase:function(){var t=Hu.apply($u,arguments);return 0===t.length?e(this):r(this,(function(t,e){return e.some((function(e){return 0===t.indexOf(e)}))}),t,wh)},anyOf:function(){var n=Hu.apply($u,arguments),r=G;try{n.sort(r)}catch(e){return t(this,kh)}if(0===n.length)return e(this);var i=new N(this,(function(){return f.bound(n[0],n[n.length-1])}));i._ondirectionchange=function(t){r="next"===t?G:V,n.sort(r)};var s=0;return i._addAlgorithm((function(t,e,i){for(var a=t.key;r(a,n[s])>0;)if(++s===n.length)return e(i),!1;return 0===r(a,n[s])||(e((function(){t.continue(n[s])})),!1)})),i},notEqual:function(t){return this.inAnyRange([[-1/0,t],[t,Ah]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var e=Hu.apply($u,arguments);if(0===e.length)return new N(this);try{e.sort(G)}catch(e){return t(this,kh)}var n=e.reduce((function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[-1/0,e]]}),null);return n.push([e[e.length-1],Ah]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return e(this);if(!n.every((function(t){return void 0!==t[0]&&void 0!==t[1]&&G(t[0],t[1])<=0})))return t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ic.InvalidArgument);var i=!r||!1!==r.includeLowers,s=r&&!0===r.includeUppers;var a,o=G;function u(t,e){return o(t[0],e[0])}try{(a=n.reduce((function(t,e){for(var n=0,r=t.length;n<r;++n){var i=t[n];if(H(e[0],i[1])<0&&H(e[1],i[0])>0){i[0]=(s=i[0],a=e[0],H(s,a)<0?s:a),i[1]=W(i[1],e[1]);break}}var s,a;return n===r&&t.push(e),t}),[])).sort(u)}catch(e){return t(this,kh)}var c=0,h=s?function(t){return G(t,a[c][1])>0}:function(t){return G(t,a[c][1])>=0},l=i?function(t){return V(t,a[c][0])>0}:function(t){return V(t,a[c][0])>=0};var d=h,p=new N(this,(function(){return f.bound(a[0][0],a[a.length-1][1],!i,!s)}));return p._ondirectionchange=function(t){"next"===t?(d=h,o=G):(d=l,o=V),a.sort(u)},p._addAlgorithm((function(t,e,n){for(var r=t.key;d(r);)if(++c===a.length)return e(n),!1;return!!function(t){return!h(t)&&!l(t)}(r)||0!==H(r,a[c][1])&&0!==H(r,a[c][0])&&(e((function(){o===G?t.continue(a[c][0]):t.continue(a[c][1])})),!1)})),p},startsWithAnyOf:function(){var n=Hu.apply($u,arguments);return n.every((function(t){return"string"==typeof t}))?0===n.length?e(this):this.inAnyRange(n.map((function(t){return[t,t+wh]}))):t(this,"startsWithAnyOf() only works with strings")}}})),mu(N.prototype,(function(){function t(t,e){t.filter=Q(t.filter,e)}function e(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Q(r(),e())}:e,t.justLimit=n&&!r}function n(t,e){if(t.isPrimKey)return e;var n=t.table.schema.idxByName[t.index];if(!n)throw new ic.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return e.index(n.name)}function r(t,e){var r=n(t,e);return t.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(t.range||null,t.dir+t.unique):r.openCursor(t.range||null,t.dir+t.unique)}function s(t,e,n,i,s){var a=t.replayFilter?Q(t.filter,t.replayFilter()):t.filter;t.or?function(){var o={},u=0;function c(){2==++u&&n()}function h(t,n,r){if(!a||a(n,r,c,i)){var s=n.primaryKey,u=""+s;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(s)),vu(o,u)||(o[u]=!0,e(t,n,r))}}t.or._iterate(h,c,i,s),$(r(t,s),t.algorithm,h,c,i,!t.keysOnly&&t.valueMapper)}():$(r(t,s),Q(t.algorithm,a),e,n,i,!t.keysOnly&&t.valueMapper)}return{_read:function(t,e){var n=this._ctx;return n.error?n.table._trans(null,vh.bind(null,n.error)):n.table._idbstore("readonly",t).then(e)},_write:function(t){var e=this._ctx;return e.error?e.table._trans(null,vh.bind(null,e.error)):e.table._idbstore(A,t,"locked")},_addAlgorithm:function(t){var e=this._ctx;e.algorithm=Q(e.algorithm,t)},_iterate:function(t,e,n,r){return s(this._ctx,t,e,n,r)},clone:function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&_u(n,t),e._ctx=n,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(t){var e=this._ctx;return this._read((function(n,r,i){s(e,t,n,r,i)}))},count:function(t){var e=this._ctx;if(j(e,!0))return this._read((function(t,r,i){var s=n(e,i),a=e.range?s.count(e.range):s.count();a.onerror=Ph(r),a.onsuccess=function(n){t(Math.min(n.target.result,e.limit))}}),t);var r=0;return this._read((function(t,n,i){s(e,(function(){return++r,!1}),(function(){t(r)}),n,i)}),t)},sortBy:function(t,e){var n=t.split(".").reverse(),r=n[0],i=n.length-1;function s(t,e){return e?s(t[n[e]],e-1):t[r]}var a="next"===this._ctx.dir?1:-1;function o(t,e){var n=s(t,i),r=s(e,i);return n<r?-a:n>r?a:0}return this.toArray((function(t){return t.sort(o)})).then(e)},toArray:function(t){var e=this._ctx;return this._read((function(t,r,a){if(i&&"next"===e.dir&&j(e,!0)&&e.limit>0){var o=e.table.hook.reading.fire,u=n(e,a),c=e.limit<1/0?u.getAll(e.range,e.limit):u.getAll(e.range);c.onerror=Ph(r),c.onsuccess=Oh(o===uc?t:function(e){try{t(e.map(o))}catch(t){r(t)}})}else{var h=[];s(e,(function(t){h.push(t)}),(function(){t(h)}),r,a)}}),t)},offset:function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,j(n)?e(n,(function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n((function(){t.advance(e),e=0})),!1))}})):e(n,(function(){var e=t;return function(){return--e<0}})),this)},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),e(this._ctx,(function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}}),!0),this},until:function(e,n){return t(this._ctx,(function(t,r,i){return!e(t.value)||(r(i),n)})),this},first:function(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)},last:function(t){return this.reverse().first(t)},filter:function(e){return t(this._ctx,(function(t){return e(t.value)})),function(t,e){t.isMatch=Q(t.isMatch,e)}(this._ctx,e),this},and:function(t){return this.filter(t)},or:function(t){return new L(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.key,n)}))},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},eachPrimaryKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.primaryKey,n)}))},keys:function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.key)})).then((function(){return n})).then(t)},primaryKeys:function(t){var e=this._ctx;if(i&&"next"===e.dir&&j(e,!0)&&e.limit>0)return this._read((function(t,r,i){var s=n(e,i),a=e.limit<1/0?s.getAllKeys(e.range,e.limit):s.getAllKeys(e.range);a.onerror=Ph(r),a.onsuccess=Oh(t)})).then(t);e.keysOnly=!e.isMatch;var r=[];return this.each((function(t,e){r.push(e.primaryKey)})).then((function(){return r})).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys((function(t){return t[0]})).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return t(this._ctx,(function(t){var e=t.primaryKey.toString(),n=vu(r,e);return r[e]=!0,!n})),this},modify:function(t){var e=this,n=this._ctx.table.hook,r=n.updating.fire,i=n.deleting.fire;return this._write((function(n,s,a,o){var u;if("function"==typeof t)u=r===oc&&i===oc?t:function(e){var n=Nu(e);if(!1===t.call(this,e,this))return!1;if(vu(this,"value")){var s=ju(n,this.value),a=r.call(this,s,this.primKey,n,o);a&&(e=this.value,fu(a).forEach((function(t){Ou(e,t,a[t])})))}else i.call(this,this.primKey,e,o)};else if(r===oc){var c=fu(t),h=c.length;u=function(e){for(var n=!1,r=0;r<h;++r){var i=c[r],s=t[i];Pu(e,i)!==s&&(Ou(e,i,s),n=!0)}return n}}else{var l=t;t=Du(l),u=function(e){var n=!1,i=r.call(this,t,this.primKey,Nu(e),o);return i&&_u(t,i),fu(t).forEach((function(r){var i=t[r];Pu(e,r)!==i&&(Ou(e,r,i),n=!0)})),i&&(t=Du(l)),n}}var f=0,d=0,p=!1,_=[],g=[],b=null;function v(t){return t&&(_.push(t),g.push(b)),s(new tc("Error modifying one or more objects",_,d,g))}function m(){p&&d+_.length===f&&(_.length>0?v():n(d))}e.clone().raw()._iterate((function(t,e){b=e.primaryKey;var n={primKey:e.primaryKey,value:t,onsuccess:null,onerror:null};function r(t){return _.push(t),g.push(n.primKey),m(),!0}if(!1!==u.call(n,t,n)){var i=!vu(n,"value");++f,Bu((function(){var t=i?e.delete():e.update(n.value);t._hookCtx=n,t.onerror=Dh(r),t.onsuccess=Bh((function(){++d,m()}))}),r)}else n.onsuccess&&n.onsuccess(n.value)}),(function(){p=!0,m()}),v,a)}))},delete:function(){var t=this,e=this._ctx,n=e.range,r=e.table.hook.deleting.fire,i=r!==oc;if(!i&&j(e)&&(e.isPrimKey&&!Ch||!n))return this._write((function(t,e,r){var i=Ph(e),s=n?r.count(n):r.count();s.onerror=i,s.onsuccess=function(){var a=s.result;Bu((function(){var e=n?r.delete(n):r.clear();e.onerror=i,e.onsuccess=function(){return t(a)}}),(function(t){return e(t)}))}}));var s=i?2e3:1e4;return this._write((function(n,a,o,u){var c=0,h=t.clone({keysOnly:!e.isMatch&&!i}).distinct().limit(s).raw(),l=[],f=function(){return h.each(i?function(t,e){l.push([e.primaryKey,e.value])}:function(t,e){l.push(e.primaryKey)}).then((function(){return i?l.sort((function(t,e){return G(t[0],e[0])})):l.sort(G),M(o,u,l,i,r)})).then((function(){var t=l.length;return c+=t,l=[],t<s?c:f()}))};n(f())}))}}})),_u(this,{Collection:N,Table:O,Transaction:F,Version:S,WhereClause:L}),k.on("versionchange",(function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+k.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+k.name+"'. Closing db now to resume the delete request."),k.close()})),k.on("blocked",(function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+k.name+"') was blocked"):console.warn("Upgrade '"+k.name+"' blocked by other connection holding version "+t.oldVersion/10)})),c.forEach((function(t){t(k)}))}function Ih(t,e){return fu(e).forEach((function(n){var r=function t(e){if("function"==typeof e)return new e;if(du(e))return[t(e[0])];if(e&&"object"==typeof e){var n={};return Ih(n,e),n}return e}(e[n]);t[n]=r})),t}function Bh(t){return Zc((function(e){var n=e.target,r=n._hookCtx,i=r.value||n.result,s=r&&r.onsuccess;s&&s(i),t&&t(i)}),t)}function Ph(t){return Zc((function(e){return Mh(e),t(e.target.error),!1}))}function Oh(t){return Zc((function(e){t(e.target.result)}))}function Dh(t){return Zc((function(e){var n=e.target,r=n.error,i=n._hookCtx,s=i&&i.onerror;return s&&s(r),Mh(e),t(r),!1}))}function Mh(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}function Fh(t){var e=function(e){return t.next(e)},n=i(e),r=i((function(e){return t.throw(e)}));function i(t){return function(e){var i=t(e),s=i.value;return i.done?s:s&&"function"==typeof s.then?s.then(n,r):du(s)?jc.all(s).then(n,r):n(s)}}return i(e)()}function Lh(t,e,n,r,i,s,a){this.name=t,this.keyPath=e,this.unique=n,this.multi=r,this.auto=i,this.compound=s,this.dotted=a;var o="string"==typeof e?e:e&&"["+[].join.call(e,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+o}function Nh(t,e,n,r){this.name=t,this.primKey=e||new Lh,this.indexes=n||[new Lh],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=Ru(n,(function(t){return[t.name,t]}))}function jh(t){return 1===t.length?t[0]:t}function Uh(t){var e=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return e&&e.bind(t)}Gu(Wu,Sh),mu(Rh,ac),mu(Rh,{delete:function(t){var e=new Rh(t),n=e.delete();return n.onblocked=function(t){return e.on("blocked",t),this},n},exists:function(t){return new Rh(t).open().then((function(t){return t.close(),!0})).catch(Rh.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(t){var e=Uh(Rh.dependencies.indexedDB);return e?new jc((function(t,n){var r=e();r.onsuccess=function(e){t(xu(e.target.result,0))},r.onerror=Ph(n)})).then(t):yh.dbnames.toCollection().primaryKeys(t)},defineClass:function(){return function(t){t&&_u(this,t)}},applyStructure:Ih,ignoreTransaction:function(t){return Mc.trans?ph(Mc.transless,t):t()},vip:function(t){return ah((function(){return Mc.letThrough=!0,t()}))},async:function(t){return function(){try{var e=Fh(t.apply(this,arguments));return e&&"function"==typeof e.then?e:jc.resolve(e)}catch(t){return vh(t)}}},spawn:function(t,e,n){try{var r=Fh(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:jc.resolve(r)}catch(t){return vh(t)}},currentTransaction:{get:function(){return Mc.trans||null}},waitFor:function(t,e){var n=jc.resolve("function"==typeof t?Rh.ignoreTransaction(t):t).timeout(e||6e4);return Mc.trans?Mc.trans.waitFor(n):n},Promise:jc,debug:{get:function(){return Wu},set:function(t){Gu(t,"dexie"===t?function(){return!0}:Sh)}},derive:Au,extend:_u,props:mu,override:Tu,Events:mh,getByKeyPath:Pu,setByKeyPath:Ou,delByKeyPath:function(t,e){"string"==typeof e?Ou(t,e,void 0):"length"in e&&[].map.call(e,(function(e){Ou(t,e,void 0)}))},shallowClone:Du,deepClone:Nu,getObjectDiff:ju,asap:Su,maxKey:Ah,minKey:-1/0,addons:[],connections:Eh,MultiModifyError:ic.Modify,errnames:nc,IndexSpec:Lh,TableSchema:Nh,dependencies:function(){try{return{indexedDB:pu.indexedDB||pu.mozIndexedDB||pu.webkitIndexedDB||pu.msIndexedDB,IDBKeyRange:pu.IDBKeyRange||pu.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map((function(t){return parseInt(t)})).reduce((function(t,e,n){return t+e/Math.pow(10,2*n)})),default:Rh,Dexie:Rh}),jc.rejectionMapper=function(t,e){if(!t||t instanceof Zu||t instanceof TypeError||t instanceof SyntaxError||!t.name||!sc[t.name])return t;var n=new sc[t.name](e||t.message,t);return"stack"in t&&wu(n,"stack",{get:function(){return this.inner.stack}}),n},(yh=new Rh("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==pu.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach((function(t){return yh.dbnames.put({name:t}).catch(oc)})),localStorage.removeItem("Dexie.DatabaseNames"))}catch(t){}}();class zh extends Rh{constructor(){super("stellerator-ng"),this.version(1).stores({cartridges:"&hash",roms:"&hash",settings:"&id"}),this.version(2).stores({cartridges:"&hash",roms:"&hash",settings:"&id"}).upgrade(t=>{t.table("settings").toCollection().modify(t=>{const e=t;delete e.smoothScaling,delete e.phosphorEmulation,delete e.videoSync,t.tvEmulation="composite",t.scaling="qis",t.phosphorLevel=50,t.scanlineIntensity=20}),t.table("cartridges").toCollection().modify(t=>{delete t.phosphorEmulation})})}}let $h=class{constructor(){this._database=new zh,this._defaultSettings=null}setDefaults(t){this._defaultSettings=t}getAllCartridges(){return this._database.cartridges.toArray()}insertCartridges(t){return this._database.transaction("rw",[this._database.cartridges,this._database.roms],()=>a(this,void 0,void 0,(function*(){yield Promise.all([this._database.cartridges.bulkPut(t.map(t=>t.cartridge)),this._database.roms.bulkPut(t.map(t=>({hash:t.cartridge.hash,image:t.image})))])})))}updateCartridge(t){return a(this,void 0,void 0,(function*(){return this._database.transaction("rw",[this._database.cartridges],()=>a(this,void 0,void 0,(function*(){(yield this._database.cartridges.get(t.hash))&&(yield this._database.cartridges.put(t))})))}))}deleteCartridge(t){return this._database.transaction("rw",[this._database.cartridges,this._database.roms],()=>a(this,void 0,void 0,(function*(){yield Promise.all([this._database.cartridges.delete(t),this._database.roms.delete(t)])})))}deleteAllCartridges(){return this._database.cartridges.clear()}getCartridge(t){return this._database.cartridges.get(t)}getCartridgeImage(t){return a(this,void 0,void 0,(function*(){const e=yield this._database.roms.get(t);return e&&e.image}))}getSettings(){return a(this,void 0,void 0,(function*(){const t=yield this._database.settings.get(0);return t?n(t,["id"]):this._defaultSettings}))}saveSettings(t){return a(this,void 0,void 0,(function*(){yield this._database.settings.put(Object.assign(Object.assign({},t),{id:0}))}))}dropDatabase(){return a(this,void 0,void 0,(function*(){this._database.close(),yield indexedDB.deleteDatabase("stellerator-ng"),this._database=new zh}))}};$h=r([te()],$h);var Hh=$h;let Wh=class{constructor(t){this._storage=t,this._addCartridge=()=>{this._input&&this._input.removeEventListener("change",this._onCartridgeAdded),this._input=document.createElement("input"),this._input.type="file",this._input.accept=".bin, .a26, .zip",this._input.multiple=!0,this._input.addEventListener("change",this._onCartridgeAdded),this._input.click()},this._onCartridgeAdded=t=>a(this,void 0,void 0,(function*(){const e=t.target,n=(yield Promise.all(Array.prototype.map.call(e.files,t=>this._processFile(t)))).reduce((t,e)=>t.concat(e),[]),r=Array.from(new Map(n.map(t=>[t.cartridge.hash,t])).values());yield this._storage.insertCartridges(r),this._ports.onNewCartridges_.send(Array.from(r.map(t=>t.cartridge)))})),this._input=null,this._detector=new lu}init(t){this._ports=t,t.addCartridge_.subscribe(this._addCartridge)}_processFile(t){return a(this,void 0,void 0,(function*(){try{const e=yield new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",()=>e(new Uint8Array(r.result))),r.addEventListener("error",()=>n(r.error)),r.readAsArrayBuffer(t)});if(t.name.match(/.zip$/i)){const t=new lo;return yield t.loadAsync(e),yield Promise.all(t.file(/\.(bin|a26)$/i).filter(t=>!t.dir).map(t=>t.async("uint8array").then(e=>this._createCartridge(t.name.replace(/.*\//,""),e))))}return[this._createCartridge(t.name,e)]}catch(t){return[]}}))}_createCartridge(t,e){const n=(r=e,vo(we.from(r)));var r;const i=t.replace(/\.[^\.]*$/,"");return{cartridge:{hash:n,name:i,tvMode:this._tvModeFromName(i),cartridgeType:this._detector.detectCartridgeType(e),emulatePaddles:!1,volume:100},image:e}}_tvModeFromName(t){return t.match(/[\W\-_]pal\d*[\W\-_]/i)?"pal":t.match(/[\W\-_]secam\d*[\W\-_]/i)?"secam":"ntsc"}};Wh=r([te(),i(0,ee(Hh)),s("design:paramtypes",[Hh])],Wh);var Gh=Wh,Vh=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._queue=[],this._pending=!1}return t.prototype.isLocked=function(){return this._pending},t.prototype.acquire=function(){var t=this,e=new Promise((function(e){return t._queue.push(e)}));return this._pending||this._dispatchNext(),e},t.prototype.runExclusive=function(t){return this.acquire().then((function(e){var n;try{n=t()}catch(t){throw e(),t}return Promise.resolve(n).then((function(t){return e(),t}),(function(t){throw e(),t}))}))},t.prototype._dispatchNext=function(){this._queue.length>0?(this._pending=!0,this._queue.shift()(this._dispatchNext.bind(this))):this._pending=!1},t}();e.default=n}));j(Vh);var qh=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Mutex=Vh.default}));j(qh);var Xh,Qh=qh.Mutex;!function(t){let e;!function(t){t.stopped="stopped",t.running="running",t.paused="paused",t.error="error"}(e=t.State||(t.State={}))}(Xh||(Xh={}));var Jh=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){void 0===e&&(e=0),this._dispatch=t,this._rpcTimeout=e,this.error=new yo.Event,this._rpcHandlers={},this._signalHandlers={},this._pendingTransactions={},this._nextTransactionId=0}return t.prototype.dispatch=function(e){var n=e;switch(n.type){case t.MessageType.signal:return this._handleSignal(n);case t.MessageType.rpc:return this._handeRpc(n);case t.MessageType.internal:return this._handleInternal(n);default:this._raiseError("invalid message type "+n.type)}},t.prototype.rpc=function(e,n,r){var i=this,s=this._nextTransactionId++;return this._dispatch({type:t.MessageType.rpc,transactionId:s,id:e,payload:n},r||void 0),new Promise((function(t,e){var n=i._pendingTransactions[s]={id:s,resolve:t,reject:e};i._rpcTimeout>0&&(i._pendingTransactions[s].timeoutHandle=setTimeout((function(){return i._transactionTimeout(n)}),i._rpcTimeout))}))},t.prototype.signal=function(e,n,r){return this._dispatch({type:t.MessageType.signal,id:e,payload:n},r||void 0),this},t.prototype.registerRpcHandler=function(t,e){if(this._rpcHandlers[t])throw new Error("rpc handler for "+t+" already registered");return this._rpcHandlers[t]=e,this},t.prototype.registerSignalHandler=function(t,e){return this._signalHandlers[t]||(this._signalHandlers[t]=[]),this._signalHandlers[t].push(e),this},t.prototype.deregisterRpcHandler=function(t,e){return this._rpcHandlers[t]&&delete this._rpcHandlers[t],this},t.prototype.deregisterSignalHandler=function(t,e){return this._signalHandlers[t]&&(this._signalHandlers[t]=this._signalHandlers[t].filter((function(t){return e!==t}))),this},t.prototype._raiseError=function(e){this.error.dispatch(new Error(e)),this._dispatch({type:t.MessageType.internal,id:"error",payload:e})},t.prototype._handleSignal=function(t){if(!this._signalHandlers[t.id])return this._raiseError("invalid signal "+t.id);this._signalHandlers[t.id].forEach((function(e){return e(t.payload)}))},t.prototype._handeRpc=function(e){var n=this;if(!this._rpcHandlers[e.id])return this._raiseError("invalid rpc "+e.id);Promise.resolve(this._rpcHandlers[e.id](e.payload)).then((function(r){return n._dispatch({type:t.MessageType.internal,id:"resolve_transaction",transactionId:e.transactionId,payload:r})}),(function(r){return n._dispatch({type:t.MessageType.internal,id:"reject_transaction",transactionId:e.transactionId,payload:r})}))},t.prototype._handleInternal=function(t){var e=void 0!==t.transactionId?this._pendingTransactions[t.transactionId]:void 0;switch(t.id){case"resolve_transaction":if(!e||void 0===t.transactionId)return this._raiseError("no pending transaction with id "+t.transactionId);e.resolve(t.payload),this._clearTransaction(this._pendingTransactions[t.transactionId]);break;case"reject_transaction":if(!e||void 0===t.transactionId)return this._raiseError("no pending transaction with id "+t.transactionId);this._pendingTransactions[t.transactionId].reject(t.payload),this._clearTransaction(this._pendingTransactions[t.transactionId]);break;case"error":this.error.dispatch(new Error("remote error: "+t.payload));break;default:this._raiseError("unhandled internal message "+t.id)}},t.prototype._transactionTimeout=function(t){t.reject("transaction timed out"),this._raiseError("transaction "+t.id+" timed out"),delete this._pendingTransactions[t.id]},t.prototype._clearTransaction=function(t){void 0!==t.timeoutHandle&&clearTimeout(t.timeoutHandle),delete this._pendingTransactions[t.id]},t}();!function(t){!function(t){t[t.signal=0]="signal",t[t.rpc=1]="rpc",t[t.internal=2]="internal"}(t.MessageType||(t.MessageType={}))}(n||(n={})),e.default=n}));j(Jh);var Yh=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RpcProvider=Jh.default}));j(Yh);var Kh=Yh.RpcProvider;class Zh{constructor(t,e,n,r,i){if(this._videoProxy=t,this._controlProxy=e,this._waveformChannels=n,this._pcmChannel=r,this._asyncIOProxy=i,this._config=null,2!==this._waveformChannels.length)throw new Error(`invalid channel count ${this._waveformChannels.length}`)}setConfig(t){this._config=t}getConfig(){return this._config}getVideo(){return this._videoProxy}getJoystick(t){return this._controlProxy.getJoystick(t)}getControlPanel(){return this._controlProxy.getControlPanel()}getPaddle(t){return this._controlProxy.getPaddle(t)}getWaveformChannels(){return this._waveformChannels}getPCMChannel(){return this._pcmChannel}getVideoProxy(){return this._videoProxy}getAsyncIO(){return this._asyncIOProxy}}class tl{constructor(t,e,n){this._value=t,this._releaseCB=e,this._disposeCB=n,this._isAvailable=!1,this._isDisposed=!1}adopt(t){this._value=t}get(){return this._value}release(){this._releaseCB(this)}dispose(){this._disposeCB(this)}}class el{constructor(t){this._factory=t,this.event={release:new Ao,dispose:new Ao},this._pool=[],this._poolSize=0}get(){let t;if(0===this._poolSize){const e=this._factory();t=new tl(e,t=>this._releaseMember(t),t=>this._disposeMember(t))}else t=this._pool[--this._poolSize],t._isAvailable=!1;return t}_releaseMember(t){if(t._isAvailable)throw new Error("Trying to release an already released pool member");if(t._isDisposed)throw new Error("Trying to release an already disposed pool member");const e=this._poolSize++;this._pool[e]=t,t._isAvailable=!0,t._poolPosition=e,this.event.release.dispatch(t.get())}_disposeMember(t){if(t._isDisposed)throw new Error("Trying to dispose of an already disposed pool member");t._isAvailable&&(this._poolSize>1&&(this._pool[t._poolPosition]=this._pool[this._poolSize-1]),this._poolSize--),t._isDisposed=!0,this.event.dispose.dispatch(t.get())}}const nl={emulationPause:"emulation/pause",emulationReset:"emulation/reset",emulationResume:"emulation/resume",emulationSetRateLimit:"emulation/setRateLimit",emulationStart:"emulation/start",emulationStop:"emulation/stop",emulationFetchLastError:"emulation/fetchLastError",getVideoParameters:"video/getParameters",getWaveformAudioParameters:t=>`audio/waveform/getParameters/${t}`,getPCMAudioParameters:t=>`audio/pcm/getParameters/${t}`,setup:"/setup"};Object.freeze(nl);const rl={emulationError:"emulation/error",emulationFrequencyUpdate:"emulation/frequencyUpdate",videoNewFrame:"video/newFrame",videoReturnSurface:"video/returnSurface",controlStateUpdate:"control/stateUpdate",waveformAudioVolumeChange:"audio/waveform/volumeChange",waveformAudioBufferChange:"audio/waveform/bufferChange",pcmAudioNewFrame:t=>`audio/pcm/newFrame/${t}`,pcmAudioTogglePause:t=>`audio/pcm/togglePause/${t}`,pcmAudioReturnFrame:t=>`audio/pcm/returnFrame/${t}`,audioStop:"audio/stop",messageFromAsyncIO:"asyncIO/messageFrom",messageToAsyncIO:"asyncIO/messageTo"};Object.freeze(rl);class il{constructor(t){this._rpc=t,this.newFrame=new Ao,this._framePool=new el(()=>null),this._frameMap=null,this._active=!1,this._width=0,this._height=0,this._framePool.event.release.addHandler(il._onDisposeFrame,this)}init(){this._rpc.registerSignalHandler(rl.videoNewFrame,this._onNewFrame.bind(this))}start(){return a(this,void 0,void 0,(function*(){this._active&&this.stop();const t=yield this._rpc.rpc(nl.getVideoParameters);this._active=!0,this._width=t.width,this._height=t.height,this._frameMap=new WeakMap}))}stop(){this._active=!1}getWidth(){return this._width}getHeight(){return this._height}static _onDisposeFrame(t,e){if(!e._active)return;if(!e._frameMap.has(t))return void console.warn("unknown imageData returned to proxy");const n=e._frameMap.get(t);e._frameMap.delete(t),e._rpc.signal(rl.videoReturnSurface,{id:n,buffer:t.data.buffer},[t.data.buffer])}_onNewFrame(t){if(!this._active)return void console.warn("video proxy deactivated: ignoring frame");if(this._width!==t.width||this._height!==t.height)return void console.warn("surface dimensions do not match; ignoring frame");const e=this._framePool.get(),n=new ImageData(new Uint8ClampedArray(t.buffer),t.width,t.height);e.adopt(n),this._frameMap.set(n,t.id),this.newFrame.dispatch(e)}}class sl{constructor(t=!1){this._state=t,this.stateChanged=new Ao,this.beforeRead=new Ao}read(){return this.beforeRead.dispatch(this),this._state}peek(){return this._state}toggle(t){this._state!==t&&(this._state=t,this.stateChanged.dispatch(t))}}class al{constructor(){this._left=new sl,this._right=new sl,this._up=new sl,this._down=new sl,this._fire=new sl}getLeft(){return this._left}getRight(){return this._right}getUp(){return this._up}getDown(){return this._down}getFire(){return this._fire}}class ol{constructor(){this._selectSwitch=new sl,this._resetButton=new sl,this._colorSwitch=new sl,this._difficutlyP0=new sl,this._difficutlyP1=new sl}getSelectSwitch(){return this._selectSwitch}getResetButton(){return this._resetButton}getColorSwitch(){return this._colorSwitch}getDifficultySwitchP0(){return this._difficutlyP0}getDifficultySwitchP1(){return this._difficutlyP1}}class ul{constructor(){this.valueChanged=new Ao,this._fireSwitch=new sl,this._value=.5}setValue(t){this._value=t,this.valueChanged.dispatch(t)}getValue(){return this._value}getFire(){return this._fireSwitch}}class cl{constructor(t){this._rpc=t,this._joysticks=new Array(2),this._paddles=new Array(4),this._controlPanel=new ol;for(let t=0;t<2;t++)this._joysticks[t]=new al;for(let t=0;t<4;t++)this._paddles[t]=new ul}sendUpdate(){this._rpc.signal(rl.controlStateUpdate,{joystickState:this._joysticks.map(cl._joystickState),paddleState:this._paddles.map(cl._paddleState),controlPanelState:cl._controlPanelState(this._controlPanel)})}getJoystick(t){if(t<0||t>1)throw new Error(`invalid joystick index ${t}`);return this._joysticks[t]}getControlPanel(){return this._controlPanel}getPaddle(t){if(t<0||t>3)throw new Error(`invalid paddle index ${t}`);return this._paddles[t]}static _joystickState(t){return{up:t.getUp().read(),down:t.getDown().read(),left:t.getLeft().read(),right:t.getRight().read(),fire:t.getFire().read()}}static _paddleState(t){return{value:t.getValue(),fire:t.getFire().read()}}static _controlPanelState(t){return{difficulty0:t.getDifficultySwitchP0().read(),difficulty1:t.getDifficultySwitchP1().read(),select:t.getSelectSwitch().read(),reset:t.getResetButton().read(),color:t.getColorSwitch().read()}}}var hl;!function(t){t.State=class{constructor(){this.a=0,this.x=0,this.y=0,this.s=0,this.p=0,this.flags=0,this.irq=!1,this.nmi=!1}}}(hl||(hl={}));class ll{constructor(){this.cycleType=0,this.address=0,this.value=0,this.pollInterrupts=!1,this.nextStep=null}read(t,e){return this.cycleType=0,this.address=e,this.nextStep=t,this}write(t,e,n){return this.cycleType=1,this.address=e,this.value=n,this.nextStep=t,this}poll(t){return this.pollInterrupts=t,this}}const fl=Symbol("immutable properties");function dl(t){const e=t[fl];if(e)for(const n of e)Object.defineProperty(t,n,{writable:!1,configurable:!1})}function pl(t,e){t[fl]||Object.defineProperty(t,fl,{value:[],writable:!1,enumerable:!1}),t[fl].push(e)}class _l{constructor(t){this.reset=()=>this._result.read(this._pre1Step,255),this._pre1Step=()=>this._result.read(this._pre2Step,255),this._pre2Step=()=>this._result.read(this._stack1Step,256),this._stack1Step=()=>this._result.read(this._stack2Step,511),this._stack2Step=()=>(this._state.s=253,this._result.read(this._stack3Step,510)),this._stack3Step=()=>this._result.read(this._readTargetLoStep,65532),this._readTargetLoStep=t=>(this._targetAddress=t,this._result.read(this._readTargetHiStep,65533)),this._readTargetHiStep=t=>(this._targetAddress|=t<<8,this._state.p=this._targetAddress,null),this._targetAddress=0,this._result=new ll,this._state=t,dl(this)}}r([pl,s("design:type",Object)],_l.prototype,"reset",void 0),r([pl,s("design:type",Object)],_l.prototype,"_pre1Step",void 0),r([pl,s("design:type",Object)],_l.prototype,"_pre2Step",void 0),r([pl,s("design:type",Object)],_l.prototype,"_stack1Step",void 0),r([pl,s("design:type",Object)],_l.prototype,"_stack2Step",void 0),r([pl,s("design:type",Object)],_l.prototype,"_stack3Step",void 0),r([pl,s("design:type",Object)],_l.prototype,"_readTargetLoStep",void 0),r([pl,s("design:type",Object)],_l.prototype,"_readTargetHiStep",void 0),r([pl,s("design:type",Object)],_l.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],_l.prototype,"_state",void 0);class gl{constructor(t,e,n){this.reset=()=>this._result.read(this._dummyRead,this._state.p),this._dummyRead=()=>(this._isBrk&&(this._state.p=this._state.p+1&65535),this._result.write(this._pushPch,256+this._state.s,this._state.p>>>8)),this._pushPch=()=>(this._state.s=this._state.s-1&255,this._result.write(this._pushPcl,256+this._state.s,255&this._state.p).poll(!0)),this._pushPcl=()=>(this._state.s=this._state.s-1&255,this._vector=this._state.nmi?65530:this._defaultVector,this._result.write(this._pushFlags,256+this._state.s,this._isBrk?16|this._state.flags:-17&this._state.flags)),this._pushFlags=()=>(this._state.s=this._state.s-1&255,this._result.read(this._fetchPcl,this._vector)),this._fetchPcl=t=>(this._state.flags|=4,this._state.p=t,this._result.read(this._fetchPch,++this._vector)),this._fetchPch=t=>(this._state.p=this._state.p|t<<8,this._state.nmi=this._state.irq=!1,null),this._vector=0,this._result=new ll,this._state=t,this._defaultVector=e,this._isBrk=n,dl(this)}}r([pl,s("design:type",Object)],gl.prototype,"reset",void 0),r([pl,s("design:type",Object)],gl.prototype,"_dummyRead",void 0),r([pl,s("design:type",Object)],gl.prototype,"_pushPch",void 0),r([pl,s("design:type",Object)],gl.prototype,"_pushPcl",void 0),r([pl,s("design:type",Object)],gl.prototype,"_pushFlags",void 0),r([pl,s("design:type",Object)],gl.prototype,"_fetchPcl",void 0),r([pl,s("design:type",Object)],gl.prototype,"_fetchPch",void 0),r([pl,s("design:type",Object)],gl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],gl.prototype,"_state",void 0),r([pl,s("design:type",Number)],gl.prototype,"_defaultVector",void 0),r([pl,s("design:type",Boolean)],gl.prototype,"_isBrk",void 0);class bl{constructor(t,e,n=e){this.operation=t,this.addressingMode=e,this.effectiveAddressingMode=n}getSize(){switch(this.effectiveAddressingMode){case 1:case 2:case 6:case 9:case 8:case 11:case 5:return 2;case 3:case 7:case 10:case 4:return 3;default:return 1}}}!function(t){let e;!function(t){t[t.adc=0]="adc",t[t.and=1]="and",t[t.asl=2]="asl",t[t.bcc=3]="bcc",t[t.bcs=4]="bcs",t[t.beq=5]="beq",t[t.bit=6]="bit",t[t.bmi=7]="bmi",t[t.bne=8]="bne",t[t.bpl=9]="bpl",t[t.brk=10]="brk",t[t.bvc=11]="bvc",t[t.bvs=12]="bvs",t[t.clc=13]="clc",t[t.cld=14]="cld",t[t.cli=15]="cli",t[t.clv=16]="clv",t[t.cmp=17]="cmp",t[t.cpx=18]="cpx",t[t.cpy=19]="cpy",t[t.dec=20]="dec",t[t.dex=21]="dex",t[t.dey=22]="dey",t[t.eor=23]="eor",t[t.inc=24]="inc",t[t.inx=25]="inx",t[t.iny=26]="iny",t[t.jmp=27]="jmp",t[t.jsr=28]="jsr",t[t.lda=29]="lda",t[t.ldx=30]="ldx",t[t.ldy=31]="ldy",t[t.lsr=32]="lsr",t[t.nop=33]="nop",t[t.ora=34]="ora",t[t.pha=35]="pha",t[t.php=36]="php",t[t.pla=37]="pla",t[t.plp=38]="plp",t[t.rol=39]="rol",t[t.ror=40]="ror",t[t.rti=41]="rti",t[t.rts=42]="rts",t[t.sbc=43]="sbc",t[t.sec=44]="sec",t[t.sed=45]="sed",t[t.sei=46]="sei",t[t.sta=47]="sta",t[t.stx=48]="stx",t[t.sty=49]="sty",t[t.tax=50]="tax",t[t.tay=51]="tay",t[t.tsx=52]="tsx",t[t.txa=53]="txa",t[t.txs=54]="txs",t[t.tya=55]="tya",t[t.dop=56]="dop",t[t.top=57]="top",t[t.alr=58]="alr",t[t.axs=59]="axs",t[t.dcp=60]="dcp",t[t.lax=61]="lax",t[t.arr=62]="arr",t[t.slo=63]="slo",t[t.aax=64]="aax",t[t.lar=65]="lar",t[t.isc=66]="isc",t[t.aac=67]="aac",t[t.atx=68]="atx",t[t.rra=69]="rra",t[t.rla=70]="rla",t[t.invalid=71]="invalid"}(e=t.OperationMap||(t.OperationMap={})),t.opcodes=new Array(256)}(bl||(bl={})),function(t){let e;!function(e){for(let e=0;e<256;e++)t.opcodes[e]=new t(71,12);let n,r,i;for(let e=0;e<8;e++){switch(e){case 0:n=34;break;case 1:n=1;break;case 2:n=23;break;case 3:n=0;break;case 4:n=47;break;case 5:n=29;break;case 6:n=17;break;case 7:n=43}for(let s=0;s<8;s++){switch(s){case 0:r=8;break;case 1:r=2;break;case 2:r=1;break;case 3:r=3;break;case 4:r=11;break;case 5:r=6;break;case 6:r=10;break;case 7:r=7}47===n&&1===r&&(r=12),71!==n&&12!==r&&(i=e<<5|s<<2|1,t.opcodes[i]=new t(n,r))}}function s(e,n,r,i){if(71!==t.opcodes[e].operation)throw new Error("entry for opcode "+e+" already exists");t.opcodes[e]=new t(n,r,i)}s(6,2,2),s(10,2,0),s(14,2,3),s(22,2,6),s(30,2,7),s(38,39,2),s(42,39,0),s(46,39,3),s(54,39,6),s(62,39,7),s(70,32,2),s(74,32,0),s(78,32,3),s(86,32,6),s(94,32,7),s(102,40,2),s(106,40,0),s(110,40,3),s(118,40,6),s(126,40,7),s(134,48,2),s(142,48,3),s(150,48,9),s(162,30,1),s(166,30,2),s(174,30,3),s(182,30,9),s(190,30,10),s(198,20,2),s(206,20,3),s(214,20,6),s(222,20,7),s(230,24,2),s(238,24,3),s(246,24,6),s(254,24,7),s(36,6,2),s(44,6,3),s(76,27,3),s(108,27,4),s(132,49,2),s(140,49,3),s(148,49,6),s(160,31,1),s(164,31,2),s(172,31,3),s(180,31,6),s(188,31,7),s(192,19,1),s(196,19,2),s(204,19,3),s(224,18,1),s(228,18,2),s(236,18,3),s(16,9,5),s(48,7,5),s(80,11,5),s(112,12,5),s(144,3,5),s(176,4,5),s(208,8,5),s(240,5,5),s(0,10,0),s(32,28,0,3),s(64,41,0),s(96,42,0),s(8,36,0),s(40,38,0),s(72,35,0),s(104,37,0),s(136,22,0),s(168,51,0),s(200,26,0),s(232,25,0),s(24,13,0),s(56,44,0),s(88,15,0),s(120,46,0),s(152,55,0),s(184,16,0),s(216,14,0),s(248,45,0),s(138,53,0),s(154,54,0),s(170,50,0),s(186,52,0),s(202,21,0),s(234,33,0),s(26,33,0),s(58,33,0),s(90,33,0),s(122,33,0),s(218,33,0),s(250,33,0),s(4,56,2),s(20,56,6),s(52,56,6),s(68,56,2),s(84,56,6),s(100,56,2),s(116,56,6),s(128,56,1),s(130,56,1),s(137,56,1),s(194,56,1),s(212,56,6),s(226,56,1),s(244,56,6),s(12,57,3),s(28,57,7),s(60,57,7),s(92,57,7),s(124,57,7),s(220,57,7),s(252,57,7),s(235,43,1),s(75,58,1),s(203,59,1),s(199,60,2),s(215,60,6),s(207,60,3),s(223,60,7),s(219,60,10),s(195,60,8),s(211,60,11),s(167,61,2),s(183,61,9),s(175,61,3),s(191,61,10),s(163,61,8),s(179,61,11),s(107,62,1),s(7,63,2),s(23,63,6),s(15,63,3),s(31,63,7),s(27,63,10),s(3,63,8),s(19,63,11),s(135,64,2),s(151,64,9),s(131,64,8),s(143,64,3),s(187,65,10),s(231,66,2),s(247,66,6),s(239,66,3),s(255,66,7),s(251,66,10),s(227,66,8),s(243,66,11),s(11,67,1),s(43,67,1),s(171,68,1),s(103,69,2),s(119,69,6),s(111,69,3),s(127,69,7),s(123,69,10),s(99,69,8),s(115,69,11),s(39,70,2),s(55,70,6),s(47,70,3),s(63,70,7),s(59,70,10),s(35,70,8),s(51,70,11)}(e=t.__init||(t.__init={}))}(bl||(bl={}));class vl{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchLo,this._state.p),this._fetchLo=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchHi,this._state.p)),this._fetchHi=t=>(this._operand|=t<<8,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new ll,this._state=t,this._next=e,dl(this)}}r([pl,s("design:type",Object)],vl.prototype,"reset",void 0),r([pl,s("design:type",Object)],vl.prototype,"_fetchLo",void 0),r([pl,s("design:type",Object)],vl.prototype,"_fetchHi",void 0),r([pl,s("design:type",Object)],vl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],vl.prototype,"_state",void 0),r([pl,s("design:type",Function)],vl.prototype,"_next",void 0);class ml{constructor(t,e,n=(()=>null),r=!1){this.reset=()=>this._result.read(this._fetchLo,this._state.p),this._fetchLo=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchHi,this._state.p)),this._fetchHi=t=>{this._operand|=t<<8,this._state.p=this._state.p+1&65535;const e=this._indexExtractor(this._state);return this._carry=(255&this._operand)+e>255,this._operand=65280&this._operand|this._operand+e&255,this._carry||this._writeOp?this._result.read(this._dereferenceAndCarry,this._operand):this._next(this._operand,this._state)},this._dereferenceAndCarry=t=>(this._carry&&(this._operand=this._operand+256&65535),this._next(this._operand,this._state)),this._operand=0,this._carry=!1,this._result=new ll,this._state=t,this._indexExtractor=e,this._next=n,this._writeOp=r,dl(this)}static absoluteX(t,e,n){return new ml(t,t=>t.x,e,n)}static absoluteY(t,e,n){return new ml(t,t=>t.y,e,n)}}r([pl,s("design:type",Object)],ml.prototype,"reset",void 0),r([pl,s("design:type",Object)],ml.prototype,"_fetchLo",void 0),r([pl,s("design:type",Object)],ml.prototype,"_fetchHi",void 0),r([pl,s("design:type",Object)],ml.prototype,"_dereferenceAndCarry",void 0),r([pl,s("design:type",Object)],ml.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],ml.prototype,"_state",void 0),r([pl,s("design:type",Function)],ml.prototype,"_indexExtractor",void 0),r([pl,s("design:type",Function)],ml.prototype,"_next",void 0),r([pl,s("design:type",Boolean)],ml.prototype,"_writeOp",void 0),r([pl,s("design:type",Function),s("design:paramtypes",[hl.State,Function,Boolean]),s("design:returntype",ml)],ml,"absoluteX",null),r([pl,s("design:type",Function),s("design:paramtypes",[hl.State,Function,Boolean]),s("design:returntype",ml)],ml,"absoluteY",null);class yl{constructor(t,e=(()=>null)){this.reset=t=>this._result.read(this._dereference,t),this._dereference=t=>this._next(t,this._state),this._result=new ll,this._next=e,this._state=t,dl(this)}}r([pl,s("design:type",Object)],yl.prototype,"reset",void 0),r([pl,s("design:type",Object)],yl.prototype,"_dereference",void 0),r([pl,s("design:type",Object)],yl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],yl.prototype,"_state",void 0),r([pl,s("design:type",Function)],yl.prototype,"_next",void 0);class wl{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchOperand,this._state.p),this._fetchOperand=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new ll,this._state=t,this._next=e,dl(this)}}r([pl,s("design:type",Object)],wl.prototype,"reset",void 0),r([pl,s("design:type",Object)],wl.prototype,"_fetchOperand",void 0),r([pl,s("design:type",Object)],wl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],wl.prototype,"_state",void 0),r([pl,s("design:type",Function)],wl.prototype,"_next",void 0);class Al{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._address=t,this._state.p=this._state.p+1&65535,this._result.read(this._addIndex,this._address)),this._addIndex=t=>(this._address=this._address+this._state.x&255,this._result.read(this._fetchLo,this._address)),this._fetchLo=t=>(this._operand=t,this._address=this._address+1&255,this._result.read(this._fetchHi,this._address)),this._fetchHi=t=>(this._operand|=t<<8,this._next(this._operand,this._state)),this._operand=0,this._address=0,this._result=new ll,this._state=t,this._next=e,dl(this)}}r([pl,s("design:type",Object)],Al.prototype,"reset",void 0),r([pl,s("design:type",Object)],Al.prototype,"_fetchAddress",void 0),r([pl,s("design:type",Object)],Al.prototype,"_addIndex",void 0),r([pl,s("design:type",Object)],Al.prototype,"_fetchLo",void 0),r([pl,s("design:type",Object)],Al.prototype,"_fetchHi",void 0),r([pl,s("design:type",Object)],Al.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],Al.prototype,"_state",void 0),r([pl,s("design:type",Function)],Al.prototype,"_next",void 0);class kl{constructor(t,e=(()=>null),n){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._address=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchLo,this._address)),this._fetchLo=t=>(this._operand=t,this._address=this._address+1&255,this._result.read(this._fetchHi,this._address)),this._fetchHi=t=>(this._operand|=t<<8,this._carry=(255&this._operand)+this._state.y>255,this._operand=65280&this._operand|this._operand+this._state.y&255,this._carry||this._writeOp?this._result.read(this._dereferenceAndCarry,this._operand):this._next(this._operand,this._state)),this._dereferenceAndCarry=t=>(this._carry&&(this._operand=this._operand+256&65535),this._next(this._operand,this._state)),this._operand=0,this._address=0,this._carry=!1,this._result=new ll,this._state=t,this._next=e,this._writeOp=n,dl(this)}}r([pl,s("design:type",Object)],kl.prototype,"reset",void 0),r([pl,s("design:type",Object)],kl.prototype,"_fetchAddress",void 0),r([pl,s("design:type",Object)],kl.prototype,"_fetchLo",void 0),r([pl,s("design:type",Object)],kl.prototype,"_fetchHi",void 0),r([pl,s("design:type",Object)],kl.prototype,"_dereferenceAndCarry",void 0),r([pl,s("design:type",Object)],kl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],kl.prototype,"_state",void 0),r([pl,s("design:type",Function)],kl.prototype,"_next",void 0),r([pl,s("design:type",Boolean)],kl.prototype,"_writeOp",void 0);class El{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new ll,this._state=t,this._next=e,dl(this)}}r([pl,s("design:type",Object)],El.prototype,"reset",void 0),r([pl,s("design:type",Object)],El.prototype,"_fetchAddress",void 0),r([pl,s("design:type",Object)],El.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],El.prototype,"_state",void 0),r([pl,s("design:type",Function)],El.prototype,"_next",void 0);class xl{constructor(t,e,n){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._result.read(this._addIndex,this._operand)),this._addIndex=t=>(this._operand=this._operand+this._indexExtractor(this._state)&255,this._next(this._operand,this._state)),this._operand=0,this._result=new ll,this._state=t,this._indexExtractor=e,this._next=n,dl(this)}static zeroPageX(t,e=(()=>null)){return new xl(t,t=>t.x,e)}static zeroPageY(t,e=(()=>null)){return new xl(t,t=>t.y,e)}}r([pl,s("design:type",Object)],xl.prototype,"reset",void 0),r([pl,s("design:type",Object)],xl.prototype,"_fetchAddress",void 0),r([pl,s("design:type",Object)],xl.prototype,"_addIndex",void 0),r([pl,s("design:type",Object)],xl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],xl.prototype,"_state",void 0),r([pl,s("design:type",Function)],xl.prototype,"_next",void 0),r([pl,s("design:type",Function)],xl.prototype,"_indexExtractor",void 0);class Tl{constructor(t,e){this.reset=()=>this._result.read(this._fetchTarget,this._state.p).poll(!0),this._fetchTarget=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._predicate(this._state.flags)?this._result.read(this._firstDummyRead,this._state.p):null),this._firstDummyRead=t=>(this._target=this._state.p+(128&this._operand?this._operand-256:this._operand)&65535,(65280&this._target)==(65280&this._state.p)?(this._state.p=this._target,null):this._result.read(this._secondDummyRead,65280&this._state.p|255&this._target).poll(!0)),this._secondDummyRead=t=>(this._state.p=this._target,null),this._target=0,this._operand=0,this._result=new ll,this._state=t,this._predicate=e,dl(this)}}r([pl,s("design:type",Object)],Tl.prototype,"reset",void 0),r([pl,s("design:type",Object)],Tl.prototype,"_fetchTarget",void 0),r([pl,s("design:type",Object)],Tl.prototype,"_firstDummyRead",void 0),r([pl,s("design:type",Object)],Tl.prototype,"_secondDummyRead",void 0),r([pl,s("design:type",Object)],Tl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],Tl.prototype,"_state",void 0),r([pl,s("design:type",Function)],Tl.prototype,"_predicate",void 0);const Cl=(t,e)=>new Tl(t,e);class Sl{constructor(t){this.reset=()=>this._result.read(this._fetchPcl,this._state.p),this._fetchPcl=t=>(this._addressLo=t,this._state.p=this._state.p+1&65535,this._result.read(this._dummyStackRead,256+this._state.s)),this._dummyStackRead=()=>this._result.write(this._pushPch,256+this._state.s,this._state.p>>>8),this._pushPch=()=>(this._state.s=this._state.s-1&255,this._result.write(this._pushPcl,256+this._state.s,255&this._state.p)),this._pushPcl=()=>(this._state.s=this._state.s-1&255,this._result.read(this._fetchPch,this._state.p)),this._fetchPch=t=>(this._state.p=this._addressLo|t<<8,null),this._addressLo=0,this._result=new ll,this._state=t,dl(this)}}r([pl,s("design:type",Object)],Sl.prototype,"_fetchPcl",void 0),r([pl,s("design:type",Object)],Sl.prototype,"_dummyStackRead",void 0),r([pl,s("design:type",Object)],Sl.prototype,"_pushPch",void 0),r([pl,s("design:type",Object)],Sl.prototype,"_pushPcl",void 0),r([pl,s("design:type",Object)],Sl.prototype,"_fetchPch",void 0),r([pl,s("design:type",Object)],Sl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],Sl.prototype,"_state",void 0);class Rl{constructor(t,e){this.reset=t=>(this._address=t,this._result.read(this._read,t)),this._read=t=>(this._operand=t,this._result.write(this._dummyWrite,this._address,this._operand)),this._dummyWrite=t=>this._result.write(this._write,this._address,this._operation(this._operand,this._state)),this._write=()=>null,this._result=new ll,this._state=t,this._operation=e,dl(this)}}r([pl,s("design:type",Object)],Rl.prototype,"reset",void 0),r([pl,s("design:type",Object)],Rl.prototype,"_read",void 0),r([pl,s("design:type",Object)],Rl.prototype,"_dummyWrite",void 0),r([pl,s("design:type",Object)],Rl.prototype,"_write",void 0),r([pl,s("design:type",Object)],Rl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],Rl.prototype,"_state",void 0),r([pl,s("design:type",Function)],Rl.prototype,"_operation",void 0);const Il=(t,e)=>new Rl(t,e);class Bl{constructor(t){this.reset=()=>this._result.read(this._dummyOperandRead,this._state.p),this._dummyOperandRead=()=>this._result.read(this._dummyStackRead,256+this._state.s),this._dummyStackRead=()=>(this._state.s=this._state.s+1&255,this._result.read(this._popPcl,256+this._state.s)),this._popPcl=t=>(this._state.p=65280&this._state.p|t,this._state.s=this._state.s+1&255,this._result.read(this._popPch,256+this._state.s)),this._popPch=t=>(this._state.p=255&this._state.p|t<<8,this._result.read(this._incrementP,this._state.p)),this._incrementP=()=>(this._state.p=this._state.p+1&65535,null),this._result=new ll,this._state=t,dl(this)}}r([pl,s("design:type",Object)],Bl.prototype,"reset",void 0),r([pl,s("design:type",Object)],Bl.prototype,"_dummyOperandRead",void 0),r([pl,s("design:type",Object)],Bl.prototype,"_dummyStackRead",void 0),r([pl,s("design:type",Object)],Bl.prototype,"_popPcl",void 0),r([pl,s("design:type",Object)],Bl.prototype,"_popPch",void 0),r([pl,s("design:type",Object)],Bl.prototype,"_incrementP",void 0),r([pl,s("design:type",Object)],Bl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],Bl.prototype,"_state",void 0);class Pl{constructor(t,e){this.reset=()=>this._result.read(this._executeOperation,this._state.p).poll(!0),this._executeOperation=()=>(this._operation(this._state),null),this._result=new ll,this._state=t,this._operation=e,dl(this)}}r([pl,s("design:type",Object)],Pl.prototype,"reset",void 0),r([pl,s("design:type",Object)],Pl.prototype,"_executeOperation",void 0),r([pl,s("design:type",Object)],Pl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],Pl.prototype,"_state",void 0),r([pl,s("design:type",Function)],Pl.prototype,"_operation",void 0);const Ol=(t,e)=>new Pl(t,e);class Dl{constructor(t,e){this.reset=()=>this._result.read(this._dummyRead,this._state.p).poll(!0),this._dummyRead=()=>this._result.read(this._incrementS,256+this._state.s),this._incrementS=()=>(this._state.s=this._state.s+1&255,this._result.read(this._pull,256+this._state.s)),this._pull=t=>(this._operation(this._state,t),null),this._result=new ll,this._state=t,this._operation=e,dl(this)}}r([pl,s("design:type",Object)],Dl.prototype,"reset",void 0),r([pl,s("design:type",Object)],Dl.prototype,"_dummyRead",void 0),r([pl,s("design:type",Object)],Dl.prototype,"_incrementS",void 0),r([pl,s("design:type",Object)],Dl.prototype,"_pull",void 0),r([pl,s("design:type",Object)],Dl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],Dl.prototype,"_state",void 0),r([pl,s("design:type",Function)],Dl.prototype,"_operation",void 0);const Ml=(t,e)=>new Dl(t,e);class Fl{constructor(t,e){this.reset=()=>this._result.read(this._dummyRead,this._state.p),this._dummyRead=()=>this._result.write(this._push,256+this._state.s,this._operation(this._state)),this._push=()=>(this._state.s=this._state.s-1&255,null),this._result=new ll,this._state=t,this._operation=e,dl(this)}}r([pl,s("design:type",Object)],Fl.prototype,"reset",void 0),r([pl,s("design:type",Object)],Fl.prototype,"_dummyRead",void 0),r([pl,s("design:type",Object)],Fl.prototype,"_push",void 0),r([pl,s("design:type",Object)],Fl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],Fl.prototype,"_state",void 0),r([pl,s("design:type",Function)],Fl.prototype,"_operation",void 0);const Ll=(t,e)=>new Fl(t,e);class Nl{constructor(t){this.reset=()=>this._result.read(this._dummyOperandRead,this._state.p),this._dummyOperandRead=()=>this._result.read(this._dummyStackRead,256+this._state.s),this._dummyStackRead=()=>(this._state.s=this._state.s+1&255,this._result.read(this._popP,256+this._state.s)),this._popP=t=>(this._state.flags=-17&(32|t),this._state.s=this._state.s+1&255,this._result.read(this._popPcl,256+this._state.s)),this._popPcl=t=>(this._state.p=65280&this._state.p|t,this._state.s=this._state.s+1&255,this._result.read(this._popPch,256+this._state.s)),this._popPch=t=>(this._state.p=255&this._state.p|t<<8,null),this._result=new ll,this._state=t,dl(this)}}r([pl,s("design:type",Object)],Nl.prototype,"reset",void 0),r([pl,s("design:type",Object)],Nl.prototype,"_dummyOperandRead",void 0),r([pl,s("design:type",Object)],Nl.prototype,"_dummyStackRead",void 0),r([pl,s("design:type",Object)],Nl.prototype,"_popP",void 0),r([pl,s("design:type",Object)],Nl.prototype,"_popPcl",void 0),r([pl,s("design:type",Object)],Nl.prototype,"_popPch",void 0),r([pl,s("design:type",Object)],Nl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],Nl.prototype,"_state",void 0);class jl{constructor(t,e){this.reset=t=>this._result.write(()=>null,t,this._operation(this._state)),this._result=new ll,this._state=t,this._operation=e,dl(this)}}r([pl,s("design:type",Object)],jl.prototype,"reset",void 0),r([pl,s("design:type",Object)],jl.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],jl.prototype,"_state",void 0),r([pl,s("design:type",Function)],jl.prototype,"_operation",void 0);const Ul=(t,e)=>new jl(t,e);function zl(t,e){e.flags=-131&e.flags|128&t|(t?0:2)}function $l(t,e,n){const r=n(t);return zl(r,e),r}function Hl(t,e){zl(e(t),t)}function Wl(t,e,n){return zl(n(t,e),e),null}function Gl(t,e){if(8&e.flags){const n=(15&t)+(15&e.a)+(1&e.flags),r=(t>>>4)+(e.a>>>4)+(n>9?1:0);e.a=n%10|r%10<<4,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|(r>9?1:0)}else{const n=e.a+t+(1&e.flags),r=255&n;e.flags=-196&e.flags|128&r|(r?0:2)|n>>>8|(~(t^e.a)&(r^t)&128)>>>1,e.a=r}return null}function Vl(t){const e=t.a;t.a=t.a<<1&255,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7}function ql(t,e){const n=t<<1&255;return e.flags=-132&e.flags|128&n|(n?0:2)|t>>>7,n}function Xl(t,e){return e.flags=-195&e.flags|192&t|(t&e.a?0:2),null}function Ql(t,e,n){const r=n(e)+(255&~t)+1;e.flags=-132&e.flags|128&r|(255&r?0:2)|r>>>8}function Jl(t,e){if(8&e.flags){const n=(15&e.a)-(15&t)-(1&~e.flags),r=(e.a>>>4)-(t>>>4)-(n<0?1:0);e.a=(n<0?10+n:n)|(r<0?10+r:r)<<4,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|(r<0?0:1)}else{t=255&~t;const n=e.a+t+(1&e.flags),r=255&n;e.flags=-196&e.flags|128&r|(r?0:2)|n>>>8|(~(t^e.a)&(r^t)&128)>>>1,e.a=r}return null}function Yl(t){const e=t.a;t.a=t.a>>>1,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e}function Kl(t,e){const n=t>>>1;return e.flags=-132&e.flags|128&n|(n?0:2)|1&t,n}function Zl(t){const e=t.a;t.a=t.a<<1&255|1&t.flags,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7}function tf(t,e){const n=t<<1&255|1&e.flags;return e.flags=-132&e.flags|128&n|(n?0:2)|t>>>7,n}function ef(t){const e=t.a;t.a=t.a>>>1|(1&t.flags)<<7,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e}function nf(t,e){const n=t>>>1|(1&e.flags)<<7;return e.flags=-132&e.flags|128&n|(n?0:2)|1&t,n}function rf(t,e){const n=e.a&t;return e.a=n>>>1,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|1&n,null}function sf(t,e){const n=t+255&255,r=e.a+(255&~n)+1;return e.flags=-132&e.flags|128&r|(255&r?0:2)|r>>>8,n}function af(t,e){const n=(e.a&e.x)+(255&~t)+1;return e.x=255&n,e.flags=-132&e.flags|128&e.x|(255&e.x?0:2)|n>>>8,null}function of(t,e){const n=t>>>1|(1&e.flags)<<7;return e.flags=-2&e.flags|1&t,Gl(n,e),n}function uf(t,e){const n=t<<1&255|1&e.flags;return e.flags=-2&e.flags|t>>>7,zl(e.a&=n,e),n}function cf(t,e){e.flags=-2&e.flags|t>>>7;const n=t<<1&255;return e.a=e.a|n,zl(e.a,e),n}function hf(t){const e=t.a&t.x;return zl(e,t),e}function lf(t,e){const n=t+1&255;return Jl(n,e),n}function ff(t,e){return e.a&=t,zl(e.a,e),e.flags=-2&e.flags|(128&e.a)>>>7,null}class df{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchAddressLo,this._state.p),this._fetchAddressLo=t=>(this._address=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchAddressHi,this._state.p)),this._fetchAddressHi=t=>(this._address|=t<<8,this._state.p=this._state.p+1&65535,this._result.read(this._fetchLo,this._address)),this._fetchLo=t=>(this._operand=t,255==(255&this._address)?this._address&=65280:this._address=this._address+1&65535,this._result.read(this._fetchHi,this._address)),this._fetchHi=t=>(this._operand|=t<<8,this._next(this._operand,this._state)),this._operand=0,this._address=0,this._result=new ll,this._state=t,this._next=e,dl(this)}}r([pl,s("design:type",Object)],df.prototype,"reset",void 0),r([pl,s("design:type",Object)],df.prototype,"_fetchAddressLo",void 0),r([pl,s("design:type",Object)],df.prototype,"_fetchAddressHi",void 0),r([pl,s("design:type",Object)],df.prototype,"_fetchLo",void 0),r([pl,s("design:type",Object)],df.prototype,"_fetchHi",void 0),r([pl,s("design:type",Object)],df.prototype,"_result",void 0),r([pl,s("design:type",hl.State)],df.prototype,"_state",void 0),r([pl,s("design:type",Function)],df.prototype,"_next",void 0);class pf{constructor(t){this._state=t}compile(t){const e=bl.opcodes[t];switch(e.operation){case 0:return this._createAddressing(e.addressingMode,Gl,{deref:!0});case 1:return this._createAddressing(e.addressingMode,(t,e)=>Wl(t,e,(t,e)=>e.a=e.a&t),{deref:!0});case 2:return 0===e.addressingMode?Ol(this._state,Vl):this._createAddressing(e.addressingMode,Il(this._state,ql).reset,{writeOp:!0});case 6:return this._createAddressing(e.addressingMode,Xl,{deref:!0});case 10:return n=this._state,new gl(n,65534,!0);case 17:return this._createAddressing(e.addressingMode,(t,e)=>(Ql(t,e,t=>t.a),null),{deref:!0});case 18:return this._createAddressing(e.addressingMode,(t,e)=>(Ql(t,e,t=>t.x),null),{deref:!0});case 19:return this._createAddressing(e.addressingMode,(t,e)=>(Ql(t,e,t=>t.y),null),{deref:!0});case 20:return this._createAddressing(e.addressingMode,Il(this._state,(t,e)=>$l(t,e,t=>t-1&255)).reset,{writeOp:!0});case 21:return Ol(this._state,t=>Hl(t,t=>t.x=t.x-1&255));case 22:return Ol(this._state,t=>Hl(t,t=>t.y=t.y-1&255));case 24:return this._createAddressing(e.addressingMode,Il(this._state,(t,e)=>$l(t,e,t=>t+1&255)).reset,{writeOp:!0});case 25:return Ol(this._state,t=>Hl(t,t=>t.x=t.x+1&255));case 26:return Ol(this._state,t=>Hl(t,t=>t.y=t.y+1&255));case 23:return this._createAddressing(e.addressingMode,(t,e)=>Wl(t,e,(t,e)=>e.a=e.a^t),{deref:!0});case 27:return this._createAddressing(e.addressingMode,(t,e)=>(e.p=t,null));case 28:return(t=>new Sl(t))(this._state);case 29:return this._createAddressing(e.addressingMode,(t,e)=>Wl(t,e,(t,e)=>e.a=t),{deref:!0});case 30:return this._createAddressing(e.addressingMode,(t,e)=>Wl(t,e,(t,e)=>e.x=t),{deref:!0});case 31:return this._createAddressing(e.addressingMode,(t,e)=>Wl(t,e,(t,e)=>e.y=t),{deref:!0});case 32:return 0===e.addressingMode?Ol(this._state,Yl):this._createAddressing(e.addressingMode,Il(this._state,Kl).reset,{writeOp:!0});case 33:return Ol(this._state,()=>{});case 34:return this._createAddressing(e.addressingMode,(t,e)=>Wl(t,e,(t,e)=>e.a|=t),{deref:!0});case 35:return Ll(this._state,t=>t.a);case 36:return Ll(this._state,t=>16|t.flags);case 37:return Ml(this._state,(t,e)=>Hl(t,t=>t.a=e));case 38:return Ml(this._state,(t,e)=>t.flags=-17&(32|e));case 39:return 0===e.addressingMode?Ol(this._state,Zl):this._createAddressing(e.addressingMode,Il(this._state,tf).reset,{writeOp:!0});case 40:return 0===e.addressingMode?Ol(this._state,ef):this._createAddressing(e.addressingMode,Il(this._state,nf).reset,{writeOp:!0});case 41:return(t=>new Nl(t))(this._state);case 42:return(t=>new Bl(t))(this._state);case 43:return this._createAddressing(e.addressingMode,Jl,{deref:!0});case 48:return this._createAddressing(e.addressingMode,Ul(this._state,t=>t.x).reset,{writeOp:!0});case 49:return this._createAddressing(e.addressingMode,Ul(this._state,t=>t.y).reset,{writeOp:!0});case 50:return Ol(this._state,t=>Hl(t,t=>t.x=t.a));case 51:return Ol(this._state,t=>Hl(t,t=>t.y=t.a));case 52:return Ol(this._state,t=>Hl(t,t=>t.x=t.s));case 53:return Ol(this._state,t=>Hl(t,t=>t.a=t.x));case 54:return Ol(this._state,t=>t.s=t.x);case 55:return Ol(this._state,t=>Hl(t,t=>t.a=t.y));case 3:return Cl(this._state,t=>0==(1&t));case 4:return Cl(this._state,t=>(1&t)>0);case 8:return Cl(this._state,t=>0==(2&t));case 5:return Cl(this._state,t=>(2&t)>0);case 9:return Cl(this._state,t=>0==(128&t));case 7:return Cl(this._state,t=>(128&t)>0);case 11:return Cl(this._state,t=>0==(64&t));case 12:return Cl(this._state,t=>(64&t)>0);case 44:return Ol(this._state,t=>t.flags|=1);case 45:return Ol(this._state,t=>t.flags|=8);case 46:return Ol(this._state,t=>t.flags|=4);case 47:return this._createAddressing(e.addressingMode,Ul(this._state,t=>t.a).reset,{writeOp:!0});case 13:return Ol(this._state,t=>t.flags&=-2);case 14:return Ol(this._state,t=>t.flags&=-9);case 15:return Ol(this._state,t=>t.flags&=-5);case 16:return Ol(this._state,t=>t.flags&=-65);case 56:case 57:return this._createAddressing(e.addressingMode,()=>null,{deref:!0});case 67:return this._createAddressing(e.addressingMode,ff);case 64:return this._createAddressing(e.addressingMode,Ul(this._state,hf).reset,{writeOp:!0});case 58:return this._createAddressing(e.addressingMode,rf,{deref:!0});case 62:return this._createAddressing(e.addressingMode,(t,e)=>(function(t,e){e.a=(e.a&t)>>>1|(1&e.flags?128:0),e.flags=-196&e.flags|(64&e.a)>>>6|(e.a?0:2)|128&e.a|64&e.a^(32&e.a)<<1}(t,e),null),{deref:!0});case 59:return this._createAddressing(e.addressingMode,af,{deref:!0});case 68:return this._createAddressing(e.addressingMode,(t,e)=>Wl(t,e,(t,e)=>e.x=e.a=e.a&t),{deref:!0});case 60:return this._createAddressing(e.addressingMode,Il(this._state,sf).reset,{writeOp:!0});case 66:return this._createAddressing(e.addressingMode,Il(this._state,lf).reset,{writeOp:!0});case 61:return this._createAddressing(e.addressingMode,(t,e)=>Wl(t,e,(t,e)=>e.a=e.x=t),{deref:!0});case 65:return this._createAddressing(e.addressingMode,(t,e)=>Wl(t,e,(t,e)=>e.s=e.x=e.a=e.s&t),{deref:!0});case 70:return this._createAddressing(e.addressingMode,Il(this._state,uf).reset,{writeOp:!0});case 69:return this._createAddressing(e.addressingMode,Il(this._state,of).reset,{writeOp:!0});case 63:return this._createAddressing(e.addressingMode,Il(this._state,cf).reset,{writeOp:!0});default:return null}var n}_createAddressing(t,e,{deref:n=!1,writeOp:r=!1}={}){switch(n&&1!==t&&(e=((t,e)=>new yl(t,e))(this._state,e).reset),t){case 1:return((t,e)=>new wl(t,e))(this._state,e);case 2:return((t,e)=>new El(t,e))(this._state,e);case 3:return((t,e)=>new vl(t,e))(this._state,e);case 6:return((t,e)=>xl.zeroPageX(t,e))(this._state,e);case 9:return((t,e)=>xl.zeroPageY(t,e))(this._state,e);case 7:return((t,e,n)=>ml.absoluteX(t,e,n))(this._state,e,r);case 10:return((t,e,n)=>ml.absoluteY(t,e,n))(this._state,e,r);case 8:return((t,e)=>new Al(t,e))(this._state,e);case 11:return((t,e,n)=>new kl(t,e,n))(this._state,e,r);case 4:return((t,e)=>new df(t,e))(this._state,e);default:throw new Error(`invalid addressing mode ${t}`)}}}class _f{constructor(t,e){var n;this._bus=t,this._rng=e,this.executionState=0,this.state=new hl.State,this._invalidInstructionCallback=null,this._interruptPending=!1,this._nmiPending=!1,this._halt=!1,this._pollInterruptsAfterLastInstruction=!1,this._lastInstructionPointer=0,this._operations=new Array(255),this._opBoot=(n=this.state,new _l(n)),this._opIrq=(t=>new gl(t,65534,!1))(this.state),this._opNmi=(t=>new gl(t,65530,!1))(this.state);const r=new pf(this.state);for(let t=0;t<256;t++)this._operations[t]=r.compile(t);this.reset()}reset(){return this.state.a=this._rng?this._rng.int(255):0,this.state.x=this._rng?this._rng.int(255):0,this.state.y=this._rng?this._rng.int(255):0,this.state.s=253,this.state.p=this._rng?this._rng.int(65535):0,this.state.flags=52|(this._rng?this._rng.int(255):0),this.state.irq=!1,this.state.nmi=!1,this.executionState=0,this._interruptPending=!1,this._nmiPending=!1,this._halt=!1,this._lastResult=this._opBoot.reset(void 0),this._lastInstructionPointer=0,this}setInterrupt(t){return this._interruptPending=t,this}isInterrupt(){return this._interruptPending}nmi(){return this._nmiPending=!0,this}halt(){return this._halt=!0,this}resume(){return this._halt=!1,this}isHalt(){return this._halt}setInvalidInstructionCallback(t){return this._invalidInstructionCallback=t,this}getInvalidInstructionCallback(){return this._invalidInstructionCallback}getLastInstructionPointer(){return this._lastInstructionPointer}cycle(){if(this._halt&&(!this._lastResult||0===this._lastResult.cycleType))return this;if(1===this.executionState)return this._fetch(),this;let t;switch(this._lastResult.cycleType){case 0:t=this._bus.read(this._lastResult.address);break;case 1:t=this._lastResult.value,this._bus.write(this._lastResult.address,t);break;default:throw new Error("invalid cycle type")}return this._lastResult.pollInterrupts&&(this._pollInterrupts(),this._lastResult.pollInterrupts=!1,this._pollInterruptsAfterLastInstruction=!1),this._lastResult=this._lastResult.nextStep(t),null===this._lastResult&&(this.executionState=1),this}_fetch(){let t;this._pollInterruptsAfterLastInstruction&&this._pollInterrupts(),this._lastInstructionPointer=this.state.p;const e=this._bus.read(this.state.p);this.state.nmi?(t=this._opNmi,this._pollInterruptsAfterLastInstruction=!1):this.state.irq?(t=this._opIrq,this._pollInterruptsAfterLastInstruction=!1):(t=this._operations[e],this.state.p=this.state.p+1&65535,this._pollInterruptsAfterLastInstruction=!0),t?(this.executionState=2,this._lastResult=t.reset(void 0)):this._invalidInstructionCallback&&this._invalidInstructionCallback(this)}_pollInterrupts(){if(this.state.irq=!1,this._nmiPending)return this.state.nmi=!0,void(this._nmiPending=!1);!this._interruptPending||this.state.nmi||4&this.state.flags||(this.state.irq=!0)}}function gf(t,e){t.s=t.s+1&255,t.flags=-17&(32|e.read(256+t.s))}function bf(t,e){t.flags=-131&t.flags|128&e|(e?0:2)}function vf(t,e,n){if(8&t.flags){const e=(15&n)+(15&t.a)+(1&t.flags),r=(n>>>4)+(t.a>>>4)+(e>9?1:0);t.a=e%10|r%10<<4,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|(r>9?1:0)}else{const e=t.a+n+(1&t.flags),r=255&e;t.flags=-196&t.flags|128&r|(r?0:2)|e>>>8|(~(n^t.a)&(r^n)&128)>>>1,t.a=r}}function mf(t,e,n){t.a&=n,bf(t,t.a)}function yf(t){const e=t.a;t.a=t.a<<1&255,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7}function wf(t,e,n){const r=e.read(n),i=r<<1&255;e.write(n,i),t.flags=-132&t.flags|128&i|(i?0:2)|r>>>7}function Af(t,e,n){t.flags=-195&t.flags|192&n|(n&t.a?0:2)}function kf(t,e){const n=t.p+1&65535;let r=65534;t.nmi&&(r=65530,t.nmi=!1),t.nmi=t.irq=!1,e.write(t.s+256,n>>>8&255),t.s=t.s+255&255,e.write(t.s+256,255&n),t.s=t.s+255&255,e.write(t.s+256,16|t.flags),t.s=t.s+255&255,t.flags|=4,t.p=e.readWord(r)}function Ef(t){t.flags&=-2}function xf(t){t.flags&=-9}function Tf(t){t.flags&=-5}function Cf(t){t.flags&=-65}function Sf(t,e,n){const r=t.a+(255&~n)+1;t.flags=-132&t.flags|128&r|(255&r?0:2)|r>>>8}function Rf(t,e,n){const r=t.x+(255&~n)+1;t.flags=-132&t.flags|128&r|(255&r?0:2)|r>>>8}function If(t,e,n){const r=t.y+(255&~n)+1;t.flags=-132&t.flags|128&r|(255&r?0:2)|r>>>8}function Bf(t,e,n){const r=e.read(n)+255&255;e.write(n,r),bf(t,r)}function Pf(t){t.x=t.x+255&255,bf(t,t.x)}function Of(t,e,n){t.a=t.a^n,bf(t,t.a)}function Df(t){t.y=t.y+255&255,bf(t,t.y)}function Mf(t,e,n){const r=e.read(n)+1&255;e.write(n,r),bf(t,r)}function Ff(t){t.x=t.x+1&255,bf(t,t.x)}function Lf(t){t.y=t.y+1&255,bf(t,t.y)}function Nf(t,e,n){t.p=n}function jf(t,e,n){const r=t.p+1&65535,i=e.read(t.p);e.read(256+t.s),e.write(256+t.s,r>>>8),t.s=t.s+255&255,e.write(256+t.s,255&r),t.s=t.s+255&255,t.p=i|e.read(t.p+1&65535)<<8}function Uf(t,e,n,r){t.a=1===r?n:e.read(n),bf(t,t.a)}function zf(t,e,n,r){t.x=1===r?n:e.read(n),bf(t,t.x)}function $f(t,e,n,r){t.y=1===r?n:e.read(n),bf(t,t.y)}function Hf(t){const e=t.a;t.a=t.a>>>1,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e}function Wf(t,e,n){const r=e.read(n),i=r>>>1;e.write(n,i),t.flags=-132&t.flags|128&i|(i?0:2)|1&r}function Gf(){}function Vf(t,e,n){t.a|=n,bf(t,t.a)}function qf(t,e){e.write(256+t.s,16|t.flags),t.s=t.s+255&255}function Xf(t,e){gf(t,e)}function Qf(t,e){e.write(256+t.s,t.a),t.s=t.s+255&255}function Jf(t,e){t.s=t.s+1&255,t.a=e.read(256+t.s),bf(t,t.a)}function Yf(t){const e=t.a;t.a=t.a<<1&255|1&t.flags,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7}function Kf(t,e,n){const r=e.read(n),i=r<<1&255|1&t.flags;e.write(n,i),t.flags=-132&t.flags|128&i|(i?0:2)|r>>>7}function Zf(t){const e=t.a;t.a=t.a>>>1|(1&t.flags)<<7,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e}function td(t,e,n){const r=e.read(n),i=r>>>1|(1&t.flags)<<7;e.write(n,i),t.flags=-132&t.flags|128&i|(i?0:2)|1&r}function ed(t,e){let n;gf(t,e),t.s=t.s+1&255,n=e.read(256+t.s),t.s=t.s+1&255,n|=e.read(256+t.s)<<8,t.p=n}function nd(t,e){let n;e.read(256+t.s),t.s=t.s+1&255,n=e.read(256+t.s),t.s=t.s+1&255,n+=e.read(256+t.s)<<8,t.p=n+1&65535}function rd(t,e,n){if(8&t.flags){const e=(15&t.a)-(15&n)-(1&~t.flags),r=(t.a>>>4)-(n>>>4)-(e<0?1:0);t.a=(e<0?10+e:e)|(r<0?10+r:r)<<4,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|(r<0?0:1)}else{n=255&~n;const e=t.a+n+(1&t.flags),r=255&e;t.flags=-196&t.flags|128&r|(r?0:2)|e>>>8|(~(n^t.a)&(r^n)&128)>>>1,t.a=r}}function id(t){t.flags|=1}function sd(t){t.flags|=8}function ad(t){t.flags|=4}function od(t,e,n){e.write(n,t.a)}function ud(t,e,n){e.write(n,t.x)}function cd(t,e,n){e.write(n,t.y)}function hd(t){t.x=t.a,bf(t,t.a)}function ld(t){t.y=t.a,bf(t,t.a)}function fd(t){t.x=t.s,bf(t,t.x)}function dd(t){t.a=t.x,bf(t,t.a)}function pd(t){t.s=t.x}function _d(t){t.a=t.y,bf(t,t.a)}function gd(t,e,n){const r=t.a&n;t.a=r>>>1,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&r}function bd(t,e,n){const r=(t.a&t.x)+(255&~n)+1;t.x=255&r,t.flags=-132&t.flags|128&t.x|(255&t.x?0:2)|r>>>8}function vd(t,e,n){const r=e.read(n)+255&255;e.write(n,r);const i=t.a+(255&~r)+1;t.flags=-132&t.flags|128&i|(255&i?0:2)|i>>>8}function md(t,e,n){t.a=n,t.x=n,bf(t,n)}function yd(t,e,n){t.a=(t.a&n)>>>1|(1&t.flags?128:0),t.flags=-196&t.flags|(64&t.a)>>>6|(t.a?0:2)|128&t.a|64&t.a^(32&t.a)<<1}function wd(t,e,n){let r=e.read(n);t.flags=-2&t.flags|r>>>7,r=r<<1&255,e.write(n,r),t.a=t.a|r,bf(t,t.a)}function Ad(t,e,n){const r=t.x&t.a;e.write(n,r),bf(t,r)}function kd(t,e,n){t.s=t.a=t.x=t.s&n,bf(t,t.a)}function Ed(t,e,n){const r=e.read(n)+1&255;e.write(n,r),rd(t,0,r)}function xd(t,e,n){t.a&=n,bf(t,t.a),t.flags=-2&t.flags|(128&t.a)>>>7}function Td(t,e,n){t.a&=n,t.x=t.a,bf(t,t.a)}function Cd(t,e,n){const r=e.read(n),i=r>>>1|(1&t.flags)<<7;e.write(n,i),t.flags=-2&t.flags|1&r,vf(t,0,i)}function Sd(t,e,n){const r=e.read(n),i=r<<1&255|1&t.flags;e.write(n,i),t.flags=-2&t.flags|r>>>7,mf(t,0,i)}function Rd(t,e){t.p=e.readWord(65532)}function Id(t,e,n){const r=t.p;t.nmi&&(n=65530),t.nmi=t.irq=!1,e.write(t.s+256,r>>>8&255),t.s=t.s+255&255,e.write(t.s+256,255&r),t.s=t.s+255&255,e.write(t.s+256,-17&t.flags),t.s=t.s+255&255,t.flags|=4,t.p=e.readWord(n)}function Bd(t,e){Id(t,e,65534)}function Pd(t,e){Id(t,e,65530)}class Od{constructor(t,e){this._bus=t,this._rng=e,this.executionState=0,this.state=new hl.State,this._opCycles=0,this._instructionCallback=null,this._invalidInstructionCallback=null,this._interruptPending=!1,this._nmiPending=!1,this._interuptCheck=0,this._halted=!1,this._operand=0,this._lastInstructionPointer=0,this._currentAddressingMode=12,this._dereference=!1,this.reset()}setInterrupt(t){return this._interruptPending=t,this}isInterrupt(){return this._interruptPending}nmi(){return this._nmiPending=!0,this}halt(){return this._halted=!0,this}resume(){return this._halted=!1,this}isHalt(){return this._halted}setInvalidInstructionCallback(t){return this._invalidInstructionCallback=t,this}getInvalidInstructionCallback(){return this._invalidInstructionCallback}getLastInstructionPointer(){return this._lastInstructionPointer}reset(){return this.state.a=this._rng?this._rng.int(255):0,this.state.x=this._rng?this._rng.int(255):0,this.state.y=this._rng?this._rng.int(255):0,this.state.s=253,this.state.p=this._rng?this._rng.int(65535):0,this.state.flags=52|(this._rng?this._rng.int(255):0),this.state.irq=!1,this.state.nmi=!1,this.executionState=0,this._opCycles=7,this._interruptPending=!1,this._nmiPending=!1,this._instructionCallback=Rd,this}cycle(){if(this._halted)return this;switch(this.executionState){case 0:case 2:0==--this._opCycles&&(this._dereference&&(this._operand=this._bus.read(this._operand)),1===this._interuptCheck&&this._checkForInterrupts(),this._instructionCallback(this.state,this._bus,this._operand,this._currentAddressingMode),this.executionState=1,0===this._interuptCheck&&this._checkForInterrupts());break;case 1:if(this.state.nmi)return this._instructionCallback=Pd,this._opCycles=6,this.state.nmi=this.state.irq=!1,this._interuptCheck=1,this.executionState=2,this;if(this.state.irq)return this._instructionCallback=Bd,this._opCycles=6,this.state.nmi=this.state.irq=!1,this._interuptCheck=1,this.executionState=2,this;this._fetch()}return this}_fetch(){const t=bl.opcodes[this._bus.read(this.state.p)];let e,n,r=t.addressingMode,i=!1,s=!1;switch(this._lastInstructionPointer=this.state.p,this._currentAddressingMode=r,this._interuptCheck=0,t.operation){case 0:this._opCycles=0,this._instructionCallback=vf,i=!0;break;case 1:this._opCycles=0,this._instructionCallback=mf,i=!0;break;case 2:0===r?(this._opCycles=1,this._instructionCallback=yf):(this._opCycles=3,this._instructionCallback=wf,s=!0);break;case 3:1&this.state.flags?(r=0,this._instructionCallback=Gf,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=Nf,this._opCycles=0);break;case 4:1&this.state.flags?(this._instructionCallback=Nf,this._opCycles=0):(r=0,this._instructionCallback=Gf,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 5:2&this.state.flags?(this._instructionCallback=Nf,this._opCycles=0):(r=0,this._instructionCallback=Gf,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 6:this._opCycles=0,this._instructionCallback=Af,i=!0;break;case 7:128&this.state.flags?(this._instructionCallback=Nf,this._opCycles=0):(r=0,this._instructionCallback=Gf,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 8:2&this.state.flags?(r=0,this._instructionCallback=Gf,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=Nf,this._opCycles=0);break;case 9:128&this.state.flags?(r=0,this._instructionCallback=Gf,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=Nf,this._opCycles=0);break;case 11:64&this.state.flags?(r=0,this._instructionCallback=Gf,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=Nf,this._opCycles=0);break;case 12:64&this.state.flags?(this._instructionCallback=Nf,this._opCycles=0):(r=0,this._instructionCallback=Gf,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 10:this._opCycles=6,this._instructionCallback=kf,this._interuptCheck=1;break;case 13:this._opCycles=1,this._instructionCallback=Ef;break;case 14:this._opCycles=1,this._instructionCallback=xf;break;case 15:this._opCycles=1,this._instructionCallback=Tf,this._interuptCheck=1;break;case 16:this._opCycles=1,this._instructionCallback=Cf;break;case 17:this._opCycles=0,this._instructionCallback=Sf,i=!0;break;case 18:this._opCycles=0,this._instructionCallback=Rf,i=!0;break;case 19:this._opCycles=0,this._instructionCallback=If,i=!0;break;case 20:this._opCycles=3,this._instructionCallback=Bf,s=!0;break;case 21:this._opCycles=1,this._instructionCallback=Pf;break;case 22:this._opCycles=1,this._instructionCallback=Df;break;case 23:this._opCycles=0,this._instructionCallback=Of,i=!0;break;case 24:this._opCycles=3,this._instructionCallback=Mf,s=!0;break;case 25:this._opCycles=1,this._instructionCallback=Ff;break;case 26:this._opCycles=1,this._instructionCallback=Lf;break;case 27:this._opCycles=0,this._instructionCallback=Nf;break;case 28:this._opCycles=5,this._instructionCallback=jf;break;case 29:this._opCycles=1===r?0:1,this._instructionCallback=Uf;break;case 30:this._opCycles=1===r?0:1,this._instructionCallback=zf;break;case 31:this._opCycles=1===r?0:1,this._instructionCallback=$f;break;case 32:0===r?(this._opCycles=1,this._instructionCallback=Hf):(this._opCycles=3,this._instructionCallback=Wf,s=!0);break;case 33:this._opCycles=1,this._instructionCallback=Gf;break;case 56:case 57:this._opCycles=0,i=!0,this._instructionCallback=Gf;break;case 34:this._opCycles=0,this._instructionCallback=Vf,i=!0;break;case 36:this._opCycles=2,this._instructionCallback=qf;break;case 35:this._opCycles=2,this._instructionCallback=Qf;break;case 37:this._opCycles=3,this._instructionCallback=Jf;break;case 38:this._opCycles=3,this._instructionCallback=Xf,this._interuptCheck=1;break;case 39:0===r?(this._opCycles=1,this._instructionCallback=Yf):(this._opCycles=3,this._instructionCallback=Kf,s=!0);break;case 40:0===r?(this._opCycles=1,this._instructionCallback=Zf):(this._opCycles=3,this._instructionCallback=td,s=!0);break;case 41:this._opCycles=5,this._instructionCallback=ed;break;case 42:this._opCycles=5,this._instructionCallback=nd;break;case 43:this._opCycles=0,this._instructionCallback=rd,i=!0;break;case 44:this._opCycles=1,this._instructionCallback=id;break;case 45:this._opCycles=1,this._instructionCallback=sd;break;case 46:this._opCycles=1,this._instructionCallback=ad,this._interuptCheck=1;break;case 47:this._opCycles=1,this._instructionCallback=od,s=!0;break;case 48:this._opCycles=1,this._instructionCallback=ud,s=!0;break;case 49:this._opCycles=1,this._instructionCallback=cd,s=!0;break;case 50:this._opCycles=1,this._instructionCallback=hd;break;case 51:this._opCycles=1,this._instructionCallback=ld;break;case 52:this._opCycles=1,this._instructionCallback=fd;break;case 53:this._opCycles=1,this._instructionCallback=dd;break;case 54:this._opCycles=1,this._instructionCallback=pd;break;case 55:this._opCycles=1,this._instructionCallback=_d;break;case 62:this._opCycles=0,this._instructionCallback=yd;break;case 58:this._opCycles=0,this._instructionCallback=gd;break;case 59:this._opCycles=0,this._instructionCallback=bd;break;case 60:this._opCycles=3,this._instructionCallback=vd,s=!0;break;case 61:this._opCycles=0,this._instructionCallback=md,i=!0;break;case 63:this._opCycles=3,this._instructionCallback=wd,s=!0,i=!1;break;case 64:this._opCycles=1,this._instructionCallback=Ad;break;case 65:this._opCycles=0,this._instructionCallback=kd,i=!0;break;case 66:this._opCycles=3,this._instructionCallback=Ed,s=!0;break;case 67:this._opCycles=0,this._instructionCallback=xd;break;case 68:this._opCycles=0,this._instructionCallback=Td;break;case 69:this._opCycles=3,i=!1,s=!0,this._instructionCallback=Cd;break;case 70:this._opCycles=3,i=!1,s=!0,this._instructionCallback=Sd;break;default:return void(this._invalidInstructionCallback&&this._invalidInstructionCallback(this))}switch(this.state.p=this.state.p+1&65535,r){case 1:this._operand=this._bus.read(this.state.p),i=!1,this.state.p=this.state.p+1&65535,this._opCycles++;break;case 2:this._operand=this._bus.read(this.state.p),this.state.p=this.state.p+1&65535,this._opCycles++;break;case 3:this._operand=this._bus.readWord(this.state.p),this.state.p=this.state.p+2&65535,this._opCycles+=2;break;case 4:e=this._bus.readWord(this.state.p),this._operand=255==(255&e)?this._bus.read(e)+(this._bus.read(65280&e)<<8):this._bus.readWord(e),this.state.p=this.state.p+2&65535,this._opCycles+=4;break;case 5:e=this._bus.read(this.state.p),e=128&e?-(255&~(e-1)):e,this._operand=this.state.p+e+65537&65535,this.state.p=this.state.p+1&65535,this._opCycles+=(65280&this._operand)!=(65280&this.state.p)?3:2;break;case 6:n=this._bus.read(this.state.p),this._bus.read(n),this._operand=n+this.state.x&255,this.state.p=this.state.p+1&65535,this._opCycles+=2;break;case 7:e=this._bus.readWord(this.state.p),this._operand=e+this.state.x&65535,(65280&this._operand)!=(65280&e)&&this._bus.read(65280&e|255&this._operand),this._opCycles+=s||(65280&this._operand)!=(65280&e)?3:2,this.state.p=this.state.p+2&65535;break;case 9:n=this._bus.read(this.state.p),this._bus.read(n),this._operand=n+this.state.y&255,this.state.p=this.state.p+1&65535,this._opCycles+=2;break;case 10:e=this._bus.readWord(this.state.p),this._operand=e+this.state.y&65535,(65280&this._operand)!=(65280&e)&&this._bus.read(65280&e|255&this._operand),this._opCycles+=s||(65280&this._operand)!=(65280&e)?3:2,this.state.p=this.state.p+2&65535;break;case 8:n=this._bus.read(this.state.p),this._bus.read(n),e=n+this.state.x&255,this._operand=255===e?this._bus.read(255)+(this._bus.read(0)<<8):this._bus.readWord(e),this._opCycles+=4,this.state.p=this.state.p+1&65535;break;case 11:e=this._bus.read(this.state.p),e=255===e?this._bus.read(255)+(this._bus.read(0)<<8):this._bus.readWord(e),this._operand=e+this.state.y&65535,(65280&this._operand)!=(65280&e)&&this._bus.read(65280&e|255&this._operand),this._opCycles+=s||(65280&e)!=(65280&this._operand)?4:3,this.state.p=this.state.p+1&65535}this._dereference=i,i&&this._opCycles++,this.executionState=2}_checkForInterrupts(){this._nmiPending&&(this.state.irq=!1,this.state.nmi=!0,this._nmiPending=!1),!this._interruptPending||this.state.nmi||4&this.state.flags||(this.state.irq=!0)}}class Dd{constructor(t){this._type=t}create(t,e){switch(this._type){case Dd.Type.stateMachine:return new _f(t,e);case Dd.Type.batchedAccess:return new Od(t,e);default:throw new Error("invalid CPU type")}}}!function(t){let e;!function(t){t[t.stateMachine=0]="stateMachine",t[t.batchedAccess=1]="batchedAccess"}(e=t.Type||(t.Type={}))}(Dd||(Dd={}));var Md,Fd=Dd;!function(t){t.create=function(t={}){return Object.assign({tvMode:0,enableAudio:!0,randomSeed:-1,emulatePaddles:!0,frameStart:-1,pcmAudio:!1,cpuType:Fd.Type.stateMachine},t)},t.getClockHz=function(t){switch(t.tvMode){case 0:return 3584160;case 1:case 2:return 3556800}}}(Md||(Md={}));class Ld{constructor(t,e){this._content=t,this._sampleRate=e}getLength(){return this._content.length}getContent(){return this._content}getSampleRate(){return this._sampleRate}replaceUnderlyingBuffer(t){this._content=t}}const Nd=new Uint8Array(256);function jd(t,e){const n=Nd[t.charCodeAt(e)];if(n>63)throw new Error('invalid base64 character "'+t[e]+'" at index '+e);return n}function Ud(t,e){return(jd(t,e)<<18)+(jd(t,e+1)<<12)+(jd(t,e+2)<<6)+jd(t,e+3)}function zd(t){if(t.length%4!=0)throw new Error("invalid base64 data --- char count mismatch");const e=t.length/4,n=3*e-function(t){let e=0,n=t.length-1;for(;n>=0&&"="===t[n--];)e++;return e}(t),r=new Uint8Array(n);let i=0;for(let s=0;s<e;s++){const e=Ud(t,4*s);for(let t=0;t<3&&i<n;t++)r[i++]=e>>>8*(2-t)&255}return r}!function(t){let e;for(e=0;e<256;e++)Nd[e]=255;for(e=0;e<64;e++)Nd["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;Nd["=".charCodeAt(0)]=0}();const $d=zd("AQEPAQEBAQEBAQEBAwMDAQ=="),Hd=new Int8Array([1]),Wd=new Int8Array([1,1]),Gd=new Int8Array([16,15]),Vd=zd("AQICAQEBBAM="),qd=zd("AQIBAQICBQQCAQMBAQEBBA=="),Xd=zd("AQQBAwIEAQIDAgEBAQEBAQIEAgEEAQECAgEDAgEDAQEBBAEBAQECAQECBgECAgECAQIBAQIBBgIBAgIBAQEBAgICAgcCAwICAQEBAwIBAQIBAQcBAQMBAQIDAwEBAQICAQECAgQDBQEDAQEFAgEBAQIBAgEDAQIFAQECAQEBBQEBAQEBAQEBBgEBAQIBAQEBBAIBAQMBAwYDAgMBAQIBAgQBAQEDAQEBAQMBAgEEAgIDBAEBBAECAQICAgEBBAMBBAQJBQQBBQMBAQMCAgIBBQECAQEBAgMBAgEBAwQCBQICAQIDAQEBAQECAQMDAwIBAgEBAQEBAwMBAgIDAQMBCA=="),Qd=zd("BQYEBQoFAwcECgYDBgQJBg=="),Jd=[Hd,Vd,Vd,zd("AgMCAQQBBgoCBAIBAQQFCQMDBAEBAQgFBQUEAQEBCAQCCAMDAQEHBAIHBQEDAQcEAQQIAgEDBAcBAwcDAgEGBgICBAUDAgYGAQMDAgUDBwMEAwICAgUJAwEFAwECAgsFAQUDAQECDAUBAgUCAQEMBgECBQECAQoGAwICBAECBgo="),Wd,Wd,Gd,qd,Xd,qd,Gd,Hd,Wd,Wd,Gd,Qd];class Yd{constructor(t){this._config=t}setConfig(t){this._config=t}getKey(t,e){return Jd[t]===Wd&&$d[t]*(e+1)==1?0:t<<5|e}getBuffer(t){const e=t>>>5&15,n=31&t,r=Jd[e];let i=0;for(let t=0;t<r.length;t++)i+=r[t];i=i*$d[e]*(n+1);const s=new Float32Array(i),a=Md.getClockHz(this._config)/114;let o=0,u=0,c=0,h=!0;for(let t=0;t<i;t++)o++,o===$d[e]*(n+1)&&(o=0,u++,u===r[c]&&(c++,u=0,r.length===c&&(c=0)),h=!(1&c)),s[t]=h?1:-1;return new Ld(s,a)}}class Kd{constructor(t,e){this._index=t,this._rpc=e,this.bufferChanged=new Ao,this.volumeChanged=new Ao,this.stop=new Ao,this._toneGenerator=new Yd,this._volume=0}init(){return this._rpc.registerSignalHandler(rl.waveformAudioBufferChange,this._onBufferChangeSignal.bind(this)).registerSignalHandler(rl.waveformAudioVolumeChange,this._onVolumeChangeSignal.bind(this)).registerSignalHandler(rl.audioStop,this._onStopSignal.bind(this)),this}start(t){return a(this,void 0,void 0,(function*(){const e=yield this._rpc.rpc(nl.getWaveformAudioParameters(this._index));this._toneGenerator.setConfig(t),this.setVolume(e.volume)}))}setVolume(t){return this._volume=t,this}getVolume(){return this._volume}getBuffer(t){return this._toneGenerator.getBuffer(t)}_onVolumeChangeSignal(t){t.index===this._index&&(this._volume=t.value,this.volumeChanged.dispatch(this._volume))}_onBufferChangeSignal(t){t.index===this._index&&this.bufferChanged.dispatch(t.key)}_onStopSignal(t){t===this._index&&this.stop.dispatch(void 0)}}class Zd{constructor(t,e){this._index=t,this._rpc=e,this.newFrame=new Ao,this.togglePause=new Ao,this._sampleRate=0,this._frameSize=0,this._paused=!1,this._framePool=new el(()=>null),this._frameMap=new WeakMap,this._enabled=!1,this._signalReturnFrame="",this._framePool.event.release.addHandler(Zd._onReleaseFragment,this),this._signalReturnFrame=rl.pcmAudioReturnFrame(this._index)}init(){return this._rpc.registerSignalHandler(rl.pcmAudioNewFrame(this._index),this._onNewFrame.bind(this)).registerSignalHandler(rl.pcmAudioTogglePause(this._index),this._onTogglePause.bind(this)),this}start(){return a(this,void 0,void 0,(function*(){if(this._enabled)return;const t=yield this._rpc.rpc(nl.getPCMAudioParameters(this._index));this._sampleRate=t.sampleRate,this._frameSize=t.frameSize,this._paused=t.paused,this._enabled=!0}))}stop(){this._enabled=!1}isPaused(){return this._paused}getSampleRate(){return this._sampleRate}getFrameSize(){return this._frameSize}static _onReleaseFragment(t,e){e._frameMap.has(t)&&e._rpc.signal(e._signalReturnFrame,{id:e._frameMap.get(t),buffer:t.buffer},[t.buffer])}_onNewFrame(t){if(!this._enabled)return;const e=this._framePool.get(),n=new Float32Array(t.buffer);e.adopt(n),this._frameMap.set(n,t.id),this.newFrame.dispatch(e)}_onTogglePause(t){t.paused!==this._paused&&(this._paused=t.paused,this.togglePause.dispatch(this._paused))}}class tp{constructor(t){this._rpc=t,this.message=new Ao}init(){this._rpc.registerSignalHandler(rl.messageFromAsyncIO,t=>this.message.dispatch(t))}send(t){this._rpc.signal(rl.messageToAsyncIO,Array.from(t))}}class ep{constructor(t){this._stellaWorkerUri=t,this.stateChanged=new Ao,this.frequencyUpdate=new Ao,this._rateLimitEnforced=!0,this._mutex=new Qh,this._worker=null,this._rpc=null,this._state=Xh.State.stopped,this._lastError=null,this._emulationContext=null,this._frequency=0,this._waveformChannels=new Array(2),this._pcmChannel=null,this._controlProxy=null,this._controlProxyUpdateHandle=null,this._proxyState=0,this._savedConfig=null}init(){return a(this,void 0,void 0,(function*(){this._worker=new Worker(this._stellaWorkerUri),this._rpc=new Kh((t,e)=>this._worker.postMessage(t,e)),this._pcmChannel=new Zd(0,this._rpc).init();for(let t=0;t<2;t++)this._waveformChannels[t]=new Kd(t,this._rpc).init();const t=new il(this._rpc),e=new cl(this._rpc),n=new tp(this._rpc);n.init(),t.init(),this._emulationContext=new Zh(t,e,this._waveformChannels,this._pcmChannel,n),this._worker.onmessage=t=>this._rpc.dispatch(t.data),this._rpc.registerSignalHandler(rl.emulationFrequencyUpdate,this._onFrequencyUpdate.bind(this)).registerSignalHandler(rl.emulationError,this._onEmulationError.bind(this)),this._controlProxy=e}))}start(t,e,n){return a(this,void 0,void 0,(function*(){return yield this.stop(),this._mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){const r=yield this._rpc.rpc(nl.emulationStart,{buffer:t,config:e,cartridgeType:n});return r===Xh.State.paused?(this._savedConfig=e,this._emulationContext.setConfig(e),yield this._startProxies(e)):this._savedConfig=null,this._applyState(r)})))}))}pause(){return this._mutex.runExclusive(()=>this._rpc.rpc(nl.emulationPause).then(t=>(this._pauseProxies(),this._applyState(t))))}stop(){return this._mutex.runExclusive(()=>this._rpc.rpc(nl.emulationStop).then(t=>(this._stopProxies(),this._applyState(t))))}reset(){return this._mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){const t=yield this._rpc.rpc(nl.emulationReset);return this._state!==Xh.State.error||t!==Xh.State.running&&t!==Xh.State.paused||!this._savedConfig||(yield this._startProxies(this._savedConfig)),this._applyState(t)})))}resume(){return this._mutex.runExclusive(()=>this._rpc.rpc(nl.emulationResume).then(t=>(this._resumeProxies(),this._applyState(t))))}setRateLimit(t){return this._rateLimitEnforced=t,this._rpc.rpc(nl.emulationSetRateLimit,t)}getFrequency(){return this._frequency}getRateLimit(){return this._rateLimitEnforced}getState(){return this._state}getLastError(){return this._lastError}getEmulationContext(){switch(this._state){case Xh.State.running:case Xh.State.paused:return this._emulationContext;default:return null}}_fetchLastError(){return this._rpc.rpc(nl.emulationFetchLastError).then(t=>t?new Error(t):null)}_applyState(t){return t===Xh.State.error?this._fetchLastError().then(e=>(this._state=t,this._lastError=e,this._stopProxies(),this.stateChanged.dispatch(t),t)):(this._state=t,this.stateChanged.dispatch(t),t)}_onFrequencyUpdate(t){this._frequency=t,this.frequencyUpdate.dispatch(this._frequency)}_onEmulationError(t){this._lastError=new Error(t||""),this._stopProxies(),this._state=Xh.State.error,this.stateChanged.dispatch(this._state)}_startProxies(t){return a(this,void 0,void 0,(function*(){yield this._emulationContext.getVideoProxy().start();for(let e=0;e<this._waveformChannels.length;e++)yield this._waveformChannels[e].start(t);yield this._pcmChannel.start(),this._startControlUpdates(),this._proxyState=1}))}_stopProxies(){0!==this._proxyState&&(this._emulationContext.getVideoProxy().stop(),this._pcmChannel.stop(),this._stopControlUpdates(),this._proxyState=0)}_pauseProxies(){1===this._proxyState&&(this._stopControlUpdates(),this._proxyState=2)}_resumeProxies(){2===this._proxyState&&(this._startControlUpdates(),this._proxyState=1)}_startControlUpdates(){null===this._controlProxyUpdateHandle&&(this._controlProxyUpdateHandle=setInterval(()=>this._controlProxy.sendUpdate(),25))}_stopControlUpdates(){null!==this._controlProxyUpdateHandle&&(clearInterval(this._controlProxyUpdateHandle),this._controlProxyUpdateHandle=null)}}class np{constructor(){this._drivers=new Map,this._driversBound=!1}bind(t){return this._driversBound?this:(this._emulationService=t,this._shouldBindDrivers()&&this._bindDrivers(),this._emulationService.stateChanged.addHandler(np._onEmuStateChange,this),this)}unbind(){return this._emulationService?(this._unbindDrivers(),this._emulationService.stateChanged.removeHandler(np._onEmuStateChange,this),this._emulationService=null,this):this}addDriver(t,e){return this._drivers.set(t,new np.DriverContext(t,e)),this._driversBound&&e(this._emulationService.getEmulationContext(),t),this}removeDriver(t){return this._drivers.get(t)?(t.unbind(),this._drivers.delete(t),this):this}static _onEmuStateChange(t,e){e._shouldBindDrivers(t)?e._bindDrivers():e._unbindDrivers()}_shouldBindDrivers(t=(this._emulationService?this._emulationService.getState():void 0)){return this._emulationService&&(t===Xh.State.running||t===Xh.State.paused)}_bindDrivers(){this._driversBound||(this._drivers.forEach(t=>t.binder(this._emulationService.getEmulationContext(),t.driver)),this._driversBound=!0)}_unbindDrivers(){this._driversBound&&(this._drivers.forEach(t=>t.driver.unbind()),this._driversBound=!1)}}function rp(t){return`precision ${t.highpInVsh?"highp":"mediump"} float;`}var ip,sp;function ap(t,e,n){const r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(`failed to compile shader:\n\n${t.getShaderInfoLog(r)}\n\n${n}`);return r}!function(t){t.DriverContext=class{constructor(t,e){this.driver=t,this.binder=e}}}(np||(np={})),function(t){let e;!function(t){t.source=t=>`\n            ${function(t){return`precision ${t.highpInVsh?"highp":"mediump"} float;`}(t)}\n\n            attribute vec2 a_VertexPosition;\n            attribute vec2 a_TextureCoordinate;\n\n            varying vec2 v_TextureCoordinate;\n\n            void main() {\n                v_TextureCoordinate = a_TextureCoordinate;\n                gl_Position = vec4(a_VertexPosition, 0, 1);\n            }\n        `}(e=t.plain||(t.plain={}))}(ip||(ip={})),function(t){let e,n,r,i,s,a;!function(t){t.source=t=>`\n            ${rp(t)}\n\n            varying vec2 v_TextureCoordinate;\n\n            uniform sampler2D u_Sampler0;\n\n            void main() {\n                gl_FragColor = vec4(texture2D(u_Sampler0, v_TextureCoordinate).rgb, 1.0);\n            }\n        `}(e=t.blit||(t.blit={})),function(t){t.source=t=>`\n            ${rp(t)}\n\n            varying vec2 v_TextureCoordinate;\n\n            uniform sampler2D u_Sampler0;\n            uniform float u_Gamma;\n\n            void main() {\n                vec4 texel = texture2D(u_Sampler0, v_TextureCoordinate);\n\n                gl_FragColor = vec4(pow(texel.rgb, vec3(u_Gamma)), 1.);\n            }\n        `}(n=t.blitWithGamma||(t.blitWithGamma={})),function(t){t.source=t=>`\n            ${rp(t)}\n\n            varying vec2 v_TextureCoordinate;\n\n            uniform float u_PhosphorLevel;\n            uniform sampler2D u_Sampler_NewImage;\n            uniform sampler2D u_Sampler_PreviousImage;\n\n            float applyPhosphor(float new, float previous) {\n                float decayed = previous * u_PhosphorLevel;\n                decayed = step(0.5, (previous - decayed) * 255.0) * decayed;\n\n                return max(new, decayed);\n            }\n\n            void main() {\n                vec4 new = texture2D(u_Sampler_NewImage, v_TextureCoordinate);\n                vec4 previous = texture2D(u_Sampler_PreviousImage, v_TextureCoordinate);\n\n                gl_FragColor = vec4(\n                    applyPhosphor(new.r, previous.r),\n                    applyPhosphor(new.g, previous.g),\n                    applyPhosphor(new.b, previous.b),\n                    1.0\n                );\n            }\n        `}(r=t.phosphor||(t.phosphor={})),function(t){t.source=t=>`\n            ${rp(t)}\n\n            #define PI 3.14159265\n\n            #define CHROMA_MOD_FREQ (PI / 3.0)\n\n            #define SATURATION 1.0\n            #define BRIGHTNESS 1.0\n\n            uniform sampler2D u_Sampler0;\n            uniform float u_Fringing;\n            uniform float u_Artifacting;\n\n            varying vec2 v_TextureCoordinate;\n\n            const mat3 yiq_mat = mat3(\n                0.2989, 0.5870, 0.1140,\n                0.5959, -0.2744, -0.3216,\n                0.2115, -0.5229, 0.3114\n            );\n\n            vec3 rgb2yiq(vec3 col) {\n                return col * yiq_mat;\n            }\n\n            ${t.floatTextures||t.halfFloatTextures?"":"\n                vec4 pack(vec3 yiq) {\n                    yiq += 1.2;\n                    yiq /= 3.4;\n\n                    int y_byte = int(yiq.r * 1024.0);\n                    int i_byte = int(yiq.g * 1024.0);\n                    int q_byte = int(yiq.b * 1024.0);\n\n                    int y_high = (y_byte / 4) * 4;\n                    int i_high = (i_byte / 4) * 4;\n                    int q_high = (q_byte / 4) * 4;\n                    int alpha = (q_byte - q_high) * 16 + (i_byte - i_high) * 4 + (y_byte - y_high);\n\n                    return vec4(\n                        float(y_high / 4) / 255.0,\n                        float(i_high / 4) / 255.0,\n                        float(q_high / 4) / 255.0,\n                        float(alpha) / 255.0\n                    );\n                }\n                "}\n\n            void main() {\n                mat3 mix_mat = mat3(\n                    BRIGHTNESS, u_Fringing, u_Fringing,\n                    u_Artifacting, 2.0 * SATURATION, 0.0,\n                    u_Artifacting, 0.0, 2.0 * SATURATION\n                );\n\n                vec3 col = texture2D(u_Sampler0, v_TextureCoordinate).rgb;\n                vec3 yiq = rgb2yiq(col);\n\n                float mod_phase = v_TextureCoordinate.x * 960.0 * CHROMA_MOD_FREQ;\n\n                float i_mod = cos(mod_phase);\n                float q_mod = sin(mod_phase);\n\n                yiq.yz *= vec2(i_mod, q_mod); // Modulate.\n                yiq *= mix_mat; // Cross-talk.\n                yiq.yz *= vec2(i_mod, q_mod); // Demodulate.\n\n                gl_FragColor = ${t.floatTextures||t.halfFloatTextures?"vec4(yiq, 1.0)":"pack(yiq)"};\n            }\n        `}(i=t.ntscPass1||(t.ntscPass1={})),function(t){const e=[1202e-8,22146e-9,13155e-9,1202e-8,49979e-9,11394e-8,12215e-8,5612e-9,170516e-9,237199e-9,16964e-8,285688e-9,984574e-9,.002018683,.002002275,-909882e-9,-.007049081,-.01322286,-.012606931,.00246086,.035868225,.084016453,.1355635,.175261268,.190176552],n=[118847e-9,271306e-9,502642e-9,930833e-9,.001451013,.002064744,.002700432,.003241276,.003524948,-.003350284,-.002491729,-721149e-9,.002164659,.006313635,.011789103,.01854566,.026414396,.03510071,.044196567,.053207202,.061590275,.068803602,.074356193,.077856564,.079052396];function r(t,e){return t.floatTextures||t.halfFloatTextures?`${e}.rgb`:`unpack(${e})`}t.source=t=>`\n            ${rp(t)}\n\n            uniform sampler2D u_Sampler0;\n            varying vec2 v_TextureCoordinate;\n\n            const mat3 yiq2rgb_mat = mat3(\n                1.0, 0.956, 0.6210,\n                1.0, -0.2720, -0.6474,\n                1.0, -1.1060, 1.7046\n            );\n\n            vec3 yiq2rgb(vec3 yiq) {\n                return yiq * yiq2rgb_mat;\n            }\n\n            ${t.floatTextures||t.halfFloatTextures?"":"\n                vec3 unpack(vec4 yiqPacked) {\n                    int y_high = int(yiqPacked.r * 1024.0);\n                    int i_high = int(yiqPacked.g * 1024.0);\n                    int q_high = int(yiqPacked.b * 1024.0);\n                    int alpha = int(yiqPacked.a * 256.0);\n\n                    int y_low = alpha - (alpha / 4) * 4;\n                    int i_low = alpha - y_low - (alpha / 16) * 16;\n                    int q_low = alpha - i_low - y_low;\n\n                    return vec3(\n                        float(y_high + y_low) / 1023.0,\n                        float(i_high + i_low) / 1023.0,\n                        float(q_high + q_low) / 1023.0\n                    ) * 3.4 - 1.2;\n                }\n                "}\n\n            vec3 fetch_offset(int offset) {\n                float x = v_TextureCoordinate.x + float(offset) / 960.0;\n\n                return step(0.0, x) * step(-1.0, -x) *\n                    ${r(t,"texture2D(u_Sampler0, vec2(x, v_TextureCoordinate.y))")};\n            }\n\n            void main() {\n                float one_x = 1.0 / 960.0;\n                vec3 signal = vec3(0.0);\n\n                ${new Array(24).fill(0).map((t,r)=>`\n                signal +=\n                    (fetch_offset(${r-24}) + fetch_offset(${24-r})) *\n                        vec3(${e[r]}, ${n[r]}, ${n[r]});\n                `).join("\n")}\n\n                signal += ${r(t,"texture2D(u_Sampler0, v_TextureCoordinate)")} *\n                    vec3(${e[24]}, ${n[24]}, ${n[24]});\n\n                vec3 rgb = yiq2rgb(signal);\n                gl_FragColor = vec4(rgb, 1.0);\n            }\n        `}(s=t.ntscPass2||(t.ntscPass2={})),function(t){t.source=t=>`\n            ${rp(t)}\n\n            uniform sampler2D u_Sampler0;\n            uniform float u_Level;\n            uniform float u_Height;\n\n            varying vec2 v_TextureCoordinate;\n\n            void main() {\n                vec3 texel = texture2D(u_Sampler0, v_TextureCoordinate).rgb;\n\n                gl_FragColor = vec4(\n                    (step(1.0, mod(v_TextureCoordinate.y * u_Height, 2.0)) * (1.0 - u_Level) + u_Level) * texel, 1.0);\n            }\n        `}(a=t.scanlines||(t.scanlines={}))}(sp||(sp={}));class op{constructor(t,e,n,r){this._gl=t,this._program=e,this._vsh=n,this._fsh=r,this._attributeLocations=new Map,this._uniformLocations=new Map}static compile(t,e,n,r={a_VertexPosition:0}){const i=ap(t,t.VERTEX_SHADER,e),s=ap(t,t.FRAGMENT_SHADER,n),a=t.createProgram();for(const e of Object.keys(r))t.bindAttribLocation(a,r[e],e);if(t.attachShader(a,i),t.attachShader(a,s),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Error(`failed to link program:\n\n${t.getProgramInfoLog(a)}`);return new op(t,a,i,s)}delete(){const t=this._gl;t.deleteProgram(this._program),t.deleteShader(this._vsh),t.deleteShader(this._fsh)}use(){this._gl.useProgram(this._program)}getAttribLocation(t){if(!this._attributeLocations.has(t)){const e=this._gl.getAttribLocation(this._program,t);if(e<0)throw new Error(`invalid attribute ${t}`);this._attributeLocations.set(t,e)}return this._attributeLocations.get(t)}getUniformLocation(t){if(!this._uniformLocations.has(t)){const e=this._gl.getUniformLocation(this._program,t);if(null===e)throw new Error(`invalid uniform ${t}`);this._uniformLocations.set(t,e)}return this._uniformLocations.get(t)}bindVertexAttribArray(t,e,n,r,i,s,a){const o=this._gl;o.bindBuffer(o.ARRAY_BUFFER,e),o.vertexAttribPointer(this.getAttribLocation(t),n,r,i,s,a),o.enableVertexAttribArray(this.getAttribLocation(t))}uniform1i(t,e){this._gl.uniform1i(this.getUniformLocation(t),e)}uniform1f(t,e){this._gl.uniform1f(this.getUniformLocation(t),e)}}class up{constructor(t,e){this._gl=t,this._capabilities=e,this._width=0,this._height=0,this._texture0=null,this._texture1=null,this._framebuffer=null,this._program=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._initialized=!1}init(){if(this._initialized)return;const t=this._gl;this._framebuffer=t.createFramebuffer(),this._program=op.compile(t,ip.plain.source(this._capabilities),sp.phosphor.source(this._capabilities)),this._program.use(),this._program.uniform1i("u_Sampler_NewImage",0),this._program.uniform1i("u_Sampler_PreviousImage",1),this._vertexCoordinateBuffer=t.createBuffer(),this._textureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW),this._initialized=!0}destroy(){if(!this._initialized)return;const t=this._gl;this._program.delete(),t.deleteFramebuffer(this._framebuffer),t.deleteBuffer(this._vertexCoordinateBuffer),t.deleteBuffer(this._textureCoordinateBuffer),this._texture0&&t.deleteTexture(this._texture0),this._texture1&&t.deleteTexture(this._texture1),this._initialized=!1}render(t){const e=this._gl;this._program.use(),this._program.bindVertexAttribArray("a_VertexPosition",this._vertexCoordinateBuffer,2,e.FLOAT,!1,0,0),this._program.bindVertexAttribArray("a_TextureCoordinate",this._textureCoordinateBuffer,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this._texture0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture1,0),e.viewport(0,0,this._width,this._height),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4);const n=this._texture1;this._texture1=this._texture0,this._texture0=n}getWidth(){return this._width}getHeight(){return this._height}getTexture(){return this._texture0}resize(t,e){if(!this._initialized)return;this._width=t,this._height=e;const n=this._gl;this._texture0&&n.deleteTexture(this._texture0),this._texture1&&n.deleteTexture(this._texture1),this._texture0=n.createTexture(),this._texture1=n.createTexture(),n.bindFramebuffer(n.FRAMEBUFFER,this._framebuffer),n.viewport(0,0,t,e),n.clearColor(0,0,0,1),n.activeTexture(n.TEXTURE0);for(const r of[this._texture0,this._texture1])n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0),n.clear(n.COLOR_BUFFER_BIT)}configure(t){this._initialized&&(this._program.use(),this._program.uniform1f("u_PhosphorLevel",t))}}class cp{constructor(t,e){this._gl=t,this._capabilities=e,this._height=0,this._programPass1=null,this._programPass2=null,this._targetPass1=null,this._targetPass2=null,this._framebuffer=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._initialized=!1}init(){if(this._initialized)return;const t=this._gl;t.getExtension("WEBGL_color_buffer_float"),t.getExtension("OES_texture_float"),this._programPass1=op.compile(t,ip.plain.source(this._capabilities),sp.ntscPass1.source(this._capabilities)),this._programPass2=op.compile(t,ip.plain.source(this._capabilities),sp.ntscPass2.source(this._capabilities)),this._programPass1.use(),this._programPass1.uniform1i("u_Sampler0",0),this._programPass2.use(),this._programPass2.uniform1i("u_Sampler0",0),this._framebuffer=t.createFramebuffer(),this._vertexCoordinateBuffer=t.createBuffer(),this._textureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW),this._initialized=!0}destroy(){if(!this._initialized)return;const t=this._gl;this._programPass1.delete(),this._programPass2.delete(),t.deleteFramebuffer(this._framebuffer),t.deleteTexture(this._targetPass1),t.deleteTexture(this._targetPass2),t.deleteBuffer(this._vertexCoordinateBuffer),t.deleteBuffer(this._textureCoordinateBuffer),this._initialized=!1}render(t){this._pass(t,this._targetPass1,this._programPass1,960),this._pass(this._targetPass1,this._targetPass2,this._programPass2,480)}getWidth(){return 480}getHeight(){return this._height}getTexture(){return this._targetPass2}resize(t,e){if(!this._initialized)return;if(160!==t)throw new Error("NTSC postprocessor supports only for width = 160");this._height=e;const n=this._gl;this._targetPass1&&n.deleteTexture(this._targetPass1),this._targetPass2&&n.deleteTexture(this._targetPass2),this._targetPass1=n.createTexture(),this._targetPass2=n.createTexture(),n.activeTexture(n.TEXTURE0);for(const t of[this._targetPass1,this._targetPass2])n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t===this._targetPass1?960:480,e,0,n.RGBA,t===this._targetPass1?this._textureType():n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)}configure(t){this._initialized&&(this._programPass1.use(),"composite"===t?(this._programPass1.uniform1f("u_Artifacting",1),this._programPass1.uniform1f("u_Fringing",1)):(this._programPass1.uniform1f("u_Artifacting",0),this._programPass1.uniform1f("u_Fringing",0)))}_pass(t,e,n,r){const i=this._gl;n.use(),n.bindVertexAttribArray("a_VertexPosition",this._vertexCoordinateBuffer,2,i.FLOAT,!1,0,0),n.bindVertexAttribArray("a_TextureCoordinate",this._textureCoordinateBuffer,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,this._framebuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0),i.viewport(0,0,r,this._height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_STRIP,0,4)}_textureType(){const t=this._gl;return this._capabilities.floatTextures?t.FLOAT:this._capabilities.halfFloatTextures?t.getExtension("OES_texture_half_float").HALF_FLOAT_OES:t.UNSIGNED_BYTE}}class hp{constructor(t,e){this._gl=t,this._capabilities=e,this._width=0,this._height=0,this._texture=null,this._program=null,this._framebuffer=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._initialized=!1}init(){if(this._initialized)return;const t=this._gl;this._framebuffer=t.createFramebuffer(),this._program=op.compile(t,ip.plain.source(this._capabilities),sp.scanlines.source(this._capabilities)),this._program.use(),this._program.uniform1i("u_Sampler0",0),this._vertexCoordinateBuffer=t.createBuffer(),this._textureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW),this._initialized=!0}destroy(){if(!this._initialized)return;const t=this._gl;this._program.delete(),t.deleteFramebuffer(this._framebuffer),t.deleteBuffer(this._vertexCoordinateBuffer),t.deleteBuffer(this._textureCoordinateBuffer),this._texture&&t.deleteTexture(this._texture),this._initialized=!1}render(t){const e=this._gl;this._program.use(),this._program.bindVertexAttribArray("a_VertexPosition",this._vertexCoordinateBuffer,2,e.FLOAT,!1,0,0),this._program.bindVertexAttribArray("a_TextureCoordinate",this._textureCoordinateBuffer,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),e.viewport(0,0,this._width,2*this._height),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4)}getWidth(){return this._width}getHeight(){return 2*this._height}getTexture(){return this._texture}resize(t,e){if(!this._initialized)return;this._width=t,this._height=e;const n=this._gl;this._texture&&n.deleteTexture(this._texture),this._texture=n.createTexture(),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this._texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,2*e,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),this._program.use(),this._program.uniform1f("u_Height",2*this._height)}configure(t){this._initialized&&(this._program.use(),this._program.uniform1f("u_Level",1-t))}}class lp{constructor(t,e){this._gl=t,this._capabilities=e,this._width=0,this._height=0,this._widthFrom=0,this._heightFrom=0,this._widthTo=0,this._heightTo=0,this._texture=null,this._program=null,this._framebuffer=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._initialized=!1}init(){if(this._initialized)return;const t=this._gl;this._framebuffer=t.createFramebuffer(),this._program=op.compile(t,ip.plain.source(this._capabilities),sp.blit.source(this._capabilities)),this._program.use(),this._program.uniform1i("u_Sampler0",0),this._vertexCoordinateBuffer=t.createBuffer(),this._textureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW),this._initialized=!0}destroy(){if(!this._initialized)return;const t=this._gl;this._program.delete(),t.deleteFramebuffer(this._framebuffer),t.deleteBuffer(this._vertexCoordinateBuffer),t.deleteBuffer(this._textureCoordinateBuffer),this._texture&&t.deleteTexture(this._texture),this._initialized=!1}render(t){const e=this._gl;this._program.use(),this._program.bindVertexAttribArray("a_VertexPosition",this._vertexCoordinateBuffer,2,e.FLOAT,!1,0,0),this._program.bindVertexAttribArray("a_TextureCoordinate",this._textureCoordinateBuffer,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),e.viewport(0,0,this._width,this._height),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4)}getWidth(){return this._width}getHeight(){return this._height}getTexture(){return this._texture}resize(t,e){this._widthFrom=t,this._heightFrom=e,this._reconfigure()}configure(t,e){this._widthTo=t,this._heightTo=e,this._reconfigure()}_reconfigure(){if(this._widthFrom<=0||this._heightFrom<=0||this._widthTo<=0||this._heightTo<=0||!this._initialized)return;this._width=this._widthTo>this._widthFrom?Math.floor(this._widthTo/this._widthFrom)*this._widthFrom:this._widthFrom,this._height=this._heightTo>this._heightFrom?Math.floor(this._heightTo/this._heightFrom)*this._heightFrom:this._heightFrom;const t=this._gl;this._texture&&t.deleteTexture(this._texture),this._texture=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this._width,this._height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}}class fp{constructor(t){this._capacity=t,this.evict=new Ao,this._size=0,this._index=0,this._buffer=new Array(this._capacity);for(let t=0;t<this._capacity;t++)this._buffer[t]=null}size(){return this._size}pop(){if(0===this._size)return;const t=this._buffer[this._index];return this._buffer[this._index]=null,this._index=(this._index+1)%this._capacity,this._size--,t}push(t){return this._size===this._capacity&&this.evict.dispatch(this.pop()),this._buffer[(this._index+this._size++)%this._capacity]=t,this}forEach(t){for(let e=0;e<this._size;e++)t(this._buffer[(this._index+e)%this._capacity]);return this}clear(){for(let t=0;t<this._capacity;t++)this._buffer[t]=null;return this._size=0,this._index=0,this}capacity(){return this._capacity}}function dp(t,e){const n=t.createTexture(),r=t.createFramebuffer();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,64,64,0,t.RGBA,e,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.deleteFramebuffer(r),t.deleteTexture(n),i===t.FRAMEBUFFER_COMPLETE}function pp(t){return t.getExtension("WEBGL_color_buffer_float"),!!t.getExtension("OES_texture_float")&&dp(t,t.FLOAT)}function _p(t){t.getExtension("EXT_color_buffer_half_float");const e=t.getExtension("OES_texture_half_float");return!!e&&dp(t,e.HALF_FLOAT_OES)}function gp(t,e,n){const r=t.getShaderPrecisionFormat(e,n);return!!r&&r.precision>0}function bp(t=null){if(!t){const e=document.createElement("canvas");e.width=64,e.height=64,t=e.getContext("webgl")||e.getContext("experimental-webgl")}return t?{floatTextures:pp(t),halfFloatTextures:_p(t),highpInFsh:gp(t,t.FRAGMENT_SHADER,t.HIGH_FLOAT),highpInVsh:gp(t,t.VERTEX_SHADER,t.HIGH_FLOAT)}:null}class vp{constructor(t,e={}){this._canvas=t,this._onContextLost=t=>{t.preventDefault(),this._gl=null,this._mainProgram=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._sourceTexture=null,this._phosphorProcessor=null,this._ntscProcessor=null,this._integerScalingProcessor=null,this._scanlineProcessor=null,this._processors=[]},this._onContextRestored=()=>{this._getRenderingContext(),this.init()},this._config=null,this._gl=null,this._video=null,this._capabilities=null,this._mainProgram=null,this._vertexCoordinateBuffer=null,this._textureCoordinateBuffer=null,this._sourceTexture=null,this._anmiationFrameHandle=0,this._phosphorProcessor=null,this._ntscProcessor=null,this._scanlineProcessor=null,this._integerScalingProcessor=null,this._processors=[],this._pendingFrames=new fp(3),this._consecutiveUnderflows=0,this._hasFrame=!1;this._config=Object.assign(Object.assign({},{gamma:1,scalingMode:"qis",phosphorLevel:.5,scanlineLevel:.2,tvEmulation:"composite"}),e),this._getRenderingContext(),this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._pendingFrames.evict.addHandler(t=>t.release())}init(){return this._gl?(this._phosphorProcessor=new up(this._gl,this._capabilities),this._ntscProcessor=new cp(this._gl,this._capabilities),this._scanlineProcessor=new hp(this._gl,this._capabilities),this._integerScalingProcessor=new lp(this._gl,this._capabilities),this._updateCanvasSize(),this._mainProgram=op.compile(this._gl,ip.plain.source(this._capabilities),sp.blitWithGamma.source(this._capabilities)),this._mainProgram.use(),this._mainProgram.uniform1i("u_Sampler0",0),this._createVertexCoordinateBuffer(),this._createTextureCoordinateBuffer(),this._configureSourceTexture(),this._applyConfiguration(),this):this}close(){const t=this._gl;if(this._cancelDraw(),this.unbind(),t)return this._mainProgram.delete(),t.deleteBuffer(this._vertexCoordinateBuffer),t.deleteBuffer(this._textureCoordinateBuffer),t.deleteTexture(this._sourceTexture),this._ntscProcessor.destroy(),this._phosphorProcessor.destroy(),this._scanlineProcessor.destroy(),this._integerScalingProcessor.destroy(),this;this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._pendingFrames.forEach(t=>t.release())}resize(t,e){return this._updateCanvasSize(t,e),this._updateVertexBuffer(),this._video&&(this._configureProcessors(),this._scheduleDraw()),this._hasFrame&&this._draw(),this}getCanvas(){return this._canvas}bind(t){return this._video?this:(this._video=t,this._video.newFrame.addHandler(vp._frameHandler,this),this._configureProcessors(),this._scheduleDraw(),this)}unbind(){return this._video?(this._cancelDraw(),this._video.newFrame.removeHandler(vp._frameHandler,this),this._video=null,this._pendingFrames.forEach(t=>t.release()),this._pendingFrames.clear(),this):this}getConfig(){return this._config}updateConfig(t){return this}static _frameHandler(t,e){e._pendingFrames.size()===e._pendingFrames.capacity()&&(e._pendingFrames.forEach(t=>t.release()),e._pendingFrames.clear()),e._pendingFrames.push(t),e._scheduleDraw()}_getRenderingContext(){const t={alpha:!1,depth:!1,antialias:!1};if(this._gl=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t),!this._gl)throw new Error("unable to acquire webgl context");this._capabilities=bp(this._gl)}_scheduleDraw(){0===this._anmiationFrameHandle&&(this._anmiationFrameHandle=requestAnimationFrame(()=>this._onAnimationFrame()))}_cancelDraw(){0!==this._anmiationFrameHandle&&cancelAnimationFrame(this._anmiationFrameHandle),this._anmiationFrameHandle=0}_onAnimationFrame(){const t=this._gl;if(this._anmiationFrameHandle=0,0===this._pendingFrames.size())return void(this._consecutiveUnderflows++<=5&&this._scheduleDraw());this._consecutiveUnderflows=0,this._scheduleDraw();const e=this._pendingFrames.pop();t&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._sourceTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.get()),e.release(),this._hasFrame=!0,this._draw())}_draw(){if(!this._gl)return;const t=this._gl;let e=this._sourceTexture;for(const t of this._processors)t.render(e),e=t.getTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,"none"===this._config.scalingMode?t.NEAREST:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,"none"===this._config.scalingMode?t.NEAREST:t.LINEAR),this._mainProgram.use(),this._mainProgram.bindVertexAttribArray("a_VertexPosition",this._vertexCoordinateBuffer,2,t.FLOAT,!1,0,0),this._mainProgram.bindVertexAttribArray("a_TextureCoordinate",this._textureCoordinateBuffer,2,t.FLOAT,!1,0,0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_STRIP,0,4)}_createVertexCoordinateBuffer(){if(!this._gl)return;const t=this._gl,e=t.drawingBufferWidth,n=t.drawingBufferHeight,r=e>0?2/e:1,i=n>0?2/n:1;let s,a,o,u;4/3*n<=e?(a=2,s=4/3*n*r,u=1,o=Math.floor(-4/3*n)/2*r):(a=e/(4/3)*i,s=2,u=Math.floor(e/(4/3))/2*i,o=-1);const c=[o+s,u,o,u,o+s,u-a,o,u-a];this._vertexCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW)}_updateVertexBuffer(){this._gl&&(this._gl.deleteBuffer(this._vertexCoordinateBuffer),this._createVertexCoordinateBuffer())}_createTextureCoordinateBuffer(){if(!this._gl)return;const t=this._gl;this._textureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW)}_updateCanvasSize(t,e){void 0!==t&&void 0!==e||(t=this.getCanvas().clientWidth,e=this.getCanvas().clientHeight);const n=window.devicePixelRatio||1;this.getCanvas().width=t*n,this.getCanvas().height=e*n}_configureSourceTexture(){if(!this._gl)return;const t=this._gl;this._sourceTexture||(this._sourceTexture=t.createTexture()),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._sourceTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1)}_configureProcessors(){if(!this._video||!this._gl)return;switch(this._phosphorProcessor.configure(this._config.phosphorLevel),this._scanlineProcessor.configure(this._config.scanlineLevel),this._integerScalingProcessor.configure(this._gl.drawingBufferWidth,this._gl.drawingBufferHeight),this._config.tvEmulation){case"composite":this._ntscProcessor.configure("composite");break;case"svideo":this._ntscProcessor.configure("svideo")}let t=this._video.getWidth(),e=this._video.getHeight();for(const n of this._processors)n.resize(t,e),t=n.getWidth(),e=n.getHeight()}_applyConfiguration(){this._gl&&(this._mainProgram.use(),this._mainProgram.uniform1f("u_Gamma",this._config.gamma),this._processors=[],"none"!==this._config.tvEmulation&&(this._ntscProcessor.init(),this._processors.push(this._ntscProcessor)),this._config.phosphorLevel>0&&(this._phosphorProcessor.init(),this._processors.push(this._phosphorProcessor)),this._config.scanlineLevel>0&&(this._scanlineProcessor.init(),this._processors.push(this._scanlineProcessor)),"qis"===this._config.scalingMode&&(this._integerScalingProcessor.init(),this._processors.push(this._integerScalingProcessor)),this._configureProcessors())}}function mp(t){return{type:0,swtch:t}}function yp(t){return{type:1,trigger:t}}class wp{constructor(t,e=wp.defaultMappings){this._target=t,this.toggleFullscreen=new Ao,this.hardReset=new Ao,this.togglePause=new Ao,this._keydownListener=null,this._keyupListener=null,this._joystick0=null,this._joystick1=null,this._controlPanel=null,this._dispatchTable={},this._compiledMappings=new Map,this._compileMappings(e)}bind(t,e,n){this._joystick0||(this._joystick0=t,this._joystick1=e,this._controlPanel=n,this._updateActionTable(),this._keydownListener=t=>{if(!this._compiledMappings.has(t.keyCode))return;const e=(t.shiftKey?4:0)|(t.ctrlKey?1:0)|(t.altKey?2:0);if(!this._compiledMappings.get(t.keyCode).has(e))return;const n=this._compiledMappings.get(t.keyCode).get(e);if(void 0!==n){t.preventDefault();const e=this._dispatchTable[n];switch(e.type){case 0:e.swtch.toggle(!0);break;case 1:e.trigger.dispatch(void 0)}}},this._keyupListener=t=>{if(this._compiledMappings.has(t.keyCode))for(const e of this._compiledMappings.get(t.keyCode).values()){t.preventDefault();const n=this._dispatchTable[e];switch(n.type){case 0:n.swtch.toggle(!1)}}},this._target.addEventListener("keydown",this._keydownListener),this._target.addEventListener("keyup",this._keyupListener))}unbind(){this._joystick0&&(this._target.removeEventListener("keydown",this._keydownListener),this._target.removeEventListener("keyup",this._keyupListener),this._joystick0=this._joystick1=this._controlPanel=null,this._keydownListener=this._keyupListener=null)}_updateActionTable(){this._dispatchTable[12]=yp(this.toggleFullscreen),this._dispatchTable[13]=yp(this.hardReset),this._dispatchTable[14]=yp(this.togglePause),this._dispatchTable[0]=mp(this._controlPanel.getSelectSwitch()),this._dispatchTable[1]=mp(this._controlPanel.getResetButton()),this._dispatchTable[2]=mp(this._joystick0.getLeft()),this._dispatchTable[3]=mp(this._joystick0.getRight()),this._dispatchTable[4]=mp(this._joystick0.getUp()),this._dispatchTable[5]=mp(this._joystick0.getDown()),this._dispatchTable[10]=mp(this._joystick0.getFire()),this._dispatchTable[6]=mp(this._joystick1.getLeft()),this._dispatchTable[7]=mp(this._joystick1.getRight()),this._dispatchTable[8]=mp(this._joystick1.getUp()),this._dispatchTable[9]=mp(this._joystick1.getDown()),this._dispatchTable[11]=mp(this._joystick1.getFire())}_compileMappings(t){const e=(t,e,n)=>{if(0!=(-8&n))throw new Error(`invalid modifier set ${n}`);this._compiledMappings.has(e)||this._compiledMappings.set(e,new Map),this._compiledMappings.get(e).set(n,t)};t.forEach(t=>{const n=t.action;(Array.isArray(t.spec)?t.spec:[t.spec]).forEach(t=>e(n,"object"==typeof t?t.keycode:t,"object"==typeof t?t.modifiers:0))})}}!function(t){t.defaultMappings=[{action:0,spec:{keycode:32,modifiers:4}},{action:1,spec:{keycode:13,modifiers:4}},{action:2,spec:[65,37]},{action:3,spec:[68,39]},{action:4,spec:[87,38]},{action:5,spec:[83,40]},{action:10,spec:[32,86]},{action:6,spec:74},{action:7,spec:76},{action:8,spec:73},{action:9,spec:75},{action:11,spec:66},{action:12,spec:13},{action:13,spec:{keycode:82,modifiers:4}},{action:14,spec:80}]}(wp||(wp={}));class Ap{constructor(t){this._cache=t,this._context=null,this._source=null,this._gain=null,this._audio=null,this._volume=0,this._masterVolume=1}init(t,e){this._context=t,this._gain=this._context.createGain(),this._gain.connect(e)}bind(t){this._audio||(this._audio=t,this._volume=this._audio.getVolume(),this._updateGain(),this._audio.volumeChanged.addHandler(Ap._onVolumeChanged,this),this._audio.bufferChanged.addHandler(Ap._onBufferChanged,this),this._audio.stop.addHandler(Ap._onStop,this))}unbind(){this._audio&&(this._audio.volumeChanged.removeHandler(Ap._onVolumeChanged,this),this._audio.bufferChanged.removeHandler(Ap._onBufferChanged,this),this._audio.stop.removeHandler(Ap._onStop,this),this._source&&(this._source.stop(),this._source=null),this._audio=null)}setMasterVolume(t){this._masterVolume=t,this._updateGain()}static _onVolumeChanged(t,e){e._volume=t,e._updateGain()}static _onBufferChanged(t,e){if(!e._cache.has(t)){const n=e._audio.getBuffer(t),r=e._context.createBuffer(1,n.getLength(),n.getSampleRate());r.getChannelData(0).set(n.getContent()),e._cache.set(t,r)}const n=e._cache.get(t),r=e._context.createBufferSource();e._source&&e._source.stop(),r.loop=!0,r.buffer=n,r.connect(e._gain),r.start(),e._source=r}static _onStop(t,e){e._source&&(e._source.stop(),e._source=null)}_updateGain(){this._gain.gain.value=this._volume*this._masterVolume}}class kp{constructor(){this._buffer=new Float32Array(2),this._fractionalIndex=0,this._needsData=!1,this._ratio=0,this.reset(1,1)}reset(t,e){this._ratio=t/e,this._needsData=!1,this._fractionalIndex=0;for(let t=0;t<2;t++)this._buffer[t]=0}get(){const t=(1-this._fractionalIndex)*this._buffer[0]+this._fractionalIndex*this._buffer[1];return this._fractionalIndex+=this._ratio,this._fractionalIndex>1&&(this._fractionalIndex-=1,this._needsData=!0),t}push(t){this._buffer[0]=this._buffer[1],this._buffer[1]=t,this._needsData=!1}needsData(){return this._needsData}}class Ep{constructor(t=1024){this._hostFragmentSize=t,this._outputSampleRate=0,this._bufferSize=0,this._volume=1,this._gain=null,this._processor=null,this._bufferUnderrun=!1,this._fragmentRing=null,this._fragmentSize=0,this._inputSampleRate=0,this._fragmentIndex=0,this._currentFragment=null,this._lastFragment=null,this._resampler=new kp}init(t,e){this._outputSampleRate=t.sampleRate,this._gain=t.createGain(),this._gain.gain.value=this._volume,this._gain.connect(e),this._processor=t.createScriptProcessor(this._hostFragmentSize,1,1),this._bufferSize=this._processor.bufferSize,this._processor.connect(this._gain),this._processor.onaudioprocess=t=>this._processAudio(t),t.createBuffer(1,1,t.sampleRate).getChannelData(0).set([0])}bind(t){this.unbind(),this._audio=t,this._fragmentSize=t.getFrameSize(),this._inputSampleRate=t.getSampleRate(),this._fragmentIndex=0,this._lastFragment=null,this._bufferUnderrun=!0,this._fragmentRing=new fp(Math.ceil(4*this._bufferSize/this._outputSampleRate/this._fragmentSize*this._inputSampleRate)),this._fragmentRing.evict.addHandler(t=>t.release()),this._audio.newFrame.addHandler(Ep._onNewFragment,this),this._resampler.reset(this._inputSampleRate,this._outputSampleRate)}unbind(){this._audio&&(this._audio.newFrame.removeHandler(Ep._onNewFragment,this),this._lastFragment&&(this._lastFragment.release(),this._lastFragment=null),this._currentFragment&&(this._currentFragment.release(),this._currentFragment=null),this._fragmentRing&&(this._fragmentRing.forEach(t=>t.release()),this._fragmentRing.clear(),this._fragmentRing=null))}setMasterVolume(t){this._volume=t}static _onNewFragment(t,e){e._fragmentRing.push(t),e._currentFragment||(e._currentFragment=e._fragmentRing.pop(),e._fragmentIndex=0)}_processAudio(t){if(!this._audio)return;const e=t.outputBuffer.getChannelData(0);let n=0;const r=t=>{const r=this._lastFragment&&this._lastFragment.get();for(;n<t;)this._resampler.needsData()&&(this._resampler.push(this._audio&&this._audio.isPaused()||!r?0:r[this._fragmentIndex++]*this._volume),this._fragmentIndex>=this._fragmentSize&&(this._fragmentIndex=0)),e[n++]=this._resampler.get()};this._currentFragment&&this._bufferUnderrun&&(r(this._bufferSize>>>1),this._bufferUnderrun=!1);let i=this._currentFragment&&this._currentFragment.get();for(;n<this._bufferSize&&this._currentFragment;)this._resampler.needsData()&&(this._resampler.push(i[this._fragmentIndex++]*this._volume),this._fragmentIndex>=this._fragmentSize&&(this._fragmentIndex=0,this._lastFragment&&this._lastFragment.release(),this._lastFragment=this._currentFragment,this._currentFragment=this._fragmentRing.pop(),i=this._currentFragment&&this._currentFragment.get())),e[n++]=this._resampler.get();n<this._bufferSize&&(this._bufferUnderrun=!0),r(this._bufferSize)}}const xp="safari"in window,Tp=!!navigator.platform.match(/iPhone|iPad|iPod/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,Cp=Tp||xp,Sp=["touchstart","click","keydown"],Rp=window.AudioContext||window.webkitAudioContext;function Ip(t,e=500){return new Promise(n=>{t.then(()=>n()),setTimeout(n,e)})}class Bp{constructor(){if(this._interactionListener=()=>{const t=this.context;this.interactionRequired=!1,Sp.forEach(t=>document.removeEventListener(t,this._interactionListener)),this.mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){return yield Ip(t.resume()),new Promise(e=>setTimeout(()=>a(this,void 0,void 0,(function*(){yield Ip(t.suspend()),e()})),100))})))},this.mutex=new Qh,this.context=null,this.interactionRequired=!0,Rp){this.context=new Rp;try{this.context.destination.channelCount=1}catch(t){console.warn("audio driver: failed to set channel count")}Sp.forEach(t=>document.addEventListener(t,this._interactionListener))}}stopListening(){Sp.forEach(t=>document.removeEventListener(t,this._interactionListener))}}let Pp=Cp?new Bp:null;class Op{constructor(t=0,e=0,n){this._touchListener=()=>{Sp.forEach(t=>document.removeEventListener(t,this._touchListener,!0)),this._context&&(this._context.resume(),setTimeout(()=>{this._mutex.runExclusive(()=>this._suspended?this._context.suspend():this._context.resume())},10))},this._context=null,this._merger=null,this._waveformChannels=null,this._pcmChannels=null,this._channels=null,this._cache=new Map,this._mutex=new Qh,this._suspended=!0,this._isBound=!1,this._waveformChannels=new Array(t),this._pcmChannels=new Array(e);for(let e=0;e<t;e++)this._waveformChannels[e]=new Ap(this._cache);for(let t=0;t<e;t++)this._pcmChannels[t]=new Ep(n);this._channels=[...this._waveformChannels,...this._pcmChannels]}init(){if(Pp){const t=Pp;Pp=new Bp,this._context=t.context,t.stopListening(),this._mutex=t.mutex,t.interactionRequired&&Sp.forEach(t=>document.addEventListener(t,this._touchListener,!0))}else{if(!Rp)throw new Error("web audio is not supported by runtime");this._context=new Rp;try{this._context.destination.channelCount=1}catch(t){console.warn("audio driver: failed to set channel count")}}this._merger=this._context.createChannelMerger(this._channels.length),this._merger.connect(this._context.destination),this._channels.forEach(t=>t.init(this._context,this._merger))}bind(t=[],e=[]){if(!this._isBound){if(t.length!==this._waveformChannels.length)throw new Error(`invalid number of waveform sources: expected ${this._waveformChannels.length}, got ${t.length}`);if(e.length!==this._pcmChannels.length)throw new Error(`invalid number of waveform sources: expected ${this._pcmChannels.length}, got ${e.length}`);this._waveformChannels.forEach((e,n)=>e.bind(t[n])),this._pcmChannels.forEach((t,n)=>t.bind(e[n])),this._isBound=!0,this.resume()}}unbind(){this._isBound&&(this._channels.forEach(t=>t.unbind()),this._isBound=!1,this.pause())}setMasterVolume(t,e){this._channels[t].setMasterVolume(e)}pause(){return this._mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){this._suspended||(this._suspended=!0,yield Ip(this._context.suspend()))})))}resume(){return this._mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){this._suspended&&(this._suspended=!1,yield Ip(this._context.resume()))})))}close(){this._mutex.runExclusive(()=>this._context.close())}}class Dp{constructor(t){this._fragmentSize=t,this._pcmAudio=!1,this._volume=1}init(){}bind(t,e){if(!this._channels){this._channels=[...e],this._driver&&this._pcmAudio===t||(this._driver&&this._driver.close(),this._driver=t?new Op(0,this._channels.length,this._fragmentSize):new Op(this._channels.length,0,this._fragmentSize),this._driver.init()),t?this._driver.bind([],this._channels):this._driver.bind(this._channels,[]);for(let t=0;t<this._channels.length;t++)this._driver.setMasterVolume(t,this._volume);this._pcmAudio=t}}unbind(){this._channels&&(this._driver.unbind(),this._channels=null)}setMasterVolume(t){if(this._volume=t,this._channels)for(let t=0;t<this._channels.length;t++)this._driver.setMasterVolume(t,this._volume)}getMasterVolume(){return this._volume}pause(){return a(this,void 0,void 0,(function*(){this._driver&&(yield this._driver.pause())}))}resume(){return a(this,void 0,void 0,(function*(){this._driver&&(yield this._driver.resume())}))}}var Mp=U((function(t){
/*!
    * screenfull
    * v5.0.1 - 2020-01-19
    * (c) Sindre Sorhus; MIT License
    */
!function(){var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=t.exports,r=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,s={};r<i;r++)if((t=n[r])&&t[1]in e){for(r=0;r<t.length;r++)s[n[0][r]]=t[r];return s}return!1}(),i={change:r.fullscreenchange,error:r.fullscreenerror},s={request:function(t){return new Promise(function(n,i){var s=function(){this.off("change",s),n()}.bind(this);this.on("change",s),t=t||e.documentElement,Promise.resolve(t[r.requestFullscreen]()).catch(i)}.bind(this))},exit:function(){return new Promise(function(t,n){if(this.isFullscreen){var i=function(){this.off("change",i),t()}.bind(this);this.on("change",i),Promise.resolve(e[r.exitFullscreen]()).catch(n)}else t()}.bind(this))},toggle:function(t){return this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,n){var r=i[t];r&&e.addEventListener(r,n,!1)},off:function(t,n){var r=i[t];r&&e.removeEventListener(r,n,!1)},raw:r};r?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(e[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(e[r.fullscreenEnabled])}}}),n?t.exports=s:window.screenfull=s):n?t.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()}));Mp.isEnabled;const Fp=Tp,Lp=Mp;class Np{constructor(t,e=1e5,n="stellerator-fullscreen"){this._videoDriver=t,this._zIndex=e,this._fullscreenClass=n,this._resizeListener=()=>{this._resizeHandle||(this._resizeHandle=setTimeout(()=>{this._resizeHandle=null,this._adjustSizeForFullscreen()},100))},this._resizeHandle=null,this._changeListener=this._onChange.bind(this),this._engaged=!1}engage(){this._engaged||(this._engaged=!0,Fp||!Lp?(this._adjustSizeForFullscreen(),window.addEventListener("resize",this._resizeListener),this._engaged=!0):(Lp.on("change",this._changeListener),Lp.request(this._videoDriver.getCanvas())))}disengage(){this._engaged&&(Fp||!Lp?(this._resetSize(),window.removeEventListener("resize",this._resizeListener),this._engaged=!1):Lp.exit())}toggle(){this._engaged?this.disengage():this.engage()}isEngaged(){return this._engaged}_onChange(){Lp&&(Lp.isFullscreen?(window.addEventListener("resize",this._resizeListener),this._adjustSizeForFullscreen()):(this._resetSize(),window.removeEventListener("resize",this._resizeListener),Lp.off("change",this._changeListener),this._engaged=!1))}_resetSize(){const t=this._videoDriver.getCanvas();this._resizeHandle&&(clearTimeout(this._resizeHandle),this._resizeHandle=null),t.style.width="",t.style.height="",t.style.maxWidth="",t.style.maxHeight="",Fp&&(t.style.position="",t.style.top="",t.style.left="",t.style.zIndex=""),document.body.classList.remove(this._fullscreenClass),setTimeout(()=>this._videoDriver.resize(),0)}_adjustSizeForFullscreen(){const t=this._videoDriver.getCanvas();this._videoDriver.resize(window.innerWidth,window.innerHeight),t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",t.style.maxWidth=window.innerWidth+"px",t.style.maxHeight=window.innerHeight+"px",Fp&&(t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.zIndex=""+this._zIndex),document.body.classList.add(this._fullscreenClass)}}class jp{constructor(t=500,e=200){this._maxTapLength=t,this._timeout=e,this.trigger=new Ao,this._dispatch=!1,this._touching=!1,this._lastTouchEligible=!1,this._lastTouchStart=0,this._lastTouchEnd=0}startTouch(){this._lastTouchStart=Date.now(),this._touching||(this._touching=!0,this._dispatch=this._lastTouchEligible&&this._lastTouchStart-this._lastTouchEnd<this._timeout)}endTouch(){this._lastTouchEnd=Date.now(),this._dispatch&&(this._dispatch=!1,this.trigger.dispatch(void 0)),this._touching&&(this._touching=!1,this._lastTouchEligible=this._lastTouchStart-this._lastTouchEnd<this._maxTapLength)}cancelTouch(){this.endTouch(),this._lastTouchEligible=!1}isDispatching(){return this._dispatch}}class Up{constructor(t,e=15,n=!1){this._canvas=t,this._joystickSensitivity=e,this._leftHanded=n,this._onTouchStart=t=>{for(let e=0;e<t.changedTouches.length;e++){const n=new zp(t.changedTouches.item(e),this._canvas),r=n.touch.identifier;if((this._leftHanded?n.x>.5:n.x<=.5)?n.y<=.5?n.type="alt":n.type=this._isAlt?"pause":"fire":n.y<=.5?n.type=this._isAlt?"select":"joystick":n.type=this._isAlt?"reset":"joystick",!this._pendingTouches.has(r)&&!this._pendingTouches.has(n.type))switch(this._pendingTouches.set(r,n),this._pendingTouches.set(n.type,n),n.type){case"alt":this._isAlt=!0,this._fullscreenDoubleTapDetector.startTouch();break;case"fire":this._joystick.getFire().toggle(!0);break;case"pause":this.togglePause.dispatch(void 0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"select":this._select.toggle(!0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"reset":this._reset.toggle(!0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"joystick":break;default:throw new Error("invalid touch type")}}t.preventDefault()},this._onTouchEnd=t=>{for(let e=0;e<t.changedTouches.length;e++){const n=this._pendingTouches.get(t.changedTouches.item(e).identifier);if(n){switch(n.type){case"alt":this._isAlt=!1,this._fullscreenDoubleTapDetector.endTouch();break;case"fire":this._joystick.getFire().toggle(!1);break;case"select":this._select.toggle(!1);break;case"reset":this._reset.toggle(!1);break;case"joystick":this._joystick.getDown().toggle(!1),this._joystick.getUp().toggle(!1),this._joystick.getLeft().toggle(!1),this._joystick.getRight().toggle(!1);break;case"pause":break;default:throw new Error("invalid touch type")}this._pendingTouches.delete(n.type),this._pendingTouches.delete(n.touch.identifier)}}t.preventDefault()},this._onTouchMove=t=>{for(let e=0;e<t.changedTouches.length;e++){const n=t.changedTouches.item(e),r=this._pendingTouches.get(n.identifier);if(!r)continue;if("joystick"!==r.type)continue;const i=n.clientX-r.x0,s=n.clientY-r.y0,a=Math.sqrt(i*i+s*s),o=Math.abs(s/a),u=Math.abs(i/a),c=a>this._joystickSensitivity;this._joystick.getLeft().toggle(c&&i<0&&u>.5),this._joystick.getRight().toggle(c&&i>0&&u>.5),this._joystick.getUp().toggle(c&&s<0&&o>.5),this._joystick.getDown().toggle(c&&s>0&&o>.5),a>3*this._joystickSensitivity&&(r.x0+=i/a*(a-3*this._joystickSensitivity),r.y0+=s/a*(a-3*this._joystickSensitivity))}t.preventDefault()},this.togglePause=new Ao,this._fullscreenDoubleTapDetector=new jp,this._bound=!1,this._joystick=null,this._select=null,this._reset=null,this._isAlt=!1,this._pendingTouches=new Map,this.toggleFullscreen=this._fullscreenDoubleTapDetector.trigger}static isSupported(){return"ontouchstart"in window}bind(t,e){this._bound||(this._bound=!0,this._joystick=t,this._select=e.getSelectSwitch(),this._reset=e.getResetButton(),this._bindListeners())}unbind(){this._bound&&(this._unbindListeners(),this._bound=!1,this._joystick=this._reset=this._select=null)}_bindListeners(){this._canvas.addEventListener("touchstart",this._onTouchStart),this._canvas.addEventListener("touchend",this._onTouchEnd),this._canvas.addEventListener("touchmove",this._onTouchMove)}_unbindListeners(){this._canvas.removeEventListener("touchstart",this._onTouchStart),this._canvas.removeEventListener("touchend",this._onTouchEnd),this._canvas.removeEventListener("touchmove",this._onTouchMove)}}class zp{constructor(t,e){this.touch=t,this.type="unknown";const n=e.getBoundingClientRect();this.x=(t.clientX-n.left)/n.width,this.y=(t.clientY-n.top)/n.height,this.x0=t.clientX,this.y0=t.clientY}}class $p{constructor(){this._x=-1,this._listener=this._onDocumentMouseMove.bind(this)}bind(t){this._paddle||(this._paddle=t,this._x=-1,document.addEventListener("mousemove",this._listener))}unbind(){this._paddle&&(document.removeEventListener("mousemove",this._listener),this._paddle=null)}_onDocumentMouseMove(t){if(this._x>=0){const e=t.screenX-this._x;let n=this._paddle.getValue();n+=-e/window.innerWidth/.9,n<0&&(n=0),n>1&&(n=1),this._paddle.setValue(n)}this._x=t.screenX}}class Hp{constructor(){this._state=!1,this._dirty=!1}toggle(t){t!==this._state&&(this._state=t,this._dirty=!0)}setState(t){this._state=t,this._dirty=!1}sync(t){this._dirty&&(t.toggle(this._state),this._dirty=!1)}}function Wp(t,e){return{type:"button",index:t,target:e}}function Gp(t,e,n){return{type:"axis",index:t,sign:e,target:n}}const Vp=[Wp(12,"up"),Wp(13,"down"),Wp(14,"left"),Wp(15,"right"),Wp(8,"select"),Wp(9,"start"),...[0,1,2,3,10,11].map(t=>Wp(t,"fire")),...[4,5,6,7].map(t=>Wp(t,"pause")),Gp(0,"negative","left"),Gp(0,"positive","right"),Gp(1,"negative","up"),Gp(1,"positive","down"),Gp(2,"negative","left"),Gp(2,"positive","right"),Gp(3,"negative","up"),Gp(3,"positive","down")];function qp(t){return"object"==typeof t?t.pressed:t>.5}class Xp{constructor(){this._onGamepadConnect=()=>this.probeGamepads(),this._onGamepadDisconnect=()=>this.probeGamepads(),this.gamepadCountChanged=new Ao,this._shadows=null,this._mappings=new Map,this._mappingStates=new WeakMap,this._mappingTargets=new WeakMap,this._bound=!1,this._joysticks=[],this._auxSwitches={},this._gamepadCount=0,this._lastPoll=0,this.setMapping(Vp)}static probeGamepadCount(){let t=0;const e=navigator.getGamepads();for(let n=0;n<e.length;n++)e[n]&&t++;return t}init(){if(!navigator.getGamepads)throw new Error("gamepad API not available");this.probeGamepads(),window.addEventListener("gamepadconnected",this._onGamepadConnect),window.addEventListener("gamepaddisconnected",this._onGamepadDisconnect)}deinit(){this.unbind(),window.removeEventListener("gamepadconnected",this._onGamepadConnect),window.removeEventListener("gamepaddisconnected",this._onGamepadDisconnect)}bind(t=[],e={}){this._bound||(this._bound=!0,this._joysticks=t,this._auxSwitches=e,this._bound=!0,this._shadows=new WeakMap,this._controlledSwitches().forEach(t=>{const e=new Hp;this._shadows.set(t,e),e.setState(t.read()),t.beforeRead.addHandler(Xp._onBeforeSwitchRead,this)}))}unbind(){this._bound&&(this._controlledSwitches().forEach(t=>t.beforeRead.removeHandler(Xp._onBeforeSwitchRead,this)),this._shadows=null,this._auxSwitches={},this._joysticks=[],this._bound=!1)}getGamepadCount(){return this._gamepadCount}setMapping(t,e){void 0!==e&&this._mappings.set(e,t);const n=new Map,r=[];for(const e of t)r.indexOf(e.target)&&(r.push(e.target),n.set(e.target,!1));this._mappingStates.set(t,n),this._mappingTargets.set(t,r)}clearMapping(t){this._mappings.delete(t)}poll(){this._readGamepads()}static _onBeforeSwitchRead(t,e){e.poll()}probeGamepads(){const t=Xp.probeGamepadCount();t!==this._gamepadCount&&(this._gamepadCount=t,this.gamepadCountChanged.dispatch(this._gamepadCount))}_getSwitchForTarget(t,e=null){if(this._auxSwitches[t])return this._auxSwitches[t];if(!e)return null;switch(t){case"up":return e.getUp();case"down":return e.getDown();case"left":return e.getLeft();case"right":return e.getRight();case"fire":return e.getFire();default:return null}}_controlledSwitches(){const t=[...Object.keys(this._auxSwitches).map(t=>this._auxSwitches[t])];for(const e of this._joysticks)t.push(e.getLeft(),e.getRight(),e.getUp(),e.getDown(),e.getFire());return t}_readGamepads(){const t=Date.now();if(0===this._gamepadCount||t-this._lastPoll<50)return;this._lastPoll=t;const e=navigator.getGamepads();let n=0;for(let t=0;t<e.length;t++){const r=e[t];if(!r)continue;const i=this._mappings.get(r.id)||Vp,s=this._mappingStates.get(i),a=this._mappingTargets.get(i);for(const t of a)s.set(t,!1);for(const t of i)switch(t.type){case"button":const e=r.buttons[t.index];void 0!==e&&qp(e)&&s.set(t.target,!0);break;case"axis":const n=r.axes[t.index];void 0!==n&&("positive"===t.sign?n>.5:n<-.5)&&s.set(t.target,!0)}for(const t of a){const e=this._getSwitchForTarget(t,this._joysticks[n]);if(!e)continue;const r=this._shadows.get(e);r.toggle(s.get(t)),r.sync(e)}n++}}}var Qp;function Jp(t){return{state:"error",error:t}}function Yp(t,e){const n=t.cpuEmulation||e.cpuEmulation;switch(n){case"cycle":return Fd.Type.stateMachine;case"instruction":return Fd.Type.batchedAccess;default:throw new Error(`cannot happen: invalid cpu emulation mod e${n}`)}}function Kp(t){switch(t.tvMode){case"ntsc":return 0;case"pal":return 1;case"secam":return 2;default:throw new Error(`cannot happen: invalid TV mode ${t.tvMode}`)}}function Zp(t,e){return{tvMode:Kp(t),enableAudio:t.volume*e.volume>0,randomSeed:void 0===t.rngSeed?-1:t.rngSeed,emulatePaddles:t.emulatePaddles,frameStart:void 0===t.firstVisibleLine?-1:t.firstVisibleLine,pcmAudio:"pcm"===(t.audioEmulation||e.audioEmulation),cpuType:Yp(t,e)}}function t_(t){switch(t){case"composite":return"composite";case"svideo":return"svideo";case"none":return"none";default:throw new Error(`invalid TV emulation setting: ${t}`)}}function e_(t){switch(t){case"qis":return"qis";case"bilinear":return"bilinear";case"none":return"none";default:throw new Error("invalid scaling setting")}}function n_(t,e){var n,r;return{gamma:e.gammaCorrection,tvEmulation:t_(e.tvEmulation),scalingMode:e_(e.scaling),phosphorLevel:(r=null===(n=t)||void 0===n?void 0:n.phosphorLevel,(null!=r?r:e.phosphorLevel)/100),scanlineLevel:e.scanlineIntensity/100}}let r_=Qp=class{constructor(t){this._storage=t,this._onEmulationStarted=({hash:t,switches:e})=>a(this,void 0,void 0,(function*(){try{yield this._emulationMutex.runExclusive(()=>this._startEmulation(t,e))}catch(t){this._ports.onEmulationStateChange_.send(Jp(t.message))}})),this._onEmulationStopped=()=>this._emulationMutex.runExclusive(()=>this._stopEmulation()),this._onEmulationPaused=()=>this._emulationMutex.runExclusive(()=>this._pauseEmulation()),this._onEmulationResumed=()=>this._emulationMutex.runExclusive(()=>this._resumeEmulation()),this._onEmulationReset=()=>this._emulationMutex.runExclusive(()=>this._resetEmulation()),this._onToggleFullscreen=()=>this._fullscreenDriver&&this._fullscreenDriver.toggle(),this._onSetLimitFramerate=t=>this._emulationService.setRateLimit(t),this._onInputTogglePause=()=>this._ports.onInputDriverEvent_.send("pause"),this._onInputReset=()=>this._ports.onInputDriverEvent_.send("reset"),this._onInputToggleFullscreen=()=>this._ports.onInputDriverEvent_.send("fullscreen"),this._onWindowResize=()=>this._videoDriver&&this._videoDriver.resize(),this._onUpdateConsoleSwitches=t=>this._emulationMutex.runExclusive(()=>this._updateConsoleSwitches(t)),this._onMutation=t=>{if(!t.some(t=>t.addedNodes))return;const e=document.getElementById("stellerator-canvas");e===this._canvas||this._handledCanvasElements.has(e)||(e&&this._handledCanvasElements.add(e),e&&this._canvas?this._canvasMutex.runExclusive(()=>this._rebindCanvas(e)):e?this._canvasMutex.runExclusive(()=>this._bindCanvas(e)):this._canvasMutex.runExclusive(()=>this._unbindCanvas()))},this._emulationMutex=new Qh,this._canvasMutex=new Qh,this._driverManager=new np,this._currentCartridgeHash=null,this._canvas=null,this._videoDriver=null,this._fullscreenDriver=null,this._mutationObserver=new MutationObserver(this._onMutation),this._keyboardDriver=new wp(document),this._paddleDriver=new $p,this._audioDriver=new Dp,this._gamepadDriver=new Xp,this._touchDriver=null,this._currentConfig=null,this._handledCanvasElements=new WeakSet,this._emulationService=new ep("worker/stellerator.min.js"),this._emulationServiceReady=this._emulationService.init(),this._driverManager.bind(this._emulationService),this._audioDriver.init(),this._keyboardDriver.hardReset.addHandler(this._onInputReset),this._keyboardDriver.togglePause.addHandler(this._onInputTogglePause),this._keyboardDriver.toggleFullscreen.addHandler(this._onInputToggleFullscreen),this._driverManager.addDriver(this._gamepadDriver,(t,e)=>e.bind([t.getJoystick(0),t.getJoystick(1)],{start:t.getControlPanel().getResetButton(),select:t.getControlPanel().getSelectSwitch()})),this._gamepadDriver.init(),window.addEventListener("resize",this._onWindowResize)}init(t){this._ports=t,t.startEmulation_.subscribe(this._onEmulationStarted),t.stopEmulation_.subscribe(this._onEmulationStopped),t.pauseEmulation_.subscribe(this._onEmulationPaused),t.resumeEmulation_.subscribe(this._onEmulationResumed),t.resetEmulation_.subscribe(this._onEmulationReset),t.toggleFullscreen_.subscribe(this._onToggleFullscreen),t.setLimitFramerate_.subscribe(this._onSetLimitFramerate),t.updateConsoleSwitches_.subscribe(this._onUpdateConsoleSwitches),this._emulationService.stateChanged.addHandler(Qp._onEmulationStateChange,this),this._emulationService.frequencyUpdate.addHandler(Qp._onFrequencyChange,this),this._gamepadDriver.gamepadCountChanged.addHandler(t=>{console.log(t),this._ports.onUpdateGamepadCount_.send(t)}),this._ports.onUpdateGamepadCount_.send(Xp.probeGamepadCount()),this._mutationObserver.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0})}updateCartridge(t){return a(this,void 0,void 0,(function*(){if(t.hash!==this._currentCartridgeHash)return;switch(this._emulationService.getState()){case Xh.State.running:case Xh.State.paused:break;default:return}const e=yield this._storage.getSettings();this._audioDriver.setMasterVolume(t.volume*e.volume/1e4),this._videoDriver&&this._videoDriver.updateConfig(n_(t,e))}))}updateSettings(t){return a(this,void 0,void 0,(function*(){switch(this._emulationService.getState()){case Xh.State.running:case Xh.State.paused:break;default:return}const e=yield this._storage.getCartridge(this._currentCartridgeHash);this._audioDriver.setMasterVolume(e.volume*t.volume/1e4),this._videoDriver&&this._videoDriver.updateConfig(n_(e,t))}))}static _onEmulationStateChange(t,e){e._ports.onEmulationStateChange_.send(e._emulationState(t)),t===Xh.State.running?e._audioDriver.resume():e._audioDriver.pause()}static _onFrequencyChange(t,e){e._emulationService.getState()===Xh.State.running&&e._ports.onEmulationStateChange_.send({state:"running",frequency:t})}_startEmulation(t,e){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.stop();const[n,r,i]=yield Promise.all([this._storage.getCartridge(t),this._storage.getCartridgeImage(t),this._storage.getSettings()]);if(!n||!r)throw new Error(`invalid cartridge hash ${t}`);this._currentCartridgeHash=t;const s=Zp(n,i);this._currentConfig&&this._currentConfig.pcmAudio===s.pcmAudio||(this._driverManager.removeDriver(this._audioDriver),this._driverManager.addDriver(this._audioDriver,(t,e)=>e.bind(s.pcmAudio,s.pcmAudio?[t.getPCMChannel()]:t.getWaveformChannels()))),this._audioDriver.setMasterVolume(n.volume*i.volume/1e4),this._videoDriver&&this._videoDriver.updateConfig(n_(n,i)),this._currentConfig=Zp(n,i),yield this._emulationService.start(r,this._currentConfig,n.cartridgeType),this._updateConsoleSwitches(e),yield this._emulationService.resume()}))}_stopEmulation(){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.stop(),this._currentCartridgeHash=null}))}_pauseEmulation(){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.pause()}))}_resumeEmulation(){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,this._emulationService.getState()===Xh.State.paused&&(yield this._emulationService.resume())}))}_resetEmulation(){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.reset()}))}_updateConsoleSwitches(t){const e=this._emulationService.getEmulationContext();if(!e)return;const n=e.getControlPanel();n.getDifficultySwitchP0().toggle("pro"===t.difficultyP0),n.getDifficultySwitchP1().toggle("pro"===t.difficultyP1),n.getColorSwitch().toggle("bw"===t.color)}_createAndBindVideoDriver(t){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,this._removeVideoDriver();const[e,n]=yield this._emulationMutex.runExclusive(()=>Promise.all([this._storage.getSettings(),this._currentCartridgeHash&&this._storage.getCartridge(this._currentCartridgeHash)]));this._canvas=t,this._videoDriver=new vp(this._canvas,n_(n,e)),this._videoDriver.init(),this._driverManager.addDriver(this._videoDriver,(t,e)=>e.bind(t.getVideo())),this._fullscreenDriver=new Np(this._videoDriver)}))}_bindCanvas(t){var e;return a(this,void 0,void 0,(function*(){const n=yield this._storage.getSettings();yield this._createAndBindVideoDriver(t),(null!=(e=n.touchControls)?e:Up.isSupported())&&(this._touchDriver=new Up(t,n.virtualJoystickSensitivity,n.leftHanded),this._touchDriver.toggleFullscreen.addHandler(this._onInputToggleFullscreen),this._touchDriver.togglePause.addHandler(this._onInputTogglePause),this._driverManager.addDriver(this._touchDriver,(t,e)=>e.bind(t.getJoystick(0),t.getControlPanel()))),this._driverManager.addDriver(this._keyboardDriver,(t,e)=>e.bind(t.getJoystick(0),t.getJoystick(1),t.getControlPanel())).addDriver(this._paddleDriver,(t,e)=>e.bind(t.getPaddle(0)))}))}_rebindCanvas(t){return a(this,void 0,void 0,(function*(){yield this._createAndBindVideoDriver(t)}))}_unbindCanvas(){return a(this,void 0,void 0,(function*(){this._touchDriver&&(this._driverManager.removeDriver(this._touchDriver),this._touchDriver=null),this._driverManager.removeDriver(this._keyboardDriver).removeDriver(this._paddleDriver),yield this._removeVideoDriver(),this._handledCanvasElements.delete(this._canvas),this._canvas=null}))}_removeVideoDriver(){this._videoDriver&&(this._driverManager.removeDriver(this._videoDriver),this._videoDriver.close(),this._videoDriver=null,this._fullscreenDriver.disengage(),this._fullscreenDriver=null)}_emulationState(t){switch(t){case Xh.State.error:return Jp(this._emulationService.getLastError().message);case Xh.State.running:return{state:"running"};case Xh.State.paused:return{state:"paused"};case Xh.State.stopped:return{state:"stopped"};default:throw new Error(`cannot happen: invalid emulation state ${t}`)}}};r_=Qp=r([te(),i(0,ee(Hh)),s("design:paramtypes",[Hh])],r_);var i_=r_,s_=U((function(t,e){!function(){function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof N&&N.global===N?N:void 0,s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,s,a){var o=i.URL||i.webkitURL,u=document.createElement("a");s=s||t.name||"download",u.download=s,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?r(u):n(u.href)?e(t,s,a):r(u,u.target="_blank")):(u.href=o.createObjectURL(t),setTimeout((function(){o.revokeObjectURL(u.href)}),4e4),setTimeout((function(){r(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,s){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,s),i);else if(n(t))e(t,i,s);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,n,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,o=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},c.readAsDataURL(t)}else{var h=i.URL||i.webkitURL,l=h.createObjectURL(t);s?s.location=l:location.href=l,s=null,setTimeout((function(){h.revokeObjectURL(l)}),4e4)}});i.saveAs=s.saveAs=s,t.exports=s}()}));class a_{constructor(t,e){this._interval=t,this._callback=e,this._handle=null,this._lastCall=Date.now()}run(t){if(this._data=t,null!==this._handle)return;const e=Date.now();e-this._lastCall>=this._interval?(this._lastCall=e,this._callback(this._data)):this._handle=window.setTimeout(()=>{this._handle=null,this._lastCall=e,this._callback(this._data)},this._interval-e+this._lastCall)}}let o_=class{constructor(t,e){this._storage=t,this._emulation=e,this._onCartridgeDeleted=t=>this._storage.deleteCartridge(t),this._onDeleteAllCartridges=()=>this._storage.deleteAllCartridges(),this._onSaveCartridge=t=>a(this,void 0,void 0,(function*(){const[e,n]=yield Promise.all([this._storage.getCartridge(t),this._storage.getCartridgeImage(t)]);e&&n&&s_.saveAs(new Blob([n],{type:"application/octet-stream"}),e.name+".bin",{autoBom:!1})})),this._updateCartridgeThrottle=new a_(250,t=>this._mutex.runExclusive(()=>this._updateCartridge(t))),this._mutex=new Qh}init(t){t.updateCartridge_.subscribe(this._updateCartridgeThrottle.run.bind(this._updateCartridgeThrottle)),t.deleteCartridge_.subscribe(this._onCartridgeDeleted),t.deleteAllCartridges_.subscribe(this._onDeleteAllCartridges),t.saveCartridge_.subscribe(this._onSaveCartridge)}_updateCartridge(t){return a(this,void 0,void 0,(function*(){yield this._storage.updateCartridge(t),yield this._emulation.updateCartridge(t)}))}};o_=r([te(),i(0,ee(Hh)),i(1,ee(i_)),s("design:paramtypes",[Hh,i_])],o_);var u_=o_;let c_=class{constructor(t,e){this._storage=t,this._emulation=e,this._throttle=new a_(250,this._applyUpdate.bind(this)),this._mutex=new Qh}init(t){t.updateSettings_.subscribe(this._throttle.run.bind(this._throttle))}_applyUpdate(t){this._mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){yield this._storage.saveSettings(t),yield this._emulation.updateSettings(t)})))}};c_=r([te(),i(0,ee(Hh)),i(1,ee(i_)),s("design:paramtypes",[Hh,i_])],c_);var h_=c_;navigator.serviceWorker&&navigator.serviceWorker.register("./service-worker.js",{scope:"./"});const l_=t=>({cpuEmulation:"cycle",volume:80,audioEmulation:"pcm",gammaCorrection:1,tvEmulation:t?"none":"composite",scaling:t?"bilinear":"qis",phosphorLevel:50,scanlineIntensity:20,touchControls:void 0,leftHanded:!1,virtualJoystickSensitivity:10,uiMode:void 0,uiSize:100});window.addEventListener("load",(function(){return a(this,void 0,void 0,(function*(){ct||(ut(document.body),ct=new MutationObserver(t=>t.forEach(t=>t.addedNodes.forEach(ut))),ct.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0}));const t=ht.getAllTypes().map(t=>({key:t,description:ht.describeCartridgeType(t)})),e=new Zt({autoBindInjectable:!0,defaultScope:"Singleton"}),n=e.get(Hh),r=bp(),i=!(r&&(r.floatTextures||r.halfFloatTextures)&&r.highpInFsh);n.setDefaults(l_(i));const[s,a]=yield Promise.all([n.getAllCartridges(),n.getSettings()]),o="1.0.0-beta.11-49bc163",u=localStorage.getItem("stellerator-ng-version"),c=!!u&&u!==o;localStorage.setItem("stellerator-ng-version",o);const{ports:h}=H.Stellerator.Main.init({flags:{cartridges:s,cartridgeTypes:t,settings:a,defaultSettings:l_(i),touchSupport:Up.isSupported(),version:o,wasUpdated:c,gamepadCount:Xp.probeGamepadCount(),badGpu:i}});e.get(re).init(h),e.get(ae).init(h),e.get(Gh).init(h),e.get(u_).init(h),e.get(h_).init(h),e.get(i_).init(h),h.scrollToTop_.subscribe(()=>window.scrollTo(0,0)),h.blurCurrentElement_.subscribe(()=>document.activeElement.blur())}))}))}();
//# sourceMappingURL=app.js.map
