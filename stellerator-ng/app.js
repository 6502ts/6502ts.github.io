!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};var e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function r(t,e,n,r){var i,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(s<3?i(a):s>3?i(e,n,a):i(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a}function i(t,e){return function(n,r){e(n,r,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function a(t,e,n,r){return new(n||(n=Promise))((function(i,s){function a(t){try{u(r.next(t))}catch(t){s(t)}}function o(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,o)}u((r=r.apply(t,e||[])).next())}))}function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a}function c(t){return this instanceof c?(this.v=t,this):new c(t)}var h=Object.freeze({__proto__:null,__extends:function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},get __assign(){return e},__rest:n,__decorate:r,__param:i,__metadata:s,__awaiter:a,__generator:function(t,e){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},__exportStar:function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},__values:o,__read:u,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r},__await:c,__asyncGenerator:function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){s.push([t,e,n,r])>1||o(t,e)}))})}function o(t,e){try{(n=i[t](e)).value instanceof c?Promise.resolve(n.value.v).then(u,h):l(s[0][2],n)}catch(t){l(s[0][3],t)}var n}function u(t){o("next",t)}function h(t){o("throw",t)}function l(t,e){t(e),s.shift(),s.length&&o(s[0][0],s[0][1])}},__asyncDelegator:function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:c(t[r](e)),done:"return"===r}:i?i(e):e}:i}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=o(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}}}),l="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function f(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}var p=f,_=d;function g(t){if(p===setTimeout)return setTimeout(t,0);if((p===f||!p)&&setTimeout)return p=setTimeout,setTimeout(t,0);try{return p(t,0)}catch(e){try{return p.call(null,t,0)}catch(e){return p.call(this,t,0)}}}"function"==typeof l.setTimeout&&(p=setTimeout),"function"==typeof l.clearTimeout&&(_=clearTimeout);var b,v=[],m=!1,y=-1;function w(){m&&b&&(m=!1,b.length?v=b.concat(v):y=-1,v.length&&A())}function A(){if(!m){var t=g(w);m=!0;for(var e=v.length;e;){for(b=v,v=[];++y<e;)b&&b[y].run();y=-1,e=v.length}b=null,m=!1,function(t){if(_===clearTimeout)return clearTimeout(t);if((_===d||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(t);try{_(t)}catch(e){try{return _.call(null,t)}catch(e){return _.call(this,t)}}}(t)}}function k(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new C(t,e)),1!==v.length||m||g(A)}function C(t,e){this.fun=t,this.array=e}C.prototype.run=function(){this.fun.apply(null,this.array)};function S(){}var E=S,x=S,T=S,I=S,B=S,O=S,R=S;var P=l.performance||{},D=P.now||P.mozNow||P.msNow||P.oNow||P.webkitNow||function(){return(new Date).getTime()};var M=new Date;var F,j={nextTick:k,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:E,addListener:x,once:T,off:I,removeListener:B,removeAllListeners:O,emit:R,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*D.call(P),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-M)/1e3}},L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function N(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function U(t,e){return t(e={exports:{}},e.exports),e.exports}function z(t){return t&&t.default||t}
/*! *****************************************************************************
    Copyright (C) Microsoft. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */!function(t){!function(e){var n="object"==typeof L?L:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(t);function i(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===n.Reflect?n.Reflect=t:r=i(n.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,o=!s&&!a,u={create:s?function(){return R(Object.create(null))}:a?function(){return R({__proto__:null})}:function(){return R({})},has:o?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:o?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),h="object"==typeof j&&j.env&&"true"===j.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,s)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function s(t,e){return e}function a(t,e){return[t,e]}}():Map,f=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}():Set,d=new(h||"function"!=typeof WeakMap?function(){var t=u.create(),n=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var e;do{e="@@WeakMap@@"+a()}while(u.has(t,e));return t[e]=!0,e}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:u.create()})}return t[n]}function s(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function p(t,e,n){var r=d.get(t);if(y(r)){if(!n)return;r=new l,d.set(t,r)}var i=r.get(e);if(y(i)){if(!n)return;i=new l,r.set(e,i)}return i}function _(t,e,n){var r=p(e,n,!1);return!y(r)&&!!r.has(t)}function g(t,e,n){var r=p(e,n,!1);if(!y(r))return r.get(t)}function b(t,e,n,r){p(n,r,!0).set(t,e)}function v(t,e){var n=[],r=p(t,e,!1);if(y(r))return n;for(var s=function(t){var e=T(t,i);if(!E(e))throw new TypeError;var n=e.call(t);if(!A(n))throw new TypeError;return n}(r.keys()),a=0;;){var o=I(s);if(!o)return n.length=a,n;var u=o.value;try{n[a]=u}catch(t){try{B(s)}finally{throw t}}a++}}function m(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function y(t){return void 0===t}function w(t){return null===t}function A(t){return"object"==typeof t?null!==t:"function"==typeof t}function k(t,e){switch(m(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=T(t,r);if(void 0!==i){var s=i.call(t,n);if(A(s))throw new TypeError;return s}return function(t,e){if("string"===e){var n=t.toString;if(E(n))if(!A(i=n.call(t)))return i;if(E(r=t.valueOf))if(!A(i=r.call(t)))return i}else{var r;if(E(r=t.valueOf))if(!A(i=r.call(t)))return i;var i,s=t.toString;if(E(s))if(!A(i=s.call(t)))return i}throw new TypeError}(t,"default"===n?"number":n)}function C(t){var e=k(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function S(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function E(t){return"function"==typeof t}function x(t){return"function"==typeof t}function T(t,e){var n=t[e];if(null!=n){if(!E(n))throw new TypeError;return n}}function I(t){var e=t.next();return!e.done&&e}function B(t){var e=t.return;e&&e.call(t)}function O(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i?e:i===t?e:i}function R(t){return t.__=void 0,delete t.__,t}t("decorate",(function(t,e,n,r){if(y(n)){if(!S(t))throw new TypeError;if(!x(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!y(r)&&!w(r)){if(!x(r))throw new TypeError;e=r}}return e}(t,e)}if(!S(t))throw new TypeError;if(!A(e))throw new TypeError;if(!A(r)&&!y(r)&&!w(r))throw new TypeError;return w(r)&&(r=void 0),function(t,e,n,r){for(var i=t.length-1;i>=0;--i){var s=(0,t[i])(e,n,r);if(!y(s)&&!w(s)){if(!A(s))throw new TypeError;r=s}}return r}(t,e,n=C(n),r)})),t("metadata",(function(t,e){return function(n,r){if(!A(n))throw new TypeError;if(!y(r)&&!function(t){switch(m(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(t,e,n,r)}})),t("defineMetadata",(function(t,e,n,r){if(!A(n))throw new TypeError;return y(r)||(r=C(r)),b(t,e,n,r)})),t("hasMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return y(n)||(n=C(n)),function t(e,n,r){if(_(e,n,r))return!0;var i=O(n);return!w(i)&&t(e,i,r)}(t,e,n)})),t("hasOwnMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return y(n)||(n=C(n)),_(t,e,n)})),t("getMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return y(n)||(n=C(n)),function t(e,n,r){if(_(e,n,r))return g(e,n,r);var i=O(n);return w(i)?void 0:t(e,i,r)}(t,e,n)})),t("getOwnMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return y(n)||(n=C(n)),g(t,e,n)})),t("getMetadataKeys",(function(t,e){if(!A(t))throw new TypeError;return y(e)||(e=C(e)),function t(e,n){var r=v(e,n),i=O(e);if(null===i)return r;var s=t(i,n);if(s.length<=0)return r;if(r.length<=0)return s;for(var a=new f,o=[],u=0,c=r;u<c.length;u++){var h=c[u];a.has(h)||(a.add(h),o.push(h))}for(var l=0,d=s;l<d.length;l++){h=d[l];a.has(h)||(a.add(h),o.push(h))}return o}(t,e)})),t("getOwnMetadataKeys",(function(t,e){if(!A(t))throw new TypeError;return y(e)||(e=C(e)),v(t,e)})),t("deleteMetadata",(function(t,e,n){if(!A(e))throw new TypeError;y(n)||(n=C(n));var r=p(e,n,!1);if(y(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=d.get(e);return i.delete(n),i.size>0||(d.delete(e),!0)}))}(r)}()}(F||(F={}));let $={};(function(){!function(t){function e(t,e,n){return n.a=t,n.f=e,n}function n(t){return e(2,t,(function(e){return function(n){return t(e,n)}}))}function r(t){return e(3,t,(function(e){return function(n){return function(r){return t(e,n,r)}}}))}function i(t){return e(4,t,(function(e){return function(n){return function(r){return function(i){return t(e,n,r,i)}}}}))}function s(t){return e(5,t,(function(e){return function(n){return function(r){return function(i){return function(s){return t(e,n,r,i,s)}}}}}))}function a(t){return e(6,t,(function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return t(e,n,r,i,s,a)}}}}}}))}function o(t){return e(7,t,(function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return function(o){return t(e,n,r,i,s,a,o)}}}}}}}))}function u(t){return e(8,t,(function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return function(o){return function(u){return t(e,n,r,i,s,a,o,u)}}}}}}}}))}function c(t){return e(9,t,(function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return function(o){return function(u){return function(c){return t(e,n,r,i,s,a,o,u,c)}}}}}}}}}))}function h(t,e,n){return 2===t.a?t.f(e,n):t(e)(n)}function l(t,e,n,r){return 3===t.a?t.f(e,n,r):t(e)(n)(r)}function f(t,e,n,r,i){return 4===t.a?t.f(e,n,r,i):t(e)(n)(r)(i)}function d(t,e,n,r,i,s){return 5===t.a?t.f(e,n,r,i,s):t(e)(n)(r)(i)(s)}function p(t,e,n,r,i,s,a){return 6===t.a?t.f(e,n,r,i,s,a):t(e)(n)(r)(i)(s)(a)}function _(t,e,n,r,i,s,a,o){return 7===t.a?t.f(e,n,r,i,s,a,o):t(e)(n)(r)(i)(s)(a)(o)}function g(t,e,n,r,i,s,a,o,u){return 8===t.a?t.f(e,n,r,i,s,a,o,u):t(e)(n)(r)(i)(s)(a)(o)(u)}function b(t,e){for(var n,r=[],i=v(t,e,0,r);i&&(n=r.pop());i=v(n.a,n.b,0,r));return i}function v(t,e,n,r){if(t===e)return!0;if("object"!=typeof t||null===t||null===e)return"function"==typeof t&&F(5),!1;if(n>100)return r.push(A(t,e)),!0;for(var i in t.$<0&&(t=yn(t),e=yn(e)),t)if(!v(t[i],e[i],n+1,r))return!1;return!0}var m=n(b);n((function(t,e){return!b(t,e)}));function y(t,e,n){if("object"!=typeof t)return t===e?0:t<e?-1:1;if(void 0===t.$)return(n=y(t.a,e.a))?n:(n=y(t.b,e.b))?n:y(t.c,e.c);for(;t.b&&e.b&&!(n=y(t.a,e.a));t=t.b,e=e.b);return n||(t.b?1:e.b?-1:0)}n((function(t,e){return y(t,e)<0})),n((function(t,e){return y(t,e)<1})),n((function(t,e){return y(t,e)>0})),n((function(t,e){return y(t,e)>=0}));var w=n((function(t,e){var n=y(t,e);return n<0?bn:n?gn:_n}));function A(t,e){return{a:t,b:e}}function k(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}var C=n(S);function S(t,e){if("string"==typeof t)return t+e;if(!t.b)return e;var n=x(t.a,e);t=t.b;for(var r=n;t.b;t=t.b)r=r.b=x(t.a,e);return n}var E={$:0};function x(t,e){return{$:1,a:t,b:e}}var T=n(x);function I(t){for(var e=E,n=t.length;n--;)e=x(t[n],e);return e}function B(t){for(var e=[];t.b;t=t.b)e.push(t.a);return e}var O=r((function(t,e,n){for(var r=[];e.b&&n.b;e=e.b,n=n.b)r.push(h(t,e.a,n.a));return I(r)})),R=(i((function(t,e,n,r){for(var i=[];e.b&&n.b&&r.b;e=e.b,n=n.b,r=r.b)i.push(l(t,e.a,n.a,r.a));return I(i)})),s((function(t,e,n,r,i){for(var s=[];e.b&&n.b&&r.b&&i.b;e=e.b,n=n.b,r=r.b,i=i.b)s.push(f(t,e.a,n.a,r.a,i.a));return I(s)})),a((function(t,e,n,r,i,s){for(var a=[];e.b&&n.b&&r.b&&i.b&&s.b;e=e.b,n=n.b,r=r.b,i=i.b,s=s.b)a.push(d(t,e.a,n.a,r.a,i.a,s.a));return I(a)})),n((function(t,e){return I(B(e).sort((function(e,n){return y(t(e),t(n))})))})));n((function(t,e){return I(B(e).sort((function(e,n){var r=h(t,e,n);return r===_n?0:r===bn?-1:1})))}));var P=r((function(t,e,n){for(var r=new Array(t),i=0;i<t;i++)r[i]=n(e+i);return r})),D=n((function(t,e){for(var n=new Array(t),r=0;r<t&&e.b;r++)n[r]=e.a,e=e.b;return n.length=r,A(n,e)})),M=(n((function(t,e){return e[t]})),r((function(t,e,n){for(var r=n.length,i=new Array(r),s=0;s<r;s++)i[s]=n[s];return i[t]=e,i})),n((function(t,e){for(var n=e.length,r=new Array(n+1),i=0;i<n;i++)r[i]=e[i];return r[n]=t,r})),r((function(t,e,n){for(var r=n.length,i=0;i<r;i++)e=h(t,n[i],e);return e})),r((function(t,e,n){for(var r=n.length-1;r>=0;r--)e=h(t,n[r],e);return e})));n((function(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=t(e[i]);return r})),r((function(t,e,n){for(var r=n.length,i=new Array(r),s=0;s<r;s++)i[s]=h(t,e+s,n[s]);return i})),r((function(t,e,n){return n.slice(t,e)})),r((function(t,e,n){var r=e.length,i=t-r;i>n.length&&(i=n.length);for(var s=new Array(r+i),a=0;a<r;a++)s[a]=e[a];for(a=0;a<i;a++)s[a+r]=n[a];return s})),n((function(t,e){return e})),n((function(t,e){return console.log(t+": <internals>"),e}));function F(t){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+t+".md")}n((function(t,e){return t+e})),n((function(t,e){return t-e})),n((function(t,e){return t*e})),n((function(t,e){return t/e})),n((function(t,e){return t/e|0})),n(Math.pow),n((function(t,e){return e%t}));var j=n((function(t,e){var n=e%t;return 0===t?F(11):n>0&&t<0||n<0&&t>0?n+t:n}));n(Math.atan2);var L=Math.ceil,N=Math.floor,U=Math.round,z=Math.log,$=isNaN;n((function(t,e){return t&&e})),n((function(t,e){return t||e})),n((function(t,e){return t!==e}));var H=n((function(t,e){return t+e}));var W=n((function(t,e){return t+e}));n((function(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;){var s=e.charCodeAt(i);55296<=s&&s<=56319?(r[i]=t(e[i]+e[i+1]),i+=2):(r[i]=t(e[i]),i++)}return r.join("")}));var V=n((function(t,e){for(var n=[],r=e.length,i=0;i<r;){var s=e[i],a=e.charCodeAt(i);i++,55296<=a&&a<=56319&&(s+=e[i],i++),t(s)&&n.push(s)}return n.join("")}));var q=r((function(t,e,n){for(var r=n.length,i=0;i<r;){var s=n[i],a=n.charCodeAt(i);i++,55296<=a&&a<=56319&&(s+=n[i],i++),e=h(t,s,e)}return e})),G=r((function(t,e,n){for(var r=n.length;r--;){var i=n[r],s=n.charCodeAt(r);56320<=s&&s<=57343&&(i=n[--r]+i),e=h(t,i,e)}return e})),Q=n((function(t,e){return e.split(t)})),J=n((function(t,e){return e.join(t)})),K=r((function(t,e,n){return n.slice(t,e)}));n((function(t,e){for(var n=e.length;n--;){var r=e[n],i=e.charCodeAt(n);if(56320<=i&&i<=57343&&(r=e[--n]+r),t(r))return!0}return!1}));var Y=n((function(t,e){for(var n=e.length;n--;){var r=e[n],i=e.charCodeAt(n);if(56320<=i&&i<=57343&&(r=e[--n]+r),!t(r))return!1}return!0})),Z=n((function(t,e){return e.indexOf(t)>-1})),X=n((function(t,e){return 0===e.indexOf(t)})),tt=n((function(t,e){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length})),et=n((function(t,e){var n=t.length;if(n<1)return E;for(var r=0,i=[];(r=e.indexOf(t,r))>-1;)i.push(r),r+=n;return I(i)}));function nt(t){return t+""}function rt(t){return{$:2,b:t}}var it=rt((function(t){return"number"!=typeof t?yt("an INT",t):-2147483647<t&&t<2147483647&&(0|t)===t?En(t):!isFinite(t)||t%1?yt("an INT",t):En(t)})),st=rt((function(t){return"boolean"==typeof t?En(t):yt("a BOOL",t)})),at=rt((function(t){return"number"==typeof t?En(t):yt("a FLOAT",t)})),ot=rt((function(t){return En(t)})),ut=rt((function(t){return"string"==typeof t?En(t):t instanceof String?En(t+""):yt("a STRING",t)}));var ct=n((function(t,e){return{$:6,d:t,b:e}}));n((function(t,e){return{$:7,e:t,b:e}}));function ht(t,e){return{$:9,f:t,g:e}}var lt=n((function(t,e){return{$:10,b:e,h:t}}));var ft=n((function(t,e){return ht(t,[e])})),dt=r((function(t,e,n){return ht(t,[e,n])})),pt=(i((function(t,e,n,r){return ht(t,[e,n,r])})),s((function(t,e,n,r,i){return ht(t,[e,n,r,i])})),a((function(t,e,n,r,i,s){return ht(t,[e,n,r,i,s])})),o((function(t,e,n,r,i,s,a){return ht(t,[e,n,r,i,s,a])})),u((function(t,e,n,r,i,s,a,o){return ht(t,[e,n,r,i,s,a,o])}))),_t=(c((function(t,e,n,r,i,s,a,o,u){return ht(t,[e,n,r,i,s,a,o,u])})),n((function(t,e){try{return gt(t,JSON.parse(e))}catch(t){return An(h(kn,"This is not valid JSON! "+t.message,e))}})),n((function(t,e){return gt(t,e)})));function gt(t,e){switch(t.$){case 2:return t.b(e);case 5:return null===e?En(t.c):yt("null",e);case 3:return vt(e)?bt(t.b,e,I):yt("a LIST",e);case 4:return vt(e)?bt(t.b,e,mt):yt("an ARRAY",e);case 6:var n=t.d;if("object"!=typeof e||null===e||!(n in e))return yt("an OBJECT with a field named `"+n+"`",e);var r=gt(t.b,e[n]);return yr(r)?r:An(h(Cn,n,r.a));case 7:var i=t.e;if(!vt(e))return yt("an ARRAY",e);if(i>=e.length)return yt("a LONGER array. Need index "+i+" but only see "+e.length+" entries",e);r=gt(t.b,e[i]);return yr(r)?r:An(h(Sn,i,r.a));case 8:if("object"!=typeof e||null===e||vt(e))return yt("an OBJECT",e);var s=E;for(var a in e)if(e.hasOwnProperty(a)){r=gt(t.b,e[a]);if(!yr(r))return An(h(Cn,a,r.a));s=x(A(a,r.a),s)}return En(Jn(s));case 9:for(var o=t.f,u=t.g,c=0;c<u.length;c++){r=gt(u[c],e);if(!yr(r))return r;o=o(r.a)}return En(o);case 10:r=gt(t.b,e);return yr(r)?gt(t.h(r.a),e):r;case 11:for(var l=E,f=t.g;f.b;f=f.b){r=gt(f.a,e);if(yr(r))return r;l=x(r.a,l)}return An(xn(Jn(l)));case 1:return An(h(kn,t.a,e));case 0:return En(t.a)}}function bt(t,e,n){for(var r=e.length,i=new Array(r),s=0;s<r;s++){var a=gt(t,e[s]);if(!yr(a))return An(h(Sn,s,a.a));i[s]=a.a}return En(n(i))}function vt(t){return Array.isArray(t)||"undefined"!=typeof FileList&&t instanceof FileList}function mt(t){return h(mr,t.length,(function(e){return t[e]}))}function yt(t,e){return An(h(kn,"Expecting "+t,e))}function wt(t,e){if(t===e)return!0;if(t.$!==e.$)return!1;switch(t.$){case 0:case 1:return t.a===e.a;case 2:return t.b===e.b;case 5:return t.c===e.c;case 3:case 4:case 8:return wt(t.b,e.b);case 6:return t.d===e.d&&wt(t.b,e.b);case 7:return t.e===e.e&&wt(t.b,e.b);case 9:return t.f===e.f&&At(t.g,e.g);case 10:return t.h===e.h&&wt(t.b,e.b);case 11:return At(t.g,e.g)}}function At(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(!wt(t[r],e[r]))return!1;return!0}var kt=n((function(t,e){return JSON.stringify(e,null,t)+""}));function Ct(t){return t}var St=r((function(t,e,n){return n[t]=e,n}));function Et(t){return{$:0,a:t}}function xt(t){return{$:2,b:t,c:null}}var Tt=n((function(t,e){return{$:3,b:t,d:e}}));n((function(t,e){return{$:4,b:t,d:e}}));var It=0;function Bt(t){var e={$:0,e:It++,f:t,g:null,h:[]};return Ft(e),e}function Ot(t){return xt((function(e){e(Et(Bt(t)))}))}function Rt(t,e){t.h.push(e),Ft(t)}var Pt=n((function(t,e){return xt((function(n){Rt(t,e),n(Et(0))}))}));var Dt=!1,Mt=[];function Ft(t){if(Mt.push(t),!Dt){for(Dt=!0;t=Mt.shift();)jt(t);Dt=!1}}function jt(t){for(;t.f;){var e=t.f.$;if(0===e||1===e){for(;t.g&&t.g.$!==e;)t.g=t.g.i;if(!t.g)return;t.f=t.g.b(t.f.a),t.g=t.g.i}else{if(2===e)return void(t.f.c=t.f.b((function(e){t.f=e,Ft(t)})));if(5===e){if(0===t.h.length)return;t.f=t.f.b(t.h.shift())}else t.g={$:3===e?0:1,b:t.f.b,i:t.g},t.f=t.f.d}}}i((function(t,e,n,r){return Lt(e,r,t.dc,t.d6,t.d_,(function(){return function(){}}))}));function Lt(t,e,n,r,i,s){var a=h(_t,t,e?e.flags:void 0);yr(a)||F(2);var o={},u=(a=n(a.a)).a,c=s(f,u),l=function(t,e){var n;for(var r in Nt){var i=Nt[r];i.a&&((n=n||{})[r]=i.a(r,e)),t[r]=zt(i,e)}return n}(o,f);function f(t,e){a=h(r,t,u),c(u=a.a,e),Qt(o,a.b,i(u))}return Qt(o,a.b,i(u)),l?{ports:l}:{}}var Nt={};function Ut(t,e,n,r,i){return{b:t,c:e,d:n,e:r,f:i}}function zt(t,e){var n={g:e,h:void 0},r=t.c,i=t.d,s=t.e,a=t.f;return n.h=Bt(h(Tt,(function t(e){return h(Tt,t,{$:5,b:function(t){var o=t.a;return 0===t.$?l(i,n,o,e):s&&a?f(r,n,o.i,o.j,e):l(r,n,s?o.i:o.j,e)}})}),t.b))}var $t=n((function(t,e){return xt((function(n){t.g(e),n(Et(0))}))})),Ht=n((function(t,e){return h(Pt,t.h,{$:0,a:e})}));function Wt(t){return function(e){return{$:1,k:t,l:e}}}function Vt(t){return{$:2,m:t}}n((function(t,e){return{$:3,n:t,o:e}}));var qt=[],Gt=!1;function Qt(t,e,n){if(qt.push({p:t,q:e,r:n}),!Gt){Gt=!0;for(var r;r=qt.shift();)Jt(r.p,r.q,r.r);Gt=!1}}function Jt(t,e,n){var r={};for(var i in Kt(!0,e,r,null),Kt(!1,n,r,null),t)Rt(t[i],{$:"fx",a:r[i]||{i:E,j:E}})}function Kt(t,e,n,r){switch(e.$){case 1:var i=e.k,s=function(t,e,n,r){return h(t?Nt[e].e:Nt[e].f,(function(t){for(var e=n;e;e=e.t)t=e.s(t);return t}),r)}(t,i,r,e.l);return void(n[i]=function(t,e,n){return n=n||{i:E,j:E},t?n.i=x(e,n.i):n.j=x(e,n.j),n}(t,s,n[i]));case 2:for(var a=e.m;a.b;a=a.b)Kt(t,a.a,n,r);return;case 3:return void Kt(t,e.o,n,{s:e.n,t:r})}}function Yt(t){Nt[t]&&F(3)}function Zt(t,e){return Yt(t),Nt[t]={e:Xt,u:e,a:te},Wt(t)}var Xt=n((function(t,e){return e}));function te(t){var e,n=[],i=Nt[t].u,s=(e=0,xt((function(t){var n=setTimeout((function(){t(Et(0))}),e);return function(){clearTimeout(n)}})));return Nt[t].b=s,Nt[t].c=r((function(t,e,r){for(;e.b;e=e.b)for(var a=n,o=i(e.a),u=0;u<a.length;u++)a[u](o);return s})),{subscribe:function(t){n.push(t)},unsubscribe:function(t){var e=(n=n.slice()).indexOf(t);e>=0&&n.splice(e,1)}}}function ee(t,e){return Yt(t),Nt[t]={f:re,u:e,a:ie},Wt(t)}var ne,re=n((function(t,e){return function(n){return t(e(n))}}));function ie(t,e){var n=E,i=Nt[t].u,s=Et(null);return Nt[t].b=s,Nt[t].c=r((function(t,e,r){return n=e,s})),{send:function(t){var r=h(_t,i,t);yr(r)||F(4,r.a);for(var s=r.a,a=n;a.b;a=a.b)e(a.a(s))}}}var se="undefined"!=typeof document?document:{};function ae(t,e){t.appendChild(e)}i((function(t,e,n,r){var i=r.node;return i.parentNode.replaceChild(Se(t,(function(){})),i),{}}));function oe(t){return{$:0,a:t}}var ue=n((function(t,e){return n((function(n,r){for(var i=[],s=0;r.b;r=r.b){var a=r.a;s+=a.b||0,i.push(a)}return s+=i.length,{$:1,c:e,d:ke(n),e:i,f:t,b:s}}))})),ce=ue(void 0),he=n((function(t,e){return n((function(n,r){for(var i=[],s=0;r.b;r=r.b){var a=r.a;s+=a.b.b||0,i.push(a)}return s+=i.length,{$:2,c:e,d:ke(n),e:i,f:t,b:s}}))})),le=he(void 0);n((function(t,e){return{$:4,j:t,k:e,b:1+(e.b||0)}}));function fe(t,e){return{$:5,l:t,m:e,k:void 0}}n((function(t,e){return fe([t,e],(function(){return t(e)}))}));var de=r((function(t,e,n){return fe([t,e,n],(function(){return h(t,e,n)}))})),pe=i((function(t,e,n,r){return fe([t,e,n,r],(function(){return l(t,e,n,r)}))})),_e=(s((function(t,e,n,r,i){return fe([t,e,n,r,i],(function(){return f(t,e,n,r,i)}))})),a((function(t,e,n,r,i,s){return fe([t,e,n,r,i,s],(function(){return d(t,e,n,r,i,s)}))})),o((function(t,e,n,r,i,s,a){return fe([t,e,n,r,i,s,a],(function(){return p(t,e,n,r,i,s,a)}))})),u((function(t,e,n,r,i,s,a,o){return fe([t,e,n,r,i,s,a,o],(function(){return _(t,e,n,r,i,s,a,o)}))})),c((function(t,e,n,r,i,s,a,o,u){return fe([t,e,n,r,i,s,a,o,u],(function(){return g(t,e,n,r,i,s,a,o,u)}))})),n((function(t,e){return{$:"a0",n:t,o:e}}))),ge=(n((function(t,e){return{$:"a1",n:t,o:e}})),n((function(t,e){return{$:"a2",n:t,o:e}}))),be=n((function(t,e){return{$:"a3",n:t,o:e}}));r((function(t,e,n){return{$:"a4",n:e,o:{f:t,o:n}}}));function ve(t){return"script"==t?"p":t}function me(t){return/^\s*(javascript:|data:text\/html)/i.test(t)?"":t}n((function(t,e){return"a0"===e.$?h(_e,e.n,function(t,e){var n=Cr(e);return{$:e.$,a:n?l(Ar,n<3?we:Ae,kr(t),e.a):h(wr,t,e.a)}}(t,e.o)):e}));var ye,we=n((function(t,e){return A(t(e.a),e.b)})),Ae=n((function(t,e){return{dk:t(e.dk),dY:e.dY,dJ:e.dJ}}));function ke(t){for(var e={};t.b;t=t.b){var n=t.a,r=n.$,i=n.n,s=n.o;if("a2"!==r){var a=e[r]||(e[r]={});"a3"===r&&"class"===i?Ce(a,i,s):a[i]=s}else"className"===i?Ce(e,i,s):e[i]=s}return e}function Ce(t,e,n){var r=t[e];t[e]=r?r+" "+n:n}function Se(t,e){var n=t.$;if(5===n)return Se(t.k||(t.k=t.m()),e);if(0===n)return se.createTextNode(t.a);if(4===n){for(var r=t.k,i=t.j;4===r.$;)"object"!=typeof i?i=[i,r.j]:i.push(r.j),r=r.k;var s={j:i,p:e};return(a=Se(r,s)).elm_event_node_ref=s,a}if(3===n)return Ee(a=t.h(t.g),e,t.d),a;var a=t.f?se.createElementNS(t.f,t.c):se.createElement(t.c);ne&&"a"==t.c&&a.addEventListener("click",ne(a)),Ee(a,e,t.d);for(var o=t.e,u=0;u<o.length;u++)ae(a,Se(1===n?o[u]:o[u].b,e));return a}function Ee(t,e,n){for(var r in n){var i=n[r];"a1"===r?xe(t,i):"a0"===r?Be(t,e,i):"a3"===r?Te(t,i):"a4"===r?Ie(t,i):("value"!==r&&"checked"!==r||t[r]!==i)&&(t[r]=i)}}function xe(t,e){var n=t.style;for(var r in e)n[r]=e[r]}function Te(t,e){for(var n in e){var r=e[n];void 0!==r?t.setAttribute(n,r):t.removeAttribute(n)}}function Ie(t,e){for(var n in e){var r=e[n],i=r.f,s=r.o;void 0!==s?t.setAttributeNS(i,n,s):t.removeAttributeNS(i,n)}}function Be(t,e,n){var r=t.elmFs||(t.elmFs={});for(var i in n){var s=n[i],a=r[i];if(s){if(a){if(a.q.$===s.$){a.q=s;continue}t.removeEventListener(i,a)}a=Oe(e,s),t.addEventListener(i,a,ye&&{passive:Cr(s)<2}),r[i]=a}else t.removeEventListener(i,a),r[i]=void 0}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){ye=!0}}))}catch(t){}function Oe(t,e){function n(e){var r=n.q,i=gt(r.a,e);if(yr(i)){for(var s,a=Cr(r),o=i.a,u=a?a<3?o.a:o.dk:o,c=1==a?o.b:3==a&&o.dY,h=(c&&e.stopPropagation(),(2==a?o.b:3==a&&o.dJ)&&e.preventDefault(),t);s=h.j;){if("function"==typeof s)u=s(u);else for(var l=s.length;l--;)u=s[l](u);h=h.p}h(u,c)}}return n.q=e,n}function Re(t,e){return t.$==e.$&&wt(t.a,e.a)}function Pe(t,e){var n=[];return Me(t,e,n,0),n}function De(t,e,n,r){var i={$:e,r:n,s:r,t:void 0,u:void 0};return t.push(i),i}function Me(t,e,n,r){if(t!==e){var i=t.$,s=e.$;if(i!==s){if(1!==i||2!==s)return void De(n,0,r,e);e=function(t){for(var e=t.e,n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=e[i].b;return{$:1,c:t.c,d:t.d,e:r,f:t.f,b:t.b}}(e),s=1}switch(s){case 5:for(var a=t.l,o=e.l,u=a.length,c=u===o.length;c&&u--;)c=a[u]===o[u];if(c)return void(e.k=t.k);e.k=e.m();var h=[];return Me(t.k,e.k,h,0),void(h.length>0&&De(n,1,r,h));case 4:for(var l=t.j,f=e.j,d=!1,p=t.k;4===p.$;)d=!0,"object"!=typeof l?l=[l,p.j]:l.push(p.j),p=p.k;for(var _=e.k;4===_.$;)d=!0,"object"!=typeof f?f=[f,_.j]:f.push(_.j),_=_.k;return d&&l.length!==f.length?void De(n,0,r,e):((d?function(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(l,f):l===f)||De(n,2,r,f),void Me(p,_,n,r+1));case 0:return void(t.a!==e.a&&De(n,3,r,e.a));case 1:return void Fe(t,e,n,r,Le);case 2:return void Fe(t,e,n,r,Ne);case 3:if(t.h!==e.h)return void De(n,0,r,e);var g=je(t.d,e.d);g&&De(n,4,r,g);var b=e.i(t.g,e.g);return void(b&&De(n,5,r,b))}}}function Fe(t,e,n,r,i){if(t.c===e.c&&t.f===e.f){var s=je(t.d,e.d);s&&De(n,4,r,s),i(t,e,n,r)}else De(n,0,r,e)}function je(t,e,n){var r;for(var i in t)if("a1"!==i&&"a0"!==i&&"a3"!==i&&"a4"!==i)if(i in e){var s=t[i],a=e[i];s===a&&"value"!==i&&"checked"!==i||"a0"===n&&Re(s,a)||((r=r||{})[i]=a)}else(r=r||{})[i]=n?"a1"===n?"":"a0"===n||"a3"===n?void 0:{f:t[i].f,o:void 0}:"string"==typeof t[i]?"":null;else{var o=je(t[i],e[i]||{},i);o&&((r=r||{})[i]=o)}for(var u in e)u in t||((r=r||{})[u]=e[u]);return r}function Le(t,e,n,r){var i=t.e,s=e.e,a=i.length,o=s.length;a>o?De(n,6,r,{v:o,i:a-o}):a<o&&De(n,7,r,{v:a,e:s});for(var u=a<o?a:o,c=0;c<u;c++){var h=i[c];Me(h,s[c],n,++r),r+=h.b||0}}function Ne(t,e,n,r){for(var i=[],s={},a=[],o=t.e,u=e.e,c=o.length,h=u.length,l=0,f=0,d=r;l<c&&f<h;){var p=o[l],_=u[f],g=p.a,b=_.a,v=p.b,m=_.b,y=void 0,w=void 0;if(g!==b){var A=o[l+1],k=u[f+1];if(A){var C=A.a,S=A.b;w=b===C}if(k){var E=k.a,x=k.b;y=g===E}if(y&&w)Me(v,x,i,++d),Ue(s,i,g,m,f,a),d+=v.b||0,ze(s,i,g,S,++d),d+=S.b||0,l+=2,f+=2;else if(y)d++,Ue(s,i,b,m,f,a),Me(v,x,i,d),d+=v.b||0,l+=1,f+=2;else if(w)ze(s,i,g,v,++d),d+=v.b||0,Me(S,m,i,++d),d+=S.b||0,l+=2,f+=1;else{if(!A||C!==E)break;ze(s,i,g,v,++d),Ue(s,i,b,m,f,a),d+=v.b||0,Me(S,x,i,++d),d+=S.b||0,l+=2,f+=2}}else Me(v,m,i,++d),d+=v.b||0,l++,f++}for(;l<c;){d++;v=(p=o[l]).b;ze(s,i,p.a,v,d),d+=v.b||0,l++}for(;f<h;){var T=T||[];Ue(s,i,(_=u[f]).a,_.b,void 0,T),f++}(i.length>0||a.length>0||T)&&De(n,8,r,{w:i,x:a,y:T})}function Ue(t,e,n,r,i,s){var a=t[n];if(!a)return a={c:0,z:r,r:i,s:void 0},s.push({r:i,A:a}),void(t[n]=a);if(1===a.c){s.push({r:i,A:a}),a.c=2;var o=[];return Me(a.z,r,o,a.r),a.r=i,void(a.s.s={w:o,A:a})}Ue(t,e,n+"_elmW6BL",r,i,s)}function ze(t,e,n,r,i){var s=t[n];if(s){if(0===s.c){s.c=2;var a=[];return Me(r,s.z,a,i),void De(e,9,i,{w:a,A:s})}ze(t,e,n+"_elmW6BL",r,i)}else{var o=De(e,9,i,void 0);t[n]={c:1,z:r,r:i,s:o}}}function $e(t,e,n,r){!function t(e,n,r,i,s,a,o){var u=r[i],c=u.r;for(;c===s;){var h=u.$;if(1===h)$e(e,n.k,u.s,o);else if(8===h){u.t=e,u.u=o,(l=u.s.w).length>0&&t(e,n,l,0,s,a,o)}else if(9===h){u.t=e,u.u=o;var l,f=u.s;if(f)f.A.s=e,(l=f.w).length>0&&t(e,n,l,0,s,a,o)}else u.t=e,u.u=o;if(i++,!(u=r[i])||(c=u.r)>a)return i}var d=n.$;if(4===d){for(var p=n.k;4===p.$;)p=p.k;return t(e,p,r,i,s+1,a,e.elm_event_node_ref)}for(var _=n.e,g=e.childNodes,b=0;b<_.length;b++){s++;var v=1===d?_[b]:_[b].b,m=s+(v.b||0);if(s<=c&&c<=m&&(i=t(g[b],v,r,i,s,m,o),!(u=r[i])||(c=u.r)>a))return i;s=m}return i}(t,e,n,0,0,e.b,r)}function He(t,e,n,r){return 0===n.length?t:($e(t,e,n,r),We(t,n))}function We(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.t,s=Ve(i,r);i===t&&(t=s)}return t}function Ve(t,e){switch(e.$){case 0:return function(t,e,n){var r=t.parentNode,i=Se(e,n);i.elm_event_node_ref||(i.elm_event_node_ref=t.elm_event_node_ref);r&&i!==t&&r.replaceChild(i,t);return i}(t,e.s,e.u);case 4:return Ee(t,e.u,e.s),t;case 3:return t.replaceData(0,t.length,e.s),t;case 1:return We(t,e.s);case 2:return t.elm_event_node_ref?t.elm_event_node_ref.j=e.s:t.elm_event_node_ref={j:e.s,p:e.u},t;case 6:for(var n=e.s,r=0;r<n.i;r++)t.removeChild(t.childNodes[n.v]);return t;case 7:for(var i=(n=e.s).e,s=(r=n.v,t.childNodes[r]);r<i.length;r++)t.insertBefore(Se(i[r],e.u),s);return t;case 9:if(!(n=e.s))return t.parentNode.removeChild(t),t;var a=n.A;return void 0!==a.r&&t.parentNode.removeChild(t),a.s=We(t,n.w),t;case 8:return function(t,e){var n=e.s,r=function(t,e){if(!t)return;for(var n=se.createDocumentFragment(),r=0;r<t.length;r++){var i=t[r].A;ae(n,2===i.c?i.s:Se(i.z,e.u))}return n}(n.y,e);t=We(t,n.w);for(var i=n.x,s=0;s<i.length;s++){var a=i[s],o=a.A,u=2===o.c?o.s:Se(o.z,e.u);t.insertBefore(u,t.childNodes[a.r])}r&&ae(t,r);return t}(t,e);case 5:return e.s(t);default:F(10)}}function qe(t){if(3===t.nodeType)return oe(t.textContent);if(1!==t.nodeType)return oe("");for(var e=E,n=t.attributes,r=n.length;r--;){var i=n[r],s=i.name,a=i.value;e=x(h(be,s,a),e)}var o=t.tagName.toLowerCase(),u=E,c=t.childNodes;for(r=c.length;r--;)u=x(qe(c[r]),u);return l(ce,o,e,u)}i((function(t,e,n,r){return Lt(e,r,t.dc,t.d6,t.d_,(function(e,n){var i=t.d9,s=r.node,a=qe(s);return Je(n,(function(t){var n=i(t),r=Pe(a,n);s=He(s,a,r,e),a=n}))}))}));var Ge=i((function(t,e,n,r){return Lt(e,r,t.dc,t.d6,t.d_,(function(e,n){var r=t.bj&&t.bj(e),i=t.d9,s=se.title,a=se.body,o=qe(a);return Je(n,(function(t){ne=r;var n=i(t),u=ce("body")(E)(n.cC),c=Pe(o,u);a=He(a,o,c,e),o=u,ne=0,s!==n.d3&&(se.title=s=n.d3)}))}))})),Qe="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(t,1e3/60)};function Je(t,e){e(t);var n=0;function r(){n=1===n?0:(Qe(r),e(t),1)}return function(i,s){t=i,s?(e(t),2===n&&(n=1)):(0===n&&Qe(r),n=2)}}function Ke(){return Hr(se.location.href).a||F(1)}n((function(t,e){return h(ai,Wr,xt((function(){e&&history.go(e),t()})))}));var Ye=n((function(t,e){return h(ai,Wr,xt((function(){history.pushState({},"",e),t()})))})),Ze=n((function(t,e){return h(ai,Wr,xt((function(){history.replaceState({},"",e),t()})))})),Xe="undefined"!=typeof window?window:{addEventListener:function(){},removeEventListener:function(){}};r((function(t,e,n){return Ot(xt((function(r){function i(t){Bt(n(t))}return t.addEventListener(e,i,ye&&{passive:!0}),function(){t.removeEventListener(e,i)}})))})),n((function(t,e){var n=gt(t,e);return yr(n)?Tn(n.a):In}));function tn(t,e){return xt((function(n){Qe((function(){var r=document.getElementById(t);n(r?Et(e(r)):function(t){return{$:1,a:t}}(Tr(t)))}))}))}n((function(t,e){return tn(e,(function(e){return e[t](),0}))})),n((function(t,e){return n=function(){return Xe.scroll(t,e),0},xt((function(t){Qe((function(){t(Et(n()))}))}));var n})),r((function(t,e,n){return tn(t,(function(t){return t.scrollLeft=e,t.scrollTop=n,0}))}));var en=r((function(t,e,n){return xt((function(r){function i(t){r(e(n.a9.a(t)))}var s=new XMLHttpRequest;s.addEventListener("error",(function(){i(Gi)})),s.addEventListener("timeout",(function(){i(Ki)})),s.addEventListener("load",(function(){i(function(t,e){return h(200<=e.status&&e.status<300?qi:Wi,function(t){return{bo:t.responseURL,dW:t.status,dX:t.statusText,bN:nn(t.getAllResponseHeaders())}}(e),t(e.response))}(n.a9.b,s))})),Xi(n.cm)&&function(t,e,n){e.upload.addEventListener("progress",(function(r){e.c||Bt(h(ts,t,A(n,Ji({dR:r.loaded,cf:r.total}))))})),e.addEventListener("progress",(function(r){e.c||Bt(h(ts,t,A(n,Qi({dK:r.loaded,cf:r.lengthComputable?Tn(r.total):In}))))}))}(t,s,n.cm.a);try{s.open(n.dm,n.bo,!0)}catch(t){return i(Vi(n.bo))}return function(t,e){for(var n=e.bN;n.b;n=n.b)t.setRequestHeader(n.a.a,n.a.b);t.timeout=e.d2.a||0,t.responseType=e.a9.d,t.withCredentials=e.cy}(s,n),n.cC.a&&s.setRequestHeader("Content-Type",n.cC.a),s.send(n.cC.b),function(){s.c=!0,s.abort()}}))}));function nn(t){if(!t)return Zi;for(var e=Zi,n=t.split("\r\n"),r=n.length;r--;){var i=n[r],s=i.indexOf(": ");if(s>0){var a=i.substring(0,s),o=i.substring(s+2);e=l(ps,a,(function(t){return Tn(Xi(t)?o+", "+t.a:o)}),e)}}return e}var rn=r((function(t,e,n){return{$:0,d:t,b:e,a:n}})),sn=n((function(t,e){return{$:0,d:e.d,b:e.b,a:function(n){return t(e.a(n))}}}));n((function(t,e){return{$:0,a:t,b:e}})),n((function(t,e){return new Blob([e],{type:t})}));n((function(t,e){return t&e})),n((function(t,e){return t|e})),n((function(t,e){return t^e})),n((function(t,e){return e<<t})),n((function(t,e){return e>>t})),n((function(t,e){return e>>>t}));var an=r((function(t,e,n){return function(t,e,n,r){return{$:3,d:ke(t),g:e,h:n,i:r}}(e,{a:t,b:n},on,un)}));function on(t){return h(ln,t,se.createElement("div"))}function un(t,e){return(t.b!==e.b||t.a!==e.a)&&ln(e)}var cn,hn,ln=n((function(t,e){var n,r;return e.innerHTML=fn(t.b,(n=t.a,{highlight:function(t,e){return!e&&Xi(n.bF)&&(e=n.bF.a),"undefined"!=typeof hljs&&e&&hljs.listLanguages().indexOf(e)>=0?hljs.highlight(e,t,!0).value:t},gfm:r=n.c6.a,tables:r&&r.d$,breaks:r&&r.cD,sanitize:n.dO,smartypants:n.dU})),e})),fn=(hn=(cn={}).exports={},function(){var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function e(e){this.tokens=[],this.tokens.links={},this.options=e||h.defaults,this.rules=t.normal,this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t.bullet=/(?:[*+-]|\d+\.)/,t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,t.item=o(t.item,"gm")(/bull/g,t.bullet)(),t.list=o(t.list)(/bull/g,t.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+t.def.source+")")(),t.blockquote=o(t.blockquote)("def",t.def)(),t._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",t.html=o(t.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,t._tag)(),t.paragraph=o(t.paragraph)("hr",t.hr)("heading",t.heading)("lheading",t.lheading)("blockquote",t.blockquote)("tag","<"+t._tag)("def",t.def)(),t.normal=c({},t),t.gfm=c({},t.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),t.gfm.paragraph=o(t.paragraph)("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|")(),t.tables=c({},t.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=t,e.lex=function(t,n){return new e(n).lex(t)},e.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},e.prototype.token=function(e,n,r){var i,s,a,o,u,c,h,l,f;for(e=e.replace(/^ +$/gm,"");e;)if((a=this.rules.newline.exec(e))&&(e=e.substring(a[0].length),a[0].length>1&&this.tokens.push({type:"space"})),a=this.rules.code.exec(e))e=e.substring(a[0].length),a=a[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?a:a.replace(/\n+$/,"")});else if(a=this.rules.fences.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"code",lang:a[2],text:a[3]||""});else if(a=this.rules.heading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:a[1].length,text:a[2]});else if(n&&(a=this.rules.nptable.exec(e))){for(e=e.substring(a[0].length),c={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/\n$/,"").split("\n")},l=0;l<c.align.length;l++)/^ *-+: *$/.test(c.align[l])?c.align[l]="right":/^ *:-+: *$/.test(c.align[l])?c.align[l]="center":/^ *:-+ *$/.test(c.align[l])?c.align[l]="left":c.align[l]=null;for(l=0;l<c.cells.length;l++)c.cells[l]=c.cells[l].split(/ *\| */);this.tokens.push(c)}else if(a=this.rules.lheading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:"="===a[2]?1:2,text:a[1]});else if(a=this.rules.hr.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"hr"});else if(a=this.rules.blockquote.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"blockquote_start"}),a=a[0].replace(/^ *> ?/gm,""),this.token(a,n,!0),this.tokens.push({type:"blockquote_end"});else if(a=this.rules.list.exec(e)){for(e=e.substring(a[0].length),o=a[2],this.tokens.push({type:"list_start",ordered:o.length>1}),i=!1,f=(a=a[0].match(this.rules.item)).length,l=0;l<f;l++)h=(c=a[l]).length,~(c=c.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(h-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+h+"}","gm"),"")),this.options.smartLists&&l!==f-1&&(o===(u=t.bullet.exec(a[l+1])[0])||o.length>1&&u.length>1||(e=a.slice(l+1).join("\n")+e,l=f-1)),s=i||/\n\n(?!\s*$)/.test(c),l!==f-1&&(i="\n"===c.charAt(c.length-1),s||(s=i)),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(c,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(a=this.rules.html.exec(e))e=e.substring(a[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===a[1]||"script"===a[1]||"style"===a[1]),text:a[0]});else if(!r&&n&&(a=this.rules.def.exec(e)))e=e.substring(a[0].length),this.tokens.links[a[1].toLowerCase()]={href:a[2],title:a[3]};else if(n&&(a=this.rules.table.exec(e))){for(e=e.substring(a[0].length),c={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/(?: *\| *)?\n$/,"").split("\n")},l=0;l<c.align.length;l++)/^ *-+: *$/.test(c.align[l])?c.align[l]="right":/^ *:-+: *$/.test(c.align[l])?c.align[l]="center":/^ *:-+ *$/.test(c.align[l])?c.align[l]="left":c.align[l]=null;for(l=0;l<c.cells.length;l++)c.cells[l]=c.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(c)}else if(n&&(a=this.rules.paragraph.exec(e)))e=e.substring(a[0].length),this.tokens.push({type:"paragraph",text:"\n"===a[1].charAt(a[1].length-1)?a[1].slice(0,-1):a[1]});else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"text",text:a[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^_\_([\s\S]+?)_\_(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|_\_)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function r(t,e){if(this.options=e||h.defaults,this.links=t,this.rules=n.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function i(t){this.options=t||{}}function s(t){this.tokens=[],this.token=null,this.options=t||h.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(t,e){return t=t.source,e=e||"",function n(r,i){return r?(i=(i=i.source||i).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(r,i),n):new RegExp(t,e)}}function u(){}function c(t){for(var e,n,r=1;r<arguments.length;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function h(t,n,r){if(r||"function"==typeof n){r||(r=n,n=null);var i,o,u=(n=c({},h.defaults,n||{})).highlight,l=0;try{i=e.lex(t,n)}catch(t){return r(t)}o=i.length;var f=function(t){if(t)return n.highlight=u,r(t);var e;try{e=s.parse(i,n)}catch(e){t=e}return n.highlight=u,t?r(t):r(null,e)};if(!u||u.length<3)return f();if(delete n.highlight,!o)return f();for(;l<i.length;l++)!function(t){"code"!==t.type?--o||f():u(t.text,t.lang,(function(e,n){return e?f(e):null==n||n===t.text?--o||f():(t.text=n,t.escaped=!0,void(--o||f()))}))}(i[l])}else try{return n&&(n=c({},h.defaults,n)),s.parse(e.lex(t,n),n)}catch(t){if(t.message+="\nPlease report this to https://github.com/chjj/marked.",(n||h.defaults).silent)return"<p>An error occured:</p><pre>"+a(t.message+"",!0)+"</pre>";throw t}}n._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=o(n.link)("inside",n._inside)("href",n._href)(),n.reflink=o(n.reflink)("inside",n._inside)(),n.normal=c({},n),n.pedantic=c({},n.normal,{strong:/^_\_(?=\S)([\s\S]*?\S)_\_(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=c({},n.normal,{escape:o(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=c({},n.gfm,{br:o(n.br)("{2,}","*")(),text:o(n.gfm.text)("{2,}","*")()}),r.rules=n,r.output=function(t,e,n){return new r(e,n).output(t)},r.prototype.output=function(t){for(var e,n,r,i,s="";t;)if(i=this.rules.escape.exec(t))t=t.substring(i[0].length),s+=i[1];else if(i=this.rules.autolink.exec(t))t=t.substring(i[0].length),"@"===i[2]?(n=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),r=this.mangle("mailto:")+n):r=n=a(i[1]),s+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(t))){if(i=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),t=t.substring(i[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):a(i[0]):i[0];else if(i=this.rules.link.exec(t))t=t.substring(i[0].length),this.inLink=!0,s+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(t))||(i=this.rules.nolink.exec(t))){if(t=t.substring(i[0].length),e=(i[2]||i[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){s+=i[0].charAt(0),t=i[0].substring(1)+t;continue}this.inLink=!0,s+=this.outputLink(i,e),this.inLink=!1}else if(i=this.rules.strong.exec(t))t=t.substring(i[0].length),s+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(t))t=t.substring(i[0].length),s+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(t))t=t.substring(i[0].length),s+=this.renderer.codespan(a(i[2],!0));else if(i=this.rules.br.exec(t))t=t.substring(i[0].length),s+=this.renderer.br();else if(i=this.rules.del.exec(t))t=t.substring(i[0].length),s+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(t))t=t.substring(i[0].length),s+=this.renderer.text(a(this.smartypants(i[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(i[0].length),r=n=a(i[1]),s+=this.renderer.link(r,null,n);return s},r.prototype.outputLink=function(t,e){var n=a(e.href),r=e.title?a(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,a(t[1]))},r.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},r.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",r=t.length,i=0;i<r;i++)e=t.charCodeAt(i),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},i.prototype.code=function(t,e,n){if(this.options.highlight){var r=this.options.highlight(t,e);null!=r&&r!==t&&(n=!0,t=r)}return e?'<pre><code class="'+this.options.langPrefix+a(e,!0)+'">'+(n?t:a(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:a(t,!0))+"\n</code></pre>"},i.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},i.prototype.html=function(t){return t},i.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(t,e){var n=e?"ol":"ul";return"<"+n+">\n"+t+"</"+n+">\n"},i.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},i.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},i.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},i.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},i.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},i.prototype.strong=function(t){return"<strong>"+t+"</strong>"},i.prototype.em=function(t){return"<em>"+t+"</em>"},i.prototype.codespan=function(t){return"<code>"+t+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(t){return"<del>"+t+"</del>"},i.prototype.link=function(t,e,n){if(this.options.sanitize){try{var r=decodeURIComponent((i=t,i.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})))).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return""}var i,s='<a href="'+t+'"';return e&&(s+=' title="'+e+'"'),s+=">"+n+"</a>"},i.prototype.image=function(t,e,n){var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">"},i.prototype.text=function(t){return t},s.parse=function(t,e,n){return new s(e,n).parse(t)},s.prototype.parse=function(t){this.inline=new r(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},s.prototype.next=function(){return this.token=this.tokens.pop()},s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},s.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},s.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,r,i="",s="";for(n="",t=0;t<this.token.header.length;t++)this.token.align[t],n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(i+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",r=0;r<e.length;r++)n+=this.renderer.tablecell(this.inline.output(e[r]),{header:!1,align:this.token.align[r]});s+=this.renderer.tablerow(n)}return this.renderer.table(i,s);case"blockquote_start":for(s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":s="";for(var a=this.token.ordered;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,a);case"list_item_start":for(s="";"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var o=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(o);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},u.exec=u,h.options=h.setOptions=function(t){return c(h.defaults,t),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},h.Parser=s,h.parser=s.parse,h.Renderer=i,h.Lexer=e,h.lexer=e.lex,h.InlineLexer=r,h.inlineLexer=r.output,h.parse=h,void 0!==cn&&"object"==typeof hn?cn.exports=h:"function"==typeof define&&define.amd?define((function(){return h})):this.marked=h}.call(function(){return this||("undefined"!=typeof window?window:global)}()),cn.exports);var dn=n((function(t,e){var n="g";t.dp&&(n+="m"),t.cG&&(n+="i");try{return Tn(new RegExp(e,n))}catch(t){return In}})),pn=(n((function(t,e){return null!==e.match(t)})),r((function(t,e,n){for(var r,i=[],s=0,a=n,o=e.lastIndex,u=-1;s++<t&&(r=e.exec(a))&&u!=e.lastIndex;){for(var c=r.length-1,h=new Array(c);c>0;){var l=r[c];h[--c]=l?Tn(l):In}i.push(f(c_,r[0],r.index,s,I(h))),u=e.lastIndex}return e.lastIndex=o,I(i)})),i((function(t,e,n,r){var i=0;return r.replace(e,(function(e){if(i++>=t)return e;for(var r=arguments.length-3,s=new Array(r);r>0;){var a=arguments[r];s[--r]=a?Tn(a):In}return n(f(c_,e,arguments[arguments.length-2],i,I(s)))}))}))),_n=(r((function(t,e,n){for(var r=n,i=[],s=e.lastIndex,a=e.lastIndex;t--;){var o=e.exec(r);if(!o)break;i.push(r.slice(s,o.index)),s=e.lastIndex}return i.push(r.slice(s)),e.lastIndex=a,I(i)})),1),gn=2,bn=0,vn=T,mn=r((function(t,e,n){for(;;){if(-2===n.$)return e;var r=n.b,i=n.c,s=n.d,a=n.e,o=t,u=l(t,r,i,l(mn,t,e,a));t=o,e=u,n=s}})),yn=function(t){return l(mn,r((function(t,e,n){return h(vn,A(t,e),n)})),E,t)},wn=M,An=(r((function(t,e,r){var i=r.c,s=r.d,a=n((function(e,n){if(e.$){var r=e.a;return l(wn,t,n,r)}var i=e.a;return l(wn,a,n,i)}));return l(wn,a,l(wn,t,e,s),i)})),function(t){return{$:1,a:t}}),kn=n((function(t,e){return{$:3,a:t,b:e}})),Cn=n((function(t,e){return{$:0,a:t,b:e}})),Sn=n((function(t,e){return{$:1,a:t,b:e}})),En=function(t){return{$:0,a:t}},xn=function(t){return{$:2,a:t}},Tn=function(t){return{$:0,a:t}},In={$:1},Bn=Y,On=C,Rn=kt,Pn=nt,Dn=n((function(t,e){return h(J,t,B(e))})),Mn=n((function(t,e){return I(h(Q,t,e))})),Fn=function(t){return h(Dn,"\n    ",h(Mn,"\n",t))},jn=r((function(t,e,n){for(;;){if(!n.b)return e;var r=n.a,i=n.b,s=t,a=h(t,r,e);t=s,e=a,n=i}})),Ln=function(t){return l(jn,n((function(t,e){return e+1})),0,t)},Nn=O,Un=r((function(t,e,n){for(;;){if(!(y(t,e)<1))return n;var r=t,i=e-1,s=h(vn,e,n);t=r,e=i,n=s}})),zn=n((function(t,e){return l(Un,t,e,E)})),$n=n((function(t,e){return l(Nn,t,h(zn,0,Ln(e)-1),e)})),Hn=function(t){var e=t.charCodeAt(0);return 55296<=e&&e<=56319?1024*(e-55296)+t.charCodeAt(1)-56320+65536:e},Wn=function(t){var e=Hn(t);return 97<=e&&e<=122},Vn=function(t){var e=Hn(t);return e<=90&&65<=e},qn=function(t){return Wn(t)||Vn(t)},Gn=function(t){var e=Hn(t);return e<=57&&48<=e},Qn=function(t){return Wn(t)||Vn(t)||Gn(t)},Jn=function(t){return l(jn,vn,E,t)},Kn=function(t){var e=t.charCodeAt(0);return isNaN(e)?In:Tn(55296<=e&&e<=56319?A(t[0]+t[1],t.slice(2)):A(t[0],t.slice(1)))},Yn=n((function(t,e){return"\n\n("+Pn(t+1)+") "+Fn(Zn(e))})),Zn=function(t){return h(Xn,t,E)},Xn=n((function(t,e){t:for(;;)switch(t.$){case 0:var n=t.a,r=t.b,i=function(){var t=Kn(n);if(1===t.$)return!1;var e=t.a,r=e.a,i=e.b;return qn(r)&&h(Bn,Qn,i)}(),s=r,a=h(vn,i?"."+n:"['"+n+"']",e);t=s,e=a;continue t;case 1:var o=t.a,u=(r=t.b,"["+Pn(o)+"]");s=r,a=h(vn,u,e);t=s,e=a;continue t;case 2:var c=t.a;if(c.b){if(c.b.b){var l=(e.b?"The Json.Decode.oneOf at json"+h(Dn,"",Jn(e)):"Json.Decode.oneOf")+" failed in the following "+Pn(Ln(c))+" ways:";return h(Dn,"\n\n",h(vn,l,h($n,Yn,c)))}t=s=r=c.a,e=a=e;continue t}return"Ran into a Json.Decode.oneOf with no possibilities"+(e.b?" at json"+h(Dn,"",Jn(e)):"!");default:var f=t.a,d=t.b;return(l=e.b?"Problem with the value at json"+h(Dn,"",Jn(e))+":\n\n    ":"Problem with the given value:\n\n")+(Fn(h(Rn,4,d))+"\n\n")+f}})),tr=i((function(t,e,n,r){return{$:0,a:t,b:e,c:n,d:r}})),er=[],nr=L,rr=n((function(t,e){return z(e)/z(t)})),ir=function(t){return t},sr=nr(h(rr,2,32)),ar=f(tr,0,sr,er,er),or=P,ur=(n((function(t,e){return t(e)})),n((function(t,e){return e(t)}))),cr=m,hr=N,lr=function(t){return t.length},fr=n((function(t,e){return y(t,e)>0?t:e})),dr=D,pr=n((function(t,e){for(;;){var n=h(dr,32,t),r=n.a,i=n.b,s=h(vn,{$:0,a:r},e);if(!i.b)return Jn(s);t=i,e=s}})),_r=function(t){return t.a},gr=n((function(t,e){for(;;){var n=nr(e/32);if(1===n)return h(dr,32,t).a;t=h(pr,t,E),e=n}})),br=n((function(t,e){if(e.h){var n=32*e.h,r=hr(h(rr,32,n-1)),i=t?Jn(e.k):e.k,s=h(gr,i,e.h);return f(tr,lr(e.j)+n,h(fr,5,r*sr),s,e.j)}return f(tr,lr(e.j),sr,er,e.j)})),vr=s((function(t,e,n,r,i){for(;;){if(e<0)return h(br,!1,{k:r,h:n/32|0,j:i});var s={$:1,a:l(or,32,e,t)};t=t,e=e-32,n=n,r=h(vn,s,r),i=i}})),mr=n((function(t,e){if(t<=0)return ar;var n=t%32,r=l(or,n,t-n,e);return d(vr,e,t-n-32,t,E,r)})),yr=function(t){return!t.$},wr=ft,Ar=dt,kr=function(t){return{$:0,a:t}},Cr=function(t){switch(t.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},Sr=function(t){return{$:1,a:t}},Er=function(t){return{$:0,a:t}},xr=function(t){return t},Tr=xr,Ir=a((function(t,e,n,r,i,s){return{c4:s,bP:e,b0:r,b2:n,b5:t,b6:i}})),Br=Z,Or=function(t){return t.length},Rr=K,Pr=n((function(t,e){return t<1?e:l(Rr,t,Or(e),e)})),Dr=et,Mr=function(t){return""===t},Fr=n((function(t,e){return t<1?"":l(Rr,0,t,e)})),jr=function(t){for(var e=0,n=t.charCodeAt(0),r=43==n||45==n?1:0,i=r;i<t.length;++i){var s=t.charCodeAt(i);if(s<48||57<s)return In;e=10*e+s-48}return i==r?In:Tn(45==n?-e:e)},Lr=s((function(t,e,n,r,i){if(Mr(i)||h(Br,"@",i))return In;var s=h(Dr,":",i);if(s.b){if(s.b.b)return In;var a=s.a,o=jr(h(Pr,a+1,i));if(1===o.$)return In;var u=o;return Tn(p(Ir,t,h(Fr,a,i),u,e,n,r))}return Tn(p(Ir,t,i,In,e,n,r))})),Nr=i((function(t,e,n,r){if(Mr(r))return In;var i=h(Dr,"/",r);if(i.b){var s=i.a;return d(Lr,t,h(Pr,s,r),e,n,h(Fr,s,r))}return d(Lr,t,"/",e,n,r)})),Ur=r((function(t,e,n){if(Mr(n))return In;var r=h(Dr,"?",n);if(r.b){var i=r.a;return f(Nr,t,Tn(h(Pr,i+1,n)),e,h(Fr,i,n))}return f(Nr,t,In,e,n)})),zr=n((function(t,e){if(Mr(e))return In;var n=h(Dr,"#",e);if(n.b){var r=n.a;return l(Ur,t,Tn(h(Pr,r+1,e)),h(Fr,r,e))}return l(Ur,t,In,e)})),$r=X,Hr=function(t){return h($r,"http://",t)?h(zr,0,h(Pr,7,t)):h($r,"https://",t)?h(zr,1,h(Pr,8,t)):In},Wr=function(t){},Vr=Et,qr=Vr(0),Gr=i((function(t,e,n,r){if(r.b){var i=r.a,s=r.b;if(s.b){var a=s.a,o=s.b;if(o.b){var u=o.a,c=o.b;if(c.b){var d=c.a,p=c.b;return h(t,i,h(t,a,h(t,u,h(t,d,n>500?l(jn,t,e,Jn(p)):f(Gr,t,e,n+1,p)))))}return h(t,i,h(t,a,h(t,u,e)))}return h(t,i,h(t,a,e))}return h(t,i,e)}return e})),Qr=r((function(t,e,n){return f(Gr,t,e,0,n)})),Jr=n((function(t,e){return l(Qr,n((function(e,n){return h(vn,t(e),n)})),E,e)})),Kr=Tt,Yr=n((function(t,e){return h(Kr,(function(e){return Vr(t(e))}),e)})),Zr=r((function(t,e,n){return h(Kr,(function(e){return h(Kr,(function(n){return Vr(h(t,e,n))}),n)}),e)})),Xr=function(t){return l(Qr,Zr(vn),Vr(E),t)},ti=$t,ei=n((function(t,e){var n=e;return Ot(h(Kr,ti(t),n))})),ni=r((function(t,e,n){return h(Yr,(function(t){return 0}),Xr(h(Jr,ei(t),e)))})),ri=r((function(t,e,n){return Vr(0)})),ii=n((function(t,e){return h(Yr,t,e)}));Nt.Task=Ut(qr,ni,ri,ii);var si=Wt("Task"),ai=n((function(t,e){return si(h(Yr,t,e))})),oi=function(t){var e=t.dB,r=t.dC,i=function(){i.a(e(Ke()))};return Ge({bj:function(t){return i.a=t,Xe.addEventListener("popstate",i),Xe.navigator.userAgent.indexOf("Trident")<0||Xe.addEventListener("hashchange",i),n((function(e,n){if(!n.ctrlKey&&!n.metaKey&&!n.shiftKey&&n.button<1&&!e.target&&!e.hasAttribute("download")){n.preventDefault();var i=e.href,s=Ke(),a=Hr(i).a;t(r(a&&s.b5===a.b5&&s.bP===a.bP&&s.b2.a===a.b2.a?Er(a):Sr(i)))}}))},dc:function(e){return l(t.dc,e,Ke(),i)},d9:t.d9,d6:t.d6,d_:t.d_})},ui={$:0},ci=n((function(t,e){return{$:1,a:t,b:e}})),hi=n((function(t,e){return{$:0,a:t,b:e}})),li={$:39},fi={$:40},di=function(t){return{$:4,a:t}},pi=function(t){return{$:3,a:t}},_i=function(t){return{$:5,a:t}},gi=Vt,bi=o((function(t,e,n,r,i,s,a){return{aO:e,aP:t,aQ:r,aE:n,a6:i,aK:s,bp:a}})),vi=st,mi=lt,yi=function(t){return{$:1,a:t}},wi=ut,Ai=h(mi,(function(t){switch(t){case"pcm":return kr(1);case"waveform":return kr(0);default:return yi("invalid AudioEmulation value")}}),wi),ki=h(mi,(function(t){switch(t){case"cycle":return kr(0);case"instruction":return kr(1);default:return yi("invalid CpuEmulation value")}}),wi),Ci=h(mi,(function(t){switch(t){case"pal":return kr(0);case"ntsc":return kr(1);case"secam":return kr(2);default:return yi("invalid TvMode value")}}),wi),Si=it,Ei=function(t){return{$:11,g:t}},xi=function(t){return Ei(I([h(wr,Tn,t),kr(In)]))},Ti=Ar(ur),Ii=ct,Bi=_t,Oi=function(t){return{$:5,c:t}},Ri=ot,Pi=r((function(t,e,n){return h(mi,(function(r){var i=h(Bi,t,r);if(i.$)return kr(n);var s=i.a,a=h(Bi,Ei(I([e,Oi(n)])),s);if(a.$){var o=a.a;return yi(Zn(o))}var u=a.a;return kr(u)}),Ri)})),Di=i((function(t,e,n,r){return h(Ti,l(Pi,h(Ii,t,Ri),e,n),r)})),Mi=r((function(t,e,n){return h(Ti,h(Ii,t,e),n)})),Fi=f(Di,"phosphorEmulation",xi(vi),In,f(Di,"audioEmulation",xi(Ai),In,f(Di,"cpuEmulation",xi(ki),In,f(Di,"firstVisibleLine",xi(Si),In,f(Di,"rngSeed",xi(Si),In,l(Mi,"volume",Si,l(Mi,"emulatePaddles",vi,l(Mi,"tvMode",Ci,l(Mi,"cartridgeType",wi,l(Mi,"name",wi,l(Mi,"hash",wi,kr((function(t){return function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return function(o){return function(u){return function(c){return function(h){return{cB:c,bB:n,cM:u,bH:i,bL:o,Q:t,az:e,dF:h,cc:a,cp:r,eb:s}}}}}}}}}}}}))))))))))))),ji=n((function(t,e){return{cU:e,de:t}})),Li=l(Ar,ji,h(Ii,"key",wi),h(Ii,"description",wi)),Ni=h(mi,(function(t){switch(t){case"wide":return kr(1);case"narrow":return kr(0);default:return yi("invalid media value")}}),wi),Ui=at,zi=l(Mi,"uiSize",Si,f(Di,"uiMode",xi(Ni),In,l(Mi,"virtualJoystickSensitivity",Si,l(Mi,"leftHanded",vi,f(Di,"touchControls",xi(vi),In,l(Mi,"videoSync",vi,l(Mi,"gammaCorrection",Ui,l(Mi,"phosphorEmulation",vi,l(Mi,"smoothScaling",vi,l(Mi,"audioEmulation",Ai,l(Mi,"volume",Si,l(Mi,"cpuEmulation",ki,kr((function(t){return function(e){return function(n){return function(r){return function(i){return function(s){return function(a){return function(o){return function(u){return function(c){return function(h){return function(l){return{cB:n,cM:t,c5:s,df:u,dF:i,dV:r,d4:o,d5:h,cq:l,d8:a,ea:c,eb:e}}}}}}}}}}}}})))))))))))))),$i=function(t){return{$:3,b:t}},Hi=g(pt,bi,h(Ii,"cartridges",$i(Fi)),h(Ii,"cartridgeTypes",$i(Li)),h(Ii,"settings",zi),h(Ii,"defaultSettings",zi),h(Ii,"touchSupport",vi),h(Ii,"version",wi),h(Ii,"wasUpdated",vi)),Wi=n((function(t,e){return{$:3,a:t,b:e}})),Vi=function(t){return{$:0,a:t}},qi=n((function(t,e){return{$:4,a:t,b:e}})),Gi={$:2},Qi=function(t){return{$:1,a:t}},Ji=function(t){return{$:0,a:t}},Ki={$:1},Yi={$:-2},Zi=Yi,Xi=function(t){return!t.$},ts=Ht,es=w,ns=n((function(t,e){t:for(;;){if(-2===e.$)return In;var n=e.b,r=e.c,i=e.d,s=e.e;switch(h(es,t,n)){case 0:t=t,e=i;continue t;case 1:return Tn(r);default:t=t,e=s;continue t}}})),rs=s((function(t,e,n,r,i){return{$:-1,a:t,b:e,c:n,d:r,e:i}})),is=s((function(t,e,n,r,i){if(-1!==i.$||i.a){if(-1!==r.$||r.a||-1!==r.d.$||r.d.a)return d(rs,t,e,n,r,i);r.a,_=r.b,g=r.c;var s=r.d,a=(s.a,s.b),o=s.c,u=s.d,c=s.e;v=r.e;return d(rs,0,_,g,d(rs,1,a,o,u,c),d(rs,1,e,n,v,i))}i.a;var h=i.b,l=i.c,f=i.d,p=i.e;if(-1!==r.$||r.a)return d(rs,t,h,l,d(rs,0,e,n,r,f),p);r.a;var _=r.b,g=r.c,b=r.d,v=r.e;return d(rs,0,e,n,d(rs,1,_,g,b,v),d(rs,1,h,l,f,p))})),ss=r((function(t,e,n){if(-2===n.$)return d(rs,0,t,e,Yi,Yi);var r=n.a,i=n.b,s=n.c,a=n.d,o=n.e;switch(h(es,t,i)){case 0:return d(is,r,i,s,l(ss,t,e,a),o);case 1:return d(rs,r,i,e,a,o);default:return d(is,r,i,s,a,l(ss,t,e,o))}})),as=r((function(t,e,n){var r=l(ss,t,e,n);if(-1!==r.$||r.a)return r;r.a;var i=r.b,s=r.c,a=r.d,o=r.e;return d(rs,1,i,s,a,o)})),os=function(t){if(-1===t.$&&-1===t.d.$&&-1===t.e.$){if(-1!==t.e.d.$||t.e.d.a){t.a,i=t.b,s=t.c;var e=t.d,n=(e.a,o=e.b,u=e.c,c=e.d,h=e.e,t.e);n.a,f=n.b,p=n.c,r=n.d,m=n.e;return d(rs,1,i,s,d(rs,0,o,u,c,h),d(rs,0,f,p,r,m))}t.a;var r,i=t.b,s=t.c,a=t.d,o=(a.a,a.b),u=a.c,c=a.d,h=a.e,l=t.e,f=(l.a,l.b),p=l.c,_=((r=l.d).a,r.b),g=r.c,b=r.d,v=r.e,m=l.e;return d(rs,0,_,g,d(rs,1,i,s,d(rs,0,o,u,c,h),b),d(rs,1,f,p,v,m))}return t},us=function(t){if(-1===t.$&&-1===t.d.$&&-1===t.e.$){if(-1!==t.d.d.$||t.d.d.a){t.a,i=t.b,s=t.c;var e=t.d,n=(e.a,o=e.b,u=e.c,e.d),r=(_=e.e,t.e);r.a,b=r.b,v=r.c,m=r.d,y=r.e;return d(rs,1,i,s,d(rs,0,o,u,n,_),d(rs,0,b,v,m,y))}t.a;var i=t.b,s=t.c,a=t.d,o=(a.a,a.b),u=a.c,c=a.d,h=(c.a,c.b),l=c.c,f=c.d,p=c.e,_=a.e,g=t.e,b=(g.a,g.b),v=g.c,m=g.d,y=g.e;return d(rs,0,o,u,d(rs,1,h,l,f,p),d(rs,1,i,s,_,d(rs,0,b,v,m,y)))}return t},cs=o((function(t,e,n,r,i,s,a){if(-1!==s.$||s.a){t:for(;;){if(-1===a.$&&1===a.a){if(-1===a.d.$){if(1===a.d.a){a.a,a.d.a;return us(e)}break t}a.a,a.d;return us(e)}break t}return e}s.a;var o=s.b,u=s.c,c=s.d,h=s.e;return d(rs,n,o,u,c,d(rs,0,r,i,h,a))})),hs=function(t){if(-1===t.$&&-1===t.d.$){var e=t.a,n=t.b,r=t.c,i=t.d,s=i.a,a=i.d,o=t.e;if(1===s){if(-1!==a.$||a.a){var u=os(t);if(-1===u.$){var c=u.a,h=u.b,l=u.c,f=u.d,p=u.e;return d(is,c,h,l,hs(f),p)}return Yi}a.a;return d(rs,e,n,r,hs(i),o)}return d(rs,e,n,r,hs(i),o)}return Yi},ls=n((function(t,e){if(-2===e.$)return Yi;var n=e.a,r=e.b,i=e.c,s=e.d,a=e.e;if(y(t,r)<0){if(-1===s.$&&1===s.a){s.a;var o=s.d;if(-1!==o.$||o.a){var u=os(e);if(-1===u.$){var c=u.a,l=u.b,f=u.c,p=u.d,g=u.e;return d(is,c,l,f,h(ls,t,p),g)}return Yi}o.a;return d(rs,n,r,i,h(ls,t,s),a)}return d(rs,n,r,i,h(ls,t,s),a)}return h(fs,t,_(cs,t,e,n,r,i,s,a))})),fs=n((function(t,e){if(-1===e.$){var n=e.a,r=e.b,i=e.c,s=e.d,a=e.e;if(b(t,r)){var o=function(t){for(;;){if(-1!==t.$||-1!==t.d.$)return t;t=t.d}}(a);if(-1===o.$){var u=o.b,c=o.c;return d(is,n,u,c,s,hs(a))}return Yi}return d(is,n,r,i,s,h(ls,t,a))}return Yi})),ds=n((function(t,e){var n=h(ls,t,e);if(-1!==n.$||n.a)return n;n.a;var r=n.b,i=n.c,s=n.d,a=n.e;return d(rs,1,r,i,s,a)})),ps=r((function(t,e,n){var r=e(h(ns,t,n));if(r.$)return h(ds,t,n);var i=r.a;return l(as,t,i,n)})),_s=r((function(t,e,n){return e(t(n))})),gs=n((function(t,e){return l(rn,"",xr,h(_s,e,t))})),bs=function(t){return{$:4,a:t}},vs={$:2},ms={$:1},ys=n((function(t,e){if(e.$){var n=e.a;return An(t(n))}var r=e.a;return En(r)})),ws=n((function(t,e){switch(e.$){case 0:var n=e.a;return An({$:0,a:n});case 1:return An(ms);case 2:return An(vs);case 3:var r=e.a;return An(function(t){return{$:3,a:t}}(r.dW));default:var i=e.b;return h(ys,bs,t(i))}})),As={cB:1,cM:0,c5:1,df:!1,dF:!0,dV:!1,d4:In,d5:In,cq:100,d8:!0,ea:10,eb:80},ks={$:0},Cs=function(t){return{$:1,a:t}},Ss=n((function(t,e){return{b9:t,cj:e}})),Es=Vr(h(Ss,Zi,E)),xs=function(t){return xt((function(e){var n=t.f;2===n.$&&n.c&&n.c(),t.f=null,e(Et(0))}))},Ts=Ot,Is=r((function(t,e,n){t:for(;;){if(e.b){var r=e.a,i=e.b;if(r.$){var s=r.a;return h(Kr,(function(e){var r=s.cm;if(1===r.$)return l(Is,t,i,n);var a=r.a;return l(Is,t,i,l(as,a,e,n))}),Ts(l(en,t,ti(t),s)))}var a=r.a,o=h(ns,a,n);if(1===o.$){t=t,e=i,n=n;continue t}var u=o.a;return h(Kr,(function(e){return l(Is,t,i,h(ds,a,n))}),xs(u))}return Vr(n)}})),Bs=i((function(t,e,n,r){return h(Kr,(function(t){return Vr(h(Ss,t,n))}),l(Is,t,e,r.b9))})),Os=r((function(t,e,n){var r=t(e);if(r.$)return n;var i=r.a;return h(vn,i,n)})),Rs=n((function(t,e){return l(Qr,Os(t),E,e)})),Ps=i((function(t,e,n,r){var i=r.a,s=r.b;return b(e,i)?Tn(h(ti,t,s(n))):In})),Ds=r((function(t,e,n){var r=e.a,i=e.b;return h(Kr,(function(t){return Vr(n)}),Xr(h(Rs,l(Ps,t,r,i),n.cj)))})),Ms=n((function(t,e){if(e.$){var n=e.a;return Cs({cy:n.cy,cC:n.cC,a9:h(sn,t,n.a9),bN:n.bN,dm:n.dm,d2:n.d2,cm:n.cm,bo:n.bo})}var r=e.a;return{$:0,a:r}})),Fs=n((function(t,e){return{$:0,a:t,b:e}})),js=n((function(t,e){var n=e.a,r=e.b;return h(Fs,n,h(_s,r,t))}));Nt.Http=Ut(Es,Bs,Ds,Ms,js);var Ls=Wt("Http"),Ns=function(t){return function(t){return Ls(Cs({cy:!1,cC:t.cC,a9:t.a9,bN:t.bN,dm:t.dm,d2:t.d2,cm:t.cm,bo:t.bo}))}({cC:ks,a9:t.a9,bN:E,dm:"GET",d2:In,cm:In,bo:t.bo})},Us=n((function(t,e){return e.$?In:t(e.a)})),zs=n((function(t,e){return l(Qr,n((function(e,n){return t(e)?h(vn,e,n):n})),E,e)})),$s=function(t){if(t.b){var e=t.a;t.b;return Tn(e)}return In},Hs=n((function(t,e){if(e.$)return In;var n=e.a;return Tn(t(n))})),Ws=I([A(2,"emulation"),A(1,"settings"),A(0,"cartridges"),A(3,"help"),A(4,"about")]),Vs=function(t){var e=t.c4;return h(Us,(function(t){return l(_s,zs((function(e){return b(e.b,t)})),h(_s,$s,Hs(_r)),Ws)}),e)},qs=Ze,Gs=function(t){return t.b},Qs=n((function(t,e){return e.$?t:e.a})),Js=function(t){return"#"+l(_s,zs((function(e){return b(e.a,t)})),h(_s,$s,h(_s,Hs(Gs),Qs(""))),Ws)},Ks=n((function(t,e){return l(jn,function(t){return n((function(e,n){return n.push(t(e)),n}))}(t),[],e)})),Ys=Ct,Zs=Zt("watchMedia_",Ks(Ys)),Xs=Zs,ta=function(t){return Xs(I(["(max-width: "+Pn(750*t/100|0)+"px)"]))},ea=r((function(t,e,n){var r,i=h(Qs,0,Vs(e)),s=function(t){return h(gs,(function(e){if(e.$)return fi;var n=e.a;return t(n)}),ws(En))},a=(r=h(Bi,Hi,t)).$?{aO:E,aP:E,aQ:As,aE:As,a6:!1,aK:"[unknown]",bp:!1}:r.a,o={cE:"",aO:a.aO,cF:0,aP:a.aP,cI:In,cL:{cK:0,cV:0,cW:0},cN:In,cO:i,aQ:a.aQ,cZ:!1,c_:ui,c7:In,de:n,dg:In,dh:!0,dj:In,dl:a.bp?A(Tn(li),h(hi,"Stellerator has been updated to version "+a.aK+".",A("Changelog","Close"))):A(In,h(ci,"","")),dN:In,aE:a.aE,dS:!1,dT:!1,a6:a.a6,aK:a.aK};return A(o,gi(I([h(qs,n,Js(i)),ta(o.aE.cq),Ns({a9:s(pi),bo:"doc/stellerator.md"}),Ns({a9:s(di),bo:"CHANGELOG.md"}),Ns({a9:s(_i),bo:"LICENSE.md"})])))})),na=function(t){return{$:0,a:t}},ra=h(_s,Vs,h(_s,Hs((function(t){return{$:1,a:t}})),Qs(na(Js(0))))),ia=n((function(t,e){if(1===t.$)return e;var n=t.a;return e+":"+Pn(n)})),sa=r((function(t,e,n){return 1===e.$?n:S(n,S(t,e.a))})),aa=function(t){return{$:20,a:t}},oa=function(t){return{$:34,a:t}},ua=function(t){return{$:33,a:t}},ca=Vt,ha=function(t){return{$:3,a:t}},la={$:1},fa=function(t){return{$:2,a:t}},da=h(mi,(function(t){switch(t){case"stopped":return kr(ui);case"paused":return kr(la);case"running":return h(wr,fa,xi(h(Ii,"frequency",Ui)));case"error":return h(wr,ha,h(Ii,"error",wi));default:return yi("invalid emulation state")}}),h(Ii,"state",wi)),pa=n((function(t,e){if(e.$){var n=e.a;return An(n)}var r=e.a;return En(t(r))})),_a=ee("onEmulationStateChange_",Ri),ga=n((function(t,e){return e.$?t:e.a})),ba=function(t){return _a(h(_s,Bi(da),h(_s,pa(t),ga(fi))))},va=h(mi,(function(t){switch(t){case"pause":return kr(0);case"reset":return kr(1);case"fullscreen":return kr(2);default:return yi("invalid input driver event")}}),wi),ma=ee("onInputDriverEvent_",Ri),ya=function(t){return ma(h(_s,Bi(va),h(_s,pa(t),ga(fi))))},wa=r((function(t,e,n){return t(e(n))})),Aa=ee("onNewCartridges_",Ri),ka=ee("onMediaUpdate_",$i(vi)),Ca=ka,Sa=Ca(h(_s,$s,h(_s,Hs((function(t){return{$:2,a:t?0:1}})),Qs(fi)))),Ea={$:4},xa=function(t){return{$:9,a:t}},Ta={$:31},Ia=Zt("addCartridge_",(function(t){return null})),Ba=Ia(0),Oa=Zt("blurCurrentElement_",(function(t){return null})),Ra=Oa(0),Pa=n((function(t,e){for(;;){if(!e.b)return!1;var n=e.a,r=e.b;if(t(n))return!0;t=t,e=r}})),Da=function(t){return!t},Ma=n((function(t,e){return!h(Pa,h(wa,Da,t),e)})),Fa=function(t){return t.toUpperCase()},ja=function(t){return I(t.trim().split(/\s+/g))},La=n((function(t,e){var n=ja(Fa(t));return h(zs,(function(t){return h(Ma,(function(e){return h(Br,e,Fa(t.az))}),n)}),e)})),Na=function(t){return h(La,t.cE,t.aP)},Ua=Zt("deleteAllCartridges_",(function(t){return null})),za=Ua(0),$a=Zt("deleteCartridge_",Ys),Ha=$a,Wa=n((function(t,e){for(;;){if(!e.b)return In;var n=e.a,r=e.b;if(t(n))return Tn(n);t=t,e=r}})),Va=R,qa=n((function(t,e){var n=h(Va,h(_s,(function(t){return t.az}),Fa),t),r=function(t){if(t.b&&t.b.b){var i=t.a,s=t.b,a=s.a,o=s.b;return b(i.Q,e)?Tn(a):r(h(vn,a,o))}return $s(n)};return r(S(n,S(n,n)))})),Ga=gi(E),Qa=Zt("pauseEmulation_",(function(t){return null})),Ja=Qa(0),Ka=n((function(t,e){var n=h(Va,h(_s,(function(t){return t.az}),Fa),t),r=function(t){if(t.b&&t.b.b){var i=t.a,s=t.b,a=s.a,o=s.b;return b(a.Q,e)?Tn(i):r(h(vn,a,o))}return $s(Jn(n))};return r(S(n,S(n,n)))})),Ya=Ye,Za=Zt("resetEmulation_",(function(t){return null})),Xa=Za(0),to=Zt("resumeEmulation_",(function(t){return null})),eo=to(0),no=Zt("saveCartridge_",Ys),ro=no,io=Zt("scrollIntoView_",(function(t){var e=t.a,n=t.b;return h(Ks,xr,I([Ys(e),Ys(n)]))})),so=n((function(t,e){var n=function(){switch(t){case 0:return"start";case 1:return"center";case 2:return"end";default:return"nearest"}}();return io(A(n,e))})),ao=Zt("scrollToTop_",(function(t){return null})),oo=ao(0),uo=function(t){return l(_s,Us((function(e){return h(Wa,(function(t){return b(t.Q,e)}),Na(t))})),Hs((function(t){return t.Q})),t.cN)},co=Ct,ho=Zt("setLimitFramerate_",co),lo=ho,fo=function(t){return Ys(t?"amateur":"pro")},po=function(t){return l(jn,n((function(t,e){var n=t.a,r=t.b;return l(St,n,r,e)})),{},t)},_o=function(t){return po(I([A("difficultyP0",fo(t.cV)),A("difficultyP1",fo(t.cW)),A("color",(e=t.cK,Ys(e?"bw":"color")))]));var e},go=Zt("startEmulation_",xr),bo=n((function(t,e){return go(po(I([A("hash",Ys(t)),A("switches",_o(e))])))})),vo=Zt("stopEmulation_",(function(t){return null})),mo=vo(0),yo=Zt("toggleFullscreen_",(function(t){return null})),wo=yo(0),Ao=function(t){return Ys(1===t?"pcm":"waveform")},ko=function(t){return Ys(t?"instruction":"cycle")},Co=i((function(t,e,n,r){return h(Qs,r,h(Hs,(function(n){return h(vn,A(t,e(n)),r)}),n))})),So=function(t){switch(t){case 0:return Ys("pal");case 1:return Ys("ntsc");default:return Ys("secam")}},Eo=Ct,xo=Zt("updateCartridge_",xr),To=function(t){return xo(po(f(Co,"phosphorEmulation",co,(e=t).dF,f(Co,"audioEmulation",Ao,e.cB,f(Co,"cpuEmulation",ko,e.cM,f(Co,"firstVisibleLine",Eo,e.bL,f(Co,"rngSeed",Eo,e.cc,I([A("hash",Ys(e.Q)),A("name",Ys(e.az)),A("cartridgeType",Ys(e.bB)),A("tvMode",So(e.cp)),A("emulatePaddles",co(e.bH)),A("volume",Eo(e.eb))]))))))));var e},Io=r((function(t,e,n){switch(e.$){case 0:var r=e.a;return k(n,{az:r});case 1:var i=e.a,s=h(Qs,n.bB,h(Hs,(function(t){return t.de}),h(Wa,(function(t){return b(t.de,i)}),t)));return k(n,{bB:s});case 2:var a=e.a;return k(n,{cp:a});case 3:var o=e.a;return k(n,{bH:o});case 4:var u=e.a,c=h(Us,(function(t){return t>=0?Tn(t):n.cc}),u);return k(n,{cc:c});case 5:var l=e.a,f=h(Us,(function(t){return t>=0&&t<100?Tn(t):n.bL}),l);return k(n,{bL:f});case 6:var d=e.a;return k(n,{cM:d});case 7:d=e.a;return k(n,{cB:d});case 8:d=e.a;return k(n,{dF:d});default:var p=e.a;return k(n,{eb:p})}})),Bo=Zt("updateConsoleSwitches_",xr),Oo=h(_s,_o,Bo),Ro=function(t){return Ys(1===t?"wide":"narrow")},Po=Ct,Do=Zt("updateSettings_",xr),Mo=h(_s,(function(t){return po(f(Co,"uiMode",Ro,t.d5,f(Co,"touchControls",co,t.d4,I([A("cpuEmulation",ko(t.cM)),A("volume",Eo(t.eb)),A("audioEmulation",Ao(t.cB)),A("smoothScaling",co(t.dV)),A("phosphorEmulation",co(t.dF)),A("gammaCorrection",Po(t.c5)),A("videoSync",co(t.d8)),A("leftHanded",co(t.df)),A("virtualJoystickSensitivity",Eo(t.ea)),A("uiSize",Eo(t.cq))]))))}),Do),Fo=I([50,75,100,125,150]),jo=r((function(t,e,n){switch(t.$){case 0:var r=t.a;return k(n,{cM:r});case 1:var i=t.a;return k(n,{eb:i});case 2:var s=t.a;return k(n,{cB:s});case 3:var a=t.a;return k(n,{dV:a});case 4:var o=t.a;return k(n,{dF:o});case 5:var u=t.a;return k(n,{c5:u});case 6:var c=t.a;return k(n,{d8:c});case 7:var l=t.a;return k(n,{d4:l});case 8:var f=t.a;return k(n,{df:f});case 9:var d=t.a;return k(n,{ea:d});case 10:var p=t.a;return k(n,{d5:p});case 11:var _=t.a;return h(Qs,n,h(Hs,(function(t){return k(n,{cq:t})}),h(Wa,cr(_),Fo)));default:return e}})),Lo=n((function(t,e){t:for(;;){var i=function(t){return A(k(e,{cN:t}),h(Qs,Ga,h(Hs,so(3),t)))},s=function(t){return A(t,Ga)};switch(t.$){case 0:var a=t.a;return A(e,h(Ya,e.de,a));case 1:var o=t.a,u=function(){var t=A(o,uo(e));if(t.a||t.b.$)return I([oo]);var n=t.b.a;return e.cO?I([h(so,1,n)]):E}(),c=k(e,{cO:o,dS:2===o,dT:!1}),f=(J=void 0,2!==(J=A(o,e.cZ)).a||J.b?I([Ja]):I([eo]));return A(c,gi(S(u,f)));case 2:var d=t.a,p=function(){var t=A(e.cO,uo(e));if(t.a||t.b.$)return Ga;var n=t.b.a;return h(so,1,n)}();return A(k(e,{cF:0,dj:Tn(d)}),p);case 7:var _=t.a;return A(c=k(e,{cE:_}),oo);case 8:p=function(){var t=e.dj;if(t.$||t.a)return h(Qs,Ga,h(Hs,so(3),e.cN));t.a;return oo}();return A(k(e,{cE:""}),p);case 9:var g=t.a;return i(Tn(g));case 10:g=t.a;return i(h(Hs,(function(t){return t.Q}),h(qa,Na(e),g)));case 11:g=t.a;return i(h(Hs,(function(t){return t.Q}),h(Ka,Na(e),g)));case 12:return i(h(Hs,(function(t){return t.Q}),$s(Na(e))));case 13:return i(h(Hs,(function(t){return t.Q}),$s(Jn(Na(e)))));case 14:return s(k(e,{cN:In}));case 15:g=t.a;var v=b(e.cN,Tn(g))?h(Hs,(function(t){return t.Q}),h(qa,Na(e),g)):e.cN;p=b(v,e.cN)?Ga:h(Qs,Ga,h(Hs,so(3),v));return A(k(e,{cF:0,aP:h(zs,(function(t){return!b(t.Q,g)}),e.aP),cN:v}),gi(I([p,Ha(g)])));case 16:return A(k(e,{aP:E,cN:In}),za);case 17:g=t.a;var m=t.b,y=h(Jr,(function(t){return b(t.Q,g)?l(Io,e.aO,m,t):t}),e.aP);p=h(Qs,Ga,h(Hs,To,h(Wa,h(wa,cr(g),(function(t){return t.Q})),y)));return A(k(e,{aP:y}),p);case 3:var w=t.a;return s(k(e,{c7:Tn(w)}));case 4:w=t.a;return s(k(e,{cI:Tn(w)}));case 5:w=t.a;return s(k(e,{dg:Tn(w)}));case 6:return s(k(e,{dT:!e.dT}));case 18:var C=t.a,x=(Q=void 0,1!==(Q=A(C,e.cN)).a||Q.b.$?0:1);p=function(){var t,n,r,i=(t=x,n=e.cF,r=uo(e),{a:t,b:n,c:r});e:for(;;){if(i.a){if(i.b)break e;return oo}if(1!==i.b||i.c.$)break e;var s=i.c.a;return h(so,1,s)}return Ga}();return A(k(e,{cF:x}),p);case 19:return A(e,Ba);case 20:var T=t.a,B=k(e,{cE:"",aP:(G=l(jn,n((function(t,e){return l(as,t.Q,t,e)})),Zi,S(e.aP,T)),l(mn,r((function(t,e,n){return h(vn,e,n)})),E,G))});if(T.b){var O=T.a;t=xa(O.Q),e=B;continue t}return s(B);case 21:g=t.a;return A(e,ro(g));case 22:var R=t.a,P=l(jo,R,e.aQ,e.aE),D=b(e.aE.cq,P.cq)?Ga:ta(P.cq);return A(k(e,{aE:P}),gi(I([Mo(P),D])));case 23:var M=t.a,F=t.b,j=t.c;return s(k(e,{dl:A(Tn(j),h(hi,M,F))}));case 24:M=t.a;var L=t.b;j=t.c;return s(k(e,{dl:A(Tn(j),h(ci,M,L))}));case 25:return s(k(e,{dl:A(In,e.dl.b)}));case 26:c=k(e,{dl:A(In,e.dl.b)});return h(Qs,s(c),h(Hs,(function(t){return h(Lo,t,c)}),e.dl.a));case 27:g=t.a;return A(k(e,{cZ:!1,c_:Ea,dN:Tn(g)}),gi(I([h(bo,g,e.cL),h(Ya,e.de,Js(2))])));case 29:return A(e,mo);case 28:return A(e,Ja);case 30:return A(e,Xa);case 31:var N=!e.cZ;c=k(e,{cZ:N,dS:!1}),p=N?Ja:eo;switch(e.c_.$){case 1:case 2:return A(c,p);default:return A(e,Ga)}case 33:var U=t.a,z=(q=void 0,4!==(q=A(e.c_,U)).a.$||q.b.$?U:Ea);return s(k(e,{c_:z}));case 34:switch(t.a){case 0:t=Ta,e=e;continue t;case 1:return A(e,Xa);default:return A(e,wo)}case 32:var $=t.a;return A(k(e,{dh:$}),lo($));case 35:var H=t.a,W=k(e.cL,{cV:H});return A(k(e,{cL:W}),Oo(W));case 36:H=t.a,W=k(e.cL,{cW:H});return A(k(e,{cL:W}),Oo(W));case 37:var V=t.a;W=k(e.cL,{cK:V});return A(k(e,{cL:W}),Oo(W));case 38:return A(e,Ra);case 39:return A(e,h(Ya,e.de,Js(4)));default:return s(e)}}var q,G,Q,J})),No=r((function(t,e,n){return{$:0,a:t,b:e,c:n}})),Uo=r((function(t,e,n){return{$:0,a:t,b:e,c:n}})),zo=function(t){return{$:0,a:t}},$o=n((function(t,e){return{$:0,a:t,b:e}})),Ho=n((function(t,e){var n=h($o,t,E),r=l(No,n,E,In);return I([zo(l(Uo,r,E,e))])})),Wo=Ho("body"),Vo=function(t){return{$:0,a:t}},qo=n((function(t,e){return Vo(t+":"+e)})),Go=n((function(t,e){return h(qo,t,e.D)})),Qo=Go("font-size"),Jo=function(t){return!t.b},Ko=n((function(t,e){var n=e.a,r=e.b;switch(t.$){case 0:var i=t.a.c;return Jo(i)?A(n,r):A(n,h(vn,t,r));case 1:var s=t.b;return h(Ma,(function(t){var e=t.c;return Jo(e)}),s)?A(n,r):A(n,h(vn,t,r));case 2:var a=t.b;return Jo(a)?A(n,r):A(n,h(vn,t,r));case 3:return A(n,h(vn,t,r));case 4:i=t.b;return Jo(i)?A(n,r):A(n,h(vn,t,r));case 5:i=t.a;return Jo(i)?A(n,r):A(n,h(vn,t,r));case 6:var o=t.a;return Mr(o.cR)?A(n,r):A(l(as,o.az,o.cR,n),r);case 7:case 8:i=t.a;return Jo(i)?A(n,r):A(n,h(vn,t,r));default:var u=t.a;return h(Ma,(function(t){var e=t.b;return Jo(e)}),u)?A(n,r):A(n,h(vn,t,r))}})),Yo=function(t){return{$:6,a:t}},Zo=n((function(t,e){return e.b?l(Qr,vn,e,t):t})),Xo=n((function(t,e){return h(Zo,h(Jr,(function(t){var e=t.a,n=t.b;return Yo({cR:n,az:e})}),yn(t)),e)})),tu=function(t){return h(Qs,"",h(Hs,(function(t){return'@charset "'+t+'"'}),t))},eu=function(t){return"("+t.bK+h(Qs,"",h(Hs,On(": "),t.D))+")"},nu=function(t){var e=r((function(t,e,n){return t+" "+h(Dn," and ",h(vn,function(t){switch(t){case 0:return"print";case 1:return"screen";default:return"speech"}}(e),h(Jr,eu,n)))}));switch(t.$){case 0:var n=t.a;return h(Dn," and ",h(Jr,eu,n));case 1:return l(e,"only",t.a,n=t.b);case 2:return l(e,"not",t.a,n=t.b);default:return t.a}},ru=n((function(t,e){return'@import "'+t+nu(e)+'"'})),iu=function(t){var e=t.a,n=t.b;return h(Dn,"\n",h(Jr,ru(e),n))},su=function(t){return"@namespace "+t.a+'"'+t.b+'"'},au=function(t){return S("    ",t)},ou=function(t){return t+";"},uu=function(t){return h(Dn,"\n",h(Jr,h(wa,au,ou),t))},cu=W,hu=function(t){return"::"+t},lu=function(t){switch(t){case 0:return"+";case 1:return"~";case 2:return">";default:return""}},fu=function(t){switch(t.$){case 0:return"."+t.a;case 1:return"#"+t.a;case 2:return":"+t.a;default:return"["+t.a+"]"}},du=function(t){switch(t.$){case 0:var e=t.a,n=t.b;return h(Dn,"",h(vn,e,h(Jr,fu,n)));case 1:n=t.a;return Jo(n)?"*":h(Dn,"",h(Jr,fu,n));default:e=t.a,n=t.b;return h(Dn,"",h(vn,e,h(Jr,fu,n)))}},pu=function(t){var e=t.a,n=t.b;return h(Dn," ",I([lu(e),du(n)]))},_u=function(t){var e=t.a,n=t.b,r=t.c,i=h(vn,du(e),h(Jr,pu,n)),s=h(Dn,"",I([h(Qs,"",h(Hs,hu,r))]));return h(cu,h(Dn," ",h(zs,h(wa,Da,Mr),i)),s)},gu=n((function(t,e){var n=e.a,r=e.b,i=e.c,s=h(Dn,", ",h(Jr,_u,h(vn,n,r)));return h(Dn,"",I([s," {\n",t,uu(i),"\n",t,"}"]))})),bu=function(t){switch(t.$){case 0:var e=t.a;return h(gu,"",e);case 1:var n=t.a,r=t.b;return"@media "+h(Dn,",\n",h(Jr,nu,n))+" {\n"+h(Dn,"\n\n",h(Jr,h(wa,au,gu("    ")),r))+"\n}";case 2:case 3:case 4:case 5:return"TODO";case 6:return"@keyframes "+t.a.az+" {\n"+t.a.cR+"\n}";case 7:case 8:default:return"TODO"}},vu=function(t){return l(Qr,Zo,E,t)},mu=n((function(t,e){return vu(h(Jr,t,e))})),yu=function(t){return{$:8,a:t}},wu=function(t){return{$:5,a:t}},Au=n((function(t,e){return{$:4,a:t,b:e}})),ku=r((function(t,e,n){return{$:0,a:t,b:e,c:n}})),Cu=function(t){return{$:0,a:t}},Su=n((function(t,e){return{$:2,a:t,b:e}})),Eu=function(t){return{$:7,a:t}},xu=n((function(t,e){return{$:1,a:t,b:e}})),Tu=n((function(t,e){if(e.b){if(e.b.b){var n=e.a,r=e.b;return h(vn,n,h(Tu,t,r))}return I([t(e.a)])}return e})),Iu=n((function(t,e){var n=e.a,r=e.b,i=e.c;return l(ku,n,r,S(i,I([t])))})),Bu=n((function(t,e){if(!e.b)return e;if(e.b.b){var n=e.a,r=e.b;return h(vn,n,h(Bu,t,r))}switch(e.a.$){case 0:var i=e.a.a;return I([Cu(h(Iu,t,i))]);case 1:var s=e.a,a=s.a,o=s.b;return I([h(xu,a,h(Tu,Iu(t),o))]);default:return e}})),Ou=n((function(t,e){if(e.b.b){var n=e.a,r=e.b,i=(o=e.c,h(Jr,t,r)),s=t(n);return I([l(ku,n,r,o),l(ku,s,i,E)])}var a=e.a,o=e.c;return I([l(ku,a,E,o),l(ku,t(a),E,E)])})),Ru=n((function(t,e){var n=e.a,r=e.b;return l(No,n,r,Tn(t))})),Pu=n((function(t,e){return h(Ou,Ru(t),e)})),Du=n((function(t,e){return{$:2,a:t,b:e}})),Mu=function(t){return{$:1,a:t}},Fu=n((function(t,e){switch(e.$){case 0:var n=e.a,r=e.b;return h($o,n,S(r,I([t])));case 1:r=e.a;return Mu(S(r,I([t])));default:var i=e.a;r=e.b;return h(Du,i,S(r,I([t])))}})),ju=n((function(t,e){if(e.b){if(e.b.b){var n=e.a,r=e.b;return h(vn,n,h(ju,t,r))}var i=e.a,s=i.a,a=i.b;return I([A(s,h(Fu,t,a))])}return E})),Lu=n((function(t,e){if(e.b.b){var n=e.a,r=e.b;s=e.c;return l(No,n,h(ju,t,r),s)}var i=e.a,s=e.c;return l(No,h(Fu,t,i),E,s)})),Nu=n((function(t,e){return h(Ou,Lu(t),e)})),Uu=function(t){t:for(;;){if(t.b){if(t.a.$){t=i=t.b;continue t}var e=t.a.a,n=e.a,r=e.b,i=t.b;return S(h(vn,n,r),Uu(i))}return E}},zu=s((function(t,e,n,r,i){return{$:3,a:t,b:e,c:n,d:r,e:i}})),$u=n((function(t,e){t:for(;;){if(!e.b)return e;if(e.b.b)break t;switch(e.a.$){case 0:var n=e.a.a;return h(Jr,Cu,t(n));case 1:if(e.a.b.b){if(e.a.b.b.b){var r=e.a,i=(p=r.a,r.b),s=i.a,a=i.b,o=h($u,t,I([h(xu,p,a)]));if(o.b&&1===o.a.$&&!o.b.b){var u=o.a,c=u.a,l=u.b;return I([h(xu,c,h(vn,s,l))])}return o}var d=e.a,p=d.a;n=d.b.a;return I([h(xu,p,t(n))])}break t;case 2:var _=e.a,g=_.a,b=_.b;return I([h(Su,g,h($u,t,b))]);case 3:var v=e.a,m=v.a,y=v.b,w=v.c,A=v.d;n=v.e;return h(Jr,f(zu,m,y,w,A),t(n));case 4:e.a;return e;case 5:case 6:case 7:case 8:default:return e}}s=e.a,a=e.b;return h(vn,s,h($u,t,a))})),Hu=H,Wu=i((function(t,e,n,r){return{aa:r,Q:n,V:e,ak:t}})),Vu=n((function(t,e){return(65535&e)*t+(((e>>>16)*t&65535)<<16)})),qu=n((function(t,e){return e<<t|e>>>32-t})),Gu=q,Qu=n((function(t,e){return h(Vu,5,h(qu,13,t^h(Vu,461845907,h(qu,15,h(Vu,3432918353,e)))))+3864292196})),Ju=n((function(t,e){var n=e.Q|(255&Hn(t))<<e.ak;return 24===e.ak?{aa:e.aa+1,Q:0,V:h(Qu,e.V,n),ak:0}:{aa:e.aa+1,Q:n,V:e.V,ak:e.ak+8}})),Ku=n((function(t,e){return n=l(Gu,Ju,f(Wu,0,t,0,0),e),r=(n.Q?n.V^h(Vu,461845907,h(qu,15,h(Vu,3432918353,n.Q))):n.V)^n.aa,i=h(Vu,2246822507,r^r>>>16),((s=h(Vu,3266489909,i^i>>>13))^s>>>16)>>>0;var n,r,i,s})),Yu=function(t){return B(t).join("")},Zu=j,Xu=function(t){t:for(;;)switch(t){case 0:return"0";case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"8";case 9:return"9";case 10:return"a";case 11:return"b";case 12:return"c";case 13:return"d";case 14:return"e";case 15:return"f";default:t=t;continue t}},tc=n((function(t,e){for(;;){if(e<16)return h(vn,Xu(e),t);t=h(vn,Xu(h(Zu,16,e)),t),e=e/16|0}})),ec=function(t){return Yu(t<0?h(vn,"-",h(tc,E,-t)):h(tc,E,t))},nc=function(t){t:for(;;){if(t.b){if(t.b.b){t=t.b;continue t}var e=t.a;return Tn(I([e]))}return In}},rc=function(t){var e,n=function(t){if(t.b){var e=t.a,r=t.b;return h(vn,e,n(r))}return E},r=n(t);return I([(e=r,{$:9,a:e})])},ic=function(t){return I([t])},sc=n((function(t,e){if(e.$)return e;var n=e.a;return h(xu,t,I([n]))})),ac=r((function(t,e,n){for(;;){if(t<=0)return n;if(!e.b)return n;var r=e.a;t=t-1,e=e.b,n=h(vn,r,n)}})),oc=n((function(t,e){return Jn(l(ac,t,e,E))})),uc=r((function(t,e,n){if(e<=0)return E;var r=A(e,n);t:for(;;){e:for(;;){if(!r.b.b)return n;if(!r.b.b.b){if(1===r.a)break t;break e}switch(r.a){case 1:break t;case 2:var i=r.b;return I([a=i.a,f=i.b.a]);case 3:if(r.b.b.b.b){var s=r.b,a=s.a,o=s.b;return I([a,f=o.a,p=o.b.a])}break e;default:if(r.b.b.b.b&&r.b.b.b.b.b){var u=r.b,a=u.a,c=u.b,f=c.a,d=c.b,p=d.a,_=d.b,g=_.a,b=_.b;return h(vn,a,h(vn,f,h(vn,p,h(vn,g,t>1e3?h(oc,e-4,b):l(uc,t+1,e-4,b)))))}break e}}return n}return I([a=r.b.a])})),cc=n((function(t,e){return l(uc,0,t,e)})),hc=s((function(t,e,n,r,i){if(i.$)return i;var s=i.a;return d(zu,t,e,n,r,s)})),lc=n((function(t,e){switch(e.$){case 0:var n=e.a;return h(xu,t,I([n]));case 1:var r=e.a,i=e.b;return h(xu,S(t,r),i);case 2:var s=e.a,a=e.b;return h(Su,s,h(Jr,lc(t),a));case 3:var o=e.a,u=e.b,c=e.c,l=e.d;n=e.e;return d(zu,o,u,c,l,n);case 4:case 5:case 6:case 7:case 8:default:return e}})),fc=function(t){return t},dc=i((function(t,e,n,r){var i=function(t){return h(Qs,E,function(t){if(t.b){t.a;var e=t.b;return Tn(e)}return In}(t))},s=h(pc,e,h(Qs,E,nc(r))),a=function(){var t=A($s(s),function(t){t:for(;;){if(t.b){if(t.b.b){t=t.b;continue t}var e=t.a;return Tn(e)}return In}}(r));if(t.a.$||t.b.$)return r;var e=t.a.a,n=t.b.a;return S(h(cc,Ln(r)-1,r),I([b(n,e)?n:e]))}();return S(a,S(i(h(Qs,E,h(Hs,(function(e){return vu(h(Tu,pc(t),h(Jr,ic,h($u,n,e))))}),nc(r)))),i(s)))})),pc=n((function(t,e){if(!t.b)return e;switch(t.a.$){case 0:var r=t.a.a,i=t.b;return h(pc,i,h(Bu,r,e));case 1:var s=t.a,a=s.a,o=s.b;i=t.b;return f(dc,o,i,Nu(a),e);case 2:var u=t.a,c=u.a,d=u.b,p=(i=t.b,n((function(t,e){var n=t.a,r=t.b,i=t.c,s=e.a,a=e.b,o=e.c;return l(No,n,S(r,h(vn,A(c,s),a)),function(t){t:for(;;){if(t.b){var e=t.a,n=t.b;if(1===e.$){t=n;continue t}return e}return In}}(I([o,i])))})));return vu(S(I([h(pc,i,e)]),h(Jr,(function(t){switch(t.$){case 0:var n=t.a,r=n.a,i=n.b,s=n.c,a=h(mu,(function(t){return h(Jr,p(t),h(vn,r,i))}),Uu(e)),o=function(){if(a.b){var t=a.a,e=a.b;return I([Cu(l(ku,t,e,E))])}return E}();return h(pc,s,o);case 1:var u=t.a,c=t.b;return h(bc,u,c);case 2:var d=t.a,_=t.b;return h(vc,d,_);case 3:var g=t.a,b=t.b,v=t.c,m=t.d,y=t.e;return h(Jr,f(hc,g,b,v,m),_c(y));case 4:d=t.a;var w=t.b;return I([h(Au,d,w)]);case 5:w=t.a;return I([wu(w)]);case 6:w=t.a;return I([Eu(w)]);case 7:w=t.a;return I([yu(w)]);default:var A=t.a;return rc(A)}}),h(mu,fc,d))));case 3:var _=t.a,g=_.a;o=_.b,i=t.b;return f(dc,o,i,Pu(g),e);case 5:var b=t.a.a,v=(i=t.b,function(t){return h(Hu,"_",ec(h(Ku,15739,t)))}(b)),m=h(pc,i,h(Bu,"animation-name:"+v,e));return h(Zo,m,I([Yo({cR:b,az:v})]));case 4:var y=t.a,w=y.a,k=(o=y.b,i=t.b,function(){var t=Uu(e);if(t.b){var n=t.a,r=t.b;return h(Jr,sc(w),h(pc,o,ic(Cu(l(ku,n,r,E)))))}return E}());return S(h(pc,i,e),k);default:var C=t.a.a;i=t.b;return h(pc,S(C,i),e)}})),_c=function(t){var e=t.a,n=t.b,r=t.c;return h(pc,r,I([Cu(l(ku,e,n,E))]))},gc=function(t){if(t.b){var e=t.a,n=t.b;return S(mc(e),gc(n))}return E},bc=n((function(t,e){return h(mu,(function(e){return h(Jr,lc(t),_c(e))}),e)})),vc=n((function(t,e){var n=gc(h(mu,fc,e));return I([h(Su,t,n)])})),mc=function(t){switch(t.$){case 0:var e=t.a;return _c(e);case 1:var n=t.a,r=t.b;return h(bc,n,r);case 2:var i=t.a,s=t.b;return h(vc,i,s);case 3:var a=t.a,o=t.b,u=t.c,c=t.d;e=t.e;return h(Jr,f(hc,a,o,u,c),_c(e));case 4:i=t.a;var l=t.b;return I([h(Au,i,l)]);case 5:l=t.a;return I([wu(l)]);case 6:l=t.a;return I([Eu(l)]);case 7:l=t.a;return I([yu(l)]);default:var d=t.a;return rc(d)}},yc=function(t){return function(t){var e=t.bD,n=t.bQ,r=t.bY,i=t.cS;return h(Dn,"\n\n",h(zs,h(wa,Da,Mr),I([tu(e),h(Dn,"\n",h(Jr,iu,n)),h(Dn,"\n",h(Jr,su,r)),h(Dn,"\n\n",h(Jr,bu,i))])))}(function(t){var e=t.bD,n=t.bQ,r=t.bY,i=t.cS,s=l(Qr,Ko,A(Zi,E),i),a=s.a,o=s.b;return{bD:e,cS:h(Xo,a,o),bQ:n,bY:r}}((n=(e=t).bD,r=e.bQ,i=e.bY,s=e.cg,{bD:n,cS:gc(h(mu,fc,s)),bQ:r,bY:i})));var e,n,r,i,s},wc=function(t){return h(Dn,"\n\n",h(Jr,yc,t))},Ac=function(t){return ce(ve(t))},kc=function(t){return{bD:In,bQ:E,bY:E,cg:t}},Cc=oe,Sc=function(t){return{$:4,a:t}},Ec=Sc,xc=function(t){return Ec(l(Ac,"style",E,ic(Cc(wc(ic(kc(t)))))))},Tc=Go("line-height"),Ic=function(t){return h(qo,"background-color",t.D)},Bc=r((function(t,e,n){return{$:0,a:t,b:e,c:n}})),Oc=n((function(t,e){var n=l(No,e,E,In);return I([zo(l(Uo,n,E,t))])})),Rc=n((function(t,e){return h(ge,function(t){return"innerHTML"==t||"formAction"==t?"data-"+t:t}(t),me(e))})),Pc=function(t){var e=function(t){return Jo(t)?"unstyled":h(Hu,"_",ec(h(Ku,15739,wc(ic(kc(ic(h(Oc,t,Mu(E)))))))))}(t),n=h(Rc,"className",Ys(e));return l(Bc,n,t,e)},Dc=Go("display"),Mc=r((function(t,e,n){return{$:0,a:t,b:e,c:n}})),Fc=Mc,jc=Fc,Lc=jc("div"),Nc={at:0,aC:0,a4:0,D:"fixed"},Uc=Go("height"),zc=function(t){return{I:0,aT:0,S:0,B:0,dA:0,aW:0,K:t,ap:"",aJ:0,D:Pn(t)}},$c=Go("left"),Hc={Z:0,bx:0,r:0,a:0,g:0,c9:0,bS:0,bd:0,ai:0,R:0,B:0,c:0,b:0,bg:0,aY:0,dG:0,z:0,a$:0,dP:0,am:0,X:0,v:0,e:0,d7:0,D:"none"},Wc=Go("position"),Vc=nt,qc=r((function(t,e,n){return{bq:0,bA:0,ad:0,o:0,ax:0,ag:0,J:0,ah:0,ai:0,R:0,S:0,B:0,K:n,an:0,ap:e,aJ:t,D:S(Vc(n),e)}})),Gc=h(qc,0,"px"),Qc=n((function(t,e){return t+"("+h(Dn,", ",e)+")"})),Jc=i((function(t,e,n,r){return{as:r,au:n,cK:0,aw:e,aD:t,D:h(Qc,"rgba",S(h(Jr,Pn,I([t,e,n])),I([Vc(r)])))}})),Kc=Go("top"),Yc=h(qc,0,"vh"),Zc=h(qc,0,"vw"),Xc=Go("width"),th=Go("z-index"),eh=function(t){var e=t?E:I([Dc(Hc)]);return h(Lc,I([Pc(S(e,I([Wc(Nc),Kc(Gc(0)),$c(Gc(0)),Xc(Zc(100)),Uc(Yc(100)),th(zc(100)),Ic(f(Jc,0,0,0,.5))])))]),E)},nh=Go("center"),rh={$:26},ih={$:25},sh=h(qo,"display","flex"),ah=h(qc,0,"em"),oh=Go("flex-end"),uh=function(t){return{$:6,a:t}},ch=n((function(t,e){return Vo(t+":"+e)})),hh=r((function(t,e,n){t:for(;;)switch(n.$){case 0:var r=n.a,i=h(Qs,"",$s(h(Mn,":",r)));return h(ch,e,i);case 1:n.a;return h(ch,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-selector");case 2:n.a;return h(ch,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-combinator");case 3:n.a;return h(ch,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-pseudo-element setter");case 4:return h(ch,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-media-query");case 5:return h(ch,e,"elm-css-error-cannot-apply-"+t+"-with-inapplicable-Style-for-keyframes");default:if(n.a.b){if(n.a.b.b){var s=n.a,a=(s.a,s.b);t=t,e=e,n=uh(a);continue t}t=t,e=e,n=n.a.a;continue t}return h(ch,e,"elm-css-error-cannot-apply-"+t+"-with-empty-Style")}})),lh=l(qc,0,"",0),fh=function(t){return l(hh,"justifyContent","justify-content",t(lh))},dh=Go("padding-top"),ph=n((function(t,e){return l(Bc,h(Rc,t,e),E,"")})),_h=n((function(t,e){return h(ph,t,Ys(e))})),gh=_h("className"),bh=gh("panel"),vh=jc("button"),mh=_e,yh=n((function(t,e){return l(Bc,h(mh,t,e),E,"")})),wh=n((function(t,e){return h(yh,t,{$:3,a:e})})),Ah=tt,kh=function(t){return t.toLowerCase()},Ch=n((function(t,e){return{$:1,a:t,b:e}})),Sh=n((function(t,e){if(e.b){if(e.b.b){var n=e.a,r=e.b;return h(vn,n,h(Sh,t,r))}var i=e.a;return I([h(Eh,t,i)])}return e})),Eh=n((function(t,e){switch(e.$){case 0:var n=e.a;return Vo(t(n));case 1:var r=e.a,i=e.b;return h(Ch,r,h(Sh,t,i));case 2:case 3:case 4:case 5:return e;default:var s=e.a;return uh(h(Tu,Eh(t),s))}})),xh=Eh((function(t){return h(Ah," !important",kh(t))?t:t+" !important"})),Th={g:0,D:"inline-block"},Ih=function(t){return Ch({$:2,a:t})},Bh=jc("span"),Oh=function(t){return Sc(Cc(t))},Rh=r((function(t,e,n){return h(Bh,I([Pc(I([Dc(Th),h(Ih,"not(:last-child)",I([h(qo,"margin-right","var(--cw)")]))])),h(wh,"click",kr({dk:e,dJ:!0,dY:!0}))]),I([h(vh,h(vn,Pc(I([xh(h(qo,"margin-right","var(--cw)"))])),t),I([Oh(n)]))]))})),Ph=n((function(t,e){return h(yh,t,{$:0,a:e})})),Dh=function(t){return h(Ph,"click",kr(t))},Mh=i((function(t,e,n,r){return t?h(vh,h(vn,Dh(n),e),I([Oh(r)])):l(Rh,e,n,r)})),Fh=Go("space-between"),jh=n((function(t,e){var n=(t.b.$,t.b.a);return h(Lc,I([bh,Pc(I([Xc(Zc(100)),h(qo,"max-width","calc(80*var(--cw))")]))]),I([h(Lc,E,I([Oh(n)])),function(n){if(1===t.b.$){var r=t.b.b;return h(Lc,I([Pc(S(I([sh,fh(oh)]),n))]),I([f(Mh,e,I([Pc(I([h(qo,"width","calc(8*var(--cw))")]))]),rh,r)]))}var i=t.b.b,s=i.a,a=i.b,o="calc("+Pn(4+h(fr,Or(s),Or(a)))+"*var(--cw))";return h(Lc,I([Pc(S(I([sh,fh(Fh)]),n))]),I([f(Mh,e,I([Pc(I([h(qo,"width",o)]))]),ih,a),f(Mh,e,I([Pc(I([h(qo,"width",o)]))]),rh,s)]))}(I([dh(ah(2))]))]))})),Lh={r:0,aj:0,D:"hidden",aL:0},Nh=h(qc,0,"%"),Uh=h(wa,Go("transform"),(function(t){return Jo(t)?{D:"none"}:{D:h(Dn," ",h(Jr,(function(t){return t.D}),t))}})),zh=function(t){return Uh(I([t]))},$h=n((function(t,e){return{aM:t,aR:In,bG:e,a5:In}})),Hh=$h(89),Wh=function(t){switch(t){case 0:return"background";case 1:return"background-color";case 2:return"background-position";case 3:return"background-size";case 4:return"border";case 5:return"border-bottom";case 6:return"border-bottom-color";case 7:return"border-bottom-left-radius";case 8:return"border-bottom-right-radius";case 9:return"border-bottom-width";case 10:return"border-color";case 11:return"border-left";case 12:return"border-left-color";case 13:return"border-left-width";case 14:return"border-radius";case 15:return"border-right";case 16:return"border-right-color";case 17:return"border-right-width";case 18:return"border-top";case 19:return"border-top-color";case 20:return"border-top-left-radius";case 21:return"border-top-right-radius";case 22:return"border-top-width";case 23:return"border-width";case 24:return"bottom";case 25:return"box-shadow";case 26:return"caret-color";case 27:return"clip";case 28:return"clip-path";case 29:return"color";case 30:return"column-count";case 31:return"column-gap";case 32:return"column-rule";case 33:return"column-rule-color";case 34:return"column-rule-width";case 35:return"column-width";case 36:return"columns";case 37:return"filter";case 38:return"flex";case 39:return"flex-basis";case 40:return"flex-grow";case 41:return"flex-shrink";case 42:return"font";case 43:return"font-size";case 44:return"font-size-adjust";case 45:return"font-stretch";case 46:return"font-variation-settings";case 47:return"font-weight";case 48:return"grid-column-gap";case 49:return"grid-gap";case 50:return"grid-row-gap";case 51:return"height";case 52:return"left";case 53:return"letter-spacing";case 54:return"line-height";case 55:return"margin";case 56:return"margin-bottom";case 57:return"margin-left";case 58:return"margin-right";case 59:return"margin-top";case 60:return"mask";case 61:return"mask-position";case 62:return"mask-size";case 63:return"max-height";case 64:return"max-width";case 65:return"min-height";case 66:return"min-width";case 67:return"object-position";case 68:return"offset";case 69:return"offset-anchor";case 70:return"offset-distance";case 71:return"offset-path";case 72:return"offset-rotate";case 73:return"opacity";case 74:return"order";case 75:return"outline";case 76:return"outline-color";case 77:return"outline-offset";case 78:return"outline-width";case 79:return"padding";case 80:return"padding-bottom";case 81:return"padding-left";case 82:return"padding-right";case 83:return"padding-top";case 84:return"right";case 85:return"tab-size";case 86:return"text-indent";case 87:return"text-shadow";case 88:return"top";case 89:return"transform";case 90:return"transform-origin";case 91:return"vertical-align";case 92:return"visibility";case 93:return"width";case 94:return"word-spacing";default:return"z-index"}},Vh=function(t){return Vc(t)+"ms"},qh=function(t){switch(t.$){case 0:return"ease";case 1:return"linear";case 2:return"ease-in";case 3:return"ease-out";case 4:return"ease-in-out";case 5:return"step-start";case 6:return"step-end";default:var e=t.a,n=t.b,r=t.c,i=t.d;return"cubic-bezier("+Vc(e)+" , "+Vc(n)+" , "+Vc(r)+" , "+Vc(i)+")"}},Gh=function(t){var e=l(Rr,0,-1,l(jn,n((function(t,e){var n=t.aM,r=t.bG,i=t.aR,s=t.a5;return e+(h(Dn," ",I([Wh(n),Vh(r),h(Qs,"",h(Hs,Vh,i)),h(Qs,"",h(Hs,qh,s))]))+",")})),"",t));return h(qo,"transition",e)},Qh=function(t){var e=t.D;return{e:0,D:h(Qc,"translateY",I([e]))}},Jh=Go("visibility"),Kh=$h(92),Yh={aj:0,z:0,D:"visible",aL:0},Zh=n((function(t,e){var n=!t.a.$;return I([eh(n),h(Lc,I([Pc(S(I([Wc(Nc),Kc(Gc(0)),$c(Gc(0)),Xc(Zc(100)),th(zc(150)),sh,fh(nh),Gh(I([Hh(300),Kh(300)]))]),I(n?[zh(Qh(Nh(0))),Jh(Yh)]:[zh(Qh(Nh(-100))),Jh(Lh)])))]),I([h(jh,t,e)]))])})),Xh=function(t){return"var(--"+function(){switch(t){case 0:return"black";case 1:return"blue";case 2:return"light-blue";case 3:return"green";case 4:return"light-green";case 5:return"cyan";case 6:return"light-cyan";case 9:return"magenta";case 10:return"light-magenta";case 7:return"red";case 8:return"light-red";case 11:return"dark-gray";case 12:return"light-gray";case 13:return"brown";case 14:return"yellow";default:return"white"}}()+")"},tl=function(t){return h(qo,"background-color",Xh(t))},el=function(t){return h(qo,"color",Xh(t))},nl=s((function(t,e,n,r,i){return{cQ:n,bT:e,b$:t,a_:r,a3:i}})),rl=function(t){return h(Dn,"",t)},il=n((function(t,e){for(;;){if(t<=0)return e;if(!e.b)return e;e.a;t=t-1,e=e.b}})),sl=V,al=function(t){return t<0?-t:t},ol=G,ul=n((function(t,e){var n=h(Pa,(function(t){return"0"!==t&&"."!==t}),l(ol,vn,E,e));return S(t&&n?"-":"",e)})),cl=function(t){return t<0||1114111<t?"�":t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(Math.floor(t/1024)+55296,t%1024+56320))},hl=function(t){var e=t.a,n=t.b;if("9"===e){var r=Kn(n);if(1===r.$)return"01";var i=r.a;return h(Hu,"0",hl(i))}var s=Hn(e);return s>=48&&s<57?h(Hu,cl(s+1),n):"0"},ll=function(t){return t===1/0||t===-1/0},fl=$,dl=function(t){return h(Hu,t,"")},pl=r((function(t,e,n){return t<=0?n:l(pl,t>>1,S(e,e),1&t?S(n,e):n)})),_l=n((function(t,e){return l(pl,t,e,"")})),gl=r((function(t,e,n){return S(n,h(_l,t-Or(n),dl(e)))})),bl=function(t){for(var e=t.length,n=new Array(e),r=0;r<e;){var i=t.charCodeAt(r);55296<=i&&i<=56319?(n[e-r]=t[r+1],n[e-++r]=t[r-1],r++):(n[e-r]=t[r],r++)}return n.join("")},vl=function(t){var e=h(Mn,".",t);return e.b?e.b.b?A(e.a,e.b.a):A(e.a,"0"):A("0","0")},ml=n((function(t,e){var n=e.a,r=e.b;return A(t(n),r)})),yl=r((function(t,e,n){if(ll(n)||fl(n))return Vc(n);var r=n<0,i=vl(function(t){var e=h(Mn,"e",Vc(al(t)));if(e.b){if(e.b.b){var n=e.a,r=e.b.a,i=h(Qs,0,jr(h($r,"+",r)?h(Pr,1,r):r)),s=vl(n),a=S(s.a,s.b),o=i<0?h(Qs,"0",h(Hs,(function(t){return t.a+"."+t.b}),h(Hs,ml(dl),Kn(S(h(_l,al(i),"0"),a))))):l(gl,i+1,"0",a);return S(t<0?"-":"",o)}return S(t<0?"-":"",n=e.a)}return""}(al(n))),s=i.a,a=i.b,o=Or(s)+e,u=S(h(_l,1-o,"0"),l(gl,o,"0",S(s,a))),c=Or(u),f=h(fr,1,o),d=h(t,r,l(Rr,f,c,u)),p=l(Rr,0,f,u),_=d?bl(h(Qs,"1",h(Hs,hl,Kn(bl(p))))):p,g=Or(_),b="0"===_?_:e<=0?S(_,h(_l,al(e),"0")):y(e,Or(a))<0?l(Rr,0,g-e,_)+"."+l(Rr,g-e,g,_):S(s+".",l(gl,e,"0",a));return h(ul,r,b)})),wl=yl(n((function(t,e){var n=Kn(e);if(1===n.$)return!1;if("5"===n.a.a)return""!==n.a.b||!t;var r=n.a.a;return function(e){return e>53&&t||e>=53&&!t}(Hn(r))}))),Al=n((function(t,e){return t<1?e:l(Rr,0,-t,e)})),kl=n((function(t,e){return t<1?"":l(Rr,-t,Or(e),e)})),Cl=n((function(t,e){var n,r=h(Mn,".",h(wl,t.cQ,e)),i=function(t){var e=function(t){return Or(t)>3?h(vn,h(kl,3,t),e(h(Al,3,t))):I([t])};return Jn(e(t))}(h(sl,Gn,h(Qs,"0",$s(r)))),s=h(Qs,"",$s(h(il,1,r))),a=d(nl,e,i,s,"","");switch(h(Bn,(function(t){return"0"===t}),rl(h(Zo,(n=a).bT,ic(n.cQ))))?1:n.b$<0?2:0){case 2:return k(a,{a_:t.dr,a3:t.ds});case 0:return k(a,{a_:t.dH,a3:t.dI});default:return k(a,{a_:t.ed,a3:t.ee})}})),Sl=n((function(t,e){return""===e?"":S(t.cP,e)})),El=function(t){return"0"!==h(kl,1,t)?t:El(h(Al,1,t))},xl=r((function(t,e,n){return""===n||b(h(_l,t.cQ,"0"),n)?"":e?h(Sl,t,El(n)):S(t.cP,n)})),Tl=r((function(t,e,n){var r=function(){if(e.$)return Sl(t);var n=e.a;return h(xl,t,n)}(),i=h(Dn,t.d1,n.bT),s=r(n.cQ);return rl(I([n.a_,i,s,n.a3]))})),Il=n((function(t,e){return l(Tl,t,In,h(Cl,t,e))})),Bl=c((function(t,e,n,r,i,s,a,o,u){return{cP:n,cQ:t,dr:r,ds:i,dH:s,dI:a,d1:e,ed:o,ee:u}})),Ol=function(t,e,n,r,i,s,a,o,u,c){return 9===t.a?t.f(e,n,r,i,s,a,o,u,c):t(e)(n)(r)(i)(s)(a)(o)(u)(c)}(Bl,2,",",".","−","","","","",""),Rl=function(t){var e=t.c_;switch(e.$){case 0:return"stopped";case 4:return"starting";case 1:return"paused";case 2:if(1===e.a.$){e.a;return"running"}var n=e.a.a;return"running: "+h(Il,k(Ol,{cQ:2}),n/1e6)+" MHz";default:return"error"}},Pl={$:6},Dl={aC:0,D:"absolute"},Ml=jc("br"),Fl=n((function(t,e){return{cz:0,A:0,D:S(Vc(e),t)}})),jl=Fl("deg"),Ll=Go("overflow"),Nl=function(t){return"calc("+Vc(t)+" * var(--cw))"},Ul=function(t){var e,n,r,i=t.dT?I([zh((e=jl(-90),n=e.D,{e:0,D:h(Qc,"rotate",I([n]))}))]):E;return h(Lc,I([Pc(I([Wc(Dl),Kc(Gc(0)),$c(Gc(0)),tl(11),Uc(ah(2)),(r=4,h(qo,"width",Nl(r))),Ll(Lh)])),Dh(Pl)]),I([h(Lc,I([Pc(S(I([el(15),Gh(I([Hh(300)]))]),i))]),I([Oh("░░░░"),h(Ml,E,E),Oh("░░░░")]))]))},zl=Go("right"),$l=function(t){return h(Us,(function(e){return h(Wa,h(_s,(function(t){return t.Q}),cr(e)),t.aP)}),t.dN)},Hl=n((function(t,e){return h(Oc,e,h(Du,t,E))})),Wl={bb:0,av:0,D:"row"},Vl=k(Wl,{D:"column"}),ql=Go("flex-direction"),Gl=jc("a"),Ql=k({bs:0,l:0,at:0,bu:0,Z:0,bv:0,_:0,F:0,r:0,aN:0,cK:0,a:0,g:0,ad:0,bb:0,av:0,aS:0,O:0,o:0,ae:0,d:0,I:0,aT:0,bU:0,bd:0,ax:0,ag:0,J:0,ah:0,ai:0,R:0,S:0,B:0,aU:0,c:0,b:0,bg:0,dA:0,K:0,aY:0,aj:0,z:0,a4:0,am:0,W:0,an:0,ao:0,X:0,v:0,ap:"",aJ:0,D:"initial",aL:0,N:0},{D:"inherit"}),Jl=Go("text-decoration"),Kl=i((function(t,e,n,r){var i,s=b(e.cO,n)?el(15):el(0),a=b(e.cO,n)?tl(11):Ic(Ql);return h(Gl,I([(i=Js(n),h(_h,"href",i)),Pc(S(I([h(qo,"padding","0 var(--cw)"),xh(s),xh(a),xh(Jl(Hc)),Dc(Th)]),t))]),I([Oh(r)]))})),Yl=Go("padding-bottom"),Zl=function(t){return l(hh,"textAlign","text-align",t(lh))},Xl=function(t){var e,n,r=t.dT?I([Jh(Yh)]):I([zh((e=Nh(-100),n=e.D,{e:0,D:h(Qc,"translateX",I([n]))})),Jh(Lh)]),i=I([dh(ah(1)),Yl(ah(1)),Zl(nh)]);return h(Lc,I([bh,Pc(S(I([Wc(Nc),$c(Gc(0)),Kc(ah(2)),Xc(Zc(70)),tl(12),el(0),Gh(I([Hh(300),Kh(300)])),sh,ql(Vl)]),r))]),I([f(Kl,i,t,0,"Cartridges"),f(Kl,i,t,1,"Settings"),f(Kl,i,t,2,"Emulation"),f(Kl,i,t,3,"Help"),f(Kl,i,t,4,"About")]))},tf={cl:0,D:"ellipsis"},ef=Go("flex-shrink"),nf={av:0,aS:0,D:"nowrap",N:0},rf=r((function(t,e,n){return h(qo,t,h(Dn," ",I([e.D,n.D])))})),sf=rf("padding"),af=Go("text-overflow"),of=Go("white-space"),uf=i((function(t,e,n,r){var i=function(t){return h(Lc,I([Pc(I([Dc(Th),of(nf),h(sf,ah(0),ah(1)),ef(zc(0))]))]),I([Oh(t)]))};return h(Lc,I([Pc(S(I([sh,fh(nh),Ll(Lh)]),r))]),I([i(t),h(Lc,I([Pc(I([Dc(Th),of(nf),Ll(Lh),af(tf)]))]),I([Oh(n)])),i(e)]))})),cf=jc("nav"),hf=n((function(t,e){return 1===e?function(t){var e,n=h(Qs,"6502.ts / Stellerator",h(Hs,(function(t){return"Stellerator: "+t.az}),$l(t)));return I([h(Lc,I([Pc(I([Xc(Zc(100)),Uc(ah(2)),Wc(Nc),Kc(Gc(0)),$c(Gc(0)),th(zc(20)),el(12),tl(0)]))]),I([f(uf,"----====≡≡≡≡","≡≡≡≡====----",n,E),h(cf,I([Pc(I([tl(12),el(0)]))]),I([f(Kl,E,t,0,"Cartridges"),f(Kl,E,t,1,"Settings"),f(Kl,E,t,2,"Emulation"),f(Kl,E,t,3,"Help"),f(Kl,E,t,4,"About"),h(Bh,I([Pc(I([(e=zl,l(hh,"float","float",e(lh))),h(qo,"margin-right","var(--cw)")]))]),I([Oh(Rl(t))]))]))])),xc(I([h(Hl,"body",I([dh(ah(2))]))]))])}(t):function(t){var e=h(Qs,"Stellerator",h(Hs,(function(t){return t.az}),$l(t)));return I([h(Lc,I([Pc(I([Xc(Zc(100)),Uc(ah(2)),Wc(Nc),Kc(Gc(0)),$c(Gc(0)),th(zc(20)),el(12),tl(0)]))]),I([f(uf,"--==≡≡","≡≡==--",e,I([h(qo,"padding-left","calc(4 * var(--cw))")])),h(Lc,I([Pc(I([tl(12),el(0),Zl(zl)]))]),I([Oh(Rl(t))])),Ul(t),Xl(t)])),xc(I([h(Hl,"body",I([dh(ah(2))]))]))])}(t)})),lf=Ec,ff=_h("id"),df=Go("margin-bottom"),pf={bF:In,c6:Tn({cD:!1,d$:!1}),dO:!0,dU:!1},_f=an,gf=_f(pf),bf=function(t){var e=h(Qs,h(Lc,E,I([Oh("loading license...")])),h(Hs,(function(t){return lf(h(gf,E,t))}),t.dg)),n=h(Qs,h(Lc,E,I([Oh("loading changelog...")])),h(Hs,(function(t){return lf(h(gf,E,t))}),t.cI));return h(Lc,I([Pc(I([h(qo,"padding","0 var(--cw)"),dh(ah(1))]))]),I([h(Lc,I([ff("version"),Pc(I([Zl(nh),el(5),df(ah(1))]))]),I([Oh("Version "+t.aK)])),h(Lc,I([Pc(I([Zl(nh),df(ah(1))]))]),I([Oh("** CHANGELOG **")])),n,h(Lc,I([Pc(I([tl(5),Uc(ah(.5)),df(ah(1.5))]))]),E),h(Lc,I([Pc(I([Zl(nh),df(ah(1))]))]),I([Oh("** LICENSE **")])),e]))},vf={$:19},mf=Ih("active"),yf=Go("bottom"),wf=h(vh,I([Pc(I([Zl(nh),Wc(Nc),zl(ah(0)),yf(ah(0)),h(sf,ah(1),ah(.75)),xh(tl(2)),el(12),th(zc(10)),mf(I([xh(tl(1))]))])),Dh(vf)]),I([Oh("─┼─")])),Af={a7:0,aN:0,D:"border-box"},kf=Go("box-sizing"),Cf=function(t){return{$:18,a:t}},Sf=function(t){return{$:27,a:t}},Ef=r((function(t,e,n){var r=h(Jr,Ln,I([t.aP,Na(t)]));t:for(;;){if(r.b&&r.b.b&&!r.b.b.b){if(r.a){if(r.b.a)break t;r.b;return e("no cartridges match the search")}r.b;return e('start by clicking "Add new" to add a ROM image')}break t}return n})),xf=Go("cursor"),Tf=n((function(t,e){return h(Qs,!1,h(Hs,cr(t.Q),e))})),If=i((function(t,e,n,r){return h(Tf,t,e)?n:r})),Bf=pe,Of=n((function(t,e){var n=t.b,r=t.c;return Jo(n)?e:l(as,r,n,e)})),Rf=function(t){return t.a},Pf=function(t){return le(ve(t))},Df=n((function(t,e){return h(he,t,ve(e))})),Mf=function(t){return ue(ve(t))},Ff=n((function(t,e){var n=t.a,r=t.b,i=e.a,s=e.b;switch(r.$){case 4:var a=r.a;return A(h(vn,A(n,a),i),s);case 0:var o=r.a,u=r.b,c=r.c,d=l(jn,Of,s,u),p=l(jn,jf,A(E,d),c),_=p.a,g=p.b;a=l(Ac,o,h(Jr,Rf,u),Jn(_));return A(h(vn,A(n,a),i),g);case 1:var b=r.a,v=(o=r.b,u=r.c,c=r.d,d=l(jn,Of,s,u),l(jn,jf,A(E,d),c));_=v.a,g=v.b,a=f(Mf,b,o,h(Jr,Rf,u),Jn(_));return A(h(vn,A(n,a),i),g);case 2:o=r.a,u=r.b,c=r.c,d=l(jn,Of,s,u);var m=l(jn,Ff,A(E,d),c);_=m.a,g=m.b,a=l(Pf,o,h(Jr,Rf,u),Jn(_));return A(h(vn,A(n,a),i),g);default:b=r.a,o=r.b,u=r.c,c=r.d,d=l(jn,Of,s,u);var y=l(jn,Ff,A(E,d),c);_=y.a,g=y.b,a=f(Df,b,o,h(Jr,Rf,u),Jn(_));return A(h(vn,A(n,a),i),g)}})),jf=n((function(t,e){var n=e.a,r=e.b;switch(t.$){case 4:var i=t.a;return A(h(vn,i,n),r);case 0:var s=t.a,a=t.b,o=t.c,u=l(jn,Of,r,a),c=l(jn,jf,A(E,u),o),d=c.a,p=c.b;i=l(Ac,s,h(Jr,Rf,a),Jn(d));return A(h(vn,i,n),p);case 1:var _=t.a,g=(s=t.b,a=t.c,o=t.d,u=l(jn,Of,r,a),l(jn,jf,A(E,u),o));d=g.a,p=g.b,i=f(Mf,_,s,h(Jr,Rf,a),Jn(d));return A(h(vn,i,n),p);case 2:s=t.a,a=t.b,o=t.c,u=l(jn,Of,r,a);var b=l(jn,Ff,A(E,u),o);d=b.a,p=b.b,i=l(Pf,s,h(Jr,Rf,a),Jn(d));return A(h(vn,i,n),p);default:_=t.a,s=t.b,a=t.c,o=t.d,u=l(jn,Of,r,a);var v=l(jn,Ff,A(E,u),o);d=v.a,p=v.b,i=f(Df,_,s,h(Jr,Rf,a),Jn(d));return A(h(vn,i,n),p)}})),Lf=n((function(t,e){return d(rs,1,t,e,Yi,Yi)})),Nf=n((function(t,e){for(;;){if(!e.b)return t;var n=e.a,r=n.b,i=n.c,s=e.b;if(Mr(i))t=t,e=s;else t=Tn(A(i,r)),e=s}})),Uf=function(t){var e=h(Nf,In,t);if(1===e.$)return Zi;var n=e.a,r=n.a,i=n.b;return h(Lf,r,i)},zf=function(t){var e,n=t.a,r=t.b;return h(Oc,r,Mu(I([(e=n,{$:0,a:e})])))},$f=function(t){return l(Ac,"style",E,ic(Cc(wc(ic(kc(h(Jr,zf,yn(t))))))))},Hf=r((function(t,e,n){var r=h(Jr,Rf,e),i=Uf(e),s=l(jn,jf,A(E,i),n),a=s.a,o=s.b,u=$f(o);return l(Ac,t,r,h(vn,u,Jn(a)))})),Wf=n((function(t,e){for(;;){if(!e.b)return!1;var n=e.a.a,r=e.b;if(b(t,n))return!0;t=t,e=r}})),Vf=n((function(t,e){t:for(;;){if(e.b){var n=e.a.a,r=e.b,i="_"+n;if(h(Wf,i,r)){t=i,e=r;continue t}return i}return t}})),qf=n((function(t,e){return A(h(Vf,"_",e),$f(t))})),Gf=r((function(t,e,n){var r=h(Jr,Rf,e),i=Uf(e),s=l(jn,Ff,A(E,i),n),a=s.a,o=s.b,u=h(qf,o,a);return l(Pf,t,r,h(vn,u,Jn(a)))})),Qf=i((function(t,e,n,r){var i=h(Jr,Rf,n),s=Uf(n),a=l(jn,Ff,A(E,s),r),o=a.a,u=a.b,c=h(qf,u,o);return f(Df,t,e,i,h(vn,c,Jn(o)))})),Jf=i((function(t,e,n,r){var i=h(Jr,Rf,n),s=Uf(n),a=l(jn,jf,A(E,s),r),o=a.a,u=a.b,c=$f(u);return f(Mf,t,e,i,h(vn,c,Jn(o)))})),Kf=function(t){switch(t.$){case 4:return t.a;case 0:var e=t.a,n=t.b,r=t.c;return l(Hf,e,n,r);case 1:var i=t.a;e=t.b,n=t.c,r=t.d;return f(Jf,i,e,n,r);case 2:e=t.a,n=t.b,r=t.c;return l(Gf,e,n,r);default:i=t.a,e=t.b,n=t.c,r=t.d;return f(Qf,i,e,n,r)}},Yf=r((function(t,e,n){return Kf(h(t,e,n))})),Zf=r((function(t,e,n){return Sc(f(Bf,Yf,t,e,n))})),Xf=Go("margin-top"),td=Go("min-height"),ed=r((function(t,e,n){return{$:2,a:t,b:e,c:n}})),nd=function(t){return Ih("nth-child("+t+")")},rd={a:0,D:"pointer"},id=_h("type"),sd=function(t){var e=function(t){return h(Lc,I([ff(t.Q),Pc(I([kf(Af),h(qo,"padding","2.25em calc(2 * var(--cw))"),td(ah(5)),Zl(nh),h(nd,"odd",I([tl(12)])),h(nd,"even",I([tl(5)])),el(0),xf(rd),h(qo,"word-break","break-word")])),Dh(xa(t.Q))]),I([Oh(t.az)]))},r=function(e){var r=n((function(t,e){return l(Rh,I([id("button"),Pc(I([h(qo,"width","calc(8 * var(--cw))")]))]),t,e)}));return h(Lc,I([ff(e.Q),bh,Pc(I([kf(Af),td(ah(4)),Zl(nh),tl(11),el(15),xf(rd),h(qo,"word-break","break-word")]))]),I([Oh(e.az),h(Lc,I([Pc(I([sh,Zl($c),Xf(ah(1)),df(ah(-.5)),fh(Fh)]))]),I([h(r,Cf(1),"Edit"),h(r,h(Qs,fi,h(Hs,Sf,uo(t))),"Run")]))]))},i=I([l(Zf,n((function(n,i){return l(ed,"div",I([Pc(I([kf(Af),Xc(Zc(100)),Xf(ah(3.5))]))]),h(Jr,(function(n){return A(n.Q,d(If,i=n,t.cN,r,e,i));var i}),h(Va,h(_s,(function(t){return t.az}),Fa),h(La,n,i))))})),t.cE,t.aP)]);return l(Ef,t,(function(t){return I([h(Lc,I([Pc(I([Xc(Zc(100)),Xf(ah(3.5)),h(qo,"padding","3em calc(2 * var(--cw)) 0 calc(2 * var(--cw))"),Zl(nh),kf(Af)]))]),I([Oh(t)]))])}),i)},ad={$:38},od=function(t){return{$:7,a:t}},ud={$:8},cd=n((function(t,e){return h(ph,t,co(e))})),hd=cd("disabled"),ld=Go("flex-grow"),fd=jc("label"),dd=function(t){return h(qo,"margin-right",Nl(t))},pd=n((function(t,e){return h(yh,t,{$:2,a:e})})),_d=n((function(t,e){return l(Qr,Ii,e,t)})),gd=h(_d,I(["target","value"]),wi),bd=function(t){return h(pd,"change",h(wr,h(_s,t,(function(t){return A(t,!0)})),gd))},vd=function(t){return h(pd,"input",h(wr,h(_s,t,(function(t){return A(t,!0)})),gd))},md=_h("placeholder"),yd=jc("input"),wd=de,Ad=n((function(t,e){return Kf(t(e))})),kd=n((function(t,e){return Sc(l(wd,Ad,t,e))})),Cd=_h("value"),Sd=function(t){return kd((function(e){return h(yd,h(vn,id("text"),h(vn,Cd(e),t)),E)}))},Ed=n((function(t,e){return h(fd,I([Pc(S(I([sh]),t)),bh]),I([h(Sd,I([id("text"),Pc(I([ld(zc(1)),dd(1)])),md("Search cartridges..."),vd(od),bd((function(t){return ad}))]),e.cE),l(Rh,I([id("button"),hd(""===e.cE),Pc(I([df(ah(.5))]))]),ud,"Clear")]))})),xd=function(t){return{$:15,a:t}},Td=function(t){return l(hh,"alignItems","align-items",t(lh))},Id=n((function(t,e){return{$:2,a:t,b:e}})),Bd=Id(2),Od=Go("flex-start"),Rd=jc("form"),Pd=Ho("label"),Dd=function(t){return A(t,!0)},Md=function(t){return h(pd,"submit",h(wr,Dd,kr(t)))},Fd=n((function(t,e){return h(be,function(t){return/^(on|formAction$)/i.test(t)?"data-"+t:t}(t),me(e))})),jd=n((function(t,e){return l(Bc,h(Fd,t,e),E,"")})),Ld=jd,Nd=function(t){return h(Ld,"data-label",t)},Ud=n((function(t,e){return{$:17,a:t,b:e}})),zd=function(t){return{$:7,a:t}},$d=function(t){return{$:6,a:t}},Hd=function(t){return{$:3,a:t}},Wd=function(t){return{$:5,a:t}},Vd=function(t){return{$:0,a:t}},qd=function(t){return{$:8,a:t}},Gd=function(t){return{$:4,a:t}},Qd=function(t){return{$:2,a:t}},Jd=function(t){return{$:1,a:t}},Kd=function(t){return{$:9,a:t}},Yd={g:0,D:"block"},Zd=cd("checked"),Xd=h(_d,I(["target","checked"]),vi),tp=function(t){return h(pd,"change",h(wr,h(_s,t,(function(t){return A(t,!0)})),Xd))},ep=n((function(t,e){return h(yd,I([id("checkbox"),tp(t),Zd(e)]),E)})),np=_h("htmlFor"),rp=Go("max-width"),ip=jc("option"),sp=jc("select"),ap=cd("selected"),op=i((function(t,e,n,r){var i;return h(Bh,I([gh("select-wrapper"),Pc(t)]),I([h(sp,S(I([Cd(r),(i=!1,h(_h,"autocomplete",i?"on":"off"))]),e),h(Jr,(function(t){var e=t.a,n=t.b;return h(ip,I([Cd(e),ap(b(e,r))]),I([Oh(n)]))}),n))]))})),up=r((function(t,e,n){return f(op,I([rp(Nh(100))]),I([Pc(I([rp(Nh(100))])),bd(e)]),t,n)})),cp=i((function(t,e,n,r){return h(Bh,t,h(Jr,(function(t){return h(fd,I([Pc(I([xf(rd),of(nf),h(Ih,"not(:first-of-type)",I([h(qo,"margin-left","calc(2 * var(--cw))")]))]))]),I([Oh(t.b),h(yd,I([id("radio"),Pc(I([h(qo,"margin-left","var(--cw)")])),Zd(b(r,t.a)),l(wa,h(wa,pd("change"),wr((function(t){return A(t,!0)}))),mi((function(e){return e?kr(n(t.a)):yi("")})),Xd)]),E)]))}),e))})),hp={g:0,D:"inline-flex"},lp=_h("max"),fp=_h("min"),dp=function(t){return h(jd,"tabIndex",Pn(t))},pp=s((function(t,e,n,r,i){var s=e.a,a=e.b,o=function(t){return y(t,s)>-1&&y(t,a)<1?Tn(t):In},u=h(Ph,"keydown",h(mi,(function(t){switch(t){case"ArrowLeft":return kr(n(o(i-1)));case"ArrowRight":return kr(n(o(i+1)));default:return yi("")}}),h(Ii,"key",wi)));return h(Bh,I([Pc(S(t,I([Dc(hp)]))),dp(0),u]),I([h(yd,I([Pc(I([ld(zc(1))])),id("range"),fp(Pn(s)),lp(Pn(a)),Cd(Pn(i)),vd(h(_s,jr,h(_s,Us(o),n)))]),E),h(Bh,I([Pc(I([Dc(Yd),h(qo,"padding-left","calc(2 * var(--cw))"),h(qo,"min-width","calc(4 * var(--cw))"),ld(zc(0)),ef(zc(0))]))]),I([Oh(r(i))]))]))})),_p=n((function(t,e){var r,i,s,a=n((function(t,e){return h(fd,I([Pc(I([Dc(Yd),Xc(Nh(100))]))]),I([Oh(t),h(Ml,E,E),e]))})),o=n((function(t,e){return h(fd,I([np("nothing")]),I([h(Bh,I([Pc(I([Dc(Th),h(qo,"width","calc(20 * var(--cw))")]))]),I([Oh(t)])),e]))})),u=n((function(t,e){return h(fd,I([Pc(I([xf(rd)]))]),I([h(Bh,I([Pc(I([Dc(Th),h(qo,"width","calc(20 * var(--cw))")]))]),I([Oh(t)])),e]))})),c=function(t){return h(_s,t,Ud(e.Q))},p=n((function(t,e){return h(Sd,I([id("text"),md("Auto"),Pc(I([h(qo,"width","calc(10 * var(--cw))")])),vd((function(e){return""===e?h(c,t,In):h(Qs,fi,h(Hs,h(wa,c(t),Tn),jr(e)))}))]),l(wa,Qs(""),Hs(Pn),e))}));return I([h(a,"Cartridge name:",h(Sd,I([id("text"),Pc(I([Xc(Nh(100))])),vd(c(Vd))]),e.az)),h(a,"Cartridge type:",l(up,h(Jr,(function(t){return A(t.de,t.cU)}),t.aO),c(Jd),e.bB)),h(o,"TV mode:",f(cp,E,I([A(0,"PAL"),A(1,"NTSC"),A(2,"SECAM")]),c(Qd),e.cp)),h(u,"Emulate paddles:",h(ep,c(Hd),e.bH)),h(o,"RNG seed:",h(p,Gd,e.cc)),h(o,"First visible line:",h(p,Wd,e.bL)),h(o,"CPU emulation:",f(cp,E,I([A(In,"Default"),A(Tn(1),"Instruction"),A(Tn(0),"Cycle")]),c($d),e.cM)),h(o,"Audio emulation:",f(cp,E,I([A(In,"Default"),A(Tn(1),"PCM"),A(Tn(0),"Waveform")]),c(zd),e.cB)),h(o,"Phosphor emulation:",f(cp,E,I([A(In,"Default"),A(Tn(!0),"On"),A(Tn(!1),"Off")]),c(qd),e.dF)),h(o,"Volume:",(i=t.dj,s=i.$||i.a?"calc(40 * var(--cw))":(i.a,"calc(100vw - 10 * var(--cw))"),d(pp,I([h(qo,"width",s)]),A(0,100),h(_s,Hs(c(Kd)),Qs(fi)),(function(t){return Pn(t)+"%"}),e.eb))),h(Lc,E,I([h(vh,I([id("button"),Dh((r=e.Q,{$:21,a:r})),Pc(I([Xf(ah(1)),h(sf,Gc(0),ah(1))]))]),I([Oh("Save cartridge image")]))]))])})),gp=n((function(t,e){var r,i=n((function(t,e){return l(Rh,I([id("button"),Pc(I([h(qo,"width","calc(10 * var(--cw))")]))]),t,e)}));return I([h(Rd,I([Pc(I([Yl(ah(.5)),sh,fh(Fh),Wc(Nc),Kc(ah(2)),$c(Gc(0)),th(zc(10)),Xc(Zc(100)),kf(Af)])),Md(fi),bh]),I([h(i,Cf(0),"Back"),h(i,xd(e.Q),"Delete")])),(r=h(_p,t,e),h(Rd,I([bh,Nd("Settings:"),Md(fi),Pc(I([sh,ql(Vl),Td(Od),Bd(I([Pd(I([h(Ih,"not(:first-of-type)",I([dh(ah(1))]))]))])),Xf(ah(4)),dh(ah(2))]))]),r))])})),bp=function(t){var e=A(t.cF,h(Us,(function(e){return h(Wa,h(wa,cr(e),(function(t){return t.Q})),t.aP)}),t.cN));if(1!==e.a||e.b.$)return function(t){return h(vn,h(Ed,I([Xc(Zc(100)),Wc(Nc),Kc(ah(2)),$c(Gc(0)),kf(Af),th(zc(10))]),t),h(vn,wf,h(vn,xc(I([h(Hl,"body",I([Yl(ah(5))]))])),sd(t))))}(t);var n=e.b.a;return h(gp,t,n)},vp=Go("border-style"),mp=function(t){return t?"-":"+"},yp=r((function(t,e,n){var r=function(t){return h($r,"calc(",t.D)?h(Pr,4,t.D):t.D},i=h(Dn," ",I([r(t),mp(e),r(n)]));return{bA:0,ad:0,o:0,ax:0,ag:0,J:0,ah:0,ai:0,R:0,S:0,B:0,an:0,D:h(Qc,"calc",I([i]))}})),wp=Go("overflow-y"),Ap={at:0,bx:0,bS:0,aj:0,dQ:0,D:"scroll"},kp=Go("stretch"),Cp=function(t){var e=l(Zf,n((function(e,n){return h(Lc,I([bh,Pc(I([sh,ld(zc(1)),Td(kp),wp(Lh)]))]),I([l(ed,"div",I([Pc(I([ld(zc(1)),wp(Ap),h(qo,"-webkit-overflow-scrolling","touch")]))]),h(Jr,(function(e){return A(e.Q,(r=h(If,n=e,t.cN),h(Lc,I([ff(n.Q),Pc(I([h(nd,"odd",I([tl(h(r,11,5))])),h(nd,"even",I([tl(h(r,11,12))])),h(r,el(15),el(0)),h(qo,"padding-left","var(--cw)"),xf(rd),h(qo,"word-break","break-word")])),Dh(xa(n.Q))]),I([Oh(" * "+n.az)]))));var n,r}),h(Va,h(_s,(function(t){return t.az}),Fa),h(La,e,n))))]))})),t.cE,t.aP);return l(Ef,t,(function(t){return h(Lc,I([bh,Pc(I([ld(zc(1)),sh,ql(Vl),Zl(nh),fh(nh)]))]),I([Oh(t)]))}),e)},Sp=r((function(t,e,n){return uo(t).$?n:e})),Ep=function(t){var e=h(Lc,I([Pc(I([sh]))]),I([h(Sd,I([id("text"),Pc(I([ld(zc(1)),dd(1)])),md("Search cartridges..."),vd(od)]),t.cE),h(vh,I([id("button"),hd(""===t.cE),Dh(ud)]),I([Oh("Clear")]))])),r=n((function(t,e){return h(vh,S(I([id("button"),Pc(I([h(qo,"width","calc(10 * var(--cw))")]))]),t),e)}));return h(Rd,I([bh,Md(fi)]),I([e,h(Lc,E,I([h(r,I([Dh(vf)]),I([Oh("Add new")])),h(r,I([hd(l(Sp,t,!1,!0)),Dh(h(Qs,fi,h(Hs,xd,t.cN)))]),I([Oh("Delete")])),h(r,I([hd(l(Sp,t,!1,!0)),Dh(h(Qs,fi,h(Hs,Sf,uo(t))))]),I([Oh("Run")]))]))]))},xp=Go("flex-basis"),Tp={$:12},Ip={$:13},Bp=function(t){return{$:10,a:t}},Op=function(t){return{$:11,a:t}},Rp=n((function(t,e){t:for(;;){if(e.a){if("d"===e.b)return h(Qs,fi,h(Hs,xd,uo(t)));break t}switch(e.b){case"ArrowUp":return h(Qs,Ip,h(Hs,Op,t.cN));case"ArrowDown":return h(Qs,Tp,h(Hs,Bp,t.cN));case"Enter":return h(Qs,fi,h(Hs,Sf,uo(t)));default:break t}}return fi})),Pp=n((function(t,e){return A(t,e)})),Dp=Go("outline-style"),Mp=Go("overflow-x"),Fp=n((function(t,e){return h(Lc,I([bh,Nd("Settings:"),Pc(S(I([sh,Mp(Lh)]),S(l(Sp,t,I([Td(kp)]),I([Td(nh),fh(nh)])),e)))]),I([h(Qs,Oh("no cartridge selected"),h(Hs,h(wa,(function(t){return h(Rd,I([Pc(I([sh,ql(Vl),Td(Od),dh(ah(1)),wp(Ap),h(qo,"-webkit-overflow-scrolling","touch"),ld(zc(1)),Bd(I([Pd(I([h(Ih,"not(:first-of-type)",I([dh(ah(1))]))]))]))])),Md(fi)]),t)}),_p(t)),h(Us,(function(e){return h(Wa,(function(t){return b(e,t.Q)}),Na(t))}),t.cN)))]))})),jp=n((function(t,e){return 1===e?function(t){return I([h(Lc,I([Pc(I([Uc(l(yp,Yc(100),1,ah(2))),sh,Td(kp),dh(ah(1)),kf(Af),xh(vp(Hc)),xh(Dp(Hc))])),dp(0),(e=Rp(t),h(pd,"keydown",h(wr,(function(t){return 40===t.$?A(t,!1):A(t,!0)}),h(wr,e,l(Ar,Pp,h(Ii,"ctrlKey",vi),h(Ii,"key",wi))))))]),I([h(Lc,I([Pc(I([kf(Af),ld(zc(1)),xp(Gc(0)),sh,ql(Vl)]))]),I([Ep(t),Cp(t)])),h(Fp,t,I([kf(Af),ld(zc(1)),xp(Gc(0))]))]))]);var e}(t):bp(t)})),Lp=function(t){return{$:0,a:t}},Np=function(t){return{$:37,a:t}},Up=function(t){return{$:35,a:t}},zp=function(t){return{$:36,a:t}},$p=function(t){return{$:32,a:t}},Hp={$:30},Wp=function(t){var e=n((function(t,e){return h(fd,I([np("nothing"),Pc(I([Dc(Yd)]))]),I([h(Bh,I([Pc(I([Dc(Th),h(qo,"width","calc(20 * var(--cw))")]))]),I([Oh(t)])),e]))})),r=function(){switch(t.c_.$){case 1:case 2:return!0;default:return!1}}(),i=n((function(t,e){return h(fd,I([Pc(I([xf(rd)]))]),I([h(Bh,I([Pc(I([Dc(Th),h(qo,"width","calc(20 * var(--cw))")]))]),I([Oh(t)])),e]))}));return I([h(e,"Difficulty left:",f(cp,E,I([A(0,"A/Pro:"),A(1,"B/Amateur:")]),Up,t.cL.cV)),h(e,"Difficulty right:",f(cp,E,I([A(0,"A/Pro:"),A(1,"B/Amateur:")]),zp,t.cL.cW)),h(e,"TV mode:",f(cp,E,I([A(0,"Color:"),A(1,"BW:")]),Np,t.cL.cK)),h(i,"Limit framerate:",h(ep,$p,t.dh)),h(Ml,E,E),h(Ml,E,E),h(vh,I([Dh(Ta),hd(!r),Pc(I([h(qo,"min-width","calc(15 * var(--cw))")]))]),I([Oh(t.cZ?"Resume":"Pause")])),h(vh,I([Dh(Hp),hd(!r),Pc(I([h(qo,"min-width","calc(15 * var(--cw))")]))]),I([Oh("Hard Reset")]))])},Vp=_h("alt"),qp=jc("h1"),Gp=jc("img"),Qp=jc("li"),Jp=jc("p"),Kp=function(t){return h(_h,"src",t)},Yp=function(t){return h(Qs,t.a6,t.aE.d4)},Zp=jc("ul"),Xp=function(t){var e=t.aE.df?"doc/images/2600_touch_lh.jpg":"doc/images/2600_touch.jpg",n=t.aE.df?"doc/images/2600_touch_alt_lh.jpg":"doc/images/2600_touch_alt.jpg",r=I([h(qp,E,I([Oh("Touch controls")])),h(Jp,E,I([h(Gp,I([Kp(e),Vp("touch controls"),Pc(I([Dc(Yd),Xc(Nh(100)),rp(ah(20))]))]),E),h(Gp,I([Kp(n),Vp("touch controls, alt mode"),Pc(I([Dc(Yd),Xf(ah(1)),Xc(Nh(100)),rp(ah(20))]))]),E)]))]),i=function(t){return h(Qp,E,I([Oh(t)]))},s=I([h(qp,E,I([Oh("Keyboard controls")])),h(Jp,E,I([h(Zp,E,I([i("LEFT JOYSTICK: wasd / arrows + v / space"),i("RIGHT JOYSTICK: ijkl + b"),i("RESET: shift-enter"),i("SELECT: shifht-space"),i("TOGGLE FULLSCREEN: enter"),i("HARD RESET: shift-r"),i("PAUSE: p")]))]))]);return Yp(t)?S(r,s):s},t_=jc("canvas"),e_=Go("touch-action"),n_=function(t){var e=function(){var e=A(t.c_,t.dS);t:for(;;)switch(e.a.$){case 2:return Jh(Yh);case 1:if(e.b)break t;return Jh(Yh);default:break t}return Jh(Lh)}();return h(t_,I([ff("stellerator-canvas"),Pc(I([Xc(Nh(100)),Uc(Nh(100)),Wc(Dl),$c(Gc(0)),Kc(Gc(0)),th(zc(10)),e,e_(Hc)]))]),E)},r_=Go("max-height"),i_=n((function(t,e){var n=e.D;return{bK:t,D:Tn(n)}})),s_=function(t){var e=function(){var e=A(t.c_,t.dS);t:for(;;)switch(e.a.$){case 2:return Jh(Lh);case 1:if(e.b)break t;return Jh(Lh);default:break t}return Jh(Yh)}(),n=Yp(t)?I([Oh("emulation paused"),h(Ml,E,E),Oh("tap to resume")]):I([Oh("emulation paused")]),r=function(){var e=t.c_;switch(e.$){case 0:return I([Oh("emulation stopped")]);case 4:return I([Oh("emulation starting")]);case 1:return n;case 3:var r=e.a;return I([Oh("ERROR: "+r)]);default:return E}}(),i=3===t.c_.$?tl(7):tl(3);return h(Lc,I([Pc(I([Uc(Nh(100)),Xc(Nh(100)),sh,fh(nh),Td(nh),Zl(nh),Wc(Dl),$c(Gc(0)),Kc(Gc(0)),th(zc(10)),el(15),e,i])),Dh(b(t.c_,la)&&Yp(t)?Ta:fi)]),r)},a_={aC:0,D:"relative"},o_=n((function(t,e){return{$:4,a:t,b:e}})),u_=Id(3),c_=i((function(t,e,n,r){return{db:e,di:t,dA:n,dZ:r}})),h_=h(dn,{cG:!1,dp:!1},"(\\[.*?\\])\\((?!/|https?://)(.*?)\\)"),l_=pn(1/0),f_=n((function(t,e){var n=function(e){var n=e.dZ;if(!n.b||n.a.$||!n.b.b||n.b.a.$||n.b.b.b)return"";var r=n.a.a,i=n.b.a.a;return r+"("+t+i+")"},r=h(Hs,(function(t){return l(l_,t,n,e)}),h_);return h(Qs,e,r)})),d_=function(t){var e=t.c7;if(e.$)return Oh("loading...");var n=e.a;return h(Lc,I([Pc(I([h(qo,"padding","0 var(--cw)"),dh(ah(1)),u_(I([h(Hl,"img",I([Xc(ah(25)),h(qo,"max-width","calc(100vw - 2*var(--cw))")]))]))]))]),I([lf(h(gf,E,h(f_,"doc/",n)))]))},p_=function(t){return{$:22,a:t}},__=function(t){return{$:2,a:t}},g_=function(t){return{$:0,a:t}},b_=function(t){return{$:5,a:t}},v_=function(t){return{$:8,a:t}},m_=function(t){return{$:4,a:t}},y_={$:12},w_=function(t){return{$:3,a:t}},A_=function(t){return{$:7,a:t}},k_=function(t){return{$:10,a:t}},C_=function(t){return{$:11,a:t}},S_=function(t){return{$:6,a:t}},E_=function(t){return{$:9,a:t}},x_=function(t){return{$:1,a:t}},T_={$:16},I_=r((function(t,e,n){return{$:23,a:t,b:e,c:n}})),B_=U,O_=r((function(t,e,i){var s,a=function(t){return h(qp,I([Pc(I([el(5)]))]),I([Oh(t)]))},o=n((function(t,e){return h(fd,I([np("nothing"),Pc(I([Dc(Yd)]))]),I([h(Bh,I([Pc(I([Dc(Th),h(qo,"width","calc(20 * var(--cw))")]))]),I([Oh(t)])),e]))})),u=r((function(t,e,n){return h(fd,I([Pc(I([xf(rd),Dc(Yd)]))]),I([h(Bh,I([Pc(I([Dc(Th),h(qo,"width","calc(20 * var(--cw))")]))]),I([Oh(t)])),h(ep,e,n)]))}));return I([a("General"),h(Jp,E,I([h(o,"CPU emulation:",f(cp,E,I([A(1,"Instruction"),A(0,"Cycle")]),h(wa,p_,g_),t.cM))])),a("Audio"),h(Jp,E,I([h(o,"Audio emulation:",f(cp,E,I([A(1,"PCM"),A(0,"Waveform")]),h(wa,p_,__),t.cB)),h(o,"Volume:",d(pp,I([h(qo,"width","calc(40*var(--cw))"),h(qo,"max-width","calc(100vw - 4*var(--cw))")]),A(0,100),h(_s,Hs(h(wa,p_,x_)),Qs(fi)),(function(t){return Pn(t)+"%"}),t.eb))])),a("Display"),h(Jp,E,I([l(u,"Smooth scaling:",h(wa,p_,w_),t.dV),l(u,"Phosphor emulation:",h(wa,p_,m_),t.dF),l(u,"Sync video:",h(wa,p_,S_),t.d8),h(o,"Gamma correction:",d(pp,I([h(qo,"width","calc(40*var(--cw))"),h(qo,"max-width","calc(100vw - 4*var(--cw))")]),A(0,50),h(_s,Hs(h(wa,h(wa,h(wa,p_,b_),(function(t){return t/10})),ir)),Qs(fi)),(function(t){return Vc(t/10)}),B_(10*t.c5)))])),a("Controls"),h(Jp,E,I([h(o,"Touch controls:",f(cp,E,I([A(In,"Auto"),A(Tn(!0),"On"),A(Tn(!1),"Off")]),h(wa,p_,A_),t.d4)),l(u,"Left handed mode:",h(wa,p_,v_),t.df),h(o,"Touch joystick sensitivity:",d(pp,I([h(qo,"width","calc(40*var(--cw))"),h(qo,"max-width","calc(100vw - 4*var(--cw))")]),A(0,100),h(_s,Hs(h(wa,p_,E_)),Qs(fi)),Pn,t.ea))])),a("Ui"),h(Jp,E,I([h(o,"Display mode:",f(cp,E,I([A(In,"Auto"),A(Tn(1),"Wide"),A(Tn(0),"Narrow")]),h(wa,p_,k_),t.d5)),h(o,"Size:",l(up,h(Jr,h(wa,(function(t){return A(t,t+"%")}),Pn),Fo),h(_s,jr,h(_s,Hs(h(wa,p_,C_)),Qs(fi))),Pn(t.cq)))])),a("Reset"),h(Jp,E,(s=h(qo,"width","calc(25*var(--cw))"),I([f(Mh,e,I([Pc(I([s]))]),p_(y_),"Reset to defaults"),f(Mh,e,I([Pc(I([s])),hd(!i)]),l(I_,"Do you really want to delete all cartridges?",A("OK","Cancel"),T_),"Delete all cartridges")])))])})),R_=n((function(t,e){return I([h(Lc,I([Pc(I([h(qo,"padding","1rem var(--cw) 1rem var(--cw)"),Xc(Zc(100)),kf(Af),u_(I([Pd(I([h(Ih,"not(:first-of-type)",I([dh(ah(1))]))]))]))]))]),l(O_,t.aE,e,Ln(t.aP)>0))])})),P_=function(t){var e,n=function(t){var e=t.aE.d5;if(e.$)return t.dj;var n=e.a;return Tn(n)}(t),r=h(Qs,E,h(Hs,hf(t),n)),i=function(){var e=A(t.cO,n);if(e.b.$)return E;switch(e.a){case 0:var r=e.b.a;return h(jp,t,r);case 1:r=e.b.a;return h(R_,t,r);case 2:return function(t){var e,n,r=o_(I([Lp(I([(e=Gc(900*t.aE.cq/100|0),h(i_,"max-width",e))]))]));return I([h(Lc,I([Pc(I([Xc(Zc(100)),h(qo,"height","calc(100vh - 3em)"),Xf(ah(1)),sh,kf(Af),Td(kp),ql(Wl),r(I([Dc(Yd)]))]))]),I([h(Lc,I([bh,Pc(I([sh,Td(kp),ld(zc(1)),r(I([h(qo,"height","calc(70vh - 4em)"),r_(Gc(600))]))]))]),I([h(Lc,I([Pc(I([ld(zc(1)),h(qo,"padding","1em calc(2 * var(--cw))"),tl(0),Wc(a_)]))]),I([n_(t),s_(t)]))])),h(Lc,I([Pc(I([ld((n=0,{S:0,B:0,dA:0,aW:0,K:n,ap:"",aJ:0,D:Vc(n)})),ef(zc(0)),h(qo,"flex-basis","calc(50 * var(--cw))"),sh,ql(Vl),Td(kp)]))]),I([h(Lc,I([bh,Nd("Console:")]),Wp(t)),h(Lc,I([bh,Nd("Help:"),Pc(I([ld(zc(1)),Ll(Lh),sh,Td(kp),ql(Vl)]))]),I([h(Lc,I([Pc(I([wp(Ap),h(qo,"-webkit-overflow-scrolling","touch"),ld(zc(1))]))]),Xp(t))]))]))]))])}(t);case 3:return function(t){return I([d_(t)])}(t);default:return function(t){return I([bf(t)])}(t)}}(),s=(e=Gc(t.aE.cq/100*18),xc(I([Wo(I([Qo(e),Tc(e)]))])));return h(vn,s,S(r,S(h(Qs,E,h(Hs,Zh(t.dl),n)),i)))},D_=Kf;!function(e){t.Elm?function t(e,n){for(var r in n)r in e?"init"==r?F(6):t(e[r],n[r]):e[r]=n[r]}(t.Elm,e):t.Elm=e}({Stellerator:{Main:{init:oi({dc:ea,dB:ra,dC:function(t){if(t.$)return fi;var e=t.a;return na(function(t){var e=t.b5?"https://":"http://";return l(sa,"#",t.c4,l(sa,"?",t.b6,S(h(ia,t.b2,S(e,t.bP)),t.b0)))}(e))},d_:function(t){return ca(I([Sa,(e=aa,Aa(h(wa,e,(function(t){var e=h(Bi,$i(Fi),t);return e.$?E:e.a})))),ba(ua),ya(oa)]));var e},d6:Lo,d9:function(t){return{cC:h(Jr,D_,P_(t)),d3:h(Qs,"Stellerator",h(Hs,(function(t){return"Stellerator: "+t.az}),$l(t)))}}})(Ri)(0)}}})}(this)}).call($);var H=$.Elm;const W={addCSS:!0,thumbWidth:15,watch:!0};const V=t=>null!=t?t.constructor:null,q=(t,e)=>Boolean(t&&e&&t instanceof e),G=t=>null==t,Q=t=>V(t)===Object,J=t=>V(t)===String,K=t=>Array.isArray(t),Y=t=>q(t,NodeList);var Z=J,X=K,tt=Y,et=t=>q(t,Element),nt=t=>q(t,Event),rt=t=>G(t)||(J(t)||K(t)||Y(t))&&!t.length||Q(t)&&!Object.keys(t).length;function it(t,e){if(e<1){const n=function(t){const e=`${t}`.match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(e);return parseFloat(t.toFixed(n))}return Math.round(t/e)*e}class st{constructor(t,e){et(t)?this.element=t:Z(t)&&(this.element=document.querySelector(t)),et(this.element)&&rt(this.element.rangeTouch)&&(this.config=Object.assign({},W,e),this.init())}static get enabled(){return"ontouchstart"in document.documentElement}static setup(t,e={}){let n=null;if(rt(t)||Z(t)?n=Array.from(document.querySelectorAll(Z(t)?t:'input[type="range"]')):et(t)?n=[t]:tt(t)?n=Array.from(t):X(t)&&(n=t.filter(et)),rt(n))return null;const r=Object.assign({},W,e);if(Z(t)&&r.watch){new MutationObserver(e=>{Array.from(e).forEach(e=>{Array.from(e.addedNodes).forEach(e=>{if(!et(e)||!function(t,e){return function(){return Array.from(document.querySelectorAll(e)).includes(this)}.call(t,e)}(e,t))return;new st(e,r)})})}).observe(document.body,{childList:!0,subtree:!0})}return n.map(t=>new st(t,e))}init(){st.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}destroy(){st.enabled&&(this.listeners(!1),this.element.rangeTouch=null)}listeners(t){const e=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(t=>{this.element[e](t,t=>this.set(t),!1)})}get(t){if(!st.enabled||!nt(t))return null;const e=t.target,n=t.changedTouches[0],r=parseFloat(e.getAttribute("min"))||0,i=parseFloat(e.getAttribute("max"))||100,s=parseFloat(e.getAttribute("step"))||1,a=i-r;let o;const u=e.getBoundingClientRect(),c=100/u.width*(this.config.thumbWidth/2)/100;return o=100/u.width*(n.clientX-u.left),o<0?o=0:o>100&&(o=100),o<50?o-=(100-2*o)*c:o>50&&(o+=2*(o-50)*c),r+it(a*(o/100),s)}set(t){st.enabled&&nt(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(t,e){if(!t||!e)return;const n=new Event(e);t.dispatchEvent(n)}(t.target,"touchend"===t.type?"change":"input"))}}const at=new WeakMap;function ot(t){at.has(t)||at.set(t,new st(t,{watch:!1,addCSS:!1,thumbWidth:8}))}function ut(t){t.matches&&t.matches("input[type=range]")&&ot(t),t.querySelectorAll&&t.querySelectorAll("input[type=range]").forEach(ot)}let ct=null;var ht;!function(t){let e;!function(t){t.vanilla_2k="vanilla_2k",t.vanilla_4k="vanilla_4k",t.bankswitch_2k_cv="bankswitch_2k_cv",t.bankswitch_8k_F8="bankswitch_8k_F8",t.bankswitch_8k_E0="bankswitch_8k_E0",t.bankswitch_8k_3F="bankswitch_8k_3F",t.bankswitch_8k_FE="bankswitch_8k_FE",t.bankswitch_8k_UA="bankswitch_8k_UA",t.bankswitch_8k_DPC="bankswitch_8k_DPC",t.bankswitch_8k_econobanking="bankswitch_8k_econobanking",t.bankswitch_8k_pp="bankswitch_8k_pp",t.bankswitch_12k_FA="bankswitch_12k_FA",t.bankswitch_16k_F6="bankswitch_16k_F6",t.bankswitch_16k_E7="bankswitch_16k_E7",t.bankswitch_FA2="bankswitch_FA2",t.bankswitch_32k_F4="bankswitch_32k_F4",t.bankswitch_64k_F0="bankswitch_64k_F0",t.bankswitch_64k_EF="bankswitch_64k_EF",t.bankswitch_3E="bankswitch_3E",t.bankswitch_supercharger="bankswitch_supercharger",t.bankswitch_dpc_plus="bankswitch_dpc_plus",t.bankswitch_cdf="bankswitch_cdf",t.unknown="unknown"}(e=t.CartridgeType||(t.CartridgeType={})),t.getAllTypes=function(){return[e.vanilla_2k,e.vanilla_4k,e.bankswitch_2k_cv,e.bankswitch_8k_F8,e.bankswitch_8k_E0,e.bankswitch_8k_3F,e.bankswitch_8k_FE,e.bankswitch_8k_UA,e.bankswitch_8k_econobanking,e.bankswitch_8k_pp,e.bankswitch_12k_FA,e.bankswitch_8k_DPC,e.bankswitch_16k_F6,e.bankswitch_16k_E7,e.bankswitch_FA2,e.bankswitch_32k_F4,e.bankswitch_3E,e.bankswitch_64k_F0,e.bankswitch_64k_EF,e.bankswitch_supercharger,e.bankswitch_dpc_plus,e.bankswitch_cdf,e.unknown]},t.describeCartridgeType=function(t){switch(t){case e.vanilla_2k:return"plain 2k";case e.vanilla_4k:return"plain 4k";case e.bankswitch_2k_cv:return"2k CommaVideo scheme";case e.bankswitch_8k_F8:return"bankswitched 8k, F8 (Atari) scheme";case e.bankswitch_8k_E0:return"bankswitched 8k, E0 (Parker Bros.) scheme";case e.bankswitch_8k_3F:return"bankswitched 8k, 3F (Tigervision) scheme";case e.bankswitch_8k_FE:return"bankswitched 8k, FE (Activision) scheme";case e.bankswitch_8k_UA:return"bankswitched 8k, UA (Pleiades) scheme";case e.bankswitch_8k_pp:return"bankswitched 8k, Pink Panther scheme";case e.bankswitch_12k_FA:return"bankswitched 12k, FA (CBS) scheme";case e.bankswitch_8k_DPC:return"bankswitched 8k + DPC";case e.bankswitch_8k_econobanking:return"bankswitched 8k, econobanking scheme";case e.bankswitch_16k_F6:return"bankswitched 16k, F6 (Atari) scheme";case e.bankswitch_16k_E7:return"bankswitched 16k, E7 (M-Network) scheme";case e.bankswitch_FA2:return"bankswitched 28k/29k, FA2 (modified CBS) scheme";case e.bankswitch_32k_F4:return"bankswitched 32k, F4 (Atari) scheme";case e.bankswitch_3E:return"bankswitched 3E (Tigervision + RAM) scheme";case e.bankswitch_64k_F0:return"bankswitched 64k, F0 (Megaboy) scheme";case e.bankswitch_64k_EF:return"bankswitched 64k, EFSC (Homestar Runner) scheme";case e.bankswitch_supercharger:return"bankswitched supercharger";case e.bankswitch_dpc_plus:return"bankswitched DPC+";case e.bankswitch_cdf:return"bankswitched CDF";case e.unknown:return"unknown"}}}(ht||(ht={}));var lt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"}));N(lt);lt.NAMED_TAG,lt.NAME_TAG,lt.UNMANAGED_TAG,lt.OPTIONAL_TAG,lt.INJECT_TAG,lt.MULTI_INJECT_TAG,lt.TAGGED,lt.TAGGED_PROP,lt.PARAM_TYPES,lt.DESIGN_PARAM_TYPES,lt.POST_CONSTRUCT;var ft=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}}));N(ft);ft.BindingScopeEnum,ft.BindingTypeEnum,ft.TargetTypeEnum;var dt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=0;e.id=function(){return n++}}));N(dt);dt.id;var pt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.id=dt.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=ft.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=n}));N(pt);pt.Binding;var _t=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"}));N(_t);_t.DUPLICATED_INJECTABLE_DECORATOR,_t.DUPLICATED_METADATA,_t.NULL_ARGUMENT,_t.KEY_NOT_FOUND,_t.AMBIGUOUS_MATCH,_t.CANNOT_UNBIND,_t.NOT_REGISTERED,_t.MISSING_INJECTABLE_ANNOTATION,_t.MISSING_INJECT_ANNOTATION,_t.UNDEFINED_INJECT_ANNOTATION,_t.CIRCULAR_DEPENDENCY,_t.NOT_IMPLEMENTED,_t.INVALID_BINDING_TYPE,_t.NO_MORE_SNAPSHOTS_AVAILABLE,_t.INVALID_MIDDLEWARE_RETURN,_t.INVALID_FUNCTION_BINDING,_t.INVALID_TO_SELF_VALUE,_t.INVALID_DECORATOR_OPERATION,_t.ARGUMENTS_LENGTH_MISMATCH,_t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT,_t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE,_t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE,_t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK,_t.MULTIPLE_POST_CONSTRUCT_METHODS,_t.POST_CONSTRUCT_ERROR,_t.CIRCULAR_DEPENDENCY_IN_FACTORY,_t.STACK_OVERFLOW;var gt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(lt.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(lt.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(lt.TAGGED_PROP,t)||[]},t}();e.MetadataReader=n}));N(gt);gt.MetadataReader;var bt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}}));N(bt);bt.BindingCount;var vt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===_t.STACK_OVERFLOW}}));N(vt);vt.isStackOverflowExeption;var mt=U((function(t,e){function n(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function r(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}Object.defineProperty(e,"__esModule",{value:!0}),e.getServiceIdentifierAsString=n,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var i="",s=n(t,e);return 0!==s.length&&(i="\nRegistered bindings:",s.forEach((function(t){var e="Object";null!==t.implementationType&&(e=r(t.implementationType)),i=i+"\n "+e,t.constraint.metaData&&(i=i+" - "+t.constraint.metaData)}))),i},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var r=function(t){return function t(e,r){void 0===r&&(r=[]);var i=n(e.serviceIdentifier);return r.push(i),null!==e.parentRequest?t(e.parentRequest,r):r}(t).reverse().join(" --\x3e ")}(e);throw new Error(_t.CIRCULAR_DEPENDENCY+" "+r)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=r}));N(mt);mt.getServiceIdentifierAsString,mt.listRegisteredBindingsForServiceIdentifier,mt.circularDependencyToException,mt.listMetadataForTarget,mt.getFunctionName;var yt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.id=dt.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=n}));N(yt);yt.Context;var wt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===lt.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=n}));N(wt);wt.Metadata;var At=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=n}));N(At);At.Plan;var kt=U((function(t,e){function n(t,e,n,r,i){var s={},a="number"==typeof i,o=void 0!==i&&a?i.toString():n;if(a&&void 0!==n)throw new Error(_t.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(s=Reflect.getMetadata(t,e));var u=s[o];if(Array.isArray(u))for(var c=0,h=u;c<h.length;c++){var l=h[c];if(l.key===r.key)throw new Error(_t.DUPLICATED_METADATA+" "+l.key.toString())}else u=[];u.push(r),s[o]=u,Reflect.defineMetadata(t,s,e)}function r(t,e){Reflect.decorate(t,e)}function i(t,e){return function(n,r){e(n,r,t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.tagParameter=function(t,e,r,i){n(lt.TAGGED,t,e,i,r)},e.tagProperty=function(t,e,r){n(lt.TAGGED_PROP,t.constructor,e,r)},e.decorate=function(t,e,n){"number"==typeof n?r([i(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):r([t],e)}}));N(kt);kt.tagParameter,kt.tagProperty,kt.decorate;var Ct=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=n,e.inject=function(t){return function(e,n,r){if(void 0===t)throw new Error(_t.UNDEFINED_INJECT_ANNOTATION(e.name));var i=new wt.Metadata(lt.INJECT_TAG,t);"number"==typeof r?kt.tagParameter(e,n,r,i):kt.tagProperty(e,n,i)}}}));N(Ct);Ct.LazyServiceIdentifer,Ct.inject;var St=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=n}));N(St);St.QueryableString;var Et=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,r){this.id=dt.id(),this.type=t,this.serviceIdentifier=n,this.name=new St.QueryableString(e||""),this.metadata=new Array;var i=null;"string"==typeof r?i=new wt.Metadata(lt.NAMED_TAG,r):r instanceof wt.Metadata&&(i=r),null!==i&&this.metadata.push(i)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(lt.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(lt.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(lt.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==lt.INJECT_TAG&&t.key!==lt.MULTI_INJECT_TAG&&t.key!==lt.NAME_TAG&&t.key!==lt.UNMANAGED_TAG&&t.key!==lt.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(lt.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===lt.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==lt.INJECT_TAG&&t.key!==lt.MULTI_INJECT_TAG&&t.key!==lt.NAME_TAG&&t.key!==lt.UNMANAGED_TAG&&t.key!==lt.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(lt.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var s=i[r];if(s.key===t&&s.value===n)return!0}return!1}},t}();e.Target=n}));N(Et);Et.Target;var xt=U((function(t,e){function n(t,e,n,s){var a=t.getConstructorMetadata(n),o=a.compilerGeneratedMetadata;if(void 0===o){var u=_t.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(u)}var c=a.userGeneratedMetadata,h=Object.keys(c),l=function(t,e,n,i,s){for(var a=[],o=0;o<s;o++){var u=r(o,t,e,n,i);null!==u&&a.push(u)}return a}(s,e,o,c,0===n.length&&h.length>0?h.length:n.length),f=function t(e,n){for(var r=e.getPropertiesMetadata(n),s=[],a=Object.keys(r),o=0,u=a;o<u.length;o++){var c=u[o],h=r[c],l=i(r[c]),f=l.targetName||c,d=l.inject||l.multiInject,p=new Et.Target(ft.TargetTypeEnum.ClassProperty,f,d);p.metadata=h,s.push(p)}var _=Object.getPrototypeOf(n.prototype).constructor;if(_!==Object){var g=t(e,_);s=s.concat(g)}return s}(t,n);return l.concat(f)}function r(t,e,n,r,s){var a=s[t.toString()]||[],o=i(a),u=!0!==o.unmanaged,c=r[t],h=o.inject||o.multiInject;if((c=h||c)instanceof Ct.LazyServiceIdentifer&&(c=c.unwrap()),u){if(!e&&(c===Object||c===Function||void 0===c)){var l=_t.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(l)}var f=new Et.Target(ft.TargetTypeEnum.ConstructorArgument,o.targetName,c);return f.metadata=a,f}return null}function i(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[lt.INJECT_TAG],multiInject:e[lt.MULTI_INJECT_TAG],targetName:e[lt.NAME_TAG],unmanaged:e[lt.UNMANAGED_TAG]}}Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=mt.getFunctionName,e.getDependencies=function(t,e){return n(t,mt.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,r){var i=Object.getPrototypeOf(r.prototype).constructor;if(i!==Object){var s=n(e,mt.getFunctionName(i),i,!0),a=s.map((function(t){return t.metadata.filter((function(t){return t.key===lt.UNMANAGED_TAG}))})),o=[].concat.apply([],a).length,u=s.length-o;return u>0?u:t(e,i)}return 0}}));N(xt);xt.getFunctionName,xt.getDependencies,xt.getBaseClassDependencyCount;var Tt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,r,i){this.id=dt.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();e.Request=n}));N(Tt);Tt.Request;var It=U((function(t,e){function n(t){return t._bindingDictionary}function r(t,e,n,r,i,s){var a=t?lt.MULTI_INJECT_TAG:lt.INJECT_TAG,o=new wt.Metadata(a,n),u=new Et.Target(e,r,n,o);if(void 0!==i){var c=new wt.Metadata(i,s);u.metadata.push(c)}return u}function i(t,e,n,r,i){var a=s(n.container,i.serviceIdentifier),o=[];return a.length===bt.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),a=s(n.container,i.serviceIdentifier)),o=e?a:a.filter((function(t){var e=new Tt.Request(t.serviceIdentifier,n,r,t,i);return t.constraint(e)})),function(t,e,n,r){switch(e.length){case bt.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var i=mt.getServiceIdentifierAsString(t),a=_t.NOT_REGISTERED;throw a+=mt.listMetadataForTarget(i,n),a+=mt.listRegisteredBindingsForServiceIdentifier(r,i,s),new Error(a);case bt.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case bt.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;i=mt.getServiceIdentifierAsString(t),a=_t.AMBIGUOUS_MATCH+" "+i;throw a+=mt.listRegisteredBindingsForServiceIdentifier(r,i,s),new Error(a)}}(i.serviceIdentifier,o,i,n.container),o}function s(t,e){var r=[],i=n(t);return i.hasKey(e)?r=i.get(e):null!==t.parent&&(r=s(t.parent,e)),r}Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=n,e.plan=function(t,e,n,s,a,o,u,c){void 0===c&&(c=!1);var h=new yt.Context(e),l=r(n,s,a,"",o,u);try{return function t(e,n,r,s,a,o){var u,c;if(null===a){u=i(e,n,s,null,o),c=new Tt.Request(r,s,null,u,o);var h=new At.Plan(s,c);s.addPlan(h)}else u=i(e,n,s,a,o),c=a.addChildRequest(o.serviceIdentifier,u,o);u.forEach((function(n){var r=null;if(o.isArray())r=c.addChildRequest(n.serviceIdentifier,n,o);else{if(n.cache)return;r=c}if(n.type===ft.BindingTypeEnum.Instance&&null!==n.implementationType){var i=xt.getDependencies(e,n.implementationType);if(!s.container.options.skipBaseClassChecks){var a=xt.getBaseClassDependencyCount(e,n.implementationType);if(i.length<a){var u=_t.ARGUMENTS_LENGTH_MISMATCH(xt.getFunctionName(n.implementationType));throw new Error(u)}}i.forEach((function(n){t(e,!1,n.serviceIdentifier,s,r,n)}))}}))}(t,c,a,h,null,l),h}catch(t){throw vt.isStackOverflowExeption(t)&&h.plan&&mt.circularDependencyToException(h.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){var i=new Et.Target(ft.TargetTypeEnum.Variable,"",e,new wt.Metadata(n,r)),s=new yt.Context(t);return new Tt.Request(e,s,null,[],i)}}));N(It);It.getBindingDictionary,It.plan,It.createMockRequest;var Bt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=function(t,e,n){var r,i,s=null;if(e.length>0){var a=e.filter((function(t){return null!==t.target&&t.target.type===ft.TargetTypeEnum.ConstructorArgument})).map(n);i=a,s=function(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===ft.TargetTypeEnum.ClassProperty})),i=r.map(n);return r.forEach((function(e,n){var r;r=e.target.name.value();var s=i[n];t[r]=s})),t}(s=new((r=t).bind.apply(r,[void 0].concat(i))),e,n)}else s=new t;return function(t,e){if(Reflect.hasMetadata(lt.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(lt.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(_t.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,s),s}}));N(Bt);Bt.resolveInstance;var Ot=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){try{return n()}catch(n){throw vt.isStackOverflowExeption(n)?new Error(_t.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},r=function(t){return function(e){e.parentContext.setCurrentRequest(e);var i=e.bindings,s=e.childRequests,a=e.target&&e.target.isArray(),o=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(a&&o)return s.map((function(e){return r(t)(e)}));var u=null;if(!e.target.isOptional()||0!==i.length){var c=i[0],h=c.scope===ft.BindingScopeEnum.Singleton,l=c.scope===ft.BindingScopeEnum.Request;if(h&&c.activated)return c.cache;if(l&&null!==t&&t.has(c.id))return t.get(c.id);if(c.type===ft.BindingTypeEnum.ConstantValue)u=c.cache;else if(c.type===ft.BindingTypeEnum.Function)u=c.cache;else if(c.type===ft.BindingTypeEnum.Constructor)u=c.implementationType;else if(c.type===ft.BindingTypeEnum.DynamicValue&&null!==c.dynamicValue)u=n("toDynamicValue",c.serviceIdentifier,(function(){return c.dynamicValue(e.parentContext)}));else if(c.type===ft.BindingTypeEnum.Factory&&null!==c.factory)u=n("toFactory",c.serviceIdentifier,(function(){return c.factory(e.parentContext)}));else if(c.type===ft.BindingTypeEnum.Provider&&null!==c.provider)u=n("toProvider",c.serviceIdentifier,(function(){return c.provider(e.parentContext)}));else{if(c.type!==ft.BindingTypeEnum.Instance||null===c.implementationType){var f=mt.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(_t.INVALID_BINDING_TYPE+" "+f)}u=Bt.resolveInstance(c.implementationType,s,r(t))}return"function"==typeof c.onActivation&&(u=c.onActivation(e.parentContext,u)),h&&(c.cache=u,c.activated=!0),l&&null!==t&&!t.has(c.id)&&t.set(c.id,u),u}}};e.resolve=function(t){return r(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}}));N(Ot);Ot.resolve;var Rt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){var r=t.parentRequest;return null!==r&&(!!e(r)||n(r,e))};e.traverseAncerstors=n;var r=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new wt.Metadata(t,e),n}};e.taggedConstraint=r;var i=r(lt.NAMED_TAG);e.namedConstraint=i;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}}}));N(Rt);Rt.traverseAncerstors,Rt.taggedConstraint,Rt.namedConstraint,Rt.typeConstraint;var Pt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new Dt.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=Rt.namedConstraint(t),new Dt.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=Rt.taggedConstraint(t)(e),new Dt.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return Rt.typeConstraint(t)(e.parentRequest)},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return Rt.namedConstraint(t)(e.parentRequest)},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return Rt.taggedConstraint(t)(e)(n.parentRequest)},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return Rt.traverseAncerstors(e,Rt.typeConstraint(t))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!Rt.traverseAncerstors(e,Rt.typeConstraint(t))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return Rt.traverseAncerstors(e,Rt.namedConstraint(t))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!Rt.traverseAncerstors(e,Rt.namedConstraint(t))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return Rt.traverseAncerstors(n,Rt.taggedConstraint(t)(e))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!Rt.traverseAncerstors(n,Rt.taggedConstraint(t)(e))},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return Rt.traverseAncerstors(e,t)},new Dt.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!Rt.traverseAncerstors(e,t)},new Dt.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=n}));N(Pt);Pt.BindingWhenSyntax;var Dt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new Pt.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=n}));N(Dt);Dt.BindingOnSyntax;var Mt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new Pt.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new Dt.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=n}));N(Mt);Mt.BindingWhenOnSyntax;var Ft=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=ft.BindingScopeEnum.Request,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=ft.BindingScopeEnum.Singleton,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=ft.BindingScopeEnum.Transient,new Mt.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=n}));N(Ft);Ft.BindingInSyntax;var jt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new Pt.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new Dt.BindingOnSyntax(this._binding),this._bindingInSyntax=new Ft.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=n}));N(jt);jt.BindingInWhenOnSyntax;var Lt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=ft.BindingTypeEnum.Instance,this._binding.implementationType=t,new jt.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+_t.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=ft.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=ft.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new jt.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=ft.BindingTypeEnum.Constructor,this._binding.implementationType=t,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=ft.BindingTypeEnum.Factory,this._binding.factory=t,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(_t.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=ft.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=ft.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=ft.BindingTypeEnum.Provider,this._binding.provider=t,new Mt.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=n}));N(Lt);Lt.BindingToSyntax;var Nt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=n}));N(Nt);Nt.ContainerSnapshot;var Ut=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(_t.NULL_ARGUMENT);if(null==e)throw new Error(_t.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(_t.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(_t.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(_t.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(_t.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var i=n.filter((function(e){return!t(e)}));i.length>0?e._map.set(r,i):e._map.delete(r)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(_t.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=n}));N(Ut);Ut.Lookup;var zt=U((function(t,e){var n=L&&L.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function a(t){try{u(r.next(t))}catch(t){s(t)}}function o(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,o)}u((r=r.apply(t,e||[])).next())}))},r=L&&L.__generator||function(t,e){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[0,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error(""+_t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=ft.BindingScopeEnum.Transient;else if(e.defaultScope!==ft.BindingScopeEnum.Singleton&&e.defaultScope!==ft.BindingScopeEnum.Transient&&e.defaultScope!==ft.BindingScopeEnum.Request)throw new Error(""+_t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+_t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+_t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=dt.id(),this._bindingDictionary=new Ut.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new gt.MetadataReader}return t.merge=function(e,n){var r=new t,i=It.getBindingDictionary(r),s=It.getBindingDictionary(e),a=It.getBindingDictionary(n);function o(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return o(s,i),o(a,i),r},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var s=i[r],a=n(s.id);s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(this,void 0,void 0,(function(){var e,n,i,s,a;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,i=t,r.label=1;case 1:return n<i.length?(s=i[n],a=e(s.id),[4,s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||ft.BindingScopeEnum.Transient,n=new pt.Binding(t,e);return this._bindingDictionary.add(t,n),new Lt.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(_t.CANNOT_UNBIND+" "+mt.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new Ut.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,lt.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),s=It.createMockRequest(this,t,e,n);r=i.some((function(t){return t.constraint(s)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(Nt.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(_t.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,ft.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,ft.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,lt.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,ft.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,ft.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,lt.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var i=t.rebind.bind(t)(r);return e(i,n),i}};return function(r){return{bindFunction:(i=r,function(n){var r=t.bind.bind(t)(n);return e(r,i),r}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(r),unbindFunction:function(e){t.unbind.bind(t)(e)}};var i}},t.prototype._get=function(t,e,n,r,i,s){var a=null,o={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:s};if(this._middleware){if(null==(a=this._middleware(o)))throw new Error(_t.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(o);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=It.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),Ot.resolve(n)}},t}();e.Container=i}));N(zt);zt.Container;var $t=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){this.id=dt.id(),this.registry=t};e.ContainerModule=n;var r=function(t){this.id=dt.id(),this.registry=t};e.AsyncContainerModule=r}));N($t);$t.ContainerModule,$t.AsyncContainerModule;var Ht=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(lt.PARAM_TYPES,t))throw new Error(_t.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(lt.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(lt.PARAM_TYPES,e,t),t}}}));N(Ht);Ht.injectable;var Wt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=function(t,e){return function(n,r,i){var s=new wt.Metadata(t,e);"number"==typeof i?kt.tagParameter(n,r,i,s):kt.tagProperty(n,r,s)}}}));N(Wt);Wt.tagged;var Vt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.named=function(t){return function(e,n,r){var i=new wt.Metadata(lt.NAMED_TAG,t);"number"==typeof r?kt.tagParameter(e,n,r,i):kt.tagProperty(e,n,i)}}}));N(Vt);Vt.named;var qt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.optional=function(){return function(t,e,n){var r=new wt.Metadata(lt.OPTIONAL_TAG,!0);"number"==typeof n?kt.tagParameter(t,e,n,r):kt.tagProperty(t,e,r)}}}));N(qt);qt.optional;var Gt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=function(){return function(t,e,n){var r=new wt.Metadata(lt.UNMANAGED_TAG,!0);kt.tagParameter(t,e,n,r)}}}));N(Gt);Gt.unmanaged;var Qt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=function(t){return function(e,n,r){var i=new wt.Metadata(lt.MULTI_INJECT_TAG,t);"number"==typeof r?kt.tagParameter(e,n,r,i):kt.tagProperty(e,n,i)}}}));N(Qt);Qt.multiInject;var Jt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=function(t){return function(e,n,r){var i=new wt.Metadata(lt.NAME_TAG,t);kt.tagParameter(e,n,r,i)}}}));N(Jt);Jt.targetName;var Kt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=function(){return function(t,e,n){var r=new wt.Metadata(lt.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(lt.POST_CONSTRUCT,t.constructor))throw new Error(_t.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(lt.POST_CONSTRUCT,r,t.constructor)}}}));N(Kt);Kt.postConstruct;var Yt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}}));N(Yt);Yt.multiBindToService;var Zt=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.METADATA_KEY=lt,e.Container=zt.Container,e.BindingScopeEnum=ft.BindingScopeEnum,e.BindingTypeEnum=ft.BindingTypeEnum,e.TargetTypeEnum=ft.TargetTypeEnum,e.AsyncContainerModule=$t.AsyncContainerModule,e.ContainerModule=$t.ContainerModule,e.injectable=Ht.injectable,e.tagged=Wt.tagged,e.named=Vt.named,e.inject=Ct.inject,e.LazyServiceIdentifer=Ct.LazyServiceIdentifer,e.optional=qt.optional,e.unmanaged=Gt.unmanaged,e.multiInject=Qt.multiInject,e.targetName=Jt.targetName,e.postConstruct=Kt.postConstruct,e.MetadataReader=gt.MetadataReader,e.id=dt.id,e.decorate=kt.decorate,e.traverseAncerstors=Rt.traverseAncerstors,e.taggedConstraint=Rt.taggedConstraint,e.namedConstraint=Rt.namedConstraint,e.typeConstraint=Rt.typeConstraint,e.getServiceIdentifierAsString=mt.getServiceIdentifierAsString,e.multiBindToService=Yt.multiBindToService}));N(Zt);Zt.METADATA_KEY;var Xt=Zt.Container,te=(Zt.BindingScopeEnum,Zt.BindingTypeEnum,Zt.TargetTypeEnum,Zt.AsyncContainerModule,Zt.ContainerModule,Zt.injectable),ee=(Zt.tagged,Zt.named,Zt.inject);Zt.LazyServiceIdentifer,Zt.optional,Zt.unmanaged,Zt.multiInject,Zt.targetName,Zt.postConstruct,Zt.MetadataReader,Zt.id,Zt.decorate,Zt.traverseAncerstors,Zt.taggedConstraint,Zt.namedConstraint,Zt.typeConstraint,Zt.getServiceIdentifierAsString,Zt.multiBindToService;let ne=class{constructor(){this._watchMedia=t=>{this._queries.forEach(t=>{t.removeEventListener?t.removeEventListener("change",this._updateQueries):t.removeListener(this._updateQueries)}),this._queries=t.map(t=>matchMedia(t)),this._queries.forEach(t=>{t.removeEventListener?t.addEventListener("change",this._updateQueries):t.addListener(this._updateQueries)}),this._updateQueries()},this._updateQueries=()=>this._ports.onMediaUpdate_.send(this._queries.map(t=>t.matches)),this._queries=[]}init(t){this._ports=t,t.watchMedia_.subscribe(this._watchMedia)}};ne=r([te()],ne);var re=ne;let ie=class{constructor(){this._scrollIntoView=([t,e])=>{const n=document.getElementById(e);n?n.scrollIntoView({block:t}):new se(t,e).start()}}init(t){t.scrollIntoView_.subscribe(this._scrollIntoView)}};ie=r([te()],ie);class se{constructor(t,e,n=500){this._position=t,this._id=e,this._timeout=n,this._onMutation=t=>{if(!t.some(t=>t.addedNodes))return;const e=document.getElementById(this._id);e&&(this._observer.disconnect(),clearTimeout(this._timeoutHandle),e.scrollIntoView({block:this._position}))},this._observer=new MutationObserver(this._onMutation),this._timeoutHandle=null}start(){setTimeout(()=>this._observer.disconnect(),this._timeout),this._observer.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0})}}var ae=ie,oe=[],ue=[],ce="undefined"!=typeof Uint8Array?Uint8Array:Array,he=!1;function le(){he=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)oe[e]=t[e],ue[t.charCodeAt(e)]=e;ue["-".charCodeAt(0)]=62,ue["_".charCodeAt(0)]=63}function fe(t,e,n){for(var r,i,s=[],a=e;a<n;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],s.push(oe[(i=r)>>18&63]+oe[i>>12&63]+oe[i>>6&63]+oe[63&i]);return s.join("")}function de(t){var e;he||le();for(var n=t.length,r=n%3,i="",s=[],a=0,o=n-r;a<o;a+=16383)s.push(fe(t,a,a+16383>o?o:a+16383));return 1===r?(e=t[n-1],i+=oe[e>>2],i+=oe[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=oe[e>>10],i+=oe[e>>4&63],i+=oe[e<<2&63],i+="="),s.push(i),s.join("")}function pe(t,e,n,r,i){var s,a,o=8*i-r-1,u=(1<<o)-1,c=u>>1,h=-7,l=n?i-1:0,f=n?-1:1,d=t[e+l];for(l+=f,s=d&(1<<-h)-1,d>>=-h,h+=o;h>0;s=256*s+t[e+l],l+=f,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=r;h>0;a=256*a+t[e+l],l+=f,h-=8);if(0===s)s=1-c;else{if(s===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),s-=c}return(d?-1:1)*a*Math.pow(2,s-r)}function _e(t,e,n,r,i,s){var a,o,u,c=8*s-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=h?(o=0,a=h):a+l>=1?(o=(e*u-1)*Math.pow(2,i),a+=l):(o=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&o,d+=p,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*_}var ge={}.toString,be=Array.isArray||function(t){return"[object Array]"==ge.call(t)};function ve(){return ye.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function me(t,e){if(ve()<e)throw new RangeError("Invalid typed array length");return ye.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ye.prototype:(null===t&&(t=new ye(e)),t.length=e),t}function ye(t,e,n){if(!(ye.TYPED_ARRAY_SUPPORT||this instanceof ye))return new ye(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return ke(this,t)}return we(this,t,e,n)}function we(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);ye.TYPED_ARRAY_SUPPORT?(t=e).__proto__=ye.prototype:t=Ce(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!ye.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|xe(e,n),i=(t=me(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(Ee(e)){var n=0|Se(e.length);return 0===(t=me(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?me(t,0):Ce(t,e);if("Buffer"===e.type&&be(e.data))return Ce(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function Ae(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function ke(t,e){if(Ae(e),t=me(t,e<0?0:0|Se(e)),!ye.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function Ce(t,e){var n=e.length<0?0:0|Se(e.length);t=me(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function Se(t){if(t>=ve())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ve().toString(16)+" bytes");return 0|t}function Ee(t){return!(null==t||!t._isBuffer)}function xe(t,e){if(Ee(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Xe(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return tn(t).length;default:if(r)return Xe(t).length;e=(""+e).toLowerCase(),r=!0}}function Te(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return $e(this,e,n);case"utf8":case"utf-8":return Ne(this,e,n);case"ascii":return Ue(this,e,n);case"latin1":case"binary":return ze(this,e,n);case"base64":return Le(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return He(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Ie(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Be(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=ye.from(e,r)),Ee(e))return 0===e.length?-1:Oe(t,e,n,r,i);if("number"==typeof e)return e&=255,ye.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):Oe(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Oe(t,e,n,r,i){var s,a=1,o=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,o/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var h=-1;for(s=n;s<o;s++)if(c(t,s)===c(e,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===u)return h*a}else-1!==h&&(s-=s-h),h=-1}else for(n+u>o&&(n=o-u),s=n;s>=0;s--){for(var l=!0,f=0;f<u;f++)if(c(t,s+f)!==c(e,f)){l=!1;break}if(l)return s}return-1}function Re(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var a=0;a<r;++a){var o=parseInt(e.substr(2*a,2),16);if(isNaN(o))return a;t[n+a]=o}return a}function Pe(t,e,n,r){return en(Xe(e,t.length-n),t,n,r)}function De(t,e,n,r){return en(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function Me(t,e,n,r){return De(t,e,n,r)}function Fe(t,e,n,r){return en(tn(e),t,n,r)}function je(t,e,n,r){return en(function(t,e){for(var n,r,i,s=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(e,t.length-n),t,n,r)}function Le(t,e,n){return 0===e&&n===t.length?de(t):de(t.slice(e,n))}function Ne(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,a,o,u,c=t[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(h=c);break;case 2:128==(192&(s=t[i+1]))&&(u=(31&c)<<6|63&s)>127&&(h=u);break;case 3:s=t[i+1],a=t[i+2],128==(192&s)&&128==(192&a)&&(u=(15&c)<<12|(63&s)<<6|63&a)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:s=t[i+1],a=t[i+2],o=t[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(u=(15&c)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}ye.TYPED_ARRAY_SUPPORT=void 0===l.TYPED_ARRAY_SUPPORT||l.TYPED_ARRAY_SUPPORT,ye.poolSize=8192,ye._augment=function(t){return t.__proto__=ye.prototype,t},ye.from=function(t,e,n){return we(null,t,e,n)},ye.TYPED_ARRAY_SUPPORT&&(ye.prototype.__proto__=Uint8Array.prototype,ye.__proto__=Uint8Array),ye.alloc=function(t,e,n){return function(t,e,n,r){return Ae(e),e<=0?me(t,e):void 0!==n?"string"==typeof r?me(t,e).fill(n,r):me(t,e).fill(n):me(t,e)}(null,t,e,n)},ye.allocUnsafe=function(t){return ke(null,t)},ye.allocUnsafeSlow=function(t){return ke(null,t)},ye.isBuffer=nn,ye.compare=function(t,e){if(!Ee(t)||!Ee(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},ye.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ye.concat=function(t,e){if(!be(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ye.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=ye.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!Ee(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},ye.byteLength=xe,ye.prototype._isBuffer=!0,ye.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ie(this,e,e+1);return this},ye.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ie(this,e,e+3),Ie(this,e+1,e+2);return this},ye.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ie(this,e,e+7),Ie(this,e+1,e+6),Ie(this,e+2,e+5),Ie(this,e+3,e+4);return this},ye.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Ne(this,0,t):Te.apply(this,arguments)},ye.prototype.equals=function(t){if(!Ee(t))throw new TypeError("Argument must be a Buffer");return this===t||0===ye.compare(this,t)},ye.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ye.prototype.compare=function(t,e,n,r,i){if(!Ee(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),o=Math.min(s,a),u=this.slice(r,i),c=t.slice(e,n),h=0;h<o;++h)if(u[h]!==c[h]){s=u[h],a=c[h];break}return s<a?-1:a<s?1:0},ye.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},ye.prototype.indexOf=function(t,e,n){return Be(this,t,e,n,!0)},ye.prototype.lastIndexOf=function(t,e,n){return Be(this,t,e,n,!1)},ye.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return Re(this,t,e,n);case"utf8":case"utf-8":return Pe(this,t,e,n);case"ascii":return De(this,t,e,n);case"latin1":case"binary":return Me(this,t,e,n);case"base64":return Fe(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return je(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},ye.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ue(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function ze(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function $e(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=e;s<n;++s)i+=Ze(t[s]);return i}function He(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function We(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Ve(t,e,n,r,i,s){if(!Ee(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function qe(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Ge(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function Qe(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Je(t,e,n,r,i){return i||Qe(t,0,n,4),_e(t,e,n,r,23,4),n+4}function Ke(t,e,n,r,i){return i||Qe(t,0,n,8),_e(t,e,n,r,52,8),n+8}ye.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),ye.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=ye.prototype;else{var i=e-t;n=new ye(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},ye.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||We(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},ye.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||We(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},ye.prototype.readUInt8=function(t,e){return e||We(t,1,this.length),this[t]},ye.prototype.readUInt16LE=function(t,e){return e||We(t,2,this.length),this[t]|this[t+1]<<8},ye.prototype.readUInt16BE=function(t,e){return e||We(t,2,this.length),this[t]<<8|this[t+1]},ye.prototype.readUInt32LE=function(t,e){return e||We(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ye.prototype.readUInt32BE=function(t,e){return e||We(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ye.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||We(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},ye.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||We(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},ye.prototype.readInt8=function(t,e){return e||We(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ye.prototype.readInt16LE=function(t,e){e||We(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},ye.prototype.readInt16BE=function(t,e){e||We(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},ye.prototype.readInt32LE=function(t,e){return e||We(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ye.prototype.readInt32BE=function(t,e){return e||We(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ye.prototype.readFloatLE=function(t,e){return e||We(t,4,this.length),pe(this,t,!0,23,4)},ye.prototype.readFloatBE=function(t,e){return e||We(t,4,this.length),pe(this,t,!1,23,4)},ye.prototype.readDoubleLE=function(t,e){return e||We(t,8,this.length),pe(this,t,!0,52,8)},ye.prototype.readDoubleBE=function(t,e){return e||We(t,8,this.length),pe(this,t,!1,52,8)},ye.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||Ve(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},ye.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||Ve(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},ye.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,1,255,0),ye.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ye.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,2,65535,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):qe(this,t,e,!0),e+2},ye.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,2,65535,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):qe(this,t,e,!1),e+2},ye.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,4,4294967295,0),ye.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Ge(this,t,e,!0),e+4},ye.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,4,4294967295,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Ge(this,t,e,!1),e+4},ye.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Ve(this,t,e,n,i-1,-i)}var s=0,a=1,o=0;for(this[e]=255&t;++s<n&&(a*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+n},ye.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Ve(this,t,e,n,i-1,-i)}var s=n-1,a=1,o=0;for(this[e+s]=255&t;--s>=0&&(a*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+n},ye.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,1,127,-128),ye.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ye.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,2,32767,-32768),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):qe(this,t,e,!0),e+2},ye.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,2,32767,-32768),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):qe(this,t,e,!1),e+2},ye.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,4,2147483647,-2147483648),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Ge(this,t,e,!0),e+4},ye.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Ve(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Ge(this,t,e,!1),e+4},ye.prototype.writeFloatLE=function(t,e,n){return Je(this,t,e,!0,n)},ye.prototype.writeFloatBE=function(t,e,n){return Je(this,t,e,!1,n)},ye.prototype.writeDoubleLE=function(t,e,n){return Ke(this,t,e,!0,n)},ye.prototype.writeDoubleBE=function(t,e,n){return Ke(this,t,e,!1,n)},ye.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!ye.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},ye.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!ye.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=Ee(t)?t:Xe(new ye(t,r).toString()),o=a.length;for(s=0;s<n-e;++s)this[s+e]=a[s%o]}return this};var Ye=/[^+\/0-9A-Za-z-_]/g;function Ze(t){return t<16?"0"+t.toString(16):t.toString(16)}function Xe(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function tn(t){return function(t){var e,n,r,i,s,a;he||le();var o=t.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===t[o-2]?2:"="===t[o-1]?1:0,a=new ce(3*o/4-s),r=s>0?o-4:o;var u=0;for(e=0,n=0;e<r;e+=4,n+=3)i=ue[t.charCodeAt(e)]<<18|ue[t.charCodeAt(e+1)]<<12|ue[t.charCodeAt(e+2)]<<6|ue[t.charCodeAt(e+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===s?(i=ue[t.charCodeAt(e)]<<2|ue[t.charCodeAt(e+1)]>>4,a[u++]=255&i):1===s&&(i=ue[t.charCodeAt(e)]<<10|ue[t.charCodeAt(e+1)]<<4|ue[t.charCodeAt(e+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Ye,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function en(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function nn(t){return null!=t&&(!!t._isBuffer||rn(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&rn(t.slice(0,0))}(t))}function rn(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function sn(){}function an(){an.init.call(this)}function on(t){return void 0===t._maxListeners?an.defaultMaxListeners:t._maxListeners}function un(t,e,n){if(e)t.call(n);else for(var r=t.length,i=gn(t,r),s=0;s<r;++s)i[s].call(n)}function cn(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,s=gn(t,i),a=0;a<i;++a)s[a].call(n,r)}function hn(t,e,n,r,i){if(e)t.call(n,r,i);else for(var s=t.length,a=gn(t,s),o=0;o<s;++o)a[o].call(n,r,i)}function ln(t,e,n,r,i,s){if(e)t.call(n,r,i,s);else for(var a=t.length,o=gn(t,a),u=0;u<a;++u)o[u].call(n,r,i,s)}function fn(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,s=gn(t,i),a=0;a<i;++a)s[a].apply(n,r)}function dn(t,e,n,r){var i,s,a,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]):(s=t._events=new sn,t._eventsCount=0),a){if("function"==typeof a?a=s[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=on(t))&&i>0&&a.length>i){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,o=u,"function"==typeof console.warn?console.warn(o):console.log(o)}}else a=s[e]=n,++t._eventsCount;return t}function pn(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function _n(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function gn(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}sn.prototype=Object.create(null),an.EventEmitter=an,an.usingDomains=!1,an.prototype.domain=void 0,an.prototype._events=void 0,an.prototype._maxListeners=void 0,an.defaultMaxListeners=10,an.init=function(){this.domain=null,an.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new sn,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},an.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},an.prototype.getMaxListeners=function(){return on(this)},an.prototype.emit=function(t){var e,n,r,i,s,a,o,u="error"===t;if(a=this._events)u=u&&null==a.error;else if(!u)return!1;if(o=this.domain,u){if(e=arguments[1],!o){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=o,e.domainThrown=!1,o.emit("error",e),!1}if(!(n=a[t]))return!1;var h="function"==typeof n;switch(r=arguments.length){case 1:un(n,h,this);break;case 2:cn(n,h,this,arguments[1]);break;case 3:hn(n,h,this,arguments[1],arguments[2]);break;case 4:ln(n,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];fn(n,h,this,i)}return!0},an.prototype.addListener=function(t,e){return dn(this,t,e,!1)},an.prototype.on=an.prototype.addListener,an.prototype.prependListener=function(t,e){return dn(this,t,e,!0)},an.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,pn(this,t,e)),this},an.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,pn(this,t,e)),this},an.prototype.removeListener=function(t,e){var n,r,i,s,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new sn:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,s=n.length;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){a=n[s].listener,i=s;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new sn,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i);r.removeListener&&this.emit("removeListener",t,a||e)}return this},an.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new sn,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new sn:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),s=0;s<i.length;++s)"removeListener"!==(r=i[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new sn,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},an.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},an.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):_n.call(t,e)},an.prototype.listenerCount=_n,an.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var bn="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},vn=/%[sdj%]/g;function mn(t){if(!On(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(kn(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(vn,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),a=r[n];n<i;a=r[++n])Bn(a)||!Dn(a)?s+=" "+a:s+=" "+kn(a);return s}function yn(t,e){if(Rn(l.process))return function(){return yn(t,e).apply(this,arguments)};if(!0===j.noDeprecation)return t;var n=!1;return function(){if(!n){if(j.throwDeprecation)throw new Error(e);j.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var wn,An={};function kn(t,e){var n={seen:[],stylize:Sn};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),In(e)?n.showHidden=e:e&&Nn(n,e),Rn(n.showHidden)&&(n.showHidden=!1),Rn(n.depth)&&(n.depth=2),Rn(n.colors)&&(n.colors=!1),Rn(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Cn),En(n,t,n.depth)}function Cn(t,e){var n=kn.styles[e];return n?"["+kn.colors[n][0]+"m"+t+"["+kn.colors[n][1]+"m":t}function Sn(t,e){return t}function En(t,e,n){if(t.customInspect&&e&&jn(e.inspect)&&e.inspect!==kn&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return On(r)||(r=En(t,r,n)),r}var i=function(t,e){if(Rn(e))return t.stylize("undefined","undefined");if(On(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(r=e,"number"==typeof r)return t.stylize(""+e,"number");var r;if(In(e))return t.stylize(""+e,"boolean");if(Bn(e))return t.stylize("null","null")}(t,e);if(i)return i;var s=Object.keys(e),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),Fn(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return xn(e);if(0===s.length){if(jn(e)){var o=e.name?": "+e.name:"";return t.stylize("[Function"+o+"]","special")}if(Pn(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Mn(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Fn(e))return xn(e)}var u,c,h="",l=!1,f=["{","}"];(u=e,Array.isArray(u)&&(l=!0,f=["[","]"]),jn(e))&&(h=" [Function"+(e.name?": "+e.name:"")+"]");return Pn(e)&&(h=" "+RegExp.prototype.toString.call(e)),Mn(e)&&(h=" "+Date.prototype.toUTCString.call(e)),Fn(e)&&(h=" "+xn(e)),0!==s.length||l&&0!=e.length?n<0?Pn(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=l?function(t,e,n,r,i){for(var s=[],a=0,o=e.length;a<o;++a)Un(e,String(a))?s.push(Tn(t,e,n,r,String(a),!0)):s.push("");return i.forEach((function(i){i.match(/^\d+$/)||s.push(Tn(t,e,n,r,i,!0))})),s}(t,e,n,a,s):s.map((function(r){return Tn(t,e,n,a,r,l)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,h,f)):f[0]+h+f[1]}function xn(t){return"["+Error.prototype.toString.call(t)+"]"}function Tn(t,e,n,r,i,s){var a,o,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?o=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(o=t.stylize("[Setter]","special")),Un(r,i)||(a="["+i+"]"),o||(t.seen.indexOf(u.value)<0?(o=Bn(n)?En(t,u.value,null):En(t,u.value,n-1)).indexOf("\n")>-1&&(o=s?o.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+o.split("\n").map((function(t){return"   "+t})).join("\n")):o=t.stylize("[Circular]","special")),Rn(a)){if(s&&i.match(/^\d+$/))return o;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+o}function In(t){return"boolean"==typeof t}function Bn(t){return null===t}function On(t){return"string"==typeof t}function Rn(t){return void 0===t}function Pn(t){return Dn(t)&&"[object RegExp]"===Ln(t)}function Dn(t){return"object"==typeof t&&null!==t}function Mn(t){return Dn(t)&&"[object Date]"===Ln(t)}function Fn(t){return Dn(t)&&("[object Error]"===Ln(t)||t instanceof Error)}function jn(t){return"function"==typeof t}function Ln(t){return Object.prototype.toString.call(t)}function Nn(t,e){if(!e||!Dn(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function Un(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zn(){this.head=null,this.tail=null,this.length=0}kn.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},kn.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},zn.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},zn.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},zn.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},zn.prototype.clear=function(){this.head=this.tail=null,this.length=0},zn.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},zn.prototype.concat=function(t){if(0===this.length)return ye.alloc(0);if(1===this.length)return this.head.data;for(var e=ye.allocUnsafe(t>>>0),n=this.head,r=0;n;)n.data.copy(e,r),r+=n.data.length,n=n.next;return e};var $n=ye.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Hn(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!$n(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Vn;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=qn;break;default:return void(this.write=Wn)}this.charBuffer=new ye(6),this.charReceived=0,this.charLength=0}function Wn(t){return t.toString(this.encoding)}function Vn(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function qn(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}Hn.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;r=(e+=t.toString(this.encoding,0,r)).length-1;if((i=e.charCodeAt(r))>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),e.substring(0,r)}return e},Hn.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},Hn.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e},Jn.ReadableState=Qn;var Gn=function(t){if(Rn(wn)&&(wn=j.env.NODE_DEBUG||""),t=t.toUpperCase(),!An[t])if(new RegExp("\\b"+t+"\\b","i").test(wn)){An[t]=function(){var e=mn.apply(null,arguments);console.error("%s %d: %s",t,0,e)}}else An[t]=function(){};return An[t]}("stream");function Qn(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof Ar&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new zn,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new Hn(t.encoding),this.encoding=t.encoding)}function Jn(t){if(!(this instanceof Jn))return new Jn(t);this._readableState=new Qn(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),an.call(this)}function Kn(t,e,n,r,i){var s=function(t,e){var n=null;nn(e)||"string"==typeof e||null==e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(e,n);if(s)t.emit("error",s);else if(null===n)e.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,Zn(t)}(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var o=new Error("stream.unshift() after end event");t.emit("error",o)}else{var u;!e.decoder||i||r||(n=e.decoder.write(n),u=!e.objectMode&&0===n.length),i||(e.reading=!1),u||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&Zn(t))),function(t,e){e.readingMore||(e.readingMore=!0,k(tr,t,e))}(t,e)}else i||(e.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}bn(Jn,an),Jn.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding)!==n.encoding&&(t=ye.from(t,e),e=""),Kn(this,n,t,e,!1)},Jn.prototype.unshift=function(t){return Kn(this,this._readableState,t,"",!0)},Jn.prototype.isPaused=function(){return!1===this._readableState.flowing},Jn.prototype.setEncoding=function(t){return this._readableState.decoder=new Hn(t),this._readableState.encoding=t,this};function Yn(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function Zn(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Gn("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?k(Xn,t):Xn(t))}function Xn(t){Gn("emit readable"),t.emit("readable"),rr(t)}function tr(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Gn("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function er(t){Gn("readable nexttick read 0"),t.read(0)}function nr(t,e){e.reading||(Gn("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),rr(t),e.flowing&&!e.reading&&t.read(0)}function rr(t){var e=t._readableState;for(Gn("flow",e.flowing);e.flowing&&null!==t.read(););}function ir(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(a===s.length?i+=s:i+=s.slice(0,t),0===(t-=a)){a===s.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=ye.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var s=r.data,a=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,a),0===(t-=a)){a===s.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(a));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function sr(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,k(ar,e,t))}function ar(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function or(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function ur(){}function cr(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function hr(t,e){Object.defineProperty(this,"buffer",{get:yn((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof Ar&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?k(i,r):i(r);t._writableState.errorEmitted=!0,t.emit("error",r)}(t,n,r,e,i);else{var s=_r(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||pr(t,n),r?k(dr,t,n,s,i):dr(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new vr(this)}function lr(t){if(!(this instanceof lr||this instanceof Ar))return new lr(t);this._writableState=new hr(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),an.call(this)}function fr(t,e,n,r,i,s,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function dr(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),br(t,e)}function pr(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var a=0;n;)i[a]=n,n=n.next,a+=1;fr(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new vr(e)}else{for(;n;){var o=n.chunk,u=n.encoding,c=n.callback;if(fr(t,e,!1,e.objectMode?1:o.length,o,u,c),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function _r(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function gr(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function br(t,e){var n=_r(e);return n&&(0===e.pendingcb?(gr(t,e),e.finished=!0,t.emit("finish")):gr(t,e)),n}function vr(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}Jn.prototype.read=function(t){Gn("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Gn("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?sr(this):Zn(this),null;if(0===(t=Yn(t,e))&&e.ended)return 0===e.length&&sr(this),null;var r,i=e.needReadable;return Gn("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&Gn("length less than watermark",i=!0),e.ended||e.reading?Gn("reading or ended",i=!1):i&&(Gn("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Yn(n,e))),null===(r=t>0?ir(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&sr(this)),null!==r&&this.emit("data",r),r},Jn.prototype._read=function(t){this.emit("error",new Error("not implemented"))},Jn.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,Gn("pipe count=%d opts=%j",r.pipesCount,e);var i=!e||!1!==e.end?a:c;function s(t){Gn("onunpipe"),t===n&&c()}function a(){Gn("onend"),t.end()}r.endEmitted?k(i):n.once("end",i),t.on("unpipe",s);var o=function(t){return function(){var e=t._readableState;Gn("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&t.listeners("data").length&&(e.flowing=!0,rr(t))}}(n);t.on("drain",o);var u=!1;function c(){Gn("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",o),t.removeListener("error",f),t.removeListener("unpipe",s),n.removeListener("end",a),n.removeListener("end",c),n.removeListener("data",l),u=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||o()}var h=!1;function l(e){Gn("ondata"),h=!1,!1!==t.write(e)||h||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==or(r.pipes,t))&&!u&&(Gn("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,h=!0),n.pause())}function f(e){var n;Gn("onerror",e),_(),t.removeListener("error",f),0===(n="error",t.listeners(n).length)&&t.emit("error",e)}function d(){t.removeListener("finish",p),_()}function p(){Gn("onfinish"),t.removeListener("close",d),_()}function _(){Gn("unpipe"),n.unpipe(t)}return n.on("data",l),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",f),t.once("close",d),t.once("finish",p),t.emit("pipe",n),r.flowing||(Gn("pipe resume"),n.resume()),t},Jn.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var s=or(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},Jn.prototype.on=function(t,e){var n=an.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&Zn(this):k(er,this))}return n},Jn.prototype.addListener=Jn.prototype.on,Jn.prototype.resume=function(){var t=this._readableState;return t.flowing||(Gn("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,k(nr,t,e))}(this,t)),this},Jn.prototype.pause=function(){return Gn("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Gn("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Jn.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;for(var i in t.on("end",(function(){if(Gn("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)})),t.on("data",(function(i){(Gn("wrapped data"),e.decoder&&(i=e.decoder.write(i)),e.objectMode&&null==i)||(e.objectMode||i&&i.length)&&(r.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}(["error","close","destroy","pause","resume"],(function(e){t.on(e,r.emit.bind(r,e))})),r._read=function(e){Gn("wrapped _read",e),n&&(n=!1,t.resume())},r},Jn._fromList=ir,lr.WritableState=hr,bn(lr,an),hr.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},lr.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},lr.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return"function"==typeof e&&(n=e,e=null),ye.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=ur),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),k(e,n)}(this,n):function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):ye.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),k(r,s),i=!1),i}(this,r,t,n)&&(r.pendingcb++,i=function(t,e,n,r,i){n=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=ye.from(e,n));return e}(e,n,r),ye.isBuffer(n)&&(r="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;a||(e.needDrain=!0);if(e.writing||e.corked){var o=e.lastBufferedRequest;e.lastBufferedRequest=new cr(n,r,i),o?o.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else fr(t,e,!1,s,n,r,i);return a}(this,r,t,e,n)),i},lr.prototype.cork=function(){this._writableState.corked++},lr.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||pr(this,t))},lr.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},lr.prototype._write=function(t,e,n){n(new Error("not implemented"))},lr.prototype._writev=null,lr.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,br(t,e),n&&(e.finished?k(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},bn(Ar,Jn);for(var mr=Object.keys(lr.prototype),yr=0;yr<mr.length;yr++){var wr=mr[yr];Ar.prototype[wr]||(Ar.prototype[wr]=lr.prototype[wr])}function Ar(t){if(!(this instanceof Ar))return new Ar(t);Jn.call(this,t),lr.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",kr)}function kr(){this.allowHalfOpen||this._writableState.ended||k(Cr,this)}function Cr(t){t.end()}function Sr(t){this.afterTransform=function(e,n){return function(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=n&&t.push(n);i(e);var s=t._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&t._read(s.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Er(t){if(!(this instanceof Er))return new Er(t);Ar.call(this,t),this._transformState=new Sr(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(t){xr(e,t)})):xr(e)}))}function xr(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}function Tr(t){if(!(this instanceof Tr))return new Tr(t);Er.call(this,t)}function Ir(){an.call(this)}bn(Er,Ar),Er.prototype.push=function(t,e){return this._transformState.needTransform=!1,Ar.prototype.push.call(this,t,e)},Er.prototype._transform=function(t,e,n){throw new Error("Not implemented")},Er.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Er.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},bn(Tr,Er),Tr.prototype._transform=function(t,e,n){n(null,t)},bn(Ir,an),Ir.Readable=Jn,Ir.Writable=lr,Ir.Duplex=Ar,Ir.Transform=Er,Ir.PassThrough=Tr,Ir.Stream=Ir,Ir.prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",o));var s=!1;function a(){s||(s=!0,t.end())}function o(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(c(),0===an.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",o),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",u),t.on("error",u),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};var Br,Or,Rr=U((function(t,e){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer=!0,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(n),e.blob=0===r.getBlob("application/zip").size}catch(t){e.blob=!1}}}try{e.nodestream=!!Ir.Readable}catch(t){e.nodestream=!1}})),Pr=(Rr.base64,Rr.array,Rr.string,Rr.arraybuffer,Rr.nodebuffer,Rr.uint8array,Rr.blob,Rr.nodestream,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Dr=function(t){for(var e,n,r,i,s,a,o,u=[],c=0,h=t.length,l=h,f="string"!==ci.getTypeOf(t);c<t.length;)l=h-c,f?(e=t[c++],n=c<h?t[c++]:0,r=c<h?t[c++]:0):(e=t.charCodeAt(c++),n=c<h?t.charCodeAt(c++):0,r=c<h?t.charCodeAt(c++):0),i=e>>2,s=(3&e)<<4|n>>4,a=l>1?(15&n)<<2|r>>6:64,o=l>2?63&r:64,u.push(Pr.charAt(i)+Pr.charAt(s)+Pr.charAt(a)+Pr.charAt(o));return u.join("")},Mr=function(t){var e,n,r,i,s,a,o=0,u=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var c,h=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===Pr.charAt(64)&&h--,t.charAt(t.length-2)===Pr.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(c=Rr.uint8array?new Uint8Array(0|h):new Array(0|h);o<t.length;)e=Pr.indexOf(t.charAt(o++))<<2|(i=Pr.indexOf(t.charAt(o++)))>>4,n=(15&i)<<4|(s=Pr.indexOf(t.charAt(o++)))>>2,r=(3&s)<<6|(a=Pr.indexOf(t.charAt(o++))),c[u++]=e,64!==s&&(c[u++]=n),64!==a&&(c[u++]=r);return c},Fr=!0,jr=function(t,e){if(ye.from&&ye.from!==Uint8Array.from)return ye.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new ye(t,e)},Lr=function(t){if(ye.alloc)return ye.alloc(t);var e=new ye(t);return e.fill(0),e},Nr=function(t){return nn(t)},Ur=function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume},zr="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)},$r=L.MutationObserver||L.WebKitMutationObserver;if($r){var Hr=0,Wr=new $r(Qr),Vr=L.document.createTextNode("");Wr.observe(Vr,{characterData:!0}),Br=function(){Vr.data=Hr=++Hr%2}}else if(L.setImmediate||void 0===L.MessageChannel)Br="document"in L&&"onreadystatechange"in L.document.createElement("script")?function(){var t=L.document.createElement("script");t.onreadystatechange=function(){Qr(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},L.document.documentElement.appendChild(t)}:function(){setTimeout(Qr,0)};else{var qr=new L.MessageChannel;qr.port1.onmessage=Qr,Br=function(){qr.port2.postMessage(0)}}var Gr=[];function Qr(){var t,e;Or=!0;for(var n=Gr.length;n;){for(e=Gr,Gr=[],t=-1;++t<n;)e[t]();n=Gr.length}Or=!1}var Jr=function(t){1!==Gr.push(t)||Or||Br()};function Kr(){}var Yr={},Zr=["REJECTED"],Xr=["FULFILLED"],ti=["PENDING"],ei=ni;function ni(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=ti,this.queue=[],this.outcome=void 0,t!==Kr&&ai(this,t)}function ri(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function ii(t,e,n){Jr((function(){var r;try{r=e(n)}catch(e){return Yr.reject(t,e)}r===t?Yr.reject(t,new TypeError("Cannot resolve promise with itself")):Yr.resolve(t,r)}))}function si(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function ai(t,e){var n=!1;function r(e){n||(n=!0,Yr.reject(t,e))}function i(e){n||(n=!0,Yr.resolve(t,e))}var s=oi((function(){e(i,r)}));"error"===s.status&&r(s.value)}function oi(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}ni.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},ni.prototype.catch=function(t){return this.then(null,t)},ni.prototype.then=function(t,e){if("function"!=typeof t&&this.state===Xr||"function"!=typeof e&&this.state===Zr)return this;var n=new this.constructor(Kr);this.state!==ti?ii(n,this.state===Xr?t:e,this.outcome):this.queue.push(new ri(n,t,e));return n},ri.prototype.callFulfilled=function(t){Yr.resolve(this.promise,t)},ri.prototype.otherCallFulfilled=function(t){ii(this.promise,this.onFulfilled,t)},ri.prototype.callRejected=function(t){Yr.reject(this.promise,t)},ri.prototype.otherCallRejected=function(t){ii(this.promise,this.onRejected,t)},Yr.resolve=function(t,e){var n=oi(si,e);if("error"===n.status)return Yr.reject(t,n.value);var r=n.value;if(r)ai(t,r);else{t.state=Xr,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t},Yr.reject=function(t,e){t.state=Zr,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},ni.resolve=function(t){if(t instanceof this)return t;return Yr.resolve(new this(Kr),t)},ni.reject=function(t){var e=new this(Kr);return Yr.reject(e,t)},ni.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);var i=new Array(n),s=0,a=-1,o=new this(Kr);for(;++a<n;)u(t[a],a);return o;function u(t,a){e.resolve(t).then((function(t){i[a]=t,++s!==n||r||(r=!0,Yr.resolve(o,i))}),(function(t){r||(r=!0,Yr.reject(o,t))}))}},ni.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);var i=-1,s=new this(Kr);for(;++i<n;)a=t[i],e.resolve(a).then((function(t){r||(r=!0,Yr.resolve(s,t))}),(function(t){r||(r=!0,Yr.reject(s,t))}));var a;return s};var ui={Promise:"undefined"!=typeof Promise?Promise:ei},ci=U((function(t,e){function n(t){return t}function r(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}e.newBlob=function(t,n){e.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(t),r.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var i={stringifyByChunk:function(t,e,n){var r=[],i=0,s=t.length;if(s<=n)return String.fromCharCode.apply(null,t);for(;i<s;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+n,s)))):r.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+n,s)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return Rr.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return Rr.nodebuffer&&1===String.fromCharCode.apply(null,Lr(1)).length}catch(t){return!1}}()}};function s(t){var n=65536,r=e.getTypeOf(t),s=!0;if("uint8array"===r?s=i.applyCanBeUsed.uint8array:"nodebuffer"===r&&(s=i.applyCanBeUsed.nodebuffer),s)for(;n>1;)try{return i.stringifyByChunk(t,r,n)}catch(t){n=Math.floor(n/2)}return i.stringifyByChar(t)}function a(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}e.applyFromCharCode=s;var o={};o.string={string:n,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return o.string.uint8array(t).buffer},uint8array:function(t){return r(t,new Uint8Array(t.length))},nodebuffer:function(t){return r(t,Lr(t.length))}},o.array={string:s,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return jr(t)}},o.arraybuffer={string:function(t){return s(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return jr(new Uint8Array(t))}},o.uint8array={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return jr(t)}},o.nodebuffer={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return o.nodebuffer.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:n},e.transformTo=function(t,n){if(n||(n=""),!t)return n;e.checkSupport(t);var r=e.getTypeOf(n);return o[r][t](n)},e.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":Rr.nodebuffer&&Nr(t)?"nodebuffer":Rr.uint8array&&t instanceof Uint8Array?"uint8array":Rr.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(t){if(!Rr[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},e.delay=function(t,e,n){zr((function(){t.apply(n||null,e||[])}))},e.inherits=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n},e.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},e.prepareContent=function(t,n,i,s,a){return ui.Promise.resolve(n).then((function(t){return Rr.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new ui.Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)})):t})).then((function(n){var o,u=e.getTypeOf(n);return u?("arraybuffer"===u?n=e.transformTo("uint8array",n):"string"===u&&(a?n=Mr(n):i&&!0!==s&&(n=r(o=n,Rr.uint8array?new Uint8Array(o.length):new Array(o.length)))),n):ui.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}}));ci.newBlob,ci.applyFromCharCode,ci.transformTo,ci.getTypeOf,ci.checkSupport,ci.MAX_VALUE_16BITS,ci.MAX_VALUE_32BITS,ci.pretty,ci.delay,ci.inherits,ci.extend,ci.prepareContent;function hi(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}hi.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}};var li=hi,fi=U((function(t,e){for(var n=new Array(256),r=0;r<256;r++)n[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;n[254]=n[254]=1;function i(){li.call(this,"utf-8 decode"),this.leftOver=null}function s(){li.call(this,"utf-8 encode")}e.utf8encode=function(t){return Rr.nodebuffer?jr(t,"utf-8"):function(t){var e,n,r,i,s,a=t.length,o=0;for(i=0;i<a;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=Rr.uint8array?new Uint8Array(o):new Array(o),s=0,i=0;s<o;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e}(t)},e.utf8decode=function(t){return Rr.nodebuffer?ci.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,i,s,a=t.length,o=new Array(2*a);for(r=0,e=0;e<a;)if((i=t[e++])<128)o[r++]=i;else if((s=n[i])>4)o[r++]=65533,e+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&e<a;)i=i<<6|63&t[e++],s--;s>1?o[r++]=65533:i<65536?o[r++]=i:(i-=65536,o[r++]=55296|i>>10&1023,o[r++]=56320|1023&i)}return o.length!==r&&(o.subarray?o=o.subarray(0,r):o.length=r),ci.applyFromCharCode(o)}(t=ci.transformTo(Rr.uint8array?"uint8array":"array",t))},ci.inherits(i,li),i.prototype.processChunk=function(t){var r=ci.transformTo(Rr.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(Rr.uint8array){var i=r;(r=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),r.set(i,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var s=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+n[t[r]]>e?r:e}(r),a=r;s!==r.length&&(Rr.uint8array?(a=r.subarray(0,s),this.leftOver=r.subarray(s,r.length)):(a=r.slice(0,s),this.leftOver=r.slice(s,r.length))),this.push({data:e.utf8decode(a),meta:t.meta})},i.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=i,ci.inherits(s,li),s.prototype.processChunk=function(t){this.push({data:e.utf8encode(t.data),meta:t.meta})},e.Utf8EncodeWorker=s}));fi.utf8encode,fi.utf8decode,fi.Utf8DecodeWorker,fi.Utf8EncodeWorker;function di(t){li.call(this,"ConvertWorker to "+t),this.destType=t}ci.inherits(di,li),di.prototype.processChunk=function(t){this.push({data:ci.transformTo(this.destType,t.data),meta:t.meta})};var pi=di,_i=Ir.Readable;function gi(t,e,n){_i.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}ci.inherits(gi,_i),gi.prototype._read=function(){this._helper.resume()};var bi=gi,vi=null;if(Rr.nodestream)try{vi=bi}catch(t){}function mi(t,e){return new ui.Promise((function(n,r){var i=[],s=t._internalType,a=t._outputType,o=t._mimeType;t.on("data",(function(t,n){i.push(t),e&&e(n)})).on("error",(function(t){i=[],r(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return ci.newBlob(ci.transformTo("arraybuffer",e),n);case"base64":return Dr(e);default:return ci.transformTo(t,e)}}(a,function(t,e){var n,r=0,i=null,s=0;for(n=0;n<e.length;n++)s+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(s),n=0;n<e.length;n++)i.set(e[n],r),r+=e[n].length;return i;case"nodebuffer":return ye.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(s,i),o);n(t)}catch(t){r(t)}i=[]})).resume()}))}function yi(t,e,n){var r=e;switch(e){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=e,this._mimeType=n,ci.checkSupport(r),this._worker=t.pipe(new pi(r)),t.lock()}catch(t){this._worker=new li("error"),this._worker.error(t)}}yi.prototype={accumulate:function(t){return mi(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){ci.delay(e,arguments,n)})),this},resume:function(){return ci.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(ci.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new vi(this,{objectMode:"nodebuffer"!==this._outputType},t)}};var wi=yi,Ai={base64:!1,binary:!1,dir:!1,createFolders:!0,date:null,compression:null,compressionOptions:null,comment:null,unixPermissions:null,dosPermissions:null};function ki(t){li.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=ci.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}ci.inherits(ki,li),ki.prototype.cleanUp=function(){li.prototype.cleanUp.call(this),this.data=null},ki.prototype.resume=function(){return!!li.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,ci.delay(this._tickAndRepeat,[],this)),!0)},ki.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(ci.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},ki.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})};var Ci=ki;function Si(t){li.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}ci.inherits(Si,li),Si.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}li.prototype.processChunk.call(this,t)};var Ei=Si;var xi=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();var Ti=function(t,e){return void 0!==t&&t.length?"string"!==ci.getTypeOf(t)?function(t,e,n,r){var i=xi,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,n,r){var i=xi,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^i[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0};function Ii(){li.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}ci.inherits(Ii,li),Ii.prototype.processChunk=function(t){this.streamInfo.crc32=Ti(t.data,this.streamInfo.crc32||0),this.push(t)};var Bi=Ii;function Oi(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}Oi.prototype={getContentWorker:function(){var t=new Ci(ui.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Ei("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new Ci(ui.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},Oi.createWorkerFrom=function(t,e,n){return t.pipe(new Bi).pipe(new Ei("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new Ei("compressedSize")).withStreamInfo("compression",e)};var Ri=Oi,Pi=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};Pi.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(e=e.pipe(new fi.Utf8EncodeWorker)),!i&&r&&(e=e.pipe(new fi.Utf8DecodeWorker))}catch(t){(e=new li("error")).error(t)}return new wi(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof Ri&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new fi.Utf8EncodeWorker)),Ri.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof Ri?this._data.getContentWorker():this._data instanceof li?this._data:new Ci(this._data)}};for(var Di=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Mi=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Fi=0;Fi<Di.length;Fi++)Pi.prototype[Di[Fi]]=Mi;var ji=Pi,Li=U((function(t,e){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var s=0;s<r;s++)t[i+s]=e[n+s]},flattenChunks:function(t){var e,n,r,i,s,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)s=t[e],a.set(s,i),i+=s.length;return a}},s={arraySet:function(t,e,n,r,i){for(var s=0;s<r;s++)t[i+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)}));Li.assign,Li.shrinkBuf,Li.setTyped,Li.Buf8,Li.Buf16,Li.Buf32;function Ni(t){for(var e=t.length;--e>=0;)t[e]=0}var Ui=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],zi=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Hi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Wi=new Array(576);Ni(Wi);var Vi=new Array(60);Ni(Vi);var qi=new Array(512);Ni(qi);var Gi=new Array(256);Ni(Gi);var Qi=new Array(29);Ni(Qi);var Ji,Ki,Yi,Zi=new Array(30);function Xi(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function ts(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function es(t){return t<256?qi[t]:qi[256+(t>>>7)]}function ns(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function rs(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,ns(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function is(t,e,n){rs(t,n[2*e],n[2*e+1])}function ss(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function as(t,e,n){var r,i,s=new Array(16),a=0;for(r=1;r<=15;r++)s[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var o=t[2*i+1];0!==o&&(t[2*i]=ss(s[o]++,o))}}function os(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function us(t){t.bi_valid>8?ns(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function cs(t,e,n,r){var i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]}function hs(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&cs(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!cs(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function ls(t,e,n){var r,i,s,a,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?is(t,i,e):(is(t,(s=Gi[i])+256+1,e),0!==(a=Ui[s])&&rs(t,i-=Qi[s],a),is(t,s=es(--r),n),0!==(a=zi[s])&&rs(t,r-=Zi[s],a))}while(o<t.last_lit);is(t,256,e)}function fs(t,e){var n,r,i,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==s[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):s[2*n+1]=0;for(;t.heap_len<2;)s[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=a[2*i+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)hs(t,s,n);i=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],hs(t,s,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,s[2*i]=s[2*n]+s[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,s[2*n+1]=s[2*r+1]=i,t.heap[1]=i++,hs(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,s,a,o,u=e.dyn_tree,c=e.max_code,h=e.stat_desc.static_tree,l=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,_=0;for(s=0;s<=15;s++)t.bl_count[s]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(s=u[2*u[2*(r=t.heap[n])+1]+1]+1)>p&&(s=p,_++),u[2*r+1]=s,r>c||(t.bl_count[s]++,a=0,r>=d&&(a=f[r-d]),o=u[2*r],t.opt_len+=o*(s+a),l&&(t.static_len+=o*(h[2*r+1]+a)));if(0!==_){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,_-=2}while(_>0);for(s=p;0!==s;s--)for(r=t.bl_count[s];0!==r;)(i=t.heap[--n])>c||(u[2*i+1]!==s&&(t.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),r--)}}(t,e),as(s,c,t.bl_count)}function ds(t,e,n){var r,i,s=-1,a=e[1],o=0,u=7,c=4;for(0===a&&(u=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++o<u&&i===a||(o<c?t.bl_tree[2*i]+=o:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4))}function ps(t,e,n){var r,i,s=-1,a=e[1],o=0,u=7,c=4;for(0===a&&(u=138,c=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++o<u&&i===a)){if(o<c)do{is(t,i,t.bl_tree)}while(0!=--o);else 0!==i?(i!==s&&(is(t,i,t.bl_tree),o--),is(t,16,t.bl_tree),rs(t,o-3,2)):o<=10?(is(t,17,t.bl_tree),rs(t,o-3,3)):(is(t,18,t.bl_tree),rs(t,o-11,7));o=0,s=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4)}}Ni(Zi);var _s=!1;function gs(t,e,n,r){rs(t,0+(r?1:0),3),function(t,e,n,r){us(t),r&&(ns(t,n),ns(t,~n)),Li.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}var bs={_tr_init:function(t){_s||(!function(){var t,e,n,r,i,s=new Array(16);for(n=0,r=0;r<28;r++)for(Qi[r]=n,t=0;t<1<<Ui[r];t++)Gi[n++]=r;for(Gi[n-1]=r,i=0,r=0;r<16;r++)for(Zi[r]=i,t=0;t<1<<zi[r];t++)qi[i++]=r;for(i>>=7;r<30;r++)for(Zi[r]=i<<7,t=0;t<1<<zi[r]-7;t++)qi[256+i++]=r;for(e=0;e<=15;e++)s[e]=0;for(t=0;t<=143;)Wi[2*t+1]=8,t++,s[8]++;for(;t<=255;)Wi[2*t+1]=9,t++,s[9]++;for(;t<=279;)Wi[2*t+1]=7,t++,s[7]++;for(;t<=287;)Wi[2*t+1]=8,t++,s[8]++;for(as(Wi,287,s),t=0;t<30;t++)Vi[2*t+1]=5,Vi[2*t]=ss(t,5);Ji=new Xi(Wi,Ui,257,286,15),Ki=new Xi(Vi,zi,0,30,15),Yi=new Xi(new Array(0),$i,0,19,7)}(),_s=!0),t.l_desc=new ts(t.dyn_ltree,Ji),t.d_desc=new ts(t.dyn_dtree,Ki),t.bl_desc=new ts(t.bl_tree,Yi),t.bi_buf=0,t.bi_valid=0,os(t)},_tr_stored_block:gs,_tr_flush_block:function(t,e,n,r){var i,s,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),fs(t,t.l_desc),fs(t,t.d_desc),a=function(t){var e;for(ds(t,t.dyn_ltree,t.l_desc.max_code),ds(t,t.dyn_dtree,t.d_desc.max_code),fs(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Hi[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?gs(t,e,n,r):4===t.strategy||s===i?(rs(t,2+(r?1:0),3),ls(t,Wi,Vi)):(rs(t,4+(r?1:0),3),function(t,e,n,r){var i;for(rs(t,e-257,5),rs(t,n-1,5),rs(t,r-4,4),i=0;i<r;i++)rs(t,t.bl_tree[2*Hi[i]+1],3);ps(t,t.dyn_ltree,e-1),ps(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),ls(t,t.dyn_ltree,t.dyn_dtree)),os(t),r&&us(t)},_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(Gi[n]+256+1)]++,t.dyn_dtree[2*es(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){rs(t,2,3),is(t,256,Wi),function(t){16===t.bi_valid?(ns(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}};var vs=function(t,e,n,r){for(var i=65535&t|0,s=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{s=s+(i=i+e[r++]|0)|0}while(--a);i%=65521,s%=65521}return i|s<<16|0};var ms=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();var ys,ws=function(t,e,n,r){var i=ms,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^i[255&(t^e[a])];return-1^t},As={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ks(t,e){return t.msg=As[e],e}function Cs(t){return(t<<1)-(t>4?9:0)}function Ss(t){for(var e=t.length;--e>=0;)t[e]=0}function Es(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(Li.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function xs(t,e){bs._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Es(t.strm)}function Ts(t,e){t.pending_buf[t.pending++]=e}function Is(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function Bs(t,e){var n,r,i=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,c=t.window,h=t.w_mask,l=t.prev,f=t.strstart+258,d=c[s+a-1],p=c[s+a];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(c[(n=e)+a]===p&&c[n+a-1]===d&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<f);if(r=258-(f-s),s=f-258,r>a){if(t.match_start=e,a=r,r>=o)break;d=c[s+a-1],p=c[s+a]}}}while((e=l[e&h])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function Os(t){var e,n,r,i,s,a,o,u,c,h,l=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=l+(l-262)){Li.arraySet(t.window,t.window,l,l,0),t.match_start-=l,t.strstart-=l,t.block_start-=l,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=l?r-l:0}while(--n);e=n=l;do{r=t.prev[--e],t.prev[e]=r>=l?r-l:0}while(--n);i+=l}if(0===t.strm.avail_in)break;if(a=t.strm,o=t.window,u=t.strstart+t.lookahead,c=i,h=void 0,(h=a.avail_in)>c&&(h=c),n=0===h?0:(a.avail_in-=h,Li.arraySet(o,a.input,a.next_in,h,u),1===a.state.wrap?a.adler=vs(a.adler,o,h,u):2===a.state.wrap&&(a.adler=ws(a.adler,o,h,u)),a.next_in+=h,a.total_in+=h,h),t.lookahead+=n,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+3-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function Rs(t,e){for(var n,r;;){if(t.lookahead<262){if(Os(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=Bs(t,n)),t.match_length>=3)if(r=bs._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=bs._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(xs(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(xs(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xs(t,!1),0===t.strm.avail_out)?1:2}function Ps(t,e){for(var n,r,i;;){if(t.lookahead<262){if(Os(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=Bs(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=bs._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(xs(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=bs._tr_tally(t,0,t.window[t.strstart-1]))&&xs(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=bs._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(xs(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xs(t,!1),0===t.strm.avail_out)?1:2}function Ds(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function Ms(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Li.Buf16(1146),this.dyn_dtree=new Li.Buf16(122),this.bl_tree=new Li.Buf16(78),Ss(this.dyn_ltree),Ss(this.dyn_dtree),Ss(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Li.Buf16(16),this.heap=new Li.Buf16(573),Ss(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Li.Buf16(573),Ss(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Fs(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,bs._tr_init(e),0):ks(t,-2)}function js(t){var e,n=Fs(t);return 0===n&&((e=t.state).window_size=2*e.w_size,Ss(e.head),e.max_lazy_match=ys[e.level].max_lazy,e.good_match=ys[e.level].good_length,e.nice_match=ys[e.level].nice_length,e.max_chain_length=ys[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function Ls(t,e,n,r,i,s){if(!t)return-2;var a=1;if(-1===e&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||8!==n||r<8||r>15||e<0||e>9||s<0||s>4)return ks(t,-2);8===r&&(r=9);var o=new Ms;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Li.Buf8(2*o.w_size),o.head=new Li.Buf16(o.hash_size),o.prev=new Li.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Li.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=n,js(t)}ys=[new Ds(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Os(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,xs(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(xs(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(xs(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(xs(t,!1),t.strm.avail_out),1)})),new Ds(4,4,8,4,Rs),new Ds(4,5,16,8,Rs),new Ds(4,6,32,32,Rs),new Ds(4,4,16,16,Ps),new Ds(8,16,32,32,Ps),new Ds(8,16,128,128,Ps),new Ds(8,32,128,256,Ps),new Ds(32,128,258,1024,Ps),new Ds(32,258,258,4096,Ps)];var Ns={deflateInit:function(t,e){return Ls(t,e,8,15,8,0)},deflateInit2:Ls,deflateReset:js,deflateResetKeep:Fs,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},deflate:function(t,e){var n,r,i,s;if(!t||!t.state||e>5||e<0)return t?ks(t,-2):-2;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return ks(t,0===t.avail_out?-5:-2);if(r.strm=t,n=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,Ts(r,31),Ts(r,139),Ts(r,8),r.gzhead?(Ts(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ts(r,255&r.gzhead.time),Ts(r,r.gzhead.time>>8&255),Ts(r,r.gzhead.time>>16&255),Ts(r,r.gzhead.time>>24&255),Ts(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Ts(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Ts(r,255&r.gzhead.extra.length),Ts(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=ws(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Ts(r,0),Ts(r,0),Ts(r,0),Ts(r,0),Ts(r,0),Ts(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Ts(r,3),r.status=113);else{var a=8+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=113,Is(r,a),0!==r.strstart&&(Is(r,t.adler>>>16),Is(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(t.adler=ws(t.adler,r.pending_buf,r.pending-i,i)),Es(t),i=r.pending,r.pending!==r.pending_buf_size));)Ts(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=ws(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=ws(t.adler,r.pending_buf,r.pending-i,i)),Es(t),i=r.pending,r.pending===r.pending_buf_size)){s=1;break}s=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Ts(r,s)}while(0!==s);r.gzhead.hcrc&&r.pending>i&&(t.adler=ws(t.adler,r.pending_buf,r.pending-i,i)),0===s&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=ws(t.adler,r.pending_buf,r.pending-i,i)),Es(t),i=r.pending,r.pending===r.pending_buf_size)){s=1;break}s=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Ts(r,s)}while(0!==s);r.gzhead.hcrc&&r.pending>i&&(t.adler=ws(t.adler,r.pending_buf,r.pending-i,i)),0===s&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Es(t),r.pending+2<=r.pending_buf_size&&(Ts(r,255&t.adler),Ts(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(Es(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&Cs(e)<=Cs(n)&&4!==e)return ks(t,-5);if(666===r.status&&0!==t.avail_in)return ks(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var o=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(Os(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=bs._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(xs(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(xs(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xs(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var n,r,i,s,a=t.window;;){if(t.lookahead<=258){if(Os(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){s=t.strstart+258;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);t.match_length=258-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=bs._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=bs._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(xs(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(xs(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xs(t,!1),0===t.strm.avail_out)?1:2}(r,e):ys[r.level].func(r,e);if(3!==o&&4!==o||(r.status=666),1===o||3===o)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===o&&(1===e?bs._tr_align(r):5!==e&&(bs._tr_stored_block(r,0,0,!1),3===e&&(Ss(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Es(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(Ts(r,255&t.adler),Ts(r,t.adler>>8&255),Ts(r,t.adler>>16&255),Ts(r,t.adler>>24&255),Ts(r,255&t.total_in),Ts(r,t.total_in>>8&255),Ts(r,t.total_in>>16&255),Ts(r,t.total_in>>24&255)):(Is(r,t.adler>>>16),Is(r,65535&t.adler)),Es(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},deflateEnd:function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?ks(t,-2):(t.state=null,113===e?ks(t,-3):0):-2},deflateSetDictionary:function(t,e){var n,r,i,s,a,o,u,c,h=e.length;if(!t||!t.state)return-2;if(2===(s=(n=t.state).wrap)||1===s&&42!==n.status||n.lookahead)return-2;for(1===s&&(t.adler=vs(t.adler,e,h,0)),n.wrap=0,h>=n.w_size&&(0===s&&(Ss(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new Li.Buf8(n.w_size),Li.arraySet(c,e,h-n.w_size,n.w_size,0),e=c,h=n.w_size),a=t.avail_in,o=t.next_in,u=t.input,t.avail_in=h,t.next_in=0,t.input=e,Os(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=2,Os(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=o,t.input=u,t.avail_in=a,n.wrap=s,0},deflateInfo:"pako deflate (from Nodeca project)"},Us=!0,zs=!0;try{String.fromCharCode.apply(null,[0])}catch(t){Us=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){zs=!1}for(var $s=new Li.Buf8(256),Hs=0;Hs<256;Hs++)$s[Hs]=Hs>=252?6:Hs>=248?5:Hs>=240?4:Hs>=224?3:Hs>=192?2:1;$s[254]=$s[254]=1;function Ws(t,e){if(e<65534&&(t.subarray&&zs||!t.subarray&&Us))return String.fromCharCode.apply(null,Li.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}var Vs=function(t){var e,n,r,i,s,a=t.length,o=0;for(i=0;i<a;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Li.Buf8(o),s=0,i=0;s<o;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},qs=function(t){return Ws(t,t.length)},Gs=function(t){for(var e=new Li.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},Qs=function(t,e){var n,r,i,s,a=e||t.length,o=new Array(2*a);for(r=0,n=0;n<a;)if((i=t[n++])<128)o[r++]=i;else if((s=$s[i])>4)o[r++]=65533,n+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&n<a;)i=i<<6|63&t[n++],s--;s>1?o[r++]=65533:i<65536?o[r++]=i:(i-=65536,o[r++]=55296|i>>10&1023,o[r++]=56320|1023&i)}return Ws(o,r)},Js=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+$s[t[n]]>e?n:e};var Ks=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ys=Object.prototype.toString;function Zs(t){if(!(this instanceof Zs))return new Zs(t);this.options=Li.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ks,this.strm.avail_out=0;var n=Ns.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(As[n]);if(e.header&&Ns.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?Vs(e.dictionary):"[object ArrayBuffer]"===Ys.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=Ns.deflateSetDictionary(this.strm,r)))throw new Error(As[n]);this._dict_set=!0}}function Xs(t,e){var n=new Zs(e);if(n.push(t,!0),n.err)throw n.msg||As[n.err];return n.result}Zs.prototype.push=function(t,e){var n,r,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=Vs(t):"[object ArrayBuffer]"===Ys.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new Li.Buf8(s),i.next_out=0,i.avail_out=s),1!==(n=Ns.deflate(i,r))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(qs(Li.shrinkBuf(i.output,i.next_out))):this.onData(Li.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=Ns.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),i.avail_out=0,!0)},Zs.prototype.onData=function(t){this.chunks.push(t)},Zs.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Li.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ta={Deflate:Zs,deflate:Xs,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Xs(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Xs(t,e)}},ea=function(t,e){var n,r,i,s,a,o,u,c,h,l,f,d,p,_,g,b,v,m,y,w,A,k,C,S,E;n=t.state,r=t.next_in,S=t.input,i=r+(t.avail_in-5),s=t.next_out,E=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),u=n.dmax,c=n.wsize,h=n.whave,l=n.wnext,f=n.window,d=n.hold,p=n.bits,_=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),m=_[d&b];e:for(;;){if(d>>>=y=m>>>24,p-=y,0===(y=m>>>16&255))E[s++]=65535&m;else{if(!(16&y)){if(0==(64&y)){m=_[(65535&m)+(d&(1<<y)-1)];continue e}if(32&y){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&m,(y&=15)&&(p<y&&(d+=S[r++]<<p,p+=8),w+=d&(1<<y)-1,d>>>=y,p-=y),p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),m=g[d&v];n:for(;;){if(d>>>=y=m>>>24,p-=y,!(16&(y=m>>>16&255))){if(0==(64&y)){m=g[(65535&m)+(d&(1<<y)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(A=65535&m,p<(y&=15)&&(d+=S[r++]<<p,(p+=8)<y&&(d+=S[r++]<<p,p+=8)),(A+=d&(1<<y)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=y,p-=y,A>(y=s-a)){if((y=A-y)>h&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=0,C=f,0===l){if(k+=c-y,y<w){w-=y;do{E[s++]=f[k++]}while(--y);k=s-A,C=E}}else if(l<y){if(k+=c+l-y,(y-=l)<w){w-=y;do{E[s++]=f[k++]}while(--y);if(k=0,l<w){w-=y=l;do{E[s++]=f[k++]}while(--y);k=s-A,C=E}}}else if(k+=l-y,y<w){w-=y;do{E[s++]=f[k++]}while(--y);k=s-A,C=E}for(;w>2;)E[s++]=C[k++],E[s++]=C[k++],E[s++]=C[k++],w-=3;w&&(E[s++]=C[k++],w>1&&(E[s++]=C[k++]))}else{k=s-A;do{E[s++]=E[k++],E[s++]=E[k++],E[s++]=E[k++],w-=3}while(w>2);w&&(E[s++]=E[k++],w>1&&(E[s++]=E[k++]))}break}}break}}while(r<i&&s<o);r-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=s<o?o-s+257:257-(s-o),n.hold=d,n.bits=p},na=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ra=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ia=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],sa=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],aa=function(t,e,n,r,i,s,a,o){var u,c,h,l,f,d,p,_,g,b=o.bits,v=0,m=0,y=0,w=0,A=0,k=0,C=0,S=0,E=0,x=0,T=null,I=0,B=new Li.Buf16(16),O=new Li.Buf16(16),R=null,P=0;for(v=0;v<=15;v++)B[v]=0;for(m=0;m<r;m++)B[e[n+m]]++;for(A=b,w=15;w>=1&&0===B[w];w--);if(A>w&&(A=w),0===w)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(y=1;y<w&&0===B[y];y++);for(A<y&&(A=y),S=1,v=1;v<=15;v++)if(S<<=1,(S-=B[v])<0)return-1;if(S>0&&(0===t||1!==w))return-1;for(O[1]=0,v=1;v<15;v++)O[v+1]=O[v]+B[v];for(m=0;m<r;m++)0!==e[n+m]&&(a[O[e[n+m]]++]=m);if(0===t?(T=R=a,d=19):1===t?(T=na,I-=257,R=ra,P-=257,d=256):(T=ia,R=sa,d=-1),x=0,m=0,v=y,f=s,k=A,C=0,h=-1,l=(E=1<<A)-1,1===t&&E>852||2===t&&E>592)return 1;for(;;){p=v-C,a[m]<d?(_=0,g=a[m]):a[m]>d?(_=R[P+a[m]],g=T[I+a[m]]):(_=96,g=0),u=1<<v-C,y=c=1<<k;do{i[f+(x>>C)+(c-=u)]=p<<24|_<<16|g|0}while(0!==c);for(u=1<<v-1;x&u;)u>>=1;if(0!==u?(x&=u-1,x+=u):x=0,m++,0==--B[v]){if(v===w)break;v=e[n+a[m]]}if(v>A&&(x&l)!==h){for(0===C&&(C=A),f+=y,S=1<<(k=v-C);k+C<w&&!((S-=B[k+C])<=0);)k++,S<<=1;if(E+=1<<k,1===t&&E>852||2===t&&E>592)return 1;i[h=x&l]=A<<24|k<<16|f-s|0}}return 0!==x&&(i[f+x]=v-C<<24|64<<16|0),o.bits=A,0};function oa(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function ua(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Li.Buf16(320),this.work=new Li.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ca(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Li.Buf32(852),e.distcode=e.distdyn=new Li.Buf32(592),e.sane=1,e.back=-1,0):-2}function ha(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,ca(t)):-2}function la(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,ha(t))):-2}function fa(t,e){var n,r;return t?(r=new ua,t.state=r,r.window=null,0!==(n=la(t,e))&&(t.state=null),n):-2}var da,pa,_a=!0;function ga(t){if(_a){var e;for(da=new Li.Buf32(512),pa=new Li.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(aa(1,t.lens,0,288,da,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;aa(2,t.lens,0,32,pa,0,t.work,{bits:5}),_a=!1}t.lencode=da,t.lenbits=9,t.distcode=pa,t.distbits=5}function ba(t,e,n,r){var i,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Li.Buf8(s.wsize)),r>=s.wsize?(Li.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((i=s.wsize-s.wnext)>r&&(i=r),Li.arraySet(s.window,e,n-r,i,s.wnext),(r-=i)?(Li.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}var va={inflateReset:ha,inflateReset2:la,inflateResetKeep:ca,inflateInit:function(t){return fa(t,15)},inflateInit2:fa,inflate:function(t,e){var n,r,i,s,a,o,u,c,h,l,f,d,p,_,g,b,v,m,y,w,A,k,C,S,E=0,x=new Li.Buf8(4),T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(n=t.state).mode&&(n.mode=13),a=t.next_out,i=t.output,u=t.avail_out,s=t.next_in,r=t.input,o=t.avail_in,c=n.hold,h=n.bits,l=o,f=u,k=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;h<16;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(2&n.wrap&&35615===c){n.check=0,x[0]=255&c,x[1]=c>>>8&255,n.check=ws(n.check,x,2,0),c=0,h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&c)){t.msg="unknown compression method",n.mode=30;break}if(h-=4,A=8+(15&(c>>>=4)),0===n.wbits)n.wbits=A;else if(A>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<A,t.adler=n.check=1,n.mode=512&c?10:12,c=0,h=0;break;case 2:for(;h<16;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(n.flags=c,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=ws(n.check,x,2,0)),c=0,h=0,n.mode=3;case 3:for(;h<32;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.head&&(n.head.time=c),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=ws(n.check,x,4,0)),c=0,h=0,n.mode=4;case 4:for(;h<16;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=ws(n.check,x,2,0)),c=0,h=0,n.mode=5;case 5:if(1024&n.flags){for(;h<16;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=ws(n.check,x,2,0)),c=0,h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((d=n.length)>o&&(d=o),d&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Li.arraySet(n.head.extra,r,s,d,A)),512&n.flags&&(n.check=ws(n.check,r,d,s)),o-=d,s+=d,n.length-=d),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break t;d=0;do{A=r[s+d++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A))}while(A&&d<o);if(512&n.flags&&(n.check=ws(n.check,r,d,s)),o-=d,s+=d,A)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break t;d=0;do{A=r[s+d++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A))}while(A&&d<o);if(512&n.flags&&(n.check=ws(n.check,r,d,s)),o-=d,s+=d,A)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;h<16;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}c=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;h<32;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}t.adler=n.check=oa(c),c=0,h=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=o,n.hold=c,n.bits=h,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){c>>>=7&h,h-=7&h,n.mode=27;break}for(;h<3;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}switch(n.last=1&c,h-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(ga(n),n.mode=20,6===e){c>>>=2,h-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}c>>>=2,h-=2;break;case 14:for(c>>>=7&h,h-=7&h;h<32;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,c=0,h=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(d=n.length){if(d>o&&(d=o),d>u&&(d=u),0===d)break t;Li.arraySet(i,r,s,d,a),o-=d,s+=d,u-=d,a+=d,n.length-=d;break}n.mode=12;break;case 17:for(;h<14;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(n.nlen=257+(31&c),c>>>=5,h-=5,n.ndist=1+(31&c),c>>>=5,h-=5,n.ncode=4+(15&c),c>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;h<3;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.lens[T[n.have++]]=7&c,c>>>=3,h-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},k=aa(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,k){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;b=(E=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,v=65535&E,!((g=E>>>24)<=h);){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(v<16)c>>>=g,h-=g,n.lens[n.have++]=v;else{if(16===v){for(S=g+2;h<S;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(c>>>=g,h-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}A=n.lens[n.have-1],d=3+(3&c),c>>>=2,h-=2}else if(17===v){for(S=g+3;h<S;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}h-=g,A=0,d=3+(7&(c>>>=g)),c>>>=3,h-=3}else{for(S=g+7;h<S;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}h-=g,A=0,d=11+(127&(c>>>=g)),c>>>=7,h-=7}if(n.have+d>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;d--;)n.lens[n.have++]=A}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,C={bits:n.lenbits},k=aa(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,k){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},k=aa(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,k){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(o>=6&&u>=258){t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=o,n.hold=c,n.bits=h,ea(t,f),a=t.next_out,i=t.output,u=t.avail_out,s=t.next_in,r=t.input,o=t.avail_in,c=n.hold,h=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;b=(E=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,v=65535&E,!((g=E>>>24)<=h);){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(b&&0==(240&b)){for(m=g,y=b,w=v;b=(E=n.lencode[w+((c&(1<<m+y)-1)>>m)])>>>16&255,v=65535&E,!(m+(g=E>>>24)<=h);){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}c>>>=m,h-=m,n.back+=m}if(c>>>=g,h-=g,n.back+=g,n.length=v,0===b){n.mode=26;break}if(32&b){n.back=-1,n.mode=12;break}if(64&b){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&b,n.mode=22;case 22:if(n.extra){for(S=n.extra;h<S;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;b=(E=n.distcode[c&(1<<n.distbits)-1])>>>16&255,v=65535&E,!((g=E>>>24)<=h);){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(0==(240&b)){for(m=g,y=b,w=v;b=(E=n.distcode[w+((c&(1<<m+y)-1)>>m)])>>>16&255,v=65535&E,!(m+(g=E>>>24)<=h);){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}c>>>=m,h-=m,n.back+=m}if(c>>>=g,h-=g,n.back+=g,64&b){t.msg="invalid distance code",n.mode=30;break}n.offset=v,n.extra=15&b,n.mode=24;case 24:if(n.extra){for(S=n.extra;h<S;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===u)break t;if(d=f-u,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),_=n.window}else _=i,p=a-n.offset,d=n.length;d>u&&(d=u),u-=d,n.length-=d;do{i[a++]=_[p++]}while(--d);0===n.length&&(n.mode=21);break;case 26:if(0===u)break t;i[a++]=n.length,u--,n.mode=21;break;case 27:if(n.wrap){for(;h<32;){if(0===o)break t;o--,c|=r[s++]<<h,h+=8}if(f-=u,t.total_out+=f,n.total+=f,f&&(t.adler=n.check=n.flags?ws(n.check,i,f,a-f):vs(n.check,i,f,a-f)),f=u,(n.flags?c:oa(c))!==n.check){t.msg="incorrect data check",n.mode=30;break}c=0,h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;h<32;){if(0===o)break t;o--,c+=r[s++]<<h,h+=8}if(c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}c=0,h=0}n.mode=29;case 29:k=1;break t;case 30:k=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=o,n.hold=c,n.bits=h,(n.wsize||f!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&ba(t,t.output,t.next_out,f-t.avail_out),l-=t.avail_in,f-=t.avail_out,t.total_in+=l,t.total_out+=f,n.total+=f,n.wrap&&f&&(t.adler=n.check=n.flags?ws(n.check,i,f,t.next_out-f):vs(n.check,i,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===l&&0===f||4===e)&&0===k&&(k=-5),k},inflateEnd:function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},inflateGetHeader:function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?-2:(n.head=e,e.done=!1,0):-2},inflateSetDictionary:function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?-2:11===n.mode&&vs(1,e,r,0)!==n.check?-3:ba(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},ma={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var ya=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},wa=Object.prototype.toString;function Aa(t){if(!(this instanceof Aa))return new Aa(t);this.options=Li.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ks,this.strm.avail_out=0;var n=va.inflateInit2(this.strm,e.windowBits);if(n!==ma.Z_OK)throw new Error(As[n]);if(this.header=new ya,va.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Vs(e.dictionary):"[object ArrayBuffer]"===wa.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=va.inflateSetDictionary(this.strm,e.dictionary))!==ma.Z_OK))throw new Error(As[n])}function ka(t,e){var n=new Aa(e);if(n.push(t,!0),n.err)throw n.msg||As[n.err];return n.result}Aa.prototype.push=function(t,e){var n,r,i,s,a,o=this.strm,u=this.options.chunkSize,c=this.options.dictionary,h=!1;if(this.ended)return!1;r=e===~~e?e:!0===e?ma.Z_FINISH:ma.Z_NO_FLUSH,"string"==typeof t?o.input=Gs(t):"[object ArrayBuffer]"===wa.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new Li.Buf8(u),o.next_out=0,o.avail_out=u),(n=va.inflate(o,ma.Z_NO_FLUSH))===ma.Z_NEED_DICT&&c&&(n=va.inflateSetDictionary(this.strm,c)),n===ma.Z_BUF_ERROR&&!0===h&&(n=ma.Z_OK,h=!1),n!==ma.Z_STREAM_END&&n!==ma.Z_OK)return this.onEnd(n),this.ended=!0,!1;o.next_out&&(0!==o.avail_out&&n!==ma.Z_STREAM_END&&(0!==o.avail_in||r!==ma.Z_FINISH&&r!==ma.Z_SYNC_FLUSH)||("string"===this.options.to?(i=Js(o.output,o.next_out),s=o.next_out-i,a=Qs(o.output,i),o.next_out=s,o.avail_out=u-s,s&&Li.arraySet(o.output,o.output,i,s,0),this.onData(a)):this.onData(Li.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(h=!0)}while((o.avail_in>0||0===o.avail_out)&&n!==ma.Z_STREAM_END);return n===ma.Z_STREAM_END&&(r=ma.Z_FINISH),r===ma.Z_FINISH?(n=va.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===ma.Z_OK):r!==ma.Z_SYNC_FLUSH||(this.onEnd(ma.Z_OK),o.avail_out=0,!0)},Aa.prototype.onData=function(t){this.chunks.push(t)},Aa.prototype.onEnd=function(t){t===ma.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Li.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Ca={Inflate:Aa,inflate:ka,inflateRaw:function(t,e){return(e=e||{}).raw=!0,ka(t,e)},ungzip:ka},Sa={};(0,Li.assign)(Sa,ta,Ca,ma);var Ea=Sa,xa="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array?"uint8array":"array";function Ta(t,e){li.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}ci.inherits(Ta,li),Ta.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(ci.transformTo(xa,t.data),!1)},Ta.prototype.flush=function(){li.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},Ta.prototype.cleanUp=function(){li.prototype.cleanUp.call(this),this._pako=null},Ta.prototype._createPako=function(){this._pako=new Ea[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}};var Ia={STORE:{magic:"\0\0",compressWorker:function(t){return new li("STORE compression")},uncompressWorker:function(){return new li("STORE decompression")}},DEFLATE:{magic:"\b\0",compressWorker:function(t){return new Ta("Deflate",t)},uncompressWorker:function(){return new Ta("Inflate",{})}}},Ba="PK",Oa="PK",Ra="PK",Pa="PK",Da="PK",Ma="PK\b",Fa=function(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},ja=function(t,e,n,r,i,s){var a,o,u=t.file,c=t.compression,h=s!==fi.utf8encode,l=ci.transformTo("string",s(u.name)),f=ci.transformTo("string",fi.utf8encode(u.name)),d=u.comment,p=ci.transformTo("string",s(d)),_=ci.transformTo("string",fi.utf8encode(d)),g=f.length!==u.name.length,b=_.length!==d.length,v="",m="",y="",w=u.dir,A=u.date,k={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(k.crc32=t.crc32,k.compressedSize=t.compressedSize,k.uncompressedSize=t.uncompressedSize);var C=0;e&&(C|=8),h||!g&&!b||(C|=2048);var S=0,E=0;w&&(S|=16),"UNIX"===i?(E=798,S|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(u.unixPermissions,w)):(E=20,S|=function(t,e){return 63&(t||0)}(u.dosPermissions)),a=A.getUTCHours(),a<<=6,a|=A.getUTCMinutes(),a<<=5,a|=A.getUTCSeconds()/2,o=A.getUTCFullYear()-1980,o<<=4,o|=A.getUTCMonth()+1,o<<=5,o|=A.getUTCDate(),g&&(m=Fa(1,1)+Fa(Ti(l),4)+f,v+="up"+Fa(m.length,2)+m),b&&(y=Fa(1,1)+Fa(Ti(p),4)+_,v+="uc"+Fa(y.length,2)+y);var x="";return x+="\n\0",x+=Fa(C,2),x+=c.magic,x+=Fa(a,2),x+=Fa(o,2),x+=Fa(k.crc32,4),x+=Fa(k.compressedSize,4),x+=Fa(k.uncompressedSize,4),x+=Fa(l.length,2),x+=Fa(v.length,2),{fileRecord:Ba+x+l+v,dirRecord:Oa+Fa(E,2)+x+Fa(p.length,2)+"\0\0\0\0"+Fa(S,4)+Fa(r,4)+l+v+p}},La=function(t){return Ma+Fa(t.crc32,4)+Fa(t.compressedSize,4)+Fa(t.uncompressedSize,4)};function Na(t,e,n,r){li.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}ci.inherits(Na,li),Na.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,li.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},Na.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=ja(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},Na.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=ja(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:La(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},Na.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,i){var s=ci.transformTo("string",i(r));return Ra+"\0\0\0\0"+Fa(t,2)+Fa(t,2)+Fa(e,4)+Fa(n,4)+Fa(s.length,2)+s}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},Na.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},Na.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},Na.prototype.resume=function(){return!!li.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},Na.prototype.error=function(t){var e=this._sources;if(!li.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},Na.prototype.lock=function(){li.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()};var Ua=Na,za=function(t,e,n){var r=new Ua(e.streamFiles,n,e.platform,e.encodeFileName),i=0;try{t.forEach((function(t,n){i++;var s=function(t,e){var n=t||e,r=Ia[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),a=n.options.compressionOptions||e.compressionOptions||{},o=n.dir,u=n.date;n._compressWorker(s,a).withStreamInfo("file",{name:t,dir:o,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(r)})),r.entriesCount=i}catch(t){r.error(t)}return r};function $a(t,e){li.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}ci.inherits($a,li),$a.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},$a.prototype.pause=function(){return!!li.prototype.pause.call(this)&&(this._stream.pause(),!0)},$a.prototype.resume=function(){return!!li.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)};var Ha=$a,Wa=function(t,e,n){var r,i=ci.getTypeOf(e),s=ci.extend(n||{},Ai);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=qa(t)),s.createFolders&&(r=Va(t))&&Ga.call(this,r,!0);var a="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!a),(e instanceof Ri&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",i="string");var o=null;o=e instanceof Ri||e instanceof li?e:Fr&&Ur(e)?new Ha(t,e):ci.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var u=new ji(t,o,s);this.files[t]=u},Va=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},qa=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},Ga=function(t,e){return e=void 0!==e?e:Ai.createFolders,t=qa(t),this.files[t]||Wa.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function Qa(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var Ja={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)this.files.hasOwnProperty(e)&&(r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r))},filter:function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(r)})),e},file:function(t,e,n){if(1===arguments.length){if(Qa(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var i=this.files[this.root+t];return i&&!i.dir?i:null}return(t=this.root+t,Wa.call(this,t,e,n),this)},folder:function(t){if(!t)return this;if(Qa(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=Ga.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=ci.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:fi.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");ci.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";e=za(this,n,r)}catch(t){(e=new li("error")).error(t)}return new wi(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};function Ka(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}Ka.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return ci.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}};var Ya=Ka;function Za(t){Ya.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}ci.inherits(Za,Ya),Za.prototype.byteAt=function(t){return this.data[this.zero+t]},Za.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===e&&this.data[s+1]===n&&this.data[s+2]===r&&this.data[s+3]===i)return s-this.zero;return-1},Za.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&n===s[1]&&r===s[2]&&i===s[3]},Za.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var Xa=Za;function to(t){Ya.call(this,t)}ci.inherits(to,Ya),to.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},to.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},to.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},to.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var eo=to;function no(t){Xa.call(this,t)}ci.inherits(no,Xa),no.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var ro=no;function io(t){ro.call(this,t)}ci.inherits(io,ro),io.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var so=io,ao=function(t){var e=ci.getTypeOf(t);return ci.checkSupport(e),"string"!==e||Rr.uint8array?"nodebuffer"===e?new so(t):Rr.uint8array?new ro(ci.transformTo("uint8array",t)):new Xa(ci.transformTo("array",t)):new eo(t)};function oo(t,e){this.options=t,this.loadOptions=e}oo.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in Ia)if(Ia.hasOwnProperty(e)&&Ia[e].magic===t)return Ia[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+ci.pretty(this.compressionMethod)+" unknown (inner file : "+ci.transformTo("string",this.fileName)+")");this.decompressed=new Ri(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=ao(this.extraFields[1].value);this.uncompressedSize===ci.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===ci.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===ci.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===ci.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r}},handleUTF8:function(){var t=Rr.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=fi.utf8decode(this.fileName),this.fileCommentStr=fi.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=ci.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=ci.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=ao(t.value);return 1!==e.readInt(1)?null:Ti(this.fileName)!==e.readInt(4)?null:fi.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=ao(t.value);return 1!==e.readInt(1)?null:Ti(this.fileComment)!==e.readInt(4)?null:fi.utf8decode(e.readData(t.length-5))}return null}};var uo=oo;function co(t){this.files=[],this.loadOptions=t}co.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+ci.pretty(e)+", expected "+ci.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=Rr.uint8array?"uint8array":"array",n=ci.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(Ba),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(Oa);)(t=new uo({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(Ra);if(t<0)throw!this.isSignature(0,Ba)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(t);var e=t;if(this.checkSignature(Ra),this.readBlockEndOfCentral(),this.diskNumber===ci.MAX_VALUE_16BITS||this.diskWithCentralDirStart===ci.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===ci.MAX_VALUE_16BITS||this.centralDirRecords===ci.MAX_VALUE_16BITS||this.centralDirSize===ci.MAX_VALUE_32BITS||this.centralDirOffset===ci.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(Pa))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(Pa),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,Da)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(Da),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(Da),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(r>0)this.isSignature(e,Oa)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=ao(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};var ho=co;function lo(t){return new ui.Promise((function(e,n){var r=t.decompressed.getContentWorker().pipe(new Bi);r.on("error",(function(t){n(t)})).on("end",(function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}function fo(){if(!(this instanceof fo))return new fo;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new fo;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}fo.prototype=Ja,fo.prototype.loadAsync=function(t,e){var n=this;return e=ci.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:fi.utf8decode}),Fr&&Ur(t)?ui.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):ci.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new ho(e);return n.load(t),n})).then((function(t){var n=[ui.Promise.resolve(t)],r=t.files;if(e.checkCRC32)for(var i=0;i<r.length;i++)n.push(lo(r[i]));return ui.Promise.all(n)})).then((function(t){for(var r=t.shift(),i=r.files,s=0;s<i.length;s++){var a=i[s];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))},fo.support=Rr,fo.defaults=Ai,fo.version="3.2.0",fo.loadAsync=function(t,e){return(new fo).loadAsync(t,e)},fo.external=ui;var po=fo,_o=U((function(t){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],s=0;s<4;s++)8*r+6*s<=8*t.length?n.push(e.charAt(i>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}};t.exports=n}()})),go={utf8:{stringToBytes:function(t){return go.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(go.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}},bo=go,vo=function(t){return null!=t&&(mo(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&mo(t.slice(0,0))}(t)||!!t._isBuffer)};function mo(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var yo=U((function(t){!function(){var e=_o,n=bo.utf8,r=vo,i=bo.bin,s=function(t,a){t.constructor==String?t=a&&"binary"===a.encoding?i.stringToBytes(t):n.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var o=e.bytesToWords(t),u=8*t.length,c=1732584193,h=-271733879,l=-1732584194,f=271733878,d=0;d<o.length;d++)o[d]=16711935&(o[d]<<8|o[d]>>>24)|4278255360&(o[d]<<24|o[d]>>>8);o[u>>>5]|=128<<u%32,o[14+(u+64>>>9<<4)]=u;var p=s._ff,_=s._gg,g=s._hh,b=s._ii;for(d=0;d<o.length;d+=16){var v=c,m=h,y=l,w=f;c=p(c,h,l,f,o[d+0],7,-680876936),f=p(f,c,h,l,o[d+1],12,-389564586),l=p(l,f,c,h,o[d+2],17,606105819),h=p(h,l,f,c,o[d+3],22,-1044525330),c=p(c,h,l,f,o[d+4],7,-176418897),f=p(f,c,h,l,o[d+5],12,1200080426),l=p(l,f,c,h,o[d+6],17,-1473231341),h=p(h,l,f,c,o[d+7],22,-45705983),c=p(c,h,l,f,o[d+8],7,1770035416),f=p(f,c,h,l,o[d+9],12,-1958414417),l=p(l,f,c,h,o[d+10],17,-42063),h=p(h,l,f,c,o[d+11],22,-1990404162),c=p(c,h,l,f,o[d+12],7,1804603682),f=p(f,c,h,l,o[d+13],12,-40341101),l=p(l,f,c,h,o[d+14],17,-1502002290),c=_(c,h=p(h,l,f,c,o[d+15],22,1236535329),l,f,o[d+1],5,-165796510),f=_(f,c,h,l,o[d+6],9,-1069501632),l=_(l,f,c,h,o[d+11],14,643717713),h=_(h,l,f,c,o[d+0],20,-373897302),c=_(c,h,l,f,o[d+5],5,-701558691),f=_(f,c,h,l,o[d+10],9,38016083),l=_(l,f,c,h,o[d+15],14,-660478335),h=_(h,l,f,c,o[d+4],20,-405537848),c=_(c,h,l,f,o[d+9],5,568446438),f=_(f,c,h,l,o[d+14],9,-1019803690),l=_(l,f,c,h,o[d+3],14,-187363961),h=_(h,l,f,c,o[d+8],20,1163531501),c=_(c,h,l,f,o[d+13],5,-1444681467),f=_(f,c,h,l,o[d+2],9,-51403784),l=_(l,f,c,h,o[d+7],14,1735328473),c=g(c,h=_(h,l,f,c,o[d+12],20,-1926607734),l,f,o[d+5],4,-378558),f=g(f,c,h,l,o[d+8],11,-2022574463),l=g(l,f,c,h,o[d+11],16,1839030562),h=g(h,l,f,c,o[d+14],23,-35309556),c=g(c,h,l,f,o[d+1],4,-1530992060),f=g(f,c,h,l,o[d+4],11,1272893353),l=g(l,f,c,h,o[d+7],16,-155497632),h=g(h,l,f,c,o[d+10],23,-1094730640),c=g(c,h,l,f,o[d+13],4,681279174),f=g(f,c,h,l,o[d+0],11,-358537222),l=g(l,f,c,h,o[d+3],16,-722521979),h=g(h,l,f,c,o[d+6],23,76029189),c=g(c,h,l,f,o[d+9],4,-640364487),f=g(f,c,h,l,o[d+12],11,-421815835),l=g(l,f,c,h,o[d+15],16,530742520),c=b(c,h=g(h,l,f,c,o[d+2],23,-995338651),l,f,o[d+0],6,-198630844),f=b(f,c,h,l,o[d+7],10,1126891415),l=b(l,f,c,h,o[d+14],15,-1416354905),h=b(h,l,f,c,o[d+5],21,-57434055),c=b(c,h,l,f,o[d+12],6,1700485571),f=b(f,c,h,l,o[d+3],10,-1894986606),l=b(l,f,c,h,o[d+10],15,-1051523),h=b(h,l,f,c,o[d+1],21,-2054922799),c=b(c,h,l,f,o[d+8],6,1873313359),f=b(f,c,h,l,o[d+15],10,-30611744),l=b(l,f,c,h,o[d+6],15,-1560198380),h=b(h,l,f,c,o[d+13],21,1309151649),c=b(c,h,l,f,o[d+4],6,-145523070),f=b(f,c,h,l,o[d+11],10,-1120210379),l=b(l,f,c,h,o[d+2],15,718787259),h=b(h,l,f,c,o[d+9],21,-343485551),c=c+v>>>0,h=h+m>>>0,l=l+y>>>0,f=f+w>>>0}return e.endian([c,h,l,f])};s._ff=function(t,e,n,r,i,s,a){var o=t+(e&n|~e&r)+(i>>>0)+a;return(o<<s|o>>>32-s)+e},s._gg=function(t,e,n,r,i,s,a){var o=t+(e&r|n&~r)+(i>>>0)+a;return(o<<s|o>>>32-s)+e},s._hh=function(t,e,n,r,i,s,a){var o=t+(e^n^r)+(i>>>0)+a;return(o<<s|o>>>32-s)+e},s._ii=function(t,e,n,r,i,s,a){var o=t+(n^(e|~r))+(i>>>0)+a;return(o<<s|o>>>32-s)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(s(t,n));return n&&n.asBytes?r:n&&n.asString?i.bytesToString(r):e.bytesToHex(r)}}()}));var wo=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=[];function r(t){return n[t]||(n[t]=function(t){for(var e="return function dispatcher"+t+"(payload) {\n",n=[],r=[],i=0;i<t;i++)n.push("cb"+i),r.push("ctx"+i),e+="    cb"+i+"(payload, ctx"+i+");\n";return e+="};",new(Function.bind.apply(Function,[void 0].concat(n.concat(r),[e])))}(t)),n[t]}n[0]=function(){return function(){}},n[1]=function(t,e){return void 0===e?t:function(n){t(n,e)}};var i=function(){function t(){this.hasHandlers=!1,this._handlers=[],this._contexts=[],this._createDispatcher()}return t.prototype.addHandler=function(t,e){return this.isHandlerAttached(t,e)||(this._handlers.push(t),this._contexts.push(e),this._createDispatcher(),this._updateHasHandlers()),this},t.prototype.removeHandler=function(t,e){var n=this._getHandlerIndex(t,e);return void 0!==n&&(this._handlers.splice(n,1),this._contexts.splice(n,1),this._createDispatcher(),this._updateHasHandlers()),this},t.prototype.isHandlerAttached=function(t,e){return void 0!==this._getHandlerIndex(t,e)},t.prototype._updateHasHandlers=function(){this.hasHandlers=!!this._handlers.length},t.prototype._getHandlerIndex=function(t,e){var n,r=this._handlers.length;for(n=0;n<r&&(this._handlers[n]!==t||this._contexts[n]!==e);n++);return n<r?n:void 0},t.prototype._createDispatcher=function(){this.dispatch=r(this._handlers.length).apply(this,this._handlers.concat(this._contexts))},t}();e.default=i}));N(wo);var Ao=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Event=wo.default}));N(Ao);var ko,Co=Ao.Event;!function(t){t.TrapPayload=class{constructor(t,e,n){this.reason=t,this.cartridge=e,this.message=n}}}(ko||(ko={}));class So{constructor(){this.trap=new Co}init(){return a(this,void 0,void 0,(function*(){}))}reset(){}read(t){return 0}peek(t){return this.read(t)}write(t,e){}getType(){return ht.CartridgeType.unknown}setCpu(t){return this}setBus(t){return this}setRng(t){return this}setCpuTimeProvider(t){return this}notifyCpuCycleComplete(){}randomize(t){}triggerTrap(t,e){if(!this.trap.hasHandlers)throw new Error(e);this.trap.dispatch(new ko.TrapPayload(t,this,e))}}function Eo(t,e){const n=[],r=e.map(t=>0);for(let i=0;i<t.length;i++){for(let s=0;s<n.length;s++){const a=n[s],o=e[a.signature];t[i]===o[a.nextIndex]?++a.nextIndex===o.length&&(r[a.signature]++,n.splice(s,1),s--):(n.splice(s,1),s--)}for(let s=0;s<e.length;s++){const a=e[s];a.length>0&&t[i]===a[0]&&(1===a.length?r[s]++:n.push({signature:s,nextIndex:1}))}}return r}class xo extends So{constructor(t,e=!0){if(super(),this._supportSC=e,this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._hasSC=!1,this._saraRAM=new Uint8Array(128),this._bus=null,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){return Eo(t,[[141,249,31]])[0]>=2}reset(){this._bank=this._bank1,this._hasSC=!1}read(t){return this._access(4095&t,this._bus.getLastDataBusValue()),this.peek(t)}peek(t){return t&=4095,this._hasSC&&t>=128&&t<256?this._saraRAM[t-128]:this._bank[t]}write(t,e){(t&=4095)<128&&this._supportSC&&(this._hasSC=!0),this._access(t,e)}getType(){return ht.CartridgeType.bankswitch_8k_F8}randomize(t){for(let e=0;e<this._saraRAM.length;e++)this._saraRAM[e]=t.int(255)}setBus(t){return this._bus=t,this}_access(t,e){if(t<128&&this._hasSC)this._saraRAM[t]=255&e;else switch(t){case 4088:this._bank=this._bank0;break;case 4089:this._bank=this._bank1}}}class To extends So{constructor(t){if(super(),this._banks=new Array(8),this._activeBanks=new Array(4),8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: invalid length ${t.length}`);for(let t=0;t<8;t++)this._banks[t]=new Uint8Array(1024);for(let e=0;e<1024;e++)for(let n=0;n<8;n++)this._banks[n][e]=t[1024*n+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[141,224,31],[141,224,95],[141,233,255],[12,224,31],[173,224,31],[173,233,255],[173,237,255],[173,243,191]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){for(let t=0;t<4;t++)this._activeBanks[t]=this._banks[7]}read(t){return(t&=4095)>=4064&&t<4088&&this._handleBankswitch(t),this._activeBanks[t>>10][1023&t]}peek(t){return t&=4095,this._activeBanks[t>>10][1023&t]}write(t,e){const n=4095&t;return n>=4064&&n<4088&&this._handleBankswitch(n),super.write(t,e)}getType(){return ht.CartridgeType.bankswitch_8k_E0}_handleBankswitch(t){t<4072?this._activeBanks[0]=this._banks[t-4064]:t<4080?this._activeBanks[1]=this._banks[t-4072]:this._activeBanks[2]=this._banks[t-4080]}}class Io extends So{constructor(t){if(super(),this._banks=new Array(4),this._bus=null,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: invalid length ${t.length}`);for(let t=0;t<4;t++)this._banks[t]=new Uint8Array(2048);this._bank1=this._banks[3],this._bank0=this._banks[0];for(let e=0;e<2048;e++)for(let n=0;n<4;n++)this._banks[n][e]=t[2048*n+e]}static matchesBuffer(t){return Eo(t,[[133,63]])[0]>=2}reset(){this._bank0=this._banks[0]}setBus(t){return this._bus=t,this._bus.event.read.addHandler(Io._onBusAccess,this),this._bus.event.write.addHandler(Io._onBusAccess,this),this}read(t){return(t&=4095)<2048?this._bank0[t]:this._bank1[2047&t]}getType(){return ht.CartridgeType.bankswitch_8k_3F}static _onBusAccess(t,e){63===e._bus.getLastAddresBusValue()&&(e._bank0=e._banks[3&e._bus.getLastDataBusValue()])}}class Bo extends So{constructor(t){if(super(),this._banks=null,this._ramSelect=!1,this._ramBanks=new Array(256),this._bus=null,0!=(2047&t.length))throw new Error(`buffer length ${t.length} is not a multiple of 2k`);const e=t.length>>>11;if(e<2)throw new Error("image must have at least 2k");this._banks=new Array(e);for(let t=0;t<e;t++)this._banks[t]=new Uint8Array(2048);for(let t=0;t<=255;t++)this._ramBanks[t]=new Uint8Array(1024);this._ramBank=this._ramBanks[0],this._bank1=this._banks[e-1],this._bank0=this._banks[0];for(let n=0;n<2048;n++)for(let r=0;r<e;r++)this._banks[r][n]=t[2048*r+n]}static matchesBuffer(t){return Eo(t,[[133,62,169,0]])[0]>=1}reset(){this._bank0=this._banks[0]}randomize(t){for(let e=0;e<this._ramBanks.length;e++)for(let n=0;n<1024;n++)this._ramBanks[e][n]=t.int(255)}setBus(t){return this._bus=t,this._bus.event.read.addHandler(Bo._onBusAccess,this),this._bus.event.write.addHandler(Bo._onBusAccess,this),this}read(t){return t&=4095,this._ramSelect?t<1024?this._ramBank[t]:t<2048?this._ramBank[1023&t]=this._bus.getLastDataBusValue():this._bank1[2047&t]:t<2048?this._bank0[t]:this._bank1[2047&t]}peek(t){return t&=4095,this._ramSelect?t<1024?this._ramBank[t]:t<2048?this._bus.getLastDataBusValue():this._bank1[2047&t]:t<2048?this._bank0[t]:this._bank1[2047&t]}write(t,e){this._ramSelect&&(t&=4095)>=1024&&t<2048&&(this._ramBank[1023&t]=e)}getType(){return ht.CartridgeType.bankswitch_3E}static _onBusAccess(t,e){switch(e._bus.getLastAddresBusValue()){case 63:e._ramSelect=!1,e._bank0=e._banks[e._bus.getLastDataBusValue()%e._banks.length];break;case 62:e._ramSelect=!0,e._ramBank=e._ramBanks[e._bus.getLastDataBusValue()%32]}}}class Oo extends So{constructor(t){if(super(),this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._lastAccessWasFE=!1,this._lastAddressBusValue=-1,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[32,0,208,198,197],[32,195,248,165,130],[208,251,32,115,254],[32,0,240,132,214]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){this._bank=this._bank0,this._lastAccessWasFE=!1,this._lastAddressBusValue=-1}read(t){return this._bank[4095&t]}write(t,e){super.write(t,e)}setBus(t){return this._bus=t,this._bus.event.read.addHandler(Oo._onBusAccess,this),this._bus.event.write.addHandler(Oo._onBusAccess,this),this}getType(){return ht.CartridgeType.bankswitch_8k_FE}static _onBusAccess(t,e){const n=e._lastAddressBusValue;if(e._lastAddressBusValue=8191&e._bus.getLastAddresBusValue(),e._lastAddressBusValue!==n){if(e._lastAccessWasFE){const t=224&e._bus.getLastDataBusValue();e._bank=0===t?e._bank0:(32&e._bus.getLastDataBusValue())>0?e._bank0:e._bank1}e._lastAccessWasFE=510===e._lastAddressBusValue}}}class Ro extends So{constructor(t){if(super(),this._bus=null,this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[141,64,2],[173,64,2],[189,31,2]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){this._bank=this._bank0}read(t){return this._bank[4095&t]}setBus(t){return this._bus=t,t.event.read.addHandler(Ro._onBusAccess,this),t.event.write.addHandler(Ro._onBusAccess,this),this}getType(){return ht.CartridgeType.bankswitch_8k_UA}static _onBusAccess(t,e){switch(e._bus.getLastAddresBusValue()){case 544:e._bank=e._bank0;break;case 576:e._bank=e._bank1}}}class Po extends So{constructor(t){if(super(),this._banks=new Array(8),this._ram0=new Uint8Array(1024),this._ram1Banks=new Array(4),this._ram0Enabled=!1,16384!==t.length)throw new Error(`buffer is not a 16k cartridge image: wrong length ${t.length}`);for(let t=0;t<8;t++)this._banks[t]=new Uint8Array(2048);for(let t=0;t<4;t++)this._ram1Banks[t]=new Uint8Array(256);for(let e=0;e<2048;e++)for(let n=0;n<8;n++)this._banks[n][e]=t[2048*n+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[173,226,255],[173,229,255],[173,229,31],[173,231,31],[12,231,31],[141,231,255],[141,231,31]]);for(let t=0;t<e.length;t++)if(e[t]>0)return!0;return!1}reset(){this._bank0=this._banks[0],this._ram1=this._ram1Banks[0],this._ram0Enabled=!1}read(t){return this._handleBankswitch(4095&t),this.peek(t)}peek(t){return(t&=4095)<2048?this._ram0Enabled?t>=1024?this._ram0[t-1024]:0:this._bank0[t]:t<=2559?t>=2304?this._ram1[t-2304]:0:this._banks[7][2047-(4095-t)]}write(t,e){t&=4095,this._handleBankswitch(t),t<1024?this._ram0Enabled?this._ram0[t]=e:super.write(t,e):t<2048?super.write(t,e):t<2303?this._ram1[t-2048]=e:super.write(t,e)}getType(){return ht.CartridgeType.bankswitch_16k_E7}randomize(t){for(let e=0;e<4;e++)for(let n=0;n<this._ram1Banks[e].length;n++)this._ram1Banks[e][n]=t.int(255);for(let e=0;e<this._ram0.length;e++)this._ram0[e]=t.int(255)}_handleBankswitch(t){t<4064||(t<=4070?(this._bank0=this._banks[15&t],this._ram0Enabled=!1):4071===t?this._ram0Enabled=!0:t<=4075&&(this._ram1=this._ram1Banks[t-4072]))}}class Do extends So{constructor(t){if(super(),this._banks=new Array(7),this._ram=new Uint8Array(256),this._savedRam=new Uint8Array(256),this._accessCounter=0,this._accessCounterLimit=0,28672!==t.length&&29696!==t.length)throw new Error(`buffer is not a 28k/29k cartridge image: wrong length ${t.length}`);for(let t=0;t<7;t++)this._banks[t]=new Uint8Array(4096);const e=28672===t.length?0:1024;for(let n=0;n<4096;n++)for(let r=0;r<7;r++)this._banks[r][n]=t[4096*r+n+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[160,193,31,224],[0,128,2,224]]);return e[0]>0||e[1]>0}reset(){this._accessCounter=0,this._accessCounterLimit=0,this._bank=this._banks[0]}getType(){return ht.CartridgeType.bankswitch_FA2}randomize(t){for(let e=0;e<this._ram.length;e++)this._ram[e]=t.int(255)}setBus(t){return this._bus=t,this}read(t){return this.write(4095&t,this._bus.getLastDataBusValue()),this.peek(t)}peek(t){return(t&=4095)>=256&&t<512?this._ram[t-256]:4084===t?this._accessCounter>=this._accessCounterLimit?-65&this._bank[t]:64|this._bank[t]:this._bank[t]}write(t,e){if(t&=4095,this._accessCounter++,!(t<256))return 4084===t?this._handleIo():void(t>=4085&&t<=4091&&(this._bank=this._banks[t-4085]));this._ram[t]=e}_handleIo(){if(!(this._accessCounter<this._accessCounterLimit)){if(1===this._ram[255]){for(let t=0;t<256;t++)this._ram[t]=this._savedRam[t];this._accessCounterLimit=10}else{if(2!==this._ram[255])return;for(let t=0;t<256;t++)this._savedRam[t]=this._ram[t];this._accessCounterLimit=100}this._accessCounter=0,this._ram[255]=0}}}class Mo extends So{constructor(t,e=!0){if(super(),this._supportSC=e,this._bus=null,this._banks=new Array(16),this._ram=new Uint8Array(128),this._hasSC=!1,65536!==t.length)throw new Error(`buffer is not a 64k cartridge image: wrong length ${t.length}`);for(let t=0;t<16;t++)this._banks[t]=new Uint8Array(4096);for(let e=0;e<4096;e++)for(let n=0;n<16;n++)this._banks[n][e]=t[4096*n+e];this.reset()}static matchesBuffer(t){const e=e=>{const n=e.split("").map(t=>t.charCodeAt(0));for(let e=0;e<n.length;e++)if(n[e]!==t[65528+e])return!1;return!0};if(65536!==t.length)return!1;if(e("efef")||e("efsc"))return!0;const n=Eo(t,[[12,224,255],[173,224,255],[12,224,31],[173,224,31]]);for(let t=0;t<4;t++)if(n[t]>0)return!0;return!1}reset(){this._bank=this._banks[15],this._hasSC=!1}getType(){return ht.CartridgeType.bankswitch_64k_EF}randomize(t){for(let e=0;e<this._ram.length;e++)this._ram[e]=t.int(255)}setBus(t){return this._bus=t,this}read(t){return this._access(4095&t,this._bus.getLastDataBusValue()),this.peek(t)}peek(t){return t&=4095,this._hasSC&&t>=128&&t<256?this._ram[t-128]:this._bank[t]}write(t,e){(t&=4095)<128&&this._supportSC&&(this._hasSC=!0),this._access(t,e)}_access(t,e){t<128&&this._hasSC?this._ram[t]=e:t>=4064&&t<=4079&&(this._bank=this._banks[t-4064])}}var Fo="/Users/pestix/git/6502ts/6502.ts/node_modules/thumbulator.ts/lib/native",jo=Object.freeze({__proto__:null,default:{}});function Lo(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var No=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Uo=function(t){return No.exec(t).slice(1)};function zo(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return(e?"/":"")+(t=Lo(Ko(t.split("/"),(function(t){return!!t})),!e).join("/"))||"."}function $o(t){var e=Ho(t),n="/"===Yo(t,-1);return(t=Lo(Ko(t.split("/"),(function(t){return!!t})),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function Ho(t){return"/"===t.charAt(0)}function Wo(){var t=Array.prototype.slice.call(arguments,0);return $o(Ko(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))}function Vo(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=zo(t).substr(1),e=zo(e).substr(1);for(var r=n(t.split("/")),i=n(e.split("/")),s=Math.min(r.length,i.length),a=s,o=0;o<s;o++)if(r[o]!==i[o]){a=o;break}var u=[];for(o=a;o<r.length;o++)u.push("..");return(u=u.concat(i.slice(a))).join("/")}function qo(t){var e=Uo(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function Go(t,e){var n=Uo(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n}function Qo(t){return Uo(t)[3]}var Jo={extname:Qo,basename:Go,dirname:qo,sep:"/",delimiter:":",relative:Vo,join:Wo,isAbsolute:Ho,normalize:$o,resolve:zo};function Ko(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var Yo="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)},Zo=Object.freeze({__proto__:null,resolve:zo,normalize:$o,isAbsolute:Ho,join:Wo,relative:Vo,sep:"/",delimiter:":",dirname:qo,basename:Go,extname:Qo,default:Jo}),Xo=z(jo),tu=z(Zo),eu=U((function(t,e){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){t=void 0!==(t=t||{})?t:{};var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);var i=function(t,e){throw e},s=!1,a=!1,o=!1,u=!1,c=!1;s="object"==typeof window,a="function"==typeof importScripts,u="object"==typeof j&&"object"==typeof j.versions&&"string"==typeof j.versions.node,o=u&&!s&&!a,c=!s&&!o&&!a;var h,l,f,d,p,_="";function g(e){return t.locateFile?t.locateFile(e,_):_+e}o?(_=Fo+"/",h=function(t,e){var n;return(n=Bt(t))||(d||(d=Xo),p||(p=tu),t=p.normalize(t),n=d.readFileSync(t)),e?n:n.toString()},f=function(t){var e=h(t,!0);return e.buffer||(e=new Uint8Array(e)),S(e.buffer),e},j.argv.length>1&&j.argv[1].replace(/\\/g,"/"),j.argv.slice(2),j.on("unhandledRejection",qt),i=function(t){j.exit(t)},t.inspect=function(){return"[Emscripten Module object]"}):c?("undefined"!=typeof read&&(h=function(t){var e=Bt(t);return e?xt(e):read(t)}),f=function(t){var e;return(e=Bt(t))?e:"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(S("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(i=function(t){quit(t)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(s||a)&&(a?_=self.location.href:document.currentScript&&(_=document.currentScript.src),n&&(_=n),_=0!==_.indexOf("blob:")?_.substr(0,_.lastIndexOf("/")+1):"",h=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var n=Bt(t);if(n)return xt(n);throw e}},a&&(f=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}catch(e){var n=Bt(t);if(n)return n;throw e}}),l=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)e(r.response);else{var i=Bt(t);i?e(i.buffer):n()}},r.onerror=n,r.send(null)});var b=t.print||console.log.bind(console),v=t.printErr||console.warn.bind(console);for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);r=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&(i=t.quit),new Array(0);var m,y=0,w=function(t){y=t},A=function(){return y},k=8;t.wasmBinary&&t.wasmBinary,t.noExitRuntime&&(m=t.noExitRuntime);var C=!1;function S(t,e){t||qt("Assertion failed: "+e)}function E(e){var n=t["_"+e];return S(n,"Cannot call unknown function "+e+", make sure it is exported"),n}function x(t,e,n,r,i){var s={string:function(t){var e=0;if(null!=t&&0!==t){var n=1+(t.length<<2);F(t,e=Mt(n),n)}return e},array:function(t){var e=Mt(t.length);return L(t,e),e}},a=E(t),o=[],u=0;if(r)for(var c=0;c<r.length;c++){var h=s[n[c]];h?(0===u&&(u=jt()),o[c]=h(r[c])):o[c]=r[c]}var l=a.apply(null,o);return l=function(t){return"string"===e?D(t):"boolean"===e?Boolean(t):t}(l),0!==u&&Ft(u),l}var T,I,B,O,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function P(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.subarray&&R)return R.decode(t.subarray(e,i));for(var s="";e<i;){var a=t[e++];if(128&a){var o=63&t[e++];if(192!=(224&a)){var u=63&t[e++];if((a=224==(240&a)?(15&a)<<12|o<<6|u:(7&a)<<18|o<<12|u<<6|63&t[e++])<65536)s+=String.fromCharCode(a);else{var c=a-65536;s+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else s+=String.fromCharCode((31&a)<<6|o)}else s+=String.fromCharCode(a)}return s}function D(t,e){return t?P(B,t,e):""}function M(t,e,n,r){if(!(r>0))return 0;for(var i=n,s=n+r-1,a=0;a<t.length;++a){var o=t.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++a)),o<=127){if(n>=s)break;e[n++]=o}else if(o<=2047){if(n+1>=s)break;e[n++]=192|o>>6,e[n++]=128|63&o}else if(o<=65535){if(n+2>=s)break;e[n++]=224|o>>12,e[n++]=128|o>>6&63,e[n++]=128|63&o}else{if(n+3>=s)break;e[n++]=240|o>>18,e[n++]=128|o>>12&63,e[n++]=128|o>>6&63,e[n++]=128|63&o}}return e[n]=0,n-i}function F(t,e,n){return M(t,B,e,n)}function L(t,e){I.set(t,e)}function N(e){T=e,t.HEAP8=I=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=O=new Int32Array(e),t.HEAPU8=B=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var U=13920,z=3648,$=t.TOTAL_MEMORY||16777216;function H(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?t.dynCall_v(r):t.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}$=(T=t.buffer?t.buffer:new ArrayBuffer($)).byteLength,N(T),O[z>>2]=U;var W=[],V=[],q=[],G=[];function Q(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)Z(t.preRun.shift());H(W)}function J(){H(V)}function K(){H(q)}function Y(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)X(t.postRun.shift());H(G)}function Z(t){W.unshift(t)}function X(t){G.unshift(t)}var tt=0,et=null;function nt(e){tt++,t.monitorRunDependencies&&t.monitorRunDependencies(tt)}function rt(e){if(tt--,t.monitorRunDependencies&&t.monitorRunDependencies(tt),0==tt&&et){var n=et;et=null,n()}}t.preloadedImages={},t.preloadedAudios={};var it=null,st="data:application/octet-stream;base64,";function at(t){return String.prototype.startsWith?t.startsWith(st):0===t.indexOf(st)}var ot=[function(e){return t.trapOnInstructionFetch(e)},function(e){return t.busRead32(e)},function(e,n){t.busWrite32(e,n)},function(e){return t.busRead16(e)},function(e,n){return t.trapOnBx32(e,n)},function(e,n){t.busWrite16(e,n)}];function ut(t,e,n){return ot[t](e,n)}function ct(t,e){return ot[t](e)}it="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAHkNAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHRodW1idWxhdG9yAHsgcmV0dXJuIE1vZHVsZS5idXNSZWFkMTYoJDApOyB9AHsgcmV0dXJuIE1vZHVsZS5idXNSZWFkMzIoJDApOyB9AHsgTW9kdWxlLmJ1c1dyaXRlMTYoJDAsICQxKTsgfQB7IE1vZHVsZS5idXNXcml0ZTMyKCQwLCAkMSk7IH0AcGMgaGFzIGxzYml0IHNldCAweCUwOFgKAHsgcmV0dXJuIE1vZHVsZS50cmFwT25JbnN0cnVjdGlvbkZldGNoKCQwKTsgfQAtLS0gMHglMDhYOiAweCUwNFggAGFkYyByJXUsciV1CgBhZGRzIHIldSxyJXUsIzB4JVgKAGFkZHMgciV1LCMweCUwMlgKAGFkZHMgciV1LHIldSxyJXUKAGFkZCByJXUsciV1CgBhZGQgcGMsLi4uIHByb2R1Y2VkIGFuIGFybSBhZGRyZXNzIDB4JTA4WCAweCUwOFgKAGFkZCByJXUsUEMsIzB4JTAyWAoAYWRkIHIldSxTUCwjMHglMDJYCgBhZGQgU1AsIzB4JTAyWAoAYW5kcyByJXUsciV1CgBhc3JzIHIldSxyJXUsIzB4JVgKAGFzcnMgciV1LHIldQoAYmVxIDB4JTA4WAoAYm5lIDB4JTA4WAoAYmNzIDB4JTA4WAoAYmNjIDB4JTA4WAoAYm1pIDB4JTA4WAoAYnBsIDB4JTA4WAoAYnZzIDB4JTA4WAoAYnZjIDB4JTA4WAoAYmhpIDB4JTA4WAoAYmxzIDB4JTA4WAoAYmdlIDB4JTA4WAoAYmx0IDB4JTA4WAoAYmd0IDB4JTA4WAoAYmxlIDB4JTA4WAoAQiAweCUwOFgKAGJpY3MgciV1LHIldQoAYmtwdCAweCUwMlgKAGJsIDB4JTA4WAoAYmx4IHIldQoAY2Fubm90IGJyYW5jaCB0byBhcm0gMHglMDhYIDB4JTA0WAoAYnggciV1CgB7IHJldHVybiBNb2R1bGUudHJhcE9uQngzMigkMCwgJDEpOyB9AGNtbnMgciV1LHIldQoAY21wIHIldSwjMHglMDJYCgBjbXBzIHIldSxyJXUKAGNwcyBUT0RPCgBjcHkgciV1LHIldQoAZW9ycyByJXUsciV1CgBsZG1pYSByJXUhLHsAciV1AH0KAGxkciByJXUsW3IldSwjMHglWF0KAGxkciByJXUsW3IldSxyJXVdCgBsZHIgciV1LFtQQysjMHglWF0KAGxkciByJXUsW1NQKyMweCVYXQoAbGRyYiByJXUsW3IldSwjMHglWF0KAGxkcmIgciV1LFtyJXUsciV1XQoAbGRyaCByJXUsW3IldSwjMHglWF0KAGxkcmggciV1LFtyJXUsciV1XQoAbGRyc2IgciV1LFtyJXUsciV1XQoAbGRyc2ggciV1LFtyJXUsciV1XQoAbHNscyByJXUsciV1LCMweCVYCgBsc2xzIHIldSxyJXUKAGxzcnMgciV1LHIldSwjMHglWAoAbHNycyByJXUsciV1CgBtb3ZzIHIldSwjMHglMDJYCgBtb3ZzIHIldSxyJXUKAG1vdiByJXUsciV1CgBtdWxzIHIldSxyJXUKAG12bnMgciV1LHIldQoAbmVncyByJXUsciV1CgBvcnJzIHIldSxyJXUKAHBvcCB7AHBjAHBvcCB7cmN9IHdpdGggYW4gQVJNIGFkZHJlc3MgcGMgMHglMDhYIHBvcHBlZCAweCUwOFgKAHB1c2ggewBscgBwdXNoIHtscn0gd2l0aCBhbiBBUk0gYWRkcmVzcyBwYyAweCUwOFggcG9wcGVkIDB4JTA4WAoAcmV2IHIldSxyJXUKAHJldjE2IHIldSxyJXUKAHJldnNoIHIldSxyJXUKAHJvcnMgciV1LHIldQoAc2JjIHIldSxyJXUKAHNldGVuZCBub3QgaW1wbGVtZW50ZWQKAHN0bWlhIHIldSEsewBzdHIgciV1LFtyJXUsIzB4JVhdCgBzdHIgciV1LFtyJXUsciV1XQoAc3RyIHIldSxbU1AsIzB4JVhdCgBzdHJiIHIldSxbciV1LCMweCVYXQoAc3RyYiByJXUsW3IldSxyJXVdCgBzdHJoIHIldSxbciV1LCMweCVYXQoAc3RyaCByJXUsW3IldSxyJXVdCgBzdWJzIHIldSxyJXUsIzB4JVgKAHN1YnMgciV1LCMweCUwMlgKAHN1YnMgciV1LHIldSxyJXUKAHN1YiBTUCwjMHglMDJYCgBzd2kgMHglMDJYCgAKCnN3aSAweCUwMlgKAHN4dGIgciV1LHIldQoAc3h0aCByJXUsciV1CgB0c3QgciV1LHIldQoAdXh0YiByJXUsciV1CgB1eHRoIHIldSxyJXUKAGludmFsaWQgaW5zdHJ1Y3Rpb24gMHglMDhYIDB4JTA0WAoALSsgICAwWDB4AChudWxsKQAtMFgrMFggMFgtMHgrMHggMHgAaW5mAElORgBuYW4ATkFOAC4=";var ht=3664;function lt(t){return t}function ft(t){return t.replace(/\b__Z[\w\d_]+/g,(function(t){return t==t?t:t+" ["+t+"]"}))}function dt(){var t=new Error;if(!t.stack){try{throw new Error(0)}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()}function pt(){var e=dt();return t.extraStackTrace&&(e+="\n"+t.extraStackTrace()),ft(e)}var _t={buffers:[null,[],[]],printChar:function(t,e){var n=_t.buffers[t];0===e||10===e?((1===t?b:v)(P(n,0)),n.length=0):n.push(e)},varargs:0,get:function(t){return _t.varargs+=4,O[_t.varargs-4>>2]},getStr:function(){return D(_t.get())},get64:function(){var t=_t.get();return _t.get(),t},getZero:function(){_t.get()}};function gt(t,e){_t.varargs=e;try{return _t.getStreamFromFD(),_t.get(),_t.get(),_t.get(),_t.get(),0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||qt(t),-t.errno}}function bt(t,e){_t.varargs=e;try{return _t.getStreamFromFD(),0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||qt(t),-t.errno}}function vt(){var e=t._fflush;e&&e(0);var n=_t.buffers;n[1].length&&_t.printChar(1,10),n[2].length&&_t.printChar(2,10)}function mt(t,e,n,r){try{for(var i=0,s=0;s<n;s++){for(var a=O[e+8*s>>2],o=O[e+(8*s+4)>>2],u=0;u<o;u++)_t.printChar(t,B[a+u]);i+=o}return O[r>>2]=i,0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||qt(t),-t.errno}}function yt(){return mt.apply(null,arguments)}function wt(){return I.length}function At(t){Vt(t)}function kt(t,e,n){B.set(B.subarray(e,e+n),t)}function Ct(e){return t.___errno_location&&(O[t.___errno_location()>>2]=e),e}function St(t){qt("OOM")}function Et(t){St()}function xt(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r>255&&(r&=255),e.push(String.fromCharCode(r))}return e.join("")}var Tt="function"==typeof atob?atob:function(t){var e,n,r,i,s,a,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=o.indexOf(t.charAt(c++))<<2|(i=o.indexOf(t.charAt(c++)))>>4,n=(15&i)<<4|(s=o.indexOf(t.charAt(c++)))>>2,r=(3&s)<<6|(a=o.indexOf(t.charAt(c++))),u+=String.fromCharCode(e),64!==s&&(u+=String.fromCharCode(n)),64!==a&&(u+=String.fromCharCode(r))}while(c<t.length);return u};function It(t){if("boolean"==typeof o&&o){var e;try{e=ye.from(t,"base64")}catch(n){e=new ye(t,"base64")}return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}try{for(var n=Tt(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}catch(t){throw new Error("Converting base64 string to bytes failed.")}}function Bt(t){if(at(t))return It(t.slice(st.length))}var Ot,Rt={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Float32Array:Float32Array,Float64Array:Float64Array},Pt={a:qt,b:w,c:A,d:Ct,e:gt,f:bt,g:yt,h:ct,i:ut,j:wt,k:kt,l:Et,m:At,n:mt,o:St,p:lt,q:ft,r:vt,s:dt,t:pt,u:ht,v:z},Dt=function(t,e,n){"use asm";var r=new t.Int8Array(n),i=new t.Int16Array(n),s=new t.Int32Array(n),a=new t.Uint8Array(n),o=new t.Uint16Array(n),u=new t.Float32Array(n),c=new t.Float64Array(n),h=e.u|0,l=e.v|0,f=0,d=0,p=0,_=0,g=0,b=0,v=0,m=0.0,y=t.Math.imul,w=t.Math.clz32,A=e.a,k=e.b,C=e.c,S=e.d,E=e.e,x=e.f,T=e.g,I=e.h,B=e.i,O=e.j,R=e.k,P=e.l,D=e.m,M=e.n,F=e.o,j=e.p,L=e.q,N=e.r,U=e.s,z=e.t,$=3680,H=13920,W=0.0;function V(t){t=t|0;var e=0;e=$;$=$+t|0;$=$+15&-16;return e|0}function q(){return $|0}function G(t){t=t|0;$=t}function Q(t,e){t=t|0;e=e|0;$=t;H=e}function J(t){t=t|0;s[712]=t;return}function K(){return 888}function Y(t){t=t|0;var e=0,n=0,r=0,i=0,a=0;s[713]=0;if(!t){i=0;return i|0}e=0;n=0;while(1){a=rt()|0;r=(s[713]|0)!=0;n=(a|0)==0?n:a;e=e+1|0;if(r|(a|0)==0^1)break;if(e>>>0>=t>>>0){e=0;i=6;break}}if((i|0)==6)return e|0;a=r?10:n;return a|0}function Z(){s[713]=1;return}function X(t){t=t|0;r[3440]=t;return}function tt(t){t=t|0;var e=0,n=0;n=$;$=$+16|0;e=s[2784+((t&15)<<2)>>2]|0;if((t&15|0)!=15){$=n;return e|0}if(e&1|0){t=s[160]|0;s[n>>2]=e;mt(t,1028,n)|0}e=e&-2;$=n;return e|0}function et(t,e){t=t|0;e=e|0;s[2784+((t&15)<<2)>>2]=(t&15|0)==15?e&-2:e;return}function nt(){s[714]=4;s[715]=0;s[716]=0;s[717]=0;s[718]=0;return 0}function rt(){var t=0,e=0,n=0,i=0,a=0,o=0,u=0,c=0,h=0,l=0,f=0,d=0,p=0;p=$;$=$+1232|0;e=s[711]|0;if(e&1|0){d=s[160]|0;s[p>>2]=e;mt(d,1028,p)|0}t=s[712]|0;if(!t){t=I(0,(e&-2)+-2|0)|0;if(t|0){d=t;$=p;return d|0}}else if(((e&-2)+-2|0)==(t|0)){d=20;$=p;return d|0}if((e&-2)>>>0>4026531839&(s[717]|0)!=0){s[717]=0;d=s[709]|0;s[696]=I(1,d|0)|0;s[697]=I(1,d+4|0)|0;s[698]=I(1,d+8|0)|0;s[699]=I(1,d+12|0)|0;s[708]=I(1,d+16|0)|0;s[710]=I(1,d+20|0)|0;n=I(1,d+24|0)|0;s[718]=I(1,d+28|0)|0;s[709]=d+32}else n=e&-2;t=s[714]|0;do{if(t&1){e=s[716]|0;if(!e){s[716]=s[715];s[714]=t|65536;t=t|65536;break}else{s[716]=e+-1;break}}}while(0);if((t&3|0)==3?(t&65536|0)!=0&(s[717]|0)==0:0){i=s[709]|0;e=s[718]|0;t:do{if((i+-4&-268435456|0)==-536870912)switch((i+536813548|0)>>>2|i+536813548<<30|0){case 0:{s[714]=e&65543;if((t&1|0)!=0|(e&1|0)==0)break t;s[716]=s[715];break t}case 1:{s[715]=e&16777215;break t}case 2:{s[716]=e&16777215;break t}case 3:break t;default:break t}else B(2,i+-4|0,e|0)|0}while(0);t:do{if((i+-8&-268435456|0)==-536870912)switch((i+536813544|0)>>>2|i+536813544<<30|0){case 0:{d=s[714]|0;s[714]=n&65543;if((n&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=n&16777215;break t}case 2:{s[716]=n&16777215;break t}case 3:break t;default:break t}else B(2,i+-8|0,n|0)|0}while(0);t=s[710]|0;t:do{if((i+-12&-268435456|0)==-536870912)switch((i+536813540|0)>>>2|i+536813540<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else B(2,i+-12|0,t|0)|0}while(0);t=s[708]|0;t:do{if((i+-16&-268435456|0)==-536870912)switch((i+536813536|0)>>>2|i+536813536<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else B(2,i+-16|0,t|0)|0}while(0);t=s[699]|0;t:do{if((i+-20&-268435456|0)==-536870912)switch((i+536813532|0)>>>2|i+536813532<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else B(2,i+-20|0,t|0)|0}while(0);t=s[698]|0;t:do{if((i+-24&-268435456|0)==-536870912)switch((i+536813528|0)>>>2|i+536813528<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else B(2,i+-24|0,t|0)|0}while(0);t=s[697]|0;t:do{if((i+-28&-268435456|0)==-536870912)switch((i+536813524|0)>>>2|i+536813524<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else B(2,i+-28|0,t|0)|0}while(0);t=s[696]|0;t:do{if((i+-32&-268435456|0)==-536870912)switch((i+536813520|0)>>>2|i+536813520<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}else B(2,i+-32|0,t|0)|0}while(0);s[709]=i+-32;n=(I(1,60)|0)+2|0;s[710]=-7;s[717]=1}a=n+-2|0;d=I(3,a|0)|0;f=n+2|0;s[711]=f&-2;if(r[3440]|0){l=s[160]|0;s[p+8>>2]=a;s[p+8+4>>2]=d;mt(l,1099,p+8|0)|0}if((d&65472|0)==16704){if(r[3440]|0){f=s[160]|0;s[p+16>>2]=d&7;s[p+16+4>>2]=d>>>3&7;mt(f,1119,p+16|0)|0}e=s[2784+((d&7)<<2)>>2]|0;n=s[2784+((d>>>3&7)<<2)>>2]|0;f=s[718]|0;s[2784+((d&7)<<2)>>2]=n+e+(f>>>29&1);t=(n+e+(f>>>29&1)|0)<0?f|-2147483648:f&2147483647;t=(n+e+(f>>>29&1)|0)==0?t|1073741824:t&-1073741825;s[718]=t;if(!(t&536870912)){d=((n>>>31)+(e>>>31)+(((n&2147483647)+(e&2147483647)|0)>>>31)&2|0)==0?t&-536870913:t|536870912;s[718]=(((n&2147483647)+(e&2147483647)|0)>>>31|0)==(((n>>>31)+(e>>>31)+(((n&2147483647)+(e&2147483647)|0)>>>31)|0)>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}else{f=(n>>>31)+(e>>>31)+(((n&2147483647)+(e&2147483647)+1|0)>>>31)|0;d=(f&2|0)==0?t&-536870913:t|536870912;s[718]=(((n&2147483647)+(e&2147483647)+1|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}}if((d&65024|0)==7168?d>>>6&7|0:0){if(r[3440]|0){f=s[160]|0;s[p+24>>2]=d&7;s[p+24+4>>2]=d>>>3&7;s[p+24+8>>2]=d>>>6&7;mt(f,1132,p+24|0)|0}l=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=l+(d>>>6&7);f=s[718]|0;f=(l+(d>>>6&7)|0)<0?f|-2147483648:f&2147483647;f=(l+(d>>>6&7)|0)==0?f|1073741824:f&-1073741825;f=((((l&2147483647)+(d>>>6&7)|0)>>>31)+(l>>>31)&2|0)==0?f&-536870913:f|536870912;s[718]=(((l&2147483647)+(d>>>6&7)|0)>>>31|0)==(((((l&2147483647)+(d>>>6&7)|0)>>>31)+(l>>>31)|0)>>>1|0)?f&-268435457:f|268435456;d=0;$=p;return d|0}if((d&63488|0)==12288){if(r[3440]|0){f=s[160]|0;s[p+40>>2]=d>>>8&7;s[p+40+4>>2]=d&255;mt(f,1152,p+40|0)|0}l=s[2784+((d>>>8&7)<<2)>>2]|0;s[2784+((d>>>8&7)<<2)>>2]=l+(d&255);f=s[718]|0;f=(l+(d&255)|0)<0?f|-2147483648:f&2147483647;f=(l+(d&255)|0)==0?f|1073741824:f&-1073741825;f=((((l&2147483647)+(d&255)|0)>>>31)+(l>>>31)&2|0)==0?f&-536870913:f|536870912;s[718]=(((l&2147483647)+(d&255)|0)>>>31|0)==(((((l&2147483647)+(d&255)|0)>>>31)+(l>>>31)|0)>>>1|0)?f&-268435457:f|268435456;d=0;$=p;return d|0}if((d&65024|0)==6144){if(r[3440]|0){f=s[160]|0;s[p+48>>2]=d&7;s[p+48+4>>2]=d>>>3&7;s[p+48+8>>2]=d>>>6&7;mt(f,1170,p+48|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;l=s[2784+((d>>>6&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=l+f;d=s[718]|0;d=(l+f|0)<0?d|-2147483648:d&2147483647;d=(l+f|0)==0?d|1073741824:d&-1073741825;d=((l>>>31)+(f>>>31)+(((l&2147483647)+(f&2147483647)|0)>>>31)&2|0)==0?d&-536870913:d|536870912;s[718]=(((l&2147483647)+(f&2147483647)|0)>>>31|0)==(((l>>>31)+(f>>>31)+(((l&2147483647)+(f&2147483647)|0)>>>31)|0)>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}if((d&65280|0)==17408){if(r[3440]|0){l=s[160]|0;s[p+64>>2]=d>>>4&8|d&7;s[p+64+4>>2]=d>>>3&15;mt(l,1188,p+64|0)|0}t=s[2784+((d>>>4&8|d&7)<<2)>>2]|0;if((d>>>4&8|d&7|0)==15){if(t&1|0){l=s[160]|0;s[p+72>>2]=t;mt(l,1028,p+72|0)|0}t=t&-2}e=s[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(e&1|0){l=s[160]|0;s[p+80>>2]=e;mt(l,1028,p+80|0)|0}e=e&-2}t=e+t|0;if((d>>>4&8|d&7|0)!=15){s[2784+((d>>>4&8|d&7)<<2)>>2]=t;d=0;$=p;return d|0}if(!(t&1)){d=s[160]|0;s[p+88>>2]=f;s[p+88+4>>2]=t;mt(d,1201,p+88|0)|0;D(1)}s[711]=t+2&-2;d=0;$=p;return d|0}e=d&63488;switch(e<<16>>16){case-24576:{if(r[3440]|0){f=s[160]|0;s[p+96>>2]=d>>>8&7;s[p+96+4>>2]=d<<2&1020;mt(f,1251,p+96|0)|0}t=s[711]|0;if(t&1|0){f=s[160]|0;s[p+104>>2]=t;mt(f,1028,p+104|0)|0}s[2784+((d>>>8&7)<<2)>>2]=(t&-4)+(d<<2&1020);d=0;$=p;return d|0}case-22528:{if(r[3440]|0){f=s[160]|0;s[p+112>>2]=d>>>8&7;s[p+112+4>>2]=d<<2&1020;mt(f,1271,p+112|0)|0}s[2784+((d>>>8&7)<<2)>>2]=(s[709]|0)+(d<<2&1020);d=0;$=p;return d|0}default:{if((d&65408|0)==45056){if(r[3440]|0){f=s[160]|0;s[p+120>>2]=d<<2&508;mt(f,1291,p+120|0)|0}s[709]=(s[709]|0)+(d<<2&508);d=0;$=p;return d|0}if((d&65472|0)==16384){if(r[3440]|0){f=s[160]|0;s[p+128>>2]=d&7;s[p+128+4>>2]=d>>>3&7;mt(f,1307,p+128|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]&s[2784+((d&7)<<2)>>2];s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}if((d&63488|0)==4096){if(r[3440]|0){f=s[160]|0;s[p+136>>2]=d&7;s[p+136+4>>2]=d>>>3&7;s[p+136+8>>2]=d>>>6&31;mt(f,1321,p+136|0)|0}e=s[2784+((d>>>3&7)<<2)>>2]|0;do{if(!(d>>>6&31)){t=s[718]|0;if((e|0)<0){s[718]=t|536870912;s[2784+((d&7)<<2)>>2]=-1;t=t|536870912;o=141;break}else{s[718]=t&-536870913;s[2784+((d&7)<<2)>>2]=0;t=t&1610612735;o=143;break}}else{t=s[718]|0;t=(e&1<<(d>>>6&31)+-1|0)==0?t&-536870913:t|536870912;s[718]=t;e=((e|0)<0?-1<<32-(d>>>6&31):0)|e>>>(d>>>6&31);s[2784+((d&7)<<2)>>2]=e;if((e|0)>=0)if(!e){t=t&1073741823;o=143}else t=t&1073741823;else o=141}}while(0);if((o|0)==141)t=t&1073741823|-2147483648;else if((o|0)==143)t=t|1073741824;s[718]=t;d=0;$=p;return d|0}if((d&65472|0)==16640){if(r[3440]|0){f=s[160]|0;s[p+152>>2]=d&7;s[p+152+4>>2]=d>>>3&7;mt(f,1341,p+152|0)|0}e=s[2784+((d&7)<<2)>>2]|0;t=s[2784+((d>>>3&7)<<2)>>2]&255;do{if(t){if(t>>>0<32){o=s[718]|0;o=(1<<t+-1&e|0)==0?o&-536870913:o|536870912;s[718]=o;t=((e|0)<0?-1<<32-t:0)|e>>>t;e=o;o=155;break}t=s[718]|0;if((e|0)<0){s[718]=t|536870912;s[2784+((d&7)<<2)>>2]=-1;t=t|-1610612736;o=156;break}else{s[718]=t&-536870913;s[2784+((d&7)<<2)>>2]=0;t=t&536870911;o=158;break}}else{t=e;e=s[718]|0;o=155}}while(0);do{if((o|0)==155){s[2784+((d&7)<<2)>>2]=t;if((t|0)<0){t=e|-2147483648;o=156;break}if(!t){t=e&2147483647;o=158}else t=e&1073741823}}while(0);if((o|0)==156)t=t&-1073741825;else if((o|0)==158)t=t|1073741824;s[718]=t;d=0;$=p;return d|0}t:do{if((d&61440|0)==53248){i=(((d&128|0)==0?d&255:d|-256)<<1)+f|0;do{switch(d>>>8&15){case 0:{if(r[3440]|0){d=s[160]|0;s[p+160>>2]=i+-1;mt(d,1355,p+160|0)|0}if(!(s[718]&1073741824)){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 1:{if(r[3440]|0){d=s[160]|0;s[p+168>>2]=i+-1;mt(d,1367,p+168|0)|0}if(s[718]&1073741824|0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 2:{if(r[3440]|0){d=s[160]|0;s[p+176>>2]=i+-1;mt(d,1379,p+176|0)|0}if(!(s[718]&536870912)){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 3:{if(r[3440]|0){d=s[160]|0;s[p+184>>2]=i+-1;mt(d,1391,p+184|0)|0}if(s[718]&536870912|0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 4:{if(r[3440]|0){d=s[160]|0;s[p+192>>2]=i+-1;mt(d,1403,p+192|0)|0}if((s[718]|0)>=0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 5:{if(r[3440]|0){d=s[160]|0;s[p+200>>2]=i+-1;mt(d,1415,p+200|0)|0}if((s[718]|0)<0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 6:{if(r[3440]|0){d=s[160]|0;s[p+208>>2]=i+-1;mt(d,1427,p+208|0)|0}if(!(s[718]&268435456)){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 7:{if(r[3440]|0){d=s[160]|0;s[p+216>>2]=i+-1;mt(d,1439,p+216|0)|0}if(s[718]&268435456|0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 8:{if(r[3440]|0){d=s[160]|0;s[p+224>>2]=i+-1;mt(d,1451,p+224|0)|0}if((s[718]&1610612736|0)!=536870912){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 9:{if(r[3440]|0){d=s[160]|0;s[p+232>>2]=i+-1;mt(d,1463,p+232|0)|0}if((s[718]&1610612736|0)==536870912){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 10:{if(r[3440]|0){d=s[160]|0;s[p+240>>2]=i+-1;mt(d,1475,p+240|0)|0}t=s[718]&-1879048192;e:do{if((t|0)<0){switch(t|0){case-1879048192:break e;default:t=0}$=p;return t|0}else{switch(t|0){case 0:break e;default:t=0}$=p;return t|0}}while(0);s[711]=i+2&-2;d=0;$=p;return d|0}case 11:{if(r[3440]|0){d=s[160]|0;s[p+248>>2]=i+-1;mt(d,1487,p+248|0)|0}t=s[718]&-1879048192;e:do{if((t|0)<268435456){switch(t|0){case-2147483648:break e;default:t=0}$=p;return t|0}else{switch(t|0){case 268435456:break e;default:t=0}$=p;return t|0}}while(0);s[711]=i+2&-2;d=0;$=p;return d|0}case 12:{if(r[3440]|0){d=s[160]|0;s[p+256>>2]=i+-1;mt(d,1499,p+256|0)|0}d=s[718]|0;if(d&1073741824|0?1:(((d&-1879048192|0)==0?(d&-1879048192|0)==-1879048192?2:1:(d&-1879048192|0)==-1879048192&1)|0)==0){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}case 13:{if(r[3440]|0){d=s[160]|0;s[p+264>>2]=i+-1;mt(d,1511,p+264|0)|0}d=s[718]|0;if((((d&-1879048192|0)==-2147483648?(d&-1879048192|0)==268435456?2:1:(d&-1879048192|0)==268435456&1)|0)==(0-(d>>>30&1)|0)){d=0;$=p;return d|0}s[711]=i+2&-2;d=0;$=p;return d|0}default:break t}}while(0)}}while(0);if((d&63488|0)==57344){t=(((d&1024|0)==0?d&2047:d|-2048)<<1)+f|0;if(r[3440]|0){d=s[160]|0;s[p+272>>2]=t+-1;mt(d,1523,p+272|0)|0}s[711]=t+2&-2;d=0;$=p;return d|0}if((d&65472|0)==17280){if(r[3440]|0){f=s[160]|0;s[p+280>>2]=d&7;s[p+280+4>>2]=d>>>3&7;mt(f,1533,p+280|0)|0}f=s[2784+((d&7)<<2)>>2]&~s[2784+((d>>>3&7)<<2)>>2];s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}if((d&65280|0)==48640){f=s[160]|0;s[p+288>>2]=d&255;mt(f,1547,p+288|0)|0;d=1;$=p;return d|0}t:do{if((d&57344|0)==57344){if((d&6144)<4096){switch(d&6144){case 2048:break;default:break t}t=(s[710]|0)+(d<<1&4094)&-4|2;if(r[3440]|0){d=s[160]|0;s[p+304>>2]=t+-3;mt(d,1560,p+304|0)|0}s[710]=n|1;s[711]=t;d=0;$=p;return d|0}switch(d&6144){case 4096:{if(r[3440]|0)jt(10,s[160]|0)|0;s[710]=(((d&1024|0)==0?d&2047:d|1046528)<<12)+f;d=0;$=p;return d|0}case 6144:{t=(s[710]|0)+(d<<1&4094)|0;if(r[3440]|0){d=s[160]|0;s[p+296>>2]=t+-1;mt(d,1560,p+296|0)|0}s[710]=n|1;s[711]=t+2&-2;d=0;$=p;return d|0}default:break t}}}while(0);switch((d&65415)<<16>>16){case 18304:{if(r[3440]|0){l=s[160]|0;s[p+312>>2]=d>>>3&15;mt(l,1571,p+312|0)|0}t=s[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){l=s[160]|0;s[p+320>>2]=t;mt(l,1028,p+320|0)|0}t=t&-2}t=t+2|0;if(!(t&1)){l=s[160]|0;s[p+328>>2]=f;s[p+328+4>>2]=d;mt(l,1580,p+328|0)|0;d=2;$=p;return d|0}else{s[710]=n|1;s[711]=t&-2;d=0;$=p;return d|0}}case 18176:{if(r[3440]|0){f=s[160]|0;s[p+336>>2]=d>>>3&15;mt(f,1616,p+336|0)|0}t=s[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){d=s[160]|0;s[p+344>>2]=t;mt(d,1028,p+344|0)|0}t=t&-2}t=t+2|0;if(t&1|0){s[711]=t&-2;d=0;$=p;return d|0}t=B(4,a|0,t|0)|0;if(t|0){d=t;$=p;return d|0}s[711]=(s[710]|0)+2&-2;d=0;$=p;return d|0}default:{if((d&65472|0)==17088){if(r[3440]|0){f=s[160]|0;s[p+352>>2]=d&7;s[p+352+4>>2]=d>>>3&7;mt(f,1662,p+352|0)|0}f=s[2784+((d&7)<<2)>>2]|0;l=s[2784+((d>>>3&7)<<2)>>2]|0;d=s[718]|0;d=(l+f|0)<0?d|-2147483648:d&2147483647;d=(l+f|0)==0?d|1073741824:d&-1073741825;d=((l>>>31)+(f>>>31)+(((l&2147483647)+(f&2147483647)|0)>>>31)&2|0)==0?d&-536870913:d|536870912;s[718]=(((l&2147483647)+(f&2147483647)|0)>>>31|0)==(((l>>>31)+(f>>>31)+(((l&2147483647)+(f&2147483647)|0)>>>31)|0)>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}if((d&63488|0)==10240){if(r[3440]|0){f=s[160]|0;s[p+360>>2]=d>>>8&7;s[p+360+4>>2]=d&255;mt(f,1676,p+360|0)|0}h=s[2784+((d>>>8&7)<<2)>>2]|0;f=s[718]|0;f=(h-(d&255)|0)<0?f|-2147483648:f&2147483647;f=(h-(d&255)|0)==0?f|1073741824:f&-1073741825;l=(h>>>31)+1+((-2147483648-(d&255)+(h&2147483647)|0)>>>31)|0;f=(l&2|0)==0?f&-536870913:f|536870912;s[718]=((-2147483648-(d&255)+(h&2147483647)|0)>>>31|0)==(l>>>1&1|0)?f&-268435457:f|268435456;d=0;$=p;return d|0}if((d&65472|0)==17024){if(r[3440]|0){f=s[160]|0;s[p+368>>2]=d&7;s[p+368+4>>2]=d>>>3&7;mt(f,1693,p+368|0)|0}h=s[2784+((d&7)<<2)>>2]|0;l=s[2784+((d>>>3&7)<<2)>>2]|0;d=s[718]|0;d=(h-l|0)<0?d|-2147483648:d&2147483647;d=(h-l|0)==0?d|1073741824:d&-1073741825;f=(~l>>>31)+(h>>>31)+(((h&2147483647)+1+(~l&2147483647)|0)>>>31)|0;d=(f&2|0)==0?d&-536870913:d|536870912;s[718]=(((h&2147483647)+1+(~l&2147483647)|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}if((d&65280|0)==17664){if(r[3440]|0){f=s[160]|0;s[p+376>>2]=d>>>4&8|d&7;s[p+376+4>>2]=d>>>3&15;mt(f,1693,p+376|0)|0}t=s[2784+((d>>>4&8|d&7)<<2)>>2]|0;if((d>>>4&8|d&7|0)==15){if(t&1|0){f=s[160]|0;s[p+384>>2]=t;mt(f,1028,p+384|0)|0}e=t&-2}else e=t;t=s[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){d=s[160]|0;s[p+392>>2]=t;mt(d,1028,p+392|0)|0}t=t&-2}f=e-t|0;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;d=(f|0)==0?d|1073741824:d&-1073741825;f=~t;l=((e&2147483647)+1+(f&2147483647)|0)>>>31;f=(f>>>31)+(e>>>31)+l|0;d=(f&2|0)==0?d&-536870913:d|536870912;s[718]=(l|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}if((d&65512|0)==46688&(r[3440]|0)!=0)ft(1707,9,1,s[160]|0)|0;t=d&65472;switch(t<<16>>16){case 17920:{if(r[3440]|0){f=s[160]|0;s[p+400>>2]=d&7;s[p+400+4>>2]=d>>>3&7;mt(f,1717,p+400|0)|0}s[2784+((d&7)<<2)>>2]=s[2784+((d>>>3&7)<<2)>>2];d=0;$=p;return d|0}case 16448:{if(r[3440]|0){f=s[160]|0;s[p+408>>2]=d&7;s[p+408+4>>2]=d>>>3&7;mt(f,1730,p+408|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]^s[2784+((d&7)<<2)>>2];s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}default:{t:do{if(e<<16>>16<26624){switch(e<<16>>16){case-14336:break;default:break t}if(!(r[3440]|0))e=d&1;else{e=s[160]|0;s[p+416>>2]=d>>>8&7;mt(e,1744,p+416|0)|0;if(!(d&1))t=0;else{s[p+424>>2]=0;mt(e,1757,p+424|0)|0;t=1}if(d&2){if(t|0)jt(44,e)|0;s[p+1168>>2]=1;mt(e,1757,p+1168|0)|0;t=t+1|0}if(d&4){if(t|0)jt(44,e)|0;s[p+1176>>2]=2;mt(e,1757,p+1176|0)|0;t=t+1|0}if(d&8){if(t|0)jt(44,e)|0;s[p+1184>>2]=3;mt(e,1757,p+1184|0)|0;t=t+1|0}if(d&16){if(t|0)jt(44,e)|0;s[p+1192>>2]=4;mt(e,1757,p+1192|0)|0;t=t+1|0}if(d&32){if(t|0)jt(44,e)|0;s[p+1200>>2]=5;mt(e,1757,p+1200|0)|0;t=t+1|0}if(d&64){if(t|0)jt(44,e)|0;s[p+1208>>2]=6;mt(e,1757,p+1208|0)|0;t=t+1|0}if(d&128|0){if(t|0)jt(44,e)|0;s[p+1216>>2]=7;mt(e,1757,p+1216|0)|0}ft(1761,2,1,e)|0;e=d&1}t=s[2784+((d>>>8&7)<<2)>>2]|0;if(e){s[696]=I(1,t|0)|0;t=t+4|0}if(d&2){s[697]=I(1,t|0)|0;t=t+4|0}if(d&4){s[698]=I(1,t|0)|0;t=t+4|0}if(d&8){s[699]=I(1,t|0)|0;t=t+4|0}if(d&16){s[700]=I(1,t|0)|0;t=t+4|0}if(d&32){s[701]=I(1,t|0)|0;t=t+4|0}if(d&64){s[702]=I(1,t|0)|0;t=t+4|0}if(d&128){s[703]=I(1,t|0)|0;t=t+4|0}if(1<<(d>>>8&7)&d|0){d=0;$=p;return d|0}s[2784+((d>>>8&7)<<2)>>2]=t;d=0;$=p;return d|0}else{switch(e<<16>>16){case 26624:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+432>>2]=d&7;s[p+432+4>>2]=d>>>3&7;s[p+432+8>>2]=d>>>4&124;mt(f,1764,p+432|0)|0}s[2784+((d&7)<<2)>>2]=I(1,(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>4&124)|0)|0;d=0;$=p;return d|0}}while(0);if((d&65024|0)==22528){if(r[3440]|0){f=s[160]|0;s[p+448>>2]=d&7;s[p+448+4>>2]=d>>>3&7;s[p+448+8>>2]=d>>>6&7;mt(f,1785,p+448|0)|0}s[2784+((d&7)<<2)>>2]=I(1,(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0)|0;d=0;$=p;return d|0}t:do{if(e<<16>>16<18432){switch(e<<16>>16){case-26624:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+480>>2]=d>>>8&7;s[p+480+4>>2]=d<<2&1020;mt(f,1824,p+480|0)|0}s[2784+((d>>>8&7)<<2)>>2]=I(1,(s[709]|0)+(d<<2&1020)|0)|0;d=0;$=p;return d|0}else{if(e<<16>>16>=30720){switch(e<<16>>16){case 30720:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+488>>2]=d&7;s[p+488+4>>2]=d>>>3&7;s[p+488+8>>2]=d>>>6&31;mt(f,1844,p+488|0)|0}l=(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>6&31)|0;f=I(3,l&-2|0)|0;s[2784+((d&7)<<2)>>2]=((l&1|0)==0?f:f>>>8)&255;d=0;$=p;return d|0}switch(e<<16>>16){case 18432:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+464>>2]=d>>>8&7;s[p+464+4>>2]=d<<2&1020;mt(f,1804,p+464|0)|0}t=s[711]|0;if(t&1|0){f=s[160]|0;s[p+472>>2]=t;mt(f,1028,p+472|0)|0}s[2784+((d>>>8&7)<<2)>>2]=I(1,(t&-4)+(d<<2&1020)|0)|0;d=0;$=p;return d|0}}while(0);if((d&65024|0)==23552){if(r[3440]|0){f=s[160]|0;s[p+504>>2]=d&7;s[p+504+4>>2]=d>>>3&7;s[p+504+8>>2]=d>>>6&7;mt(f,1866,p+504|0)|0}l=(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0;f=I(3,l&-2|0)|0;s[2784+((d&7)<<2)>>2]=((l&1|0)==0?f:f>>>8)&255;d=0;$=p;return d|0}if((d&63488|0)==34816){if(r[3440]|0){f=s[160]|0;s[p+520>>2]=d&7;s[p+520+4>>2]=d>>>3&7;s[p+520+8>>2]=d>>>5&62;mt(f,1886,p+520|0)|0}s[2784+((d&7)<<2)>>2]=(I(3,(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>5&62)|0)|0)&65535;d=0;$=p;return d|0}switch((d&65024)<<16>>16){case 23040:{if(r[3440]|0){f=s[160]|0;s[p+536>>2]=d&7;s[p+536+4>>2]=d>>>3&7;s[p+536+8>>2]=d>>>6&7;mt(f,1908,p+536|0)|0}s[2784+((d&7)<<2)>>2]=(I(3,(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0)|0)&65535;d=0;$=p;return d|0}case 22016:{if(r[3440]|0){f=s[160]|0;s[p+552>>2]=d&7;s[p+552+4>>2]=d>>>3&7;s[p+552+8>>2]=d>>>6&7;mt(f,1928,p+552|0)|0}l=(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0;f=I(3,l&-2|0)|0;f=(l&1|0)==0?f:f>>>8;s[2784+((d&7)<<2)>>2]=(f&128|0)==0?f&255:f|-256;d=0;$=p;return d|0}case 24064:{if(r[3440]|0){f=s[160]|0;s[p+568>>2]=d&7;s[p+568+4>>2]=d>>>3&7;s[p+568+8>>2]=d>>>6&7;mt(f,1949,p+568|0)|0}f=I(3,(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0)|0;s[2784+((d&7)<<2)>>2]=(f&32768|0)==0?f&65535:f|-65536;d=0;$=p;return d|0}default:{if(!(d&63488)){if(r[3440]|0){f=s[160]|0;s[p+584>>2]=d&7;s[p+584+4>>2]=d>>>3&7;s[p+584+8>>2]=d>>>6&31;mt(f,1970,p+584|0)|0}t=s[2784+((d>>>3&7)<<2)>>2]|0;if(!(d>>>6&31))e=s[718]|0;else{e=s[718]|0;e=(t&1<<32-(d>>>6&31)|0)==0?e&-536870913:e|536870912;s[718]=e;t=t<<(d>>>6&31)}s[2784+((d&7)<<2)>>2]=t;d=(t|0)<0?e|-2147483648:e&2147483647;s[718]=(t|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}if((d&65472|0)==16512){if(r[3440]|0){f=s[160]|0;s[p+600>>2]=d&7;s[p+600+4>>2]=d>>>3&7;mt(f,1990,p+600|0)|0}t=s[2784+((d&7)<<2)>>2]|0;e=s[2784+((d>>>3&7)<<2)>>2]&255;do{if(!e){e=s[718]|0;o=357}else{if(e>>>0<32){o=s[718]|0;o=(1<<32-e&t|0)==0?o&-536870913:o|536870912;s[718]=o;t=t<<e;e=o;o=357;break}if((e|0)==32){f=s[718]|0;t=(t&1|0)==0?f&-536870913:f|536870912}else t=s[718]&-536870913;s[718]=t;s[2784+((d&7)<<2)>>2]=0;t=t&1073741823;o=360}}while(0);do{if((o|0)==357){s[2784+((d&7)<<2)>>2]=t;if((t|0)>=0)if(!t){t=e&2147483647;o=360;break}else{t=e&1073741823;break}else{t=e&1073741823|-2147483648;break}}}while(0);if((o|0)==360)t=t|1073741824;s[718]=t;d=0;$=p;return d|0}if((d&63488|0)==2048){if(r[3440]|0){f=s[160]|0;s[p+608>>2]=d&7;s[p+608+4>>2]=d>>>3&7;s[p+608+8>>2]=d>>>6&31;mt(f,2004,p+608|0)|0}t=s[2784+((d>>>3&7)<<2)>>2]|0;do{if(d>>>6&31){e=s[718]|0;e=(t&1<<(d>>>6&31)+-1|0)==0?e&-536870913:e|536870912;s[718]=e;s[2784+((d&7)<<2)>>2]=t>>>(d>>>6&31);if((t>>>(d>>>6&31)|0)>=0)if(!(t>>>(d>>>6&31))){t=e&1073741823;o=370;break}else{t=e&1073741823;break}else{t=e&1073741823|-2147483648;break}}else{o=s[718]|0;t=(t|0)>-1?o&-536870913:o|536870912;s[718]=t;s[2784+((d&7)<<2)>>2]=0;t=t&2147483647;o=370}}while(0);if((o|0)==370)t=t|1073741824;s[718]=t;d=0;$=p;return d|0}if((d&65472|0)==16576){if(r[3440]|0){f=s[160]|0;s[p+624>>2]=d&7;s[p+624+4>>2]=d>>>3&7;mt(f,2024,p+624|0)|0}t=s[2784+((d&7)<<2)>>2]|0;e=s[2784+((d>>>3&7)<<2)>>2]&255;do{if(!e){e=s[718]|0;o=383}else{if(e>>>0<32){o=s[718]|0;o=(1<<e+-1&t|0)==0?o&-536870913:o|536870912;s[718]=o;t=t>>>e;e=o;o=383;break}if((e|0)==32){f=s[718]|0;t=(t|0)>-1?f&-536870913:f|536870912}else t=s[718]&-536870913;s[718]=t;s[2784+((d&7)<<2)>>2]=0;t=t&1073741823;o=386}}while(0);do{if((o|0)==383){s[2784+((d&7)<<2)>>2]=t;if((t|0)>=0)if(!t){t=e&2147483647;o=386;break}else{t=e&1073741823;break}else{t=e&1073741823|-2147483648;break}}}while(0);if((o|0)==386)t=t|1073741824;s[718]=t;d=0;$=p;return d|0}if((d&63488|0)==8192){if(r[3440]|0){f=s[160]|0;s[p+632>>2]=d>>>8&7;s[p+632+4>>2]=d&255;mt(f,2038,p+632|0)|0}s[2784+((d>>>8&7)<<2)>>2]=d&255;f=s[718]&1073741823;s[718]=(d&255|0)==0?f|1073741824:f;d=0;$=p;return d|0}if((d&65472|0)==7168){if(r[3440]|0){f=s[160]|0;s[p+640>>2]=d&7;s[p+640+4>>2]=d>>>3&7;mt(f,2056,p+640|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=((f|0)==0?d|1073741824:d&-1879048193)&-805306369;d=0;$=p;return d|0}if((d&65280|0)==17920){if(r[3440]|0){f=s[160]|0;s[p+648>>2]=d>>>4&8|d&7;s[p+648+4>>2]=d>>>3&15;mt(f,2070,p+648|0)|0}t=s[2784+((d>>>3&15)<<2)>>2]|0;if((d>>>3&15|0)==15){if(t&1|0){f=s[160]|0;s[p+656>>2]=t;mt(f,1028,p+656|0)|0}t=t&-2}if((d>>>4&8|d&7|0)==15){s[711]=t+2&-2;d=0;$=p;return d|0}else{s[2784+((d>>>4&8|d&7)<<2)>>2]=t;d=0;$=p;return d|0}}switch(((d&65472)+-16960|0)>>>6&67108863|0){case 4:{if(r[3440]|0){f=s[160]|0;s[p+664>>2]=d&7;s[p+664+4>>2]=d>>>3&7;mt(f,2083,p+664|0)|0}f=y(s[2784+((d>>>3&7)<<2)>>2]|0,s[2784+((d&7)<<2)>>2]|0)|0;s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}case 6:{if(r[3440]|0){f=s[160]|0;s[p+672>>2]=d&7;s[p+672+4>>2]=d>>>3&7;mt(f,2097,p+672|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=~f;d=s[718]|0;d=(f|0)>-1?d|-2147483648:d&2147483647;s[718]=(f|0)==-1?d|1073741824:d&-1073741825;d=0;$=p;return d|0}case 0:{if(r[3440]|0){f=s[160]|0;s[p+680>>2]=d&7;s[p+680+4>>2]=d>>>3&7;mt(f,2111,p+680|0)|0}l=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=0-l;d=s[718]|0;d=(0-l|0)<0?d|-2147483648:d&2147483647;d=(l|0)==0?d|1073741824:d&-1073741825;f=(((~l&2147483647)+1|0)>>>31)+(~l>>>31)|0;d=(f&2|0)==0?d&-536870913:d|536870912;s[718]=(((~l&2147483647)+1|0)>>>31|0)==(f>>>1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}case 3:{if(r[3440]|0){f=s[160]|0;s[p+688>>2]=d&7;s[p+688+4>>2]=d>>>3&7;mt(f,2125,p+688|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|s[2784+((d&7)<<2)>>2];s[2784+((d&7)<<2)>>2]=f;d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}default:switch((d&65024)<<16>>16){case-17408:{if(!(r[3440]|0))e=d&1;else{e=s[160]|0;ft(2139,5,1,e)|0;if(!(d&1))t=0;else{s[p+696>>2]=0;mt(e,1757,p+696|0)|0;t=1}if(d&2){if(t|0)jt(44,e)|0;s[p+1056>>2]=1;mt(e,1757,p+1056|0)|0;t=t+1|0}if(d&4){if(t|0)jt(44,e)|0;s[p+1064>>2]=2;mt(e,1757,p+1064|0)|0;t=t+1|0}if(d&8){if(t|0)jt(44,e)|0;s[p+1072>>2]=3;mt(e,1757,p+1072|0)|0;t=t+1|0}if(d&16){if(t|0)jt(44,e)|0;s[p+1080>>2]=4;mt(e,1757,p+1080|0)|0;t=t+1|0}if(d&32){if(t|0)jt(44,e)|0;s[p+1088>>2]=5;mt(e,1757,p+1088|0)|0;t=t+1|0}if(d&64){if(t|0)jt(44,e)|0;s[p+1096>>2]=6;mt(e,1757,p+1096|0)|0;t=t+1|0}if(d&128){if(t|0)jt(44,e)|0;s[p+1104>>2]=7;mt(e,1757,p+1104|0)|0;t=t+1|0}if(d&256|0){if(t|0)jt(44,e)|0;ft(2145,2,1,e)|0}ft(1761,2,1,e)|0;e=d&1}t=s[709]|0;if(e){s[696]=I(1,t|0)|0;t=t+4|0}if(d&2){s[697]=I(1,t|0)|0;t=t+4|0}if(d&4){s[698]=I(1,t|0)|0;t=t+4|0}if(d&8){s[699]=I(1,t|0)|0;t=t+4|0}if(d&16){s[700]=I(1,t|0)|0;t=t+4|0}if(d&32){s[701]=I(1,t|0)|0;t=t+4|0}if(d&64){s[702]=I(1,t|0)|0;t=t+4|0}if(d&128){s[703]=I(1,t|0)|0;t=t+4|0}if(d&256){e=I(1,t|0)|0;if(!(e&1)){d=s[160]|0;s[p+704>>2]=f;s[p+704+4>>2]=e;mt(d,2148,p+704|0)|0;e=e&-2}s[711]=e+2&-2;t=t+4|0}s[709]=t;d=0;$=p;return d|0}case-19456:{l=s[160]|0;if(!(r[3440]|0)){t=d&2;e=d&4;n=d&8;i=d&16;a=d&32;o=d&64;u=d&128;h=d&256;c=d&1}else{ft(2202,6,1,l)|0;if(!(d&1))t=0;else{s[p+712>>2]=0;mt(l,1757,p+712|0)|0;t=1}if(d&2){if(t|0)jt(44,l)|0;s[p+1112>>2]=1;mt(l,1757,p+1112|0)|0;t=t+1|0}if(d&4){if(t|0)jt(44,l)|0;s[p+1120>>2]=2;mt(l,1757,p+1120|0)|0;t=t+1|0}if(d&8){if(t|0)jt(44,l)|0;s[p+1128>>2]=3;mt(l,1757,p+1128|0)|0;t=t+1|0}if(d&16){if(t|0)jt(44,l)|0;s[p+1136>>2]=4;mt(l,1757,p+1136|0)|0;t=t+1|0}if(d&32){if(t|0)jt(44,l)|0;s[p+1144>>2]=5;mt(l,1757,p+1144|0)|0;t=t+1|0}if(d&64){if(t|0)jt(44,l)|0;s[p+1152>>2]=6;mt(l,1757,p+1152|0)|0;t=t+1|0}if(d&128){if(t|0)jt(44,l)|0;s[p+1160>>2]=7;mt(l,1757,p+1160|0)|0;t=t+1|0}if(d&256|0){if(t|0)jt(44,l)|0;ft(2209,2,1,l)|0}ft(1761,2,1,l)|0;t=d&2;e=d&4;n=d&8;i=d&16;a=d&32;o=d&64;u=d&128;h=d&256;c=d&1}a=(s[709]|0)-(c+(t>>>1)+(e>>>2)+(n>>>3)+(i>>>4)+(a>>>5)+(o>>>6)+(u>>>7)+(h>>>8)<<2)|0;t=a;n=0;i=1;while(1){if(!(i&d))e=t;else{e=s[2784+(n<<2)>>2]|0;t:do{if((t&-268435456|0)==-536870912){c=t+536813552|0;switch(c>>>2|c<<30|0){case 0:{c=s[714]|0;s[714]=e&65543;if((e&1|0)==0|(c&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=e&16777215;break t}case 2:{s[716]=e&16777215;break t}case 3:break t;default:break t}}else B(2,t|0,e|0)|0}while(0);e=t+4|0}n=n+1|0;if((n|0)==8)break;else{t=e;i=i<<1&254}}do{if(h|0){t=s[710]|0;t:do{if((e&-268435456|0)==-536870912){d=e+536813552|0;switch(d>>>2|d<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0)break t;s[716]=s[715];break t}case 1:{s[715]=t&16777215;break t}case 2:{s[716]=t&16777215;break t}case 3:break t;default:break t}}else B(2,e|0,t|0)|0}while(0);if(t&1|0)break;s[p+720>>2]=f;s[p+720+4>>2]=t;mt(l,2212,p+720|0)|0}}while(0);s[709]=a;d=0;$=p;return d|0}default:{t:do{if(t<<16>>16<-17728)switch(t<<16>>16){case-17920:{if(r[3440]|0){f=s[160]|0;s[p+728>>2]=d&7;s[p+728+4>>2]=d>>>3&7;mt(f,2267,p+728|0)|0}s[2784+((d&7)<<2)>>2]=Jt(s[2784+((d>>>3&7)<<2)>>2]|0)|0;d=0;$=p;return d|0}case-17856:{if(r[3440]|0){f=s[160]|0;s[p+736>>2]=d&7;s[p+736+4>>2]=d>>>3&7;mt(f,2280,p+736|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=f<<8&65280|f>>>8&255|f>>>16<<24|f>>>24<<16;d=0;$=p;return d|0}default:break t}else{if(t<<16>>16<16768){switch(t<<16>>16){case-17728:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+744>>2]=d&7;s[p+744+4>>2]=d>>>3&7;mt(f,2295,p+744|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=(f&128|0)==0?f<<8&65280|f>>>8&255:f<<8&65280|f>>>8&255|-65536;d=0;$=p;return d|0}switch(t<<16>>16){case 16832:break;case 16768:{if(r[3440]|0){f=s[160]|0;s[p+760>>2]=d&7;s[p+760+4>>2]=d>>>3&7;mt(f,2324,p+760|0)|0}e=s[2784+((d&7)<<2)>>2]|0;n=s[2784+((d>>>3&7)<<2)>>2]|0;f=s[718]|0;s[2784+((d&7)<<2)>>2]=e-n+-1+(f>>>29&1);t=(e-n+-1+(f>>>29&1)|0)<0?f|-2147483648:f&2147483647;t=(e-n+-1+(f>>>29&1)|0)==0?t|1073741824:t&-1073741825;s[718]=t;if(!(t&536870912)){f=(~n>>>31)+(e>>>31)+(((~n&2147483647)+(e&2147483647)|0)>>>31)|0;d=(f&2|0)==0?t&-536870913:t|536870912;s[718]=(((~n&2147483647)+(e&2147483647)|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}else{f=(~n>>>31)+(e>>>31)+(((~n&2147483647)+(e&2147483647)+1|0)>>>31)|0;d=(f&2|0)==0?t&-536870913:t|536870912;s[718]=(((~n&2147483647)+(e&2147483647)+1|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}}default:break t}if(r[3440]|0){f=s[160]|0;s[p+752>>2]=d&7;s[p+752+4>>2]=d>>>3&7;mt(f,2310,p+752|0)|0}t=s[2784+((d&7)<<2)>>2]|0;e=s[2784+((d>>>3&7)<<2)>>2]|0;do{if(e&255)if(!(e&31)){e=s[718]|0;e=(t|0)>-1?e&-536870913:e|536870912;s[718]=e;break}else{f=s[718]|0;f=(1<<(e&31)+-1&t|0)==0?f&-536870913:f|536870912;s[718]=f;t=t<<32-(e&31)|t>>>(e&31);e=f;break}else e=s[718]|0}while(0);s[2784+((d&7)<<2)>>2]=t;d=(t|0)<0?e|-2147483648:e&2147483647;s[718]=(t|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}}while(0);if((d&65527|0)==46672){ft(2337,23,1,s[160]|0)|0;d=1;$=p;return d|0}t:do{if(e<<16>>16<24576){switch(e<<16>>16){case-16384:break;default:break t}if(r[3440]|0){e=s[160]|0;s[p+768>>2]=d>>>8&7;mt(e,2361,p+768|0)|0;if(!(d&1))t=0;else{s[p+776>>2]=0;mt(e,1757,p+776|0)|0;t=1}if(d&2){if(t|0)jt(44,e)|0;s[p+1e3>>2]=1;mt(e,1757,p+1e3|0)|0;t=t+1|0}if(d&4){if(t|0)jt(44,e)|0;s[p+1008>>2]=2;mt(e,1757,p+1008|0)|0;t=t+1|0}if(d&8){if(t|0)jt(44,e)|0;s[p+1016>>2]=3;mt(e,1757,p+1016|0)|0;t=t+1|0}if(d&16){if(t|0)jt(44,e)|0;s[p+1024>>2]=4;mt(e,1757,p+1024|0)|0;t=t+1|0}if(d&32){if(t|0)jt(44,e)|0;s[p+1032>>2]=5;mt(e,1757,p+1032|0)|0;t=t+1|0}if(d&64){if(t|0)jt(44,e)|0;s[p+1040>>2]=6;mt(e,1757,p+1040|0)|0;t=t+1|0}if(d&128|0){if(t|0)jt(44,e)|0;s[p+1048>>2]=7;mt(e,1757,p+1048|0)|0}ft(1761,2,1,e)|0}n=1;i=0;t=s[2784+((d>>>8&7)<<2)>>2]|0;while(1){if(n&d){e=s[2784+(i<<2)>>2]|0;e:do{if((t&-268435456|0)==-536870912){f=t+536813552|0;switch(f>>>2|f<<30|0){case 0:{f=s[714]|0;s[714]=e&65543;if((e&1|0)==0|(f&1|0)!=0)break e;s[716]=s[715];break e}case 1:{s[715]=e&16777215;break e}case 2:{s[716]=e&16777215;break e}case 3:break e;default:break e}}else B(2,t|0,e|0)|0}while(0);t=t+4|0}i=i+1|0;if((i|0)==8)break;else n=n<<1&254}s[2784+((d>>>8&7)<<2)>>2]=t;d=0;$=p;return d|0}else{switch(e<<16>>16){case 24576:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+784>>2]=d&7;s[p+784+4>>2]=d>>>3&7;s[p+784+8>>2]=d>>>4&124;mt(f,2374,p+784|0)|0}e=(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>4&124)|0;t=s[2784+((d&7)<<2)>>2]|0;if((e&-268435456|0)!=-536870912){B(2,e|0,t|0)|0;d=0;$=p;return d|0}switch((e+536813552|0)>>>2|e+536813552<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0){d=0;$=p;return d|0}s[716]=s[715];d=0;$=p;return d|0}case 1:{s[715]=t&16777215;d=0;$=p;return d|0}case 2:{s[716]=t&16777215;d=0;$=p;return d|0}case 3:{d=0;$=p;return d|0}default:{d=0;$=p;return d|0}}}}while(0);if((d&65024|0)==20480){if(r[3440]|0){f=s[160]|0;s[p+800>>2]=d&7;s[p+800+4>>2]=d>>>3&7;s[p+800+8>>2]=d>>>6&7;mt(f,2395,p+800|0)|0}e=(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0;t=s[2784+((d&7)<<2)>>2]|0;if((e&-268435456|0)!=-536870912){B(2,e|0,t|0)|0;d=0;$=p;return d|0}switch((e+536813552|0)>>>2|e+536813552<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0){d=0;$=p;return d|0}s[716]=s[715];d=0;$=p;return d|0}case 1:{s[715]=t&16777215;d=0;$=p;return d|0}case 2:{s[716]=t&16777215;d=0;$=p;return d|0}case 3:{d=0;$=p;return d|0}default:{d=0;$=p;return d|0}}}t:do{if(e<<16>>16<28672){switch(e<<16>>16){case-28672:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+816>>2]=d>>>8&7;s[p+816+4>>2]=d<<2&1020;mt(f,2414,p+816|0)|0}e=(s[709]|0)+(d<<2&1020)|0;t=s[2784+((d>>>8&7)<<2)>>2]|0;if((e&-268435456|0)!=-536870912){B(2,e|0,t|0)|0;d=0;$=p;return d|0}switch((e+536813552|0)>>>2|e+536813552<<30|0){case 0:{d=s[714]|0;s[714]=t&65543;if((t&1|0)==0|(d&1|0)!=0){d=0;$=p;return d|0}s[716]=s[715];d=0;$=p;return d|0}case 1:{s[715]=t&16777215;d=0;$=p;return d|0}case 2:{s[716]=t&16777215;d=0;$=p;return d|0}case 3:{d=0;$=p;return d|0}default:{d=0;$=p;return d|0}}}else{switch(e<<16>>16){case 28672:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+824>>2]=d&7;s[p+824+4>>2]=d>>>3&7;s[p+824+8>>2]=d>>>6&31;mt(f,2434,p+824|0)|0}n=(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>6&31)|0;t=s[2784+((d&7)<<2)>>2]|0;e=I(3,n&-2|0)|0;if(!(n&1))t=e&65280|t&255;else t=e&255|t<<8;B(5,n&-2|0,t&65535|0)|0;d=0;$=p;return d|0}}while(0);if((d&65024|0)==21504){if(r[3440]|0){f=s[160]|0;s[p+840>>2]=d&7;s[p+840+4>>2]=d>>>3&7;s[p+840+8>>2]=d>>>6&7;mt(f,2456,p+840|0)|0}n=(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0;t=s[2784+((d&7)<<2)>>2]|0;e=I(3,n&-2|0)|0;if(!(n&1))t=e&65280|t&255;else t=e&255|t<<8;B(5,n&-2|0,t&65535|0)|0;d=0;$=p;return d|0}if((d&63488|0)==32768){if(r[3440]|0){f=s[160]|0;s[p+856>>2]=d&7;s[p+856+4>>2]=d>>>3&7;s[p+856+8>>2]=d>>>5&62;mt(f,2476,p+856|0)|0}B(5,(s[2784+((d>>>3&7)<<2)>>2]|0)+(d>>>5&62)|0,s[2784+((d&7)<<2)>>2]&65535|0)|0;d=0;$=p;return d|0}t:do{if((d&65024)<<16>>16<20992){switch((d&65024)<<16>>16){case 7680:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+888>>2]=d&7;s[p+888+4>>2]=d>>>3&7;s[p+888+8>>2]=d>>>6&7;mt(f,2518,p+888|0)|0}h=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=h-(d>>>6&7);f=s[718]|0;f=(h-(d>>>6&7)|0)<0?f|-2147483648:f&2147483647;f=(h-(d>>>6&7)|0)==0?f|1073741824:f&-1073741825;l=(h>>>31)+1+((-2147483648-(d>>>6&7)+(h&2147483647)|0)>>>31)|0;f=(l&2|0)==0?f&-536870913:f|536870912;s[718]=((-2147483648-(d>>>6&7)+(h&2147483647)|0)>>>31|0)==(l>>>1&1|0)?f&-268435457:f|268435456;d=0;$=p;return d|0}else{switch((d&65024)<<16>>16){case 20992:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+872>>2]=d&7;s[p+872+4>>2]=d>>>3&7;s[p+872+8>>2]=d>>>6&7;mt(f,2498,p+872|0)|0}B(5,(s[2784+((d>>>6&7)<<2)>>2]|0)+(s[2784+((d>>>3&7)<<2)>>2]|0)|0,s[2784+((d&7)<<2)>>2]&65535|0)|0;d=0;$=p;return d|0}}while(0);if((d&63488|0)==14336){if(r[3440]|0){f=s[160]|0;s[p+904>>2]=d>>>8&7;s[p+904+4>>2]=d&255;mt(f,2538,p+904|0)|0}h=s[2784+((d>>>8&7)<<2)>>2]|0;s[2784+((d>>>8&7)<<2)>>2]=h-(d&255);f=s[718]|0;f=(h-(d&255)|0)<0?f|-2147483648:f&2147483647;f=(h-(d&255)|0)==0?f|1073741824:f&-1073741825;l=(h>>>31)+1+((-2147483648-(d&255)+(h&2147483647)|0)>>>31)|0;f=(l&2|0)==0?f&-536870913:f|536870912;s[718]=((-2147483648-(d&255)+(h&2147483647)|0)>>>31|0)==(l>>>1&1|0)?f&-268435457:f|268435456;d=0;$=p;return d|0}if((d&65024|0)==6656){if(r[3440]|0){f=s[160]|0;s[p+912>>2]=d&7;s[p+912+4>>2]=d>>>3&7;s[p+912+8>>2]=d>>>6&7;mt(f,2556,p+912|0)|0}h=s[2784+((d>>>3&7)<<2)>>2]|0;l=s[2784+((d>>>6&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=h-l;d=s[718]|0;d=(h-l|0)<0?d|-2147483648:d&2147483647;d=(h-l|0)==0?d|1073741824:d&-1073741825;f=(~l>>>31)+(h>>>31)+(((h&2147483647)+1+(~l&2147483647)|0)>>>31)|0;d=(f&2|0)==0?d&-536870913:d|536870912;s[718]=(((h&2147483647)+1+(~l&2147483647)|0)>>>31|0)==(f>>>1&1|0)?d&-268435457:d|268435456;d=0;$=p;return d|0}if((d&65408|0)==45184){if(r[3440]|0){f=s[160]|0;s[p+928>>2]=d<<2&508;mt(f,2574,p+928|0)|0}s[709]=(s[709]|0)-(d<<2&508);d=0;$=p;return d|0}if((d&65280|0)==57088){if(r[3440]|0){f=s[160]|0;s[p+936>>2]=d&255;mt(f,2590,p+936|0)|0}if((d&255|0)==204){s[696]=s[718];d=0;$=p;return d|0}else{f=s[160]|0;s[p+944>>2]=d&255;mt(f,2602,p+944|0)|0;d=1;$=p;return d|0}}t:do{if(t<<16>>16>=-19840){if(t<<16>>16<-19776){switch(t<<16>>16){case-19840:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+984>>2]=d&7;s[p+984+4>>2]=d>>>3&7;mt(f,2671,p+984|0)|0}s[2784+((d&7)<<2)>>2]=s[2784+((d>>>3&7)<<2)>>2]&65535;d=0;$=p;return d|0}if(t<<16>>16<16896){switch(t<<16>>16){case-19776:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+976>>2]=d&7;s[p+976+4>>2]=d>>>3&7;mt(f,2657,p+976|0)|0}s[2784+((d&7)<<2)>>2]=s[2784+((d>>>3&7)<<2)>>2]&255;d=0;$=p;return d|0}else{switch(t<<16>>16){case 16896:break;default:break t}if(r[3440]|0){f=s[160]|0;s[p+968>>2]=d&7;s[p+968+4>>2]=d>>>3&7;mt(f,2644,p+968|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]&s[2784+((d&7)<<2)>>2];d=s[718]|0;d=(f|0)<0?d|-2147483648:d&2147483647;s[718]=(f|0)==0?d|1073741824:d&-1073741825;d=0;$=p;return d|0}}else switch(t<<16>>16){case-19904:{if(r[3440]|0){f=s[160]|0;s[p+952>>2]=d&7;s[p+952+4>>2]=d>>>3&7;mt(f,2616,p+952|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=(f&128|0)==0?f&255:f|-256;d=0;$=p;return d|0}case-19968:{if(r[3440]|0){f=s[160]|0;s[p+960>>2]=d&7;s[p+960+4>>2]=d>>>3&7;mt(f,2630,p+960|0)|0}f=s[2784+((d>>>3&7)<<2)>>2]|0;s[2784+((d&7)<<2)>>2]=(f&32768|0)==0?f&65535:f|-65536;d=0;$=p;return d|0}default:break t}}while(0);f=s[160]|0;s[p+992>>2]=a;s[p+992+4>>2]=d;mt(f,2685,p+992|0)|0;d=1;$=p;return d|0}}}}}}}}}}}return 0}function it(t){t=t|0;var e=0;e=$;$=$+16|0;s[e>>2]=ct(s[t+60>>2]|0)|0;t=ot(x(6,e|0)|0)|0;$=e;return t|0}function st(t,e,n){t=t|0;e=e|0;n=n|0;var r=0,i=0,a=0,o=0,u=0,c=0,h=0;o=$;$=$+32|0;a=s[t+28>>2]|0;s[o>>2]=a;a=(s[t+20>>2]|0)-a|0;s[o+4>>2]=a;s[o+8>>2]=e;s[o+12>>2]=n;i=2;e=a+n|0;a=o;while(1){if(!((T(s[t+60>>2]|0,a|0,i|0,o+16|0)|0)<<16>>16))r=s[o+16>>2]|0;else{s[o+16>>2]=-1;r=-1}if((e|0)==(r|0)){e=6;break}if((r|0)<0){e=8;break}h=s[a+4>>2]|0;c=r>>>0>h>>>0;u=c?a+8|0:a;h=r-(c?h:0)|0;s[u>>2]=(s[u>>2]|0)+h;s[u+4>>2]=(s[u+4>>2]|0)-h;i=i+(c<<31>>31)|0;e=e-r|0;a=u}if((e|0)==6){h=s[t+44>>2]|0;s[t+16>>2]=h+(s[t+48>>2]|0);s[t+28>>2]=h;s[t+20>>2]=h}else if((e|0)==8){s[t+16>>2]=0;s[t+28>>2]=0;s[t+20>>2]=0;s[t>>2]=s[t>>2]|32;if((i|0)==2)n=0;else n=n-(s[a+4>>2]|0)|0}$=o;return n|0}function at(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;var i=0;i=$;$=$+32|0;s[i+8>>2]=s[t+60>>2];s[i+8+4>>2]=n;s[i+8+8>>2]=e;s[i+8+12>>2]=i;s[i+8+16>>2]=r;if((ot(E(140,i+8|0)|0)|0)<0){s[i>>2]=-1;s[i+4>>2]=-1;t=-1;e=-1}else{t=s[i+4>>2]|0;e=s[i>>2]|0}k(t|0);$=i;return e|0}function ot(t){t=t|0;if(t>>>0>4294963200){s[(ut()|0)>>2]=0-t;t=-1}return t|0}function ut(){return 2940}function ct(t){t=t|0;return t|0}function ht(t){t=t|0;return(t+-48|0)>>>0<10|0}function lt(){return 644}function ft(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;var i=0,a=0;i=y(n,e)|0;n=(e|0)==0?0:n;if((s[r+76>>2]|0)>-1){a=(pt(r)|0)==0;t=bt(t,i,r)|0;if(!a)dt(r)}else t=bt(t,i,r)|0;if((t|0)!=(i|0))n=(t>>>0)/(e>>>0)|0;return n|0}function dt(t){t=t|0;return}function pt(t){t=t|0;return 1}function _t(t,e){t=t|0;e=e|0;var n=0,i=0,o=0,u=0;u=$;$=$+16|0;r[u>>0]=e;n=s[t+16>>2]|0;if(!n)if(!(gt(t)|0)){i=s[t+16>>2]|0;o=4}else n=-1;else{i=n;o=4}do{if((o|0)==4){n=s[t+20>>2]|0;if(n>>>0<i>>>0?(e&255|0)!=(r[t+75>>0]|0):0){s[t+20>>2]=n+1;r[n>>0]=e;n=e&255;break}if((le[s[t+36>>2]&1](t,u,1)|0)==1)n=a[u>>0]|0;else n=-1}}while(0);$=u;return n|0}function gt(t){t=t|0;var e=0;e=r[t+74>>0]|0;r[t+74>>0]=e+255|e;e=s[t>>2]|0;if(!(e&8)){s[t+8>>2]=0;s[t+4>>2]=0;e=s[t+44>>2]|0;s[t+28>>2]=e;s[t+20>>2]=e;s[t+16>>2]=e+(s[t+48>>2]|0);t=0}else{s[t>>2]=e|32;t=-1}return t|0}function bt(t,e,n){t=t|0;e=e|0;n=n|0;var i=0,a=0,o=0,u=0;i=s[n+16>>2]|0;if(!i)if(!(gt(n)|0)){a=s[n+16>>2]|0;o=5}else i=0;else{a=i;o=5}t:do{if((o|0)==5){i=s[n+20>>2]|0;if((a-i|0)>>>0<e>>>0){i=le[s[n+36>>2]&1](n,t,e)|0;break}e:do{if((r[n+75>>0]|0)<0|(e|0)==0){u=0;a=t}else{o=e;while(1){a=o+-1|0;if((r[t+a>>0]|0)==10)break;if(!a){u=0;a=t;break e}else o=a}i=le[s[n+36>>2]&1](n,t,o)|0;if(i>>>0<o>>>0)break t;u=o;a=t+o|0;e=e-o|0;i=s[n+20>>2]|0}}while(0);Kt(i|0,a|0,e|0)|0;s[n+20>>2]=(s[n+20>>2]|0)+e;i=u+e|0}}while(0);return i|0}function vt(t,e,n){t=t|0;e=e|0;n=n|0;var i=0,a=0,o=0;t:do{if((n|0)!=0&(t&3|0)!=0){i=n;while(1){if((r[t>>0]|0)==(e&255)<<24>>24){a=6;break t}t=t+1|0;n=i+-1|0;if((n|0)!=0&(t&3|0)!=0)i=n;else{i=n;n=(n|0)!=0;a=5;break}}}else{i=n;n=(n|0)!=0;a=5}}while(0);if((a|0)==5)if(n)a=6;else a=16;t:do{if((a|0)==6){if((r[t>>0]|0)==(e&255)<<24>>24)if(!i){a=16;break}else break;n=y(e&255,16843009)|0;e:do{if(i>>>0>3)while(1){o=s[t>>2]^n;if((o&-2139062144^-2139062144)&o+-16843009|0)break e;t=t+4|0;i=i+-4|0;if(i>>>0<=3){a=11;break}}else a=11}while(0);if((a|0)==11)if(!i){a=16;break}while(1){if((r[t>>0]|0)==(e&255)<<24>>24)break t;i=i+-1|0;if(!i){a=16;break}else t=t+1|0}}}while(0);if((a|0)==16)t=0;return t|0}function mt(t,e,n){t=t|0;e=e|0;n=n|0;var r=0;r=$;$=$+16|0;s[r>>2]=n;n=yt(t,e,r)|0;$=r;return n|0}function yt(t,e,n){t=t|0;e=e|0;n=n|0;return kt(t,e,n,1,1)|0}function wt(t,e,n,i,o,u){t=t|0;e=+e;n=n|0;i=i|0;o=o|0;u=u|0;var c=0,h=0,l=0,f=0,d=0.0,p=0,_=0,g=0,b=0,v=0,m=0,w=0,A=0,k=0,S=0,E=0,x=0;x=$;$=$+560|0;s[x+536>>2]=0;E=x+540+12|0;Mt(e)|0;c=C()|0;if((c|0)<0){Mt(-e)|0;e=-e;S=1;A=2737;c=C()|0}else{S=(o&2049|0)!=0&1;A=(o&2048|0)==0?(o&1|0)==0?2738:2743:2740}do{if(0==0&(c&2146435072|0)==2146435072){c=S+3|0;Ot(t,32,n,c,o&-65537);St(t,A,S);St(t,e!=e|0.0!=0.0?u&32|0?2764:2768:u&32|0?2756:2760,3);Ot(t,32,n,c,o^8192)}else{d=+Ft(e,x+536|0)*2.0;if(d!=0.0)s[x+536>>2]=(s[x+536>>2]|0)+-1;if((u|32|0)==97){_=(u&32|0)==0?A:A+9|0;p=S|2;do{if(!(i>>>0>11|(12-i|0)==0)){e=8.0;c=12-i|0;do{c=c+-1|0;e=e*16.0}while((c|0)!=0);if((r[_>>0]|0)==45){e=-(e+(-d-e));break}else{e=d+e-e;break}}else e=d}while(0);h=s[x+536>>2]|0;c=(h|0)<0?0-h|0:h;c=Bt(c,((c|0)<0)<<31>>31,E)|0;if((c|0)==(E|0)){r[x+540+11>>0]=48;c=x+540+11|0}r[c+-1>>0]=(h>>31&2)+43;f=c+-2|0;r[f>>0]=u+15;c=x;do{S=~~e;h=c+1|0;r[c>>0]=u&32|a[480+S>>0];e=(e-+(S|0))*16.0;if((h-x|0)==1?!((o&8|0)==0&((i|0)<1&e==0.0)):0){r[h>>0]=46;c=c+2|0}else c=h}while(e!=0.0);l=c;if((i|0)!=0?(-2-x+l|0)<(i|0):0){i=i+2+E-f|0;c=E;h=f}else{i=E-x-f+l|0;c=E;h=f}E=i+p|0;Ot(t,32,n,E,o);St(t,_,p);Ot(t,48,n,E,o^65536);St(t,x,l-x|0);c=c-h|0;Ot(t,48,i-(l-x+c)|0,0,0);St(t,f,c);Ot(t,32,n,E,o^8192);c=E;break}h=(i|0)<0?6:i;if(d!=0.0){c=(s[x+536>>2]|0)+-28|0;s[x+536>>2]=c;e=d*268435456.0}else{e=d;c=s[x+536>>2]|0}k=(c|0)<0?x+32|0:x+32+288|0;i=k;do{m=~~e>>>0;s[i>>2]=m;i=i+4|0;e=(e-+(m>>>0))*1.0e9}while(e!=0.0);if((c|0)>0){p=k;while(1){f=(c|0)<29?c:29;c=i+-4|0;if(c>>>0>=p>>>0){l=0;do{b=Qt(s[c>>2]|0,0,f|0)|0;b=$t(b|0,C()|0,l|0,0)|0;v=C()|0;l=qt(b|0,v|0,1e9,0)|0;m=zt(l|0,C()|0,1e9,0)|0;m=Ht(b|0,v|0,m|0,C()|0)|0;C()|0;s[c>>2]=m;c=c+-4|0}while(c>>>0>=p>>>0);if(l){m=p+-4|0;s[m>>2]=l;l=m}else l=p}else l=p;t:do{if(i>>>0>l>>>0){c=i;while(1){i=c+-4|0;if(s[i>>2]|0){i=c;break t}if(i>>>0>l>>>0)c=i;else break}}}while(0);c=(s[x+536>>2]|0)-f|0;s[x+536>>2]=c;if((c|0)>0)p=l;else break}}else l=k;if((c|0)<0){do{p=0-c|0;p=(p|0)<9?p:9;if(l>>>0<i>>>0){f=0;c=l;do{m=s[c>>2]|0;s[c>>2]=(m>>>p)+f;f=y(m&(1<<p)+-1,1e9>>>p)|0;c=c+4|0}while(c>>>0<i>>>0);c=(s[l>>2]|0)==0?l+4|0:l;if(!f)l=c;else{s[i>>2]=f;i=i+4|0;l=c}}else l=(s[l>>2]|0)==0?l+4|0:l;c=(u|32|0)==102?k:l;i=(i-c>>2|0)>(((h+25|0)/9|0)+1|0)?c+(((h+25|0)/9|0)+1<<2)|0:i;c=(s[x+536>>2]|0)+p|0;s[x+536>>2]=c}while((c|0)<0);c=l}else c=l;if(c>>>0<i>>>0){l=(k-c>>2)*9|0;p=s[c>>2]|0;if(p>>>0>=10){f=10;do{f=f*10|0;l=l+1|0}while(p>>>0>=f>>>0)}}else l=0;f=h-((u|32|0)==102?0:l)+(((h|0)!=0&(u|32|0)==103)<<31>>31)|0;if((f|0)<(((i-k>>2)*9|0)+-9|0)){_=k+4+(((f+9216|0)/9|0)+-1024<<2)|0;f=f+9216-(((f+9216|0)/9|0)*9|0)|0;if((f|0)<8){p=10;while(1){p=p*10|0;if((f|0)<7)f=f+1|0;else break}}else p=10;b=s[_>>2]|0;f=(b>>>0)/(p>>>0)|0;v=b-(y(f,p)|0)|0;g=(_+4|0)==(i|0);if(!(g&(v|0)==0)){e=(f&1|0)==0?9007199254740992.0:9007199254740994.0;m=p>>>1;d=v>>>0<m>>>0?.5:g&(v|0)==(m|0)?1.0:1.5;if(S){m=(r[A>>0]|0)==45;d=m?-d:d;e=m?-e:e}s[_>>2]=b-v;if(e+d!=e){m=b-v+p|0;s[_>>2]=m;if(m>>>0>999999999){f=_;while(1){l=f+-4|0;s[f>>2]=0;if(l>>>0<c>>>0){c=c+-4|0;s[c>>2]=0}m=(s[l>>2]|0)+1|0;s[l>>2]=m;if(m>>>0>999999999)f=l;else{_=l;break}}}l=(k-c>>2)*9|0;p=s[c>>2]|0;if(p>>>0<10)f=_;else{f=10;do{f=f*10|0;l=l+1|0}while(p>>>0>=f>>>0);f=_}}else f=_}else f=_;v=f+4|0;i=i>>>0>v>>>0?v:i;v=c}else v=c;_=0-l|0;t:do{if(i>>>0>v>>>0)while(1){c=i+-4|0;if(s[c>>2]|0){m=i;b=1;break t}if(c>>>0>v>>>0)i=c;else{m=c;b=0;break}}else{m=i;b=0}}while(0);do{if((u|32|0)==103){if((l|0)>-5?(h+(((h|0)!=0^1)&1)|0)>(l|0):0){f=u+-1|0;h=h+(((h|0)!=0^1)&1)+-1-l|0}else{f=u+-2|0;h=h+(((h|0)!=0^1)&1)+-1|0}if(!(o&8)){if(b?(w=s[m+-4>>2]|0,(w|0)!=0):0)if(!((w>>>0)%10|0)){c=0;i=10;do{i=i*10|0;c=c+1|0}while(!((w>>>0)%(i>>>0)|0|0))}else c=0;else c=9;i=((m-k>>2)*9|0)+-9|0;if((f|32|0)==102){u=i-c|0;u=(u|0)>0?u:0;h=(h|0)<(u|0)?h:u;break}else{u=i+l-c|0;u=(u|0)>0?u:0;h=(h|0)<(u|0)?h:u;break}}}else f=u}while(0);g=(h|0)!=0;i=g?1:o>>>3&1;p=(f|32|0)==102;if(p){_=0;c=(l|0)>0?l:0}else{c=(l|0)<0?_:l;c=Bt(c,((c|0)<0)<<31>>31,E)|0;if((E-c|0)<2)do{c=c+-1|0;r[c>>0]=48}while((E-c|0)<2);r[c+-1>>0]=(l>>31&2)+43;c=c+-2|0;r[c>>0]=f;_=c;c=E-c|0}c=S+1+h+i+c|0;Ot(t,32,n,c,o);St(t,A,S);Ot(t,48,n,c,o^65536);if(p){f=v>>>0>k>>>0?k:v;l=f;do{i=Bt(s[l>>2]|0,0,x+9|0)|0;if((l|0)==(f|0)){if((i|0)==(x+9|0)){r[x+8>>0]=48;i=x+8|0}}else if(i>>>0>x>>>0){Yt(x|0,48,i-x|0)|0;do{i=i+-1|0}while(i>>>0>x>>>0)}St(t,i,x+9-i|0);l=l+4|0}while(l>>>0<=k>>>0);if(!((o&8|0)==0&(g^1)))St(t,2772,1);if(l>>>0<m>>>0&(h|0)>0)while(1){i=Bt(s[l>>2]|0,0,x+9|0)|0;if(i>>>0>x>>>0){Yt(x|0,48,i-x|0)|0;do{i=i+-1|0}while(i>>>0>x>>>0)}St(t,i,(h|0)<9?h:9);l=l+4|0;i=h+-9|0;if(!(l>>>0<m>>>0&(h|0)>9)){h=i;break}else h=i}Ot(t,48,h+9|0,9,0)}else{p=b?m:v+4|0;if(v>>>0<p>>>0&(h|0)>-1){f=v;do{i=Bt(s[f>>2]|0,0,x+9|0)|0;if((i|0)==(x+9|0)){r[x+8>>0]=48;i=x+8|0}do{if((f|0)==(v|0)){l=i+1|0;St(t,i,1);if((o&8|0)==0&(h|0)<1){i=l;break}St(t,2772,1);i=l}else{if(i>>>0<=x>>>0)break;Yt(x|0,48,i+(0-x)|0)|0;do{i=i+-1|0}while(i>>>0>x>>>0)}}while(0);S=x+9-i|0;St(t,i,(h|0)>(S|0)?S:h);h=h-S|0;f=f+4|0}while(f>>>0<p>>>0&(h|0)>-1)}Ot(t,48,h+18|0,18,0);St(t,_,E-_|0)}Ot(t,32,n,c,o^8192)}}while(0);$=x;return((c|0)<(n|0)?n:c)|0}function At(t,e){t=t|0;e=e|0;var n=0.0,r=0;r=(s[e>>2]|0)+(8-1)&~(8-1);n=+c[r>>3];s[e>>2]=r+8;c[t>>3]=n;return}function kt(t,e,n,i,a){t=t|0;e=e|0;n=n|0;i=i|0;a=a|0;var o=0,u=0,c=0,h=0;h=$;$=$+224|0;o=h+160|0;u=o+40|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(u|0));s[h+208>>2]=s[n>>2];if((Ct(0,e,h+208|0,h+80|0,h+160|0,i,a)|0)<0)n=-1;else{if((s[t+76>>2]|0)>-1)c=pt(t)|0;else c=0;u=s[t>>2]|0;if((r[t+74>>0]|0)<1)s[t>>2]=u&-33;if(!(s[t+48>>2]|0)){o=s[t+44>>2]|0;s[t+44>>2]=h;s[t+28>>2]=h;s[t+20>>2]=h;s[t+48>>2]=80;s[t+16>>2]=h+80;n=Ct(t,e,h+208|0,h+80|0,h+160|0,i,a)|0;if(o){le[s[t+36>>2]&1](t,0,0)|0;n=(s[t+20>>2]|0)==0?-1:n;s[t+44>>2]=o;s[t+48>>2]=0;s[t+16>>2]=0;s[t+28>>2]=0;s[t+20>>2]=0}}else n=Ct(t,e,h+208|0,h+80|0,h+160|0,i,a)|0;o=s[t>>2]|0;s[t>>2]=o|u&32;if(c|0)dt(t);n=(o&32|0)==0?n:-1}$=h;return n|0}function Ct(t,e,n,a,o,u,h){t=t|0;e=e|0;n=n|0;a=a|0;o=o|0;u=u|0;h=h|0;var l=0,f=0,d=0,p=0,_=0,g=0,b=0,v=0,m=0,y=0,w=0,A=0,k=0,S=0,E=0,x=0;E=$;$=$+64|0;s[E+56>>2]=e;A=E+40|0;l=0;e=0;d=0;t:while(1){do{do{if((e|0)>-1)if((l|0)>(2147483647-e|0)){s[(ut()|0)>>2]=75;e=-1;break}else{e=l+e|0;break}}while(0);b=s[E+56>>2]|0;l=r[b>>0]|0;if(!(l<<24>>24)){w=92;break t}f=b;e:while(1){switch(l<<24>>24){case 37:{w=10;break e}case 0:{l=f;break e}default:{}}y=f+1|0;s[E+56>>2]=y;l=r[y>>0]|0;f=y}e:do{if((w|0)==10){w=0;l=f;do{if((r[f+1>>0]|0)!=37)break e;l=l+1|0;f=f+2|0;s[E+56>>2]=f}while((r[f>>0]|0)==37)}}while(0);l=l-b|0;if(t|0)St(t,b,l)}while((l|0)!=0);y=(ht(r[(s[E+56>>2]|0)+1>>0]|0)|0)==0;f=s[E+56>>2]|0;if(!y?(r[f+2>>0]|0)==36:0){v=(r[f+1>>0]|0)+-48|0;_=1;l=3}else{v=-1;_=d;l=1}l=f+l|0;s[E+56>>2]=l;f=r[l>>0]|0;if(((f<<24>>24)+-32|0)>>>0>31|(1<<(f<<24>>24)+-32&75913|0)==0)p=0;else{d=0;p=(f<<24>>24)+-32|0;do{d=1<<p|d;l=l+1|0;s[E+56>>2]=l;f=r[l>>0]|0;p=(f<<24>>24)+-32|0}while(!(p>>>0>31|(1<<p&75913|0)==0));p=d}if(f<<24>>24==42){if((ht(r[l+1>>0]|0)|0)!=0?(S=s[E+56>>2]|0,(r[S+2>>0]|0)==36):0){s[o+((r[S+1>>0]|0)+-48<<2)>>2]=10;l=s[a+((r[S+1>>0]|0)+-48<<3)>>2]|0;d=1;f=S+3|0}else{if(_|0){e=-1;break}if(t|0){y=(s[n>>2]|0)+(4-1)&~(4-1);l=s[y>>2]|0;s[n>>2]=y+4}else l=0;d=0;f=(s[E+56>>2]|0)+1|0}s[E+56>>2]=f;g=(l|0)<0;m=g?0-l|0:l;g=g?p|8192:p;y=d}else{l=Et(E+56|0)|0;if((l|0)<0){e=-1;break}m=l;g=p;y=_;f=s[E+56>>2]|0}do{if((r[f>>0]|0)==46){l=f+1|0;if((r[l>>0]|0)!=42){s[E+56>>2]=l;l=Et(E+56|0)|0;f=s[E+56>>2]|0;break}if(ht(r[f+2>>0]|0)|0?(k=s[E+56>>2]|0,(r[k+3>>0]|0)==36):0){s[o+((r[k+2>>0]|0)+-48<<2)>>2]=10;l=s[a+((r[k+2>>0]|0)+-48<<3)>>2]|0;s[E+56>>2]=k+4;f=k+4|0;break}if(y|0){e=-1;break t}if(t|0){_=(s[n>>2]|0)+(4-1)&~(4-1);l=s[_>>2]|0;s[n>>2]=_+4}else l=0;f=(s[E+56>>2]|0)+2|0;s[E+56>>2]=f}else l=-1}while(0);_=0;while(1){if(((r[f>>0]|0)+-65|0)>>>0>57){e=-1;break t}d=f;f=f+1|0;s[E+56>>2]=f;d=r[(r[d>>0]|0)+-65+(16+(_*58|0))>>0]|0;if(((d&255)+-1|0)>>>0>=8)break;else _=d&255}if(!(d<<24>>24)){e=-1;break}p=(v|0)>-1;do{if(d<<24>>24==19)if(p){e=-1;break t}else w=54;else{if(p){s[o+(v<<2)>>2]=d&255;v=a+(v<<3)|0;w=s[v+4>>2]|0;s[E+40>>2]=s[v>>2];s[E+40+4>>2]=w;w=54;break}if(!t){e=0;break t}xt(E+40|0,d&255,n,h);f=s[E+56>>2]|0;w=55}}while(0);if((w|0)==54){w=0;if(t|0)w=55;else l=0}e:do{if((w|0)==55){w=0;f=r[f+-1>>0]|0;f=(_|0)!=0&(f&15|0)==3?f&-33:f;d=g&-65537;v=(g&8192|0)==0?g:d;n:do{switch(f|0){case 110:switch((_&255)<<24>>24){case 0:{s[s[E+40>>2]>>2]=e;l=0;break e}case 1:{s[s[E+40>>2]>>2]=e;l=0;break e}case 2:{l=s[E+40>>2]|0;s[l>>2]=e;s[l+4>>2]=((e|0)<0)<<31>>31;l=0;break e}case 3:{i[s[E+40>>2]>>1]=e;l=0;break e}case 4:{r[s[E+40>>2]>>0]=e;l=0;break e}case 6:{s[s[E+40>>2]>>2]=e;l=0;break e}case 7:{l=s[E+40>>2]|0;s[l>>2]=e;s[l+4>>2]=((e|0)<0)<<31>>31;l=0;break e}default:{l=0;break e}}case 112:{f=120;l=l>>>0>8?l:8;d=v|8;w=67;break}case 88:case 120:{d=v;w=67;break}case 111:{d=It(s[E+40>>2]|0,s[E+40+4>>2]|0,E+40|0)|0;g=d;p=0;_=2720;l=(v&8|0)==0|(l|0)>(A-d|0)?l:A-d+1|0;d=v;w=73;break}case 105:case 100:{f=s[E+40>>2]|0;d=s[E+40+4>>2]|0;if((d|0)<0){f=Ht(0,0,f|0,d|0)|0;d=C()|0;s[E+40>>2]=f;s[E+40+4>>2]=d;p=1;_=2720;w=72;break n}else{p=(v&2049|0)!=0&1;_=(v&2048|0)==0?(v&1|0)==0?2720:2722:2721;w=72;break n}}case 117:{p=0;_=2720;f=s[E+40>>2]|0;d=s[E+40+4>>2]|0;w=72;break}case 99:{r[E+39>>0]=s[E+40>>2];b=E+39|0;p=0;_=2720;g=1;f=d;l=A;break}case 115:{x=s[E+40>>2]|0;x=(x|0)==0?2730:x;v=vt(x,0,l)|0;b=x;p=0;_=2720;g=(v|0)==0?l:v-x|0;f=d;l=(v|0)==0?x+l|0:v;break}case 67:{s[E+48>>2]=s[E+40>>2];s[E+48+4>>2]=0;s[E+40>>2]=E+48;p=-1;w=79;break}case 83:{if(!l){Ot(t,32,m,0,v);l=0;w=89}else{p=l;w=79}break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{l=he[u&1](t,+c[E+40>>3],m,l,v,f)|0;break e}default:{p=0;_=2720;g=l;f=v;l=A}}}while(0);n:do{if((w|0)==67){g=Tt(s[E+40>>2]|0,s[E+40+4>>2]|0,E+40|0,f&32)|0;_=(d&8|0)==0|((s[E+40>>2]|0)==0?(s[E+40+4>>2]|0)==0:0);p=_?0:2;_=_?2720:2720+(f>>>4)|0;w=73}else if((w|0)==72){g=Bt(f,d,E+40|0)|0;d=v;w=73}else if((w|0)==79){w=0;d=s[E+40>>2]|0;l=0;while(1){f=s[d>>2]|0;if(!f)break;f=Rt(E+60|0,f)|0;if((f|0)<0|f>>>0>(p-l|0)>>>0){w=83;break}l=f+l|0;if(p>>>0>l>>>0)d=d+4|0;else break}if((w|0)==83){w=0;if((f|0)<0){e=-1;break t}}Ot(t,32,m,l,v);if(!l){l=0;w=89}else{d=s[E+40>>2]|0;p=0;while(1){f=s[d>>2]|0;if(!f){w=89;break n}f=Rt(E+60|0,f)|0;p=f+p|0;if((p|0)>(l|0)){w=89;break n}St(t,E+60|0,f);if(p>>>0>=l>>>0){w=89;break}else d=d+4|0}}}}while(0);if((w|0)==73){w=0;f=s[E+40>>2]|0?1:(s[E+40+4>>2]|0)!=0;x=(l|0)!=0|f;f=A-g+((f^1)&1)|0;b=x?g:E+40|0;g=x?(l|0)>(f|0)?l:f:0;f=(l|0)>-1?d&-65537:d;l=A}else if((w|0)==89){w=0;Ot(t,32,m,l,v^8192);l=(m|0)>(l|0)?m:l;break}v=l-b|0;g=(g|0)<(v|0)?v:g;x=g+p|0;l=(m|0)<(x|0)?x:m;Ot(t,32,l,x,f);St(t,_,p);Ot(t,48,l,x,f^65536);Ot(t,48,g,v,0);St(t,b,v);Ot(t,32,l,x,f^8192)}}while(0);d=y}t:do{if((w|0)==92)if(!t)if(!d)e=0;else{e=1;while(1){l=s[o+(e<<2)>>2]|0;if(!l)break;xt(a+(e<<3)|0,l,n,h);e=e+1|0;if(e>>>0>=10){e=1;break t}}while(1){if(s[o+(e<<2)>>2]|0){e=-1;break t}e=e+1|0;if(e>>>0>=10){e=1;break}}}}while(0);$=E;return e|0}function St(t,e,n){t=t|0;e=e|0;n=n|0;if(!(s[t>>2]&32))bt(e,n,t)|0;return}function Et(t){t=t|0;var e=0,n=0;if(!(ht(r[s[t>>2]>>0]|0)|0))e=0;else{e=0;do{n=s[t>>2]|0;e=(e*10|0)+-48+(r[n>>0]|0)|0;s[t>>2]=n+1}while((ht(r[n+1>>0]|0)|0)!=0)}return e|0}function xt(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;var i=0,a=0.0;t:do{if(e>>>0<=20)do{switch(e|0){case 9:{e=(s[n>>2]|0)+(4-1)&~(4-1);r=s[e>>2]|0;s[n>>2]=e+4;s[t>>2]=r;break t}case 10:{e=(s[n>>2]|0)+(4-1)&~(4-1);r=s[e>>2]|0;s[n>>2]=e+4;s[t>>2]=r;s[t+4>>2]=((r|0)<0)<<31>>31;break t}case 11:{e=(s[n>>2]|0)+(4-1)&~(4-1);r=s[e>>2]|0;s[n>>2]=e+4;s[t>>2]=r;s[t+4>>2]=0;break t}case 12:{i=(s[n>>2]|0)+(8-1)&~(8-1);e=s[i>>2]|0;r=s[i+4>>2]|0;s[n>>2]=i+8;s[t>>2]=e;s[t+4>>2]=r;break t}case 13:{r=(s[n>>2]|0)+(4-1)&~(4-1);i=s[r>>2]|0;s[n>>2]=r+4;s[t>>2]=(i&65535)<<16>>16;s[t+4>>2]=(((i&65535)<<16>>16|0)<0)<<31>>31;break t}case 14:{r=(s[n>>2]|0)+(4-1)&~(4-1);i=s[r>>2]|0;s[n>>2]=r+4;s[t>>2]=i&65535;s[t+4>>2]=0;break t}case 15:{r=(s[n>>2]|0)+(4-1)&~(4-1);i=s[r>>2]|0;s[n>>2]=r+4;s[t>>2]=(i&255)<<24>>24;s[t+4>>2]=(((i&255)<<24>>24|0)<0)<<31>>31;break t}case 16:{r=(s[n>>2]|0)+(4-1)&~(4-1);i=s[r>>2]|0;s[n>>2]=r+4;s[t>>2]=i&255;s[t+4>>2]=0;break t}case 17:{i=(s[n>>2]|0)+(8-1)&~(8-1);a=+c[i>>3];s[n>>2]=i+8;c[t>>3]=a;break t}case 18:{de[r&1](t,n);break t}default:break t}}while(0)}while(0);return}function Tt(t,e,n,i){t=t|0;e=e|0;n=n|0;i=i|0;if(!((t|0)==0&(e|0)==0))do{n=n+-1|0;r[n>>0]=a[480+(t&15)>>0]|0|i;t=Gt(t|0,e|0,4)|0;e=C()|0}while(!((t|0)==0&(e|0)==0));return n|0}function It(t,e,n){t=t|0;e=e|0;n=n|0;if(!((t|0)==0&(e|0)==0))do{n=n+-1|0;r[n>>0]=t&7|48;t=Gt(t|0,e|0,3)|0;e=C()|0}while(!((t|0)==0&(e|0)==0));return n|0}function Bt(t,e,n){t=t|0;e=e|0;n=n|0;var i=0,s=0,a=0;if(e>>>0>0|(e|0)==0&t>>>0>4294967295){do{i=t;t=qt(t|0,e|0,10,0)|0;s=e;e=C()|0;a=zt(t|0,e|0,10,0)|0;a=Ht(i|0,s|0,a|0,C()|0)|0;C()|0;n=n+-1|0;r[n>>0]=a&255|48}while(s>>>0>9|(s|0)==9&i>>>0>4294967295);e=t}else e=t;if(e)do{a=e;e=(e>>>0)/10|0;n=n+-1|0;r[n>>0]=a-(e*10|0)|48}while(a>>>0>=10);return n|0}function Ot(t,e,n,r,i){t=t|0;e=e|0;n=n|0;r=r|0;i=i|0;var s=0;s=$;$=$+256|0;if((n|0)>(r|0)&(i&73728|0)==0){Yt(s|0,e<<24>>24|0,((n-r|0)>>>0<256?n-r|0:256)|0)|0;if((n-r|0)>>>0>255){e=n-r|0;do{St(t,s,256);e=e+-256|0}while(e>>>0>255);e=n-r&255}else e=n-r|0;St(t,s,e)}$=s;return}function Rt(t,e){t=t|0;e=e|0;if(!t)t=0;else t=Pt(t,e,0)|0;return t|0}function Pt(t,e,n){t=t|0;e=e|0;n=n|0;do{if(t){if(e>>>0<128){r[t>>0]=e;t=1;break}if(!(s[s[(Dt()|0)+188>>2]>>2]|0))if((e&-128|0)==57216){r[t>>0]=e;t=1;break}else{s[(ut()|0)>>2]=84;t=-1;break}if(e>>>0<2048){r[t>>0]=e>>>6|192;r[t+1>>0]=e&63|128;t=2;break}if(e>>>0<55296|(e&-8192|0)==57344){r[t>>0]=e>>>12|224;r[t+1>>0]=e>>>6&63|128;r[t+2>>0]=e&63|128;t=3;break}if((e+-65536|0)>>>0<1048576){r[t>>0]=e>>>18|240;r[t+1>>0]=e>>>12&63|128;r[t+2>>0]=e>>>6&63|128;r[t+3>>0]=e&63|128;t=4;break}else{s[(ut()|0)>>2]=84;t=-1;break}}else t=1}while(0);return t|0}function Dt(){return lt()|0}function Mt(t){t=+t;var e=0;c[h>>3]=t;e=s[h>>2]|0;k(s[h+4>>2]|0);return e|0}function Ft(t,e){t=+t;e=e|0;var n=0,r=0,i=0;c[h>>3]=t;n=s[h>>2]|0;r=s[h+4>>2]|0;i=Gt(n|0,r|0,52)|0;C()|0;switch(i&2047){case 0:{if(t!=0.0){t=+Ft(t*18446744073709551616.0,e);n=(s[e>>2]|0)+-64|0}else n=0;s[e>>2]=n;break}case 2047:break;default:{s[e>>2]=(i&2047)+-1022;s[h>>2]=n;s[h+4>>2]=r&-2146435073|1071644672;t=+c[h>>3]}}return+t}function jt(t,e){t=t|0;e=e|0;var n=0,i=0,a=0;if((s[e+76>>2]|0)>=0?(pt(e)|0)!=0:0){if((t&255|0)!=(r[e+75>>0]|0)?(i=s[e+20>>2]|0,i>>>0<(s[e+16>>2]|0)>>>0):0){s[e+20>>2]=i+1;r[i>>0]=t;t=t&255}else t=_t(e,t)|0;dt(e)}else a=3;do{if((a|0)==3){if((t&255|0)!=(r[e+75>>0]|0)?(n=s[e+20>>2]|0,n>>>0<(s[e+16>>2]|0)>>>0):0){s[e+20>>2]=n+1;r[n>>0]=t;t=t&255;break}t=_t(e,t)|0}}while(0);return t|0}function Lt(t){t=t|0;var e=0,n=0,r=0,i=0,a=0,o=0,u=0,c=0,h=0,l=0,f=0,d=0,p=0,_=0,g=0,b=0,v=0,m=0,y=0,w=0;w=$;$=$+16|0;do{if(t>>>0<245){f=t>>>0<11?16:t+11&-8;h=s[736]|0;if(h>>>(f>>>3)&3|0){t=2984+((h>>>(f>>>3)&1^1)+(f>>>3)<<1<<2)|0;e=s[t+8>>2]|0;n=s[e+8>>2]|0;if((n|0)==(t|0))s[736]=h&~(1<<(h>>>(f>>>3)&1^1)+(f>>>3));else{s[n+12>>2]=t;s[t+8>>2]=n}y=(h>>>(f>>>3)&1^1)+(f>>>3)<<3;s[e+4>>2]=y|3;s[e+y+4>>2]=s[e+y+4>>2]|1;y=e+8|0;$=w;return y|0}l=s[738]|0;if(f>>>0>l>>>0){if(h>>>(f>>>3)|0){t=h>>>(f>>>3)<<(f>>>3)&(2<<(f>>>3)|0-(2<<(f>>>3)));i=((t&0-t)+-1|0)>>>(((t&0-t)+-1|0)>>>12&16);r=i>>>(i>>>5&8)>>>(i>>>(i>>>5&8)>>>2&4);r=(i>>>5&8|((t&0-t)+-1|0)>>>12&16|i>>>(i>>>5&8)>>>2&4|r>>>1&2|r>>>(r>>>1&2)>>>1&1)+(r>>>(r>>>1&2)>>>(r>>>(r>>>1&2)>>>1&1))|0;i=s[2984+(r<<1<<2)+8>>2]|0;t=s[i+8>>2]|0;if((t|0)==(2984+(r<<1<<2)|0)){s[736]=h&~(1<<r);t=h&~(1<<r)}else{s[t+12>>2]=2984+(r<<1<<2);s[2984+(r<<1<<2)+8>>2]=t;t=h}s[i+4>>2]=f|3;s[i+f+4>>2]=(r<<3)-f|1;s[i+(r<<3)>>2]=(r<<3)-f;if(l|0){n=s[741]|0;if(!(t&1<<(l>>>3))){s[736]=t|1<<(l>>>3);t=2984+(l>>>3<<1<<2)|0;e=2984+(l>>>3<<1<<2)+8|0}else{t=s[2984+(l>>>3<<1<<2)+8>>2]|0;e=2984+(l>>>3<<1<<2)+8|0}s[e>>2]=n;s[t+12>>2]=n;s[n+8>>2]=t;s[n+12>>2]=2984+(l>>>3<<1<<2)}s[738]=(r<<3)-f;s[741]=i+f;y=i+8|0;$=w;return y|0}a=s[737]|0;if(a){e=((a&0-a)+-1|0)>>>(((a&0-a)+-1|0)>>>12&16);c=e>>>(e>>>5&8)>>>(e>>>(e>>>5&8)>>>2&4);c=s[3248+((e>>>5&8|((a&0-a)+-1|0)>>>12&16|e>>>(e>>>5&8)>>>2&4|c>>>1&2|c>>>(c>>>1&2)>>>1&1)+(c>>>(c>>>1&2)>>>(c>>>(c>>>1&2)>>>1&1))<<2)>>2]|0;e=c;u=c;c=(s[c+4>>2]&-8)-f|0;while(1){t=s[e+16>>2]|0;if(!t){t=s[e+20>>2]|0;if(!t)break}o=(s[t+4>>2]&-8)-f|0;i=o>>>0<c>>>0;e=t;u=i?t:u;c=i?o:c}o=u+f|0;if(o>>>0>u>>>0){i=s[u+24>>2]|0;t=s[u+12>>2]|0;do{if((t|0)==(u|0)){e=u+20|0;t=s[e>>2]|0;if(!t){e=u+16|0;t=s[e>>2]|0;if(!t){e=0;break}}while(1){r=t+20|0;n=s[r>>2]|0;if(!n){r=t+16|0;n=s[r>>2]|0;if(!n)break;else{t=n;e=r}}else{t=n;e=r}}s[e>>2]=0;e=t}else{e=s[u+8>>2]|0;s[e+12>>2]=t;s[t+8>>2]=e;e=t}}while(0);do{if(i|0){t=s[u+28>>2]|0;if((u|0)==(s[3248+(t<<2)>>2]|0)){s[3248+(t<<2)>>2]=e;if(!e){s[737]=a&~(1<<t);break}}else{s[((s[i+16>>2]|0)==(u|0)?i+16|0:i+20|0)>>2]=e;if(!e)break}s[e+24>>2]=i;t=s[u+16>>2]|0;if(t|0){s[e+16>>2]=t;s[t+24>>2]=e}t=s[u+20>>2]|0;if(t|0){s[e+20>>2]=t;s[t+24>>2]=e}}}while(0);if(c>>>0<16){y=c+f|0;s[u+4>>2]=y|3;y=u+y+4|0;s[y>>2]=s[y>>2]|1}else{s[u+4>>2]=f|3;s[o+4>>2]=c|1;s[o+c>>2]=c;if(l|0){n=s[741]|0;if(!(1<<(l>>>3)&h)){s[736]=1<<(l>>>3)|h;t=2984+(l>>>3<<1<<2)|0;e=2984+(l>>>3<<1<<2)+8|0}else{t=s[2984+(l>>>3<<1<<2)+8>>2]|0;e=2984+(l>>>3<<1<<2)+8|0}s[e>>2]=n;s[t+12>>2]=n;s[n+8>>2]=t;s[n+12>>2]=2984+(l>>>3<<1<<2)}s[738]=c;s[741]=o}y=u+8|0;$=w;return y|0}}}}else if(t>>>0<=4294967231){f=t+11&-8;r=s[737]|0;if(r){if((t+11|0)>>>8)if(f>>>0>16777215)u=31;else{u=(t+11|0)>>>8<<((((t+11|0)>>>8)+1048320|0)>>>16&8);u=14-((u+520192|0)>>>16&4|(((t+11|0)>>>8)+1048320|0)>>>16&8|((u<<((u+520192|0)>>>16&4))+245760|0)>>>16&2)+(u<<((u+520192|0)>>>16&4)<<(((u<<((u+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;u=f>>>(u+7|0)&1|u<<1}else u=0;t=s[3248+(u<<2)>>2]|0;t:do{if(!t){n=0;t=0;e=0-f|0;_=61}else{a=0;e=0-f|0;o=f<<((u|0)==31?0:25-(u>>>1)|0);n=0;while(1){i=(s[t+4>>2]&-8)-f|0;if(i>>>0<e>>>0)if(!i){i=t;e=0;n=t;_=65;break t}else{a=t;e=i}_=s[t+20>>2]|0;t=s[t+16+(o>>>31<<2)>>2]|0;n=(_|0)==0|(_|0)==(t|0)?n:_;if(!t){t=a;_=61;break}else o=o<<1}}}while(0);if((_|0)==61){if((n|0)==0&(t|0)==0){t=2<<u;if(!((t|0-t)&r))break;h=((t|0-t)&r&0-((t|0-t)&r))+-1|0;l=h>>>(h>>>12&16)>>>(h>>>(h>>>12&16)>>>5&8);n=l>>>(l>>>2&4)>>>(l>>>(l>>>2&4)>>>1&2);t=0;n=s[3248+((h>>>(h>>>12&16)>>>5&8|h>>>12&16|l>>>2&4|l>>>(l>>>2&4)>>>1&2|n>>>1&1)+(n>>>(n>>>1&1))<<2)>>2]|0}if(!n){u=t;o=e}else{i=t;_=65}}if((_|0)==65)while(1){l=(s[n+4>>2]&-8)-f|0;t=l>>>0<e>>>0;e=t?l:e;i=t?n:i;t=s[n+16>>2]|0;if(!t)t=s[n+20>>2]|0;if(!t){u=i;o=e;break}else n=t}if(((u|0)!=0?o>>>0<((s[738]|0)-f|0)>>>0:0)?(c=u+f|0,c>>>0>u>>>0):0){a=s[u+24>>2]|0;t=s[u+12>>2]|0;do{if((t|0)==(u|0)){e=u+20|0;t=s[e>>2]|0;if(!t){e=u+16|0;t=s[e>>2]|0;if(!t){t=0;break}}while(1){i=t+20|0;n=s[i>>2]|0;if(!n){i=t+16|0;n=s[i>>2]|0;if(!n)break;else{t=n;e=i}}else{t=n;e=i}}s[e>>2]=0}else{y=s[u+8>>2]|0;s[y+12>>2]=t;s[t+8>>2]=y}}while(0);do{if(a){e=s[u+28>>2]|0;if((u|0)==(s[3248+(e<<2)>>2]|0)){s[3248+(e<<2)>>2]=t;if(!t){s[737]=r&~(1<<e);r=r&~(1<<e);break}}else{s[((s[a+16>>2]|0)==(u|0)?a+16|0:a+20|0)>>2]=t;if(!t)break}s[t+24>>2]=a;e=s[u+16>>2]|0;if(e|0){s[t+16>>2]=e;s[e+24>>2]=t}e=s[u+20>>2]|0;if(e){s[t+20>>2]=e;s[e+24>>2]=t}}}while(0);t:do{if(o>>>0<16){y=o+f|0;s[u+4>>2]=y|3;y=u+y+4|0;s[y>>2]=s[y>>2]|1}else{s[u+4>>2]=f|3;s[c+4>>2]=o|1;s[c+o>>2]=o;n=o>>>3;if(o>>>0<256){t=s[736]|0;if(!(t&1<<n)){s[736]=t|1<<n;t=2984+(n<<1<<2)|0;e=2984+(n<<1<<2)+8|0}else{t=s[2984+(n<<1<<2)+8>>2]|0;e=2984+(n<<1<<2)+8|0}s[e>>2]=c;s[t+12>>2]=c;s[c+8>>2]=t;s[c+12>>2]=2984+(n<<1<<2);break}t=o>>>8;if(t)if(o>>>0>16777215)n=31;else{n=t<<((t+1048320|0)>>>16&8)<<(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4);n=14-(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4|(t+1048320|0)>>>16&8|(n+245760|0)>>>16&2)+(n<<((n+245760|0)>>>16&2)>>>15)|0;n=o>>>(n+7|0)&1|n<<1}else n=0;t=3248+(n<<2)|0;s[c+28>>2]=n;s[c+16+4>>2]=0;s[c+16>>2]=0;e=1<<n;if(!(r&e)){s[737]=r|e;s[t>>2]=c;s[c+24>>2]=t;s[c+12>>2]=c;s[c+8>>2]=c;break}t=s[t>>2]|0;e:do{if((s[t+4>>2]&-8|0)!=(o|0)){r=o<<((n|0)==31?0:25-(n>>>1)|0);while(1){n=t+16+(r>>>31<<2)|0;e=s[n>>2]|0;if(!e)break;if((s[e+4>>2]&-8|0)==(o|0)){t=e;break e}else{r=r<<1;t=e}}s[n>>2]=c;s[c+24>>2]=t;s[c+12>>2]=c;s[c+8>>2]=c;break t}}while(0);m=t+8|0;y=s[m>>2]|0;s[y+12>>2]=c;s[m>>2]=c;s[c+8>>2]=y;s[c+12>>2]=t;s[c+24>>2]=0}}while(0);y=u+8|0;$=w;return y|0}}}else f=-1}while(0);n=s[738]|0;if(n>>>0>=f>>>0){t=n-f|0;e=s[741]|0;if(t>>>0>15){y=e+f|0;s[741]=y;s[738]=t;s[y+4>>2]=t|1;s[e+n>>2]=t;s[e+4>>2]=f|3}else{s[738]=0;s[741]=0;s[e+4>>2]=n|3;s[e+n+4>>2]=s[e+n+4>>2]|1}y=e+8|0;$=w;return y|0}i=s[739]|0;if(i>>>0>f>>>0){v=i-f|0;s[739]=v;y=s[742]|0;m=y+f|0;s[742]=m;s[m+4>>2]=v|1;s[y+4>>2]=f|3;y=y+8|0;$=w;return y|0}if(!(s[854]|0)){s[856]=4096;s[855]=4096;s[857]=-1;s[858]=-1;s[859]=0;s[847]=0;s[854]=w&-16^1431655768;t=4096}else t=s[856]|0;a=f+48|0;o=f+47|0;c=t+o|0;u=0-t|0;if((c&u)>>>0<=f>>>0){y=0;$=w;return y|0}t=s[846]|0;if(t|0?(l=s[844]|0,(l+(c&u)|0)>>>0<=l>>>0?1:(l+(c&u)|0)>>>0>t>>>0):0){y=0;$=w;return y|0}t:do{if(!(s[847]&4)){n=s[742]|0;e:do{if(n){e=3392;while(1){l=s[e>>2]|0;if(l>>>0<=n>>>0?(l+(s[e+4>>2]|0)|0)>>>0>n>>>0:0)break;t=s[e+8>>2]|0;if(!t){_=128;break e}else e=t}if((c-i&u)>>>0<2147483647){t=Zt(c-i&u|0)|0;if((t|0)==((s[e>>2]|0)+(s[e+4>>2]|0)|0))if((t|0)==(-1|0))t=c-i&u;else{o=c-i&u;i=t;_=145;break t}else{r=t;n=c-i&u;_=136}}else t=0}else _=128}while(0);do{if((_|0)==128){e=Zt(0)|0;if((e|0)!=(-1|0)?(p=s[855]|0,p=((p+-1&e|0)==0?0:(p+-1+e&0-p)-e|0)+(c&u)|0,d=s[844]|0,p>>>0>f>>>0&p>>>0<2147483647):0){l=s[846]|0;if(l|0?(p+d|0)>>>0<=d>>>0|(p+d|0)>>>0>l>>>0:0){t=0;break}t=Zt(p|0)|0;if((t|0)==(e|0)){o=p;i=e;_=145;break t}else{r=t;n=p;_=136}}else t=0}}while(0);do{if((_|0)==136){e=0-n|0;if(!(a>>>0>n>>>0&(n>>>0<2147483647&(r|0)!=(-1|0))))if((r|0)==(-1|0)){t=0;break}else{o=n;i=r;_=145;break t}t=s[856]|0;t=o-n+t&0-t;if(t>>>0>=2147483647){o=n;i=r;_=145;break t}if((Zt(t|0)|0)==(-1|0)){Zt(e|0)|0;t=0;break}else{o=t+n|0;i=r;_=145;break t}}}while(0);s[847]=s[847]|4;_=143}else{t=0;_=143}}while(0);if(((_|0)==143?(c&u)>>>0<2147483647:0)?(v=Zt(c&u|0)|0,g=Zt(0)|0,b=(g-v|0)>>>0>(f+40|0)>>>0,!((v|0)==(-1|0)|b^1|v>>>0<g>>>0&((v|0)!=(-1|0)&(g|0)!=(-1|0))^1)):0){o=b?g-v|0:t;i=v;_=145}if((_|0)==145){t=(s[844]|0)+o|0;s[844]=t;if(t>>>0>(s[845]|0)>>>0)s[845]=t;c=s[742]|0;t:do{if(c){t=3392;while(1){e=s[t>>2]|0;n=s[t+4>>2]|0;if((i|0)==(e+n|0)){_=154;break}r=s[t+8>>2]|0;if(!r)break;else t=r}if(((_|0)==154?(m=t+4|0,(s[t+12>>2]&8|0)==0):0)?i>>>0>c>>>0&e>>>0<=c>>>0:0){s[m>>2]=n+o;y=(s[739]|0)+o|0;m=(c+8&7|0)==0?0:0-(c+8)&7;s[742]=c+m;s[739]=y-m;s[c+m+4>>2]=y-m|1;s[c+y+4>>2]=40;s[743]=s[858];break}if(i>>>0<(s[740]|0)>>>0)s[740]=i;n=i+o|0;t=3392;while(1){if((s[t>>2]|0)==(n|0)){_=162;break}e=s[t+8>>2]|0;if(!e)break;else t=e}if((_|0)==162?(s[t+12>>2]&8|0)==0:0){s[t>>2]=i;l=t+4|0;s[l>>2]=(s[l>>2]|0)+o;l=i+8|0;l=i+((l&7|0)==0?0:0-l&7)|0;t=n+((n+8&7|0)==0?0:0-(n+8)&7)|0;h=l+f|0;u=t-l-f|0;s[l+4>>2]=f|3;e:do{if((c|0)==(t|0)){y=(s[739]|0)+u|0;s[739]=y;s[742]=h;s[h+4>>2]=y|1}else{if((s[741]|0)==(t|0)){y=(s[738]|0)+u|0;s[738]=y;s[741]=h;s[h+4>>2]=y|1;s[h+y>>2]=y;break}o=s[t+4>>2]|0;if((o&3|0)==1){n:do{if(o>>>0<256){e=s[t+8>>2]|0;n=s[t+12>>2]|0;if((n|0)==(e|0)){s[736]=s[736]&~(1<<(o>>>3));break}else{s[e+12>>2]=n;s[n+8>>2]=e;break}}else{a=s[t+24>>2]|0;e=s[t+12>>2]|0;do{if((e|0)==(t|0)){e=s[t+16+4>>2]|0;if(!e){e=s[t+16>>2]|0;if(!e){e=0;break}else n=t+16|0}else n=t+16+4|0;while(1){i=e+20|0;r=s[i>>2]|0;if(!r){i=e+16|0;r=s[i>>2]|0;if(!r)break;else{e=r;n=i}}else{e=r;n=i}}s[n>>2]=0}else{y=s[t+8>>2]|0;s[y+12>>2]=e;s[e+8>>2]=y}}while(0);if(!a)break;n=s[t+28>>2]|0;do{if((s[3248+(n<<2)>>2]|0)!=(t|0)){s[((s[a+16>>2]|0)==(t|0)?a+16|0:a+20|0)>>2]=e;if(!e)break n}else{s[3248+(n<<2)>>2]=e;if(e|0)break;s[737]=s[737]&~(1<<n);break n}}while(0);s[e+24>>2]=a;n=s[t+16>>2]|0;if(n|0){s[e+16>>2]=n;s[n+24>>2]=e}n=s[t+16+4>>2]|0;if(!n)break;s[e+20>>2]=n;s[n+24>>2]=e}}while(0);t=t+(o&-8)|0;i=(o&-8)+u|0}else i=u;n=t+4|0;s[n>>2]=s[n>>2]&-2;s[h+4>>2]=i|1;s[h+i>>2]=i;n=i>>>3;if(i>>>0<256){t=s[736]|0;if(!(t&1<<n)){s[736]=t|1<<n;t=2984+(n<<1<<2)|0;e=2984+(n<<1<<2)+8|0}else{t=s[2984+(n<<1<<2)+8>>2]|0;e=2984+(n<<1<<2)+8|0}s[e>>2]=h;s[t+12>>2]=h;s[h+8>>2]=t;s[h+12>>2]=2984+(n<<1<<2);break}t=i>>>8;do{if(!t)r=0;else{if(i>>>0>16777215){r=31;break}r=t<<((t+1048320|0)>>>16&8)<<(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4);r=14-(((t<<((t+1048320|0)>>>16&8))+520192|0)>>>16&4|(t+1048320|0)>>>16&8|(r+245760|0)>>>16&2)+(r<<((r+245760|0)>>>16&2)>>>15)|0;r=i>>>(r+7|0)&1|r<<1}}while(0);t=3248+(r<<2)|0;s[h+28>>2]=r;s[h+16+4>>2]=0;s[h+16>>2]=0;e=s[737]|0;n=1<<r;if(!(e&n)){s[737]=e|n;s[t>>2]=h;s[h+24>>2]=t;s[h+12>>2]=h;s[h+8>>2]=h;break}t=s[t>>2]|0;n:do{if((s[t+4>>2]&-8|0)!=(i|0)){r=i<<((r|0)==31?0:25-(r>>>1)|0);while(1){n=t+16+(r>>>31<<2)|0;e=s[n>>2]|0;if(!e)break;if((s[e+4>>2]&-8|0)==(i|0)){t=e;break n}else{r=r<<1;t=e}}s[n>>2]=h;s[h+24>>2]=t;s[h+12>>2]=h;s[h+8>>2]=h;break e}}while(0);m=t+8|0;y=s[m>>2]|0;s[y+12>>2]=h;s[m>>2]=h;s[h+8>>2]=y;s[h+12>>2]=t;s[h+24>>2]=0}}while(0);y=l+8|0;$=w;return y|0}t=3392;while(1){e=s[t>>2]|0;if(e>>>0<=c>>>0?(y=e+(s[t+4>>2]|0)|0,y>>>0>c>>>0):0)break;t=s[t+8>>2]|0}a=y+-47+((y+-47+8&7|0)==0?0:0-(y+-47+8)&7)|0;a=a>>>0<(c+16|0)>>>0?c:a;t=o+-40|0;v=i+8|0;v=(v&7|0)==0?0:0-v&7;m=i+v|0;s[742]=m;s[739]=t-v;s[m+4>>2]=t-v|1;s[i+t+4>>2]=40;s[743]=s[858];s[a+4>>2]=27;s[a+8>>2]=s[848];s[a+8+4>>2]=s[849];s[a+8+8>>2]=s[850];s[a+8+12>>2]=s[851];s[848]=i;s[849]=o;s[851]=0;s[850]=a+8;t=a+24|0;do{m=t;t=t+4|0;s[t>>2]=7}while((m+8|0)>>>0<y>>>0);if((a|0)!=(c|0)){s[a+4>>2]=s[a+4>>2]&-2;s[c+4>>2]=a-c|1;s[a>>2]=a-c;if((a-c|0)>>>0<256){n=2984+((a-c|0)>>>3<<1<<2)|0;t=s[736]|0;if(!(t&1<<((a-c|0)>>>3))){s[736]=t|1<<((a-c|0)>>>3);t=n;e=n+8|0}else{t=s[n+8>>2]|0;e=n+8|0}s[e>>2]=c;s[t+12>>2]=c;s[c+8>>2]=t;s[c+12>>2]=n;break}if((a-c|0)>>>8)if((a-c|0)>>>0>16777215)r=31;else{r=(a-c|0)>>>8<<((((a-c|0)>>>8)+1048320|0)>>>16&8);r=14-((r+520192|0)>>>16&4|(((a-c|0)>>>8)+1048320|0)>>>16&8|((r<<((r+520192|0)>>>16&4))+245760|0)>>>16&2)+(r<<((r+520192|0)>>>16&4)<<(((r<<((r+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;r=(a-c|0)>>>(r+7|0)&1|r<<1}else r=0;t=3248+(r<<2)|0;s[c+28>>2]=r;s[c+20>>2]=0;s[c+16>>2]=0;e=s[737]|0;n=1<<r;if(!(e&n)){s[737]=e|n;s[t>>2]=c;s[c+24>>2]=t;s[c+12>>2]=c;s[c+8>>2]=c;break}t=s[t>>2]|0;e:do{if((s[t+4>>2]&-8|0)!=(a-c|0)){r=a-c<<((r|0)==31?0:25-(r>>>1)|0);while(1){n=t+16+(r>>>31<<2)|0;e=s[n>>2]|0;if(!e)break;if((s[e+4>>2]&-8|0)==(a-c|0)){t=e;break e}else{r=r<<1;t=e}}s[n>>2]=c;s[c+24>>2]=t;s[c+12>>2]=c;s[c+8>>2]=c;break t}}while(0);m=t+8|0;y=s[m>>2]|0;s[y+12>>2]=c;s[m>>2]=c;s[c+8>>2]=y;s[c+12>>2]=t;s[c+24>>2]=0}}else{y=s[740]|0;if((y|0)==0|i>>>0<y>>>0)s[740]=i;s[848]=i;s[849]=o;s[851]=0;s[745]=s[854];s[744]=-1;s[749]=2984;s[748]=2984;s[751]=2992;s[750]=2992;s[753]=3e3;s[752]=3e3;s[755]=3008;s[754]=3008;s[757]=3016;s[756]=3016;s[759]=3024;s[758]=3024;s[761]=3032;s[760]=3032;s[763]=3040;s[762]=3040;s[765]=3048;s[764]=3048;s[767]=3056;s[766]=3056;s[769]=3064;s[768]=3064;s[771]=3072;s[770]=3072;s[773]=3080;s[772]=3080;s[775]=3088;s[774]=3088;s[777]=3096;s[776]=3096;s[779]=3104;s[778]=3104;s[781]=3112;s[780]=3112;s[783]=3120;s[782]=3120;s[785]=3128;s[784]=3128;s[787]=3136;s[786]=3136;s[789]=3144;s[788]=3144;s[791]=3152;s[790]=3152;s[793]=3160;s[792]=3160;s[795]=3168;s[794]=3168;s[797]=3176;s[796]=3176;s[799]=3184;s[798]=3184;s[801]=3192;s[800]=3192;s[803]=3200;s[802]=3200;s[805]=3208;s[804]=3208;s[807]=3216;s[806]=3216;s[809]=3224;s[808]=3224;s[811]=3232;s[810]=3232;y=o+-40|0;v=i+8|0;v=(v&7|0)==0?0:0-v&7;m=i+v|0;s[742]=m;s[739]=y-v;s[m+4>>2]=y-v|1;s[i+y+4>>2]=40;s[743]=s[858]}}while(0);t=s[739]|0;if(t>>>0>f>>>0){v=t-f|0;s[739]=v;y=s[742]|0;m=y+f|0;s[742]=m;s[m+4>>2]=v|1;s[y+4>>2]=f|3;y=y+8|0;$=w;return y|0}}s[(ut()|0)>>2]=12;y=0;$=w;return y|0}function Nt(t){t=t|0;var e=0,n=0,r=0,i=0,a=0,o=0,u=0,c=0;if(!t)return;e=s[740]|0;n=s[t+-4>>2]|0;c=t+-8+(n&-8)|0;do{if(!(n&1)){r=s[t+-8>>2]|0;if(!(n&3))return;o=t+-8+(0-r)|0;a=r+(n&-8)|0;if(o>>>0<e>>>0)return;if((s[741]|0)==(o|0)){e=s[c+4>>2]|0;if((e&3|0)!=3){u=o;e=a;break}s[738]=a;s[c+4>>2]=e&-2;s[o+4>>2]=a|1;s[o+a>>2]=a;return}if(r>>>0<256){e=s[o+8>>2]|0;t=s[o+12>>2]|0;if((t|0)==(e|0)){s[736]=s[736]&~(1<<(r>>>3));u=o;e=a;break}else{s[e+12>>2]=t;s[t+8>>2]=e;u=o;e=a;break}}i=s[o+24>>2]|0;e=s[o+12>>2]|0;do{if((e|0)==(o|0)){e=s[o+16+4>>2]|0;if(!e){e=s[o+16>>2]|0;if(!e){e=0;break}else t=o+16|0}else t=o+16+4|0;while(1){r=e+20|0;n=s[r>>2]|0;if(!n){r=e+16|0;n=s[r>>2]|0;if(!n)break;else{e=n;t=r}}else{e=n;t=r}}s[t>>2]=0}else{u=s[o+8>>2]|0;s[u+12>>2]=e;s[e+8>>2]=u}}while(0);if(i){t=s[o+28>>2]|0;if((s[3248+(t<<2)>>2]|0)==(o|0)){s[3248+(t<<2)>>2]=e;if(!e){s[737]=s[737]&~(1<<t);u=o;e=a;break}}else{s[((s[i+16>>2]|0)==(o|0)?i+16|0:i+20|0)>>2]=e;if(!e){u=o;e=a;break}}s[e+24>>2]=i;t=s[o+16>>2]|0;if(t|0){s[e+16>>2]=t;s[t+24>>2]=e}t=s[o+16+4>>2]|0;if(t){s[e+20>>2]=t;s[t+24>>2]=e;u=o;e=a}else{u=o;e=a}}else{u=o;e=a}}else{u=t+-8|0;e=n&-8;o=t+-8|0}}while(0);if(o>>>0>=c>>>0)return;n=s[c+4>>2]|0;if(!(n&1))return;if(!(n&2)){if((s[742]|0)==(c|0)){c=(s[739]|0)+e|0;s[739]=c;s[742]=u;s[u+4>>2]=c|1;if((u|0)!=(s[741]|0))return;s[741]=0;s[738]=0;return}if((s[741]|0)==(c|0)){c=(s[738]|0)+e|0;s[738]=c;s[741]=o;s[u+4>>2]=c|1;s[o+c>>2]=c;return}i=(n&-8)+e|0;do{if(n>>>0<256){t=s[c+8>>2]|0;e=s[c+12>>2]|0;if((e|0)==(t|0)){s[736]=s[736]&~(1<<(n>>>3));break}else{s[t+12>>2]=e;s[e+8>>2]=t;break}}else{a=s[c+24>>2]|0;e=s[c+12>>2]|0;do{if((e|0)==(c|0)){e=s[c+16+4>>2]|0;if(!e){e=s[c+16>>2]|0;if(!e){t=0;break}else t=c+16|0}else t=c+16+4|0;while(1){r=e+20|0;n=s[r>>2]|0;if(!n){r=e+16|0;n=s[r>>2]|0;if(!n)break;else{e=n;t=r}}else{e=n;t=r}}s[t>>2]=0;t=e}else{t=s[c+8>>2]|0;s[t+12>>2]=e;s[e+8>>2]=t;t=e}}while(0);if(a|0){e=s[c+28>>2]|0;if((s[3248+(e<<2)>>2]|0)==(c|0)){s[3248+(e<<2)>>2]=t;if(!t){s[737]=s[737]&~(1<<e);break}}else{s[((s[a+16>>2]|0)==(c|0)?a+16|0:a+20|0)>>2]=t;if(!t)break}s[t+24>>2]=a;e=s[c+16>>2]|0;if(e|0){s[t+16>>2]=e;s[e+24>>2]=t}e=s[c+16+4>>2]|0;if(e|0){s[t+20>>2]=e;s[e+24>>2]=t}}}}while(0);s[u+4>>2]=i|1;s[o+i>>2]=i;if((u|0)==(s[741]|0)){s[738]=i;return}}else{s[c+4>>2]=n&-2;s[u+4>>2]=e|1;s[o+e>>2]=e;i=e}n=i>>>3;if(i>>>0<256){e=s[736]|0;if(!(e&1<<n)){s[736]=e|1<<n;e=2984+(n<<1<<2)|0;t=2984+(n<<1<<2)+8|0}else{e=s[2984+(n<<1<<2)+8>>2]|0;t=2984+(n<<1<<2)+8|0}s[t>>2]=u;s[e+12>>2]=u;s[u+8>>2]=e;s[u+12>>2]=2984+(n<<1<<2);return}e=i>>>8;if(e)if(i>>>0>16777215)r=31;else{r=e<<((e+1048320|0)>>>16&8)<<(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4);r=14-(((e<<((e+1048320|0)>>>16&8))+520192|0)>>>16&4|(e+1048320|0)>>>16&8|(r+245760|0)>>>16&2)+(r<<((r+245760|0)>>>16&2)>>>15)|0;r=i>>>(r+7|0)&1|r<<1}else r=0;e=3248+(r<<2)|0;s[u+28>>2]=r;s[u+20>>2]=0;s[u+16>>2]=0;t=s[737]|0;n=1<<r;t:do{if(!(t&n)){s[737]=t|n;s[e>>2]=u;s[u+24>>2]=e;s[u+12>>2]=u;s[u+8>>2]=u}else{e=s[e>>2]|0;e:do{if((s[e+4>>2]&-8|0)!=(i|0)){r=i<<((r|0)==31?0:25-(r>>>1)|0);while(1){n=e+16+(r>>>31<<2)|0;t=s[n>>2]|0;if(!t)break;if((s[t+4>>2]&-8|0)==(i|0)){e=t;break e}else{r=r<<1;e=t}}s[n>>2]=u;s[u+24>>2]=e;s[u+12>>2]=u;s[u+8>>2]=u;break t}}while(0);o=e+8|0;c=s[o>>2]|0;s[c+12>>2]=u;s[o>>2]=u;s[u+8>>2]=c;s[u+12>>2]=e;s[u+24>>2]=0}}while(0);c=(s[744]|0)+-1|0;s[744]=c;if(c|0)return;e=3400;while(1){e=s[e>>2]|0;if(!e)break;else e=e+8|0}s[744]=-1;return}function Ut(t,e){t=t|0;e=e|0;var n=0,r=0,i=0;n=y(e&65535,t&65535)|0;i=(n>>>16)+(y(e&65535,t>>>16)|0)|0;r=y(e>>>16,t&65535)|0;return(k((i>>>16)+(y(e>>>16,t>>>16)|0)+(((i&65535)+r|0)>>>16)|0),i+r<<16|n&65535|0)|0}function zt(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;var i=0,s=0;i=Ut(t,n)|0;s=C()|0;return(k((y(e,n)|0)+(y(r,t)|0)+s|s&0|0),i|0|0)|0}function $t(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;return(k(e+r+(t+n>>>0>>>0<t>>>0|0)>>>0|0),t+n>>>0|0)|0}function Ht(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;r=e-r-(n>>>0>t>>>0|0)>>>0;return(k(r|0),t-n>>>0|0)|0}function Wt(t){t=t|0;return(t?31-(w(t^t-1)|0)|0:32)|0}function Vt(t,e,n,r,i){t=t|0;e=e|0;n=n|0;r=r|0;i=i|0;var a=0,o=0,u=0,c=0,h=0,l=0,f=0,d=0,p=0,_=0;if(!e)if(!r){if(i|0){s[i>>2]=(t>>>0)%(n>>>0);s[i+4>>2]=0}r=0;i=(t>>>0)/(n>>>0)>>>0;return(k(r|0),i)|0}else{if(!i){r=0;i=0;return(k(r|0),i)|0}s[i>>2]=t|0;s[i+4>>2]=e&0;r=0;i=0;return(k(r|0),i)|0}do{if(n){if(r|0){o=(w(r|0)|0)-(w(e|0)|0)|0;if(o>>>0<=31){d=o+1|0;u=t>>>((o+1|0)>>>0)&o-31>>31|e<<31-o;f=e>>>((o+1|0)>>>0)&o-31>>31;a=0;o=t<<31-o;break}if(!i){r=0;i=0;return(k(r|0),i)|0}s[i>>2]=t|0;s[i+4>>2]=e|e&0;r=0;i=0;return(k(r|0),i)|0}if(n-1&n|0){o=(w(n|0)|0)+33-(w(e|0)|0)|0;d=o;u=32-o-1>>31&e>>>((o-32|0)>>>0)|(e<<32-o|t>>>(o>>>0))&o-32>>31;f=o-32>>31&e>>>(o>>>0);a=t<<64-o&32-o>>31;o=(e<<64-o|t>>>((o-32|0)>>>0))&32-o>>31|t<<32-o&o-33>>31;break}if(i|0){s[i>>2]=n-1&t;s[i+4>>2]=0}if((n|0)==1){r=e|e&0;i=t|0|0;return(k(r|0),i)|0}else{i=Wt(n|0)|0;r=e>>>(i>>>0)|0;i=e<<32-i|t>>>(i>>>0)|0;return(k(r|0),i)|0}}else{if(!r){if(i|0){s[i>>2]=(e>>>0)%(n>>>0);s[i+4>>2]=0}r=0;i=(e>>>0)/(n>>>0)>>>0;return(k(r|0),i)|0}if(!t){if(i|0){s[i>>2]=0;s[i+4>>2]=(e>>>0)%(r>>>0)}n=0;i=(e>>>0)/(r>>>0)>>>0;return(k(n|0),i)|0}if(!(r-1&r)){if(i|0){s[i>>2]=t|0;s[i+4>>2]=r-1&e|e&0}n=0;i=e>>>((Wt(r|0)|0)>>>0);return(k(n|0),i)|0}o=(w(r|0)|0)-(w(e|0)|0)|0;if(o>>>0<=30){d=o+1|0;u=e<<31-o|t>>>((o+1|0)>>>0);f=e>>>((o+1|0)>>>0);a=0;o=t<<31-o;break}if(!i){r=0;i=0;return(k(r|0),i)|0}s[i>>2]=t|0;s[i+4>>2]=e|e&0;r=0;i=0;return(k(r|0),i)|0}}while(0);if(!d){c=o;e=f;t=0;o=0}else{h=$t(n|0|0,r|r&0|0,-1,-1)|0;l=C()|0;c=o;e=f;t=d;o=0;do{_=c;c=a>>>31|c<<1;a=o|a<<1;_=u<<1|_>>>31|0;p=u>>>31|e<<1|0;Ht(h|0,l|0,_|0,p|0)|0;d=C()|0;f=d>>31|((d|0)<0?-1:0)<<1;o=f&1;u=Ht(_|0,p|0,f&(n|0)|0,(((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1)&(r|r&0)|0)|0;e=C()|0;t=t-1|0}while((t|0)!=0);t=0}if(i|0){s[i>>2]=u;s[i+4>>2]=e}p=(a|0)>>>31|c<<1|(0<<1|a>>>31)&0|t;_=(a<<1|0>>>31)&-2|o;return(k(p|0),_)|0}function qt(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;return Vt(t,e,n,r,0)|0}function Gt(t,e,n){t=t|0;e=e|0;n=n|0;if((n|0)<32){k(e>>>n|0);return t>>>n|(e&(1<<n)-1)<<32-n}k(0);return e>>>n-32|0}function Qt(t,e,n){t=t|0;e=e|0;n=n|0;if((n|0)<32){k(e<<n|(t&(1<<n)-1<<32-n)>>>32-n|0);return t<<n}k(t<<n-32|0);return 0}function Jt(t){t=t|0;return(t&255)<<24|(t>>8&255)<<16|(t>>16&255)<<8|t>>>24|0}function Kt(t,e,n){t=t|0;e=e|0;n=n|0;var i=0,a=0,o=0;if((n|0)>=8192){R(t|0,e|0,n|0)|0;return t|0}o=t|0;a=t+n|0;if((t&3)==(e&3)){while(t&3){if(!n)return o|0;r[t>>0]=r[e>>0]|0;t=t+1|0;e=e+1|0;n=n-1|0}n=a&-4|0;i=n-64|0;while((t|0)<=(i|0)){s[t>>2]=s[e>>2];s[t+4>>2]=s[e+4>>2];s[t+8>>2]=s[e+8>>2];s[t+12>>2]=s[e+12>>2];s[t+16>>2]=s[e+16>>2];s[t+20>>2]=s[e+20>>2];s[t+24>>2]=s[e+24>>2];s[t+28>>2]=s[e+28>>2];s[t+32>>2]=s[e+32>>2];s[t+36>>2]=s[e+36>>2];s[t+40>>2]=s[e+40>>2];s[t+44>>2]=s[e+44>>2];s[t+48>>2]=s[e+48>>2];s[t+52>>2]=s[e+52>>2];s[t+56>>2]=s[e+56>>2];s[t+60>>2]=s[e+60>>2];t=t+64|0;e=e+64|0}while((t|0)<(n|0)){s[t>>2]=s[e>>2];t=t+4|0;e=e+4|0}}else{n=a-4|0;while((t|0)<(n|0)){r[t>>0]=r[e>>0]|0;r[t+1>>0]=r[e+1>>0]|0;r[t+2>>0]=r[e+2>>0]|0;r[t+3>>0]=r[e+3>>0]|0;t=t+4|0;e=e+4|0}}while((t|0)<(a|0)){r[t>>0]=r[e>>0]|0;t=t+1|0;e=e+1|0}return o|0}function Yt(t,e,n){t=t|0;e=e|0;n=n|0;var i=0,a=0;i=t+n|0;e=e&255;if((n|0)>=67){while(t&3){r[t>>0]=e;t=t+1|0}a=e|e<<8|e<<16|e<<24;while((t|0)<=((i&-4)-64|0)){s[t>>2]=a;s[t+4>>2]=a;s[t+8>>2]=a;s[t+12>>2]=a;s[t+16>>2]=a;s[t+20>>2]=a;s[t+24>>2]=a;s[t+28>>2]=a;s[t+32>>2]=a;s[t+36>>2]=a;s[t+40>>2]=a;s[t+44>>2]=a;s[t+48>>2]=a;s[t+52>>2]=a;s[t+56>>2]=a;s[t+60>>2]=a;t=t+64|0}while((t|0)<(i&-4|0)){s[t>>2]=a;t=t+4|0}}while((t|0)<(i|0)){r[t>>0]=e;t=t+1|0}return i-n|0}function Zt(t){t=t|0;var e=0,n=0;n=O()|0;e=s[l>>2]|0;if((t|0)>0&(e+t|0)<(e|0)|(e+t|0)<0){F(e+t|0)|0;S(12);return-1}if((e+t|0)>(n|0))if(!(P(e+t|0)|0)){S(12);return-1}s[l>>2]=e+t;return e|0}function Xt(t,e){t=t|0;e=e|0;return ce[t&1](e|0)|0}function te(t,e,n,r,i,s,a){t=t|0;e=e|0;n=+n;r=r|0;i=i|0;s=s|0;a=a|0;return he[t&1](e|0,+n,r|0,i|0,s|0,a|0)|0}function ee(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;return le[t&1](e|0,n|0,r|0)|0}function ne(t,e,n,r,i){t=t|0;e=e|0;n=n|0;r=r|0;i=i|0;return fe[t&1](e|0,n|0,r|0,i|0)|0}function re(t,e,n){t=t|0;e=e|0;n=n|0;de[t&1](e|0,n|0)}function ie(t){t=t|0;A(0);return 0}function se(t,e,n,r,i,s){t=t|0;e=+e;n=n|0;r=r|0;i=i|0;s=s|0;A(1);return 0}function ae(t,e,n){t=t|0;e=e|0;n=n|0;A(2);return 0}function oe(t,e,n,r){t=t|0;e=e|0;n=n|0;r=r|0;A(3);return 0}function ue(t,e){t=t|0;e=e|0;A(4)}var ce=[ie,it];var he=[se,wt];var le=[ae,st];var fe=[oe,at];var de=[ue,At];return{___errno_location:ut,___muldi3:zt,___udivdi3:qt,_abort_run:Z,_bitshift64Lshr:Gt,_bitshift64Shl:Qt,_enable_debug:X,_free:Nt,_i64Add:$t,_i64Subtract:Ht,_llvm_bswap_i32:Jt,_malloc:Lt,_memcpy:Kt,_memset:Yt,_ping:K,_read_register:tt,_reset:nt,_run:Y,_sbrk:Zt,_set_stop_address:J,_write_register:et,dynCall_ii:Xt,dynCall_iidiiii:te,dynCall_iiii:ee,dynCall_iiiii:ne,dynCall_vii:re,establishStackSpace:Q,stackAlloc:V,stackRestore:G,stackSave:q}}(Rt,Pt,T),Mt=(t.___errno_location=Dt.___errno_location,t.___muldi3=Dt.___muldi3,t.___udivdi3=Dt.___udivdi3,t._abort_run=Dt._abort_run,t._bitshift64Lshr=Dt._bitshift64Lshr,t._bitshift64Shl=Dt._bitshift64Shl,t._enable_debug=Dt._enable_debug,t._free=Dt._free,t._i64Add=Dt._i64Add,t._i64Subtract=Dt._i64Subtract,t._llvm_bswap_i32=Dt._llvm_bswap_i32,t._malloc=Dt._malloc,t._memcpy=Dt._memcpy,t._memset=Dt._memset,t._ping=Dt._ping,t._read_register=Dt._read_register,t._reset=Dt._reset,t._run=Dt._run,t._sbrk=Dt._sbrk,t._set_stop_address=Dt._set_stop_address,t._write_register=Dt._write_register,t.establishStackSpace=Dt.establishStackSpace,t.stackAlloc=Dt.stackAlloc),Ft=t.stackRestore=Dt.stackRestore,jt=t.stackSave=Dt.stackSave;if(t.dynCall_ii=Dt.dynCall_ii,t.dynCall_iidiiii=Dt.dynCall_iidiiii,t.dynCall_iiii=Dt.dynCall_iiii,t.dynCall_iiiii=Dt.dynCall_iiiii,t.dynCall_vii=Dt.dynCall_vii,t.asm=Dt,t.ccall=x,it)if(at(it)||(it=g(it)),o||c){var Lt=f(it);B.set(Lt,k)}else{nt();var Nt=function(e){e.byteLength&&(e=new Uint8Array(e)),B.set(e,k),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,rt()},Ut=function(){l(it,Nt,(function(){throw"could not load memory initializer "+it}))},zt=Bt(it);if(zt)Nt(zt.buffer);else if(t.memoryInitializerRequest){var $t=function(){var e=t.memoryInitializerRequest,n=e.response;if(200!==e.status&&0!==e.status){var r=Bt(t.memoryInitializerRequestURL);if(!r)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+e.status+", retrying "+it),void Ut();n=r.buffer}Nt(n)};t.memoryInitializerRequest.response?setTimeout($t,0):t.memoryInitializerRequest.addEventListener("load",$t)}else Ut()}function Ht(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Wt(e){function n(){Ot||(Ot=!0,C||(J(),K(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Y()))}tt>0||(Q(),tt>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),n()}),1)):n()))}function Vt(e,n){n&&m&&0===e||(m||(C=!0,t.onExit&&t.onExit(e)),i(e,new Ht(e)))}function qt(e){throw t.onAbort&&t.onAbort(e),b(e+=""),v(e),C=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(t.then=function(e){if(Ot)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},et=function t(){Ot||Wt(),Ot||(et=t)},t.run=Wt,t.abort=qt,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return m=!0,Wt(),t});t.exports=r,t.exports=r})),nu=N(U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){void 0===e&&(e={}),this._module=null,this._options=null,this._options=h.__assign({stopAddress:0},e),this._module=eu(this._getApi(t,this._options)),this.enableDebug(!1)}return t.prototype.init=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){return this._module._set_stop_address(this._options.stopAddress),[2]}))}))},t.prototype.ping=function(){return this._module.ccall("ping","string",[],[])},t.prototype.run=function(t){return this._module._run(t)},t.prototype.abort=function(){this._module._abort_run()},t.prototype.enableDebug=function(t){this._module._enable_debug(t?1:0)},t.prototype.reset=function(){this._module._reset()},t.prototype.readRegister=function(t){if(t<0||t>15)throw new Error("illegal thumb register "+t);return this._module._read_register(t)},t.prototype.writeRegister=function(t,e){if(t<0||t>15)throw new Error("illegal thumb register "+t);this._module._write_register(t,e)},t.prototype._getApi=function(t,e){var n=e.printer||function(t){return console.log("thumbulator: "+t)};return{print:n,printErr:n,trapOnInstructionFetch:e.trapOnInstructionFetch||function(){return 0},trapOnBx32:e.trapOnBx32||function(){return 3},busRead16:t.read16,busRead32:t.read32||function(e){return 65535&t.read16(e)|t.read16(e+2)<<16},busWrite16:t.write16,busWrite32:t.write32||function(e,n){return t.write16(e,65535&n),t.write16(e+2,n>>>16)}}},t}();e.default=n})));function ru(t,e,n=!0){return function t(e,n,r=!0,i=""){if(!r&&e<0)return t(e>>>16,n&&n>8?n-4:4,!1,i)+t(65535&e,4);let s=Math.abs(e).toString(16).toUpperCase();if(void 0!==n)for(;s.length<n;)s="0"+s;return(e<0?"-":"")+i+s}(t,e,n,"$")}class iu{constructor(t=(()=>3)){this.trap=new Co,this._thumbulatorBus={read16:t=>{if(1&t)return this._triggerTrap(`unaligned 16 bit ARM read from ${ru(t,8,!1)}`),0;const e=268435455&t;switch(t>>>28){case 0:if(e<32768)return this.getRom16(e);break;case 4:if(e<8192)return this.getRam16(e);break;case 14:switch(e){case 2080768:return this._armMamcr}}this._triggerTrap(`invalid 16 bit ARM read from ${ru(t,8,!1)}`)},read32:t=>{if(3&t)return this._triggerTrap(`unaligned 32 bit ARM read from ${ru(t,8,!1)}`),0;const e=268435455&t;switch(t>>>28){case 0:if(e<32768)return this.getRom32(e);break;case 4:if(e<8192)return this.getRam32(e);break;case 14:switch(e){case 32772:case 32776:return 0}}this._triggerTrap(`invalid 32 bit ARM read from ${ru(t,8,!1)}`)},write16:(t,e)=>{if(1&t)return void this._triggerTrap(`unaligned 16 bit ARM write: ${ru(e,4)} -> ${ru(t,8,!1)}`);const n=268435455&t;switch(t>>>28){case 4:if(n<8192)return void this.setRam16(n,65535&e);break;case 14:switch(n){case 2080768:return void(this._armMamcr=e)}}this._triggerTrap(`invalid 16 bit ARM write: ${ru(e,4)} -> ${ru(t,8,!1)}`)},write32:(t,e)=>{if(3&t)return void this._triggerTrap(`unaligned 32 bit ARM write: ${ru(e,8,!1)} -> ${ru(t,8,!1)}`);const n=268435455&t;switch(t>>>28){case 4:if(n<8192)return void this.setRam32(n,e);case 14:switch(n){case 32772:case 32776:return}}this._triggerTrap(`invalid 32 bit ARM write: ${ru(e,8,!1)} -> ${ru(t,8,!1)}`)}},this._romBuffer=new ArrayBuffer(32768),this._ramBuffer=new ArrayBuffer(8192),this._armMamcr=0,this._thumbulator=null,!function(){const t=new Uint8Array([1,2,3,4]);return 67305985===new Uint32Array(t.buffer)[0]}()?(this.getRom16=t=>this._rom8[t]|this._rom8[t+1]<<8,this.getRom32=t=>this._rom8[t]|this._rom8[t+1]<<8|this._rom8[t+2]<<16|this._rom8[t+3]<<24,this.getRam16=t=>this._ram8[t]|this._ram8[t+1]<<8,this.getRam32=t=>this._ram8[t]|this._ram8[t+1]<<8|this._ram8[t+2]<<16|this._ram8[t+3]<<24,this.setRam16=(t,e)=>{this._ram8[t]=255&e,this._ram8[t+1]=e>>>8&255},this.setRam32=(t,e)=>{this._ram8[t]=255&e,this._ram8[t+1]=e>>>8&255,this._ram8[t+2]=e>>>16&255,this._ram8[t+3]=e>>>24&255}):(this.getRom16=t=>this._rom16[t>>>1],this.getRom32=t=>this._rom32[t>>>2],this.getRam16=t=>this._ram16[t>>>1],this.getRam32=t=>this._ram32[t>>>2],this.setRam16=(t,e)=>this._ram16[t>>>1]=e,this.setRam32=(t,e)=>this._ram32[t>>>2]=e),this._rom8=new Uint8Array(this._romBuffer),this._rom16=new Uint16Array(this._romBuffer),this._rom32=new Uint32Array(this._romBuffer),this._ram8=new Uint8Array(this._ramBuffer),this._ram16=new Uint16Array(this._ramBuffer),this._ram32=new Uint32Array(this._ramBuffer),this._thumbulator=new nu(this._thumbulatorBus,{stopAddress:32772,trapOnBx32:t}),this.reset()}init(){return this._thumbulator.init()}reset(){}getRom(){return this._rom8}getRam(){return this._ram8}run(t){this._thumbulator.reset(),this._thumbulator.enableDebug(!1);for(let t=0;t<=12;t++)this._thumbulator.writeRegister(t,0);this._thumbulator.writeRegister(13,1073749940),this._thumbulator.writeRegister(14,32773),this._thumbulator.writeRegister(15,t),this._armMamcr=0;const e=this._thumbulator.run(5e5);20!==e&&10!==e&&this._triggerTrap(`ARM execution trapped: ${e}`)}getThumbulator(){return this._thumbulator}_triggerTrap(t){this._thumbulator.abort(),this.trap.dispatch(t)}}class su extends So{constructor(t){if(super(),this._banks=new Array(6),this._fetchers=new Array(8),this._fractionalFetchers=new Array(8),this._musicFetchers=new Array(3),this._parameters=new Uint8Array(8),this._parameterIndex=0,this._rng=0,this._clockAccumulator=0,this._lastCpuTime=0,this._fastFetch=!1,this._ldaPending=!1,this._cpuTimeProvider=null,this._soc=new iu,t.length<28672||t.length>32768)throw new Error(`not a DPC+ image: invalid lenght ${t.length}`);this._rom=this._soc.getRom();for(let t=0;t<6;t++)this._banks[t]=new Uint8Array(this._rom.buffer,3072+4096*t,4096);this._ram=this._soc.getRam(),this._imageRam=new Uint8Array(this._ram.buffer,3072,4096);const e=32768-t.length;for(let n=0;n<t.length;n++)this._rom[e+n]=t[n];for(let t=0;t<8;t++)this._fetchers[t]=new au,this._fractionalFetchers[t]=new ou;for(let t=0;t<3;t++)this._musicFetchers[t]=new uu;this._soc.trap.addHandler(t=>this.triggerTrap(2,t)),this.reset()}static matchesBuffer(t){return 2===Eo(t,["DPC+".split("").map(t=>t.charCodeAt(0))])[0]}init(){return this._soc.init()}reset(){this._soc.reset(),this._currentBank=this._banks[5];for(let t=0;t<768;t++)this._soc.setRam32(t<<2,this._soc.getRom32(t<<2));for(let t=6912;t<8192;t++)this._soc.setRam32(768+t-6912<<2,this._soc.getRom32(t<<2));this._currentBank=this._banks[5];for(let t=0;t<8;t++)this._parameters[t]=0;for(let t=0;t<8;t++)this._fetchers[t].reset(),this._fractionalFetchers[t].reset();for(let t=0;t<3;t++)this._musicFetchers[t].reset();this._parameterIndex=0,this._fastFetch=this._ldaPending=!1,this._rng=725831748,this._lastCpuTime=0,this._clockAccumulator=0}getType(){return ht.CartridgeType.bankswitch_dpc_plus}setBus(t){return this._bus=t,this}setCpuTimeProvider(t){return this._cpuTimeProvider=t,this}read(t){return this._access(t,this._bus.getLastDataBusValue())}peek(t){return this._currentBank[4095&t]}write(t,e){this._access(t,e)}triggerTrap(t,e){super.triggerTrap(t,e)}_access(t,e){t&=4095;const n=this._currentBank[t];if(this._fastFetch&&this._ldaPending&&t>127&&t<4086&&n<40&&(t=n),this._ldaPending=!1,t<40){const e=7&t,n=this._fetchers[e],r=this._fractionalFetchers[e];let i=0;switch(t>>>3&7){case 0:switch(e){case 0:return this._advanceRng(),255&this._rng;case 1:return this._rewindRng(),255&this._rng;case 2:return this._rng>>>8&255;case 3:return this._rng>>>16&255;case 4:return this._rng>>>24&255;case 5:{this._clockMusicFetchers();let t=0;for(let e=0;e<3;e++)t+=this._imageRam[(this._musicFetchers[e].waveform<<5)+this._musicFetchers[e].waveformSample()];return 255&t}}return 0;case 1:return i=this._imageRam[n.pointer],n.increment(),i;case 2:return i=this._imageRam[n.pointer]&n.mask(),n.increment(),i;case 3:return i=this._imageRam[r.pointer>>>8],r.increment(),i;case 4:return e<4?n.mask():0;default:return 0}}else if(t<128){const n=7&t,r=this._fetchers[n],i=this._fractionalFetchers[n];switch(t-40>>>3&15){case 0:i.setPointerLo(e);break;case 1:i.setPointerHi(e);break;case 2:i.setFraction(e);break;case 3:r.top=e;break;case 4:r.bottom=e;break;case 5:r.setPointerLo(e);break;case 6:switch(n){case 0:this._fastFetch=0===e;break;case 1:this._parameterIndex<8&&(this._parameters[this._parameterIndex++]=e);break;case 2:this._dispatchFunction(e);break;case 5:case 6:case 7:this._musicFetchers[n-5].waveform=127&e}break;case 7:r.decrement(),this._imageRam[r.pointer]=e;break;case 8:r.setPointerHi(e);break;case 9:switch(n){case 0:this._rng=725831748;break;case 1:this._rng=4294967040&this._rng|e;break;case 2:this._rng=4294902015&this._rng|e<<8;break;case 3:this._rng=4278255615&this._rng|e<<16;break;case 4:this._rng=16777215&this._rng|e<<24;break;case 5:case 6:case 7:this._musicFetchers[n-5].frequency=this._soc.getRam32(7168+(e<<2))}break;case 10:this._imageRam[r.pointer]=e,r.increment()}}else t>4085&&t<4092&&(this._currentBank=this._banks[t-4086]);return this._fastFetch&&t>127&&t<4086&&(this._ldaPending=169===n),n}_clockMusicFetchers(){const t=this._cpuTimeProvider();this._clockAccumulator+=2e4*(t-this._lastCpuTime),this._lastCpuTime=t;const e=Math.floor(this._clockAccumulator);if(this._clockAccumulator-=e,0!==e)for(let t=0;t<3;t++)this._musicFetchers[t].increment(e)}_dispatchFunction(t){const e=this._parameters[0]+(this._parameters[1]<<8);switch(t){case 0:this._parameterIndex=0;break;case 1:for(let t=0;t<this._parameters[3];t++)this._ram[3072+(this._fetchers[7&this._parameters[2]].pointer+t&4095)]=this._rom[3072+(e+t)%29696];this._parameterIndex=0;break;case 2:for(let t=0;t<this._parameters[3];t++)this._ram[3072+(this._fetchers[7&this._parameters[2]].pointer+t&4095)]=this._parameters[0];this._parameterIndex=0;break;case 254:case 255:this._soc.run(3083)}}_advanceRng(){this._rng=(1024&this._rng?279816990:0)^(this._rng>>>11|this._rng<<21)}_rewindRng(){this._rng=this._rng&1<<31?(279816990^this._rng)<<11|(279816990^this._rng)>>>21:this._rng<<11|this._rng>>>21}}class au{constructor(){this.pointer=0,this.top=0,this.bottom=0}contructor(){this.reset()}reset(){this.pointer=this.top=this.bottom=0}setPointerHi(t){this.pointer=255&this.pointer|(15&t)<<8}setPointerLo(t){this.pointer=3840&this.pointer|255&t}increment(){this.pointer=this.pointer+1&4095}decrement(){this.pointer=this.pointer+4095&4095}mask(){return(this.top-(255&this.pointer)&255)>(this.top-this.bottom&255)?255:0}}class ou{constructor(){this.pointer=0,this.fraction=0}contructor(){this.reset()}reset(){this.pointer=this.fraction=0}setPointerHi(t){this.pointer=65535&this.pointer|(15&t)<<16}setPointerLo(t){this.pointer=983295&this.pointer|(255&t)<<8}setFraction(t){this.fraction=t,this.pointer&=1048320}increment(){this.pointer=this.pointer+this.fraction&1048575}}class uu{constructor(){this.frequency=-1,this.counter=-1,this.waveform=0,this.reset()}reset(){this.frequency=0,this.waveform=0,this.counter=0}increment(t){this.counter=this.counter+t*this.frequency|0}waveformSample(){return this.counter>>>27}}class cu extends So{constructor(t){super(),this._handleBxCDF0=t=>{const e=this._soc.getThumbulator(),n=e.readRegister(2),r=e.readRegister(3);switch(t){case 1762:return this._musicStreams[n%3].frequency=r,0;case 1766:return this._musicStreams[n%3].counter=0,0;case 1770:return e.writeRegister(2,this._musicStreams[n%3].counter),0;case 1774:return this._musicStreams[n%3].waveformSize=r,0}return 3},this._handleBxCDF1=t=>{const e=this._soc.getThumbulator(),n=e.readRegister(2),r=e.readRegister(3);switch(t){case 1874:return this._musicStreams[n%3].frequency=r,0;case 1878:return this._musicStreams[n%3].counter=0,0;case 1882:return e.writeRegister(2,this._musicStreams[n%3].counter),0;case 1886:return this._musicStreams[n%3].waveformSize=r,0}return 3},this._banks=new Array(7),this._currentBank=null,this._rom=null,this._ram=null,this._displayRam=null,this._musicStreams=new Array(3),this._clockAccumulator=0,this._lastCpuTime=0,this._soc=null,this._fastFetch=!1,this._digitalAudio=!1,this._fastJumpCountdown=0,this._fastFetchPending=!1,this._jmpOperandAddress=0,this._ldaOperandAddress=0,this._datastreamBase=0,this._datastreamIncrementBase=0,this._waveformBase=0,this._jumpstream=0,this._jumpstreamMask=0,this._amplitudeStream=0,this._bus=null,this._cpuTimeProvider=null;const e=cu.getVersion(t);switch(e){case 0:this._jumpstreamMask=255,this._amplitudeStream=34,this._datastreamBase=1760,this._datastreamIncrementBase=1896,this._waveformBase=2032;break;case 1:this._jumpstreamMask=255,this._amplitudeStream=34,this._datastreamBase=160,this._datastreamIncrementBase=296,this._waveformBase=432;break;case 2:this._jumpstreamMask=254,this._amplitudeStream=35,this._datastreamBase=152,this._datastreamIncrementBase=292,this._waveformBase=432;break;default:throw new Error("not a CDF image: missing signature")}if(32768!==t.length)throw new Error(`not a CDF image: invalid lenght ${t.length}`);this._soc=new iu(0===e?this._handleBxCDF0:this._handleBxCDF1),this._soc.trap.addHandler(t=>this.triggerTrap(2,t)),this._rom=this._soc.getRom();for(let e=0;e<32768;e++)this._rom[e]=t[e];for(let t=0;t<7;t++)this._banks[t]=new Uint8Array(this._rom.buffer,4096*(t+1),4096);this._ram=this._soc.getRam(),this._displayRam=new Uint8Array(this._soc.getRam().buffer,2048,4096);for(let t=0;t<3;t++)this._musicStreams[t]=new hu;this.reset()}static getVersion(t){const e="CDF".split("").map(t=>t.charCodeAt(0)),n=function(t,e){for(let n=0;n<t.length;n++){let r;for(r=0;r<e.length&&(t[n+r]===e[r]||e[r]<0);r++);if(r===e.length)return n}return-1}(t,[...e,-1,...e,-1,...e]);if(n<0)return 3;switch(t[n+3]){case 0:return 0;case 1:return 1;case"J".charCodeAt(0):return 2;default:return 3}}static matchesBuffer(t){return 3!==cu.getVersion(t)}init(){return this._soc.init()}reset(){for(let t=0;t<512;t++)this._soc.setRam32(t<<2,this._soc.getRom32(t<<2));this._fastFetch=!1,this._digitalAudio=!1,this._fastJumpCountdown=0,this._fastFetchPending=!1,this._jmpOperandAddress=0,this._ldaOperandAddress=0,this._currentBank=this._banks[6];for(let t=0;t<3;t++)this._musicStreams[t].reset();this._lastCpuTime=0,this._clockAccumulator=0}getType(){return ht.CartridgeType.bankswitch_cdf}setBus(t){return this._bus=t,this}setCpuTimeProvider(t){return this._cpuTimeProvider=t,this}read(t){return this._access(t,this._bus.getLastDataBusValue())}peek(t){return this._currentBank[4095&t]}write(t,e){this._access(t,e)}_access(t,e){t&=4095;const n=this._currentBank[t];if(this._fastJumpCountdown-- >0&&t===this._jmpOperandAddress)return this._jmpOperandAddress++,this._datastreamReadWithIncrement(this._jumpstream,256);if(this._fastFetch&&76===n&&0==(this._currentBank[t+1&4095]&this._jumpstreamMask)&&0===this._currentBank[t+2&4095])return this._fastJumpCountdown=2,this._jmpOperandAddress=t+1&4095,this._jumpstream=33+this._currentBank[t+1&4095],n;if(this._fastJumpCountdown=0,this._fastFetch&&this._fastFetchPending&&this._ldaOperandAddress===t&&n<=this._amplitudeStream){if(this._fastFetchPending=!1,n===this._amplitudeStream){if(this._clockMusicStreams(),this._digitalAudio){const t=this._musicStreams[0].counter,e=this._soc.getRam32(this._waveformBase)+(t>>>21);let n=0;return e<32768&&(n=this._rom[e]),e>1073741824&&e<1073750016&&(n=this._ram[e-1073741824]),0==(1048576&t)&&(n>>>=4),15&n}{let t=0;for(let e=0;e<3;e++)t+=this._displayRam[this._getWaveform(e)+(this._musicStreams[e].counter>>>this._musicStreams[e].waveformSize)&4095];return t}}return this._datastreamRead(n)}if(this._fastFetchPending=!1,t>=4080){switch(t){case 4080:this._datastreamWriteWithIncrement(32,e,256);break;case 4081:{let t=this._getDatastreamPointer(32);t<<=8,t&=4026531840,t|=e<<20,this._setDatastreamPointer(32,t);break}case 4082:this._fastFetch=0==(15&e),this._digitalAudio=0==(240&e);break;case 4083:switch(e){case 254:case 255:this._soc.run(2059)}}t>4084&&t<4092&&(this._currentBank=this._banks[t-4085])}return this._fastFetch&&169===n&&(this._fastFetchPending=!0,this._ldaOperandAddress=t+1&4095),n}_clockMusicStreams(){const t=this._cpuTimeProvider();this._clockAccumulator+=2e4*(t-this._lastCpuTime),this._lastCpuTime=t;const e=Math.floor(this._clockAccumulator);if(this._clockAccumulator-=e,0!==e)for(let t=0;t<3;t++)this._musicStreams[t].increment(e)}_getDatastreamPointer(t){return this._soc.getRam32(this._datastreamBase+4*t)}_setDatastreamPointer(t,e){this._soc.setRam32(this._datastreamBase+4*t,e)}_getDatastreamIncrement(t){return this._soc.getRam32(this._datastreamIncrementBase+4*t)}_datastreamRead(t){const e=this._getDatastreamPointer(t),n=this._displayRam[e>>>20];return this._setDatastreamPointer(t,e+(this._getDatastreamIncrement(t)<<12)|0),n}_datastreamReadWithIncrement(t,e){const n=this._getDatastreamPointer(t),r=this._displayRam[n>>>20];return this._setDatastreamPointer(t,n+(e<<12)|0),r}_datastreamWriteWithIncrement(t,e,n){const r=this._getDatastreamPointer(t);this._displayRam[r>>>20]=e,this._setDatastreamPointer(t,r+(n<<12)|0)}_getWaveform(t){return this._soc.getRam32(this._waveformBase+4*t)-1073741824-2048&4095}}class hu{constructor(){this.counter=0,this.frequency=0,this.waveformSize=27}reset(){this.counter=this.frequency=0,this.waveformSize=27}increment(t){this.counter=this.counter+t*this.frequency|0}}class lu extends So{constructor(t){if(super(),this._bank=null,this._bank0=new Uint8Array(4096),this._bank1=new Uint8Array(4096),this._bus=null,8192!==t.length)throw new Error(`buffer is not an 8k cartridge image: wrong length ${t.length}`);for(let e=0;e<4096;e++)this._bank0[e]=t[e],this._bank1[e]=t[4096+e];this.reset()}static matchesBuffer(t){const e=Eo(t,[[173,0,8],[173,64,8],[44,0,8],[12,0,8,76],[12,255,15,76]]);for(const t of e)if(t>=2)return!0;return!1}reset(){this._bank=this._bank0}read(t){return this.peek(t)}peek(t){return t&=4095,this._bank[t]}getType(){return ht.CartridgeType.bankswitch_8k_econobanking}setBus(t){return this._bus=t,this._bus.event.read.addHandler(this._onBusAccess,this),this._bus.event.write.addHandler(this._onBusAccess,this),this}_onBusAccess(t,e){switch(6208&e._bus.getLastAddresBusValue()){case 2048:e._bank=e._bank0;break;case 2112:e._bank=e._bank1}}}class fu extends So{constructor(t){if(super(),this._rom=new Uint8Array(2048),this._ram=new Uint8Array(1024),2048!==t.length)throw new Error(`buffer is not a 2k cartridge image: wrong length ${t.length}`);for(let e=0;e<2048;e++)this._rom[e]=t[e]}static matchesBuffer(t){const e=Eo(t,[[157,255,243],[153,0,244]]);return e[0]>0||e[1]>0}setBus(t){return this._bus=t,this}randomize(t){for(let e=0;e<1024;e++)this._ram[e]=t.int(255)}read(t){return(t&=4095)<1024?this._ram[t]:t<2048?this._ram[1023&t]=this._bus.getLastDataBusValue():this._rom[2047&t]}write(t,e){(t&=4095)>=1024&&t<2048&&(this._ram[1023&t]=e)}peek(t){return(t&=4095)<1024?this._ram[t]:t<2048?0:this._rom[2047&t]}getType(){return ht.CartridgeType.bankswitch_2k_cv}}class du{detectCartridgeType(t){if(t.length%8448==0)return ht.CartridgeType.bankswitch_supercharger;if(t.length<2048)return ht.CartridgeType.vanilla_2k;if(t.length>=10240&&t.length<=10496)return ht.CartridgeType.bankswitch_8k_DPC;switch(t.length){case 2048:return this._detect2k(t);case 4096:return ht.CartridgeType.vanilla_4k;case 8192:return this._detect8k(t);case 8195:return ht.CartridgeType.bankswitch_8k_pp;case 12288:return ht.CartridgeType.bankswitch_12k_FA;case 16384:return this._detect16k(t);case 28672:return ht.CartridgeType.bankswitch_FA2;case 29696:return this._detect29k(t);case 32768:return this._detect32k(t);case 65536:return this._detect64k(t);default:return ht.CartridgeType.unknown}}_detect2k(t){return fu.matchesBuffer(t)?ht.CartridgeType.bankswitch_2k_cv:ht.CartridgeType.vanilla_2k}_detect8k(t){const e=xo.matchesBuffer(t);return To.matchesBuffer(t)?ht.CartridgeType.bankswitch_8k_E0:Io.matchesBuffer(t)?ht.CartridgeType.bankswitch_8k_3F:Ro.matchesBuffer(t)?ht.CartridgeType.bankswitch_8k_UA:!e&&Oo.matchesBuffer(t)?ht.CartridgeType.bankswitch_8k_FE:lu.matchesBuffer(t)?ht.CartridgeType.bankswitch_8k_econobanking:ht.CartridgeType.bankswitch_8k_F8}_detect16k(t){return Po.matchesBuffer(t)?ht.CartridgeType.bankswitch_16k_E7:ht.CartridgeType.bankswitch_16k_F6}_detect29k(t){return Do.matchesBuffer(t)?ht.CartridgeType.bankswitch_FA2:ht.CartridgeType.bankswitch_dpc_plus}_detect32k(t){return Bo.matchesBuffer(t)?ht.CartridgeType.bankswitch_3E:su.matchesBuffer(t)?ht.CartridgeType.bankswitch_dpc_plus:cu.matchesBuffer(t)?ht.CartridgeType.bankswitch_cdf:ht.CartridgeType.bankswitch_32k_F4}_detect64k(t){return Mo.matchesBuffer(t)?ht.CartridgeType.bankswitch_64k_EF:ht.CartridgeType.bankswitch_64k_F0}}var pu=Object.keys,_u=Array.isArray,gu="undefined"!=typeof self?self:"undefined"!=typeof window?window:l;function bu(t,e){return"object"!=typeof e?t:(pu(e).forEach((function(n){t[n]=e[n]})),t)}var vu=Object.getPrototypeOf,mu={}.hasOwnProperty;function yu(t,e){return mu.call(t,e)}function wu(t,e){"function"==typeof e&&(e=e(vu(t))),pu(e).forEach((function(n){ku(t,n,e[n])}))}var Au=Object.defineProperty;function ku(t,e,n,r){Au(t,e,bu(n&&yu(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Cu(t){return{from:function(e){return t.prototype=Object.create(e.prototype),ku(t.prototype,"constructor",t),{extend:wu.bind(null,t.prototype)}}}}var Su=Object.getOwnPropertyDescriptor;var Eu=[].slice;function xu(t,e,n){return Eu.call(t,e,n)}function Tu(t,e){return e(t)}function Iu(t){if(!t)throw new Error("Assertion Failed")}function Bu(t){gu.setImmediate?setImmediate(t):setTimeout(t,0)}function Ou(t,e){return t.reduce((function(t,n,r){var i=e(n,r);return i&&(t[i[0]]=i[1]),t}),{})}function Ru(t,e){return function(){try{t.apply(this,arguments)}catch(t){e(t)}}}function Pu(t,e,n){try{t.apply(null,n)}catch(t){e&&e(t)}}function Du(t,e){if(yu(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var s=Du(t,e[r]);n.push(s)}return n}var a=e.indexOf(".");if(-1!==a){var o=t[e.substr(0,a)];return void 0===o?void 0:Du(o,e.substr(a+1))}}function Mu(t,e,n){if(t&&void 0!==e&&!("isFrozen"in Object&&Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){Iu("string"!=typeof n&&"length"in n);for(var r=0,i=e.length;r<i;++r)Mu(t,e[r],n[r])}else{var s=e.indexOf(".");if(-1!==s){var a=e.substr(0,s),o=e.substr(s+1);if(""===o)void 0===n?delete t[a]:t[a]=n;else{var u=t[a];u||(u=t[a]={}),Mu(u,o,n)}}else void 0===n?delete t[e]:t[e]=n}}function Fu(t){var e={};for(var n in t)yu(t,n)&&(e[n]=t[n]);return e}var ju=[].concat;function Lu(t){return ju.apply([],t)}var Nu="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(Lu([8,16,32,64].map((function(t){return["Int","Uint","Float"].map((function(e){return e+t+"Array"}))})))).filter((function(t){return gu[t]})).map((function(t){return gu[t]}));function Uu(t){if(!t||"object"!=typeof t)return t;var e;if(_u(t)){e=[];for(var n=0,r=t.length;n<r;++n)e.push(Uu(t[n]))}else if(Nu.indexOf(t.constructor)>=0)e=t;else for(var i in e=t.constructor?Object.create(t.constructor.prototype):{},t)yu(t,i)&&(e[i]=Uu(t[i]));return e}function zu(t,e,n,r){return n=n||{},r=r||"",pu(t).forEach((function(i){if(yu(e,i)){var s=t[i],a=e[i];"object"==typeof s&&"object"==typeof a&&s&&a&&""+s.constructor==""+a.constructor?zu(s,a,n,r+i+"."):s!==a&&(n[r+i]=e[i])}else n[r+i]=void 0})),pu(e).forEach((function(i){yu(t,i)||(n[r+i]=e[i])})),n}var $u="undefined"!=typeof Symbol&&Symbol.iterator,Hu=$u?function(t){var e;return null!=t&&(e=t[$u])&&e.apply(t)}:function(){return null},Wu={};function Vu(t){var e,n,r,i;if(1===arguments.length){if(_u(t))return t.slice();if(this===Wu&&"string"==typeof t)return[t];if(i=Hu(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var qu="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Gu(t,e){qu=t,Qu=e}var Qu=function(){return!0},Ju=!new Error("").stack;function Ku(){if(Ju)try{throw Ku.arguments,new Error}catch(t){return t}return new Error}function Yu(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(Qu).map((function(t){return"\n"+t})).join("")):""}var Zu=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xu=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zu),tc={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function ec(t,e){this._e=Ku(),this.name=t,this.message=e}function nc(t,e,n,r){this._e=Ku(),this.failures=e,this.failedKeys=r,this.successCount=n}function rc(t,e){this._e=Ku(),this.name="BulkError",this.failures=e,this.message=function(t,e){return t+". Errors: "+e.map((function(t){return t.toString()})).filter((function(t,e,n){return n.indexOf(t)===e})).join("\n")}(t,e)}Cu(ec).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Yu(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Cu(nc).from(ec),Cu(rc).from(ec);var ic=Xu.reduce((function(t,e){return t[e]=e+"Error",t}),{}),sc=ec,ac=Xu.reduce((function(t,e){var n=e+"Error";function r(t,r){this._e=Ku(),this.name=n,t?"string"==typeof t?(this.message=t,this.inner=r||null):"object"==typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=tc[e]||n,this.inner=null)}return Cu(r).from(sc),t[e]=r,t}),{});ac.Syntax=SyntaxError,ac.Type=TypeError,ac.Range=RangeError;var oc=Zu.reduce((function(t,e){return t[e+"Error"]=ac[e],t}),{});var uc=Xu.reduce((function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=ac[e]),t}),{});function cc(){}function hc(t){return t}function lc(t,e){return null==t||t===hc?e:function(n){return e(t(n))}}function fc(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function dc(t,e){return t===cc?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?fc(r,this.onsuccess):r),i&&(this.onerror=this.onerror?fc(i,this.onerror):i),void 0!==s?s:n}}function pc(t,e){return t===cc?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?fc(n,this.onsuccess):n),r&&(this.onerror=this.onerror?fc(r,this.onerror):r)}}function _c(t,e){return t===cc?e:function(n){var r=t.apply(this,arguments);bu(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?fc(i,this.onsuccess):i),s&&(this.onerror=this.onerror?fc(s,this.onerror):s),void 0===r?void 0===a?void 0:a:bu(r,a)}}function gc(t,e){return t===cc?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function bc(t,e){return t===cc?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then((function(){return e.apply(r,s)}))}return e.apply(this,arguments)}}uc.ModifyError=nc,uc.DexieError=ec,uc.BulkError=rc;var vc={},mc=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var t=gu.Promise;return t?[t.resolve(),t.prototype,t.resolve()]:[]}}(),yc=mc[0],wc=mc[1],Ac=mc[2],kc=wc&&wc.then,Cc=yc&&yc.constructor,Sc=mc[3],Ec=!!Ac,xc=!1,Tc=Ac?function(){Ac.then(Kc)}:gu.setImmediate?setImmediate.bind(null,Kc):gu.MutationObserver?function(){var t=document.createElement("div");new MutationObserver((function(){Kc(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Kc,0)},Ic=function(t,e){Lc.push([t,e]),Oc&&(Tc(),Oc=!1)},Bc=!0,Oc=!0,Rc=[],Pc=[],Dc=null,Mc=hc,Fc={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mh,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(t){try{mh(t[0],t[1])}catch(t){}}))}},jc=Fc,Lc=[],Nc=0,Uc=[];function zc(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=cc,this._lib=!1;var e=this._PSD=jc;if(qu&&(this._stackHolder=Ku(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==vc)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Vc(this,this._value))}this._state=null,this._value=null,++e.ref,Wc(this,t)}var $c={get:function(){var t=jc,e=ah;function n(n,r){var i=this,s=!t.global&&(t!==jc||e!==ah);s&&hh();var a=new zc((function(e,a){Gc(i,new Hc(bh(n,t,s),bh(r,t,s),e,a,t))}));return qu&&Jc(a,this),a}return n.prototype=vc,n},set:function(t){ku(this,"then",t&&t.prototype===vc?$c:{get:function(){return t},set:$c.set})}};function Hc(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function Wc(t,e){try{e((function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Yc();e&&"function"==typeof e.then?Wc(t,(function(t,n){e instanceof zc?e._then(t,n):e.then(t,n)})):(t._state=!0,t._value=e,qc(t)),n&&Zc()}}),Vc.bind(null,t))}catch(e){Vc(t,e)}}function Vc(t,e){if(Pc.push(e),null===t._state){var n=t._lib&&Yc();e=Mc(e),t._state=!1,t._value=e,qu&&null!==e&&"object"==typeof e&&!e._promise&&Pu((function(){var n=function t(e,n){var r;return Su(e,n)||(r=vu(e))&&t(r,n)}(e,"stack");e._promise=t,ku(e,"stack",{get:function(){return xc?n&&(n.get?n.get.apply(e):n.value):t.stack}})})),function(t){Rc.some((function(e){return e._value===t._value}))||Rc.push(t)}(t),qc(t),n&&Zc()}}function qc(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Gc(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===Nc&&(++Nc,Ic((function(){0==--Nc&&Xc()}),[]))}function Gc(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Nc,Ic(Qc,[n,t,e])}else t._listeners.push(e)}function Qc(t,e,n){try{Dc=e;var r,i=e._value;e._state?r=t(i):(Pc.length&&(Pc=[]),r=t(i),-1===Pc.indexOf(i)&&function(t){var e=Rc.length;for(;e;)if(Rc[--e]._value===t._value)return void Rc.splice(e,1)}(e)),n.resolve(r)}catch(t){n.reject(t)}finally{Dc=null,0==--Nc&&Xc(),--n.psd.ref||n.psd.finalize()}}function Jc(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Kc(){Yc()&&Zc()}function Yc(){var t=Bc;return Bc=!1,Oc=!1,t}function Zc(){var t,e,n;do{for(;Lc.length>0;)for(t=Lc,Lc=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(Lc.length>0);Bc=!0,Oc=!0}function Xc(){var t=Rc;Rc=[],t.forEach((function(t){t._PSD.onunhandled.call(null,t._value,t)}));for(var e=Uc.slice(0),n=e.length;n;)e[--n]()}function th(t){return new zc(vc,!1,t)}function eh(t,e){var n=jc;return function(){var r=Yc(),i=jc;try{return ph(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{ph(i,!1),r&&Zc()}}}wu(zc.prototype,{then:$c,_then:function(t,e){Gc(this,new Hc(null,null,t,e,jc))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,(function(t){return t instanceof e?n(t):th(t)})):this.then(null,(function(t){return t&&t.name===e?n(t):th(t)}))},finally:function(t){return this.then((function(e){return t(),e}),(function(e){return t(),th(e)}))},stack:{get:function(){if(this._stack)return this._stack;try{xc=!0;var t=function t(e,n,r){if(n.length===r)return n;var i="";if(!1===e._state){var s,a,o=e._value;null!=o?(s=o.name||"Error",a=o.message||o,i=Yu(o,0)):(s=o,a=""),n.push(s+(a?": "+a:"")+i)}qu&&((i=Yu(e._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),e._prev&&t(e._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{xc=!1}}},timeout:function(t,e){var n=this;return t<1/0?new zc((function(r,i){var s=setTimeout((function(){return i(new ac.Timeout(e))}),t);n.then(r,i).finally(clearTimeout.bind(null,s))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&ku(zc.prototype,Symbol.toStringTag,"Promise"),Fc.env=_h(),wu(zc,{all:function(){var t=Vu.apply(null,arguments).map(lh);return new zc((function(e,n){0===t.length&&e([]);var r=t.length;t.forEach((function(i,s){return zc.resolve(i).then((function(n){t[s]=n,--r||e(t)}),n)}))}))},resolve:function(t){if(t instanceof zc)return t;if(t&&"function"==typeof t.then)return new zc((function(e,n){t.then(e,n)}));var e=new zc(vc,!0,t);return Jc(e,Dc),e},reject:th,race:function(){var t=Vu.apply(null,arguments).map(lh);return new zc((function(e,n){t.map((function(t){return zc.resolve(t).then(e,n)}))}))},PSD:{get:function(){return jc},set:function(t){return jc=t}},newPSD:uh,usePSD:gh,scheduler:{get:function(){return Ic},set:function(t){Ic=t}},rejectionMapper:{get:function(){return Mc},set:function(t){Mc=t}},follow:function(t,e){return new zc((function(n,r){return uh((function(e,n){var r=jc;r.unhandleds=[],r.onunhandled=n,r.finalize=fc((function(){var t=this;!function(t){Uc.push((function e(){t(),Uc.splice(Uc.indexOf(e),1)})),++Nc,Ic((function(){0==--Nc&&Xc()}),[])}((function(){0===t.unhandleds.length?e():n(t.unhandleds[0])}))}),r.finalize),t()}),e,n,r)}))}});var nh={awaits:0,echoes:0,id:0},rh=0,ih=[],sh=0,ah=0,oh=0;function uh(t,e,n,r){var i=jc,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++oh;var a=Fc.env;s.env=Ec?{Promise:zc,PromiseProp:{value:zc,configurable:!0,writable:!0},all:zc.all,race:zc.race,resolve:zc.resolve,reject:zc.reject,nthen:vh(a.nthen,s),gthen:vh(a.gthen,s)}:{},e&&bu(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=gh(s,t,n,r);return 0===s.ref&&s.finalize(),o}function ch(){return nh.id||(nh.id=++rh),++nh.awaits,nh.echoes+=7,nh.id}function hh(t){!nh.awaits||t&&t!==nh.id||(0==--nh.awaits&&(nh.id=0),nh.echoes=7*nh.awaits)}function lh(t){return nh.echoes&&t&&t.constructor===Cc?(ch(),t.then((function(t){return hh(),t}),(function(t){return hh(),yh(t)}))):t}function fh(t){++ah,nh.echoes&&0!=--nh.echoes||(nh.echoes=nh.id=0),ih.push(jc),ph(t,!0)}function dh(){var t=ih[ih.length-1];ih.pop(),ph(t,!1)}function ph(t,e){var n,r=jc;if((e?!nh.echoes||sh++&&t===jc:!sh||--sh&&t===jc)||(n=e?fh.bind(null,t):dh,kc.call(yc,n)),t!==jc&&(jc=t,r===Fc&&(Fc.env=_h()),Ec)){var i=Fc.env.Promise,s=t.env;wc.then=s.nthen,i.prototype.then=s.gthen,(r.global||t.global)&&(Object.defineProperty(gu,"Promise",s.PromiseProp),i.all=s.all,i.race=s.race,i.resolve=s.resolve,i.reject=s.reject)}}function _h(){var t=gu.Promise;return Ec?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(gu,"Promise"),all:t.all,race:t.race,resolve:t.resolve,reject:t.reject,nthen:wc.then,gthen:t.prototype.then}:{}}function gh(t,e,n,r,i){var s=jc;try{return ph(t,!0),e(n,r,i)}finally{ph(s,!1)}}function bh(t,e,n){return"function"!=typeof t?t:function(){var r=jc;n&&ch(),ph(e,!0);try{return t.apply(this,arguments)}finally{ph(r,!1)}}}function vh(t,e){return function(n,r){return t.call(this,bh(n,e,!1),bh(r,e,!1))}}function mh(t,e){var n;try{n=e.onuncatched(t)}catch(t){}if(!1!==n)try{var r,i={promise:e,reason:t};if(gu.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),bu(r,i)):gu.CustomEvent&&bu(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&gu.dispatchEvent&&(dispatchEvent(r),!gu.PromiseRejectionEvent&&gu.onunhandledrejection))try{gu.onunhandledrejection(r)}catch(t){}r.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(t){}}var yh=zc.reject;function wh(t){var e={},n=function(n,r){if(r){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return e[n].subscribe.apply(null,s),t}if("string"==typeof n)return e[n]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(t,r,i){if("object"==typeof t)return a(t);r||(r=gc),i||(i=cc);var s={subscribers:[],fire:i,subscribe:function(t){-1===s.subscribers.indexOf(t)&&(s.subscribers.push(t),s.fire=r(s.fire,t))},unsubscribe:function(t){s.subscribers=s.subscribers.filter((function(e){return e!==t})),s.fire=s.subscribers.reduce(r,i)}};return e[t]=n[t]=s,s}function a(t){pu(t).forEach((function(e){var n=t[e];if(_u(n))s(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new ac.InvalidArgument("Invalid event config");var r=s(e,hc,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];r.subscribers.forEach((function(t){Bu((function(){t.apply(null,e)}))}))}))}}))}}var Ah,kh=String.fromCharCode(65535),Ch=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(t){return kh}}(),Sh="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Eh=[],xh="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Th=xh,Ih=xh,Bh=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};function Oh(t,e){var n,r,i,s,a,o=Oh.dependencies,u=bu({addons:Oh.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},e),c=u.addons,h=u.autoOpen,l=u.indexedDB,f=u.IDBKeyRange,d=this._dbSchema={},p=[],_=[],g={},b=null,v=null,m=!1,y=null,w=!1,A="readwrite",k=this,C=new zc((function(t){n=t})),S=new zc((function(t,e){r=e})),E=!0,x=!!$h(l);function T(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function I(t,e,n){var r=k._createTransaction(A,_,d);r.create(e),r._completion.catch(n);var i=r._reject.bind(r);uh((function(){jc.trans=r,0===t?(pu(d).forEach((function(t){B(e,t,d[t].primKey,d[t].indexes)})),zc.follow((function(){return k.on.populate.fire(r)})).catch(i)):function(t,e,n){var r=[],i=p.filter((function(e){return e._cfg.version===t}))[0];if(!i)throw new ac.Upgrade("Dexie specification of currently installed DB version is missing");d=k._dbSchema=i._cfg.dbschema;var s=!1;function a(){return r.length?zc.resolve(r.shift()(e.idbtrans)).then(a):zc.resolve()}return p.filter((function(e){return e._cfg.version>t})).forEach((function(t){r.push((function(){var r=d,i=t._cfg.dbschema;K(r,n),K(i,n),d=k._dbSchema=i;var a=function(t,e){var n={del:[],add:[],change:[]};for(var r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],s=e[r];if(i){var a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==s.primKey.src)a.recreate=!0,n.change.push(a);else{var o=i.idxByName,u=s.idxByName;for(var c in o)u[c]||a.del.push(c);for(c in u){var h=o[c],l=u[c];h?h.src!==l.src&&a.change.push(l):a.add.push(l)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,s])}return n}(r,i);if(a.add.forEach((function(t){B(n,t[0],t[1].primKey,t[1].indexes)})),a.change.forEach((function(t){if(t.recreate)throw new ac.Upgrade("Not yet support for changing primary key");var e=n.objectStore(t.name);t.add.forEach((function(t){O(e,t)})),t.change.forEach((function(t){e.deleteIndex(t.name),O(e,t)})),t.del.forEach((function(t){e.deleteIndex(t)}))})),t._cfg.contentUpgrade)return s=!0,zc.follow((function(){t._cfg.contentUpgrade(e)}))})),r.push((function(e){s&&Th||function(t,e){for(var n=0;n<e.db.objectStoreNames.length;++n){var r=e.db.objectStoreNames[n];null==t[r]&&e.db.deleteObjectStore(r)}}(t._cfg.dbschema,e)}))})),a().then((function(){!function(t,e){pu(t).forEach((function(n){e.db.objectStoreNames.contains(n)||B(e,n,t[n].primKey,t[n].indexes)}))}(d,n)}))}(t,r,e).catch(i)}))}function B(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(t){O(i,t)})),i}function O(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function R(t,e,n){var r=arguments.length;if(r<2)throw new ac.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var s=Lu(i);return[t,s,n]}function P(t,e,n){this.name=t,this.schema=e,this._tx=n,this.hook=g[t]?g[t].hook:wh(null,{creating:[dc,cc],reading:[lc,hc],updating:[_c,cc],deleting:[pc,cc]})}function D(t,e,n){return(n?Fh:Dh)((function(n){t.push(n),e&&e()}))}function M(t,e,n,r,i){return new zc((function(s,a){var o=n.length,u=o-1;if(0===o)return s();if(r){var c,h=Fh(a),l=Ph(null);Pu((function(){for(var r=0;r<o;++r){c={onsuccess:null,onerror:null};var a=n[r];i.call(c,a[0],a[1],e);var f=t.delete(a[0]);f._hookCtx=c,f.onerror=h,f.onsuccess=r===u?Ph(s):l}}),(function(t){throw c.onerror&&c.onerror(t),t}))}else for(var f=0;f<o;++f){var d=t.delete(n[f]);d.onerror=Dh(a),f===u&&(d.onsuccess=eh((function(){return s()})))}}))}function F(t,e,n,r){var i=this;this.db=k,this.mode=t,this.storeNames=e,this.idbtrans=null,this.on=wh(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new zc((function(t,e){i._resolve=t,i._reject=e})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(t){var e=i.active;return i.active=!1,i.on.error.fire(t),i.parent?i.parent._reject(t):e&&i.idbtrans&&i.idbtrans.abort(),yh(t)}))}function j(t,e,n){this._ctx={table:t,index:":id"===e?null:e,or:n}}function L(t,e){var n=null,r=null;if(e)try{n=e()}catch(t){r=t}var i=t._ctx,s=i.table;this._ctx={table:s,index:i.index,isPrimKey:!i.index||s.schema.primKey.keyPath&&i.index===s.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:s.hook.reading.fire}}function N(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function U(t,e){return t._cfg.version-e._cfg.version}function z(t,e,n){e.forEach((function(e){var r=n[e];t.forEach((function(t){e in t||(t===F.prototype||t instanceof F?ku(t,e,{get:function(){return this.table(e)}}):t[e]=new P(e,r))}))}))}function $(t,e,n,r,i,s){var a=eh(s?function(t,e,r){return n(s(t),e,r)}:n,i);t.onerror||(t.onerror=Dh(i)),t.onsuccess=Ru(e?function(){var n=t.result;if(n){var s=function(){n.continue()};e(n,(function(t){s=t}),r,i)&&a(n.value,n,(function(t){s=t})),s()}else r()}:function(){var e=t.result;if(e){var n=function(){e.continue()};a(e.value,e,(function(t){n=t})),n()}else r()},i)}function H(t,e){return l.cmp(t,e)}function W(t,e){return H(t,e)>0?t:e}function V(t,e){return l.cmp(t,e)}function q(t,e){return l.cmp(e,t)}function G(t,e){return t<e?-1:t===e?0:1}function Q(t,e){return t>e?-1:t===e?0:1}function J(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}function K(t,e){for(var n=e.db.objectStoreNames,r=0;r<n.length;++r){var s=n[r],a=e.objectStore(s);i="getAll"in a;for(var o=0;o<a.indexNames.length;++o){var u=a.indexNames[o],c=a.index(u).keyPath,h="string"==typeof c?c:"["+xu(c).join("+")+"]";if(t[s]){var l=t[s].idxByName[h];l&&(l.name=u)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&gu.WorkerGlobalScope&&gu instanceof gu.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i=!1)}function Y(t){k.on("blocked").fire(t),Eh.filter((function(t){return t.name===k.name&&t!==k&&!t._vcFired})).map((function(e){return e.on("versionchange").fire(t)}))}this.version=function(t){if(b||m)throw new ac.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=p.filter((function(e){return e._cfg.version===t}))[0];return e||(e=new T(t),p.push(e),p.sort(U),E=!1,e)},bu(T.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?bu(this._cfg.storesSource,t):t;var e={};p.forEach((function(t){bu(e,t._cfg.storesSource)}));var n=this._cfg.dbschema={};return this._parseStoresSpec(e,n),d=k._dbSchema=n,[g,k,F.prototype].forEach((function(t){for(var e in t)t[e]instanceof P&&delete t[e]})),z([g,k,F.prototype,this._cfg.tables],pu(n),n),_=pu(n),this},upgrade:function(t){return this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(t,e){pu(t).forEach((function(n){if(null!==t[n]){var r={},i=function(t){var e=[];return t.split(",").forEach((function(t){var n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;e.push(new Nh(n,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),_u(r),/\./.test(t)))})),e}(t[n]),s=i.shift();if(s.multi)throw new ac.Schema("Primary key cannot be multi-valued");s.keyPath&&Mu(r,s.keyPath,s.auto?0:s.keyPath),i.forEach((function(t){if(t.auto)throw new ac.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new ac.Schema("Index must have a name and cannot be an empty string");Mu(r,t.keyPath,t.compound?t.keyPath.map((function(){return""})):"")})),e[n]=new Uh(n,s,i,r)}}))}}),this._allTables=g,this._createTransaction=function(t,e,n,r){return new F(t,e,n,r)},this._whenReady=function(t){return w||jc.letThrough?t():new zc((function(t,e){if(!m){if(!h)return void e(new ac.DatabaseClosed);k.open().catch(cc)}C.then(t,e)})).then(t)},this.verno=0,this.open=function(){if(m||b)return C.then((function(){return v?yh(v):k}));qu&&(S._stackHolder=Ku()),m=!0,v=null,w=!1;var e=n,r=null;return zc.race([S,new zc((function(e,n){if(!l)throw new ac.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=E?l.open(t):l.open(t,Math.round(10*k.verno));if(!i)throw new ac.MissingAPI("IndexedDB API not available");i.onerror=Dh(n),i.onblocked=eh(Y),i.onupgradeneeded=eh((function(e){if(r=i.transaction,E&&!k._allowEmptyDB){i.onerror=jh,r.abort(),i.result.close();var s=l.deleteDatabase(t);s.onsuccess=s.onerror=eh((function(){n(new ac.NoSuchDatabase("Database "+t+" doesnt exist"))}))}else{r.onerror=Dh(n),I((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,r,n)}}),n),i.onsuccess=eh((function(){if(r=null,b=i.result,Eh.push(k),E)!function(){if(k.verno=b.version/10,k._dbSchema=d={},0===(_=xu(b.objectStoreNames,0)).length)return;var t=b.transaction(zh(_),"readonly");_.forEach((function(e){for(var n=t.objectStore(e),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),s=new Nh(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),a=[],o=0;o<n.indexNames.length;++o){var u=n.index(n.indexNames[o]);i=(r=u.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var c=new Nh(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,i);a.push(c)}d[e]=new Uh(e,s,a,{})})),z([g],pu(d),d)}();else if(b.objectStoreNames.length>0)try{K(d,b.transaction(zh(b.objectStoreNames),"readonly"))}catch(t){}b.onversionchange=eh((function(t){k._vcFired=!0,k.on("versionchange").fire(t)})),x||"__dbnames"===t||Ah.dbnames.put({name:t}).catch(cc),e()}),n)}))]).then((function(){return y=[],zc.resolve(Oh.vip(k.on.ready.fire)).then((function t(){if(y.length>0){var e=y.reduce(bc,cc);return y=[],zc.resolve(Oh.vip(e)).then(t)}}))})).finally((function(){y=null})).then((function(){return m=!1,k})).catch((function(t){try{r&&r.abort()}catch(t){}return m=!1,k.close(),yh(v=t)})).finally((function(){w=!0,e()}))},this.close=function(){var t=Eh.indexOf(k);if(t>=0&&Eh.splice(t,1),b){try{b.close()}catch(t){}b=null}h=!1,v=new ac.DatabaseClosed,m&&r(v),C=new zc((function(t){n=t})),S=new zc((function(t,e){r=e}))},this.delete=function(){var e=arguments.length>0;return new zc((function(n,r){if(e)throw new ac.InvalidArgument("Arguments not allowed in db.delete()");function i(){k.close();var e=l.deleteDatabase(t);e.onsuccess=eh((function(){x||Ah.dbnames.delete(t).catch(cc),n()})),e.onerror=Dh(r),e.onblocked=Y}m?C.then(i):i()}))},this.backendDB=function(){return b},this.isOpen=function(){return null!==b},this.hasBeenClosed=function(){return v&&v instanceof ac.DatabaseClosed},this.hasFailed=function(){return null!==v},this.dynamicallyOpened=function(){return E},this.name=t,wu(this,{tables:{get:function(){return pu(g).map((function(t){return g[t]}))}}}),this.on=wh(this,"populate","blocked","versionchange",{ready:[bc,cc]}),this.on.ready.subscribe=Tu(this.on.ready.subscribe,(function(t){return function(e,n){Oh.vip((function(){w?(v||zc.resolve().then(e),n&&t(e)):y?(y.push(e),n&&t(e)):(t(e),n||t((function t(){k.on.ready.unsubscribe(e),k.on.ready.unsubscribe(t)})))}))}})),this.transaction=function(){var t=R.apply(this,arguments);return this._transaction.apply(this,t)},this._transaction=function(t,e,n){var r=jc.trans;r&&r.db===k&&-1===t.indexOf("!")||(r=null);var i=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{var s=e.map((function(t){var e=t instanceof P?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}));if("r"==t||"readonly"==t)t="readonly";else{if("rw"!=t&&t!=A)throw new ac.InvalidArgument("Invalid transaction mode: "+t);t=A}if(r){if("readonly"===r.mode&&t===A){if(!i)throw new ac.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&s.forEach((function(t){if(r&&-1===r.storeNames.indexOf(t)){if(!i)throw new ac.SubTransaction("Table "+t+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(t){return r?r._promise(null,(function(e,n){n(t)})):yh(t)}return r?r._promise(t,a,"lock"):jc.trans?gh(jc.transless,(function(){return k._whenReady(a)})):k._whenReady(a);function a(){return zc.resolve().then((function(){var e,i=jc.transless||jc,a=k._createTransaction(t,s,d,r),o={trans:a,transless:i};r?a.idbtrans=r.idbtrans:a.create(),n.constructor===Sc&&ch();var u=zc.follow((function(){if(e=n.call(a,a))if(e.constructor===Cc){var t=hh.bind(null,null);e.then(t,t)}else"function"==typeof e.next&&"function"==typeof e.throw&&(e=Lh(e))}),o);return(e&&"function"==typeof e.then?zc.resolve(e).then((function(t){return a.active?t:yh(new ac.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return e}))).then((function(t){return r&&a._resolve(),a._completion.then((function(){return t}))})).catch((function(t){return a._reject(t),yh(t)}))}))}},this.table=function(t){if(!yu(g,t))throw new ac.InvalidTable("Table "+t+" does not exist");return g[t]},wu(P.prototype,{_trans:function(t,e,n){var r=this._tx||jc.trans;return r&&r.db===k?r===jc.trans?r._promise(t,e,n):uh((function(){return r._promise(t,e,n)}),{trans:r,transless:jc.transless||jc}):function t(e,n,r){if(w||jc.letThrough){var i=k._createTransaction(e,n,d);try{i.create()}catch(t){return yh(t)}return i._promise(e,(function(t,e){return uh((function(){return jc.trans=i,r(t,e,i)}))})).then((function(t){return i._completion.then((function(){return t}))}))}if(!m){if(!h)return yh(new ac.DatabaseClosed);k.open().catch(cc)}return C.then((function(){return t(e,n,r)}))}(t,[this.name],e)},_idbstore:function(t,e,n){var r=this.name;return this._trans(t,(function(t,n,i){if(-1===i.storeNames.indexOf(r))throw new ac.NotFound("Table"+r+" not part of transaction");return e(t,n,i.idbtrans.objectStore(r),i)}),n)},get:function(t,e){if(t&&t.constructor===Object)return this.where(t).first(e);var n=this;return this._idbstore("readonly",(function(e,r,i){var s=i.get(t);s.onerror=Dh(r),s.onsuccess=eh((function(){e(n.hook.reading.fire(s.result))}),r)})).then(e)},where:function(t){if("string"==typeof t)return new j(this,t);if(_u(t))return new j(this,"["+t.join("+")+"]");var e=pu(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(t){return t.compound&&e.every((function(e){return t.keyPath.indexOf(e)>=0}))&&t.keyPath.every((function(t){return e.indexOf(t)>=0}))}))[0];if(n&&Ch!==kh)return this.where(n.name).equals(n.keyPath.map((function(e){return t[e]})));n||console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var r=this.schema.idxByName,i=e.reduce((function(e,n){return[e[0]||r[n],e[0]||!r[n]?J(e[1],(function(e){return""+Du(e,n)==""+t[n]})):e[1]]}),[null,null]),s=i[0];return s?this.where(s.name).equals(t[s.keyPath]).filter(i[1]):n?this.filter(i[1]):this.where(e).equals("")},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){return this.toCollection().each(t)},toArray:function(t){return this.toCollection().toArray(t)},orderBy:function(t){return new L(new j(this,_u(t)?"["+t.join("+")+"]":t))},toCollection:function(){return new L(new j(this))},mapToClass:function(t,e){this.schema.mappedClass=t;var n=Object.create(t.prototype);e&&Rh(n,e),this.schema.instanceTemplate=n;var r=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(yu(e,r))try{n[r]=e[r]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),t},defineClass:function(t){return this.mapToClass(Oh.defineClass(t),t)},bulkDelete:function(t){return this.hook.deleting.fire===cc?this._idbstore(A,(function(e,n,r,i){e(M(r,i,t,!1,cc))})):this.where(":id").anyOf(t).delete().then((function(){}))},bulkPut:function(t,e){var n=this;return this._idbstore(A,(function(r,i,s){if(!s.keyPath&&!n.schema.primKey.auto&&!e)throw new ac.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(s.keyPath&&e)throw new ac.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new ac.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return r();var a,o,u=function(t){0===c.length?r(t):i(new rc(n.name+".bulkPut(): "+c.length+" of "+h+" operations failed",c))},c=[],h=t.length,l=n;if(n.hook.creating.fire===cc&&n.hook.updating.fire===cc){o=D(c);for(var f=0,d=t.length;f<d;++f)(a=e?s.put(t[f],e[f]):s.put(t[f])).onerror=o;a.onerror=D(c,u),a.onsuccess=Mh(u)}else{var p=e||s.keyPath&&t.map((function(t){return Du(t,s.keyPath)})),_=p&&Ou(p,(function(e,n){return null!=e&&[e,t[n]]}));(p?l.where(":id").anyOf(p.filter((function(t){return null!=t}))).modify((function(){this.value=_[this.primKey],_[this.primKey]=null})).catch(nc,(function(t){c=t.failures})).then((function(){for(var n=[],r=e&&[],i=p.length-1;i>=0;--i){var s=p[i];(null==s||_[s])&&(n.push(t[i]),e&&r.push(s),null!=s&&(_[s]=null))}return n.reverse(),e&&r.reverse(),l.bulkAdd(n,r)})).then((function(t){var e=p[p.length-1];return null!=e?e:t})):l.bulkAdd(t)).then(u).catch(rc,(function(t){c=c.concat(t.failures),u()})).catch(i)}}),"locked")},bulkAdd:function(t,e){var n=this,r=this.hook.creating.fire;return this._idbstore(A,(function(i,s,a,o){if(!a.keyPath&&!n.schema.primKey.auto&&!e)throw new ac.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&e)throw new ac.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new ac.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return i();function u(t){0===f.length?i(t):s(new rc(n.name+".bulkAdd(): "+f.length+" of "+d+" operations failed",f))}var c,h,l,f=[],d=t.length;if(r!==cc){var p,_=a.keyPath;h=D(f,null,!0),l=Ph(null),Pu((function(){for(var n=0,i=t.length;n<i;++n){p={onerror:null,onsuccess:null};var s=e&&e[n],u=t[n],f=e?s:_?Du(u,_):void 0,d=r.call(p,f,u,o);null==f&&null!=d&&(_?Mu(u=Uu(u),_,d):s=d),(c=null!=s?a.add(u,s):a.add(u))._hookCtx=p,n<i-1&&(c.onerror=h,p.onsuccess&&(c.onsuccess=l))}}),(function(t){throw p.onerror&&p.onerror(t),t})),c.onerror=D(f,u,!0),c.onsuccess=Ph(u)}else{h=D(f);for(var g=0,b=t.length;g<b;++g)(c=e?a.add(t[g],e[g]):a.add(t[g])).onerror=h;c.onerror=D(f,u),c.onsuccess=Mh(u)}}))},add:function(t,e){var n=this.hook.creating.fire;return this._idbstore(A,(function(r,i,s,a){var o={onsuccess:null,onerror:null};if(n!==cc){var u=null!=e?e:s.keyPath?Du(t,s.keyPath):void 0,c=n.call(o,u,t,a);null==u&&null!=c&&(s.keyPath?Mu(t,s.keyPath,c):e=c)}try{var h=null!=e?s.add(t,e):s.add(t);h._hookCtx=o,h.onerror=Fh(i),h.onsuccess=Ph((function(e){var n=s.keyPath;n&&Mu(t,n,e),r(e)}))}catch(t){throw o.onerror&&o.onerror(t),t}}))},put:function(t,e){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==cc||i!==cc){var s=this.schema.primKey.keyPath,a=void 0!==e?e:s&&Du(t,s);return null==a?this.add(t):(t=Uu(t),this._trans(A,(function(){return n.where(":id").equals(a).modify((function(){this.value=t})).then((function(r){return 0===r?n.add(t,e):a}))}),"locked"))}return this._idbstore(A,(function(n,r,i){var s=void 0!==e?i.put(t,e):i.put(t);s.onerror=Dh(r),s.onsuccess=eh((function(e){var r=i.keyPath;r&&Mu(t,r,e.target.result),n(s.result)}))}))},delete:function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t).delete():this._idbstore(A,(function(e,n,r){var i=r.delete(t);i.onerror=Dh(n),i.onsuccess=eh((function(){e(i.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(A,(function(t,e,n){var r=n.clear();r.onerror=Dh(e),r.onsuccess=eh((function(){t(r.result)}))}))},update:function(t,e){if("object"!=typeof e||_u(e))throw new ac.InvalidArgument("Modifications must be an object.");if("object"!=typeof t||_u(t))return this.where(":id").equals(t).modify(e);pu(e).forEach((function(n){Mu(t,n,e[n])}));var n=Du(t,this.schema.primKey.keyPath);return void 0===n?yh(new ac.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)}}),wu(F.prototype,{_lock:function(){return Iu(!jc.global),++this._reculock,1!==this._reculock||jc.global||(jc.lockOwnerFor=this),this},_unlock:function(){if(Iu(!jc.global),0==--this._reculock)for(jc.global||(jc.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{gh(t[1],t[0])}catch(t){}}return this},_locked:function(){return this._reculock&&jc.lockOwnerFor!==this},create:function(t){var e=this;if(!this.mode)return this;if(Iu(!this.idbtrans),!t&&!b)switch(v&&v.name){case"DatabaseClosedError":throw new ac.DatabaseClosed(v);case"MissingAPIError":throw new ac.MissingAPI(v.message,v);default:throw new ac.OpenFailed(v)}if(!this.active)throw new ac.TransactionInactive;return Iu(null===this._completion._state),(t=this.idbtrans=t||b.transaction(zh(this.storeNames),this.mode)).onerror=eh((function(n){jh(n),e._reject(t.error)})),t.onabort=eh((function(n){jh(n),e.active&&e._reject(new ac.Abort(t.error)),e.active=!1,e.on("abort").fire(n)})),t.oncomplete=eh((function(){e.active=!1,e._resolve()})),this},_promise:function(t,e,n){var r=this;if(t===A&&this.mode!==A)return yh(new ac.ReadOnly("Transaction is readonly"));if(!this.active)return yh(new ac.TransactionInactive);if(this._locked())return new zc((function(i,s){r._blockedFuncs.push([function(){r._promise(t,e,n).then(i,s)},jc])}));if(n)return uh((function(){var t=new zc((function(t,n){r._lock();var i=e(t,n,r);i&&i.then&&i.then(t,n)}));return t.finally((function(){return r._unlock()})),t._lib=!0,t}));var i=new zc((function(t,n){var i=e(t,n,r);i&&i.then&&i.then(t,n)}));return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(t){var e=this._root();if(t=zc.resolve(t),e._waitingFor)e._waitingFor=e._waitingFor.then((function(){return t}));else{e._waitingFor=t,e._waitingQueue=[];var n=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(n.get(-1/0).onsuccess=t)}()}var r=e._waitingFor;return new zc((function(n,i){t.then((function(t){return e._waitingQueue.push(eh(n.bind(null,t)))}),(function(t){return e._waitingQueue.push(eh(i.bind(null,t)))})).finally((function(){e._waitingFor===r&&(e._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new ac.Abort),this.active=!1},tables:{get:(s="Transaction.tables",a=function(){return g},function(){return console.warn(s+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+Yu(Ku(),1)),a.apply(this,arguments)})},table:function(t){return new P(t,k.table(t).schema,this)}}),wu(j.prototype,(function(){function t(t,e,n){var r=t instanceof j?new L(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function e(t){return new L(t,(function(){return f.only("")})).limit(0)}function n(t,e,n,r,i,s){for(var a=Math.min(t.length,r.length),o=-1,u=0;u<a;++u){var c=e[u];if(c!==r[u])return i(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):i(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):o>=0?t.substr(0,o)+e[o]+n.substr(o+1):null;i(t[u],c)<0&&(o=u)}return a<r.length&&"next"===s?t+n.substr(t.length):a<t.length&&"prev"===s?t.substr(0,n.length):o<0?null:t.substr(0,o)+r[o]+n.substr(o+1)}function r(e,r,i,s){var a,o,u,c,h,l,d,p=i.length;if(!i.every((function(t){return"string"==typeof t})))return t(e,"String expected.");function _(t){a=function(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}(t),o=function(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}(t),u="next"===t?G:Q;var e=i.map((function(t){return{lower:o(t),upper:a(t)}})).sort((function(t,e){return u(t.lower,e.lower)}));c=e.map((function(t){return t.upper})),h=e.map((function(t){return t.lower})),l=t,d="next"===t?"":s}_("next");var g=new L(e,(function(){return f.bound(c[0],h[p-1]+s)}));g._ondirectionchange=function(t){_(t)};var b=0;return g._addAlgorithm((function(t,e,i){var s=t.key;if("string"!=typeof s)return!1;var a=o(s);if(r(a,h,b))return!0;for(var f=null,_=b;_<p;++_){var g=n(s,a,c[_],h[_],u,l);null===g&&null===f?b=_+1:(null===f||u(f,g)>0)&&(f=g)}return e(null!==f?function(){t.continue(f+d)}:i),!1})),g}return{between:function(n,r,i,s){i=!1!==i,s=!0===s;try{return H(n,r)>0||0===H(n,r)&&(i||s)&&(!i||!s)?e(this):new L(this,(function(){return f.bound(n,r,!i,!s)}))}catch(e){return t(this,Sh)}},equals:function(t){return new L(this,(function(){return f.only(t)}))},above:function(t){return new L(this,(function(){return f.lowerBound(t,!0)}))},aboveOrEqual:function(t){return new L(this,(function(){return f.lowerBound(t)}))},below:function(t){return new L(this,(function(){return f.upperBound(t,!0)}))},belowOrEqual:function(t){return new L(this,(function(){return f.upperBound(t)}))},startsWith:function(e){return"string"!=typeof e?t(this,"String expected."):this.between(e,e+kh,!0,!0)},startsWithIgnoreCase:function(t){return""===t?this.startsWith(t):r(this,(function(t,e){return 0===t.indexOf(e[0])}),[t],kh)},equalsIgnoreCase:function(t){return r(this,(function(t,e){return t===e[0]}),[t],"")},anyOfIgnoreCase:function(){var t=Vu.apply(Wu,arguments);return 0===t.length?e(this):r(this,(function(t,e){return-1!==e.indexOf(t)}),t,"")},startsWithAnyOfIgnoreCase:function(){var t=Vu.apply(Wu,arguments);return 0===t.length?e(this):r(this,(function(t,e){return e.some((function(e){return 0===t.indexOf(e)}))}),t,kh)},anyOf:function(){var n=Vu.apply(Wu,arguments),r=V;try{n.sort(r)}catch(e){return t(this,Sh)}if(0===n.length)return e(this);var i=new L(this,(function(){return f.bound(n[0],n[n.length-1])}));i._ondirectionchange=function(t){r="next"===t?V:q,n.sort(r)};var s=0;return i._addAlgorithm((function(t,e,i){for(var a=t.key;r(a,n[s])>0;)if(++s===n.length)return e(i),!1;return 0===r(a,n[s])||(e((function(){t.continue(n[s])})),!1)})),i},notEqual:function(t){return this.inAnyRange([[-1/0,t],[t,Ch]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var e=Vu.apply(Wu,arguments);if(0===e.length)return new L(this);try{e.sort(V)}catch(e){return t(this,Sh)}var n=e.reduce((function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[-1/0,e]]}),null);return n.push([e[e.length-1],Ch]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return e(this);if(!n.every((function(t){return void 0!==t[0]&&void 0!==t[1]&&V(t[0],t[1])<=0})))return t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ac.InvalidArgument);var i=!r||!1!==r.includeLowers,s=r&&!0===r.includeUppers;var a,o=V;function u(t,e){return o(t[0],e[0])}try{(a=n.reduce((function(t,e){for(var n=0,r=t.length;n<r;++n){var i=t[n];if(H(e[0],i[1])<0&&H(e[1],i[0])>0){i[0]=(s=i[0],a=e[0],H(s,a)<0?s:a),i[1]=W(i[1],e[1]);break}}var s,a;return n===r&&t.push(e),t}),[])).sort(u)}catch(e){return t(this,Sh)}var c=0,h=s?function(t){return V(t,a[c][1])>0}:function(t){return V(t,a[c][1])>=0},l=i?function(t){return q(t,a[c][0])>0}:function(t){return q(t,a[c][0])>=0};var d=h,p=new L(this,(function(){return f.bound(a[0][0],a[a.length-1][1],!i,!s)}));return p._ondirectionchange=function(t){"next"===t?(d=h,o=V):(d=l,o=q),a.sort(u)},p._addAlgorithm((function(t,e,n){for(var r=t.key;d(r);)if(++c===a.length)return e(n),!1;return!!function(t){return!h(t)&&!l(t)}(r)||0!==H(r,a[c][1])&&0!==H(r,a[c][0])&&(e((function(){o===V?t.continue(a[c][0]):t.continue(a[c][1])})),!1)})),p},startsWithAnyOf:function(){var n=Vu.apply(Wu,arguments);return n.every((function(t){return"string"==typeof t}))?0===n.length?e(this):this.inAnyRange(n.map((function(t){return[t,t+kh]}))):t(this,"startsWithAnyOf() only works with strings")}}})),wu(L.prototype,(function(){function t(t,e){t.filter=J(t.filter,e)}function e(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return J(r(),e())}:e,t.justLimit=n&&!r}function n(t,e){if(t.isPrimKey)return e;var n=t.table.schema.idxByName[t.index];if(!n)throw new ac.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return e.index(n.name)}function r(t,e){var r=n(t,e);return t.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(t.range||null,t.dir+t.unique):r.openCursor(t.range||null,t.dir+t.unique)}function s(t,e,n,i,s){var a=t.replayFilter?J(t.filter,t.replayFilter()):t.filter;t.or?function(){var o={},u=0;function c(){2==++u&&n()}function h(t,n,r){if(!a||a(n,r,c,i)){var s=n.primaryKey,u=""+s;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(s)),yu(o,u)||(o[u]=!0,e(t,n,r))}}t.or._iterate(h,c,i,s),$(r(t,s),t.algorithm,h,c,i,!t.keysOnly&&t.valueMapper)}():$(r(t,s),J(t.algorithm,a),e,n,i,!t.keysOnly&&t.valueMapper)}return{_read:function(t,e){var n=this._ctx;return n.error?n.table._trans(null,yh.bind(null,n.error)):n.table._idbstore("readonly",t).then(e)},_write:function(t){var e=this._ctx;return e.error?e.table._trans(null,yh.bind(null,e.error)):e.table._idbstore(A,t,"locked")},_addAlgorithm:function(t){var e=this._ctx;e.algorithm=J(e.algorithm,t)},_iterate:function(t,e,n,r){return s(this._ctx,t,e,n,r)},clone:function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&bu(n,t),e._ctx=n,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(t){var e=this._ctx;return this._read((function(n,r,i){s(e,t,n,r,i)}))},count:function(t){var e=this._ctx;if(N(e,!0))return this._read((function(t,r,i){var s=n(e,i),a=e.range?s.count(e.range):s.count();a.onerror=Dh(r),a.onsuccess=function(n){t(Math.min(n.target.result,e.limit))}}),t);var r=0;return this._read((function(t,n,i){s(e,(function(){return++r,!1}),(function(){t(r)}),n,i)}),t)},sortBy:function(t,e){var n=t.split(".").reverse(),r=n[0],i=n.length-1;function s(t,e){return e?s(t[n[e]],e-1):t[r]}var a="next"===this._ctx.dir?1:-1;function o(t,e){var n=s(t,i),r=s(e,i);return n<r?-a:n>r?a:0}return this.toArray((function(t){return t.sort(o)})).then(e)},toArray:function(t){var e=this._ctx;return this._read((function(t,r,a){if(i&&"next"===e.dir&&N(e,!0)&&e.limit>0){var o=e.table.hook.reading.fire,u=n(e,a),c=e.limit<1/0?u.getAll(e.range,e.limit):u.getAll(e.range);c.onerror=Dh(r),c.onsuccess=Mh(o===hc?t:function(e){try{t(e.map(o))}catch(t){r(t)}})}else{var h=[];s(e,(function(t){h.push(t)}),(function(){t(h)}),r,a)}}),t)},offset:function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,N(n)?e(n,(function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n((function(){t.advance(e),e=0})),!1))}})):e(n,(function(){var e=t;return function(){return--e<0}})),this)},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),e(this._ctx,(function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}}),!0),this},until:function(e,n){return t(this._ctx,(function(t,r,i){return!e(t.value)||(r(i),n)})),this},first:function(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)},last:function(t){return this.reverse().first(t)},filter:function(e){return t(this._ctx,(function(t){return e(t.value)})),function(t,e){t.isMatch=J(t.isMatch,e)}(this._ctx,e),this},and:function(t){return this.filter(t)},or:function(t){return new j(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.key,n)}))},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},eachPrimaryKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.primaryKey,n)}))},keys:function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.key)})).then((function(){return n})).then(t)},primaryKeys:function(t){var e=this._ctx;if(i&&"next"===e.dir&&N(e,!0)&&e.limit>0)return this._read((function(t,r,i){var s=n(e,i),a=e.limit<1/0?s.getAllKeys(e.range,e.limit):s.getAllKeys(e.range);a.onerror=Dh(r),a.onsuccess=Mh(t)})).then(t);e.keysOnly=!e.isMatch;var r=[];return this.each((function(t,e){r.push(e.primaryKey)})).then((function(){return r})).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys((function(t){return t[0]})).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return t(this._ctx,(function(t){var e=t.primaryKey.toString(),n=yu(r,e);return r[e]=!0,!n})),this},modify:function(t){var e=this,n=this._ctx.table.hook,r=n.updating.fire,i=n.deleting.fire;return this._write((function(n,s,a,o){var u;if("function"==typeof t)u=r===cc&&i===cc?t:function(e){var n=Uu(e);if(!1===t.call(this,e,this))return!1;if(yu(this,"value")){var s=zu(n,this.value),a=r.call(this,s,this.primKey,n,o);a&&(e=this.value,pu(a).forEach((function(t){Mu(e,t,a[t])})))}else i.call(this,this.primKey,e,o)};else if(r===cc){var c=pu(t),h=c.length;u=function(e){for(var n=!1,r=0;r<h;++r){var i=c[r],s=t[i];Du(e,i)!==s&&(Mu(e,i,s),n=!0)}return n}}else{var l=t;t=Fu(l),u=function(e){var n=!1,i=r.call(this,t,this.primKey,Uu(e),o);return i&&bu(t,i),pu(t).forEach((function(r){var i=t[r];Du(e,r)!==i&&(Mu(e,r,i),n=!0)})),i&&(t=Fu(l)),n}}var f=0,d=0,p=!1,_=[],g=[],b=null;function v(t){return t&&(_.push(t),g.push(b)),s(new nc("Error modifying one or more objects",_,d,g))}function m(){p&&d+_.length===f&&(_.length>0?v():n(d))}e.clone().raw()._iterate((function(t,e){b=e.primaryKey;var n={primKey:e.primaryKey,value:t,onsuccess:null,onerror:null};function r(t){return _.push(t),g.push(n.primKey),m(),!0}if(!1!==u.call(n,t,n)){var i=!yu(n,"value");++f,Pu((function(){var t=i?e.delete():e.update(n.value);t._hookCtx=n,t.onerror=Fh(r),t.onsuccess=Ph((function(){++d,m()}))}),r)}else n.onsuccess&&n.onsuccess(n.value)}),(function(){p=!0,m()}),v,a)}))},delete:function(){var t=this,e=this._ctx,n=e.range,r=e.table.hook.deleting.fire,i=r!==cc;if(!i&&N(e)&&(e.isPrimKey&&!Ih||!n))return this._write((function(t,e,r){var i=Dh(e),s=n?r.count(n):r.count();s.onerror=i,s.onsuccess=function(){var a=s.result;Pu((function(){var e=n?r.delete(n):r.clear();e.onerror=i,e.onsuccess=function(){return t(a)}}),(function(t){return e(t)}))}}));var s=i?2e3:1e4;return this._write((function(n,a,o,u){var c=0,h=t.clone({keysOnly:!e.isMatch&&!i}).distinct().limit(s).raw(),l=[],f=function(){return h.each(i?function(t,e){l.push([e.primaryKey,e.value])}:function(t,e){l.push(e.primaryKey)}).then((function(){return i?l.sort((function(t,e){return V(t[0],e[0])})):l.sort(V),M(o,u,l,i,r)})).then((function(){var t=l.length;return c+=t,l=[],t<s?c:f()}))};n(f())}))}}})),bu(this,{Collection:L,Table:P,Transaction:F,Version:T,WhereClause:j}),k.on("versionchange",(function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+k.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+k.name+"'. Closing db now to resume the delete request."),k.close()})),k.on("blocked",(function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+k.name+"') was blocked"):console.warn("Upgrade '"+k.name+"' blocked by other connection holding version "+t.oldVersion/10)})),c.forEach((function(t){t(k)}))}function Rh(t,e){return pu(e).forEach((function(n){var r=function t(e){if("function"==typeof e)return new e;if(_u(e))return[t(e[0])];if(e&&"object"==typeof e){var n={};return Rh(n,e),n}return e}(e[n]);t[n]=r})),t}function Ph(t){return eh((function(e){var n=e.target,r=n._hookCtx,i=r.value||n.result,s=r&&r.onsuccess;s&&s(i),t&&t(i)}),t)}function Dh(t){return eh((function(e){return jh(e),t(e.target.error),!1}))}function Mh(t){return eh((function(e){t(e.target.result)}))}function Fh(t){return eh((function(e){var n=e.target,r=n.error,i=n._hookCtx,s=i&&i.onerror;return s&&s(r),jh(e),t(r),!1}))}function jh(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}function Lh(t){var e=function(e){return t.next(e)},n=i(e),r=i((function(e){return t.throw(e)}));function i(t){return function(e){var i=t(e),s=i.value;return i.done?s:s&&"function"==typeof s.then?s.then(n,r):_u(s)?zc.all(s).then(n,r):n(s)}}return i(e)()}function Nh(t,e,n,r,i,s,a){this.name=t,this.keyPath=e,this.unique=n,this.multi=r,this.auto=i,this.compound=s,this.dotted=a;var o="string"==typeof e?e:e&&"["+[].join.call(e,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+o}function Uh(t,e,n,r){this.name=t,this.primKey=e||new Nh,this.indexes=n||[new Nh],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=Ou(n,(function(t){return[t.name,t]}))}function zh(t){return 1===t.length?t[0]:t}function $h(t){var e=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return e&&e.bind(t)}Gu(qu,Bh),wu(Oh,uc),wu(Oh,{delete:function(t){var e=new Oh(t),n=e.delete();return n.onblocked=function(t){return e.on("blocked",t),this},n},exists:function(t){return new Oh(t).open().then((function(t){return t.close(),!0})).catch(Oh.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(t){var e=$h(Oh.dependencies.indexedDB);return e?new zc((function(t,n){var r=e();r.onsuccess=function(e){t(xu(e.target.result,0))},r.onerror=Dh(n)})).then(t):Ah.dbnames.toCollection().primaryKeys(t)},defineClass:function(){return function(t){t&&bu(this,t)}},applyStructure:Rh,ignoreTransaction:function(t){return jc.trans?gh(jc.transless,t):t()},vip:function(t){return uh((function(){return jc.letThrough=!0,t()}))},async:function(t){return function(){try{var e=Lh(t.apply(this,arguments));return e&&"function"==typeof e.then?e:zc.resolve(e)}catch(t){return yh(t)}}},spawn:function(t,e,n){try{var r=Lh(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:zc.resolve(r)}catch(t){return yh(t)}},currentTransaction:{get:function(){return jc.trans||null}},waitFor:function(t,e){var n=zc.resolve("function"==typeof t?Oh.ignoreTransaction(t):t).timeout(e||6e4);return jc.trans?jc.trans.waitFor(n):n},Promise:zc,debug:{get:function(){return qu},set:function(t){Gu(t,"dexie"===t?function(){return!0}:Bh)}},derive:Cu,extend:bu,props:wu,override:Tu,Events:wh,getByKeyPath:Du,setByKeyPath:Mu,delByKeyPath:function(t,e){"string"==typeof e?Mu(t,e,void 0):"length"in e&&[].map.call(e,(function(e){Mu(t,e,void 0)}))},shallowClone:Fu,deepClone:Uu,getObjectDiff:zu,asap:Bu,maxKey:Ch,minKey:-1/0,addons:[],connections:Eh,MultiModifyError:ac.Modify,errnames:ic,IndexSpec:Nh,TableSchema:Uh,dependencies:function(){try{return{indexedDB:gu.indexedDB||gu.mozIndexedDB||gu.webkitIndexedDB||gu.msIndexedDB,IDBKeyRange:gu.IDBKeyRange||gu.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map((function(t){return parseInt(t)})).reduce((function(t,e,n){return t+e/Math.pow(10,2*n)})),default:Oh,Dexie:Oh}),zc.rejectionMapper=function(t,e){if(!t||t instanceof ec||t instanceof TypeError||t instanceof SyntaxError||!t.name||!oc[t.name])return t;var n=new oc[t.name](e||t.message,t);return"stack"in t&&ku(n,"stack",{get:function(){return this.inner.stack}}),n},(Ah=new Oh("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==gu.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach((function(t){return Ah.dbnames.put({name:t}).catch(cc)})),localStorage.removeItem("Dexie.DatabaseNames"))}catch(t){}}();const Hh={cpuEmulation:"cycle",volume:80,audioEmulation:"pcm",smoothScaling:!1,phosphorEmulation:!0,gammaCorrection:1,videoSync:!0,touchControls:void 0,leftHanded:!1,virtualJoystickSensitivity:10,uiMode:void 0,uiSize:100};class Wh extends Oh{constructor(){super("stellerator-ng"),this.version(1).stores({cartridges:"&hash",roms:"&hash",settings:"&id"})}}let Vh=class{constructor(){this._database=new Wh}getAllCartridges(){return this._database.cartridges.toArray()}insertCartridges(t){return this._database.transaction("rw",[this._database.cartridges,this._database.roms],()=>a(this,void 0,void 0,(function*(){yield Promise.all([this._database.cartridges.bulkPut(t.map(t=>t.cartridge)),this._database.roms.bulkPut(t.map(t=>({hash:t.cartridge.hash,image:t.image})))])})))}updateCartridge(t){return a(this,void 0,void 0,(function*(){return this._database.transaction("rw",[this._database.cartridges],()=>a(this,void 0,void 0,(function*(){(yield this._database.cartridges.get(t.hash))&&(yield this._database.cartridges.put(t))})))}))}deleteCartridge(t){return this._database.transaction("rw",[this._database.cartridges,this._database.roms],()=>a(this,void 0,void 0,(function*(){yield Promise.all([this._database.cartridges.delete(t),this._database.roms.delete(t)])})))}deleteAllCartridges(){return this._database.cartridges.clear()}getCartridge(t){return this._database.cartridges.get(t)}getCartridgeImage(t){return a(this,void 0,void 0,(function*(){const e=yield this._database.roms.get(t);return e&&e.image}))}getSettings(){return a(this,void 0,void 0,(function*(){const t=yield this._database.settings.get(0);return t?n(t,["id"]):Hh}))}saveSettings(t){return a(this,void 0,void 0,(function*(){yield this._database.settings.put(Object.assign(Object.assign({},t),{id:0}))}))}dropDatabase(){return a(this,void 0,void 0,(function*(){this._database.close(),yield indexedDB.deleteDatabase("stellerator-ng"),this._database=new Wh}))}};Vh=r([te()],Vh);var qh=Vh;let Gh=class{constructor(t){this._storage=t,this._addCartridge=()=>{this._input&&this._input.removeEventListener("change",this._onCartridgeAdded),this._input=document.createElement("input"),this._input.type="file",this._input.accept=".bin, .a26, .zip",this._input.multiple=!0,this._input.addEventListener("change",this._onCartridgeAdded),this._input.click()},this._onCartridgeAdded=t=>a(this,void 0,void 0,(function*(){const e=t.target,n=(yield Promise.all(Array.prototype.map.call(e.files,t=>this._processFile(t)))).reduce((t,e)=>t.concat(e),[]),r=Array.from(new Map(n.map(t=>[t.cartridge.hash,t])).values());yield this._storage.insertCartridges(r),this._ports.onNewCartridges_.send(Array.from(r.map(t=>t.cartridge)))})),this._input=null,this._detector=new du}init(t){this._ports=t,t.addCartridge_.subscribe(this._addCartridge)}_processFile(t){return a(this,void 0,void 0,(function*(){try{const e=yield new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",()=>e(new Uint8Array(r.result))),r.addEventListener("error",()=>n(r.error)),r.readAsArrayBuffer(t)});if(t.name.match(/.zip$/i)){const t=new po;return yield t.loadAsync(e),yield Promise.all(t.file(/\.(bin|a26)$/i).filter(t=>!t.dir).map(t=>t.async("uint8array").then(e=>this._createCartridge(t.name.replace(/.*\//,""),e))))}return[this._createCartridge(t.name,e)]}catch(t){return[]}}))}_createCartridge(t,e){const n=(r=e,yo(ye.from(r)));var r;const i=t.replace(/\.[^\.]*$/,"");return{cartridge:{hash:n,name:i,tvMode:this._tvModeFromName(i),cartridgeType:this._detector.detectCartridgeType(e),emulatePaddles:!1,volume:100},image:e}}_tvModeFromName(t){return t.match(/[\W\-_]pal\d*[\W\-_]/i)?"pal":t.match(/[\W\-_]secam\d*[\W\-_]/i)?"secam":"ntsc"}};Gh=r([te(),i(0,ee(qh)),s("design:paramtypes",[qh])],Gh);var Qh=Gh,Jh=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._queue=[],this._pending=!1}return t.prototype.isLocked=function(){return this._pending},t.prototype.acquire=function(){var t=this,e=new Promise((function(e){return t._queue.push(e)}));return this._pending||this._dispatchNext(),e},t.prototype.runExclusive=function(t){return this.acquire().then((function(e){var n;try{n=t()}catch(t){throw e(),t}return Promise.resolve(n).then((function(t){return e(),t}),(function(t){throw e(),t}))}))},t.prototype._dispatchNext=function(){this._queue.length>0?(this._pending=!0,this._queue.shift()(this._dispatchNext.bind(this))):this._pending=!1},t}();e.default=n}));N(Jh);var Kh=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Mutex=Jh.default}));N(Kh);var Yh,Zh=Kh.Mutex;!function(t){let e;!function(t){t.stopped="stopped",t.running="running",t.paused="paused",t.error="error"}(e=t.State||(t.State={}))}(Yh||(Yh={}));var Xh=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){void 0===e&&(e=0),this._dispatch=t,this._rpcTimeout=e,this.error=new Ao.Event,this._rpcHandlers={},this._signalHandlers={},this._pendingTransactions={},this._nextTransactionId=0}return t.prototype.dispatch=function(e){var n=e;switch(n.type){case t.MessageType.signal:return this._handleSignal(n);case t.MessageType.rpc:return this._handeRpc(n);case t.MessageType.internal:return this._handleInternal(n);default:this._raiseError("invalid message type "+n.type)}},t.prototype.rpc=function(e,n,r){var i=this,s=this._nextTransactionId++;return this._dispatch({type:t.MessageType.rpc,transactionId:s,id:e,payload:n},r||void 0),new Promise((function(t,e){var n=i._pendingTransactions[s]={id:s,resolve:t,reject:e};i._rpcTimeout>0&&(i._pendingTransactions[s].timeoutHandle=setTimeout((function(){return i._transactionTimeout(n)}),i._rpcTimeout))}))},t.prototype.signal=function(e,n,r){return this._dispatch({type:t.MessageType.signal,id:e,payload:n},r||void 0),this},t.prototype.registerRpcHandler=function(t,e){if(this._rpcHandlers[t])throw new Error("rpc handler for "+t+" already registered");return this._rpcHandlers[t]=e,this},t.prototype.registerSignalHandler=function(t,e){return this._signalHandlers[t]||(this._signalHandlers[t]=[]),this._signalHandlers[t].push(e),this},t.prototype.deregisterRpcHandler=function(t,e){return this._rpcHandlers[t]&&delete this._rpcHandlers[t],this},t.prototype.deregisterSignalHandler=function(t,e){return this._signalHandlers[t]&&(this._signalHandlers[t]=this._signalHandlers[t].filter((function(t){return e!==t}))),this},t.prototype._raiseError=function(e){this.error.dispatch(new Error(e)),this._dispatch({type:t.MessageType.internal,id:"error",payload:e})},t.prototype._handleSignal=function(t){if(!this._signalHandlers[t.id])return this._raiseError("invalid signal "+t.id);this._signalHandlers[t.id].forEach((function(e){return e(t.payload)}))},t.prototype._handeRpc=function(e){var n=this;if(!this._rpcHandlers[e.id])return this._raiseError("invalid rpc "+e.id);Promise.resolve(this._rpcHandlers[e.id](e.payload)).then((function(r){return n._dispatch({type:t.MessageType.internal,id:"resolve_transaction",transactionId:e.transactionId,payload:r})}),(function(r){return n._dispatch({type:t.MessageType.internal,id:"reject_transaction",transactionId:e.transactionId,payload:r})}))},t.prototype._handleInternal=function(t){var e=void 0!==t.transactionId?this._pendingTransactions[t.transactionId]:void 0;switch(t.id){case"resolve_transaction":if(!e||void 0===t.transactionId)return this._raiseError("no pending transaction with id "+t.transactionId);e.resolve(t.payload),this._clearTransaction(this._pendingTransactions[t.transactionId]);break;case"reject_transaction":if(!e||void 0===t.transactionId)return this._raiseError("no pending transaction with id "+t.transactionId);this._pendingTransactions[t.transactionId].reject(t.payload),this._clearTransaction(this._pendingTransactions[t.transactionId]);break;case"error":this.error.dispatch(new Error("remote error: "+t.payload));break;default:this._raiseError("unhandled internal message "+t.id)}},t.prototype._transactionTimeout=function(t){t.reject("transaction timed out"),this._raiseError("transaction "+t.id+" timed out"),delete this._pendingTransactions[t.id]},t.prototype._clearTransaction=function(t){void 0!==t.timeoutHandle&&clearTimeout(t.timeoutHandle),delete this._pendingTransactions[t.id]},t}();!function(t){!function(t){t[t.signal=0]="signal",t[t.rpc=1]="rpc",t[t.internal=2]="internal"}(t.MessageType||(t.MessageType={}))}(n||(n={})),e.default=n}));N(Xh);var tl=U((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RpcProvider=Xh.default}));N(tl);var el=tl.RpcProvider;class nl{constructor(t,e,n,r,i){if(this._videoProxy=t,this._controlProxy=e,this._waveformChannels=n,this._pcmChannel=r,this._dataTapProxy=i,this._config=null,2!==this._waveformChannels.length)throw new Error(`invalid channel count ${this._waveformChannels.length}`)}setConfig(t){this._config=t}getConfig(){return this._config}getVideo(){return this._videoProxy}getJoystick(t){return this._controlProxy.getJoystick(t)}getControlPanel(){return this._controlProxy.getControlPanel()}getPaddle(t){return this._controlProxy.getPaddle(t)}getWaveformChannels(){return this._waveformChannels}getPCMChannel(){return this._pcmChannel}getVideoProxy(){return this._videoProxy}getDataTap(){return this._dataTapProxy}}const rl={emulationPause:"emulation/pause",emulationReset:"emulation/reset",emulationResume:"emulation/resume",emulationSetRateLimit:"emulation/setRateLimit",emulationStart:"emulation/start",emulationStop:"emulation/stop",emulationFetchLastError:"emulation/fetchLastError",getVideoParameters:"video/getParameters",getWaveformAudioParameters:t=>`audio/waveform/getParameters/${t}`,getPCMAudioParameters:t=>`audio/pcm/getParameters/${t}`,setup:"/setup"};Object.freeze(rl);const il={emulationError:"emulation/error",emulationFrequencyUpdate:"emulation/frequencyUpdate",videoNewFrame:"video/newFrame",videoReturnSurface:"video/returnSurface",controlStateUpdate:"control/stateUpdate",waveformAudioVolumeChange:"audio/waveform/volumeChange",waveformAudioBufferChange:"audio/waveform/bufferChange",pcmAudioNewFrame:t=>`audio/pcm/newFrame/${t}`,pcmAudioTogglePause:t=>`audio/pcm/togglePause/${t}`,pcmAudioReturnFrame:t=>`audio/pcm/returnFrame/${t}`,audioStop:"audio/stop",messageFromDataTap:"data-tap/message"};Object.freeze(il);class sl{constructor(t){this._rpc=t,this.newFrame=new Co,this._active=!1,this._width=0,this._height=0,this._ids=null}init(){this._rpc.registerSignalHandler(il.videoNewFrame,this._onNewFrame.bind(this))}start(){return a(this,void 0,void 0,(function*(){this._active&&this.stop();const t=yield this._rpc.rpc(rl.getVideoParameters);this._active=!0,this._width=t.width,this._height=t.height,this._ids=new Set}))}stop(){this._active=!1,this._ids=null}getWidth(){return this._width}getHeight(){return this._height}_onNewFrame(t){if(!this._active)return void console.warn("video proxy deactivated: ignoring frame");if(this._width!==t.width||this._height!==t.height)return void console.warn("surface dimensions do not match; ignoring frame");this._ids.add(t.id);const e=new ImageData(new Uint8ClampedArray(t.buffer),t.width,t.height);this.newFrame.dispatch({get:()=>e,release:()=>{this._active&&this._ids.has(t.id)&&this._rpc.signal(il.videoReturnSurface,{id:t.id,buffer:t.buffer},[t.buffer])},dispose:()=>{},adopt:()=>{throw new Error("adopt is not implemented")}})}}class al{constructor(t=!1){this._state=t,this.stateChanged=new Co,this.beforeRead=new Co}read(){return this.beforeRead.dispatch(this),this._state}peek(){return this._state}toggle(t){this._state!==t&&(this._state=t,this.stateChanged.dispatch(t))}}class ol{constructor(){this._left=new al,this._right=new al,this._up=new al,this._down=new al,this._fire=new al}getLeft(){return this._left}getRight(){return this._right}getUp(){return this._up}getDown(){return this._down}getFire(){return this._fire}}class ul{constructor(){this._selectSwitch=new al,this._resetButton=new al,this._colorSwitch=new al,this._difficutlyP0=new al,this._difficutlyP1=new al}getSelectSwitch(){return this._selectSwitch}getResetButton(){return this._resetButton}getColorSwitch(){return this._colorSwitch}getDifficultySwitchP0(){return this._difficutlyP0}getDifficultySwitchP1(){return this._difficutlyP1}}class cl{constructor(){this.valueChanged=new Co,this._fireSwitch=new al,this._value=.5}setValue(t){this._value=t,this.valueChanged.dispatch(t)}getValue(){return this._value}getFire(){return this._fireSwitch}}class hl{constructor(t){this._rpc=t,this._joysticks=new Array(2),this._paddles=new Array(4),this._controlPanel=new ul;for(let t=0;t<2;t++)this._joysticks[t]=new ol;for(let t=0;t<4;t++)this._paddles[t]=new cl}sendUpdate(){this._rpc.signal(il.controlStateUpdate,{joystickState:this._joysticks.map(hl._joystickState),paddleState:this._paddles.map(hl._paddleState),controlPanelState:hl._controlPanelState(this._controlPanel)})}getJoystick(t){if(t<0||t>1)throw new Error(`invalid joystick index ${t}`);return this._joysticks[t]}getControlPanel(){return this._controlPanel}getPaddle(t){if(t<0||t>3)throw new Error(`invalid paddle index ${t}`);return this._paddles[t]}static _joystickState(t){return{up:t.getUp().read(),down:t.getDown().read(),left:t.getLeft().read(),right:t.getRight().read(),fire:t.getFire().read()}}static _paddleState(t){return{value:t.getValue(),fire:t.getFire().read()}}static _controlPanelState(t){return{difficulty0:t.getDifficultySwitchP0().read(),difficulty1:t.getDifficultySwitchP1().read(),select:t.getSelectSwitch().read(),reset:t.getResetButton().read(),color:t.getColorSwitch().read()}}}var ll;!function(t){t.State=class{constructor(){this.a=0,this.x=0,this.y=0,this.s=0,this.p=0,this.flags=0,this.irq=!1,this.nmi=!1}}}(ll||(ll={}));class fl{constructor(){this.cycleType=0,this.address=0,this.value=0,this.pollInterrupts=!1,this.nextStep=null}read(t,e){return this.cycleType=0,this.address=e,this.nextStep=t,this}write(t,e,n){return this.cycleType=1,this.address=e,this.value=n,this.nextStep=t,this}poll(t){return this.pollInterrupts=t,this}}const dl=Symbol("immutable properties");function pl(t){const e=t[dl];if(e)for(const n of e)Object.defineProperty(t,n,{writable:!1,configurable:!1})}function _l(t,e){t[dl]||Object.defineProperty(t,dl,{value:[],writable:!1,enumerable:!1}),t[dl].push(e)}class gl{constructor(t){this.reset=()=>this._result.read(this._pre1Step,255),this._pre1Step=()=>this._result.read(this._pre2Step,255),this._pre2Step=()=>this._result.read(this._stack1Step,256),this._stack1Step=()=>this._result.read(this._stack2Step,511),this._stack2Step=()=>(this._state.s=253,this._result.read(this._stack3Step,510)),this._stack3Step=()=>this._result.read(this._readTargetLoStep,65532),this._readTargetLoStep=t=>(this._targetAddress=t,this._result.read(this._readTargetHiStep,65533)),this._readTargetHiStep=t=>(this._targetAddress|=t<<8,this._state.p=this._targetAddress,null),this._targetAddress=0,this._result=new fl,this._state=t,pl(this)}}r([_l,s("design:type",Object)],gl.prototype,"reset",void 0),r([_l,s("design:type",Object)],gl.prototype,"_pre1Step",void 0),r([_l,s("design:type",Object)],gl.prototype,"_pre2Step",void 0),r([_l,s("design:type",Object)],gl.prototype,"_stack1Step",void 0),r([_l,s("design:type",Object)],gl.prototype,"_stack2Step",void 0),r([_l,s("design:type",Object)],gl.prototype,"_stack3Step",void 0),r([_l,s("design:type",Object)],gl.prototype,"_readTargetLoStep",void 0),r([_l,s("design:type",Object)],gl.prototype,"_readTargetHiStep",void 0),r([_l,s("design:type",Object)],gl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],gl.prototype,"_state",void 0);class bl{constructor(t,e,n){this.reset=()=>this._result.read(this._dummyRead,this._state.p),this._dummyRead=()=>(this._isBrk&&(this._state.p=this._state.p+1&65535),this._result.write(this._pushPch,256+this._state.s,this._state.p>>>8)),this._pushPch=()=>(this._state.s=this._state.s-1&255,this._result.write(this._pushPcl,256+this._state.s,255&this._state.p).poll(!0)),this._pushPcl=()=>(this._state.s=this._state.s-1&255,this._vector=this._state.nmi?65530:this._defaultVector,this._result.write(this._pushFlags,256+this._state.s,this._isBrk?16|this._state.flags:-17&this._state.flags)),this._pushFlags=()=>(this._state.s=this._state.s-1&255,this._result.read(this._fetchPcl,this._vector)),this._fetchPcl=t=>(this._state.flags|=4,this._state.p=t,this._result.read(this._fetchPch,++this._vector)),this._fetchPch=t=>(this._state.p=this._state.p|t<<8,this._state.nmi=this._state.irq=!1,null),this._vector=0,this._result=new fl,this._state=t,this._defaultVector=e,this._isBrk=n,pl(this)}}r([_l,s("design:type",Object)],bl.prototype,"reset",void 0),r([_l,s("design:type",Object)],bl.prototype,"_dummyRead",void 0),r([_l,s("design:type",Object)],bl.prototype,"_pushPch",void 0),r([_l,s("design:type",Object)],bl.prototype,"_pushPcl",void 0),r([_l,s("design:type",Object)],bl.prototype,"_pushFlags",void 0),r([_l,s("design:type",Object)],bl.prototype,"_fetchPcl",void 0),r([_l,s("design:type",Object)],bl.prototype,"_fetchPch",void 0),r([_l,s("design:type",Object)],bl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],bl.prototype,"_state",void 0),r([_l,s("design:type",Number)],bl.prototype,"_defaultVector",void 0),r([_l,s("design:type",Boolean)],bl.prototype,"_isBrk",void 0);class vl{constructor(t,e,n=e){this.operation=t,this.addressingMode=e,this.effectiveAddressingMode=n}getSize(){switch(this.effectiveAddressingMode){case 1:case 2:case 6:case 9:case 8:case 11:case 5:return 2;case 3:case 7:case 10:case 4:return 3;default:return 1}}}!function(t){let e;!function(t){t[t.adc=0]="adc",t[t.and=1]="and",t[t.asl=2]="asl",t[t.bcc=3]="bcc",t[t.bcs=4]="bcs",t[t.beq=5]="beq",t[t.bit=6]="bit",t[t.bmi=7]="bmi",t[t.bne=8]="bne",t[t.bpl=9]="bpl",t[t.brk=10]="brk",t[t.bvc=11]="bvc",t[t.bvs=12]="bvs",t[t.clc=13]="clc",t[t.cld=14]="cld",t[t.cli=15]="cli",t[t.clv=16]="clv",t[t.cmp=17]="cmp",t[t.cpx=18]="cpx",t[t.cpy=19]="cpy",t[t.dec=20]="dec",t[t.dex=21]="dex",t[t.dey=22]="dey",t[t.eor=23]="eor",t[t.inc=24]="inc",t[t.inx=25]="inx",t[t.iny=26]="iny",t[t.jmp=27]="jmp",t[t.jsr=28]="jsr",t[t.lda=29]="lda",t[t.ldx=30]="ldx",t[t.ldy=31]="ldy",t[t.lsr=32]="lsr",t[t.nop=33]="nop",t[t.ora=34]="ora",t[t.pha=35]="pha",t[t.php=36]="php",t[t.pla=37]="pla",t[t.plp=38]="plp",t[t.rol=39]="rol",t[t.ror=40]="ror",t[t.rti=41]="rti",t[t.rts=42]="rts",t[t.sbc=43]="sbc",t[t.sec=44]="sec",t[t.sed=45]="sed",t[t.sei=46]="sei",t[t.sta=47]="sta",t[t.stx=48]="stx",t[t.sty=49]="sty",t[t.tax=50]="tax",t[t.tay=51]="tay",t[t.tsx=52]="tsx",t[t.txa=53]="txa",t[t.txs=54]="txs",t[t.tya=55]="tya",t[t.dop=56]="dop",t[t.top=57]="top",t[t.alr=58]="alr",t[t.axs=59]="axs",t[t.dcp=60]="dcp",t[t.lax=61]="lax",t[t.arr=62]="arr",t[t.slo=63]="slo",t[t.aax=64]="aax",t[t.lar=65]="lar",t[t.isc=66]="isc",t[t.aac=67]="aac",t[t.atx=68]="atx",t[t.rra=69]="rra",t[t.rla=70]="rla",t[t.invalid=71]="invalid"}(e=t.OperationMap||(t.OperationMap={})),t.opcodes=new Array(256)}(vl||(vl={})),function(t){let e;!function(e){for(let e=0;e<256;e++)t.opcodes[e]=new t(71,12);let n,r,i;for(let e=0;e<8;e++){switch(e){case 0:n=34;break;case 1:n=1;break;case 2:n=23;break;case 3:n=0;break;case 4:n=47;break;case 5:n=29;break;case 6:n=17;break;case 7:n=43}for(let s=0;s<8;s++){switch(s){case 0:r=8;break;case 1:r=2;break;case 2:r=1;break;case 3:r=3;break;case 4:r=11;break;case 5:r=6;break;case 6:r=10;break;case 7:r=7}47===n&&1===r&&(r=12),71!==n&&12!==r&&(i=e<<5|s<<2|1,t.opcodes[i]=new t(n,r))}}function s(e,n,r,i){if(71!==t.opcodes[e].operation)throw new Error("entry for opcode "+e+" already exists");t.opcodes[e]=new t(n,r,i)}s(6,2,2),s(10,2,0),s(14,2,3),s(22,2,6),s(30,2,7),s(38,39,2),s(42,39,0),s(46,39,3),s(54,39,6),s(62,39,7),s(70,32,2),s(74,32,0),s(78,32,3),s(86,32,6),s(94,32,7),s(102,40,2),s(106,40,0),s(110,40,3),s(118,40,6),s(126,40,7),s(134,48,2),s(142,48,3),s(150,48,9),s(162,30,1),s(166,30,2),s(174,30,3),s(182,30,9),s(190,30,10),s(198,20,2),s(206,20,3),s(214,20,6),s(222,20,7),s(230,24,2),s(238,24,3),s(246,24,6),s(254,24,7),s(36,6,2),s(44,6,3),s(76,27,3),s(108,27,4),s(132,49,2),s(140,49,3),s(148,49,6),s(160,31,1),s(164,31,2),s(172,31,3),s(180,31,6),s(188,31,7),s(192,19,1),s(196,19,2),s(204,19,3),s(224,18,1),s(228,18,2),s(236,18,3),s(16,9,5),s(48,7,5),s(80,11,5),s(112,12,5),s(144,3,5),s(176,4,5),s(208,8,5),s(240,5,5),s(0,10,0),s(32,28,0,3),s(64,41,0),s(96,42,0),s(8,36,0),s(40,38,0),s(72,35,0),s(104,37,0),s(136,22,0),s(168,51,0),s(200,26,0),s(232,25,0),s(24,13,0),s(56,44,0),s(88,15,0),s(120,46,0),s(152,55,0),s(184,16,0),s(216,14,0),s(248,45,0),s(138,53,0),s(154,54,0),s(170,50,0),s(186,52,0),s(202,21,0),s(234,33,0),s(26,33,0),s(58,33,0),s(90,33,0),s(122,33,0),s(218,33,0),s(250,33,0),s(4,56,2),s(20,56,6),s(52,56,6),s(68,56,2),s(84,56,6),s(100,56,2),s(116,56,6),s(128,56,1),s(130,56,1),s(137,56,1),s(194,56,1),s(212,56,6),s(226,56,1),s(244,56,6),s(12,57,3),s(28,57,7),s(60,57,7),s(92,57,7),s(124,57,7),s(220,57,7),s(252,57,7),s(235,43,1),s(75,58,1),s(203,59,1),s(199,60,2),s(215,60,6),s(207,60,3),s(223,60,7),s(219,60,10),s(195,60,8),s(211,60,11),s(167,61,2),s(183,61,9),s(175,61,3),s(191,61,10),s(163,61,8),s(179,61,11),s(107,62,1),s(7,63,2),s(23,63,6),s(15,63,3),s(31,63,7),s(27,63,10),s(3,63,8),s(19,63,11),s(135,64,2),s(151,64,9),s(131,64,8),s(143,64,3),s(187,65,10),s(231,66,2),s(247,66,6),s(239,66,3),s(255,66,7),s(251,66,10),s(227,66,8),s(243,66,11),s(11,67,1),s(43,67,1),s(171,68,1),s(103,69,2),s(119,69,6),s(111,69,3),s(127,69,7),s(123,69,10),s(99,69,8),s(115,69,11),s(39,70,2),s(55,70,6),s(47,70,3),s(63,70,7),s(59,70,10),s(35,70,8),s(51,70,11)}(e=t.__init||(t.__init={}))}(vl||(vl={}));class ml{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchLo,this._state.p),this._fetchLo=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchHi,this._state.p)),this._fetchHi=t=>(this._operand|=t<<8,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new fl,this._state=t,this._next=e,pl(this)}}r([_l,s("design:type",Object)],ml.prototype,"reset",void 0),r([_l,s("design:type",Object)],ml.prototype,"_fetchLo",void 0),r([_l,s("design:type",Object)],ml.prototype,"_fetchHi",void 0),r([_l,s("design:type",Object)],ml.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],ml.prototype,"_state",void 0),r([_l,s("design:type",Function)],ml.prototype,"_next",void 0);class yl{constructor(t,e,n=(()=>null),r=!1){this.reset=()=>this._result.read(this._fetchLo,this._state.p),this._fetchLo=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchHi,this._state.p)),this._fetchHi=t=>{this._operand|=t<<8,this._state.p=this._state.p+1&65535;const e=this._indexExtractor(this._state);return this._carry=(255&this._operand)+e>255,this._operand=65280&this._operand|this._operand+e&255,this._carry||this._writeOp?this._result.read(this._dereferenceAndCarry,this._operand):this._next(this._operand,this._state)},this._dereferenceAndCarry=t=>(this._carry&&(this._operand=this._operand+256&65535),this._next(this._operand,this._state)),this._operand=0,this._carry=!1,this._result=new fl,this._state=t,this._indexExtractor=e,this._next=n,this._writeOp=r,pl(this)}static absoluteX(t,e,n){return new yl(t,t=>t.x,e,n)}static absoluteY(t,e,n){return new yl(t,t=>t.y,e,n)}}r([_l,s("design:type",Object)],yl.prototype,"reset",void 0),r([_l,s("design:type",Object)],yl.prototype,"_fetchLo",void 0),r([_l,s("design:type",Object)],yl.prototype,"_fetchHi",void 0),r([_l,s("design:type",Object)],yl.prototype,"_dereferenceAndCarry",void 0),r([_l,s("design:type",Object)],yl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],yl.prototype,"_state",void 0),r([_l,s("design:type",Function)],yl.prototype,"_indexExtractor",void 0),r([_l,s("design:type",Function)],yl.prototype,"_next",void 0),r([_l,s("design:type",Boolean)],yl.prototype,"_writeOp",void 0),r([_l,s("design:type",Function),s("design:paramtypes",[ll.State,Function,Boolean]),s("design:returntype",yl)],yl,"absoluteX",null),r([_l,s("design:type",Function),s("design:paramtypes",[ll.State,Function,Boolean]),s("design:returntype",yl)],yl,"absoluteY",null);class wl{constructor(t,e=(()=>null)){this.reset=t=>this._result.read(this._dereference,t),this._dereference=t=>this._next(t,this._state),this._result=new fl,this._next=e,this._state=t,pl(this)}}r([_l,s("design:type",Object)],wl.prototype,"reset",void 0),r([_l,s("design:type",Object)],wl.prototype,"_dereference",void 0),r([_l,s("design:type",Object)],wl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],wl.prototype,"_state",void 0),r([_l,s("design:type",Function)],wl.prototype,"_next",void 0);class Al{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchOperand,this._state.p),this._fetchOperand=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new fl,this._state=t,this._next=e,pl(this)}}r([_l,s("design:type",Object)],Al.prototype,"reset",void 0),r([_l,s("design:type",Object)],Al.prototype,"_fetchOperand",void 0),r([_l,s("design:type",Object)],Al.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],Al.prototype,"_state",void 0),r([_l,s("design:type",Function)],Al.prototype,"_next",void 0);class kl{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._address=t,this._state.p=this._state.p+1&65535,this._result.read(this._addIndex,this._address)),this._addIndex=t=>(this._address=this._address+this._state.x&255,this._result.read(this._fetchLo,this._address)),this._fetchLo=t=>(this._operand=t,this._address=this._address+1&255,this._result.read(this._fetchHi,this._address)),this._fetchHi=t=>(this._operand|=t<<8,this._next(this._operand,this._state)),this._operand=0,this._address=0,this._result=new fl,this._state=t,this._next=e,pl(this)}}r([_l,s("design:type",Object)],kl.prototype,"reset",void 0),r([_l,s("design:type",Object)],kl.prototype,"_fetchAddress",void 0),r([_l,s("design:type",Object)],kl.prototype,"_addIndex",void 0),r([_l,s("design:type",Object)],kl.prototype,"_fetchLo",void 0),r([_l,s("design:type",Object)],kl.prototype,"_fetchHi",void 0),r([_l,s("design:type",Object)],kl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],kl.prototype,"_state",void 0),r([_l,s("design:type",Function)],kl.prototype,"_next",void 0);class Cl{constructor(t,e=(()=>null),n){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._address=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchLo,this._address)),this._fetchLo=t=>(this._operand=t,this._address=this._address+1&255,this._result.read(this._fetchHi,this._address)),this._fetchHi=t=>(this._operand|=t<<8,this._carry=(255&this._operand)+this._state.y>255,this._operand=65280&this._operand|this._operand+this._state.y&255,this._carry||this._writeOp?this._result.read(this._dereferenceAndCarry,this._operand):this._next(this._operand,this._state)),this._dereferenceAndCarry=t=>(this._carry&&(this._operand=this._operand+256&65535),this._next(this._operand,this._state)),this._operand=0,this._address=0,this._carry=!1,this._result=new fl,this._state=t,this._next=e,this._writeOp=n,pl(this)}}r([_l,s("design:type",Object)],Cl.prototype,"reset",void 0),r([_l,s("design:type",Object)],Cl.prototype,"_fetchAddress",void 0),r([_l,s("design:type",Object)],Cl.prototype,"_fetchLo",void 0),r([_l,s("design:type",Object)],Cl.prototype,"_fetchHi",void 0),r([_l,s("design:type",Object)],Cl.prototype,"_dereferenceAndCarry",void 0),r([_l,s("design:type",Object)],Cl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],Cl.prototype,"_state",void 0),r([_l,s("design:type",Function)],Cl.prototype,"_next",void 0),r([_l,s("design:type",Boolean)],Cl.prototype,"_writeOp",void 0);class Sl{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._next(this._operand,this._state)),this._operand=0,this._result=new fl,this._state=t,this._next=e,pl(this)}}r([_l,s("design:type",Object)],Sl.prototype,"reset",void 0),r([_l,s("design:type",Object)],Sl.prototype,"_fetchAddress",void 0),r([_l,s("design:type",Object)],Sl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],Sl.prototype,"_state",void 0),r([_l,s("design:type",Function)],Sl.prototype,"_next",void 0);class El{constructor(t,e,n){this.reset=()=>this._result.read(this._fetchAddress,this._state.p),this._fetchAddress=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._result.read(this._addIndex,this._operand)),this._addIndex=t=>(this._operand=this._operand+this._indexExtractor(this._state)&255,this._next(this._operand,this._state)),this._operand=0,this._result=new fl,this._state=t,this._indexExtractor=e,this._next=n,pl(this)}static zeroPageX(t,e=(()=>null)){return new El(t,t=>t.x,e)}static zeroPageY(t,e=(()=>null)){return new El(t,t=>t.y,e)}}r([_l,s("design:type",Object)],El.prototype,"reset",void 0),r([_l,s("design:type",Object)],El.prototype,"_fetchAddress",void 0),r([_l,s("design:type",Object)],El.prototype,"_addIndex",void 0),r([_l,s("design:type",Object)],El.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],El.prototype,"_state",void 0),r([_l,s("design:type",Function)],El.prototype,"_next",void 0),r([_l,s("design:type",Function)],El.prototype,"_indexExtractor",void 0);class xl{constructor(t,e){this.reset=()=>this._result.read(this._fetchTarget,this._state.p).poll(!0),this._fetchTarget=t=>(this._operand=t,this._state.p=this._state.p+1&65535,this._predicate(this._state.flags)?this._result.read(this._firstDummyRead,this._state.p):null),this._firstDummyRead=t=>(this._target=this._state.p+(128&this._operand?this._operand-256:this._operand)&65535,(65280&this._target)==(65280&this._state.p)?(this._state.p=this._target,null):this._result.read(this._secondDummyRead,65280&this._state.p|255&this._target).poll(!0)),this._secondDummyRead=t=>(this._state.p=this._target,null),this._target=0,this._operand=0,this._result=new fl,this._state=t,this._predicate=e,pl(this)}}r([_l,s("design:type",Object)],xl.prototype,"reset",void 0),r([_l,s("design:type",Object)],xl.prototype,"_fetchTarget",void 0),r([_l,s("design:type",Object)],xl.prototype,"_firstDummyRead",void 0),r([_l,s("design:type",Object)],xl.prototype,"_secondDummyRead",void 0),r([_l,s("design:type",Object)],xl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],xl.prototype,"_state",void 0),r([_l,s("design:type",Function)],xl.prototype,"_predicate",void 0);const Tl=(t,e)=>new xl(t,e);class Il{constructor(t){this.reset=()=>this._result.read(this._fetchPcl,this._state.p),this._fetchPcl=t=>(this._addressLo=t,this._state.p=this._state.p+1&65535,this._result.read(this._dummyStackRead,256+this._state.s)),this._dummyStackRead=()=>this._result.write(this._pushPch,256+this._state.s,this._state.p>>>8),this._pushPch=()=>(this._state.s=this._state.s-1&255,this._result.write(this._pushPcl,256+this._state.s,255&this._state.p)),this._pushPcl=()=>(this._state.s=this._state.s-1&255,this._result.read(this._fetchPch,this._state.p)),this._fetchPch=t=>(this._state.p=this._addressLo|t<<8,null),this._addressLo=0,this._result=new fl,this._state=t,pl(this)}}r([_l,s("design:type",Object)],Il.prototype,"_fetchPcl",void 0),r([_l,s("design:type",Object)],Il.prototype,"_dummyStackRead",void 0),r([_l,s("design:type",Object)],Il.prototype,"_pushPch",void 0),r([_l,s("design:type",Object)],Il.prototype,"_pushPcl",void 0),r([_l,s("design:type",Object)],Il.prototype,"_fetchPch",void 0),r([_l,s("design:type",Object)],Il.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],Il.prototype,"_state",void 0);class Bl{constructor(t,e){this.reset=t=>(this._address=t,this._result.read(this._read,t)),this._read=t=>(this._operand=t,this._result.write(this._dummyWrite,this._address,this._operand)),this._dummyWrite=t=>this._result.write(this._write,this._address,this._operation(this._operand,this._state)),this._write=()=>null,this._result=new fl,this._state=t,this._operation=e,pl(this)}}r([_l,s("design:type",Object)],Bl.prototype,"reset",void 0),r([_l,s("design:type",Object)],Bl.prototype,"_read",void 0),r([_l,s("design:type",Object)],Bl.prototype,"_dummyWrite",void 0),r([_l,s("design:type",Object)],Bl.prototype,"_write",void 0),r([_l,s("design:type",Object)],Bl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],Bl.prototype,"_state",void 0),r([_l,s("design:type",Function)],Bl.prototype,"_operation",void 0);const Ol=(t,e)=>new Bl(t,e);class Rl{constructor(t){this.reset=()=>this._result.read(this._dummyOperandRead,this._state.p),this._dummyOperandRead=()=>this._result.read(this._dummyStackRead,256+this._state.s),this._dummyStackRead=()=>(this._state.s=this._state.s+1&255,this._result.read(this._popPcl,256+this._state.s)),this._popPcl=t=>(this._state.p=65280&this._state.p|t,this._state.s=this._state.s+1&255,this._result.read(this._popPch,256+this._state.s)),this._popPch=t=>(this._state.p=255&this._state.p|t<<8,this._result.read(this._incrementP,this._state.p)),this._incrementP=()=>(this._state.p=this._state.p+1&65535,null),this._result=new fl,this._state=t,pl(this)}}r([_l,s("design:type",Object)],Rl.prototype,"reset",void 0),r([_l,s("design:type",Object)],Rl.prototype,"_dummyOperandRead",void 0),r([_l,s("design:type",Object)],Rl.prototype,"_dummyStackRead",void 0),r([_l,s("design:type",Object)],Rl.prototype,"_popPcl",void 0),r([_l,s("design:type",Object)],Rl.prototype,"_popPch",void 0),r([_l,s("design:type",Object)],Rl.prototype,"_incrementP",void 0),r([_l,s("design:type",Object)],Rl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],Rl.prototype,"_state",void 0);class Pl{constructor(t,e){this.reset=()=>this._result.read(this._executeOperation,this._state.p).poll(!0),this._executeOperation=()=>(this._operation(this._state),null),this._result=new fl,this._state=t,this._operation=e,pl(this)}}r([_l,s("design:type",Object)],Pl.prototype,"reset",void 0),r([_l,s("design:type",Object)],Pl.prototype,"_executeOperation",void 0),r([_l,s("design:type",Object)],Pl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],Pl.prototype,"_state",void 0),r([_l,s("design:type",Function)],Pl.prototype,"_operation",void 0);const Dl=(t,e)=>new Pl(t,e);class Ml{constructor(t,e){this.reset=()=>this._result.read(this._dummyRead,this._state.p).poll(!0),this._dummyRead=()=>this._result.read(this._incrementS,256+this._state.s),this._incrementS=()=>(this._state.s=this._state.s+1&255,this._result.read(this._pull,256+this._state.s)),this._pull=t=>(this._operation(this._state,t),null),this._result=new fl,this._state=t,this._operation=e,pl(this)}}r([_l,s("design:type",Object)],Ml.prototype,"reset",void 0),r([_l,s("design:type",Object)],Ml.prototype,"_dummyRead",void 0),r([_l,s("design:type",Object)],Ml.prototype,"_incrementS",void 0),r([_l,s("design:type",Object)],Ml.prototype,"_pull",void 0),r([_l,s("design:type",Object)],Ml.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],Ml.prototype,"_state",void 0),r([_l,s("design:type",Function)],Ml.prototype,"_operation",void 0);const Fl=(t,e)=>new Ml(t,e);class jl{constructor(t,e){this.reset=()=>this._result.read(this._dummyRead,this._state.p),this._dummyRead=()=>this._result.write(this._push,256+this._state.s,this._operation(this._state)),this._push=()=>(this._state.s=this._state.s-1&255,null),this._result=new fl,this._state=t,this._operation=e,pl(this)}}r([_l,s("design:type",Object)],jl.prototype,"reset",void 0),r([_l,s("design:type",Object)],jl.prototype,"_dummyRead",void 0),r([_l,s("design:type",Object)],jl.prototype,"_push",void 0),r([_l,s("design:type",Object)],jl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],jl.prototype,"_state",void 0),r([_l,s("design:type",Function)],jl.prototype,"_operation",void 0);const Ll=(t,e)=>new jl(t,e);class Nl{constructor(t){this.reset=()=>this._result.read(this._dummyOperandRead,this._state.p),this._dummyOperandRead=()=>this._result.read(this._dummyStackRead,256+this._state.s),this._dummyStackRead=()=>(this._state.s=this._state.s+1&255,this._result.read(this._popP,256+this._state.s)),this._popP=t=>(this._state.flags=-17&(32|t),this._state.s=this._state.s+1&255,this._result.read(this._popPcl,256+this._state.s)),this._popPcl=t=>(this._state.p=65280&this._state.p|t,this._state.s=this._state.s+1&255,this._result.read(this._popPch,256+this._state.s)),this._popPch=t=>(this._state.p=255&this._state.p|t<<8,null),this._result=new fl,this._state=t,pl(this)}}r([_l,s("design:type",Object)],Nl.prototype,"reset",void 0),r([_l,s("design:type",Object)],Nl.prototype,"_dummyOperandRead",void 0),r([_l,s("design:type",Object)],Nl.prototype,"_dummyStackRead",void 0),r([_l,s("design:type",Object)],Nl.prototype,"_popP",void 0),r([_l,s("design:type",Object)],Nl.prototype,"_popPcl",void 0),r([_l,s("design:type",Object)],Nl.prototype,"_popPch",void 0),r([_l,s("design:type",Object)],Nl.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],Nl.prototype,"_state",void 0);class Ul{constructor(t,e){this.reset=t=>this._result.write(()=>null,t,this._operation(this._state)),this._result=new fl,this._state=t,this._operation=e,pl(this)}}r([_l,s("design:type",Object)],Ul.prototype,"reset",void 0),r([_l,s("design:type",Object)],Ul.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],Ul.prototype,"_state",void 0),r([_l,s("design:type",Function)],Ul.prototype,"_operation",void 0);const zl=(t,e)=>new Ul(t,e);function $l(t,e){e.flags=-131&e.flags|128&t|(t?0:2)}function Hl(t,e,n){const r=n(t);return $l(r,e),r}function Wl(t,e){$l(e(t),t)}function Vl(t,e,n){return $l(n(t,e),e),null}function ql(t,e){if(8&e.flags){const n=(15&t)+(15&e.a)+(1&e.flags),r=(t>>>4)+(e.a>>>4)+(n>9?1:0);e.a=n%10|r%10<<4,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|(r>9?1:0)}else{const n=e.a+t+(1&e.flags),r=255&n;e.flags=-196&e.flags|128&r|(r?0:2)|n>>>8|(~(t^e.a)&(r^t)&128)>>>1,e.a=r}return null}function Gl(t){const e=t.a;t.a=t.a<<1&255,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7}function Ql(t,e){const n=t<<1&255;return e.flags=-132&e.flags|128&n|(n?0:2)|t>>>7,n}function Jl(t,e){return e.flags=-195&e.flags|192&t|(t&e.a?0:2),null}function Kl(t,e,n){const r=n(e)+(255&~t)+1;e.flags=-132&e.flags|128&r|(255&r?0:2)|r>>>8}function Yl(t,e){if(8&e.flags){const n=(15&e.a)-(15&t)-(1&~e.flags),r=(e.a>>>4)-(t>>>4)-(n<0?1:0);e.a=(n<0?10+n:n)|(r<0?10+r:r)<<4,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|(r<0?0:1)}else{t=255&~t;const n=e.a+t+(1&e.flags),r=255&n;e.flags=-196&e.flags|128&r|(r?0:2)|n>>>8|(~(t^e.a)&(r^t)&128)>>>1,e.a=r}return null}function Zl(t){const e=t.a;t.a=t.a>>>1,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e}function Xl(t,e){const n=t>>>1;return e.flags=-132&e.flags|128&n|(n?0:2)|1&t,n}function tf(t){const e=t.a;t.a=t.a<<1&255|1&t.flags,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7}function ef(t,e){const n=t<<1&255|1&e.flags;return e.flags=-132&e.flags|128&n|(n?0:2)|t>>>7,n}function nf(t){const e=t.a;t.a=t.a>>>1|(1&t.flags)<<7,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e}function rf(t,e){const n=t>>>1|(1&e.flags)<<7;return e.flags=-132&e.flags|128&n|(n?0:2)|1&t,n}function sf(t,e){const n=e.a&t;return e.a=n>>>1,e.flags=-132&e.flags|128&e.a|(e.a?0:2)|1&n,null}function af(t,e){const n=t+255&255,r=e.a+(255&~n)+1;return e.flags=-132&e.flags|128&r|(255&r?0:2)|r>>>8,n}function of(t,e){const n=(e.a&e.x)+(255&~t)+1;return e.x=255&n,e.flags=-132&e.flags|128&e.x|(255&e.x?0:2)|n>>>8,null}function uf(t,e){const n=t>>>1|(1&e.flags)<<7;return e.flags=-2&e.flags|1&t,ql(n,e),n}function cf(t,e){const n=t<<1&255|1&e.flags;return e.flags=-2&e.flags|t>>>7,$l(e.a&=n,e),n}function hf(t,e){e.flags=-2&e.flags|t>>>7;const n=t<<1&255;return e.a=e.a|n,$l(e.a,e),n}function lf(t){const e=t.a&t.x;return $l(e,t),e}function ff(t,e){const n=t+1&255;return Yl(n,e),n}function df(t,e){return e.a&=t,$l(e.a,e),e.flags=-2&e.flags|(128&e.a)>>>7,null}class pf{constructor(t,e=(()=>null)){this.reset=()=>this._result.read(this._fetchAddressLo,this._state.p),this._fetchAddressLo=t=>(this._address=t,this._state.p=this._state.p+1&65535,this._result.read(this._fetchAddressHi,this._state.p)),this._fetchAddressHi=t=>(this._address|=t<<8,this._state.p=this._state.p+1&65535,this._result.read(this._fetchLo,this._address)),this._fetchLo=t=>(this._operand=t,255==(255&this._address)?this._address&=65280:this._address=this._address+1&65535,this._result.read(this._fetchHi,this._address)),this._fetchHi=t=>(this._operand|=t<<8,this._next(this._operand,this._state)),this._operand=0,this._address=0,this._result=new fl,this._state=t,this._next=e,pl(this)}}r([_l,s("design:type",Object)],pf.prototype,"reset",void 0),r([_l,s("design:type",Object)],pf.prototype,"_fetchAddressLo",void 0),r([_l,s("design:type",Object)],pf.prototype,"_fetchAddressHi",void 0),r([_l,s("design:type",Object)],pf.prototype,"_fetchLo",void 0),r([_l,s("design:type",Object)],pf.prototype,"_fetchHi",void 0),r([_l,s("design:type",Object)],pf.prototype,"_result",void 0),r([_l,s("design:type",ll.State)],pf.prototype,"_state",void 0),r([_l,s("design:type",Function)],pf.prototype,"_next",void 0);class _f{constructor(t){this._state=t}compile(t){const e=vl.opcodes[t];switch(e.operation){case 0:return this._createAddressing(e.addressingMode,ql,{deref:!0});case 1:return this._createAddressing(e.addressingMode,(t,e)=>Vl(t,e,(t,e)=>e.a=e.a&t),{deref:!0});case 2:return 0===e.addressingMode?Dl(this._state,Gl):this._createAddressing(e.addressingMode,Ol(this._state,Ql).reset,{writeOp:!0});case 6:return this._createAddressing(e.addressingMode,Jl,{deref:!0});case 10:return n=this._state,new bl(n,65534,!0);case 17:return this._createAddressing(e.addressingMode,(t,e)=>(Kl(t,e,t=>t.a),null),{deref:!0});case 18:return this._createAddressing(e.addressingMode,(t,e)=>(Kl(t,e,t=>t.x),null),{deref:!0});case 19:return this._createAddressing(e.addressingMode,(t,e)=>(Kl(t,e,t=>t.y),null),{deref:!0});case 20:return this._createAddressing(e.addressingMode,Ol(this._state,(t,e)=>Hl(t,e,t=>t-1&255)).reset,{writeOp:!0});case 21:return Dl(this._state,t=>Wl(t,t=>t.x=t.x-1&255));case 22:return Dl(this._state,t=>Wl(t,t=>t.y=t.y-1&255));case 24:return this._createAddressing(e.addressingMode,Ol(this._state,(t,e)=>Hl(t,e,t=>t+1&255)).reset,{writeOp:!0});case 25:return Dl(this._state,t=>Wl(t,t=>t.x=t.x+1&255));case 26:return Dl(this._state,t=>Wl(t,t=>t.y=t.y+1&255));case 23:return this._createAddressing(e.addressingMode,(t,e)=>Vl(t,e,(t,e)=>e.a=e.a^t),{deref:!0});case 27:return this._createAddressing(e.addressingMode,(t,e)=>(e.p=t,null));case 28:return(t=>new Il(t))(this._state);case 29:return this._createAddressing(e.addressingMode,(t,e)=>Vl(t,e,(t,e)=>e.a=t),{deref:!0});case 30:return this._createAddressing(e.addressingMode,(t,e)=>Vl(t,e,(t,e)=>e.x=t),{deref:!0});case 31:return this._createAddressing(e.addressingMode,(t,e)=>Vl(t,e,(t,e)=>e.y=t),{deref:!0});case 32:return 0===e.addressingMode?Dl(this._state,Zl):this._createAddressing(e.addressingMode,Ol(this._state,Xl).reset,{writeOp:!0});case 33:return Dl(this._state,()=>{});case 34:return this._createAddressing(e.addressingMode,(t,e)=>Vl(t,e,(t,e)=>e.a|=t),{deref:!0});case 35:return Ll(this._state,t=>t.a);case 36:return Ll(this._state,t=>16|t.flags);case 37:return Fl(this._state,(t,e)=>Wl(t,t=>t.a=e));case 38:return Fl(this._state,(t,e)=>t.flags=-17&(32|e));case 39:return 0===e.addressingMode?Dl(this._state,tf):this._createAddressing(e.addressingMode,Ol(this._state,ef).reset,{writeOp:!0});case 40:return 0===e.addressingMode?Dl(this._state,nf):this._createAddressing(e.addressingMode,Ol(this._state,rf).reset,{writeOp:!0});case 41:return(t=>new Nl(t))(this._state);case 42:return(t=>new Rl(t))(this._state);case 43:return this._createAddressing(e.addressingMode,Yl,{deref:!0});case 48:return this._createAddressing(e.addressingMode,zl(this._state,t=>t.x).reset,{writeOp:!0});case 49:return this._createAddressing(e.addressingMode,zl(this._state,t=>t.y).reset,{writeOp:!0});case 50:return Dl(this._state,t=>Wl(t,t=>t.x=t.a));case 51:return Dl(this._state,t=>Wl(t,t=>t.y=t.a));case 52:return Dl(this._state,t=>Wl(t,t=>t.x=t.s));case 53:return Dl(this._state,t=>Wl(t,t=>t.a=t.x));case 54:return Dl(this._state,t=>t.s=t.x);case 55:return Dl(this._state,t=>Wl(t,t=>t.a=t.y));case 3:return Tl(this._state,t=>0==(1&t));case 4:return Tl(this._state,t=>(1&t)>0);case 8:return Tl(this._state,t=>0==(2&t));case 5:return Tl(this._state,t=>(2&t)>0);case 9:return Tl(this._state,t=>0==(128&t));case 7:return Tl(this._state,t=>(128&t)>0);case 11:return Tl(this._state,t=>0==(64&t));case 12:return Tl(this._state,t=>(64&t)>0);case 44:return Dl(this._state,t=>t.flags|=1);case 45:return Dl(this._state,t=>t.flags|=8);case 46:return Dl(this._state,t=>t.flags|=4);case 47:return this._createAddressing(e.addressingMode,zl(this._state,t=>t.a).reset,{writeOp:!0});case 13:return Dl(this._state,t=>t.flags&=-2);case 14:return Dl(this._state,t=>t.flags&=-9);case 15:return Dl(this._state,t=>t.flags&=-5);case 16:return Dl(this._state,t=>t.flags&=-65);case 56:case 57:return this._createAddressing(e.addressingMode,()=>null,{deref:!0});case 67:return this._createAddressing(e.addressingMode,df);case 64:return this._createAddressing(e.addressingMode,zl(this._state,lf).reset,{writeOp:!0});case 58:return this._createAddressing(e.addressingMode,sf,{deref:!0});case 62:return this._createAddressing(e.addressingMode,(t,e)=>(function(t,e){e.a=(e.a&t)>>>1|(1&e.flags?128:0),e.flags=-196&e.flags|(64&e.a)>>>6|(e.a?0:2)|128&e.a|64&e.a^(32&e.a)<<1}(t,e),null),{deref:!0});case 59:return this._createAddressing(e.addressingMode,of,{deref:!0});case 68:return this._createAddressing(e.addressingMode,(t,e)=>Vl(t,e,(t,e)=>e.x=e.a=e.a&t),{deref:!0});case 60:return this._createAddressing(e.addressingMode,Ol(this._state,af).reset,{writeOp:!0});case 66:return this._createAddressing(e.addressingMode,Ol(this._state,ff).reset,{writeOp:!0});case 61:return this._createAddressing(e.addressingMode,(t,e)=>Vl(t,e,(t,e)=>e.a=e.x=t),{deref:!0});case 65:return this._createAddressing(e.addressingMode,(t,e)=>Vl(t,e,(t,e)=>e.s=e.x=e.a=e.s&t),{deref:!0});case 70:return this._createAddressing(e.addressingMode,Ol(this._state,cf).reset,{writeOp:!0});case 69:return this._createAddressing(e.addressingMode,Ol(this._state,uf).reset,{writeOp:!0});case 63:return this._createAddressing(e.addressingMode,Ol(this._state,hf).reset,{writeOp:!0});default:return null}var n}_createAddressing(t,e,{deref:n=!1,writeOp:r=!1}={}){switch(n&&1!==t&&(e=((t,e)=>new wl(t,e))(this._state,e).reset),t){case 1:return((t,e)=>new Al(t,e))(this._state,e);case 2:return((t,e)=>new Sl(t,e))(this._state,e);case 3:return((t,e)=>new ml(t,e))(this._state,e);case 6:return((t,e)=>El.zeroPageX(t,e))(this._state,e);case 9:return((t,e)=>El.zeroPageY(t,e))(this._state,e);case 7:return((t,e,n)=>yl.absoluteX(t,e,n))(this._state,e,r);case 10:return((t,e,n)=>yl.absoluteY(t,e,n))(this._state,e,r);case 8:return((t,e)=>new kl(t,e))(this._state,e);case 11:return((t,e,n)=>new Cl(t,e,n))(this._state,e,r);case 4:return((t,e)=>new pf(t,e))(this._state,e);default:throw new Error(`invalid addressing mode ${t}`)}}}class gf{constructor(t,e){var n;this._bus=t,this._rng=e,this.executionState=0,this.state=new ll.State,this._invalidInstructionCallback=null,this._interruptPending=!1,this._nmiPending=!1,this._halt=!1,this._pollInterruptsAfterLastInstruction=!1,this._lastInstructionPointer=0,this._operations=new Array(255),this._opBoot=(n=this.state,new gl(n)),this._opIrq=(t=>new bl(t,65534,!1))(this.state),this._opNmi=(t=>new bl(t,65530,!1))(this.state);const r=new _f(this.state);for(let t=0;t<256;t++)this._operations[t]=r.compile(t);this.reset()}reset(){return this.state.a=this._rng?this._rng.int(255):0,this.state.x=this._rng?this._rng.int(255):0,this.state.y=this._rng?this._rng.int(255):0,this.state.s=253,this.state.p=this._rng?this._rng.int(65535):0,this.state.flags=52|(this._rng?this._rng.int(255):0),this.state.irq=!1,this.state.nmi=!1,this.executionState=0,this._interruptPending=!1,this._nmiPending=!1,this._halt=!1,this._lastResult=this._opBoot.reset(void 0),this._lastInstructionPointer=0,this}setInterrupt(t){return this._interruptPending=t,this}isInterrupt(){return this._interruptPending}nmi(){return this._nmiPending=!0,this}halt(){return this._halt=!0,this}resume(){return this._halt=!1,this}isHalt(){return this._halt}setInvalidInstructionCallback(t){return this._invalidInstructionCallback=t,this}getInvalidInstructionCallback(){return this._invalidInstructionCallback}getLastInstructionPointer(){return this._lastInstructionPointer}cycle(){if(this._halt&&(!this._lastResult||0===this._lastResult.cycleType))return this;if(1===this.executionState)return this._fetch(),this;let t;switch(this._lastResult.cycleType){case 0:t=this._bus.read(this._lastResult.address);break;case 1:t=this._lastResult.value,this._bus.write(this._lastResult.address,t);break;default:throw new Error("invalid cycle type")}return this._lastResult.pollInterrupts&&(this._pollInterrupts(),this._lastResult.pollInterrupts=!1,this._pollInterruptsAfterLastInstruction=!1),this._lastResult=this._lastResult.nextStep(t),null===this._lastResult&&(this.executionState=1),this}_fetch(){let t;this._pollInterruptsAfterLastInstruction&&this._pollInterrupts(),this._lastInstructionPointer=this.state.p;const e=this._bus.read(this.state.p);this.state.nmi?(t=this._opNmi,this._pollInterruptsAfterLastInstruction=!1):this.state.irq?(t=this._opIrq,this._pollInterruptsAfterLastInstruction=!1):(t=this._operations[e],this.state.p=this.state.p+1&65535,this._pollInterruptsAfterLastInstruction=!0),t?(this.executionState=2,this._lastResult=t.reset(void 0)):this._invalidInstructionCallback&&this._invalidInstructionCallback(this)}_pollInterrupts(){if(this.state.irq=!1,this._nmiPending)return this.state.nmi=!0,void(this._nmiPending=!1);!this._interruptPending||this.state.nmi||4&this.state.flags||(this.state.irq=!0)}}function bf(t,e){t.s=t.s+1&255,t.flags=-17&(32|e.read(256+t.s))}function vf(t,e){t.flags=-131&t.flags|128&e|(e?0:2)}function mf(t,e,n){if(8&t.flags){const e=(15&n)+(15&t.a)+(1&t.flags),r=(n>>>4)+(t.a>>>4)+(e>9?1:0);t.a=e%10|r%10<<4,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|(r>9?1:0)}else{const e=t.a+n+(1&t.flags),r=255&e;t.flags=-196&t.flags|128&r|(r?0:2)|e>>>8|(~(n^t.a)&(r^n)&128)>>>1,t.a=r}}function yf(t,e,n){t.a&=n,vf(t,t.a)}function wf(t){const e=t.a;t.a=t.a<<1&255,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7}function Af(t,e,n){const r=e.read(n),i=r<<1&255;e.write(n,i),t.flags=-132&t.flags|128&i|(i?0:2)|r>>>7}function kf(t,e,n){t.flags=-195&t.flags|192&n|(n&t.a?0:2)}function Cf(t,e){const n=t.p+1&65535;let r=65534;t.nmi&&(r=65530,t.nmi=!1),t.nmi=t.irq=!1,e.write(t.s+256,n>>>8&255),t.s=t.s+255&255,e.write(t.s+256,255&n),t.s=t.s+255&255,e.write(t.s+256,16|t.flags),t.s=t.s+255&255,t.flags|=4,t.p=e.readWord(r)}function Sf(t){t.flags&=-2}function Ef(t){t.flags&=-9}function xf(t){t.flags&=-5}function Tf(t){t.flags&=-65}function If(t,e,n){const r=t.a+(255&~n)+1;t.flags=-132&t.flags|128&r|(255&r?0:2)|r>>>8}function Bf(t,e,n){const r=t.x+(255&~n)+1;t.flags=-132&t.flags|128&r|(255&r?0:2)|r>>>8}function Of(t,e,n){const r=t.y+(255&~n)+1;t.flags=-132&t.flags|128&r|(255&r?0:2)|r>>>8}function Rf(t,e,n){const r=e.read(n)+255&255;e.write(n,r),vf(t,r)}function Pf(t){t.x=t.x+255&255,vf(t,t.x)}function Df(t,e,n){t.a=t.a^n,vf(t,t.a)}function Mf(t){t.y=t.y+255&255,vf(t,t.y)}function Ff(t,e,n){const r=e.read(n)+1&255;e.write(n,r),vf(t,r)}function jf(t){t.x=t.x+1&255,vf(t,t.x)}function Lf(t){t.y=t.y+1&255,vf(t,t.y)}function Nf(t,e,n){t.p=n}function Uf(t,e,n){const r=t.p+1&65535,i=e.read(t.p);e.read(256+t.s),e.write(256+t.s,r>>>8),t.s=t.s+255&255,e.write(256+t.s,255&r),t.s=t.s+255&255,t.p=i|e.read(t.p+1&65535)<<8}function zf(t,e,n,r){t.a=1===r?n:e.read(n),vf(t,t.a)}function $f(t,e,n,r){t.x=1===r?n:e.read(n),vf(t,t.x)}function Hf(t,e,n,r){t.y=1===r?n:e.read(n),vf(t,t.y)}function Wf(t){const e=t.a;t.a=t.a>>>1,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e}function Vf(t,e,n){const r=e.read(n),i=r>>>1;e.write(n,i),t.flags=-132&t.flags|128&i|(i?0:2)|1&r}function qf(){}function Gf(t,e,n){t.a|=n,vf(t,t.a)}function Qf(t,e){e.write(256+t.s,16|t.flags),t.s=t.s+255&255}function Jf(t,e){bf(t,e)}function Kf(t,e){e.write(256+t.s,t.a),t.s=t.s+255&255}function Yf(t,e){t.s=t.s+1&255,t.a=e.read(256+t.s),vf(t,t.a)}function Zf(t){const e=t.a;t.a=t.a<<1&255|1&t.flags,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|e>>>7}function Xf(t,e,n){const r=e.read(n),i=r<<1&255|1&t.flags;e.write(n,i),t.flags=-132&t.flags|128&i|(i?0:2)|r>>>7}function td(t){const e=t.a;t.a=t.a>>>1|(1&t.flags)<<7,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&e}function ed(t,e,n){const r=e.read(n),i=r>>>1|(1&t.flags)<<7;e.write(n,i),t.flags=-132&t.flags|128&i|(i?0:2)|1&r}function nd(t,e){let n;bf(t,e),t.s=t.s+1&255,n=e.read(256+t.s),t.s=t.s+1&255,n|=e.read(256+t.s)<<8,t.p=n}function rd(t,e){let n;e.read(256+t.s),t.s=t.s+1&255,n=e.read(256+t.s),t.s=t.s+1&255,n+=e.read(256+t.s)<<8,t.p=n+1&65535}function id(t,e,n){if(8&t.flags){const e=(15&t.a)-(15&n)-(1&~t.flags),r=(t.a>>>4)-(n>>>4)-(e<0?1:0);t.a=(e<0?10+e:e)|(r<0?10+r:r)<<4,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|(r<0?0:1)}else{n=255&~n;const e=t.a+n+(1&t.flags),r=255&e;t.flags=-196&t.flags|128&r|(r?0:2)|e>>>8|(~(n^t.a)&(r^n)&128)>>>1,t.a=r}}function sd(t){t.flags|=1}function ad(t){t.flags|=8}function od(t){t.flags|=4}function ud(t,e,n){e.write(n,t.a)}function cd(t,e,n){e.write(n,t.x)}function hd(t,e,n){e.write(n,t.y)}function ld(t){t.x=t.a,vf(t,t.a)}function fd(t){t.y=t.a,vf(t,t.a)}function dd(t){t.x=t.s,vf(t,t.x)}function pd(t){t.a=t.x,vf(t,t.a)}function _d(t){t.s=t.x}function gd(t){t.a=t.y,vf(t,t.a)}function bd(t,e,n){const r=t.a&n;t.a=r>>>1,t.flags=-132&t.flags|128&t.a|(t.a?0:2)|1&r}function vd(t,e,n){const r=(t.a&t.x)+(255&~n)+1;t.x=255&r,t.flags=-132&t.flags|128&t.x|(255&t.x?0:2)|r>>>8}function md(t,e,n){const r=e.read(n)+255&255;e.write(n,r);const i=t.a+(255&~r)+1;t.flags=-132&t.flags|128&i|(255&i?0:2)|i>>>8}function yd(t,e,n){t.a=n,t.x=n,vf(t,n)}function wd(t,e,n){t.a=(t.a&n)>>>1|(1&t.flags?128:0),t.flags=-196&t.flags|(64&t.a)>>>6|(t.a?0:2)|128&t.a|64&t.a^(32&t.a)<<1}function Ad(t,e,n){let r=e.read(n);t.flags=-2&t.flags|r>>>7,r=r<<1&255,e.write(n,r),t.a=t.a|r,vf(t,t.a)}function kd(t,e,n){const r=t.x&t.a;e.write(n,r),vf(t,r)}function Cd(t,e,n){t.s=t.a=t.x=t.s&n,vf(t,t.a)}function Sd(t,e,n){const r=e.read(n)+1&255;e.write(n,r),id(t,0,r)}function Ed(t,e,n){t.a&=n,vf(t,t.a),t.flags=-2&t.flags|(128&t.a)>>>7}function xd(t,e,n){t.a&=n,t.x=t.a,vf(t,t.a)}function Td(t,e,n){const r=e.read(n),i=r>>>1|(1&t.flags)<<7;e.write(n,i),t.flags=-2&t.flags|1&r,mf(t,0,i)}function Id(t,e,n){const r=e.read(n),i=r<<1&255|1&t.flags;e.write(n,i),t.flags=-2&t.flags|r>>>7,yf(t,0,i)}function Bd(t,e){t.p=e.readWord(65532)}function Od(t,e,n){const r=t.p;t.nmi&&(n=65530),t.nmi=t.irq=!1,e.write(t.s+256,r>>>8&255),t.s=t.s+255&255,e.write(t.s+256,255&r),t.s=t.s+255&255,e.write(t.s+256,-17&t.flags),t.s=t.s+255&255,t.flags|=4,t.p=e.readWord(n)}function Rd(t,e){Od(t,e,65534)}function Pd(t,e){Od(t,e,65530)}class Dd{constructor(t,e){this._bus=t,this._rng=e,this.executionState=0,this.state=new ll.State,this._opCycles=0,this._instructionCallback=null,this._invalidInstructionCallback=null,this._interruptPending=!1,this._nmiPending=!1,this._interuptCheck=0,this._halted=!1,this._operand=0,this._lastInstructionPointer=0,this._currentAddressingMode=12,this._dereference=!1,this.reset()}setInterrupt(t){return this._interruptPending=t,this}isInterrupt(){return this._interruptPending}nmi(){return this._nmiPending=!0,this}halt(){return this._halted=!0,this}resume(){return this._halted=!1,this}isHalt(){return this._halted}setInvalidInstructionCallback(t){return this._invalidInstructionCallback=t,this}getInvalidInstructionCallback(){return this._invalidInstructionCallback}getLastInstructionPointer(){return this._lastInstructionPointer}reset(){return this.state.a=this._rng?this._rng.int(255):0,this.state.x=this._rng?this._rng.int(255):0,this.state.y=this._rng?this._rng.int(255):0,this.state.s=253,this.state.p=this._rng?this._rng.int(65535):0,this.state.flags=52|(this._rng?this._rng.int(255):0),this.state.irq=!1,this.state.nmi=!1,this.executionState=0,this._opCycles=7,this._interruptPending=!1,this._nmiPending=!1,this._instructionCallback=Bd,this}cycle(){if(this._halted)return this;switch(this.executionState){case 0:case 2:0==--this._opCycles&&(this._dereference&&(this._operand=this._bus.read(this._operand)),1===this._interuptCheck&&this._checkForInterrupts(),this._instructionCallback(this.state,this._bus,this._operand,this._currentAddressingMode),this.executionState=1,0===this._interuptCheck&&this._checkForInterrupts());break;case 1:if(this.state.nmi)return this._instructionCallback=Pd,this._opCycles=6,this.state.nmi=this.state.irq=!1,this._interuptCheck=1,this.executionState=2,this;if(this.state.irq)return this._instructionCallback=Rd,this._opCycles=6,this.state.nmi=this.state.irq=!1,this._interuptCheck=1,this.executionState=2,this;this._fetch()}return this}_fetch(){const t=vl.opcodes[this._bus.read(this.state.p)];let e,n,r=t.addressingMode,i=!1,s=!1;switch(this._lastInstructionPointer=this.state.p,this._currentAddressingMode=r,this._interuptCheck=0,t.operation){case 0:this._opCycles=0,this._instructionCallback=mf,i=!0;break;case 1:this._opCycles=0,this._instructionCallback=yf,i=!0;break;case 2:0===r?(this._opCycles=1,this._instructionCallback=wf):(this._opCycles=3,this._instructionCallback=Af,s=!0);break;case 3:1&this.state.flags?(r=0,this._instructionCallback=qf,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=Nf,this._opCycles=0);break;case 4:1&this.state.flags?(this._instructionCallback=Nf,this._opCycles=0):(r=0,this._instructionCallback=qf,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 5:2&this.state.flags?(this._instructionCallback=Nf,this._opCycles=0):(r=0,this._instructionCallback=qf,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 6:this._opCycles=0,this._instructionCallback=kf,i=!0;break;case 7:128&this.state.flags?(this._instructionCallback=Nf,this._opCycles=0):(r=0,this._instructionCallback=qf,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 8:2&this.state.flags?(r=0,this._instructionCallback=qf,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=Nf,this._opCycles=0);break;case 9:128&this.state.flags?(r=0,this._instructionCallback=qf,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=Nf,this._opCycles=0);break;case 11:64&this.state.flags?(r=0,this._instructionCallback=qf,this.state.p=this.state.p+1&65535,this._opCycles=1):(this._instructionCallback=Nf,this._opCycles=0);break;case 12:64&this.state.flags?(this._instructionCallback=Nf,this._opCycles=0):(r=0,this._instructionCallback=qf,this.state.p=this.state.p+1&65535,this._opCycles=1);break;case 10:this._opCycles=6,this._instructionCallback=Cf,this._interuptCheck=1;break;case 13:this._opCycles=1,this._instructionCallback=Sf;break;case 14:this._opCycles=1,this._instructionCallback=Ef;break;case 15:this._opCycles=1,this._instructionCallback=xf,this._interuptCheck=1;break;case 16:this._opCycles=1,this._instructionCallback=Tf;break;case 17:this._opCycles=0,this._instructionCallback=If,i=!0;break;case 18:this._opCycles=0,this._instructionCallback=Bf,i=!0;break;case 19:this._opCycles=0,this._instructionCallback=Of,i=!0;break;case 20:this._opCycles=3,this._instructionCallback=Rf,s=!0;break;case 21:this._opCycles=1,this._instructionCallback=Pf;break;case 22:this._opCycles=1,this._instructionCallback=Mf;break;case 23:this._opCycles=0,this._instructionCallback=Df,i=!0;break;case 24:this._opCycles=3,this._instructionCallback=Ff,s=!0;break;case 25:this._opCycles=1,this._instructionCallback=jf;break;case 26:this._opCycles=1,this._instructionCallback=Lf;break;case 27:this._opCycles=0,this._instructionCallback=Nf;break;case 28:this._opCycles=5,this._instructionCallback=Uf;break;case 29:this._opCycles=1===r?0:1,this._instructionCallback=zf;break;case 30:this._opCycles=1===r?0:1,this._instructionCallback=$f;break;case 31:this._opCycles=1===r?0:1,this._instructionCallback=Hf;break;case 32:0===r?(this._opCycles=1,this._instructionCallback=Wf):(this._opCycles=3,this._instructionCallback=Vf,s=!0);break;case 33:this._opCycles=1,this._instructionCallback=qf;break;case 56:case 57:this._opCycles=0,i=!0,this._instructionCallback=qf;break;case 34:this._opCycles=0,this._instructionCallback=Gf,i=!0;break;case 36:this._opCycles=2,this._instructionCallback=Qf;break;case 35:this._opCycles=2,this._instructionCallback=Kf;break;case 37:this._opCycles=3,this._instructionCallback=Yf;break;case 38:this._opCycles=3,this._instructionCallback=Jf,this._interuptCheck=1;break;case 39:0===r?(this._opCycles=1,this._instructionCallback=Zf):(this._opCycles=3,this._instructionCallback=Xf,s=!0);break;case 40:0===r?(this._opCycles=1,this._instructionCallback=td):(this._opCycles=3,this._instructionCallback=ed,s=!0);break;case 41:this._opCycles=5,this._instructionCallback=nd;break;case 42:this._opCycles=5,this._instructionCallback=rd;break;case 43:this._opCycles=0,this._instructionCallback=id,i=!0;break;case 44:this._opCycles=1,this._instructionCallback=sd;break;case 45:this._opCycles=1,this._instructionCallback=ad;break;case 46:this._opCycles=1,this._instructionCallback=od,this._interuptCheck=1;break;case 47:this._opCycles=1,this._instructionCallback=ud,s=!0;break;case 48:this._opCycles=1,this._instructionCallback=cd,s=!0;break;case 49:this._opCycles=1,this._instructionCallback=hd,s=!0;break;case 50:this._opCycles=1,this._instructionCallback=ld;break;case 51:this._opCycles=1,this._instructionCallback=fd;break;case 52:this._opCycles=1,this._instructionCallback=dd;break;case 53:this._opCycles=1,this._instructionCallback=pd;break;case 54:this._opCycles=1,this._instructionCallback=_d;break;case 55:this._opCycles=1,this._instructionCallback=gd;break;case 62:this._opCycles=0,this._instructionCallback=wd;break;case 58:this._opCycles=0,this._instructionCallback=bd;break;case 59:this._opCycles=0,this._instructionCallback=vd;break;case 60:this._opCycles=3,this._instructionCallback=md,s=!0;break;case 61:this._opCycles=0,this._instructionCallback=yd,i=!0;break;case 63:this._opCycles=3,this._instructionCallback=Ad,s=!0,i=!1;break;case 64:this._opCycles=1,this._instructionCallback=kd;break;case 65:this._opCycles=0,this._instructionCallback=Cd,i=!0;break;case 66:this._opCycles=3,this._instructionCallback=Sd,s=!0;break;case 67:this._opCycles=0,this._instructionCallback=Ed;break;case 68:this._opCycles=0,this._instructionCallback=xd;break;case 69:this._opCycles=3,i=!1,s=!0,this._instructionCallback=Td;break;case 70:this._opCycles=3,i=!1,s=!0,this._instructionCallback=Id;break;default:return void(this._invalidInstructionCallback&&this._invalidInstructionCallback(this))}switch(this.state.p=this.state.p+1&65535,r){case 1:this._operand=this._bus.read(this.state.p),i=!1,this.state.p=this.state.p+1&65535,this._opCycles++;break;case 2:this._operand=this._bus.read(this.state.p),this.state.p=this.state.p+1&65535,this._opCycles++;break;case 3:this._operand=this._bus.readWord(this.state.p),this.state.p=this.state.p+2&65535,this._opCycles+=2;break;case 4:e=this._bus.readWord(this.state.p),this._operand=255==(255&e)?this._bus.read(e)+(this._bus.read(65280&e)<<8):this._bus.readWord(e),this.state.p=this.state.p+2&65535,this._opCycles+=4;break;case 5:e=this._bus.read(this.state.p),e=128&e?-(255&~(e-1)):e,this._operand=this.state.p+e+65537&65535,this.state.p=this.state.p+1&65535,this._opCycles+=(65280&this._operand)!=(65280&this.state.p)?3:2;break;case 6:n=this._bus.read(this.state.p),this._bus.read(n),this._operand=n+this.state.x&255,this.state.p=this.state.p+1&65535,this._opCycles+=2;break;case 7:e=this._bus.readWord(this.state.p),this._operand=e+this.state.x&65535,(65280&this._operand)!=(65280&e)&&this._bus.read(65280&e|255&this._operand),this._opCycles+=s||(65280&this._operand)!=(65280&e)?3:2,this.state.p=this.state.p+2&65535;break;case 9:n=this._bus.read(this.state.p),this._bus.read(n),this._operand=n+this.state.y&255,this.state.p=this.state.p+1&65535,this._opCycles+=2;break;case 10:e=this._bus.readWord(this.state.p),this._operand=e+this.state.y&65535,(65280&this._operand)!=(65280&e)&&this._bus.read(65280&e|255&this._operand),this._opCycles+=s||(65280&this._operand)!=(65280&e)?3:2,this.state.p=this.state.p+2&65535;break;case 8:n=this._bus.read(this.state.p),this._bus.read(n),e=n+this.state.x&255,this._operand=255===e?this._bus.read(255)+(this._bus.read(0)<<8):this._bus.readWord(e),this._opCycles+=4,this.state.p=this.state.p+1&65535;break;case 11:e=this._bus.read(this.state.p),e=255===e?this._bus.read(255)+(this._bus.read(0)<<8):this._bus.readWord(e),this._operand=e+this.state.y&65535,(65280&this._operand)!=(65280&e)&&this._bus.read(65280&e|255&this._operand),this._opCycles+=s||(65280&e)!=(65280&this._operand)?4:3,this.state.p=this.state.p+1&65535}this._dereference=i,i&&this._opCycles++,this.executionState=2}_checkForInterrupts(){this._nmiPending&&(this.state.irq=!1,this.state.nmi=!0,this._nmiPending=!1),!this._interruptPending||this.state.nmi||4&this.state.flags||(this.state.irq=!0)}}class Md{constructor(t){this._type=t}create(t,e){switch(this._type){case Md.Type.stateMachine:return new gf(t,e);case Md.Type.batchedAccess:return new Dd(t,e);default:throw new Error("invalid CPU type")}}}!function(t){let e;!function(t){t[t.stateMachine=0]="stateMachine",t[t.batchedAccess=1]="batchedAccess"}(e=t.Type||(t.Type={}))}(Md||(Md={}));var Fd,jd=Md;!function(t){t.create=function(t={}){return Object.assign({tvMode:0,enableAudio:!0,randomSeed:-1,emulatePaddles:!0,frameStart:-1,pcmAudio:!1,cpuType:jd.Type.stateMachine},t)},t.getClockHz=function(t){switch(t.tvMode){case 0:return 3584160;case 1:case 2:return 3556800}}}(Fd||(Fd={}));class Ld{constructor(t,e){this._content=t,this._sampleRate=e}getLength(){return this._content.length}getContent(){return this._content}getSampleRate(){return this._sampleRate}replaceUnderlyingBuffer(t){this._content=t}}const Nd=new Uint8Array(256);function Ud(t,e){const n=Nd[t.charCodeAt(e)];if(n>63)throw new Error('invalid base64 character "'+t[e]+'" at index '+e);return n}function zd(t,e){return(Ud(t,e)<<18)+(Ud(t,e+1)<<12)+(Ud(t,e+2)<<6)+Ud(t,e+3)}function $d(t){if(t.length%4!=0)throw new Error("invalid base64 data --- char count mismatch");const e=t.length/4,n=3*e-function(t){let e=0,n=t.length-1;for(;n>=0&&"="===t[n--];)e++;return e}(t),r=new Uint8Array(n);let i=0;for(let s=0;s<e;s++){const e=zd(t,4*s);for(let t=0;t<3&&i<n;t++)r[i++]=e>>>8*(2-t)&255}return r}!function(t){let e;for(e=0;e<256;e++)Nd[e]=255;for(e=0;e<64;e++)Nd["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;Nd["=".charCodeAt(0)]=0}();const Hd=$d("AQEPAQEBAQEBAQEBAwMDAQ=="),Wd=new Int8Array([1]),Vd=new Int8Array([1,1]),qd=new Int8Array([16,15]),Gd=$d("AQICAQEBBAM="),Qd=$d("AQIBAQICBQQCAQMBAQEBBA=="),Jd=$d("AQQBAwIEAQIDAgEBAQEBAQIEAgEEAQECAgEDAgEDAQEBBAEBAQECAQECBgECAgECAQIBAQIBBgIBAgIBAQEBAgICAgcCAwICAQEBAwIBAQIBAQcBAQMBAQIDAwEBAQICAQECAgQDBQEDAQEFAgEBAQIBAgEDAQIFAQECAQEBBQEBAQEBAQEBBgEBAQIBAQEBBAIBAQMBAwYDAgMBAQIBAgQBAQEDAQEBAQMBAgEEAgIDBAEBBAECAQICAgEBBAMBBAQJBQQBBQMBAQMCAgIBBQECAQEBAgMBAgEBAwQCBQICAQIDAQEBAQECAQMDAwIBAgEBAQEBAwMBAgIDAQMBCA=="),Kd=$d("BQYEBQoFAwcECgYDBgQJBg=="),Yd=[Wd,Gd,Gd,$d("AgMCAQQBBgoCBAIBAQQFCQMDBAEBAQgFBQUEAQEBCAQCCAMDAQEHBAIHBQEDAQcEAQQIAgEDBAcBAwcDAgEGBgICBAUDAgYGAQMDAgUDBwMEAwICAgUJAwEFAwECAgsFAQUDAQECDAUBAgUCAQEMBgECBQECAQoGAwICBAECBgo="),Vd,Vd,qd,Qd,Jd,Qd,qd,Wd,Vd,Vd,qd,Kd];class Zd{constructor(t){this._config=t}setConfig(t){this._config=t}getKey(t,e){return Yd[t]===Vd&&Hd[t]*(e+1)==1?0:t<<5|e}getBuffer(t){const e=t>>>5&15,n=31&t,r=Yd[e];let i=0;for(let t=0;t<r.length;t++)i+=r[t];i=i*Hd[e]*(n+1);const s=new Float32Array(i),a=Fd.getClockHz(this._config)/114;let o=0,u=0,c=0,h=!0;for(let t=0;t<i;t++)o++,o===Hd[e]*(n+1)&&(o=0,u++,u===r[c]&&(c++,u=0,r.length===c&&(c=0)),h=!(1&c)),s[t]=h?1:-1;return new Ld(s,a)}}class Xd{constructor(t,e){this._index=t,this._rpc=e,this.bufferChanged=new Co,this.volumeChanged=new Co,this.stop=new Co,this._toneGenerator=new Zd,this._volume=0}init(){return this._rpc.registerSignalHandler(il.waveformAudioBufferChange,this._onBufferChangeSignal.bind(this)).registerSignalHandler(il.waveformAudioVolumeChange,this._onVolumeChangeSignal.bind(this)).registerSignalHandler(il.audioStop,this._onStopSignal.bind(this)),this}start(t){return a(this,void 0,void 0,(function*(){const e=yield this._rpc.rpc(rl.getWaveformAudioParameters(this._index));this._toneGenerator.setConfig(t),this.setVolume(e.volume)}))}setVolume(t){return this._volume=t,this}getVolume(){return this._volume}getBuffer(t){return this._toneGenerator.getBuffer(t)}_onVolumeChangeSignal(t){t.index===this._index&&(this._volume=t.value,this.volumeChanged.dispatch(this._volume))}_onBufferChangeSignal(t){t.index===this._index&&this.bufferChanged.dispatch(t.key)}_onStopSignal(t){t===this._index&&this.stop.dispatch(void 0)}}class tp{constructor(t,e,n){this._value=t,this._releaseCB=e,this._disposeCB=n,this._isAvailable=!1,this._isDisposed=!1}adopt(t){this._value=t}get(){return this._value}release(){this._releaseCB(this)}dispose(){this._disposeCB(this)}}class ep{constructor(t){this._factory=t,this.event={release:new Co,dispose:new Co},this._pool=[],this._poolSize=0}get(){let t;if(0===this._poolSize){const e=this._factory();t=new tp(e,t=>this._releaseMember(t),t=>this._disposeMember(t))}else t=this._pool[--this._poolSize],t._isAvailable=!1;return t}_releaseMember(t){if(t._isAvailable)throw new Error("Trying to release an already released pool member");if(t._isDisposed)throw new Error("Trying to release an already disposed pool member");const e=this._poolSize++;this._pool[e]=t,t._isAvailable=!0,t._poolPosition=e,this.event.release.dispatch(t.get())}_disposeMember(t){if(t._isDisposed)throw new Error("Trying to dispose of an already disposed pool member");t._isAvailable&&(this._poolSize>1&&(this._pool[t._poolPosition]=this._pool[this._poolSize-1]),this._poolSize--),t._isDisposed=!0,this.event.dispose.dispatch(t.get())}}class np{constructor(t,e){this._index=t,this._rpc=e,this.newFrame=new Co,this.togglePause=new Co,this._sampleRate=0,this._frameSize=0,this._paused=!1,this._framePool=new ep(()=>null),this._frameMap=new WeakMap,this._enabled=!1,this._signalReturnFrame="",this._framePool.event.release.addHandler(np._onReleaseFragment,this),this._signalReturnFrame=il.pcmAudioReturnFrame(this._index)}init(){return this._rpc.registerSignalHandler(il.pcmAudioNewFrame(this._index),this._onNewFrame.bind(this)).registerSignalHandler(il.pcmAudioTogglePause(this._index),this._onTogglePause.bind(this)),this}start(){return a(this,void 0,void 0,(function*(){if(this._enabled)return;const t=yield this._rpc.rpc(rl.getPCMAudioParameters(this._index));this._sampleRate=t.sampleRate,this._frameSize=t.frameSize,this._paused=t.paused,this._enabled=!0}))}stop(){this._enabled=!1}isPaused(){return this._paused}getSampleRate(){return this._sampleRate}getFrameSize(){return this._frameSize}static _onReleaseFragment(t,e){e._frameMap.has(t)&&e._rpc.signal(e._signalReturnFrame,{id:e._frameMap.get(t),buffer:t.buffer},[t.buffer])}_onNewFrame(t){if(!this._enabled)return;const e=this._framePool.get(),n=new Float32Array(t.buffer);e.adopt(n),this._frameMap.set(n,t.id),this.newFrame.dispatch(e)}_onTogglePause(t){t.paused!==this._paused&&(this._paused=t.paused,this.togglePause.dispatch(this._paused))}}class rp{constructor(t){this._rpc=t,this.message=new Co}init(){this._rpc.registerSignalHandler(il.messageFromDataTap,t=>this.message.dispatch(t))}}class ip{constructor(t,e){this._stellaWorkerUri=t,this._videoWorkerUri=e,this.stateChanged=new Co,this.frequencyUpdate=new Co,this._rateLimitEnforced=!0,this._mutex=new Zh,this._worker=null,this._rpc=null,this._state=Yh.State.stopped,this._lastError=null,this._emulationContext=null,this._frequency=0,this._waveformChannels=new Array(2),this._pcmChannel=null,this._controlProxy=null,this._controlProxyUpdateHandle=null,this._proxyState=0,this._savedConfig=null}init(){this._worker=new Worker(this._stellaWorkerUri),this._rpc=new el((t,e)=>this._worker.postMessage(t,e)),this._pcmChannel=new np(0,this._rpc).init();for(let t=0;t<2;t++)this._waveformChannels[t]=new Xd(t,this._rpc).init();const t=new sl(this._rpc),e=new hl(this._rpc),n=new rp(this._rpc);return n.init(),t.init(),this._emulationContext=new nl(t,e,this._waveformChannels,this._pcmChannel,n),this._worker.onmessage=t=>this._rpc.dispatch(t.data),this._rpc.registerSignalHandler(il.emulationFrequencyUpdate,this._onFrequencyUpdate.bind(this)).registerSignalHandler(il.emulationError,this._onEmulationError.bind(this)),this._controlProxy=e,this._startVideoProcessingPipeline().then(()=>this.setRateLimit(this._rateLimitEnforced))}start(t,e,n,r){return a(this,void 0,void 0,(function*(){return yield this.stop(),this._mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){const i=yield this._rpc.rpc(rl.emulationStart,{buffer:t,config:e,cartridgeType:n,videoProcessing:r});return i===Yh.State.paused?(this._savedConfig=e,this._emulationContext.setConfig(e),yield this._startProxies(e)):this._savedConfig=null,this._applyState(i)})))}))}pause(){return this._mutex.runExclusive(()=>this._rpc.rpc(rl.emulationPause).then(t=>(this._pauseProxies(),this._applyState(t))))}stop(){return this._mutex.runExclusive(()=>this._rpc.rpc(rl.emulationStop).then(t=>(this._stopProxies(),this._applyState(t))))}reset(){return this._mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){const t=yield this._rpc.rpc(rl.emulationReset);return this._state!==Yh.State.error||t!==Yh.State.running&&t!==Yh.State.paused||!this._savedConfig||(yield this._startProxies(this._savedConfig)),this._applyState(t)})))}resume(){return this._mutex.runExclusive(()=>this._rpc.rpc(rl.emulationResume).then(t=>(this._resumeProxies(),this._applyState(t))))}setRateLimit(t){return this._rateLimitEnforced=t,this._rpc.rpc(rl.emulationSetRateLimit,t)}getFrequency(){return this._frequency}getRateLimit(){return this._rateLimitEnforced}getState(){return this._state}getLastError(){return this._lastError}getEmulationContext(){switch(this._state){case Yh.State.running:case Yh.State.paused:return this._emulationContext;default:return null}}_fetchLastError(){return this._rpc.rpc(rl.emulationFetchLastError).then(t=>t?new Error(t):null)}_applyState(t){return t===Yh.State.error?this._fetchLastError().then(e=>(this._state=t,this._lastError=e,this._stopProxies(),this.stateChanged.dispatch(t),t)):(this._state=t,this.stateChanged.dispatch(t),t)}_onFrequencyUpdate(t){this._frequency=t,this.frequencyUpdate.dispatch(this._frequency)}_onEmulationError(t){this._lastError=new Error(t||""),this._stopProxies(),this._state=Yh.State.error,this.stateChanged.dispatch(this._state)}_startProxies(t){return a(this,void 0,void 0,(function*(){yield this._emulationContext.getVideoProxy().start();for(let e=0;e<this._waveformChannels.length;e++)yield this._waveformChannels[e].start(t);yield this._pcmChannel.start(),this._startControlUpdates(),this._proxyState=1}))}_stopProxies(){0!==this._proxyState&&(this._emulationContext.getVideoProxy().stop(),this._pcmChannel.stop(),this._stopControlUpdates(),this._proxyState=0)}_pauseProxies(){1===this._proxyState&&(this._stopControlUpdates(),this._proxyState=2)}_resumeProxies(){2===this._proxyState&&(this._startControlUpdates(),this._proxyState=1)}_startControlUpdates(){null===this._controlProxyUpdateHandle&&(this._controlProxyUpdateHandle=setInterval(()=>this._controlProxy.sendUpdate(),25))}_stopControlUpdates(){null!==this._controlProxyUpdateHandle&&(clearInterval(this._controlProxyUpdateHandle),this._controlProxyUpdateHandle=null)}_startVideoProcessingPipeline(){return a(this,void 0,void 0,(function*(){let t=null;if(this._videoWorkerUri){t=new MessageChannel;const e=new Worker(this._videoWorkerUri),n=new el((t,n)=>e.postMessage(t,n));e.onmessage=t=>n.dispatch(t.data),yield n.rpc("/use-port",t.port1,[t.port1])}yield this._rpc.rpc(rl.setup,{videoProcessorPort:t&&t.port2},t?[t.port2]:[])}))}}class sp{constructor(){this._drivers=new Map,this._driversBound=!1}bind(t){return this._driversBound?this:(this._emulationService=t,this._shouldBindDrivers()&&this._bindDrivers(),this._emulationService.stateChanged.addHandler(sp._onEmuStateChange,this),this)}unbind(){return this._emulationService?(this._unbindDrivers(),this._emulationService.stateChanged.removeHandler(sp._onEmuStateChange,this),this._emulationService=null,this):this}addDriver(t,e){return this._drivers.set(t,new sp.DriverContext(t,e)),this._driversBound&&e(this._emulationService.getEmulationContext(),t),this}removeDriver(t){return this._drivers.get(t)?(t.unbind(),this._drivers.delete(t),this):this}static _onEmuStateChange(t,e){e._shouldBindDrivers(t)?e._bindDrivers():e._unbindDrivers()}_shouldBindDrivers(t=(this._emulationService?this._emulationService.getState():void 0)){return this._emulationService&&(t===Yh.State.running||t===Yh.State.paused)}_bindDrivers(){this._driversBound||(this._drivers.forEach(t=>t.binder(this._emulationService.getEmulationContext(),t.driver)),this._driversBound=!0)}_unbindDrivers(){this._driversBound&&(this._drivers.forEach(t=>t.driver.unbind()),this._driversBound=!1)}}!function(t){t.DriverContext=class{constructor(t,e){this.driver=t,this.binder=e}}}(sp||(sp={}));const ap=["webgl","experimental-webgl"];class op{constructor(t,e={}){this._canvas=t,this._gl=null,this._program=null,this._vertexBuffer=null,this._textureCoordinateBuffer=null,this._currentFrameIndex=0,this._frameCount=0,this._gamma=1,this._aspect=4/3,this._povEmulation=!0,this._animationFrameHandle=0,this._syncRendering=!0,this._video=null,this._interpolation=!0,void 0!==e.aspect&&(this._aspect=e.aspect),void 0!==e.gamma&&(this._gamma=e.gamma),void 0!==e.povEmulation&&(this._povEmulation=e.povEmulation);for(const t of ap){if(this._gl)break;this._gl=this._canvas.getContext(t,{alpha:!1})}if(!this._gl)throw new Error("unable to acquire WebGL context");this._createTextureArrays()}init(){return this._gl.clearColor(0,0,0,1),this._createProgram(),this._createBuffers(),this.resize(),this._allocateTextures(),this._configureTextures(),this._setupAttribs(),this.enableInterpolation(!0),this}close(){return this._program&&this._gl.deleteProgram(this._program),this._vertexShader&&this._gl.deleteShader(this._vertexShader),this._fragmentShader&&this._gl.deleteShader(this._fragmentShader),this._textures&&this._textures.forEach(t=>t&&this._gl.deleteTexture(t)),this._imageData&&this._imageData.forEach(t=>t&&t.release()),this._vertexBuffer&&this._gl.deleteBuffer(this._vertexBuffer),this._textureCoordinateBuffer&&this._gl.deleteBuffer(this._textureCoordinateBuffer),this}resize(t,e){void 0!==t&&void 0!==e||(t=this._canvas.clientWidth,e=this._canvas.clientHeight);let n=window.devicePixelRatio||1;if(this._video){const r=this._video.getWidth(),i=this._video.getHeight();e*this._aspect<=t?e>=3*i&&e*this._aspect>=3*r&&(n=1):t>=3*r&&t/this._aspect>=3*i&&(n=1)}return this._canvas.width=t*n,this._canvas.height=e*n,this._gl.viewport(0,0,t*n,e*n),this._recalculateVertexBuffer(),this._video&&this._draw(),this}getCanvas(){return this._canvas}bind(t){return this._video?this:(this.resize(),this._video=t,this._video.newFrame.addHandler(op._frameHandler,this),this)}unbind(){return this._cancelDraw(),this._video?(this._video.newFrame.removeHandler(op._frameHandler,this),this._video=null,this):this}enableInterpolation(t){return t===this._interpolation?this:(this._interpolation=t,this._configureTextures(),this)}interpolationEnabled(){return this._interpolation}enableSyncRendering(t){return t===this._syncRendering?this:(t||this._cancelDraw(),this._syncRendering=t,this)}syncRenderingEnabled(){return this._syncRendering}setGamma(t){return this._gamma=t,this}getGamma(){return this._gamma}enablePovEmulation(t){if(t===this._povEmulation)return this;this._povEmulation=t,this._reinit()}povEmulationEnabled(){return this._povEmulation}static _frameHandler(t,e){const n=e._imageData[e._currentFrameIndex];e._imageData[e._currentFrameIndex]=t,e._imageDataGeneration[e._currentFrameIndex]++,e._currentFrameIndex=(e._currentFrameIndex+1)%e._numberOfFramesToCompose,e._frameCount<e._numberOfFramesToCompose?e._frameCount++:(e._syncRendering?e._scheduleDraw():e._draw(),n.release())}_createTextureArrays(){this._numberOfFramesToCompose=this._povEmulation?3:1,this._textures&&this._textures.forEach(t=>t&&this._gl.deleteTexture(t)),this._imageData&&this._imageData.forEach(t=>t&&t.release()),this._textures=new Array(this._numberOfFramesToCompose),this._imageData=new Array(this._numberOfFramesToCompose),this._imageDataGeneration=new Array(this._numberOfFramesToCompose),this._textureGeneration=new Array(this._numberOfFramesToCompose);for(let t=0;t<this._numberOfFramesToCompose;t++)this._imageDataGeneration[t]=0,this._textureGeneration[t]=-1}_reinit(){this._createTextureArrays(),this._createProgram(),this._allocateTextures(),this._configureTextures(),this._setupAttribs(),this._frameCount=0,this._currentFrameIndex=0}_scheduleDraw(){this._animationFrameHandle||(this._animationFrameHandle=requestAnimationFrame(()=>(this._draw(),this._animationFrameHandle=0)))}_cancelDraw(){0!==this._animationFrameHandle&&(cancelAnimationFrame(this._animationFrameHandle),this._animationFrameHandle=0)}_draw(){if(this._frameCount<this._numberOfFramesToCompose)return;const t=this._gl;for(let e=0;e<this._numberOfFramesToCompose;e++){const n=(this._currentFrameIndex-e-1+this._numberOfFramesToCompose)%this._numberOfFramesToCompose;this._textureGeneration[n]!==this._imageDataGeneration[n]&&(t.activeTexture(t[`TEXTURE${n}`]),t.bindTexture(t.TEXTURE_2D,this._textures[n]),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._imageData[n].get()),this._textureGeneration[n]=this._imageDataGeneration[n])}for(let e=0;e<this._numberOfFramesToCompose;e++)t.uniform1i(this._getUniformLocation(`u_Sampler${e}`),(this._currentFrameIndex+this._numberOfFramesToCompose-e-1)%this._numberOfFramesToCompose);t.uniform1f(this._getUniformLocation("u_Gamma"),this._gamma),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_STRIP,0,4)}_createProgram(){const t=this._gl,e=t.createShader(t.VERTEX_SHADER),n=t.createShader(t.FRAGMENT_SHADER),r=t.createProgram();if(t.shaderSource(e,"\n    attribute vec2 a_VertexPosition;\n    attribute vec2 a_TextureCoordinate;\n\n    varying vec2 v_TextureCoordinate;\n\n    void main() {\n        v_TextureCoordinate = a_TextureCoordinate;\n        gl_Position = vec4(a_VertexPosition, 0, 1);\n    }\n"),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))throw new Error(`failed to compile vertex shader: ${t.getShaderInfoLog(e)}`);if(t.shaderSource(n,this._povEmulation?"\n    precision mediump float;\n\n    varying vec2 v_TextureCoordinate;\n\n    uniform sampler2D u_Sampler0, u_Sampler1, u_Sampler2;\n    uniform float u_Gamma;\n\n    void main() {\n        vec4 compositedTexel =\n            0.4 * texture2D(u_Sampler0, v_TextureCoordinate) +\n            0.4 * texture2D(u_Sampler1, v_TextureCoordinate) +\n            0.2 * texture2D(u_Sampler2, v_TextureCoordinate);\n\n        gl_FragColor = vec4(pow(compositedTexel.rgb, vec3(u_Gamma)), 1.);\n    }\n":"\n    precision mediump float;\n\n    varying vec2 v_TextureCoordinate;\n\n    uniform sampler2D u_Sampler0;\n    uniform float u_Gamma;\n\n    void main() {\n        vec4 texel = texture2D(u_Sampler0, v_TextureCoordinate);\n\n        gl_FragColor = vec4(pow(texel.rgb, vec3(u_Gamma)), 1.);\n    }\n"),t.compileShader(n),!t.getShaderParameter(e,t.COMPILE_STATUS))throw new Error(`failed to compile fragment shader: ${t.getShaderInfoLog(n)}`);if(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error(`failed to link program: ${t.getProgramInfoLog(r)}`);t.useProgram(r),this._program&&t.deleteProgram(this._program),this._vertexShader&&t.deleteShader(this._vertexShader),this._fragmentShader&&t.deleteShader(this._fragmentShader),this._program=r,this._vertexShader=e,this._fragmentShader=n}_allocateTextures(){for(let t=0;t<this._numberOfFramesToCompose;t++)this._allocateTexture(t)}_configureTextures(){for(let t=0;t<this._numberOfFramesToCompose;t++)this._configureTexture(t)}_allocateTexture(t){const e=this._gl,n=e.createTexture();e.activeTexture(e[`TEXTURE${t}`]),e.bindTexture(e.TEXTURE_2D,n),this._textures[t]=n}_configureTexture(t){const e=this._gl;e.activeTexture(e[`TEXTURE${t}`]),e.bindTexture(e.TEXTURE_2D,this._textures[t]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this._interpolation?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,this._interpolation?e.LINEAR:e.NEAREST),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1)}_createBuffers(){const t=this._gl,e=t.createBuffer(),n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),t.STATIC_DRAW),this._vertexBuffer=e,this._textureCoordinateBuffer=n}_recalculateVertexBuffer(){const t=this._gl,e=this._canvas.width,n=this._canvas.height,r=e>0?2/e:1,i=n>0?2/n:1;let s,a,o,u;this._aspect*n<=e?(a=2,s=this._aspect*n*r,u=1,o=Math.floor(-this._aspect*n)/2*r):(a=e/this._aspect*i,s=2,u=Math.floor(e/this._aspect)/2*i,o=-1);const c=[o+s,u,o,u,o+s,u-a,o,u-a];t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW)}_getAttribLocation(t){const e=this._gl.getAttribLocation(this._program,t);if(e<0)throw new Error(`unable to locate attribute ${t}`);return e}_getUniformLocation(t){const e=this._gl.getUniformLocation(this._program,t);if(e<0)throw new Error(`unable to locate uniform ${t}`);return e}_setupAttribs(){const t=this._gl;t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.enableVertexAttribArray(this._getAttribLocation("a_VertexPosition")),t.vertexAttribPointer(this._getAttribLocation("a_VertexPosition"),2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._textureCoordinateBuffer),t.enableVertexAttribArray(this._getAttribLocation("a_TextureCoordinate")),t.vertexAttribPointer(this._getAttribLocation("a_TextureCoordinate"),2,t.FLOAT,!1,0,0)}}function up(t){return{type:0,swtch:t}}function cp(t){return{type:1,trigger:t}}class hp{constructor(t,e=hp.defaultMappings){this._target=t,this.toggleFullscreen=new Co,this.hardReset=new Co,this.togglePause=new Co,this._keydownListener=null,this._keyupListener=null,this._joystick0=null,this._joystick1=null,this._controlPanel=null,this._dispatchTable={},this._compiledMappings=new Map,this._compileMappings(e)}bind(t,e,n){this._joystick0||(this._joystick0=t,this._joystick1=e,this._controlPanel=n,this._updateActionTable(),this._keydownListener=t=>{if(!this._compiledMappings.has(t.keyCode))return;const e=(t.shiftKey?4:0)|(t.ctrlKey?1:0)|(t.altKey?2:0);if(!this._compiledMappings.get(t.keyCode).has(e))return;const n=this._compiledMappings.get(t.keyCode).get(e);if(void 0!==n){t.preventDefault();const e=this._dispatchTable[n];switch(e.type){case 0:e.swtch.toggle(!0);break;case 1:e.trigger.dispatch(void 0)}}},this._keyupListener=t=>{if(this._compiledMappings.has(t.keyCode))for(const e of this._compiledMappings.get(t.keyCode).values()){t.preventDefault();const n=this._dispatchTable[e];switch(n.type){case 0:n.swtch.toggle(!1)}}},this._target.addEventListener("keydown",this._keydownListener),this._target.addEventListener("keyup",this._keyupListener))}unbind(){this._joystick0&&(this._target.removeEventListener("keydown",this._keydownListener),this._target.removeEventListener("keyup",this._keyupListener),this._joystick0=this._joystick1=this._controlPanel=null,this._keydownListener=this._keyupListener=null)}_updateActionTable(){this._dispatchTable[12]=cp(this.toggleFullscreen),this._dispatchTable[13]=cp(this.hardReset),this._dispatchTable[14]=cp(this.togglePause),this._dispatchTable[0]=up(this._controlPanel.getSelectSwitch()),this._dispatchTable[1]=up(this._controlPanel.getResetButton()),this._dispatchTable[2]=up(this._joystick0.getLeft()),this._dispatchTable[3]=up(this._joystick0.getRight()),this._dispatchTable[4]=up(this._joystick0.getUp()),this._dispatchTable[5]=up(this._joystick0.getDown()),this._dispatchTable[10]=up(this._joystick0.getFire()),this._dispatchTable[6]=up(this._joystick1.getLeft()),this._dispatchTable[7]=up(this._joystick1.getRight()),this._dispatchTable[8]=up(this._joystick1.getUp()),this._dispatchTable[9]=up(this._joystick1.getDown()),this._dispatchTable[11]=up(this._joystick1.getFire())}_compileMappings(t){const e=(t,e,n)=>{if(0!=(-8&n))throw new Error(`invalid modifier set ${n}`);this._compiledMappings.has(e)||this._compiledMappings.set(e,new Map),this._compiledMappings.get(e).set(n,t)};t.forEach(t=>{const n=t.action;(Array.isArray(t.spec)?t.spec:[t.spec]).forEach(t=>e(n,"object"==typeof t?t.keycode:t,"object"==typeof t?t.modifiers:0))})}}!function(t){t.defaultMappings=[{action:0,spec:{keycode:32,modifiers:4}},{action:1,spec:{keycode:13,modifiers:4}},{action:2,spec:[65,37]},{action:3,spec:[68,39]},{action:4,spec:[87,38]},{action:5,spec:[83,40]},{action:10,spec:[32,86]},{action:6,spec:74},{action:7,spec:76},{action:8,spec:73},{action:9,spec:75},{action:11,spec:66},{action:12,spec:13},{action:13,spec:{keycode:82,modifiers:4}},{action:14,spec:80}]}(hp||(hp={}));class lp{constructor(t){this._cache=t,this._context=null,this._source=null,this._gain=null,this._audio=null,this._volume=0,this._masterVolume=1}init(t,e){this._context=t,this._gain=this._context.createGain(),this._gain.connect(e)}bind(t){this._audio||(this._audio=t,this._volume=this._audio.getVolume(),this._updateGain(),this._audio.volumeChanged.addHandler(lp._onVolumeChanged,this),this._audio.bufferChanged.addHandler(lp._onBufferChanged,this),this._audio.stop.addHandler(lp._onStop,this))}unbind(){this._audio&&(this._audio.volumeChanged.removeHandler(lp._onVolumeChanged,this),this._audio.bufferChanged.removeHandler(lp._onBufferChanged,this),this._audio.stop.removeHandler(lp._onStop,this),this._source&&(this._source.stop(),this._source=null),this._audio=null)}setMasterVolume(t){this._masterVolume=t,this._updateGain()}static _onVolumeChanged(t,e){e._volume=t,e._updateGain()}static _onBufferChanged(t,e){if(!e._cache.has(t)){const n=e._audio.getBuffer(t),r=e._context.createBuffer(1,n.getLength(),n.getSampleRate());r.getChannelData(0).set(n.getContent()),e._cache.set(t,r)}const n=e._cache.get(t),r=e._context.createBufferSource();e._source&&e._source.stop(),r.loop=!0,r.buffer=n,r.connect(e._gain),r.start(),e._source=r}static _onStop(t,e){e._source&&(e._source.stop(),e._source=null)}_updateGain(){this._gain.gain.value=this._volume*this._masterVolume}}class fp{constructor(t){this._capacity=t,this._size=0,this._index=0,this._buffer=new Array(this._capacity);for(let t=0;t<this._capacity;t++)this._buffer[t]=null}size(){return this._size}pop(){if(0===this._size)return;const t=this._buffer[this._index];return this._buffer[this._index]=null,this._index=(this._index+1)%this._capacity,this._size--,t}push(t){return this._size===this._capacity&&this.pop(),this._buffer[(this._index+this._size++)%this._capacity]=t,this}forEach(t){for(let e=0;e<this._size;e++)t(this._buffer[(this._index+e)%this._capacity]);return this}clear(){for(let t=0;t<this._capacity;t++)this._buffer[t]=null;return this._size=0,this._index=0,this}}class dp{constructor(){this._buffer=new Float32Array(2),this._fractionalIndex=0,this._needsData=!1,this._ratio=0,this.reset(1,1)}reset(t,e){this._ratio=t/e,this._needsData=!1,this._fractionalIndex=0;for(let t=0;t<2;t++)this._buffer[t]=0}get(){const t=(1-this._fractionalIndex)*this._buffer[0]+this._fractionalIndex*this._buffer[1];return this._fractionalIndex+=this._ratio,this._fractionalIndex>1&&(this._fractionalIndex-=1,this._needsData=!0),t}push(t){this._buffer[0]=this._buffer[1],this._buffer[1]=t,this._needsData=!1}needsData(){return this._needsData}}class pp{constructor(t=1024){this._hostFragmentSize=t,this._outputSampleRate=0,this._bufferSize=0,this._volume=1,this._gain=null,this._processor=null,this._bufferUnderrun=!1,this._fragmentRing=null,this._fragmentSize=0,this._inputSampleRate=0,this._fragmentIndex=0,this._currentFragment=null,this._lastFragment=null,this._resampler=new dp}init(t,e){this._outputSampleRate=t.sampleRate,this._gain=t.createGain(),this._gain.gain.value=this._volume,this._gain.connect(e),this._processor=t.createScriptProcessor(this._hostFragmentSize,1,1),this._bufferSize=this._processor.bufferSize,this._processor.connect(this._gain),this._processor.onaudioprocess=t=>this._processAudio(t),t.createBuffer(1,1,t.sampleRate).getChannelData(0).set([0])}bind(t){this.unbind(),this._audio=t,this._fragmentSize=t.getFrameSize(),this._inputSampleRate=t.getSampleRate(),this._fragmentIndex=0,this._lastFragment=null,this._bufferUnderrun=!0,this._fragmentRing=new fp(Math.ceil(4*this._bufferSize/this._outputSampleRate/this._fragmentSize*this._inputSampleRate)),this._audio.newFrame.addHandler(pp._onNewFragment,this),this._resampler.reset(this._inputSampleRate,this._outputSampleRate)}unbind(){this._audio&&(this._audio.newFrame.removeHandler(pp._onNewFragment,this),this._lastFragment&&(this._lastFragment.release(),this._lastFragment=null),this._currentFragment&&(this._currentFragment.release(),this._currentFragment=null),this._fragmentRing&&(this._fragmentRing.forEach(t=>t.release()),this._fragmentRing.clear(),this._fragmentRing=null))}setMasterVolume(t){this._volume=t}static _onNewFragment(t,e){e._fragmentRing.push(t),e._currentFragment||(e._currentFragment=e._fragmentRing.pop(),e._fragmentIndex=0)}_processAudio(t){if(!this._audio)return;const e=t.outputBuffer.getChannelData(0);let n=0;const r=t=>{const r=this._lastFragment&&this._lastFragment.get();for(;n<t;)this._resampler.needsData()&&(this._resampler.push(this._audio&&this._audio.isPaused()||!r?0:r[this._fragmentIndex++]*this._volume),this._fragmentIndex>=this._fragmentSize&&(this._fragmentIndex=0)),e[n++]=this._resampler.get()};this._currentFragment&&this._bufferUnderrun&&(r(this._bufferSize>>>1),this._bufferUnderrun=!1);let i=this._currentFragment&&this._currentFragment.get();for(;n<this._bufferSize&&this._currentFragment;)this._resampler.needsData()&&(this._resampler.push(i[this._fragmentIndex++]*this._volume),this._fragmentIndex>=this._fragmentSize&&(this._fragmentIndex=0,this._lastFragment&&this._lastFragment.release(),this._lastFragment=this._currentFragment,this._currentFragment=this._fragmentRing.pop(),i=this._currentFragment&&this._currentFragment.get())),e[n++]=this._resampler.get();n<this._bufferSize&&(this._bufferUnderrun=!0),r(this._bufferSize)}}const _p="safari"in window,gp=!!navigator.platform.match(/iPhone|iPad|iPod/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,bp=gp||_p,vp=["touchstart","click","keydown"],mp=window.AudioContext||window.webkitAudioContext;function yp(t,e=500){return new Promise(n=>{t.then(()=>n()),setTimeout(n,e)})}class wp{constructor(){if(this._interactionListener=()=>{const t=this.context;this.interactionRequired=!1,vp.forEach(t=>document.removeEventListener(t,this._interactionListener)),this.mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){return yield yp(t.resume()),new Promise(e=>setTimeout(()=>a(this,void 0,void 0,(function*(){yield yp(t.suspend()),e()})),100))})))},this.mutex=new Zh,this.context=null,this.interactionRequired=!0,mp){this.context=new mp;try{this.context.destination.channelCount=1}catch(t){console.warn("audio driver: failed to set channel count")}vp.forEach(t=>document.addEventListener(t,this._interactionListener))}}stopListening(){vp.forEach(t=>document.removeEventListener(t,this._interactionListener))}}let Ap=bp?new wp:null;class kp{constructor(t=0,e=0,n){this._touchListener=()=>{vp.forEach(t=>document.removeEventListener(t,this._touchListener,!0)),this._context&&(this._context.resume(),setTimeout(()=>{this._mutex.runExclusive(()=>this._suspended?this._context.suspend():this._context.resume())},10))},this._context=null,this._merger=null,this._waveformChannels=null,this._pcmChannels=null,this._channels=null,this._cache=new Map,this._mutex=new Zh,this._suspended=!0,this._isBound=!1,this._waveformChannels=new Array(t),this._pcmChannels=new Array(e);for(let e=0;e<t;e++)this._waveformChannels[e]=new lp(this._cache);for(let t=0;t<e;t++)this._pcmChannels[t]=new pp(n);this._channels=[...this._waveformChannels,...this._pcmChannels]}init(){if(Ap){const t=Ap;Ap=new wp,this._context=t.context,t.stopListening(),this._mutex=t.mutex,t.interactionRequired&&vp.forEach(t=>document.addEventListener(t,this._touchListener,!0))}else{if(!mp)throw new Error("web audio is not supported by runtime");this._context=new mp;try{this._context.destination.channelCount=1}catch(t){console.warn("audio driver: failed to set channel count")}}this._merger=this._context.createChannelMerger(this._channels.length),this._merger.connect(this._context.destination),this._channels.forEach(t=>t.init(this._context,this._merger))}bind(t=[],e=[]){if(!this._isBound){if(t.length!==this._waveformChannels.length)throw new Error(`invalid number of waveform sources: expected ${this._waveformChannels.length}, got ${t.length}`);if(e.length!==this._pcmChannels.length)throw new Error(`invalid number of waveform sources: expected ${this._pcmChannels.length}, got ${e.length}`);this._waveformChannels.forEach((e,n)=>e.bind(t[n])),this._pcmChannels.forEach((t,n)=>t.bind(e[n])),this._isBound=!0,this.resume()}}unbind(){this._isBound&&(this._channels.forEach(t=>t.unbind()),this._isBound=!1,this.pause())}setMasterVolume(t,e){this._channels[t].setMasterVolume(e)}pause(){return this._mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){this._suspended||(this._suspended=!0,yield yp(this._context.suspend()))})))}resume(){return this._mutex.runExclusive(()=>a(this,void 0,void 0,(function*(){this._suspended&&(this._suspended=!1,yield yp(this._context.resume()))})))}close(){this._mutex.runExclusive(()=>this._context.close())}}class Cp{constructor(t){this._fragmentSize=t,this._pcmAudio=!1,this._volume=1}init(){}bind(t,e){if(!this._channels){this._channels=[...e],this._driver&&this._pcmAudio===t||(this._driver&&this._driver.close(),this._driver=t?new kp(0,this._channels.length,this._fragmentSize):new kp(this._channels.length,0,this._fragmentSize),this._driver.init()),t?this._driver.bind([],this._channels):this._driver.bind(this._channels,[]);for(let t=0;t<this._channels.length;t++)this._driver.setMasterVolume(t,this._volume);this._pcmAudio=t}}unbind(){this._channels&&(this._driver.unbind(),this._channels=null)}setMasterVolume(t){if(this._volume=t,this._channels)for(let t=0;t<this._channels.length;t++)this._driver.setMasterVolume(t,this._volume)}getMasterVolume(){return this._volume}pause(){return a(this,void 0,void 0,(function*(){this._driver&&(yield this._driver.pause())}))}resume(){return a(this,void 0,void 0,(function*(){this._driver&&(yield this._driver.resume())}))}}var Sp=U((function(t){
/*!
    * screenfull
    * v5.0.1 - 2020-01-19
    * (c) Sindre Sorhus; MIT License
    */
!function(){var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=t.exports,r=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,s={};r<i;r++)if((t=n[r])&&t[1]in e){for(r=0;r<t.length;r++)s[n[0][r]]=t[r];return s}return!1}(),i={change:r.fullscreenchange,error:r.fullscreenerror},s={request:function(t){return new Promise(function(n,i){var s=function(){this.off("change",s),n()}.bind(this);this.on("change",s),t=t||e.documentElement,Promise.resolve(t[r.requestFullscreen]()).catch(i)}.bind(this))},exit:function(){return new Promise(function(t,n){if(this.isFullscreen){var i=function(){this.off("change",i),t()}.bind(this);this.on("change",i),Promise.resolve(e[r.exitFullscreen]()).catch(n)}else t()}.bind(this))},toggle:function(t){return this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,n){var r=i[t];r&&e.addEventListener(r,n,!1)},off:function(t,n){var r=i[t];r&&e.removeEventListener(r,n,!1)},raw:r};r?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(e[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(e[r.fullscreenEnabled])}}}),n?t.exports=s:window.screenfull=s):n?t.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()}));Sp.isEnabled;const Ep=gp,xp=Sp;class Tp{constructor(t,e=1e5,n="stellerator-fullscreen"){this._videoDriver=t,this._zIndex=e,this._fullscreenClass=n,this._resizeListener=()=>{this._resizeHandle||(this._resizeHandle=setTimeout(()=>{this._resizeHandle=null,this._adjustSizeForFullscreen()},100))},this._resizeHandle=null,this._changeListener=this._onChange.bind(this),this._engaged=!1}engage(){this._engaged||(this._engaged=!0,Ep||!xp?(this._adjustSizeForFullscreen(),window.addEventListener("resize",this._resizeListener),this._engaged=!0):(xp.on("change",this._changeListener),xp.request(this._videoDriver.getCanvas())))}disengage(){this._engaged&&(Ep||!xp?(this._resetSize(),window.removeEventListener("resize",this._resizeListener),this._engaged=!1):xp.exit())}toggle(){this._engaged?this.disengage():this.engage()}isEngaged(){return this._engaged}_onChange(){xp&&(xp.isFullscreen?(window.addEventListener("resize",this._resizeListener),this._adjustSizeForFullscreen()):(this._resetSize(),window.removeEventListener("resize",this._resizeListener),xp.off("change",this._changeListener),this._engaged=!1))}_resetSize(){const t=this._videoDriver.getCanvas();this._resizeHandle&&(clearTimeout(this._resizeHandle),this._resizeHandle=null),t.style.width="",t.style.height="",t.style.maxWidth="",t.style.maxHeight="",Ep&&(t.style.position="",t.style.top="",t.style.left="",t.style.zIndex=""),document.body.classList.remove(this._fullscreenClass),setTimeout(()=>this._videoDriver.resize(),0)}_adjustSizeForFullscreen(){const t=this._videoDriver.getCanvas();this._videoDriver.resize(window.innerWidth,window.innerHeight),t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",t.style.maxWidth=window.innerWidth+"px",t.style.maxHeight=window.innerHeight+"px",Ep&&(t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.zIndex=""+this._zIndex),document.body.classList.add(this._fullscreenClass)}}class Ip{constructor(t=500,e=200){this._maxTapLength=t,this._timeout=e,this.trigger=new Co,this._dispatch=!1,this._touching=!1,this._lastTouchEligible=!1,this._lastTouchStart=0,this._lastTouchEnd=0}startTouch(){this._lastTouchStart=Date.now(),this._touching||(this._touching=!0,this._dispatch=this._lastTouchEligible&&this._lastTouchStart-this._lastTouchEnd<this._timeout)}endTouch(){this._lastTouchEnd=Date.now(),this._dispatch&&(this._dispatch=!1,this.trigger.dispatch(void 0)),this._touching&&(this._touching=!1,this._lastTouchEligible=this._lastTouchStart-this._lastTouchEnd<this._maxTapLength)}cancelTouch(){this.endTouch(),this._lastTouchEligible=!1}isDispatching(){return this._dispatch}}class Bp{constructor(t,e=15,n=!1){this._canvas=t,this._joystickSensitivity=e,this._leftHanded=n,this._onTouchStart=t=>{let e=!1;for(let n=0;n<t.changedTouches.length;n++){const r=new Op(t.changedTouches.item(n),this._canvas),i=r.touch.identifier;if((this._leftHanded?r.x>.5:r.x<=.5)?r.y<=.5?r.type="alt":r.type=this._isAlt?"pause":"fire":r.y<=.5?r.type=this._isAlt?"select":"joystick":r.type=this._isAlt?"reset":"joystick",!this._pendingTouches.has(i)&&!this._pendingTouches.has(r.type)){switch(this._pendingTouches.set(i,r),this._pendingTouches.set(r.type,r),r.type){case"alt":this._isAlt=!0,this._fullscreenDoubleTapDetector.startTouch();break;case"fire":this._joystick.getFire().toggle(!0);break;case"pause":this.togglePause.dispatch(void 0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"select":this._select.toggle(!0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"reset":this._reset.toggle(!0),this._fullscreenDoubleTapDetector.cancelTouch();break;case"joystick":break;default:throw new Error("invalid touch type")}(this._cancelEvent(r)||this._fullscreenDoubleTapDetector.isDispatching())&&(e=!0)}}e&&t.preventDefault()},this._onTouchEnd=t=>{let e=!1;for(let n=0;n<t.changedTouches.length;n++){const r=this._pendingTouches.get(t.changedTouches.item(n).identifier);if(r){switch((this._cancelEvent(r)||this._fullscreenDoubleTapDetector.isDispatching())&&(e=!0),r.type){case"alt":this._isAlt=!1,this._fullscreenDoubleTapDetector.endTouch();break;case"fire":this._joystick.getFire().toggle(!1);break;case"select":this._select.toggle(!1);break;case"reset":this._reset.toggle(!1);break;case"joystick":this._joystick.getDown().toggle(!1),this._joystick.getUp().toggle(!1),this._joystick.getLeft().toggle(!1),this._joystick.getRight().toggle(!1);break;case"pause":break;default:throw new Error("invalid touch type")}this._pendingTouches.delete(r.type),this._pendingTouches.delete(r.touch.identifier)}}e&&t.preventDefault()},this._onTouchMove=t=>{let e=!1;for(let n=0;n<t.changedTouches.length;n++){const r=t.changedTouches.item(n),i=this._pendingTouches.get(r.identifier);if(!i)continue;if(this._cancelEvent(i)&&(e=!0),"joystick"!==i.type)continue;const s=r.clientX-i.x0,a=r.clientY-i.y0,o=Math.sqrt(s*s+a*a),u=Math.abs(a/o),c=Math.abs(s/o),h=o>this._joystickSensitivity;this._joystick.getLeft().toggle(h&&s<0&&c>.5),this._joystick.getRight().toggle(h&&s>0&&c>.5),this._joystick.getUp().toggle(h&&a<0&&u>.5),this._joystick.getDown().toggle(h&&a>0&&u>.5),o>3*this._joystickSensitivity&&(i.x0+=s/o*(o-3*this._joystickSensitivity),i.y0+=a/o*(o-3*this._joystickSensitivity))}e&&t.preventDefault()},this.togglePause=new Co,this._fullscreenDoubleTapDetector=new Ip,this._bound=!1,this._joystick=null,this._select=null,this._reset=null,this._isAlt=!1,this._pendingTouches=new Map,this.toggleFullscreen=this._fullscreenDoubleTapDetector.trigger}static isSupported(){return"ontouchstart"in window}bind(t,e){this._bound||(this._bound=!0,this._joystick=t,this._select=e.getSelectSwitch(),this._reset=e.getResetButton(),this._bindListeners())}unbind(){this._bound&&(this._unbindListeners(),this._bound=!1,this._joystick=this._reset=this._select=null)}_bindListeners(){this._canvas.addEventListener("touchstart",this._onTouchStart),this._canvas.addEventListener("touchend",this._onTouchEnd),this._canvas.addEventListener("touchmove",this._onTouchMove)}_unbindListeners(){this._canvas.removeEventListener("touchstart",this._onTouchStart),this._canvas.removeEventListener("touchend",this._onTouchEnd),this._canvas.removeEventListener("touchmove",this._onTouchMove)}_cancelEvent(t){return"alt"!==t.type}}class Op{constructor(t,e){this.touch=t,this.type="unknown";const n=e.getBoundingClientRect();this.x=(t.clientX-n.left)/n.width,this.y=(t.clientY-n.top)/n.height,this.x0=t.clientX,this.y0=t.clientY}}class Rp{constructor(){this._x=-1,this._listener=this._onDocumentMouseMove.bind(this)}bind(t){this._paddle||(this._paddle=t,this._x=-1,document.addEventListener("mousemove",this._listener))}unbind(){this._paddle&&(document.removeEventListener("mousemove",this._listener),this._paddle=null)}_onDocumentMouseMove(t){if(this._x>=0){const e=t.screenX-this._x;let n=this._paddle.getValue();n+=-e/window.innerWidth/.9,n<0&&(n=0),n>1&&(n=1),this._paddle.setValue(n)}this._x=t.screenX}}var Pp;function Dp(t){return{state:"error",error:t}}function Mp(t,e){const n=t.cpuEmulation||e.cpuEmulation;switch(n){case"cycle":return jd.Type.stateMachine;case"instruction":return jd.Type.batchedAccess;default:throw new Error(`cannot happen: invalid cpu emulation mod e${n}`)}}function Fp(t){switch(t.tvMode){case"ntsc":return 0;case"pal":return 1;case"secam":return 2;default:throw new Error(`cannot happen: invalid TV mode ${t.tvMode}`)}}function jp(t,e){return{tvMode:Fp(t),enableAudio:t.volume*e.volume>0,randomSeed:void 0===t.rngSeed?-1:t.rngSeed,emulatePaddles:t.emulatePaddles,frameStart:void 0===t.firstVisibleLine?-1:t.firstVisibleLine,pcmAudio:"pcm"===(t.audioEmulation||e.audioEmulation),cpuType:Mp(t,e)}}let Lp=Pp=class{constructor(t){this._storage=t,this._onEmulationStarted=({hash:t,switches:e})=>a(this,void 0,void 0,(function*(){try{yield this._emulationMutex.runExclusive(()=>this._startEmulation(t,e))}catch(t){this._ports.onEmulationStateChange_.send(Dp(t.message))}})),this._onEmulationStopped=()=>this._emulationMutex.runExclusive(()=>this._stopEmulation()),this._onEmulationPaused=()=>this._emulationMutex.runExclusive(()=>this._pauseEmulation()),this._onEmulationResumed=()=>this._emulationMutex.runExclusive(()=>this._resumeEmulation()),this._onEmulationReset=()=>this._emulationMutex.runExclusive(()=>this._resetEmulation()),this._onToggleFullscreen=()=>this._fullscreenDriver&&this._fullscreenDriver.toggle(),this._onSetLimitFramerate=t=>this._emulationService.setRateLimit(t),this._onInputTogglePause=()=>this._ports.onInputDriverEvent_.send("pause"),this._onInputReset=()=>this._ports.onInputDriverEvent_.send("reset"),this._onInputToggleFullscreen=()=>this._ports.onInputDriverEvent_.send("fullscreen"),this._onWindowResize=()=>this._videoDriver&&this._videoDriver.resize(),this._onUpdateConsoleSwitches=t=>this._emulationMutex.runExclusive(()=>this._updateConsoleSwitches(t)),this._onMutation=t=>{if(!t.some(t=>t.addedNodes))return;const e=document.getElementById("stellerator-canvas");e===this._canvas||this._handledCanvasElements.has(e)||(e&&this._handledCanvasElements.add(e),e&&this._canvas?this._canvasMutex.runExclusive(()=>this._rebindCanvas(e)):e?this._canvasMutex.runExclusive(()=>this._bindCanvas(e)):this._canvasMutex.runExclusive(()=>this._unbindCanvas()))},this._emulationMutex=new Zh,this._canvasMutex=new Zh,this._driverManager=new sp,this._currentCartridgeHash=null,this._canvas=null,this._videoDriver=null,this._fullscreenDriver=null,this._mutationObserver=new MutationObserver(this._onMutation),this._keyboardDriver=new hp(document),this._paddleDriver=new Rp,this._audioDriver=new Cp,this._touchDriver=null,this._currentConfig=null,this._handledCanvasElements=new WeakSet,this._emulationService=new ip("worker/stellerator.min.js"),this._emulationServiceReady=this._emulationService.init(),this._driverManager.bind(this._emulationService),this._audioDriver.init(),this._keyboardDriver.hardReset.addHandler(this._onInputReset),this._keyboardDriver.togglePause.addHandler(this._onInputTogglePause),this._keyboardDriver.toggleFullscreen.addHandler(this._onInputToggleFullscreen),window.addEventListener("resize",this._onWindowResize)}init(t){this._ports=t,t.startEmulation_.subscribe(this._onEmulationStarted),t.stopEmulation_.subscribe(this._onEmulationStopped),t.pauseEmulation_.subscribe(this._onEmulationPaused),t.resumeEmulation_.subscribe(this._onEmulationResumed),t.resetEmulation_.subscribe(this._onEmulationReset),t.toggleFullscreen_.subscribe(this._onToggleFullscreen),t.setLimitFramerate_.subscribe(this._onSetLimitFramerate),t.updateConsoleSwitches_.subscribe(this._onUpdateConsoleSwitches),this._emulationService.stateChanged.addHandler(Pp._onEmulationStateChange,this),this._emulationService.frequencyUpdate.addHandler(Pp._onFrequencyChange,this),this._mutationObserver.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0})}updateCartridge(t){return a(this,void 0,void 0,(function*(){if(t.hash!==this._currentCartridgeHash)return;switch(this._emulationService.getState()){case Yh.State.running:case Yh.State.paused:break;default:return}const e=yield this._storage.getSettings();this._audioDriver.setMasterVolume(t.volume*e.volume/1e4),this._videoDriver&&this._videoDriver.enablePovEmulation(void 0===t.phosphorEmulation?e.phosphorEmulation:t.phosphorEmulation)}))}updateSettings(t){return a(this,void 0,void 0,(function*(){switch(this._emulationService.getState()){case Yh.State.running:case Yh.State.paused:break;default:return}const e=yield this._storage.getCartridge(this._currentCartridgeHash);this._audioDriver.setMasterVolume(e.volume*t.volume/1e4),this._videoDriver&&this._videoDriver.enablePovEmulation(void 0===e.phosphorEmulation?t.phosphorEmulation:e.phosphorEmulation).enableInterpolation(t.smoothScaling).enableSyncRendering(t.videoSync).setGamma(t.gammaCorrection)}))}static _onEmulationStateChange(t,e){e._ports.onEmulationStateChange_.send(e._emulationState(t)),t===Yh.State.running?e._audioDriver.resume():e._audioDriver.pause()}static _onFrequencyChange(t,e){e._emulationService.getState()===Yh.State.running&&e._ports.onEmulationStateChange_.send({state:"running",frequency:t})}_startEmulation(t,e){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.stop();const[n,r,i]=yield Promise.all([this._storage.getCartridge(t),this._storage.getCartridgeImage(t),this._storage.getSettings()]);if(!n||!r)throw new Error(`invalid cartridge hash ${t}`);const s=jp(n,i);this._currentConfig&&this._currentConfig.pcmAudio===s.pcmAudio||(this._driverManager.removeDriver(this._audioDriver),this._driverManager.addDriver(this._audioDriver,(t,e)=>e.bind(s.pcmAudio,s.pcmAudio?[t.getPCMChannel()]:t.getWaveformChannels()))),this._audioDriver.setMasterVolume(n.volume*i.volume/1e4),this._currentConfig=jp(n,i),yield this._emulationService.start(r,this._currentConfig,n.cartridgeType),this._updateConsoleSwitches(e),yield this._emulationService.resume(),this._currentCartridgeHash=t}))}_stopEmulation(){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.stop(),this._currentCartridgeHash=null}))}_pauseEmulation(){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.pause()}))}_resumeEmulation(){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,this._emulationService.getState()===Yh.State.paused&&(yield this._emulationService.resume())}))}_resetEmulation(){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,yield this._emulationService.reset()}))}_updateConsoleSwitches(t){const e=this._emulationService.getEmulationContext();if(!e)return;const n=e.getControlPanel();n.getDifficultySwitchP0().toggle("pro"===t.difficultyP0),n.getDifficultySwitchP1().toggle("pro"===t.difficultyP1),n.getColorSwitch().toggle("bw"===t.color)}_createAndBindVideoDriver(t){return a(this,void 0,void 0,(function*(){yield this._emulationServiceReady,this._removeVideoDriver();const[e,n]=yield Promise.all([this._storage.getSettings(),this._currentCartridgeHash&&this._storage.getCartridge(this._currentCartridgeHash)]);this._canvas=t,this._videoDriver=new op(this._canvas,{gamma:e.gammaCorrection,povEmulation:n&&void 0!==n.phosphorEmulation?n.phosphorEmulation:e.phosphorEmulation}),this._videoDriver.init().enableInterpolation(e.smoothScaling).enableSyncRendering(e.videoSync),this._driverManager.addDriver(this._videoDriver,(t,e)=>e.bind(t.getVideo())),this._fullscreenDriver=new Tp(this._videoDriver)}))}_bindCanvas(t){var e;return a(this,void 0,void 0,(function*(){const n=yield this._storage.getSettings();yield this._createAndBindVideoDriver(t),(null!=(e=n.touchControls)?e:Bp.isSupported())&&(this._touchDriver=new Bp(t,n.virtualJoystickSensitivity,n.leftHanded),this._touchDriver.toggleFullscreen.addHandler(this._onInputToggleFullscreen),this._touchDriver.togglePause.addHandler(this._onInputTogglePause),this._driverManager.addDriver(this._touchDriver,(t,e)=>e.bind(t.getJoystick(0),t.getControlPanel()))),this._driverManager.addDriver(this._keyboardDriver,(t,e)=>e.bind(t.getJoystick(0),t.getJoystick(1),t.getControlPanel())).addDriver(this._paddleDriver,(t,e)=>e.bind(t.getPaddle(0)))}))}_rebindCanvas(t){return a(this,void 0,void 0,(function*(){yield this._createAndBindVideoDriver(t)}))}_unbindCanvas(){return a(this,void 0,void 0,(function*(){this._touchDriver&&(this._driverManager.removeDriver(this._touchDriver),this._touchDriver=null),this._driverManager.removeDriver(this._keyboardDriver).removeDriver(this._paddleDriver),yield this._removeVideoDriver(),this._handledCanvasElements.delete(this._canvas),this._canvas=null}))}_removeVideoDriver(){this._videoDriver&&(this._driverManager.removeDriver(this._videoDriver),this._videoDriver=null,this._fullscreenDriver.disengage(),this._fullscreenDriver=null)}_emulationState(t){switch(t){case Yh.State.error:return Dp(this._emulationService.getLastError().message);case Yh.State.running:return{state:"running"};case Yh.State.paused:return{state:"paused"};case Yh.State.stopped:return{state:"stopped"};default:throw new Error(`cannot happen: invalid emulation state ${t}`)}}};Lp=Pp=r([te(),i(0,ee(qh)),s("design:paramtypes",[qh])],Lp);var Np=Lp,Up=U((function(t,e){!function(){function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof L&&L.global===L?L:void 0,s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,s,a){var o=i.URL||i.webkitURL,u=document.createElement("a");s=s||t.name||"download",u.download=s,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?r(u):n(u.href)?e(t,s,a):r(u,u.target="_blank")):(u.href=o.createObjectURL(t),setTimeout((function(){o.revokeObjectURL(u.href)}),4e4),setTimeout((function(){r(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,s){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,s),i);else if(n(t))e(t,i,s);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,n,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,o=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},c.readAsDataURL(t)}else{var h=i.URL||i.webkitURL,l=h.createObjectURL(t);s?s.location=l:location.href=l,s=null,setTimeout((function(){h.revokeObjectURL(l)}),4e4)}});i.saveAs=s.saveAs=s,t.exports=s}()}));let zp=class{constructor(t,e){this._storage=t,this._emulation=e,this._onCartridgeUpdated=t=>a(this,void 0,void 0,(function*(){return this._mutex.runExclusive(()=>this._updateCartridge(t))})),this._onCartridgeDeleted=t=>this._storage.deleteCartridge(t),this._onDeleteAllCartridges=()=>this._storage.deleteAllCartridges(),this._onSaveCartridge=t=>a(this,void 0,void 0,(function*(){const[e,n]=yield Promise.all([this._storage.getCartridge(t),this._storage.getCartridgeImage(t)]);e&&n&&Up.saveAs(new Blob([n],{type:"application/octet-stream"}),e.name+".bin",{autoBom:!1})})),this._mutex=new Zh}init(t){t.updateCartridge_.subscribe(this._onCartridgeUpdated),t.deleteCartridge_.subscribe(this._onCartridgeDeleted),t.deleteAllCartridges_.subscribe(this._onDeleteAllCartridges),t.saveCartridge_.subscribe(this._onSaveCartridge)}_updateCartridge(t){return a(this,void 0,void 0,(function*(){yield this._storage.updateCartridge(t),yield this._emulation.updateCartridge(t)}))}};zp=r([te(),i(0,ee(qh)),i(1,ee(Np)),s("design:paramtypes",[qh,Np])],zp);var $p=zp;let Hp=class{constructor(t,e){this._storage=t,this._emulation=e,this._onSettingsUpdate=t=>this._mutex.runExclusive(()=>this.updateSettings(t)),this._mutex=new Zh}init(t){t.updateSettings_.subscribe(this._onSettingsUpdate)}updateSettings(t){return a(this,void 0,void 0,(function*(){yield this._storage.saveSettings(t),yield this._emulation.updateSettings(t)}))}};Hp=r([te(),i(0,ee(qh)),i(1,ee(Np)),s("design:paramtypes",[qh,Np])],Hp);var Wp=Hp;navigator.serviceWorker&&navigator.serviceWorker.register("./service-worker.js",{scope:"./"}),window.addEventListener("load",(function(){return a(this,void 0,void 0,(function*(){ct||(ut(document.body),ct=new MutationObserver(t=>t.forEach(t=>t.addedNodes.forEach(ut))),ct.observe(document.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0}));const t=ht.getAllTypes().map(t=>({key:t,description:ht.describeCartridgeType(t)})),e=new Xt({autoBindInjectable:!0,defaultScope:"Singleton"}),n=e.get(qh);let r,i;try{[r,i]=yield Promise.all([n.getAllCartridges(),n.getSettings()])}catch(t){yield n.dropDatabase(),[r,i]=yield Promise.all([n.getAllCartridges(),n.getSettings()])}const s="1.0.0-beta.7+master.d64db8d7".replace(/^(.*)\+.*\.([0-9a-fA-F]+)$/,"$1 build $2"),a=localStorage.getItem("stellerator-ng-version"),o=a&&a!==s;localStorage.setItem("stellerator-ng-version",s);const{ports:u}=H.Stellerator.Main.init({flags:{cartridges:r,cartridgeTypes:t,settings:i,defaultSettings:Hh,touchSupport:Bp.isSupported(),version:s,wasUpdated:o}});e.get(re).init(u),e.get(ae).init(u),e.get(Qh).init(u),e.get($p).init(u),e.get(Wp).init(u),e.get(Np).init(u),u.scrollToTop_.subscribe(()=>window.scrollTo(0,0)),u.blurCurrentElement_.subscribe(()=>document.activeElement.blur())}))}))}();
//# sourceMappingURL=app.js.map
